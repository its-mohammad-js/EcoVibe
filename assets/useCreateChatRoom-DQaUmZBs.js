import{r as I,a as g,_ as h}from"./index-BktEY0AR.js";import{g as b,F as R,r as l,v as y}from"./index.esm2017-k721lsQk.js";const O=()=>{const[c,t]=I.useState(!1),[f,n]=I.useState(null),s=g(e=>e.userData);return{createRoom:async(e,u)=>{t(!0),n(null);try{const r=b(),m=`FROM:${s.userId}&TO:${e.userId}`,p=(await R(l(r,"rooms"))).val()||{},a=Object.entries(p).find(([,o])=>{var d,i;return((d=o.members)==null?void 0:d.includes(s.userId))&&((i=o.members)==null?void 0:i.includes(e.userId))});if(a)u(a[1]);else{const o={roomId:m,[s.userId]:{...s.personalInformation,...s.businessInformation,userId:s.userId},[e.userId]:{...e,userType:e.userType,userId:e.userId},members:[s.userId,e.userId]};await y(l(r,`rooms/${m}`),o),u(o)}}catch(r){console.error(r),n(r.message),h.error("There was an error creating the chat room.")}finally{t(!1)}},isLoading:c,error:f}};export{O as u};
