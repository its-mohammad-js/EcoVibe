import{r as l,u as p,aq as j,j as e,b as h,s as N,ar as y,q as S,_ as w}from"./index-DWSuo8YA.js";import{g as C,r as R,a as I,u as M}from"./index.esm2017-X8zW3DNY.js";import"./lodash-CFf_Pqo5.js";import"./index.esm-DPhh6X-f.js";const L=l.createContext();function $({children:u}){var o;const[n,s]=l.useState(null),[d,r]=l.useState(null),[t,a]=l.useState(null),x=p(),i=j();return(o=i==null?void 0:i.state)==null||o.roomId,l.useEffect(()=>{n&&x(i.pathname,{roomId:null})},[n]),e.jsx(L.Provider,{value:{rooms:null,status:null,selectedRoom:n,setSelectedRoom:s,selectedMessage:d,setSelectedMessage:r,messageMode:t,setMode:a},children:u})}function k({openSideNav:u,deleteRoom:n}){const[s,d]=l.useState("");h(t=>t.userData),N(".contacts-container");function r(t){return t.toLowerCase(),[]}return e.jsxs("div",{className:" lg:!flex lg:w-1/4 w-full h-screen bg-gray-50 flex flex-col",children:[e.jsxs("div",{className:"",children:[e.jsx("div",{className:"bg-gray-50 p-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-end gap-x-1.5 cursor-pointer relative",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Messages"}),e.jsx("button",{onClick:()=>u(),className:"absolute -left-2 p-1.5 rounded-full text-4xl hover:text-gray-700 transition-all",children:e.jsx(y,{})})]})}),e.jsx("div",{className:"w-full px-4 pb-2 pt-3",children:e.jsx("input",{onChange:({target:t})=>{var a;d((a=t.value)==null?void 0:a.toLowerCase())},type:"text",value:s,placeholder:"Search Messages & Contacts",className:"py-2.5 bg-gray-200 w-full outline-none px-4 rounded-lg placeholder:text-gray-500"})})]}),e.jsx("div",{className:`${!r(s).length||!(s!=null&&s.length)?"hidden":"basis-[19%] min-h-32"} overflow-x-auto overflow-y-hidden mx-auto flex px-4 gap-3 py-1 hidden-scroll-bar w-full contacts-container`}),e.jsx("div",{className:`${s!=null&&s.length?"basis-[55%] lg:basis-[65%]":"basis-[76%] lg:basis-[83%]"} flex flex-col flex-none overflow-auto relative styled-scroll-bar`,children:S(200).map(t=>e.jsx("div",{className:"w-full h-24 bg-gray-200 flex-none",children:"dic"},t))})]})}function T(){const[u,n]=l.useState(!1),[s,d]=l.useState(!1),{userId:r}=h(a=>a.userData);function t(a,x){var f,g;const i=x.findIndex(c=>c.roomId===a),o={...x[i]},v=C(),m=R(v,`rooms/${o.roomId}`);((f=o.members)==null?void 0:f.length)<2?I(m):(M(m,{members:o.members.filter(c=>c!==r),messageList:((g=o.messageList)==null?void 0:g.map(c=>({...c,visibleTo:c.visibleTo.filter(b=>b!==r)})))||[]}),w.success("Room Is Deleted Successfully"))}return e.jsx($,{children:e.jsx("div",{className:"mx-auto 2xl:max-w-screen-2xl fixed inset-0 z-50",children:e.jsx("div",{className:"lg:flex justify-between h-full",children:e.jsxs("div",{className:"flex-1 flex h-full",children:[e.jsx(k,{openSideNav:()=>n(!0),deleteRoom:t}),e.jsx("div",{className:`${s?"opacity-100 visible":"opacity-0 invisible"} inset-0 fixed flex items-center justify-center z-50 transition-all`,children:e.jsx("div",{onClick:()=>d(!1),className:"absolute inset-0 bg-gray-950/85 backdrop-blur-sm"})})]})})})})}export{T as default};
