import{r as o,u as j,aq as N,j as e,b as p,s as y,ar as w,as as S,q as m,_ as C}from"./index-C-G09v52.js";import{g as M,r as R,a as I,u as k}from"./index.esm2017-BRBfSyab.js";import"./lodash--EtSw-Lh.js";import"./index.esm-6w17lgt8.js";const z=o.createContext();function L({children:x}){var r;const[n,s]=o.useState(null),[u,i]=o.useState(null),[c,t]=o.useState(null),l=j(),a=N();return(r=a==null?void 0:a.state)==null||r.roomId,o.useEffect(()=>{n&&l(a.pathname,{roomId:null})},[n]),e.jsx(z.Provider,{value:{rooms:null,status:null,selectedRoom:n,setSelectedRoom:s,selectedMessage:u,setSelectedMessage:i,messageMode:c,setMode:t},children:x})}function $({openSideNav:x,deleteRoom:n}){const[s,u]=o.useState("");p(t=>t.userData),y(".contacts-container");function i(t){return t.toLowerCase(),m(20)}function c(t){return t.toLowerCase(),m(20)}return e.jsxs("div",{className:` ${s.length&&"lg:w-1/6"} lg:!flex lg:w-1/4 w-full h-screen bg-gray-50 flex flex-col`,children:[e.jsxs("div",{className:"",children:[e.jsx("div",{className:"bg-gray-50 p-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-end gap-x-1.5 cursor-pointer relative",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Messages"}),e.jsx("button",{onClick:()=>x(),className:"absolute -left-2 p-1.5 rounded-full text-4xl hover:text-gray-700 transition-all",children:e.jsx(w,{})})]})}),e.jsx("div",{className:"w-full px-4 pb-2 pt-3",children:e.jsx("input",{onChange:({target:t})=>{var l;u((l=t.value)==null?void 0:l.toLowerCase())},type:"text",value:s,placeholder:"Search Messages & Contacts",className:"py-2.5 bg-gray-200 w-full outline-none px-4 rounded-lg placeholder:text-gray-500"})})]}),e.jsx("div",{className:`${!c(s).length||!(s!=null&&s.length)?"hidden":"basis-[19%] min-h-32"} overflow-x-auto overflow-y-hidden mx-auto flex px-4 gap-3 py-1 hidden-scroll-bar max-w-full contacts-container`,children:s&&e.jsx("div",{className:"flex items-center gap-x-4 select-none flex-none",children:c(s).map((t,l)=>{var a;return e.jsxs("div",{className:"w-24 gap-y-1 flex flex-col items-center justify-center",children:[e.jsx("div",{className:"cursor-pointer",children:(a=t.receiver)!=null&&a.profilePic?e.jsx("img",{src:t.receiver.profilePic,className:"size-20 bg-gray-100 rounded-full"}):e.jsx("div",{className:"size-16 lg:size-20 flex items-center justify-center group bg-gray-200 text-gray-500 rounded-full",children:e.jsx(S,{className:"text-6xl lg:text-7xl mt-3 group-hover:mt-2 transition-all rounded-full"})})}),e.jsxs("p",{className:"line-clamp-2 break-words w-10/12 text-sm text-center cursor-pointer",children:["test ",l]})]},l)})})}),e.jsxs("div",{className:`${s!=null&&s.length?"basis-[55%] lg:basis-[65%]":"basis-[76%] lg:basis-[83%]"} flex flex-col flex-none overflow-auto relative styled-scroll-bar`,children:[e.jsxs("h2",{className:`${!(s!=null&&s.length)&&"hidden"} block px-4 sticky top-0 z-10 py-1 w-full bg-gray-200`,children:["Found ",i(s).length," Messages"]}),m(40).map(t=>e.jsxs("div",{className:"w-full h-24 border-4 border-red-400 relative select-none rounded-md flex items-center hover:bg-gray-300/30 transition-all cursor-pointer gap-x-2 px-4 py-2",children:["dic ",t]},t))]})]})}function T(){const[x,n]=o.useState(!1),[s,u]=o.useState(!1),{userId:i}=p(t=>t.userData);function c(t,l){var g,h;const a=l.findIndex(d=>d.roomId===t),r={...l[a]},v=M(),f=R(v,`rooms/${r.roomId}`);((g=r.members)==null?void 0:g.length)<2?I(f):(k(f,{members:r.members.filter(d=>d!==i),messageList:((h=r.messageList)==null?void 0:h.map(d=>({...d,visibleTo:d.visibleTo.filter(b=>b!==i)})))||[]}),C.success("Room Is Deleted Successfully"))}return e.jsx(L,{children:e.jsx("div",{className:"mx-auto 2xl:max-w-screen-2xl fixed inset-0 z-50",children:e.jsx("div",{className:"lg:flex justify-between h-full",children:e.jsxs("div",{className:"flex-1 flex h-full",children:[e.jsx($,{openSideNav:()=>n(!0),deleteRoom:c}),e.jsx("div",{className:`${s?"opacity-100 visible":"opacity-0 invisible"} inset-0 fixed flex items-center justify-center z-50 transition-all`,children:e.jsx("div",{onClick:()=>u(!1),className:"absolute inset-0 bg-gray-950/85 backdrop-blur-sm"})})]})})})})}export{T as default};
