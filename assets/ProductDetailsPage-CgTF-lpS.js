import{u as k,j as e,a as I,v as $,r as u,g as L,w as H,d as T,x as _,y as E,z as P,A as U,_ as S,B as G,h as A,C as J,D as Y,E as K,F as X,b as q,e as z,c as Z,i as D,t as ee,q as se,G as ae}from"./index-ESrmrEOn.js";import{u as te}from"./index.esm-C_jGV2eA.js";import{T as le}from"./TextInput-Cz3yFmJA.js";import{R as F}from"./react-stars-CfMhe2QB.js";import{u as re}from"./useMediaQuery-BWkRnAdY.js";import{r as V,b as ie,a as oe}from"./index-CNr8gGGJ.js";import{g as Q}from"./index-CkFdn7M8.js";import{S as ne}from"./index-TOzvqoio.js";import{u as ce}from"./useTouchScroll-Bn-H9yGj.js";import{S as de}from"./react-select.esm-D_2D-6o-.js";import{e as me,f as xe,g as pe,b as ue,h as he}from"./index-tLdj4Ho7.js";import{l as fe}from"./lodash-CzOzwPMQ.js";import{c as ge}from"./index-CbHdAtlf.js";import"./index-Chjiymov.js";import"./iconBase-Bj5bncte.js";import"./index-CnyDuYXe.js";const ye=[{title:"Men Winter Jacket",thumbnail:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2Fproduct-detail-product-type-banner-1-6630c70895a02.webp?alt=media&token=47d7eb67-9833-4434-9c8a-d7b5ca5385bb",query:"/EcoVibe/Explore-Products/productTypes=jackets",price:"$35"},{title:"Women Shoe's",thumbnail:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2Fproduct-detail-product-type-banner-3-6630c4276df2b.webp?alt=media&token=1ba22d59-4d3b-4715-90c6-a5bf3930a84f",query:"/EcoVibe/Explore-Products/productTypes=shoes",price:"$78"},{title:"Wireless Headphone's",thumbnail:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2Fproduct-detail-product-type-banner-2-6630c421ece4c.webp?alt=media&token=7df8f917-95f8-4096-ab5b-e12c5616ead6",query:"/EcoVibe/Explore-Products/productTypes=headphones",price:"$230"},{title:"Smart Phone's",thumbnail:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2Fproduct-detail-product-type-banner-4-6630c43f56549.webp?alt=media&token=7b797634-f18f-4d33-a390-7bf932b2139d",query:"/EcoVibe/Explore-Products/productTypes=smart phones",price:"$132"}];function be(){const s=k();return e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col gap-y-2 items-center justify-center mt-6",children:[e.jsx("span",{className:"font-medium lg:text-lg text-primary-500",children:"Most Popular Product's"}),e.jsx("h4",{className:"text-3xl lg:text-5xl font-semibold",children:"Top Product Type's"}),e.jsx("p",{className:"text-center md:text-base text-sm px-2 py-1",children:"there are many variations of passages of Lorem ipsum dolor sit amet consectetur adipisicing elit."})]}),e.jsx("div",{className:"flex flex-col md:flex-row md:gap-x-4 gap-y-4 mt-8 w-11/12 mx-auto",children:ye.map(({query:a,title:t,thumbnail:n,price:r},o)=>e.jsxs("div",{className:"w-full md:w-1/4 h-96",children:[e.jsx("div",{className:"w-full h-5/6 bg-blue-200",children:e.jsx("img",{src:n,alt:t,className:"w-full h-full object-cover hover:object-left-bottom transition-all duration-500"})}),e.jsxs("div",{className:"flex flex-col items-center justify-center py-2",children:[e.jsx("h6",{onClick:()=>s(a),className:"text-xl line-clamp-1 font-medium cursor-pointer hover:text-primary-600 transition-all",children:t}),e.jsxs("p",{children:["start form ",e.jsx("span",{className:"underline",children:r})]})]})]},o))})]})}const je=[{subTitle:"Trend-Setter Chronicles",title:"Strutting in Style",desc:"In a world where fashion evolves like the seasons, one outfit at a time, join us on a journey of self-expression through clothing, accessories, and everything in between!",query:"/EcoVibe/Explore-Products/category=fashion",thumbnail:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2Fproduct-detail-categories-banner-3-6630cf4b8113d.webp?alt=media&token=4a434c73-a709-4055-a7cd-a1946da0322e"},{subTitle:"Living Spaces Revival",title:"cozy Corners & Chic Designs",desc:"Step into the realm of home decor magic where cushions become clouds to lounge on, walls whisper tales of beauty, and every corner tells a story of love and comfort! ",query:"/EcoVibe/Explore-Products/category=home decor",thumbnail:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2Fproduct-detail-categories-banner-2-6630cf3cd309d.webp?alt=media&token=43fd16f3-91c7-4ba4-8c80-f84f861b33a8"},{subTitle:"Wellness Warriors Unite",title:"Nourishing Mind, Body & Soul",desc:"From mindful mornings to serene nights, let's explore the art of balancing mind, body, and soul while embracing the journey to a healthier and happier you!",query:"/EcoVibe/Explore-Products/category=health and wellness",thumbnail:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2Fproduct-detail-categories-banner-1-6630cf37bd7c1.webp?alt=media&token=f4b657d0-ee13-45eb-b427-2e5c92475a7f"}];function ve(){const s=k();return e.jsx("div",{className:"mt-6 flex flex-col md:flex-row items-center justify-center gap-y-4 lg:justify-evenly",children:je.map(({desc:a,query:t,subTitle:n,thumbnail:r,title:o},l)=>e.jsxs("div",{className:"w-11/12 md:w-1/3 lg:w-1/4 h-36 md:h-96 relative group",children:[e.jsxs("div",{className:"absolute inset-0 invisible md:px-4 md:py-2 mx-4 my-2 bg-primary-500/75 opacity-0 group-hover:visible group-hover:opacity-100 transition-all duration-500 flex flex-col items-center justify-center gap-1.5 md:gap-y-2.5 lg:gap-y-4",children:[e.jsx("p",{className:"text-white font-medium text-sm md:text-base",children:n}),e.jsx("h6",{className:"text-xl text-center text-white font-bold line-clamp-1 lg:text-2xl",children:o}),e.jsx("span",{className:"hidden md:inline text-center text-white text-sm",children:a}),e.jsx("button",{onClick:()=>{window.scrollTo(0,0),s(t)},className:"px-4 py-2 font-medium hover:bg-primary-600 hover:text-white rounded-md bg-white text-primary-950 text-sm md:text-base lg:text-lg transition-all",children:"Discover More"})]}),e.jsx("img",{src:r,alt:o,className:"w-full h-full object-cover"})]},l))})}function Ne({submitLoading:s,getValues:a,setValue:t,register:n,loading:r,mode:o,errors:l}){var i;if(o!=="reply")return e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between lg:flex-col lg:items-start",children:[e.jsx("h6",{className:"text-sm font-medium lg:text-base",children:"Click on start to review :"}),!r&&!s&&e.jsx(F,{size:25,...n("stars",{required:{value:!0,message:"Please Rate Product"}}),value:a("stars"),onChange:x=>t("stars",x)})]}),e.jsx("p",{className:"mx-1 text-sm text-red-500 font-semibold",children:(i=l==null?void 0:l.stars)==null?void 0:i.message})]})}const we=[{name:"first_name"},{name:"last_name"},{name:"header"}];function W({mode:s,parentId:a,replyList:t,fetchComments:n,loading:r,productData:o}){var O;const{register:l,handleSubmit:i,formState:{errors:x},getValues:m,reset:c,setValue:h}=te(),{personalInformation:{first_name:f,last_name:g,profilePic:d},userId:p,auth_status:v}=I(y=>y.userData),w=$(),[C,b]=u.useState(!1);u.useEffect(()=>{f&&g&&(h("first_name",f),h("last_name",g))},[f,g]);async function B(y){const j={productId:w==null?void 0:w.productId,authorProfile:d,authorId:p,type:"comment",date:Date.now(),commentId:L(p),content:y,replies:[],sellerId:o.SellerId,createdAt:H()};try{T(v),b(!0),await _(E(P,"Products",o==null?void 0:o.id),{Stars:[...(o==null?void 0:o.Stars)||[],m().stars]}),await U(E(P,"comments",j.commentId),j),n(),c()}catch(N){S.remove(),S.error((N==null?void 0:N.message)||"Oops!, There was an error submitting your comment. Please try again later."),console.log(N)}finally{b(!1)}}async function M(y){try{T(v),b(!0);const j=await G(),N={authorProfile:d,authorId:p,date:Date.now(),createdAt:j,commentId:L(p),content:y,type:"reply"};await _(E(P,"comments",a),{replies:[...t,N]}),n()}catch(j){console.log(j),S.remove(),S.error(j.message||"Oops!, There was an error submitting your comment. Please try again later."),console.log(j)}finally{b(!1)}}return e.jsxs("form",{onSubmit:i(y=>{s!=="reply"?B(y):M(y)}),className:"flex flex-col gap-2 bg-white",children:[e.jsx(Ne,{mode:s,getValues:m,setValue:h,register:l}),e.jsx("div",{className:"my-1 grid grid-rows-2 grid-cols-4 gap-x-2 gap-y-2",children:we.map((y,j)=>{var N;return e.jsx(le,{placeholder:y.name.replace("_"," "),register:{...l(y.name,{required:{value:!0,message:"This Field Is Necessary"}})},style:`[&>p]:text-sm h-fit [&>input]:py-3 [&>input:disabled]:bg-gray-100/70 ${y.name==="header"?"col-span-4":"col-span-2"}`,disabled:r||C,error:(N=x[y.name])==null?void 0:N.message},j)})}),e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("textarea",{...l(s!=="reply"?"review":"reply",{required:{value:!0,message:"Please Type Your Comment"}}),disabled:r||C,placeholder:`${s!=="reply"?"Review":"Reply"} Text`,className:`${s!=="reply"?"h-52":"h-24"} px-4 py-2 outline-none border disabled:animate-pulse border-gray-300 hover:border-gray-400 transition-all rounded-md resize-none`}),e.jsx("p",{className:"mx-1 text-sm text-red-500 mt-1 font-semibold",children:(O=x==null?void 0:x.review)==null?void 0:O.message})]}),e.jsx("button",{disabled:r||C,className:"px-4 py-2.5 rounded-md text-gray-50 bg-primary-400 disabled:bg-gray-500",children:e.jsxs("p",{children:["Submit ",s!=="reply"?"Review":"Reply"]})})]})}function Se({commentsData:s,fetchComments:a}){const[t,n]=u.useState(""),[r,o]=u.useState("");return e.jsx("div",{className:"flex flex-col my-4 gap-y-4 max-h-[30rem] overflow-auto w-full styled-scroll-bar",children:s==null?void 0:s.map((l,i)=>e.jsxs("div",{className:"mt-2 mb-4",children:[e.jsx(R,{...l,setReplyTo:n,replyTo:t,fetchComments:a}),e.jsx("div",{className:`${t===l.commentId&&"!visible !opacity-100 h-40 translate-x-0 mb-3 px-2"} transition-all relative z-10 py-2 duration-500 lg:px-4 invisible opacity-0 -translate-x-96 h-0`,children:t===l.commentId&&e.jsx(W,{mode:"reply",parentId:l.commentId,replyList:l.replies,fetchComments:a})}),e.jsx("div",{className:"flex flex-col px-4 gap-y-4",children:l.replies.map((x,m)=>{var c;return r!==l.commentId?m===0&&e.jsxs(e.Fragment,{children:[u.createElement(R,{...x,key:m}),e.jsxs("button",{onClick:()=>o(l.commentId),className:`${((c=l==null?void 0:l.replies)==null?void 0:c.length)<=1&&"hidden"}
                           relative flex items-center justify-center`,children:[e.jsx("p",{className:"bg-white w-fit px-2 font-bold lg:text-lg",children:"Show All Replies"}),e.jsx("span",{className:"w-full h-0.5 bg-gray-200 absolute right-0 top-1/2 bottom-1/2 -z-10"})]})]}):u.createElement(R,{...x,key:m})})})]},i))})}function R({content:s,authorProfile:a,setReplyTo:t,replyTo:n,commentId:r,type:o}){return e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"w-full flex items-center gap-3",children:[e.jsx("img",{src:a,alt:"author profile",className:"size-16 object-contain rounded-full bg-gray-200"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("h6",{className:"text-lg line-clamp-1 font-bold",children:[s.first_name," ",s.last_name]}),s.stars&&e.jsx("div",{children:e.jsx(F,{value:s.stars,size:20,edit:!1})})]})]}),e.jsxs("div",{className:"mt-1 flex flex-col gap-1 py-1",children:[s.header&&e.jsx("h4",{className:"text-xl font-bold",children:s.header}),e.jsx("p",{className:"text-sm text-gray-700 leading-6",children:s.review||s.reply}),o==="comment"&&e.jsx("button",{onClick:()=>t(n===r?"":r),className:`${n===r?"bg-gray-500":" bg-primary-400"} px-4 py-2 rounded-md w-fit text-gray-50 transition-all`,children:n===r?"hide":"Reply"})]})]})}function Ce(){const s=re({maxWidth:480});return e.jsx("div",{children:A(s?4:6).map((a,t)=>e.jsx("div",{className:"mt-2 mb-4 animate-pulse",children:e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"w-full flex items-center gap-3",children:[e.jsx("div",{className:"size-16 object-contain rounded-full bg-gray-200"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h6",{className:"text-lg line-clamp-1 font-bold w-36 h-1 bg-gray-300 rounded-md"}),e.jsx("div",{children:e.jsx(F,{value:4,size:20,edit:!1})})]})]}),e.jsx("div",{className:"mt-1 flex flex-col gap-1 py-1",children:e.jsxs("p",{className:"text-gray-700 flex flex-col gap-y-4",children:[e.jsx("p",{className:"w-full h-1 bg-gray-400"}),e.jsx("p",{className:"w-1/2 h-1 bg-gray-400"}),e.jsx("p",{className:"w-2/3 h-1 bg-gray-400"})]})})]})},t))})}function Ie({productData:s,productLoading:a}){const[{commentsList:t,loading:n},r]=u.useState({commentsList:[],loading:!1,error:""}),o=$();async function l(){try{r(m=>({...m,loading:!0}));const i=J(Y(P,"comments"),K("productId","==",o==null?void 0:o.productId)),x=await X(i).then(({docs:m})=>m.map(c=>c.data()));r(m=>({...m,commentsList:x}))}catch(i){console.log(i)}finally{r(i=>({...i,loading:!1}))}}if(u.useEffect(()=>{l()},[]),!a&&s)return e.jsxs("div",{className:"px-4 py-2 lg:px-8 lg:py-4 my-4",children:[e.jsx("h4",{className:"text-xl lg:text-3xl font-bold my-2",children:"Customer Reviews"}),e.jsx(W,{fetchComments:l,loading:n,productData:s}),t.length?n?e.jsx(Ce,{}):e.jsx(Se,{commentsData:t,fetchComments:l}):e.jsx("div",{className:"flex items-center justify-center py-2 h-44",children:e.jsx("p",{className:"text-lg font-medium",children:"Be the first one to share your thoughts about this product! Write a review now and help others make informed decisions!... 💬"})})]})}function Pe(){return e.jsx("div",{id:"wrapper",children:e.jsx("div",{className:"md:flex xl:h-[40rem] animate-pulse",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-start w-full gap-4 xl:px-4 xl:py-2",children:[e.jsxs("div",{className:"xl:w-2/5 flex flex-col",children:[e.jsx("div",{className:"w-full bg-gray-100 h-72 xl:h-96 xl:rounded-md"}),e.jsx("div",{className:"w-full h-32 xl:h-44 overflow-x-auto overflow-y-hidden horizontal-scroll-bar px-2 py-0.5",children:e.jsx("div",{className:"inline-flex items-center justify-center h-full gap-4",children:A(3).map((s,a)=>e.jsx("div",{className:"w-24 xl:w-44 h-[95%] bg-gray-100"},a))})})]}),e.jsxs("div",{className:"xl:w-3/5 px-3 py-1.5 flex flex-col gap-y-4",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h4",{className:"w-28 h-4 bg-gray-300 rounded-md"}),e.jsxs("div",{className:"w-full flex items-center gap-4 my-2 flex-wrap",children:[e.jsxs("div",{className:"flex items-end gap-1",children:[e.jsx("p",{className:"w-14 h-2 bg-gray-300 rounded-md"}),e.jsx("p",{className:"w-28 h-2 bg-gray-300 rounded-md"})]}),e.jsxs("div",{className:"flex gap-1 items-center",children:[e.jsx("p",{className:"text-gray-300 text-xl",children:e.jsx(V,{})}),e.jsx("p",{className:"w-28 h-2 bg-gray-300 rounded-md"})]}),e.jsxs("button",{className:"flex items-center gap-1 mb-1 font-bold",children:[e.jsx(ie,{className:"text-gray-300"})," ",e.jsx("p",{className:"w-24 h-2 bg-gray-300 rounded-md"})]})]})]}),e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"border-b flex items-center gap-2 py-2",children:[e.jsx("p",{className:"w-24 h-2 rounded-md bg-gray-300"}),e.jsx("p",{className:"w-24 h-2 rounded-md bg-gray-300"})]}),e.jsx("div",{className:"py-2 flex flex-col gap-y-4",children:A(20).map((s,a)=>e.jsx("p",{className:"w-full h-2 bg-gray-300 rounded-md"},a))})]})]})]})})})}function ke({Images:s,loading:a}){const{auth_status:t}=I(o=>o.userData),n=u.useRef(),r={dots:!0,infinite:!0,arrows:!1,speed:500,slidesToShow:1,slidesToScroll:1};return ce(".images-wrapper",a&&s||t===204),e.jsxs("div",{className:"xl:w-2/5 flex flex-col",children:[e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>n.current.slickPrev(),className:"absolute left-0 z-40 top-1/2 mx-2 p-1 rounded-full bg-gray-50 opacity-70 hover:opacity-100 transition-all text-2xl",children:e.jsx(Q,{})}),e.jsx(ne,{appendDots:Ee,ref:n,...r,className:"xl:rounded-md",children:s.map((o,l)=>e.jsx("div",{className:"w-full bg-gray-50 h-96 xl:rounded-md",children:e.jsx("img",{src:o,alt:"product-image",className:"size-full object-cover xl:rounded-md"})},l))}),e.jsx("button",{onClick:()=>n.current.slickNext(),className:"absolute right-0 z-40 top-1/2 mx-2 p-1 rounded-full bg-gray-50 opacity-70 hover:opacity-100 transition-all text-2xl",children:e.jsx(Q,{className:"rotate-180"})}),e.jsx("div",{className:"absolute w-full bottom-2.5 flex justify-center gap-1",children:s.map((o,l)=>e.jsx("button",{className:"size-3 rounded-full",onClick:()=>n.current.slickGoTo(l)},l))})]}),e.jsx("div",{className:"xl:block w-full h-32 xl:h-44 images-wrapper overflow-x-auto overflow-y-hidden horizontal-scroll-bar px-2 py-0.5",children:e.jsx("div",{className:"inline-flex items-center justify-center h-full gap-4",children:s.map((o,l)=>e.jsx("div",{className:"w-28 xl:w-44 h-[95%] flex-none",children:e.jsx("img",{draggable:!1,onClick:()=>n.current.slickGoTo(l),src:o,alt:"product-image",className:"size-full select-none object-cover rounded-md"})},l))})})]})}function Ee(s){return e.jsx("div",{className:"",children:s.map((a,t)=>e.jsx("button",{className:`${a.props.className==="slick-active"&&"bg-gray-800"} size-2.5 bg-gray-50 mb-10 mx-1 rounded-full transition-all`},t))})}function Te({Options:s,selectedOptions:a,setOptions:t}){var l;const n=(l=a.find(i=>i.title.toLowerCase()==="color"))==null?void 0:l.option,r=s.find(i=>i.title.toLowerCase()==="color");function o({title:i,value:x}){const m=a.findIndex(h=>h.title.toLowerCase()===i.toLowerCase()),c=[...a];c[m]={title:i,option:x},t(c)}return e.jsxs("div",{className:`${a.length>1?"justify-between gap-4":"justify-start"} flex items-center flex-wrap`,children:[e.jsx("div",{className:"grid grid-cols-2 xl:flex flex-wrap gap-4 xl:z-50",children:s.map(({title:i,options:x},m)=>i.toLowerCase()!=="color"&&x.length>1&&e.jsx(de,{options:x.map(c=>({label:c,value:c})),placeholder:i,className:"text-sm lg:text-base min-w-36",onChange:({value:c})=>{o({title:i,value:c})}},m))}),r&&e.jsxs("div",{className:"flex w-full items-center gap-4",children:[e.jsx("h4",{className:"text-xl font-medium",children:"Colors:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r==null?void 0:r.options.map((i,x)=>e.jsx("button",{onClick:()=>o({title:"color",value:i}),style:{backgroundColor:i},className:`${n===i&&"border-4 !border-gray-400"} size-10 rounded-full border-4 transition-all`},x))})]})]})}function ze({addOrderToCart:s,removeProductFromCart:a,currentOrder:t,setOrder:n,actionRef:r,setActionRef:o}){const{orderId:l,isOrdered:i,orderQuantity:x}=t,{cartData:m,loading:c}=I(d=>d.userData),h=k(),f=q();function g(d){if(o("quantityChange"),!i&&!l.length)switch(d){case"increase":n(p=>({...p,orderQuantity:p.orderQuantity+1}));break;case"decrease":n(p=>({...p,orderQuantity:p.orderQuantity-1}));break}else{const p=m.findIndex(C=>C.orderId===l),v={...m[p],quantity:d==="increase"?m[p].quantity+1:m[p].quantity-1},w=[...m];w[p]=v,f(z({data:w,field:"cartData"}))}}return e.jsxs("div",{className:"fixed lg:static z-40 bottom-0 right-0 lg:mt-2 bg-gray-100 lg:bg-opacity-0 w-full rounded-t-xl px-4 lg:px-0 py-4 lg:py-2 flex items-center justify-between",children:[e.jsx("button",{onClick:()=>i?h("/EcoVibe/bag/cart"):s(),className:`${c&&r==="orderProduct"&&"animate-pulse !bg-gray-400"} px-4 py-2.5 bg-primary-400 text-white lg:text-lg rounded-md disabled:bg-gray-500 transition-all size-fit`,children:i?"Show In Cart":"Add To Cart"}),e.jsx("div",{className:`${c&&r==="quantityChange"&&"animate-pulse"} ${i?"visible opacity-100 translate-y-0":"opacity-0 invisible -translate-y-10"} flex transition-all items-center gap-x-4`,children:e.jsxs("div",{className:"flex gap-x-3",children:[e.jsx("button",{disabled:c,onClick:()=>x>1?g("decrease"):a(),className:"hover:bg-gray-950 px-2.5 hover:text-gray-50 rounded-md",children:x===1&&i?e.jsx(me,{className:"text-2xl"}):e.jsx(xe,{className:"text-xl"})}),e.jsx("span",{className:"px-2 lg:px-4 py-1 border-b-2 border-gray-950 lg:text-lg",children:x}),e.jsx("button",{disabled:c,onClick:()=>g("increase"),className:"bg-gray-950 text-gray-50 p-2.5 rounded-md",children:e.jsx(pe,{className:"text-lg"})})]})})]})}function Re({Options:s,productData:a}){const[t,n]=u.useState([]),{cartData:r,auth_status:o}=I(d=>d.userData),l=q(),[i,x]=u.useState({orderId:"",isOrdered:!1,orderQuantity:1}),[m,c]=u.useState(""),{loading:h}=I(d=>d.userData);u.useEffect(()=>{m!==""&&!h&&c("")},[h]),u.useEffect(()=>{const d=r.find(p=>{if(p.productId===a.id&&fe.isEqual(p.selectedOption,t))return p});x(d?{isOrdered:!0,orderId:d.orderId,orderQuantity:d.quantity}:{isOrdered:!1,orderId:"",orderQuantity:1})},[r,t]),u.useEffect(()=>{if(s){const d=[];s.forEach(({title:p,options:v})=>{v.length>1&&d.push({title:p,option:v[0]})}),n(d)}},[s]);function f(){try{T(o),c("orderProduct");const d={orderId:L(a.id),orderData:Date.now(),productId:a.id,Category:a.Category,Name:a.Name,Thumbnail:a.Thumbnail,Seller:a.SellerId,Price:a.Price*i.orderQuantity,quantity:i.orderQuantity,selectedOption:t,SellerId:a.SellerId,SellerName:a.SellerName,SellerProfile:a.SellerProfile,SellerEmail:a.SellerEmail};l(z({data:[...r,d],field:"cartData"}))}catch(d){S.remove(),S.error(d==null?void 0:d.message)}}function g(){const d=r.filter(p=>p.orderId!==i.orderId);l(z({data:d,field:"cartData"}))}return e.jsxs("div",{className:"flex flex-col gap-y-4",children:[e.jsx("div",{className:"flex items-center mb-2",children:e.jsxs("h6",{className:"text-2xl font-medium",children:["Price: $",Number(a.Price*i.orderQuantity).toFixed(2)]})}),e.jsx(Te,{Options:s,selectedOptions:t,setOptions:n}),e.jsx(ze,{selectedOptions:t,addOrderToCart:f,removeProductFromCart:g,currentOrder:i,setOrder:x,setActionRef:c,actionRef:m})]})}function Le({productData:s}){const{Name:a,Stars:t,Category:n,Options:r,Description:o,SellerEmail:l,SellerName:i,SellerProfile:x,SellerId:m,id:c}=s||{},{auth_status:h,wishlist:f,loading:g}=I(b=>b.userData),[d,p]=u.useState("description"),v=k(),w=q();function C(){try{T(h);const b=ee(f,c);w(z({data:b,field:"wishlist"}))}catch(b){S.remove(),S.error(b==null?void 0:b.message)}}return e.jsxs("div",{className:"xl:w-3/5 px-3 py-1.5 flex flex-col gap-y-4",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h4",{className:"line-clamp-2 text-3xl font-bold",children:a}),e.jsxs("div",{className:"w-full flex items-center gap-4 my-2 flex-wrap",children:[e.jsxs("div",{className:"flex items-end gap-1",children:[e.jsx("p",{className:"text-gray-600",children:"Category:"}),e.jsx("p",{className:"font-semibold",children:n})]}),t&&e.jsxs("div",{className:"flex gap-1",children:[e.jsx("p",{className:"text-amber-300 text-xl",children:e.jsx(V,{})}),e.jsxs("p",{className:"text-gray-600",children:[Z(t)," (",t==null?void 0:t.length," rates)"]})]}),e.jsxs("button",{disabled:g,onClick:()=>C(),className:"flex items-start gap-1 font-bold group disabled:animate-pulse",children:[e.jsx("p",{className:"text-xl text-red-500",children:D(f,c)?e.jsx(he,{}):e.jsx(ue,{})}),e.jsx("p",{children:D(f,c)?"Remove From Wishlist":"Add To Wishlist"})]})]})]}),e.jsx("div",{className:"",children:e.jsx(Re,{Options:r,productData:s})}),e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"border-b flex items-center gap-2",children:[e.jsx("button",{onClick:()=>p("description"),className:`${d==="description"&&"text-gray-950"} text-xl font-bold text-gray-600 px-4 py-2 hover:text-gray-950 transition-all`,children:"Description"}),e.jsx("button",{onClick:()=>p("seller"),className:`${d==="seller"&&"text-gray-950"} text-xl font-bold text-gray-600 px-4 py-2 hover:text-gray-950 transition-all`,children:"Seller Information"})]}),d==="description"?e.jsx("div",{className:"px-2 py-1.5",children:e.jsx("p",{className:"text-pretty line-clamp-[10] xl:line-clamp-[15]",children:o})}):e.jsx("div",{className:"",children:e.jsxs("div",{className:"px-4 py-2 flex items-center gap-2 h-32",children:[e.jsx("div",{className:"size-24 flex-none xl:size-28",children:e.jsx("img",{src:x,alt:"seller-avatar",className:"size-full rounded-full gradient-background"})}),e.jsxs("div",{className:"flex flex-col px-2 gap-y-2.5",children:[e.jsxs("h6",{onClick:()=>v(`/EcoVibe/seller/${m}`),className:"text-2xl w-10/12 line-clamp-1 flex items-center gap-1 font-bold cursor-pointer hover:text-gray-800 transition-all",children:[i,e.jsx(oe,{className:"text-sm rotate-[130deg]"})]}),e.jsx("p",{className:"text-gray-600 line-clamp-1 w-11/12 break-words",children:l})]})]})})]})]})}function Ae({product:s}){const{productData:a,loading:t,error:n}=s,{Images:r,Name:o,Category:l,Options:i}=a||{},{auth_status:x}=I(c=>c.userData),m=k();if(t||x===204)return e.jsx(Pe,{});if(a&&!t)return e.jsxs("div",{id:"wrapper",children:[e.jsxs("div",{className:"flex items-center px-2 py-2 gap-2",children:[e.jsx("h4",{onClick:()=>m("/EcoVibe/Explore-Products/"),className:"cursor-pointer text-gray-600 hover:font-medium transition-all",children:"Products"}),e.jsx("p",{children:"/"}),e.jsx("p",{onClick:()=>m(`/EcoVibe/Explore-Products/category=${l.toLowerCase()}`),className:"line-clamp-1 max-w-28 xl:w-auto text-gray-600 hover:font-medium transition-all cursor-pointer",children:l}),e.jsx("p",{children:"/"}),e.jsx("p",{className:"line-clamp-1 max-w-28 xl:w-auto text-gray-600",children:o})]}),e.jsx("div",{className:"md:flex xl:h-[40rem]",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-start w-full gap-4 xl:px-4 xl:py-2",children:[e.jsx(ke,{Images:r,loading:t}),e.jsx(Le,{productData:a})]})}),e.jsx("div",{className:"mx-auto px-4 lg:px-6",children:i&&e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 md:text-xl w-1/3 border",children:"Option Title"}),e.jsx("th",{className:"px-4 py-2 md:text-xl w-2/3 border",children:"List"})]})}),e.jsx("tbody",{children:i.map(({title:c,options:h},f)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 border lowercase font-medium",children:c}),e.jsx("td",{className:"px-4 py-2 border md:flex gap-2",children:h.map((g,d)=>{var p;return e.jsxs("p",{className:"inline",children:[c.toLowerCase()==="color"?(p=ge(g))==null?void 0:p.name:g,","]},d)})})]},f))})]})})]});if(!t&&!a||n)return e.jsxs("div",{className:"flex flex-col text-center lg:text-start lg:flex-row items-center justify-center",children:[e.jsx("img",{src:se,alt:"error-icon",className:"size-96 object-cover"}),e.jsxs("div",{className:"flex items-center lg:items-stretch flex-col gap-y-4 px-2",children:[e.jsx("h4",{className:"text-8xl text-primary-800 font-bold",children:"Oops!"}),e.jsx("p",{className:"text-lg font-semibold",children:"There was a problem connecting to our server. Please check your internet connection and try again."}),e.jsx("button",{onClick:()=>m("/EcoVibe/Explore-Products/"),className:"w-fit px-4 py-2 border border-primary-500 bg-primary-500 text-gray-50 rounded-md hover:bg-gray-50 hover:text-primary-500 transition-all",children:"Back to explore"})]})]})}function Ke(){const[s,a]=u.useState({productData:null,loading:!1,error:null}),t=$();async function n(){try{a(l=>({...l,loading:!0}));const r=E(P,"Products",t==null?void 0:t.productId),o=await ae(r);a({error:null,loading:!1,productData:{...o.data(),id:o.id}})}catch(r){a({error:r,loading:!1,productData:null}),console.log(r)}}return u.useEffect(()=>{n()},[t]),e.jsxs("div",{className:"mx-auto 2xl:max-w-screen-2xl",children:[e.jsx(Ae,{product:s}),e.jsx(Ie,{productData:s.productData,productLoading:s.loading}),e.jsx(be,{}),e.jsx(ve,{})]})}export{Ke as default};
