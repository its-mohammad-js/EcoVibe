import{j as e,h as S,a as y,r as j,u as k,b as C,e as v,d as T,g as O,_ as w,c as L,i as P,t as Q,q as D,v as $,k as A}from"./index-CALYVHKJ.js";import"./react-stars-AJ3qLF1E.js";import{r as z,b as q,a as F}from"./index-B9-0yC10.js";import{g as E}from"./index-DHYDW2lZ.js";import{S as B}from"./index-D_BSZkSX.js";import{u as _}from"./useTouchScroll-CGePMKIy.js";import{S as R}from"./Select-49a62830.esm-BXsM33sy.js";import{e as V,f as H,g as W,b as U,h as G}from"./index-BLK4_m56.js";import{l as M}from"./lodash-BElWF13l.js";import"./index-Chjiymov.js";import"./iconBase-B4fS_3Ko.js";import"./index-CnyDuYXe.js";function J(){return e.jsx("div",{id:"wrapper",children:e.jsx("div",{className:"md:flex xl:h-[40rem] animate-pulse",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-start w-full gap-4 xl:px-4 xl:py-2",children:[e.jsxs("div",{className:"xl:w-2/5 flex flex-col",children:[e.jsx("div",{className:"w-full bg-gray-100 h-72 xl:h-96 xl:rounded-md"}),e.jsx("div",{className:"w-full h-32 xl:h-44 overflow-x-auto overflow-y-hidden horizontal-scroll-bar px-2 py-0.5",children:e.jsx("div",{className:"inline-flex items-center justify-center h-full gap-4",children:S(3).map((l,s)=>e.jsx("div",{className:"w-24 xl:w-44 h-[95%] bg-gray-100"},s))})})]}),e.jsxs("div",{className:"xl:w-3/5 px-3 py-1.5 flex flex-col gap-y-4",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h4",{className:"w-28 h-4 bg-gray-300 rounded-md"}),e.jsxs("div",{className:"w-full flex items-center gap-4 my-2 flex-wrap",children:[e.jsxs("div",{className:"flex items-end gap-1",children:[e.jsx("p",{className:"w-14 h-2 bg-gray-300 rounded-md"}),e.jsx("p",{className:"w-28 h-2 bg-gray-300 rounded-md"})]}),e.jsxs("div",{className:"flex gap-1 items-center",children:[e.jsx("p",{className:"text-gray-300 text-xl",children:e.jsx(z,{})}),e.jsx("p",{className:"w-28 h-2 bg-gray-300 rounded-md"})]}),e.jsxs("button",{className:"flex items-center gap-1 mb-1 font-bold",children:[e.jsx(q,{className:"text-gray-300"})," ",e.jsx("p",{className:"w-24 h-2 bg-gray-300 rounded-md"})]})]})]}),e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"border-b flex items-center gap-2 py-2",children:[e.jsx("p",{className:"w-24 h-2 rounded-md bg-gray-300"}),e.jsx("p",{className:"w-24 h-2 rounded-md bg-gray-300"})]}),e.jsx("div",{className:"py-2 flex flex-col gap-y-4",children:S(20).map((l,s)=>e.jsx("p",{className:"w-full h-2 bg-gray-300 rounded-md"},s))})]})]})]})})})}function K(){const{data:l,loading:s}=y(o=>o.products),{Images:t}=l[0]||{},{auth_status:h}=y(o=>o.userData),c=j.useRef(),u={dots:!0,infinite:!0,arrows:!1,speed:500,slidesToShow:1,slidesToScroll:1};return _(".images-wrapper",s&&t||h===204),e.jsxs("div",{className:"xl:w-2/5 flex flex-col",children:[e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>c.current.slickPrev(),className:"absolute left-0 z-40 top-1/2 mx-2 p-1 rounded-full bg-gray-50 opacity-70 hover:opacity-100 transition-all text-2xl",children:e.jsx(E,{})}),e.jsx(B,{appendDots:X,ref:c,...u,className:"xl:rounded-md",children:t.map((o,a)=>e.jsx("div",{className:"w-full bg-gray-50 h-72 xl:h-96 xl:rounded-md",children:e.jsx("img",{src:o,alt:"product-image",className:"size-full object-cover xl:rounded-md"})},a))}),e.jsx("button",{onClick:()=>c.current.slickNext(),className:"absolute right-0 z-40 top-1/2 mx-2 p-1 rounded-full bg-gray-50 opacity-70 hover:opacity-100 transition-all text-2xl",children:e.jsx(E,{className:"rotate-180"})}),e.jsx("div",{className:"absolute w-full bottom-2.5 flex justify-center gap-1",children:t.map((o,a)=>e.jsx("button",{className:"size-3 rounded-full",onClick:()=>c.current.slickGoTo(a)},a))})]}),e.jsx("div",{className:"xl:block w-full h-32 xl:h-44 images-wrapper overflow-x-auto overflow-y-hidden horizontal-scroll-bar px-2 py-0.5",children:e.jsx("div",{className:"inline-flex items-center justify-center h-full gap-4",children:t.map((o,a)=>e.jsx("div",{className:"w-24 xl:w-44 h-[95%]",children:e.jsx("img",{draggable:!1,onClick:()=>c.current.slickGoTo(a),src:o,alt:"product-image",className:"size-full select-none object-cover rounded-md"})},a))})})]})}function X(l){return e.jsx("div",{className:"",children:l.map((s,t)=>e.jsx("button",{className:`${s.props.className==="slick-active"&&"bg-gray-800"} size-2.5 bg-gray-50 mb-10 mx-1 rounded-full transition-all`},t))})}function Y({Options:l,selectedOptions:s,setOptions:t}){var o;const h=(o=s.find(a=>a.title.toLowerCase()==="color"))==null?void 0:o.option,c=l.find(a=>a.title.toLowerCase()==="color");function u({title:a,value:n}){const d=s.findIndex(p=>p.title.toLowerCase()===a.toLowerCase()),i=[...s];i[d]={title:a,option:n},t(i)}return console.log(l),e.jsxs("div",{className:`${s.length>1?"justify-between gap-4":"justify-start"} flex items-center flex-wrap`,children:[e.jsx("div",{className:"grid grid-cols-2 xl:flex flex-wrap gap-4 xl:z-50",children:l.map(({title:a,options:n},d)=>a.toLowerCase()!=="color"&&n.length>1&&e.jsx(R,{options:n.map(i=>({label:i,value:i})),placeholder:a,className:"text-sm lg:text-base min-w-36",onChange:({value:i})=>{u({title:a,value:i})}},d))}),c&&e.jsxs("div",{className:"flex w-full items-center gap-4",children:[e.jsx("h4",{className:"text-xl font-medium",children:"Colors:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:c==null?void 0:c.options.map((a,n)=>e.jsx("button",{onClick:()=>u({title:"color",value:a}),style:{backgroundColor:a},className:`${h===a&&"border-4 !border-gray-400"} size-10 rounded-full border-4 transition-all`},n))})]})]})}function Z({selectedOptions:l,addOrderToCart:s,removeProductFromCart:t,currentOrder:h,setOrder:c,actionRef:u,setActionRef:o}){const{orderId:a,isOrdered:n,orderQuantity:d}=h,{cartData:i,loading:p}=y(x=>x.userData),g=k(),N=C();function r(x){if(o("quantityChange"),!n&&!a.length)switch(x){case"increase":c(m=>({...m,orderQuantity:m.orderQuantity+1}));break;case"decrease":c(m=>({...m,orderQuantity:m.orderQuantity-1}));break}else{const m=i.findIndex(f=>f.orderId===a),I={...i[m],quantity:x==="increase"?i[m].quantity+1:i[m].quantity-1},b=[...i];b[m]=I,N(v({data:b,field:"cartData"}))}}return e.jsxs("div",{className:"fixed lg:static z-40 bottom-0 right-0 lg:mt-2 bg-gray-100 lg:bg-opacity-0 w-full rounded-t-xl px-4 lg:px-0 py-4 lg:py-2 flex items-center justify-between",children:[e.jsx("button",{onClick:()=>n?g("/EcoVibe/bag/cart"):s(),className:`${p&&u==="orderProduct"&&"animate-pulse !bg-gray-400"} px-4 py-2.5 bg-primary-400 text-white lg:text-lg rounded-md disabled:bg-gray-500 transition-all size-fit`,children:n?"Show In Cart":"Add To Cart"}),e.jsx("div",{className:`${p&&u==="quantityChange"&&"animate-pulse"} ${n?"visible opacity-100 translate-y-0":"opacity-0 invisible -translate-y-10"} flex transition-all items-center gap-x-4`,children:e.jsxs("div",{className:"flex gap-x-3",children:[e.jsx("button",{disabled:p,onClick:()=>d>1?r("decrease"):t(),className:"hover:bg-gray-950 px-2.5 hover:text-gray-50 rounded-md",children:d===1&&n?e.jsx(V,{className:"text-2xl"}):e.jsx(H,{className:"text-xl"})}),e.jsx("span",{className:"px-2 lg:px-4 py-1 border-b-2 border-gray-950 lg:text-lg",children:d}),e.jsx("button",{disabled:p,onClick:()=>r("increase"),className:"bg-gray-950 text-gray-50 p-2.5 rounded-md",children:e.jsx(W,{className:"text-lg"})})]})})]})}function ee({Options:l,productData:s}){const[t,h]=j.useState([]),{cartData:c,auth_status:u}=y(r=>r.userData),o=C(),[a,n]=j.useState({orderId:"",isOrdered:!1,orderQuantity:1}),[d,i]=j.useState(""),{loading:p}=y(r=>r.userData);j.useEffect(()=>{d!==""&&!p&&i("")},[p]),j.useEffect(()=>{const r=c.find(x=>{if(x.productId===s.id&&M.isEqual(x.selectedOption,t))return x});n(r?{isOrdered:!0,orderId:r.orderId,orderQuantity:r.quantity}:{isOrdered:!1,orderId:"",orderQuantity:1})},[c,t]),j.useEffect(()=>{if(l){const r=[];l.forEach(({title:x,options:m})=>{m.length>1&&r.push({title:x,option:m[0]})}),h(r)}},[l]);function g(){try{T(u),i("orderProduct");const r={orderId:O(s.id),orderData:Date.now(),productId:s.id,Category:s.Category,Name:s.Name,Thumbnail:s.Thumbnail,Seller:s.SellerId,Price:s.Price*a.orderQuantity,quantity:a.orderQuantity,selectedOption:t,SellerId:s.SellerId,SellerName:s.SellerName,SellerProfile:s.SellerProfile,SellerEmail:s.SellerEmail};console.log(r),o(v({data:[...c,r],field:"cartData"}))}catch(r){w.remove(),w.error(r==null?void 0:r.message)}}function N(){const r=c.filter(x=>x.orderId!==a.orderId);o(v({data:r,field:"cartData"}))}return e.jsxs("div",{className:"flex flex-col gap-y-4",children:[e.jsx("div",{className:"flex items-center mb-2",children:e.jsxs("h6",{className:"text-2xl font-medium",children:["Price: $",Number(s.Price*a.orderQuantity).toFixed(2)]})}),e.jsx(Y,{Options:l,selectedOptions:t,setOptions:h}),e.jsx(Z,{selectedOptions:t,addOrderToCart:g,removeProductFromCart:N,currentOrder:a,setOrder:n,setActionRef:i,actionRef:d})]})}function se(){const{data:l}=y(f=>f.products),{Name:s,Stars:t,Category:h,Options:c,Description:u,SellerEmail:o,SellerName:a,SellerProfile:n,SellerId:d,id:i}=l[0]||{},{auth_status:p,wishlist:g,loading:N}=y(f=>f.userData),[r,x]=j.useState("description"),m=k(),I=C();function b(){try{T(p);const f=Q(g,i);I(v({data:f,field:"wishlist"}))}catch(f){w.remove(),w.error(f==null?void 0:f.message)}}return e.jsxs("div",{className:"xl:w-3/5 px-3 py-1.5 flex flex-col gap-y-4",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h4",{className:"line-clamp-2 text-3xl font-bold",children:s}),e.jsxs("div",{className:"w-full flex items-center gap-4 my-2 flex-wrap",children:[e.jsxs("div",{className:"flex items-end gap-1",children:[e.jsx("p",{className:"text-gray-600",children:"Category:"}),e.jsx("p",{className:"font-semibold",children:h})]}),t&&e.jsxs("div",{className:"flex gap-1",children:[e.jsx("p",{className:"text-amber-300 text-xl",children:e.jsx(z,{})}),e.jsxs("p",{className:"text-gray-600",children:[L(t)," (",t==null?void 0:t.length," rates)"]})]}),e.jsxs("button",{disabled:N,onClick:()=>b(),className:"flex items-start gap-1 font-bold group disabled:animate-pulse",children:[e.jsx("p",{className:"text-xl text-red-500",children:P(g,i)?e.jsx(G,{}):e.jsx(U,{})}),e.jsx("p",{children:P(g,i)?"Remove From Wishlist":"Add To Wishlist"})]})]})]}),e.jsx("div",{className:"",children:e.jsx(ee,{Options:c,productData:l[0]})}),e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"border-b flex items-center gap-2",children:[e.jsx("button",{onClick:()=>x("description"),className:`${r==="description"&&"text-gray-950"} text-xl font-bold text-gray-600 px-4 py-2 hover:text-gray-950 transition-all`,children:"Description"}),e.jsx("button",{onClick:()=>x("seller"),className:`${r==="seller"&&"text-gray-950"} text-xl font-bold text-gray-600 px-4 py-2 hover:text-gray-950 transition-all`,children:"Seller Information"})]}),r==="description"?e.jsx("div",{className:"px-2 py-1.5",children:e.jsx("p",{className:"text-pretty line-clamp-[10] xl:line-clamp-[15]",children:u})}):e.jsx("div",{className:"",children:e.jsxs("div",{className:"px-4 py-2 flex items-center gap-2 h-32",children:[e.jsx("div",{className:"size-24 xl:size-28",children:e.jsx("img",{src:n,alt:"seller-avatar",className:"size-full rounded-full gradient-background"})}),e.jsxs("div",{className:"flex flex-col px-2 gap-y-2.5",children:[e.jsxs("h6",{onClick:()=>m(`/EcoVibe/seller/${d}`),className:"text-2xl line-clamp-1 flex items-center gap-1 font-bold cursor-pointer hover:text-gray-800 transition-all",children:[a,e.jsx(F,{className:"text-sm rotate-[130deg]"})]}),e.jsx("p",{className:"text-gray-600",children:o})]})]})})]})]})}function ae(){const{data:l,loading:s,error:t}=y(d=>d.products),{Images:h,Name:c,Category:u,Options:o}=l[0]||{},{auth_status:a}=y(d=>d.userData),n=k();if(s||a===204)return e.jsx(J,{});if(l.length&&!s)return e.jsxs("div",{id:"wrapper",children:[e.jsxs("div",{className:"flex items-center px-2 py-2 gap-2",children:[e.jsx("h4",{onClick:()=>n("/EcoVibe/Explore-Products/"),className:"cursor-pointer text-gray-600 hover:font-medium transition-all",children:"Products"}),e.jsx("p",{children:"/"}),e.jsx("p",{onClick:()=>n(`/EcoVibe/Explore-Products/category=${u.toLowerCase()}`),className:"line-clamp-1 w-20 xl:w-auto text-gray-600 hover:font-medium transition-all cursor-pointer",children:u}),e.jsx("p",{children:"/"}),e.jsx("p",{className:"line-clamp-1 w-24 xl:w-auto text-gray-600",children:c})]}),e.jsx("div",{className:"md:flex xl:h-[40rem]",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-start w-full gap-4 xl:px-4 xl:py-2",children:[e.jsx(K,{Images:h}),e.jsx(se,{})]})}),e.jsx("div",{className:"mx-auto px-4 lg:px-6",children:o&&e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 md:text-xl w-1/3 border",children:"Option Title"}),e.jsx("th",{className:"px-4 py-2 md:text-xl w-2/3 border",children:"List"})]})}),e.jsx("tbody",{children:o.map(({title:d,options:i},p)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 border lowercase font-medium",children:d}),e.jsx("td",{className:"px-4 py-2 border md:flex gap-2",children:i.map((g,N)=>e.jsxs("p",{className:"inline",children:[g,","]},N))})]},p))})]})})]});if(!s&&!(l!=null&&l.length)||t)return e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("img",{src:D,alt:"error-icon",className:"size-96 object-cover"}),e.jsxs("div",{className:"flex flex-col gap-y-4",children:[e.jsx("h4",{className:"text-8xl text-primary-800 font-bold",children:"Oops!"}),e.jsx("p",{className:"text-lg font-semibold",children:"There was a problem connecting to our server. Please check your internet connection and try again."}),e.jsx("button",{onClick:()=>n("/EcoVibe/Explore-Products/"),className:"w-fit px-4 py-2 border border-primary-500 bg-primary-500 text-gray-50 rounded-md hover:bg-gray-50 hover:text-primary-500 transition-all",children:"Back to explore"})]})]})}function he(){const l=$(),s=C();return j.useEffect(()=>{s(A({sortBy:"",idList:[l.productId]}))},[l]),e.jsx("div",{className:"mx-auto 2xl:max-w-screen-2xl",children:e.jsx(ae,{})})}export{he as default};
