var T7=Object.defineProperty;var C7=(t,e,n)=>e in t?T7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var MA=(t,e,n)=>(C7(t,typeof e!="symbol"?e+"":e,n),n);function b7(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var lp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function R7(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var v4={exports:{}},Rx={},_4={exports:{}},jt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ig=Symbol.for("react.element"),P7=Symbol.for("react.portal"),I7=Symbol.for("react.fragment"),L7=Symbol.for("react.strict_mode"),D7=Symbol.for("react.profiler"),B7=Symbol.for("react.provider"),N7=Symbol.for("react.context"),O7=Symbol.for("react.forward_ref"),F7=Symbol.for("react.suspense"),k7=Symbol.for("react.memo"),U7=Symbol.for("react.lazy"),b3=Symbol.iterator;function V7(t){return t===null||typeof t!="object"?null:(t=b3&&t[b3]||t["@@iterator"],typeof t=="function"?t:null)}var x4={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S4=Object.assign,A4={};function Kf(t,e,n){this.props=t,this.context=e,this.refs=A4,this.updater=n||x4}Kf.prototype.isReactComponent={};Kf.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Kf.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function w4(){}w4.prototype=Kf.prototype;function lb(t,e,n){this.props=t,this.context=e,this.refs=A4,this.updater=n||x4}var cb=lb.prototype=new w4;cb.constructor=lb;S4(cb,Kf.prototype);cb.isPureReactComponent=!0;var R3=Array.isArray,E4=Object.prototype.hasOwnProperty,ub={current:null},M4={key:!0,ref:!0,__self:!0,__source:!0};function T4(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)E4.call(e,r)&&!M4.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:ig,type:t,key:s,ref:o,props:i,_owner:ub.current}}function z7(t,e){return{$$typeof:ig,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function hb(t){return typeof t=="object"&&t!==null&&t.$$typeof===ig}function H7(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var P3=/\/+/g;function TA(t,e){return typeof t=="object"&&t!==null&&t.key!=null?H7(""+t.key):e.toString(36)}function Ev(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ig:case P7:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+TA(o,0):r,R3(i)?(n="",t!=null&&(n=t.replace(P3,"$&/")+"/"),Ev(i,e,n,"",function(c){return c})):i!=null&&(hb(i)&&(i=z7(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(P3,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",R3(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+TA(s,a);o+=Ev(s,e,n,l,i)}else if(l=V7(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+TA(s,a++),o+=Ev(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function jy(t,e,n){if(t==null)return t;var r=[],i=0;return Ev(t,r,"","",function(s){return e.call(n,s,i++)}),r}function G7(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ei={current:null},Mv={transition:null},j7={ReactCurrentDispatcher:Ei,ReactCurrentBatchConfig:Mv,ReactCurrentOwner:ub};jt.Children={map:jy,forEach:function(t,e,n){jy(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return jy(t,function(){e++}),e},toArray:function(t){return jy(t,function(e){return e})||[]},only:function(t){if(!hb(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};jt.Component=Kf;jt.Fragment=I7;jt.Profiler=D7;jt.PureComponent=lb;jt.StrictMode=L7;jt.Suspense=F7;jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j7;jt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=S4({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=ub.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)E4.call(e,l)&&!M4.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:ig,type:t.type,key:i,ref:s,props:r,_owner:o}};jt.createContext=function(t){return t={$$typeof:N7,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:B7,_context:t},t.Consumer=t};jt.createElement=T4;jt.createFactory=function(t){var e=T4.bind(null,t);return e.type=t,e};jt.createRef=function(){return{current:null}};jt.forwardRef=function(t){return{$$typeof:O7,render:t}};jt.isValidElement=hb;jt.lazy=function(t){return{$$typeof:U7,_payload:{_status:-1,_result:t},_init:G7}};jt.memo=function(t,e){return{$$typeof:k7,type:t,compare:e===void 0?null:e}};jt.startTransition=function(t){var e=Mv.transition;Mv.transition={};try{t()}finally{Mv.transition=e}};jt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};jt.useCallback=function(t,e){return Ei.current.useCallback(t,e)};jt.useContext=function(t){return Ei.current.useContext(t)};jt.useDebugValue=function(){};jt.useDeferredValue=function(t){return Ei.current.useDeferredValue(t)};jt.useEffect=function(t,e){return Ei.current.useEffect(t,e)};jt.useId=function(){return Ei.current.useId()};jt.useImperativeHandle=function(t,e,n){return Ei.current.useImperativeHandle(t,e,n)};jt.useInsertionEffect=function(t,e){return Ei.current.useInsertionEffect(t,e)};jt.useLayoutEffect=function(t,e){return Ei.current.useLayoutEffect(t,e)};jt.useMemo=function(t,e){return Ei.current.useMemo(t,e)};jt.useReducer=function(t,e,n){return Ei.current.useReducer(t,e,n)};jt.useRef=function(t){return Ei.current.useRef(t)};jt.useState=function(t){return Ei.current.useState(t)};jt.useSyncExternalStore=function(t,e,n){return Ei.current.useSyncExternalStore(t,e,n)};jt.useTransition=function(){return Ei.current.useTransition()};jt.version="18.2.0";_4.exports=jt;var $=_4.exports;const Ys=bx($),$E=b7({__proto__:null,default:Ys},[$]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W7=$,X7=Symbol.for("react.element"),K7=Symbol.for("react.fragment"),$7=Object.prototype.hasOwnProperty,J7=W7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,q7={key:!0,ref:!0,__self:!0,__source:!0};function C4(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)$7.call(e,r)&&!q7.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:X7,type:t,key:s,ref:o,props:i,_owner:J7.current}}Rx.Fragment=K7;Rx.jsx=C4;Rx.jsxs=C4;v4.exports=Rx;var R=v4.exports,JE={},b4={exports:{}},os={},R4={exports:{}},P4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,W){var K=O.length;O.push(W);e:for(;0<K;){var Y=K-1>>>1,te=O[Y];if(0<i(te,W))O[Y]=W,O[K]=te,K=Y;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var W=O[0],K=O.pop();if(K!==W){O[0]=K;e:for(var Y=0,te=O.length,Te=te>>>1;Y<Te;){var ne=2*(Y+1)-1,de=O[ne],Ae=ne+1,Pe=O[Ae];if(0>i(de,K))Ae<te&&0>i(Pe,de)?(O[Y]=Pe,O[Ae]=K,Y=Ae):(O[Y]=de,O[ne]=K,Y=ne);else if(Ae<te&&0>i(Pe,K))O[Y]=Pe,O[Ae]=K,Y=Ae;else break e}}return W}function i(O,W){var K=O.sortIndex-W.sortIndex;return K!==0?K:O.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,p=3,m=!1,y=!1,S=!1,v=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(O){for(var W=n(c);W!==null;){if(W.callback===null)r(c);else if(W.startTime<=O)r(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=n(c)}}function E(O){if(S=!1,A(O),!y)if(n(l)!==null)y=!0,Z(b);else{var W=n(c);W!==null&&ae(E,W.startTime-O)}}function b(O,W){y=!1,S&&(S=!1,g(L),L=-1),m=!0;var K=p;try{for(A(W),f=n(l);f!==null&&(!(f.expirationTime>W)||O&&!D());){var Y=f.callback;if(typeof Y=="function"){f.callback=null,p=f.priorityLevel;var te=Y(f.expirationTime<=W);W=t.unstable_now(),typeof te=="function"?f.callback=te:f===n(l)&&r(l),A(W)}else r(l);f=n(l)}if(f!==null)var Te=!0;else{var ne=n(c);ne!==null&&ae(E,ne.startTime-W),Te=!1}return Te}finally{f=null,p=K,m=!1}}var C=!1,P=null,L=-1,N=5,T=-1;function D(){return!(t.unstable_now()-T<N)}function z(){if(P!==null){var O=t.unstable_now();T=O;var W=!0;try{W=P(!0,O)}finally{W?j():(C=!1,P=null)}}else C=!1}var j;if(typeof _=="function")j=function(){_(z)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,q=H.port2;H.port1.onmessage=z,j=function(){q.postMessage(null)}}else j=function(){v(z,0)};function Z(O){P=O,C||(C=!0,j())}function ae(O,W){L=v(function(){O(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){y||m||(y=!0,Z(b))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(O){switch(p){case 1:case 2:case 3:var W=3;break;default:W=p}var K=p;p=W;try{return O()}finally{p=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,W){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var K=p;p=O;try{return W()}finally{p=K}},t.unstable_scheduleCallback=function(O,W,K){var Y=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?Y+K:Y):K=Y,O){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=K+te,O={id:u++,callback:W,priorityLevel:O,startTime:K,expirationTime:te,sortIndex:-1},K>Y?(O.sortIndex=K,e(c,O),n(l)===null&&O===n(c)&&(S?(g(L),L=-1):S=!0,ae(E,K-Y))):(O.sortIndex=te,e(l,O),y||m||(y=!0,Z(b))),O},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(O){var W=p;return function(){var K=p;p=W;try{return O.apply(this,arguments)}finally{p=K}}}})(P4);R4.exports=P4;var Y7=R4.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I4=$,es=Y7;function Le(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var L4=new Set,Jp={};function wu(t,e){gf(t,e),gf(t+"Capture",e)}function gf(t,e){for(Jp[t]=e,t=0;t<e.length;t++)L4.add(e[t])}var Ea=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qE=Object.prototype.hasOwnProperty,Q7=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,I3={},L3={};function Z7(t){return qE.call(L3,t)?!0:qE.call(I3,t)?!1:Q7.test(t)?L3[t]=!0:(I3[t]=!0,!1)}function ej(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function tj(t,e,n,r){if(e===null||typeof e>"u"||ej(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Mi(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Gr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Gr[t]=new Mi(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Gr[e]=new Mi(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Gr[t]=new Mi(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Gr[t]=new Mi(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Gr[t]=new Mi(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Gr[t]=new Mi(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Gr[t]=new Mi(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Gr[t]=new Mi(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Gr[t]=new Mi(t,5,!1,t.toLowerCase(),null,!1,!1)});var fb=/[\-:]([a-z])/g;function db(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(fb,db);Gr[e]=new Mi(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(fb,db);Gr[e]=new Mi(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(fb,db);Gr[e]=new Mi(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Gr[t]=new Mi(t,1,!1,t.toLowerCase(),null,!1,!1)});Gr.xlinkHref=new Mi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Gr[t]=new Mi(t,1,!1,t.toLowerCase(),null,!0,!0)});function pb(t,e,n,r){var i=Gr.hasOwnProperty(e)?Gr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(tj(e,n,i,r)&&(n=null),r||i===null?Z7(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Da=I4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wy=Symbol.for("react.element"),bh=Symbol.for("react.portal"),Rh=Symbol.for("react.fragment"),mb=Symbol.for("react.strict_mode"),YE=Symbol.for("react.profiler"),D4=Symbol.for("react.provider"),B4=Symbol.for("react.context"),gb=Symbol.for("react.forward_ref"),QE=Symbol.for("react.suspense"),ZE=Symbol.for("react.suspense_list"),yb=Symbol.for("react.memo"),nl=Symbol.for("react.lazy"),N4=Symbol.for("react.offscreen"),D3=Symbol.iterator;function Pd(t){return t===null||typeof t!="object"?null:(t=D3&&t[D3]||t["@@iterator"],typeof t=="function"?t:null)}var On=Object.assign,CA;function cp(t){if(CA===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);CA=e&&e[1]||""}return`
`+CA+t}var bA=!1;function RA(t,e){if(!t||bA)return"";bA=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{bA=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?cp(t):""}function nj(t){switch(t.tag){case 5:return cp(t.type);case 16:return cp("Lazy");case 13:return cp("Suspense");case 19:return cp("SuspenseList");case 0:case 2:case 15:return t=RA(t.type,!1),t;case 11:return t=RA(t.type.render,!1),t;case 1:return t=RA(t.type,!0),t;default:return""}}function eM(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Rh:return"Fragment";case bh:return"Portal";case YE:return"Profiler";case mb:return"StrictMode";case QE:return"Suspense";case ZE:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case B4:return(t.displayName||"Context")+".Consumer";case D4:return(t._context.displayName||"Context")+".Provider";case gb:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case yb:return e=t.displayName||null,e!==null?e:eM(t.type)||"Memo";case nl:e=t._payload,t=t._init;try{return eM(t(e))}catch{}}return null}function rj(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return eM(e);case 8:return e===mb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Nl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function O4(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ij(t){var e=O4(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Xy(t){t._valueTracker||(t._valueTracker=ij(t))}function F4(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=O4(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function e_(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function tM(t,e){var n=e.checked;return On({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function B3(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Nl(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function k4(t,e){e=e.checked,e!=null&&pb(t,"checked",e,!1)}function nM(t,e){k4(t,e);var n=Nl(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?rM(t,e.type,n):e.hasOwnProperty("defaultValue")&&rM(t,e.type,Nl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function N3(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function rM(t,e,n){(e!=="number"||e_(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var up=Array.isArray;function Yh(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Nl(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function iM(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Le(91));return On({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function O3(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Le(92));if(up(n)){if(1<n.length)throw Error(Le(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Nl(n)}}function U4(t,e){var n=Nl(e.value),r=Nl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function F3(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function V4(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function sM(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?V4(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ky,z4=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ky=Ky||document.createElement("div"),Ky.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ky.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function qp(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Sp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sj=["Webkit","ms","Moz","O"];Object.keys(Sp).forEach(function(t){sj.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Sp[e]=Sp[t]})});function H4(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Sp.hasOwnProperty(t)&&Sp[t]?(""+e).trim():e+"px"}function G4(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=H4(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var oj=On({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function oM(t,e){if(e){if(oj[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Le(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Le(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Le(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Le(62))}}function aM(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lM=null;function vb(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var cM=null,Qh=null,Zh=null;function k3(t){if(t=ag(t)){if(typeof cM!="function")throw Error(Le(280));var e=t.stateNode;e&&(e=Bx(e),cM(t.stateNode,t.type,e))}}function j4(t){Qh?Zh?Zh.push(t):Zh=[t]:Qh=t}function W4(){if(Qh){var t=Qh,e=Zh;if(Zh=Qh=null,k3(t),e)for(t=0;t<e.length;t++)k3(e[t])}}function X4(t,e){return t(e)}function K4(){}var PA=!1;function $4(t,e,n){if(PA)return t(e,n);PA=!0;try{return X4(t,e,n)}finally{PA=!1,(Qh!==null||Zh!==null)&&(K4(),W4())}}function Yp(t,e){var n=t.stateNode;if(n===null)return null;var r=Bx(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Le(231,e,typeof n));return n}var uM=!1;if(Ea)try{var Id={};Object.defineProperty(Id,"passive",{get:function(){uM=!0}}),window.addEventListener("test",Id,Id),window.removeEventListener("test",Id,Id)}catch{uM=!1}function aj(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Ap=!1,t_=null,n_=!1,hM=null,lj={onError:function(t){Ap=!0,t_=t}};function cj(t,e,n,r,i,s,o,a,l){Ap=!1,t_=null,aj.apply(lj,arguments)}function uj(t,e,n,r,i,s,o,a,l){if(cj.apply(this,arguments),Ap){if(Ap){var c=t_;Ap=!1,t_=null}else throw Error(Le(198));n_||(n_=!0,hM=c)}}function Eu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function J4(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function U3(t){if(Eu(t)!==t)throw Error(Le(188))}function hj(t){var e=t.alternate;if(!e){if(e=Eu(t),e===null)throw Error(Le(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return U3(i),t;if(s===r)return U3(i),e;s=s.sibling}throw Error(Le(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Le(189))}}if(n.alternate!==r)throw Error(Le(190))}if(n.tag!==3)throw Error(Le(188));return n.stateNode.current===n?t:e}function q4(t){return t=hj(t),t!==null?Y4(t):null}function Y4(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Y4(t);if(e!==null)return e;t=t.sibling}return null}var Q4=es.unstable_scheduleCallback,V3=es.unstable_cancelCallback,fj=es.unstable_shouldYield,dj=es.unstable_requestPaint,qn=es.unstable_now,pj=es.unstable_getCurrentPriorityLevel,_b=es.unstable_ImmediatePriority,Z4=es.unstable_UserBlockingPriority,r_=es.unstable_NormalPriority,mj=es.unstable_LowPriority,ek=es.unstable_IdlePriority,Px=null,Io=null;function gj(t){if(Io&&typeof Io.onCommitFiberRoot=="function")try{Io.onCommitFiberRoot(Px,t,void 0,(t.current.flags&128)===128)}catch{}}var Qs=Math.clz32?Math.clz32:_j,yj=Math.log,vj=Math.LN2;function _j(t){return t>>>=0,t===0?32:31-(yj(t)/vj|0)|0}var $y=64,Jy=4194304;function hp(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function i_(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=hp(a):(s&=o,s!==0&&(r=hp(s)))}else o=n&~i,o!==0?r=hp(o):s!==0&&(r=hp(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Qs(e),i=1<<n,r|=t[n],e&=~i;return r}function xj(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sj(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Qs(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=xj(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function fM(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function tk(){var t=$y;return $y<<=1,!($y&4194240)&&($y=64),t}function IA(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function sg(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Qs(e),t[e]=n}function Aj(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Qs(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function xb(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Qs(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var hn=0;function nk(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var rk,Sb,ik,sk,ok,dM=!1,qy=[],vl=null,_l=null,xl=null,Qp=new Map,Zp=new Map,al=[],wj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function z3(t,e){switch(t){case"focusin":case"focusout":vl=null;break;case"dragenter":case"dragleave":_l=null;break;case"mouseover":case"mouseout":xl=null;break;case"pointerover":case"pointerout":Qp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zp.delete(e.pointerId)}}function Ld(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ag(e),e!==null&&Sb(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Ej(t,e,n,r,i){switch(e){case"focusin":return vl=Ld(vl,t,e,n,r,i),!0;case"dragenter":return _l=Ld(_l,t,e,n,r,i),!0;case"mouseover":return xl=Ld(xl,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Qp.set(s,Ld(Qp.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Zp.set(s,Ld(Zp.get(s)||null,t,e,n,r,i)),!0}return!1}function ak(t){var e=kc(t.target);if(e!==null){var n=Eu(e);if(n!==null){if(e=n.tag,e===13){if(e=J4(n),e!==null){t.blockedOn=e,ok(t.priority,function(){ik(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Tv(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=pM(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);lM=r,n.target.dispatchEvent(r),lM=null}else return e=ag(n),e!==null&&Sb(e),t.blockedOn=n,!1;e.shift()}return!0}function H3(t,e,n){Tv(t)&&n.delete(e)}function Mj(){dM=!1,vl!==null&&Tv(vl)&&(vl=null),_l!==null&&Tv(_l)&&(_l=null),xl!==null&&Tv(xl)&&(xl=null),Qp.forEach(H3),Zp.forEach(H3)}function Dd(t,e){t.blockedOn===e&&(t.blockedOn=null,dM||(dM=!0,es.unstable_scheduleCallback(es.unstable_NormalPriority,Mj)))}function em(t){function e(i){return Dd(i,t)}if(0<qy.length){Dd(qy[0],t);for(var n=1;n<qy.length;n++){var r=qy[n];r.blockedOn===t&&(r.blockedOn=null)}}for(vl!==null&&Dd(vl,t),_l!==null&&Dd(_l,t),xl!==null&&Dd(xl,t),Qp.forEach(e),Zp.forEach(e),n=0;n<al.length;n++)r=al[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<al.length&&(n=al[0],n.blockedOn===null);)ak(n),n.blockedOn===null&&al.shift()}var ef=Da.ReactCurrentBatchConfig,s_=!0;function Tj(t,e,n,r){var i=hn,s=ef.transition;ef.transition=null;try{hn=1,Ab(t,e,n,r)}finally{hn=i,ef.transition=s}}function Cj(t,e,n,r){var i=hn,s=ef.transition;ef.transition=null;try{hn=4,Ab(t,e,n,r)}finally{hn=i,ef.transition=s}}function Ab(t,e,n,r){if(s_){var i=pM(t,e,n,r);if(i===null)zA(t,e,r,o_,n),z3(t,r);else if(Ej(i,t,e,n,r))r.stopPropagation();else if(z3(t,r),e&4&&-1<wj.indexOf(t)){for(;i!==null;){var s=ag(i);if(s!==null&&rk(s),s=pM(t,e,n,r),s===null&&zA(t,e,r,o_,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else zA(t,e,r,null,n)}}var o_=null;function pM(t,e,n,r){if(o_=null,t=vb(r),t=kc(t),t!==null)if(e=Eu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=J4(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return o_=t,null}function lk(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pj()){case _b:return 1;case Z4:return 4;case r_:case mj:return 16;case ek:return 536870912;default:return 16}default:return 16}}var hl=null,wb=null,Cv=null;function ck(){if(Cv)return Cv;var t,e=wb,n=e.length,r,i="value"in hl?hl.value:hl.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Cv=i.slice(t,1<r?1-r:void 0)}function bv(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Yy(){return!0}function G3(){return!1}function as(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Yy:G3,this.isPropagationStopped=G3,this}return On(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Yy)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Yy)},persist:function(){},isPersistent:Yy}),e}var $f={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Eb=as($f),og=On({},$f,{view:0,detail:0}),bj=as(og),LA,DA,Bd,Ix=On({},og,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mb,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Bd&&(Bd&&t.type==="mousemove"?(LA=t.screenX-Bd.screenX,DA=t.screenY-Bd.screenY):DA=LA=0,Bd=t),LA)},movementY:function(t){return"movementY"in t?t.movementY:DA}}),j3=as(Ix),Rj=On({},Ix,{dataTransfer:0}),Pj=as(Rj),Ij=On({},og,{relatedTarget:0}),BA=as(Ij),Lj=On({},$f,{animationName:0,elapsedTime:0,pseudoElement:0}),Dj=as(Lj),Bj=On({},$f,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Nj=as(Bj),Oj=On({},$f,{data:0}),W3=as(Oj),Fj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Uj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vj(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Uj[t])?!!e[t]:!1}function Mb(){return Vj}var zj=On({},og,{key:function(t){if(t.key){var e=Fj[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=bv(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?kj[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mb,charCode:function(t){return t.type==="keypress"?bv(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?bv(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Hj=as(zj),Gj=On({},Ix,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),X3=as(Gj),jj=On({},og,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mb}),Wj=as(jj),Xj=On({},$f,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kj=as(Xj),$j=On({},Ix,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Jj=as($j),qj=[9,13,27,32],Tb=Ea&&"CompositionEvent"in window,wp=null;Ea&&"documentMode"in document&&(wp=document.documentMode);var Yj=Ea&&"TextEvent"in window&&!wp,uk=Ea&&(!Tb||wp&&8<wp&&11>=wp),K3=" ",$3=!1;function hk(t,e){switch(t){case"keyup":return qj.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fk(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ph=!1;function Qj(t,e){switch(t){case"compositionend":return fk(e);case"keypress":return e.which!==32?null:($3=!0,K3);case"textInput":return t=e.data,t===K3&&$3?null:t;default:return null}}function Zj(t,e){if(Ph)return t==="compositionend"||!Tb&&hk(t,e)?(t=ck(),Cv=wb=hl=null,Ph=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return uk&&e.locale!=="ko"?null:e.data;default:return null}}var eW={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function J3(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!eW[t.type]:e==="textarea"}function dk(t,e,n,r){j4(r),e=a_(e,"onChange"),0<e.length&&(n=new Eb("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ep=null,tm=null;function tW(t){Ek(t,0)}function Lx(t){var e=Dh(t);if(F4(e))return t}function nW(t,e){if(t==="change")return e}var pk=!1;if(Ea){var NA;if(Ea){var OA="oninput"in document;if(!OA){var q3=document.createElement("div");q3.setAttribute("oninput","return;"),OA=typeof q3.oninput=="function"}NA=OA}else NA=!1;pk=NA&&(!document.documentMode||9<document.documentMode)}function Y3(){Ep&&(Ep.detachEvent("onpropertychange",mk),tm=Ep=null)}function mk(t){if(t.propertyName==="value"&&Lx(tm)){var e=[];dk(e,tm,t,vb(t)),$4(tW,e)}}function rW(t,e,n){t==="focusin"?(Y3(),Ep=e,tm=n,Ep.attachEvent("onpropertychange",mk)):t==="focusout"&&Y3()}function iW(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Lx(tm)}function sW(t,e){if(t==="click")return Lx(e)}function oW(t,e){if(t==="input"||t==="change")return Lx(e)}function aW(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var to=typeof Object.is=="function"?Object.is:aW;function nm(t,e){if(to(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!qE.call(e,i)||!to(t[i],e[i]))return!1}return!0}function Q3(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Z3(t,e){var n=Q3(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Q3(n)}}function gk(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?gk(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function yk(){for(var t=window,e=e_();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=e_(t.document)}return e}function Cb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function lW(t){var e=yk(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&gk(n.ownerDocument.documentElement,n)){if(r!==null&&Cb(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Z3(n,s);var o=Z3(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var cW=Ea&&"documentMode"in document&&11>=document.documentMode,Ih=null,mM=null,Mp=null,gM=!1;function eL(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;gM||Ih==null||Ih!==e_(r)||(r=Ih,"selectionStart"in r&&Cb(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Mp&&nm(Mp,r)||(Mp=r,r=a_(mM,"onSelect"),0<r.length&&(e=new Eb("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ih)))}function Qy(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Lh={animationend:Qy("Animation","AnimationEnd"),animationiteration:Qy("Animation","AnimationIteration"),animationstart:Qy("Animation","AnimationStart"),transitionend:Qy("Transition","TransitionEnd")},FA={},vk={};Ea&&(vk=document.createElement("div").style,"AnimationEvent"in window||(delete Lh.animationend.animation,delete Lh.animationiteration.animation,delete Lh.animationstart.animation),"TransitionEvent"in window||delete Lh.transitionend.transition);function Dx(t){if(FA[t])return FA[t];if(!Lh[t])return t;var e=Lh[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in vk)return FA[t]=e[n];return t}var _k=Dx("animationend"),xk=Dx("animationiteration"),Sk=Dx("animationstart"),Ak=Dx("transitionend"),wk=new Map,tL="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $l(t,e){wk.set(t,e),wu(e,[t])}for(var kA=0;kA<tL.length;kA++){var UA=tL[kA],uW=UA.toLowerCase(),hW=UA[0].toUpperCase()+UA.slice(1);$l(uW,"on"+hW)}$l(_k,"onAnimationEnd");$l(xk,"onAnimationIteration");$l(Sk,"onAnimationStart");$l("dblclick","onDoubleClick");$l("focusin","onFocus");$l("focusout","onBlur");$l(Ak,"onTransitionEnd");gf("onMouseEnter",["mouseout","mouseover"]);gf("onMouseLeave",["mouseout","mouseover"]);gf("onPointerEnter",["pointerout","pointerover"]);gf("onPointerLeave",["pointerout","pointerover"]);wu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wu("onBeforeInput",["compositionend","keypress","textInput","paste"]);wu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fW=new Set("cancel close invalid load scroll toggle".split(" ").concat(fp));function nL(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,uj(r,e,void 0,t),t.currentTarget=null}function Ek(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;nL(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;nL(i,a,c),s=l}}}if(n_)throw t=hM,n_=!1,hM=null,t}function _n(t,e){var n=e[SM];n===void 0&&(n=e[SM]=new Set);var r=t+"__bubble";n.has(r)||(Mk(e,t,2,!1),n.add(r))}function VA(t,e,n){var r=0;e&&(r|=4),Mk(n,t,r,e)}var Zy="_reactListening"+Math.random().toString(36).slice(2);function rm(t){if(!t[Zy]){t[Zy]=!0,L4.forEach(function(n){n!=="selectionchange"&&(fW.has(n)||VA(n,!1,t),VA(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Zy]||(e[Zy]=!0,VA("selectionchange",!1,e))}}function Mk(t,e,n,r){switch(lk(e)){case 1:var i=Tj;break;case 4:i=Cj;break;default:i=Ab}n=i.bind(null,e,n,t),i=void 0,!uM||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function zA(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=kc(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}$4(function(){var c=s,u=vb(n),f=[];e:{var p=wk.get(t);if(p!==void 0){var m=Eb,y=t;switch(t){case"keypress":if(bv(n)===0)break e;case"keydown":case"keyup":m=Hj;break;case"focusin":y="focus",m=BA;break;case"focusout":y="blur",m=BA;break;case"beforeblur":case"afterblur":m=BA;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=j3;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Pj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Wj;break;case _k:case xk:case Sk:m=Dj;break;case Ak:m=Kj;break;case"scroll":m=bj;break;case"wheel":m=Jj;break;case"copy":case"cut":case"paste":m=Nj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=X3}var S=(e&4)!==0,v=!S&&t==="scroll",g=S?p!==null?p+"Capture":null:p;S=[];for(var _=c,A;_!==null;){A=_;var E=A.stateNode;if(A.tag===5&&E!==null&&(A=E,g!==null&&(E=Yp(_,g),E!=null&&S.push(im(_,E,A)))),v)break;_=_.return}0<S.length&&(p=new m(p,y,null,n,u),f.push({event:p,listeners:S}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==lM&&(y=n.relatedTarget||n.fromElement)&&(kc(y)||y[Ma]))break e;if((m||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,m?(y=n.relatedTarget||n.toElement,m=c,y=y?kc(y):null,y!==null&&(v=Eu(y),y!==v||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=c),m!==y)){if(S=j3,E="onMouseLeave",g="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(S=X3,E="onPointerLeave",g="onPointerEnter",_="pointer"),v=m==null?p:Dh(m),A=y==null?p:Dh(y),p=new S(E,_+"leave",m,n,u),p.target=v,p.relatedTarget=A,E=null,kc(u)===c&&(S=new S(g,_+"enter",y,n,u),S.target=A,S.relatedTarget=v,E=S),v=E,m&&y)t:{for(S=m,g=y,_=0,A=S;A;A=Yu(A))_++;for(A=0,E=g;E;E=Yu(E))A++;for(;0<_-A;)S=Yu(S),_--;for(;0<A-_;)g=Yu(g),A--;for(;_--;){if(S===g||g!==null&&S===g.alternate)break t;S=Yu(S),g=Yu(g)}S=null}else S=null;m!==null&&rL(f,p,m,S,!1),y!==null&&v!==null&&rL(f,v,y,S,!0)}}e:{if(p=c?Dh(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var b=nW;else if(J3(p))if(pk)b=oW;else{b=iW;var C=rW}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(b=sW);if(b&&(b=b(t,c))){dk(f,b,n,u);break e}C&&C(t,p,c),t==="focusout"&&(C=p._wrapperState)&&C.controlled&&p.type==="number"&&rM(p,"number",p.value)}switch(C=c?Dh(c):window,t){case"focusin":(J3(C)||C.contentEditable==="true")&&(Ih=C,mM=c,Mp=null);break;case"focusout":Mp=mM=Ih=null;break;case"mousedown":gM=!0;break;case"contextmenu":case"mouseup":case"dragend":gM=!1,eL(f,n,u);break;case"selectionchange":if(cW)break;case"keydown":case"keyup":eL(f,n,u)}var P;if(Tb)e:{switch(t){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else Ph?hk(t,n)&&(L="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(L="onCompositionStart");L&&(uk&&n.locale!=="ko"&&(Ph||L!=="onCompositionStart"?L==="onCompositionEnd"&&Ph&&(P=ck()):(hl=u,wb="value"in hl?hl.value:hl.textContent,Ph=!0)),C=a_(c,L),0<C.length&&(L=new W3(L,t,null,n,u),f.push({event:L,listeners:C}),P?L.data=P:(P=fk(n),P!==null&&(L.data=P)))),(P=Yj?Qj(t,n):Zj(t,n))&&(c=a_(c,"onBeforeInput"),0<c.length&&(u=new W3("onBeforeInput","beforeinput",null,n,u),f.push({event:u,listeners:c}),u.data=P))}Ek(f,e)})}function im(t,e,n){return{instance:t,listener:e,currentTarget:n}}function a_(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Yp(t,n),s!=null&&r.unshift(im(t,s,i)),s=Yp(t,e),s!=null&&r.push(im(t,s,i))),t=t.return}return r}function Yu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function rL(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Yp(n,s),l!=null&&o.unshift(im(n,l,a))):i||(l=Yp(n,s),l!=null&&o.push(im(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var dW=/\r\n?/g,pW=/\u0000|\uFFFD/g;function iL(t){return(typeof t=="string"?t:""+t).replace(dW,`
`).replace(pW,"")}function e0(t,e,n){if(e=iL(e),iL(t)!==e&&n)throw Error(Le(425))}function l_(){}var yM=null,vM=null;function _M(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var xM=typeof setTimeout=="function"?setTimeout:void 0,mW=typeof clearTimeout=="function"?clearTimeout:void 0,sL=typeof Promise=="function"?Promise:void 0,gW=typeof queueMicrotask=="function"?queueMicrotask:typeof sL<"u"?function(t){return sL.resolve(null).then(t).catch(yW)}:xM;function yW(t){setTimeout(function(){throw t})}function HA(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),em(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);em(e)}function Sl(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function oL(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Jf=Math.random().toString(36).slice(2),Eo="__reactFiber$"+Jf,sm="__reactProps$"+Jf,Ma="__reactContainer$"+Jf,SM="__reactEvents$"+Jf,vW="__reactListeners$"+Jf,_W="__reactHandles$"+Jf;function kc(t){var e=t[Eo];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ma]||n[Eo]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=oL(t);t!==null;){if(n=t[Eo])return n;t=oL(t)}return e}t=n,n=t.parentNode}return null}function ag(t){return t=t[Eo]||t[Ma],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Dh(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Le(33))}function Bx(t){return t[sm]||null}var AM=[],Bh=-1;function Jl(t){return{current:t}}function En(t){0>Bh||(t.current=AM[Bh],AM[Bh]=null,Bh--)}function yn(t,e){Bh++,AM[Bh]=t.current,t.current=e}var Ol={},oi=Jl(Ol),Di=Jl(!1),cu=Ol;function yf(t,e){var n=t.type.contextTypes;if(!n)return Ol;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Bi(t){return t=t.childContextTypes,t!=null}function c_(){En(Di),En(oi)}function aL(t,e,n){if(oi.current!==Ol)throw Error(Le(168));yn(oi,e),yn(Di,n)}function Tk(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Le(108,rj(t)||"Unknown",i));return On({},n,r)}function u_(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ol,cu=oi.current,yn(oi,t),yn(Di,Di.current),!0}function lL(t,e,n){var r=t.stateNode;if(!r)throw Error(Le(169));n?(t=Tk(t,e,cu),r.__reactInternalMemoizedMergedChildContext=t,En(Di),En(oi),yn(oi,t)):En(Di),yn(Di,n)}var ca=null,Nx=!1,GA=!1;function Ck(t){ca===null?ca=[t]:ca.push(t)}function xW(t){Nx=!0,Ck(t)}function ql(){if(!GA&&ca!==null){GA=!0;var t=0,e=hn;try{var n=ca;for(hn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ca=null,Nx=!1}catch(i){throw ca!==null&&(ca=ca.slice(t+1)),Q4(_b,ql),i}finally{hn=e,GA=!1}}return null}var Nh=[],Oh=0,h_=null,f_=0,Es=[],Ms=0,uu=null,fa=1,da="";function Ec(t,e){Nh[Oh++]=f_,Nh[Oh++]=h_,h_=t,f_=e}function bk(t,e,n){Es[Ms++]=fa,Es[Ms++]=da,Es[Ms++]=uu,uu=t;var r=fa;t=da;var i=32-Qs(r)-1;r&=~(1<<i),n+=1;var s=32-Qs(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,fa=1<<32-Qs(e)+i|n<<i|r,da=s+t}else fa=1<<s|n<<i|r,da=t}function bb(t){t.return!==null&&(Ec(t,1),bk(t,1,0))}function Rb(t){for(;t===h_;)h_=Nh[--Oh],Nh[Oh]=null,f_=Nh[--Oh],Nh[Oh]=null;for(;t===uu;)uu=Es[--Ms],Es[Ms]=null,da=Es[--Ms],Es[Ms]=null,fa=Es[--Ms],Es[Ms]=null}var Qi=null,Ji=null,bn=!1,Xs=null;function Rk(t,e){var n=Ps(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function cL(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Qi=t,Ji=Sl(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Qi=t,Ji=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=uu!==null?{id:fa,overflow:da}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ps(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Qi=t,Ji=null,!0):!1;default:return!1}}function wM(t){return(t.mode&1)!==0&&(t.flags&128)===0}function EM(t){if(bn){var e=Ji;if(e){var n=e;if(!cL(t,e)){if(wM(t))throw Error(Le(418));e=Sl(n.nextSibling);var r=Qi;e&&cL(t,e)?Rk(r,n):(t.flags=t.flags&-4097|2,bn=!1,Qi=t)}}else{if(wM(t))throw Error(Le(418));t.flags=t.flags&-4097|2,bn=!1,Qi=t}}}function uL(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Qi=t}function t0(t){if(t!==Qi)return!1;if(!bn)return uL(t),bn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!_M(t.type,t.memoizedProps)),e&&(e=Ji)){if(wM(t))throw Pk(),Error(Le(418));for(;e;)Rk(t,e),e=Sl(e.nextSibling)}if(uL(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Le(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ji=Sl(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ji=null}}else Ji=Qi?Sl(t.stateNode.nextSibling):null;return!0}function Pk(){for(var t=Ji;t;)t=Sl(t.nextSibling)}function vf(){Ji=Qi=null,bn=!1}function Pb(t){Xs===null?Xs=[t]:Xs.push(t)}var SW=Da.ReactCurrentBatchConfig;function Gs(t,e){if(t&&t.defaultProps){e=On({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var d_=Jl(null),p_=null,Fh=null,Ib=null;function Lb(){Ib=Fh=p_=null}function Db(t){var e=d_.current;En(d_),t._currentValue=e}function MM(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function tf(t,e){p_=t,Ib=Fh=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Li=!0),t.firstContext=null)}function Ns(t){var e=t._currentValue;if(Ib!==t)if(t={context:t,memoizedValue:e,next:null},Fh===null){if(p_===null)throw Error(Le(308));Fh=t,p_.dependencies={lanes:0,firstContext:t}}else Fh=Fh.next=t;return e}var Uc=null;function Bb(t){Uc===null?Uc=[t]:Uc.push(t)}function Ik(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Bb(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ta(t,r)}function Ta(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var rl=!1;function Nb(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lk(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function _a(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Al(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,en&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ta(t,n)}return i=r.interleaved,i===null?(e.next=e,Bb(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ta(t,n)}function Rv(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,xb(t,n)}}function hL(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function m_(t,e,n,r){var i=t.updateQueue;rl=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,u=c=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((r&p)===p){u!==null&&(u=u.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,S=a;switch(p=e,m=n,S.tag){case 1:if(y=S.payload,typeof y=="function"){f=y.call(m,f,p);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=S.payload,p=typeof y=="function"?y.call(m,f,p):y,p==null)break e;f=On({},f,p);break e;case 2:rl=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=m,l=f):u=u.next=m,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(u===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);fu|=o,t.lanes=o,t.memoizedState=f}}function fL(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Le(191,i));i.call(r)}}}var Dk=new I4.Component().refs;function TM(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:On({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ox={isMounted:function(t){return(t=t._reactInternals)?Eu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ai(),i=El(t),s=_a(r,i);s.payload=e,n!=null&&(s.callback=n),e=Al(t,s,i),e!==null&&(Zs(e,t,i,r),Rv(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ai(),i=El(t),s=_a(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Al(t,s,i),e!==null&&(Zs(e,t,i,r),Rv(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ai(),r=El(t),i=_a(n,r);i.tag=2,e!=null&&(i.callback=e),e=Al(t,i,r),e!==null&&(Zs(e,t,r,n),Rv(e,t,r))}};function dL(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!nm(n,r)||!nm(i,s):!0}function Bk(t,e,n){var r=!1,i=Ol,s=e.contextType;return typeof s=="object"&&s!==null?s=Ns(s):(i=Bi(e)?cu:oi.current,r=e.contextTypes,s=(r=r!=null)?yf(t,i):Ol),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ox,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function pL(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ox.enqueueReplaceState(e,e.state,null)}function CM(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=Dk,Nb(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ns(s):(s=Bi(e)?cu:oi.current,i.context=yf(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(TM(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ox.enqueueReplaceState(i,i.state,null),m_(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Nd(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Le(309));var r=n.stateNode}if(!r)throw Error(Le(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===Dk&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Le(284));if(!n._owner)throw Error(Le(290,t))}return t}function n0(t,e){throw t=Object.prototype.toString.call(e),Error(Le(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function mL(t){var e=t._init;return e(t._payload)}function Nk(t){function e(g,_){if(t){var A=g.deletions;A===null?(g.deletions=[_],g.flags|=16):A.push(_)}}function n(g,_){if(!t)return null;for(;_!==null;)e(g,_),_=_.sibling;return null}function r(g,_){for(g=new Map;_!==null;)_.key!==null?g.set(_.key,_):g.set(_.index,_),_=_.sibling;return g}function i(g,_){return g=Ml(g,_),g.index=0,g.sibling=null,g}function s(g,_,A){return g.index=A,t?(A=g.alternate,A!==null?(A=A.index,A<_?(g.flags|=2,_):A):(g.flags|=2,_)):(g.flags|=1048576,_)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,_,A,E){return _===null||_.tag!==6?(_=qA(A,g.mode,E),_.return=g,_):(_=i(_,A),_.return=g,_)}function l(g,_,A,E){var b=A.type;return b===Rh?u(g,_,A.props.children,E,A.key):_!==null&&(_.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===nl&&mL(b)===_.type)?(E=i(_,A.props),E.ref=Nd(g,_,A),E.return=g,E):(E=Nv(A.type,A.key,A.props,null,g.mode,E),E.ref=Nd(g,_,A),E.return=g,E)}function c(g,_,A,E){return _===null||_.tag!==4||_.stateNode.containerInfo!==A.containerInfo||_.stateNode.implementation!==A.implementation?(_=YA(A,g.mode,E),_.return=g,_):(_=i(_,A.children||[]),_.return=g,_)}function u(g,_,A,E,b){return _===null||_.tag!==7?(_=Qc(A,g.mode,E,b),_.return=g,_):(_=i(_,A),_.return=g,_)}function f(g,_,A){if(typeof _=="string"&&_!==""||typeof _=="number")return _=qA(""+_,g.mode,A),_.return=g,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Wy:return A=Nv(_.type,_.key,_.props,null,g.mode,A),A.ref=Nd(g,null,_),A.return=g,A;case bh:return _=YA(_,g.mode,A),_.return=g,_;case nl:var E=_._init;return f(g,E(_._payload),A)}if(up(_)||Pd(_))return _=Qc(_,g.mode,A,null),_.return=g,_;n0(g,_)}return null}function p(g,_,A,E){var b=_!==null?_.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return b!==null?null:a(g,_,""+A,E);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Wy:return A.key===b?l(g,_,A,E):null;case bh:return A.key===b?c(g,_,A,E):null;case nl:return b=A._init,p(g,_,b(A._payload),E)}if(up(A)||Pd(A))return b!==null?null:u(g,_,A,E,null);n0(g,A)}return null}function m(g,_,A,E,b){if(typeof E=="string"&&E!==""||typeof E=="number")return g=g.get(A)||null,a(_,g,""+E,b);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Wy:return g=g.get(E.key===null?A:E.key)||null,l(_,g,E,b);case bh:return g=g.get(E.key===null?A:E.key)||null,c(_,g,E,b);case nl:var C=E._init;return m(g,_,A,C(E._payload),b)}if(up(E)||Pd(E))return g=g.get(A)||null,u(_,g,E,b,null);n0(_,E)}return null}function y(g,_,A,E){for(var b=null,C=null,P=_,L=_=0,N=null;P!==null&&L<A.length;L++){P.index>L?(N=P,P=null):N=P.sibling;var T=p(g,P,A[L],E);if(T===null){P===null&&(P=N);break}t&&P&&T.alternate===null&&e(g,P),_=s(T,_,L),C===null?b=T:C.sibling=T,C=T,P=N}if(L===A.length)return n(g,P),bn&&Ec(g,L),b;if(P===null){for(;L<A.length;L++)P=f(g,A[L],E),P!==null&&(_=s(P,_,L),C===null?b=P:C.sibling=P,C=P);return bn&&Ec(g,L),b}for(P=r(g,P);L<A.length;L++)N=m(P,g,L,A[L],E),N!==null&&(t&&N.alternate!==null&&P.delete(N.key===null?L:N.key),_=s(N,_,L),C===null?b=N:C.sibling=N,C=N);return t&&P.forEach(function(D){return e(g,D)}),bn&&Ec(g,L),b}function S(g,_,A,E){var b=Pd(A);if(typeof b!="function")throw Error(Le(150));if(A=b.call(A),A==null)throw Error(Le(151));for(var C=b=null,P=_,L=_=0,N=null,T=A.next();P!==null&&!T.done;L++,T=A.next()){P.index>L?(N=P,P=null):N=P.sibling;var D=p(g,P,T.value,E);if(D===null){P===null&&(P=N);break}t&&P&&D.alternate===null&&e(g,P),_=s(D,_,L),C===null?b=D:C.sibling=D,C=D,P=N}if(T.done)return n(g,P),bn&&Ec(g,L),b;if(P===null){for(;!T.done;L++,T=A.next())T=f(g,T.value,E),T!==null&&(_=s(T,_,L),C===null?b=T:C.sibling=T,C=T);return bn&&Ec(g,L),b}for(P=r(g,P);!T.done;L++,T=A.next())T=m(P,g,L,T.value,E),T!==null&&(t&&T.alternate!==null&&P.delete(T.key===null?L:T.key),_=s(T,_,L),C===null?b=T:C.sibling=T,C=T);return t&&P.forEach(function(z){return e(g,z)}),bn&&Ec(g,L),b}function v(g,_,A,E){if(typeof A=="object"&&A!==null&&A.type===Rh&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case Wy:e:{for(var b=A.key,C=_;C!==null;){if(C.key===b){if(b=A.type,b===Rh){if(C.tag===7){n(g,C.sibling),_=i(C,A.props.children),_.return=g,g=_;break e}}else if(C.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===nl&&mL(b)===C.type){n(g,C.sibling),_=i(C,A.props),_.ref=Nd(g,C,A),_.return=g,g=_;break e}n(g,C);break}else e(g,C);C=C.sibling}A.type===Rh?(_=Qc(A.props.children,g.mode,E,A.key),_.return=g,g=_):(E=Nv(A.type,A.key,A.props,null,g.mode,E),E.ref=Nd(g,_,A),E.return=g,g=E)}return o(g);case bh:e:{for(C=A.key;_!==null;){if(_.key===C)if(_.tag===4&&_.stateNode.containerInfo===A.containerInfo&&_.stateNode.implementation===A.implementation){n(g,_.sibling),_=i(_,A.children||[]),_.return=g,g=_;break e}else{n(g,_);break}else e(g,_);_=_.sibling}_=YA(A,g.mode,E),_.return=g,g=_}return o(g);case nl:return C=A._init,v(g,_,C(A._payload),E)}if(up(A))return y(g,_,A,E);if(Pd(A))return S(g,_,A,E);n0(g,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,_!==null&&_.tag===6?(n(g,_.sibling),_=i(_,A),_.return=g,g=_):(n(g,_),_=qA(A,g.mode,E),_.return=g,g=_),o(g)):n(g,_)}return v}var _f=Nk(!0),Ok=Nk(!1),lg={},Lo=Jl(lg),om=Jl(lg),am=Jl(lg);function Vc(t){if(t===lg)throw Error(Le(174));return t}function Ob(t,e){switch(yn(am,e),yn(om,t),yn(Lo,lg),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:sM(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=sM(e,t)}En(Lo),yn(Lo,e)}function xf(){En(Lo),En(om),En(am)}function Fk(t){Vc(am.current);var e=Vc(Lo.current),n=sM(e,t.type);e!==n&&(yn(om,t),yn(Lo,n))}function Fb(t){om.current===t&&(En(Lo),En(om))}var Ln=Jl(0);function g_(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var jA=[];function kb(){for(var t=0;t<jA.length;t++)jA[t]._workInProgressVersionPrimary=null;jA.length=0}var Pv=Da.ReactCurrentDispatcher,WA=Da.ReactCurrentBatchConfig,hu=0,Nn=null,hr=null,Er=null,y_=!1,Tp=!1,lm=0,AW=0;function $r(){throw Error(Le(321))}function Ub(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!to(t[n],e[n]))return!1;return!0}function Vb(t,e,n,r,i,s){if(hu=s,Nn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Pv.current=t===null||t.memoizedState===null?TW:CW,t=n(r,i),Tp){s=0;do{if(Tp=!1,lm=0,25<=s)throw Error(Le(301));s+=1,Er=hr=null,e.updateQueue=null,Pv.current=bW,t=n(r,i)}while(Tp)}if(Pv.current=v_,e=hr!==null&&hr.next!==null,hu=0,Er=hr=Nn=null,y_=!1,e)throw Error(Le(300));return t}function zb(){var t=lm!==0;return lm=0,t}function xo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Er===null?Nn.memoizedState=Er=t:Er=Er.next=t,Er}function Os(){if(hr===null){var t=Nn.alternate;t=t!==null?t.memoizedState:null}else t=hr.next;var e=Er===null?Nn.memoizedState:Er.next;if(e!==null)Er=e,hr=t;else{if(t===null)throw Error(Le(310));hr=t,t={memoizedState:hr.memoizedState,baseState:hr.baseState,baseQueue:hr.baseQueue,queue:hr.queue,next:null},Er===null?Nn.memoizedState=Er=t:Er=Er.next=t}return Er}function cm(t,e){return typeof e=="function"?e(t):e}function XA(t){var e=Os(),n=e.queue;if(n===null)throw Error(Le(311));n.lastRenderedReducer=t;var r=hr,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((hu&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Nn.lanes|=u,fu|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,to(r,e.memoizedState)||(Li=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Nn.lanes|=s,fu|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function KA(t){var e=Os(),n=e.queue;if(n===null)throw Error(Le(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);to(s,e.memoizedState)||(Li=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function kk(){}function Uk(t,e){var n=Nn,r=Os(),i=e(),s=!to(r.memoizedState,i);if(s&&(r.memoizedState=i,Li=!0),r=r.queue,Hb(Hk.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Er!==null&&Er.memoizedState.tag&1){if(n.flags|=2048,um(9,zk.bind(null,n,r,i,e),void 0,null),Mr===null)throw Error(Le(349));hu&30||Vk(n,e,i)}return i}function Vk(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Nn.updateQueue,e===null?(e={lastEffect:null,stores:null},Nn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function zk(t,e,n,r){e.value=n,e.getSnapshot=r,Gk(e)&&jk(t)}function Hk(t,e,n){return n(function(){Gk(e)&&jk(t)})}function Gk(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!to(t,n)}catch{return!0}}function jk(t){var e=Ta(t,1);e!==null&&Zs(e,t,1,-1)}function gL(t){var e=xo();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cm,lastRenderedState:t},e.queue=t,t=t.dispatch=MW.bind(null,Nn,t),[e.memoizedState,t]}function um(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Nn.updateQueue,e===null?(e={lastEffect:null,stores:null},Nn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Wk(){return Os().memoizedState}function Iv(t,e,n,r){var i=xo();Nn.flags|=t,i.memoizedState=um(1|e,n,void 0,r===void 0?null:r)}function Fx(t,e,n,r){var i=Os();r=r===void 0?null:r;var s=void 0;if(hr!==null){var o=hr.memoizedState;if(s=o.destroy,r!==null&&Ub(r,o.deps)){i.memoizedState=um(e,n,s,r);return}}Nn.flags|=t,i.memoizedState=um(1|e,n,s,r)}function yL(t,e){return Iv(8390656,8,t,e)}function Hb(t,e){return Fx(2048,8,t,e)}function Xk(t,e){return Fx(4,2,t,e)}function Kk(t,e){return Fx(4,4,t,e)}function $k(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Jk(t,e,n){return n=n!=null?n.concat([t]):null,Fx(4,4,$k.bind(null,e,t),n)}function Gb(){}function qk(t,e){var n=Os();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ub(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Yk(t,e){var n=Os();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ub(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Qk(t,e,n){return hu&21?(to(n,e)||(n=tk(),Nn.lanes|=n,fu|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Li=!0),t.memoizedState=n)}function wW(t,e){var n=hn;hn=n!==0&&4>n?n:4,t(!0);var r=WA.transition;WA.transition={};try{t(!1),e()}finally{hn=n,WA.transition=r}}function Zk(){return Os().memoizedState}function EW(t,e,n){var r=El(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},eU(t))tU(e,n);else if(n=Ik(t,e,n,r),n!==null){var i=Ai();Zs(n,t,r,i),nU(n,e,r)}}function MW(t,e,n){var r=El(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(eU(t))tU(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,to(a,o)){var l=e.interleaved;l===null?(i.next=i,Bb(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=Ik(t,e,i,r),n!==null&&(i=Ai(),Zs(n,t,r,i),nU(n,e,r))}}function eU(t){var e=t.alternate;return t===Nn||e!==null&&e===Nn}function tU(t,e){Tp=y_=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function nU(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,xb(t,n)}}var v_={readContext:Ns,useCallback:$r,useContext:$r,useEffect:$r,useImperativeHandle:$r,useInsertionEffect:$r,useLayoutEffect:$r,useMemo:$r,useReducer:$r,useRef:$r,useState:$r,useDebugValue:$r,useDeferredValue:$r,useTransition:$r,useMutableSource:$r,useSyncExternalStore:$r,useId:$r,unstable_isNewReconciler:!1},TW={readContext:Ns,useCallback:function(t,e){return xo().memoizedState=[t,e===void 0?null:e],t},useContext:Ns,useEffect:yL,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Iv(4194308,4,$k.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Iv(4194308,4,t,e)},useInsertionEffect:function(t,e){return Iv(4,2,t,e)},useMemo:function(t,e){var n=xo();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=xo();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=EW.bind(null,Nn,t),[r.memoizedState,t]},useRef:function(t){var e=xo();return t={current:t},e.memoizedState=t},useState:gL,useDebugValue:Gb,useDeferredValue:function(t){return xo().memoizedState=t},useTransition:function(){var t=gL(!1),e=t[0];return t=wW.bind(null,t[1]),xo().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Nn,i=xo();if(bn){if(n===void 0)throw Error(Le(407));n=n()}else{if(n=e(),Mr===null)throw Error(Le(349));hu&30||Vk(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,yL(Hk.bind(null,r,s,t),[t]),r.flags|=2048,um(9,zk.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=xo(),e=Mr.identifierPrefix;if(bn){var n=da,r=fa;n=(r&~(1<<32-Qs(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=lm++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=AW++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},CW={readContext:Ns,useCallback:qk,useContext:Ns,useEffect:Hb,useImperativeHandle:Jk,useInsertionEffect:Xk,useLayoutEffect:Kk,useMemo:Yk,useReducer:XA,useRef:Wk,useState:function(){return XA(cm)},useDebugValue:Gb,useDeferredValue:function(t){var e=Os();return Qk(e,hr.memoizedState,t)},useTransition:function(){var t=XA(cm)[0],e=Os().memoizedState;return[t,e]},useMutableSource:kk,useSyncExternalStore:Uk,useId:Zk,unstable_isNewReconciler:!1},bW={readContext:Ns,useCallback:qk,useContext:Ns,useEffect:Hb,useImperativeHandle:Jk,useInsertionEffect:Xk,useLayoutEffect:Kk,useMemo:Yk,useReducer:KA,useRef:Wk,useState:function(){return KA(cm)},useDebugValue:Gb,useDeferredValue:function(t){var e=Os();return hr===null?e.memoizedState=t:Qk(e,hr.memoizedState,t)},useTransition:function(){var t=KA(cm)[0],e=Os().memoizedState;return[t,e]},useMutableSource:kk,useSyncExternalStore:Uk,useId:Zk,unstable_isNewReconciler:!1};function Sf(t,e){try{var n="",r=e;do n+=nj(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function $A(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function bM(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var RW=typeof WeakMap=="function"?WeakMap:Map;function rU(t,e,n){n=_a(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){x_||(x_=!0,kM=r),bM(t,e)},n}function iU(t,e,n){n=_a(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){bM(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){bM(t,e),typeof r!="function"&&(wl===null?wl=new Set([this]):wl.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function vL(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new RW;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=GW.bind(null,t,e,n),e.then(t,t))}function _L(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function xL(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=_a(-1,1),e.tag=2,Al(n,e,1))),n.lanes|=1),t)}var PW=Da.ReactCurrentOwner,Li=!1;function yi(t,e,n,r){e.child=t===null?Ok(e,null,n,r):_f(e,t.child,n,r)}function SL(t,e,n,r,i){n=n.render;var s=e.ref;return tf(e,i),r=Vb(t,e,n,r,s,i),n=zb(),t!==null&&!Li?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ca(t,e,i)):(bn&&n&&bb(e),e.flags|=1,yi(t,e,r,i),e.child)}function AL(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Yb(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,sU(t,e,s,r,i)):(t=Nv(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:nm,n(o,r)&&t.ref===e.ref)return Ca(t,e,i)}return e.flags|=1,t=Ml(s,r),t.ref=e.ref,t.return=e,e.child=t}function sU(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(nm(s,r)&&t.ref===e.ref)if(Li=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Li=!0);else return e.lanes=t.lanes,Ca(t,e,i)}return RM(t,e,n,r,i)}function oU(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},yn(Uh,Xi),Xi|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,yn(Uh,Xi),Xi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,yn(Uh,Xi),Xi|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,yn(Uh,Xi),Xi|=r;return yi(t,e,i,n),e.child}function aU(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function RM(t,e,n,r,i){var s=Bi(n)?cu:oi.current;return s=yf(e,s),tf(e,i),n=Vb(t,e,n,r,s,i),r=zb(),t!==null&&!Li?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ca(t,e,i)):(bn&&r&&bb(e),e.flags|=1,yi(t,e,n,i),e.child)}function wL(t,e,n,r,i){if(Bi(n)){var s=!0;u_(e)}else s=!1;if(tf(e,i),e.stateNode===null)Lv(t,e),Bk(e,n,r),CM(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Ns(c):(c=Bi(n)?cu:oi.current,c=yf(e,c));var u=n.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&pL(e,o,r,c),rl=!1;var p=e.memoizedState;o.state=p,m_(e,r,o,i),l=e.memoizedState,a!==r||p!==l||Di.current||rl?(typeof u=="function"&&(TM(e,n,u,r),l=e.memoizedState),(a=rl||dL(e,n,a,r,p,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Lk(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Gs(e.type,a),o.props=c,f=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Ns(l):(l=Bi(n)?cu:oi.current,l=yf(e,l));var m=n.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&pL(e,o,r,l),rl=!1,p=e.memoizedState,o.state=p,m_(e,r,o,i);var y=e.memoizedState;a!==f||p!==y||Di.current||rl?(typeof m=="function"&&(TM(e,n,m,r),y=e.memoizedState),(c=rl||dL(e,n,c,r,p,y,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return PM(t,e,n,r,s,i)}function PM(t,e,n,r,i,s){aU(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&lL(e,n,!1),Ca(t,e,s);r=e.stateNode,PW.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=_f(e,t.child,null,s),e.child=_f(e,null,a,s)):yi(t,e,a,s),e.memoizedState=r.state,i&&lL(e,n,!0),e.child}function lU(t){var e=t.stateNode;e.pendingContext?aL(t,e.pendingContext,e.pendingContext!==e.context):e.context&&aL(t,e.context,!1),Ob(t,e.containerInfo)}function EL(t,e,n,r,i){return vf(),Pb(i),e.flags|=256,yi(t,e,n,r),e.child}var IM={dehydrated:null,treeContext:null,retryLane:0};function LM(t){return{baseLanes:t,cachePool:null,transitions:null}}function cU(t,e,n){var r=e.pendingProps,i=Ln.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),yn(Ln,i&1),t===null)return EM(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Vx(o,r,0,null),t=Qc(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=LM(n),e.memoizedState=IM,t):jb(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return IW(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ml(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Ml(a,s):(s=Qc(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?LM(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=IM,r}return s=t.child,t=s.sibling,r=Ml(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function jb(t,e){return e=Vx({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function r0(t,e,n,r){return r!==null&&Pb(r),_f(e,t.child,null,n),t=jb(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function IW(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=$A(Error(Le(422))),r0(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Vx({mode:"visible",children:r.children},i,0,null),s=Qc(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&_f(e,t.child,null,o),e.child.memoizedState=LM(o),e.memoizedState=IM,s);if(!(e.mode&1))return r0(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Le(419)),r=$A(s,r,void 0),r0(t,e,o,r)}if(a=(o&t.childLanes)!==0,Li||a){if(r=Mr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ta(t,i),Zs(r,t,i,-1))}return qb(),r=$A(Error(Le(421))),r0(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=jW.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Ji=Sl(i.nextSibling),Qi=e,bn=!0,Xs=null,t!==null&&(Es[Ms++]=fa,Es[Ms++]=da,Es[Ms++]=uu,fa=t.id,da=t.overflow,uu=e),e=jb(e,r.children),e.flags|=4096,e)}function ML(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),MM(t.return,e,n)}function JA(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function uU(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(yi(t,e,r.children,n),r=Ln.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ML(t,n,e);else if(t.tag===19)ML(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(yn(Ln,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&g_(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),JA(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&g_(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}JA(e,!0,n,null,s);break;case"together":JA(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Lv(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ca(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),fu|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Le(153));if(e.child!==null){for(t=e.child,n=Ml(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ml(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function LW(t,e,n){switch(e.tag){case 3:lU(e),vf();break;case 5:Fk(e);break;case 1:Bi(e.type)&&u_(e);break;case 4:Ob(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;yn(d_,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(yn(Ln,Ln.current&1),e.flags|=128,null):n&e.child.childLanes?cU(t,e,n):(yn(Ln,Ln.current&1),t=Ca(t,e,n),t!==null?t.sibling:null);yn(Ln,Ln.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return uU(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),yn(Ln,Ln.current),r)break;return null;case 22:case 23:return e.lanes=0,oU(t,e,n)}return Ca(t,e,n)}var hU,DM,fU,dU;hU=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};DM=function(){};fU=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Vc(Lo.current);var s=null;switch(n){case"input":i=tM(t,i),r=tM(t,r),s=[];break;case"select":i=On({},i,{value:void 0}),r=On({},r,{value:void 0}),s=[];break;case"textarea":i=iM(t,i),r=iM(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=l_)}oM(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Jp.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Jp.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&_n("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};dU=function(t,e,n,r){n!==r&&(e.flags|=4)};function Od(t,e){if(!bn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Jr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function DW(t,e,n){var r=e.pendingProps;switch(Rb(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jr(e),null;case 1:return Bi(e.type)&&c_(),Jr(e),null;case 3:return r=e.stateNode,xf(),En(Di),En(oi),kb(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(t0(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Xs!==null&&(zM(Xs),Xs=null))),DM(t,e),Jr(e),null;case 5:Fb(e);var i=Vc(am.current);if(n=e.type,t!==null&&e.stateNode!=null)fU(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Le(166));return Jr(e),null}if(t=Vc(Lo.current),t0(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Eo]=e,r[sm]=s,t=(e.mode&1)!==0,n){case"dialog":_n("cancel",r),_n("close",r);break;case"iframe":case"object":case"embed":_n("load",r);break;case"video":case"audio":for(i=0;i<fp.length;i++)_n(fp[i],r);break;case"source":_n("error",r);break;case"img":case"image":case"link":_n("error",r),_n("load",r);break;case"details":_n("toggle",r);break;case"input":B3(r,s),_n("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},_n("invalid",r);break;case"textarea":O3(r,s),_n("invalid",r)}oM(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&e0(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&e0(r.textContent,a,t),i=["children",""+a]):Jp.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&_n("scroll",r)}switch(n){case"input":Xy(r),N3(r,s,!0);break;case"textarea":Xy(r),F3(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=l_)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=V4(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Eo]=e,t[sm]=r,hU(t,e,!1,!1),e.stateNode=t;e:{switch(o=aM(n,r),n){case"dialog":_n("cancel",t),_n("close",t),i=r;break;case"iframe":case"object":case"embed":_n("load",t),i=r;break;case"video":case"audio":for(i=0;i<fp.length;i++)_n(fp[i],t);i=r;break;case"source":_n("error",t),i=r;break;case"img":case"image":case"link":_n("error",t),_n("load",t),i=r;break;case"details":_n("toggle",t),i=r;break;case"input":B3(t,r),i=tM(t,r),_n("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=On({},r,{value:void 0}),_n("invalid",t);break;case"textarea":O3(t,r),i=iM(t,r),_n("invalid",t);break;default:i=r}oM(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?G4(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&z4(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&qp(t,l):typeof l=="number"&&qp(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Jp.hasOwnProperty(s)?l!=null&&s==="onScroll"&&_n("scroll",t):l!=null&&pb(t,s,l,o))}switch(n){case"input":Xy(t),N3(t,r,!1);break;case"textarea":Xy(t),F3(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Nl(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Yh(t,!!r.multiple,s,!1):r.defaultValue!=null&&Yh(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=l_)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Jr(e),null;case 6:if(t&&e.stateNode!=null)dU(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Le(166));if(n=Vc(am.current),Vc(Lo.current),t0(e)){if(r=e.stateNode,n=e.memoizedProps,r[Eo]=e,(s=r.nodeValue!==n)&&(t=Qi,t!==null))switch(t.tag){case 3:e0(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&e0(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Eo]=e,e.stateNode=r}return Jr(e),null;case 13:if(En(Ln),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(bn&&Ji!==null&&e.mode&1&&!(e.flags&128))Pk(),vf(),e.flags|=98560,s=!1;else if(s=t0(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Le(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Le(317));s[Eo]=e}else vf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Jr(e),s=!1}else Xs!==null&&(zM(Xs),Xs=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ln.current&1?pr===0&&(pr=3):qb())),e.updateQueue!==null&&(e.flags|=4),Jr(e),null);case 4:return xf(),DM(t,e),t===null&&rm(e.stateNode.containerInfo),Jr(e),null;case 10:return Db(e.type._context),Jr(e),null;case 17:return Bi(e.type)&&c_(),Jr(e),null;case 19:if(En(Ln),s=e.memoizedState,s===null)return Jr(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Od(s,!1);else{if(pr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=g_(t),o!==null){for(e.flags|=128,Od(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return yn(Ln,Ln.current&1|2),e.child}t=t.sibling}s.tail!==null&&qn()>Af&&(e.flags|=128,r=!0,Od(s,!1),e.lanes=4194304)}else{if(!r)if(t=g_(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Od(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!bn)return Jr(e),null}else 2*qn()-s.renderingStartTime>Af&&n!==1073741824&&(e.flags|=128,r=!0,Od(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=qn(),e.sibling=null,n=Ln.current,yn(Ln,r?n&1|2:n&1),e):(Jr(e),null);case 22:case 23:return Jb(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Xi&1073741824&&(Jr(e),e.subtreeFlags&6&&(e.flags|=8192)):Jr(e),null;case 24:return null;case 25:return null}throw Error(Le(156,e.tag))}function BW(t,e){switch(Rb(e),e.tag){case 1:return Bi(e.type)&&c_(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return xf(),En(Di),En(oi),kb(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Fb(e),null;case 13:if(En(Ln),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Le(340));vf()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return En(Ln),null;case 4:return xf(),null;case 10:return Db(e.type._context),null;case 22:case 23:return Jb(),null;case 24:return null;default:return null}}var i0=!1,ti=!1,NW=typeof WeakSet=="function"?WeakSet:Set,Ze=null;function kh(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Vn(t,e,r)}else n.current=null}function BM(t,e,n){try{n()}catch(r){Vn(t,e,r)}}var TL=!1;function OW(t,e){if(yM=s_,t=yk(),Cb(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,f=t,p=null;t:for(;;){for(var m;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++u===r&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(vM={focusedElem:t,selectionRange:n},s_=!1,Ze=e;Ze!==null;)if(e=Ze,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ze=t;else for(;Ze!==null;){e=Ze;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var S=y.memoizedProps,v=y.memoizedState,g=e.stateNode,_=g.getSnapshotBeforeUpdate(e.elementType===e.type?S:Gs(e.type,S),v);g.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Le(163))}}catch(E){Vn(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,Ze=t;break}Ze=e.return}return y=TL,TL=!1,y}function Cp(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&BM(e,n,s)}i=i.next}while(i!==r)}}function kx(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function NM(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function pU(t){var e=t.alternate;e!==null&&(t.alternate=null,pU(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Eo],delete e[sm],delete e[SM],delete e[vW],delete e[_W])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function mU(t){return t.tag===5||t.tag===3||t.tag===4}function CL(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||mU(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function OM(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=l_));else if(r!==4&&(t=t.child,t!==null))for(OM(t,e,n),t=t.sibling;t!==null;)OM(t,e,n),t=t.sibling}function FM(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(FM(t,e,n),t=t.sibling;t!==null;)FM(t,e,n),t=t.sibling}var Nr=null,Ws=!1;function Ga(t,e,n){for(n=n.child;n!==null;)gU(t,e,n),n=n.sibling}function gU(t,e,n){if(Io&&typeof Io.onCommitFiberUnmount=="function")try{Io.onCommitFiberUnmount(Px,n)}catch{}switch(n.tag){case 5:ti||kh(n,e);case 6:var r=Nr,i=Ws;Nr=null,Ga(t,e,n),Nr=r,Ws=i,Nr!==null&&(Ws?(t=Nr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Nr.removeChild(n.stateNode));break;case 18:Nr!==null&&(Ws?(t=Nr,n=n.stateNode,t.nodeType===8?HA(t.parentNode,n):t.nodeType===1&&HA(t,n),em(t)):HA(Nr,n.stateNode));break;case 4:r=Nr,i=Ws,Nr=n.stateNode.containerInfo,Ws=!0,Ga(t,e,n),Nr=r,Ws=i;break;case 0:case 11:case 14:case 15:if(!ti&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&BM(n,e,o),i=i.next}while(i!==r)}Ga(t,e,n);break;case 1:if(!ti&&(kh(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Vn(n,e,a)}Ga(t,e,n);break;case 21:Ga(t,e,n);break;case 22:n.mode&1?(ti=(r=ti)||n.memoizedState!==null,Ga(t,e,n),ti=r):Ga(t,e,n);break;default:Ga(t,e,n)}}function bL(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new NW),e.forEach(function(r){var i=WW.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Us(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Nr=a.stateNode,Ws=!1;break e;case 3:Nr=a.stateNode.containerInfo,Ws=!0;break e;case 4:Nr=a.stateNode.containerInfo,Ws=!0;break e}a=a.return}if(Nr===null)throw Error(Le(160));gU(s,o,i),Nr=null,Ws=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Vn(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)yU(e,t),e=e.sibling}function yU(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Us(e,t),_o(t),r&4){try{Cp(3,t,t.return),kx(3,t)}catch(S){Vn(t,t.return,S)}try{Cp(5,t,t.return)}catch(S){Vn(t,t.return,S)}}break;case 1:Us(e,t),_o(t),r&512&&n!==null&&kh(n,n.return);break;case 5:if(Us(e,t),_o(t),r&512&&n!==null&&kh(n,n.return),t.flags&32){var i=t.stateNode;try{qp(i,"")}catch(S){Vn(t,t.return,S)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&k4(i,s),aM(a,o);var c=aM(a,s);for(o=0;o<l.length;o+=2){var u=l[o],f=l[o+1];u==="style"?G4(i,f):u==="dangerouslySetInnerHTML"?z4(i,f):u==="children"?qp(i,f):pb(i,u,f,c)}switch(a){case"input":nM(i,s);break;case"textarea":U4(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Yh(i,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?Yh(i,!!s.multiple,s.defaultValue,!0):Yh(i,!!s.multiple,s.multiple?[]:"",!1))}i[sm]=s}catch(S){Vn(t,t.return,S)}}break;case 6:if(Us(e,t),_o(t),r&4){if(t.stateNode===null)throw Error(Le(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(S){Vn(t,t.return,S)}}break;case 3:if(Us(e,t),_o(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{em(e.containerInfo)}catch(S){Vn(t,t.return,S)}break;case 4:Us(e,t),_o(t);break;case 13:Us(e,t),_o(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Kb=qn())),r&4&&bL(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(ti=(c=ti)||u,Us(e,t),ti=c):Us(e,t),_o(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Ze=t,u=t.child;u!==null;){for(f=Ze=u;Ze!==null;){switch(p=Ze,m=p.child,p.tag){case 0:case 11:case 14:case 15:Cp(4,p,p.return);break;case 1:kh(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(S){Vn(r,n,S)}}break;case 5:kh(p,p.return);break;case 22:if(p.memoizedState!==null){PL(f);continue}}m!==null?(m.return=p,Ze=m):PL(f)}u=u.sibling}e:for(u=null,f=t;;){if(f.tag===5){if(u===null){u=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=H4("display",o))}catch(S){Vn(t,t.return,S)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(S){Vn(t,t.return,S)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Us(e,t),_o(t),r&4&&bL(t);break;case 21:break;default:Us(e,t),_o(t)}}function _o(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(mU(n)){var r=n;break e}n=n.return}throw Error(Le(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(qp(i,""),r.flags&=-33);var s=CL(t);FM(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=CL(t);OM(t,a,o);break;default:throw Error(Le(161))}}catch(l){Vn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function FW(t,e,n){Ze=t,vU(t)}function vU(t,e,n){for(var r=(t.mode&1)!==0;Ze!==null;){var i=Ze,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||i0;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||ti;a=i0;var c=ti;if(i0=o,(ti=l)&&!c)for(Ze=i;Ze!==null;)o=Ze,l=o.child,o.tag===22&&o.memoizedState!==null?IL(i):l!==null?(l.return=o,Ze=l):IL(i);for(;s!==null;)Ze=s,vU(s),s=s.sibling;Ze=i,i0=a,ti=c}RL(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Ze=s):RL(t)}}function RL(t){for(;Ze!==null;){var e=Ze;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ti||kx(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ti)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Gs(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&fL(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}fL(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&em(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Le(163))}ti||e.flags&512&&NM(e)}catch(p){Vn(e,e.return,p)}}if(e===t){Ze=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ze=n;break}Ze=e.return}}function PL(t){for(;Ze!==null;){var e=Ze;if(e===t){Ze=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ze=n;break}Ze=e.return}}function IL(t){for(;Ze!==null;){var e=Ze;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{kx(4,e)}catch(l){Vn(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Vn(e,i,l)}}var s=e.return;try{NM(e)}catch(l){Vn(e,s,l)}break;case 5:var o=e.return;try{NM(e)}catch(l){Vn(e,o,l)}}}catch(l){Vn(e,e.return,l)}if(e===t){Ze=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ze=a;break}Ze=e.return}}var kW=Math.ceil,__=Da.ReactCurrentDispatcher,Wb=Da.ReactCurrentOwner,Bs=Da.ReactCurrentBatchConfig,en=0,Mr=null,sr=null,Ur=0,Xi=0,Uh=Jl(0),pr=0,hm=null,fu=0,Ux=0,Xb=0,bp=null,Ii=null,Kb=0,Af=1/0,aa=null,x_=!1,kM=null,wl=null,s0=!1,fl=null,S_=0,Rp=0,UM=null,Dv=-1,Bv=0;function Ai(){return en&6?qn():Dv!==-1?Dv:Dv=qn()}function El(t){return t.mode&1?en&2&&Ur!==0?Ur&-Ur:SW.transition!==null?(Bv===0&&(Bv=tk()),Bv):(t=hn,t!==0||(t=window.event,t=t===void 0?16:lk(t.type)),t):1}function Zs(t,e,n,r){if(50<Rp)throw Rp=0,UM=null,Error(Le(185));sg(t,n,r),(!(en&2)||t!==Mr)&&(t===Mr&&(!(en&2)&&(Ux|=n),pr===4&&ll(t,Ur)),Ni(t,r),n===1&&en===0&&!(e.mode&1)&&(Af=qn()+500,Nx&&ql()))}function Ni(t,e){var n=t.callbackNode;Sj(t,e);var r=i_(t,t===Mr?Ur:0);if(r===0)n!==null&&V3(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&V3(n),e===1)t.tag===0?xW(LL.bind(null,t)):Ck(LL.bind(null,t)),gW(function(){!(en&6)&&ql()}),n=null;else{switch(nk(r)){case 1:n=_b;break;case 4:n=Z4;break;case 16:n=r_;break;case 536870912:n=ek;break;default:n=r_}n=TU(n,_U.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function _U(t,e){if(Dv=-1,Bv=0,en&6)throw Error(Le(327));var n=t.callbackNode;if(nf()&&t.callbackNode!==n)return null;var r=i_(t,t===Mr?Ur:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=A_(t,r);else{e=r;var i=en;en|=2;var s=SU();(Mr!==t||Ur!==e)&&(aa=null,Af=qn()+500,Yc(t,e));do try{zW();break}catch(a){xU(t,a)}while(!0);Lb(),__.current=s,en=i,sr!==null?e=0:(Mr=null,Ur=0,e=pr)}if(e!==0){if(e===2&&(i=fM(t),i!==0&&(r=i,e=VM(t,i))),e===1)throw n=hm,Yc(t,0),ll(t,r),Ni(t,qn()),n;if(e===6)ll(t,r);else{if(i=t.current.alternate,!(r&30)&&!UW(i)&&(e=A_(t,r),e===2&&(s=fM(t),s!==0&&(r=s,e=VM(t,s))),e===1))throw n=hm,Yc(t,0),ll(t,r),Ni(t,qn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Le(345));case 2:Mc(t,Ii,aa);break;case 3:if(ll(t,r),(r&130023424)===r&&(e=Kb+500-qn(),10<e)){if(i_(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ai(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=xM(Mc.bind(null,t,Ii,aa),e);break}Mc(t,Ii,aa);break;case 4:if(ll(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Qs(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=qn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kW(r/1960))-r,10<r){t.timeoutHandle=xM(Mc.bind(null,t,Ii,aa),r);break}Mc(t,Ii,aa);break;case 5:Mc(t,Ii,aa);break;default:throw Error(Le(329))}}}return Ni(t,qn()),t.callbackNode===n?_U.bind(null,t):null}function VM(t,e){var n=bp;return t.current.memoizedState.isDehydrated&&(Yc(t,e).flags|=256),t=A_(t,e),t!==2&&(e=Ii,Ii=n,e!==null&&zM(e)),t}function zM(t){Ii===null?Ii=t:Ii.push.apply(Ii,t)}function UW(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!to(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ll(t,e){for(e&=~Xb,e&=~Ux,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Qs(e),r=1<<n;t[n]=-1,e&=~r}}function LL(t){if(en&6)throw Error(Le(327));nf();var e=i_(t,0);if(!(e&1))return Ni(t,qn()),null;var n=A_(t,e);if(t.tag!==0&&n===2){var r=fM(t);r!==0&&(e=r,n=VM(t,r))}if(n===1)throw n=hm,Yc(t,0),ll(t,e),Ni(t,qn()),n;if(n===6)throw Error(Le(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Mc(t,Ii,aa),Ni(t,qn()),null}function $b(t,e){var n=en;en|=1;try{return t(e)}finally{en=n,en===0&&(Af=qn()+500,Nx&&ql())}}function du(t){fl!==null&&fl.tag===0&&!(en&6)&&nf();var e=en;en|=1;var n=Bs.transition,r=hn;try{if(Bs.transition=null,hn=1,t)return t()}finally{hn=r,Bs.transition=n,en=e,!(en&6)&&ql()}}function Jb(){Xi=Uh.current,En(Uh)}function Yc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,mW(n)),sr!==null)for(n=sr.return;n!==null;){var r=n;switch(Rb(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&c_();break;case 3:xf(),En(Di),En(oi),kb();break;case 5:Fb(r);break;case 4:xf();break;case 13:En(Ln);break;case 19:En(Ln);break;case 10:Db(r.type._context);break;case 22:case 23:Jb()}n=n.return}if(Mr=t,sr=t=Ml(t.current,null),Ur=Xi=e,pr=0,hm=null,Xb=Ux=fu=0,Ii=bp=null,Uc!==null){for(e=0;e<Uc.length;e++)if(n=Uc[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Uc=null}return t}function xU(t,e){do{var n=sr;try{if(Lb(),Pv.current=v_,y_){for(var r=Nn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}y_=!1}if(hu=0,Er=hr=Nn=null,Tp=!1,lm=0,Wb.current=null,n===null||n.return===null){pr=1,hm=e,sr=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Ur,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=_L(o);if(m!==null){m.flags&=-257,xL(m,o,a,s,e),m.mode&1&&vL(s,c,e),e=m,l=c;var y=e.updateQueue;if(y===null){var S=new Set;S.add(l),e.updateQueue=S}else y.add(l);break e}else{if(!(e&1)){vL(s,c,e),qb();break e}l=Error(Le(426))}}else if(bn&&a.mode&1){var v=_L(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),xL(v,o,a,s,e),Pb(Sf(l,a));break e}}s=l=Sf(l,a),pr!==4&&(pr=2),bp===null?bp=[s]:bp.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=rU(s,l,e);hL(s,g);break e;case 1:a=l;var _=s.type,A=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(wl===null||!wl.has(A)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=iU(s,a,e);hL(s,E);break e}}s=s.return}while(s!==null)}wU(n)}catch(b){e=b,sr===n&&n!==null&&(sr=n=n.return);continue}break}while(!0)}function SU(){var t=__.current;return __.current=v_,t===null?v_:t}function qb(){(pr===0||pr===3||pr===2)&&(pr=4),Mr===null||!(fu&268435455)&&!(Ux&268435455)||ll(Mr,Ur)}function A_(t,e){var n=en;en|=2;var r=SU();(Mr!==t||Ur!==e)&&(aa=null,Yc(t,e));do try{VW();break}catch(i){xU(t,i)}while(!0);if(Lb(),en=n,__.current=r,sr!==null)throw Error(Le(261));return Mr=null,Ur=0,pr}function VW(){for(;sr!==null;)AU(sr)}function zW(){for(;sr!==null&&!fj();)AU(sr)}function AU(t){var e=MU(t.alternate,t,Xi);t.memoizedProps=t.pendingProps,e===null?wU(t):sr=e,Wb.current=null}function wU(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=BW(n,e),n!==null){n.flags&=32767,sr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{pr=6,sr=null;return}}else if(n=DW(n,e,Xi),n!==null){sr=n;return}if(e=e.sibling,e!==null){sr=e;return}sr=e=t}while(e!==null);pr===0&&(pr=5)}function Mc(t,e,n){var r=hn,i=Bs.transition;try{Bs.transition=null,hn=1,HW(t,e,n,r)}finally{Bs.transition=i,hn=r}return null}function HW(t,e,n,r){do nf();while(fl!==null);if(en&6)throw Error(Le(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Le(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Aj(t,s),t===Mr&&(sr=Mr=null,Ur=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||s0||(s0=!0,TU(r_,function(){return nf(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Bs.transition,Bs.transition=null;var o=hn;hn=1;var a=en;en|=4,Wb.current=null,OW(t,n),yU(n,t),lW(vM),s_=!!yM,vM=yM=null,t.current=n,FW(n),dj(),en=a,hn=o,Bs.transition=s}else t.current=n;if(s0&&(s0=!1,fl=t,S_=i),s=t.pendingLanes,s===0&&(wl=null),gj(n.stateNode),Ni(t,qn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(x_)throw x_=!1,t=kM,kM=null,t;return S_&1&&t.tag!==0&&nf(),s=t.pendingLanes,s&1?t===UM?Rp++:(Rp=0,UM=t):Rp=0,ql(),null}function nf(){if(fl!==null){var t=nk(S_),e=Bs.transition,n=hn;try{if(Bs.transition=null,hn=16>t?16:t,fl===null)var r=!1;else{if(t=fl,fl=null,S_=0,en&6)throw Error(Le(331));var i=en;for(en|=4,Ze=t.current;Ze!==null;){var s=Ze,o=s.child;if(Ze.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Ze=c;Ze!==null;){var u=Ze;switch(u.tag){case 0:case 11:case 15:Cp(8,u,s)}var f=u.child;if(f!==null)f.return=u,Ze=f;else for(;Ze!==null;){u=Ze;var p=u.sibling,m=u.return;if(pU(u),u===c){Ze=null;break}if(p!==null){p.return=m,Ze=p;break}Ze=m}}}var y=s.alternate;if(y!==null){var S=y.child;if(S!==null){y.child=null;do{var v=S.sibling;S.sibling=null,S=v}while(S!==null)}}Ze=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ze=o;else e:for(;Ze!==null;){if(s=Ze,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Cp(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,Ze=g;break e}Ze=s.return}}var _=t.current;for(Ze=_;Ze!==null;){o=Ze;var A=o.child;if(o.subtreeFlags&2064&&A!==null)A.return=o,Ze=A;else e:for(o=_;Ze!==null;){if(a=Ze,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:kx(9,a)}}catch(b){Vn(a,a.return,b)}if(a===o){Ze=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,Ze=E;break e}Ze=a.return}}if(en=i,ql(),Io&&typeof Io.onPostCommitFiberRoot=="function")try{Io.onPostCommitFiberRoot(Px,t)}catch{}r=!0}return r}finally{hn=n,Bs.transition=e}}return!1}function DL(t,e,n){e=Sf(n,e),e=rU(t,e,1),t=Al(t,e,1),e=Ai(),t!==null&&(sg(t,1,e),Ni(t,e))}function Vn(t,e,n){if(t.tag===3)DL(t,t,n);else for(;e!==null;){if(e.tag===3){DL(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(wl===null||!wl.has(r))){t=Sf(n,t),t=iU(e,t,1),e=Al(e,t,1),t=Ai(),e!==null&&(sg(e,1,t),Ni(e,t));break}}e=e.return}}function GW(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ai(),t.pingedLanes|=t.suspendedLanes&n,Mr===t&&(Ur&n)===n&&(pr===4||pr===3&&(Ur&130023424)===Ur&&500>qn()-Kb?Yc(t,0):Xb|=n),Ni(t,e)}function EU(t,e){e===0&&(t.mode&1?(e=Jy,Jy<<=1,!(Jy&130023424)&&(Jy=4194304)):e=1);var n=Ai();t=Ta(t,e),t!==null&&(sg(t,e,n),Ni(t,n))}function jW(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),EU(t,n)}function WW(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Le(314))}r!==null&&r.delete(e),EU(t,n)}var MU;MU=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Di.current)Li=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Li=!1,LW(t,e,n);Li=!!(t.flags&131072)}else Li=!1,bn&&e.flags&1048576&&bk(e,f_,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Lv(t,e),t=e.pendingProps;var i=yf(e,oi.current);tf(e,n),i=Vb(null,e,r,t,i,n);var s=zb();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Bi(r)?(s=!0,u_(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Nb(e),i.updater=Ox,e.stateNode=i,i._reactInternals=e,CM(e,r,t,n),e=PM(null,e,r,!0,s,n)):(e.tag=0,bn&&s&&bb(e),yi(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Lv(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=KW(r),t=Gs(r,t),i){case 0:e=RM(null,e,r,t,n);break e;case 1:e=wL(null,e,r,t,n);break e;case 11:e=SL(null,e,r,t,n);break e;case 14:e=AL(null,e,r,Gs(r.type,t),n);break e}throw Error(Le(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gs(r,i),RM(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gs(r,i),wL(t,e,r,i,n);case 3:e:{if(lU(e),t===null)throw Error(Le(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Lk(t,e),m_(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Sf(Error(Le(423)),e),e=EL(t,e,r,n,i);break e}else if(r!==i){i=Sf(Error(Le(424)),e),e=EL(t,e,r,n,i);break e}else for(Ji=Sl(e.stateNode.containerInfo.firstChild),Qi=e,bn=!0,Xs=null,n=Ok(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(vf(),r===i){e=Ca(t,e,n);break e}yi(t,e,r,n)}e=e.child}return e;case 5:return Fk(e),t===null&&EM(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,_M(r,i)?o=null:s!==null&&_M(r,s)&&(e.flags|=32),aU(t,e),yi(t,e,o,n),e.child;case 6:return t===null&&EM(e),null;case 13:return cU(t,e,n);case 4:return Ob(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=_f(e,null,r,n):yi(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gs(r,i),SL(t,e,r,i,n);case 7:return yi(t,e,e.pendingProps,n),e.child;case 8:return yi(t,e,e.pendingProps.children,n),e.child;case 12:return yi(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,yn(d_,r._currentValue),r._currentValue=o,s!==null)if(to(s.value,o)){if(s.children===i.children&&!Di.current){e=Ca(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=_a(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),MM(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Le(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),MM(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}yi(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,tf(e,n),i=Ns(i),r=r(i),e.flags|=1,yi(t,e,r,n),e.child;case 14:return r=e.type,i=Gs(r,e.pendingProps),i=Gs(r.type,i),AL(t,e,r,i,n);case 15:return sU(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gs(r,i),Lv(t,e),e.tag=1,Bi(r)?(t=!0,u_(e)):t=!1,tf(e,n),Bk(e,r,i),CM(e,r,i,n),PM(null,e,r,!0,t,n);case 19:return uU(t,e,n);case 22:return oU(t,e,n)}throw Error(Le(156,e.tag))};function TU(t,e){return Q4(t,e)}function XW(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ps(t,e,n,r){return new XW(t,e,n,r)}function Yb(t){return t=t.prototype,!(!t||!t.isReactComponent)}function KW(t){if(typeof t=="function")return Yb(t)?1:0;if(t!=null){if(t=t.$$typeof,t===gb)return 11;if(t===yb)return 14}return 2}function Ml(t,e){var n=t.alternate;return n===null?(n=Ps(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Nv(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Yb(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Rh:return Qc(n.children,i,s,e);case mb:o=8,i|=8;break;case YE:return t=Ps(12,n,e,i|2),t.elementType=YE,t.lanes=s,t;case QE:return t=Ps(13,n,e,i),t.elementType=QE,t.lanes=s,t;case ZE:return t=Ps(19,n,e,i),t.elementType=ZE,t.lanes=s,t;case N4:return Vx(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case D4:o=10;break e;case B4:o=9;break e;case gb:o=11;break e;case yb:o=14;break e;case nl:o=16,r=null;break e}throw Error(Le(130,t==null?t:typeof t,""))}return e=Ps(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Qc(t,e,n,r){return t=Ps(7,t,r,e),t.lanes=n,t}function Vx(t,e,n,r){return t=Ps(22,t,r,e),t.elementType=N4,t.lanes=n,t.stateNode={isHidden:!1},t}function qA(t,e,n){return t=Ps(6,t,null,e),t.lanes=n,t}function YA(t,e,n){return e=Ps(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $W(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=IA(0),this.expirationTimes=IA(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=IA(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Qb(t,e,n,r,i,s,o,a,l){return t=new $W(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ps(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nb(s),t}function JW(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bh,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function CU(t){if(!t)return Ol;t=t._reactInternals;e:{if(Eu(t)!==t||t.tag!==1)throw Error(Le(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Bi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Le(171))}if(t.tag===1){var n=t.type;if(Bi(n))return Tk(t,n,e)}return e}function bU(t,e,n,r,i,s,o,a,l){return t=Qb(n,r,!0,t,i,s,o,a,l),t.context=CU(null),n=t.current,r=Ai(),i=El(n),s=_a(r,i),s.callback=e??null,Al(n,s,i),t.current.lanes=i,sg(t,i,r),Ni(t,r),t}function zx(t,e,n,r){var i=e.current,s=Ai(),o=El(i);return n=CU(n),e.context===null?e.context=n:e.pendingContext=n,e=_a(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Al(i,e,o),t!==null&&(Zs(t,i,o,s),Rv(t,i,o)),o}function w_(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function BL(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Zb(t,e){BL(t,e),(t=t.alternate)&&BL(t,e)}function qW(){return null}var RU=typeof reportError=="function"?reportError:function(t){console.error(t)};function e2(t){this._internalRoot=t}Hx.prototype.render=e2.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Le(409));zx(t,e,null,null)};Hx.prototype.unmount=e2.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;du(function(){zx(null,t,null,null)}),e[Ma]=null}};function Hx(t){this._internalRoot=t}Hx.prototype.unstable_scheduleHydration=function(t){if(t){var e=sk();t={blockedOn:null,target:t,priority:e};for(var n=0;n<al.length&&e!==0&&e<al[n].priority;n++);al.splice(n,0,t),n===0&&ak(t)}};function t2(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Gx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function NL(){}function YW(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=w_(o);s.call(c)}}var o=bU(e,r,t,0,null,!1,!1,"",NL);return t._reactRootContainer=o,t[Ma]=o.current,rm(t.nodeType===8?t.parentNode:t),du(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=w_(l);a.call(c)}}var l=Qb(t,0,!1,null,null,!1,!1,"",NL);return t._reactRootContainer=l,t[Ma]=l.current,rm(t.nodeType===8?t.parentNode:t),du(function(){zx(e,l,n,r)}),l}function jx(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=w_(o);a.call(l)}}zx(e,o,t,i)}else o=YW(n,e,t,i,r);return w_(o)}rk=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=hp(e.pendingLanes);n!==0&&(xb(e,n|1),Ni(e,qn()),!(en&6)&&(Af=qn()+500,ql()))}break;case 13:du(function(){var r=Ta(t,1);if(r!==null){var i=Ai();Zs(r,t,1,i)}}),Zb(t,1)}};Sb=function(t){if(t.tag===13){var e=Ta(t,134217728);if(e!==null){var n=Ai();Zs(e,t,134217728,n)}Zb(t,134217728)}};ik=function(t){if(t.tag===13){var e=El(t),n=Ta(t,e);if(n!==null){var r=Ai();Zs(n,t,e,r)}Zb(t,e)}};sk=function(){return hn};ok=function(t,e){var n=hn;try{return hn=t,e()}finally{hn=n}};cM=function(t,e,n){switch(e){case"input":if(nM(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Bx(r);if(!i)throw Error(Le(90));F4(r),nM(r,i)}}}break;case"textarea":U4(t,n);break;case"select":e=n.value,e!=null&&Yh(t,!!n.multiple,e,!1)}};X4=$b;K4=du;var QW={usingClientEntryPoint:!1,Events:[ag,Dh,Bx,j4,W4,$b]},Fd={findFiberByHostInstance:kc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ZW={bundleType:Fd.bundleType,version:Fd.version,rendererPackageName:Fd.rendererPackageName,rendererConfig:Fd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Da.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=q4(t),t===null?null:t.stateNode},findFiberByHostInstance:Fd.findFiberByHostInstance||qW,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var o0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!o0.isDisabled&&o0.supportsFiber)try{Px=o0.inject(ZW),Io=o0}catch{}}os.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QW;os.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t2(e))throw Error(Le(200));return JW(t,e,null,n)};os.createRoot=function(t,e){if(!t2(t))throw Error(Le(299));var n=!1,r="",i=RU;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Qb(t,1,!1,null,null,n,!1,r,i),t[Ma]=e.current,rm(t.nodeType===8?t.parentNode:t),new e2(e)};os.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Le(188)):(t=Object.keys(t).join(","),Error(Le(268,t)));return t=q4(e),t=t===null?null:t.stateNode,t};os.flushSync=function(t){return du(t)};os.hydrate=function(t,e,n){if(!Gx(e))throw Error(Le(200));return jx(null,t,e,!0,n)};os.hydrateRoot=function(t,e,n){if(!t2(t))throw Error(Le(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=RU;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=bU(e,null,t,1,n??null,i,!1,s,o),t[Ma]=e.current,rm(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Hx(e)};os.render=function(t,e,n){if(!Gx(e))throw Error(Le(200));return jx(null,t,e,!1,n)};os.unmountComponentAtNode=function(t){if(!Gx(t))throw Error(Le(40));return t._reactRootContainer?(du(function(){jx(null,null,t,!1,function(){t._reactRootContainer=null,t[Ma]=null})}),!0):!1};os.unstable_batchedUpdates=$b;os.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Gx(n))throw Error(Le(200));if(t==null||t._reactInternals===void 0)throw Error(Le(38));return jx(t,e,n,!1,r)};os.version="18.2.0-next-9e3b772b8-20220608";function PU(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(PU)}catch(t){console.error(t)}}PU(),b4.exports=os;var eX=b4.exports,IU,OL=eX;IU=JE.createRoot=OL.createRoot,JE.hydrateRoot=OL.hydrateRoot;/**
 * @remix-run/router v1.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fm(){return fm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fm.apply(this,arguments)}var dl;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(dl||(dl={}));const FL="popstate";function tX(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return HM("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:E_(i)}return rX(e,n,null,t)}function or(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function n2(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function nX(){return Math.random().toString(36).substr(2,8)}function kL(t,e){return{usr:t.state,key:t.key,idx:e}}function HM(t,e,n,r){return n===void 0&&(n=null),fm({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?qf(e):e,{state:n,key:e&&e.key||r||nX()})}function E_(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function qf(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function rX(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=dl.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(fm({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function f(){a=dl.Pop;let v=u(),g=v==null?null:v-c;c=v,l&&l({action:a,location:S.location,delta:g})}function p(v,g){a=dl.Push;let _=HM(S.location,v,g);n&&n(_,v),c=u()+1;let A=kL(_,c),E=S.createHref(_);try{o.pushState(A,"",E)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;i.location.assign(E)}s&&l&&l({action:a,location:S.location,delta:1})}function m(v,g){a=dl.Replace;let _=HM(S.location,v,g);n&&n(_,v),c=u();let A=kL(_,c),E=S.createHref(_);o.replaceState(A,"",E),s&&l&&l({action:a,location:S.location,delta:0})}function y(v){let g=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof v=="string"?v:E_(v);return or(g,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,g)}let S={get action(){return a},get location(){return t(i,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(FL,f),l=v,()=>{i.removeEventListener(FL,f),l=null}},createHref(v){return e(i,v)},createURL:y,encodeLocation(v){let g=y(v);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:p,replace:m,go(v){return o.go(v)}};return S}var UL;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(UL||(UL={}));function iX(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?qf(e):e,i=r2(r.pathname||"/",n);if(i==null)return null;let s=LU(t);sX(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=pX(s[a],yX(i));return o}function LU(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(or(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Tl([r,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(or(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),LU(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:fX(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of DU(s.path))i(s,o,l)}),e}function DU(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=DU(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function sX(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:dX(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const oX=/^:[\w-]+$/,aX=3,lX=2,cX=1,uX=10,hX=-2,VL=t=>t==="*";function fX(t,e){let n=t.split("/"),r=n.length;return n.some(VL)&&(r+=hX),e&&(r+=lX),n.filter(i=>!VL(i)).reduce((i,s)=>i+(oX.test(s)?aX:s===""?cX:uX),r)}function dX(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function pX(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=i==="/"?e:e.slice(i.length)||"/",u=mX({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!u)return null;Object.assign(r,u.params);let f=a.route;s.push({params:r,pathname:Tl([i,u.pathname]),pathnameBase:AX(Tl([i,u.pathnameBase])),route:f}),u.pathnameBase!=="/"&&(i=Tl([i,u.pathnameBase]))}return s}function mX(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=gX(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,f)=>{let{paramName:p,isOptional:m}=u;if(p==="*"){let S=a[f]||"";o=s.slice(0,s.length-S.length).replace(/(.)\/+$/,"$1")}const y=a[f];return m&&!y?c[p]=void 0:c[p]=vX(y||"",p),c},{}),pathname:s,pathnameBase:o,pattern:t}}function gX(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),n2(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function yX(t){try{return decodeURI(t)}catch(e){return n2(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function vX(t,e){try{return decodeURIComponent(t)}catch(n){return n2(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function r2(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function _X(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?qf(t):t;return{pathname:n?n.startsWith("/")?n:xX(n,e):e,search:wX(r),hash:EX(i)}}function xX(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function QA(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function SX(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function BU(t,e){let n=SX(t);return e?n.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function NU(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=qf(t):(i=fm({},t),or(!i.pathname||!i.pathname.includes("?"),QA("?","pathname","search",i)),or(!i.pathname||!i.pathname.includes("#"),QA("#","pathname","hash",i)),or(!i.search||!i.search.includes("#"),QA("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;i.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=_X(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Tl=t=>t.join("/").replace(/\/\/+/g,"/"),AX=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),wX=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,EX=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function MX(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const OU=["post","put","patch","delete"];new Set(OU);const TX=["get",...OU];new Set(TX);/**
 * React Router v6.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dm(){return dm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dm.apply(this,arguments)}const i2=$.createContext(null),CX=$.createContext(null),Mu=$.createContext(null),Wx=$.createContext(null),Tu=$.createContext({outlet:null,matches:[],isDataRoute:!1}),FU=$.createContext(null);function bX(t,e){let{relative:n}=e===void 0?{}:e;cg()||or(!1);let{basename:r,navigator:i}=$.useContext(Mu),{hash:s,pathname:o,search:a}=UU(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Tl([r,o])),i.createHref({pathname:l,search:a,hash:s})}function cg(){return $.useContext(Wx)!=null}function ug(){return cg()||or(!1),$.useContext(Wx).location}function kU(t){$.useContext(Mu).static||$.useLayoutEffect(t)}function RX(){let{isDataRoute:t}=$.useContext(Tu);return t?HX():PX()}function PX(){cg()||or(!1);let t=$.useContext(i2),{basename:e,future:n,navigator:r}=$.useContext(Mu),{matches:i}=$.useContext(Tu),{pathname:s}=ug(),o=JSON.stringify(BU(i,n.v7_relativeSplatPath)),a=$.useRef(!1);return kU(()=>{a.current=!0}),$.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let f=NU(c,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Tl([e,f.pathname])),(u.replace?r.replace:r.push)(f,u.state,u)},[e,r,o,s,t])}function UU(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=$.useContext(Mu),{matches:i}=$.useContext(Tu),{pathname:s}=ug(),o=JSON.stringify(BU(i,r.v7_relativeSplatPath));return $.useMemo(()=>NU(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function IX(t,e){return LX(t,e)}function LX(t,e,n,r){cg()||or(!1);let{navigator:i}=$.useContext(Mu),{matches:s}=$.useContext(Tu),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=ug(),u;if(e){var f;let v=typeof e=="string"?qf(e):e;l==="/"||(f=v.pathname)!=null&&f.startsWith(l)||or(!1),u=v}else u=c;let p=u.pathname||"/",m=l==="/"?p:p.slice(l.length)||"/",y=iX(t,{pathname:m}),S=FX(y&&y.map(v=>Object.assign({},v,{params:Object.assign({},a,v.params),pathname:Tl([l,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:Tl([l,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),s,n,r);return e&&S?$.createElement(Wx.Provider,{value:{location:dm({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:dl.Pop}},S):S}function DX(){let t=zX(),e=MX(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return $.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},e),n?$.createElement("pre",{style:i},n):null,null)}const BX=$.createElement(DX,null);class NX extends $.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?$.createElement(Tu.Provider,{value:this.props.routeContext},$.createElement(FU.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function OX(t){let{routeContext:e,match:n,children:r}=t,i=$.useContext(i2);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),$.createElement(Tu.Provider,{value:e},r)}function FX(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id]));u>=0||or(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let f=o[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=u),f.route.id){let{loaderData:p,errors:m}=n,y=f.route.loader&&p[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||y){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,f,p)=>{let m,y=!1,S=null,v=null;n&&(m=a&&f.route.id?a[f.route.id]:void 0,S=f.route.errorElement||BX,l&&(c<0&&p===0?(GX("route-fallback",!1),y=!0,v=null):c===p&&(y=!0,v=f.route.hydrateFallbackElement||null)));let g=e.concat(o.slice(0,p+1)),_=()=>{let A;return m?A=S:y?A=v:f.route.Component?A=$.createElement(f.route.Component,null):f.route.element?A=f.route.element:A=u,$.createElement(OX,{match:f,routeContext:{outlet:u,matches:g,isDataRoute:n!=null},children:A})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?$.createElement(NX,{location:n.location,revalidation:n.revalidation,component:S,error:m,children:_(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):_()},null)}var VU=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(VU||{}),M_=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(M_||{});function kX(t){let e=$.useContext(i2);return e||or(!1),e}function UX(t){let e=$.useContext(CX);return e||or(!1),e}function VX(t){let e=$.useContext(Tu);return e||or(!1),e}function zU(t){let e=VX(),n=e.matches[e.matches.length-1];return n.route.id||or(!1),n.route.id}function zX(){var t;let e=$.useContext(FU),n=UX(M_.UseRouteError),r=zU(M_.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function HX(){let{router:t}=kX(VU.UseNavigateStable),e=zU(M_.UseNavigateStable),n=$.useRef(!1);return kU(()=>{n.current=!0}),$.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,dm({fromRouteId:e},s)))},[t,e])}const zL={};function GX(t,e,n){!e&&!zL[t]&&(zL[t]=!0)}function Ov(t){or(!1)}function jX(t){let{basename:e="/",children:n=null,location:r,navigationType:i=dl.Pop,navigator:s,static:o=!1,future:a}=t;cg()&&or(!1);let l=e.replace(/^\/*/,"/"),c=$.useMemo(()=>({basename:l,navigator:s,static:o,future:dm({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=qf(r));let{pathname:u="/",search:f="",hash:p="",state:m=null,key:y="default"}=r,S=$.useMemo(()=>{let v=r2(u,l);return v==null?null:{location:{pathname:v,search:f,hash:p,state:m,key:y},navigationType:i}},[l,u,f,p,m,y,i]);return S==null?null:$.createElement(Mu.Provider,{value:c},$.createElement(Wx.Provider,{children:n,value:S}))}function WX(t){let{children:e,location:n}=t;return IX(GM(e),n)}new Promise(()=>{});function GM(t,e){e===void 0&&(e=[]);let n=[];return $.Children.forEach(t,(r,i)=>{if(!$.isValidElement(r))return;let s=[...e,i];if(r.type===$.Fragment){n.push.apply(n,GM(r.props.children,s));return}r.type!==Ov&&or(!1),!r.props.index||!r.props.children||or(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=GM(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jM(){return jM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jM.apply(this,arguments)}function XX(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function KX(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function $X(t,e){return t.button===0&&(!e||e==="_self")&&!KX(t)}const JX=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],qX="6";try{window.__reactRouterVersion=qX}catch{}const YX="startTransition",HL=$E[YX];function QX(t){let{basename:e,children:n,future:r,window:i}=t,s=$.useRef();s.current==null&&(s.current=tX({window:i,v5Compat:!0}));let o=s.current,[a,l]=$.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=$.useCallback(f=>{c&&HL?HL(()=>l(f)):l(f)},[l,c]);return $.useLayoutEffect(()=>o.listen(u),[o,u]),$.createElement(jX,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const ZX=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",eK=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zo=$.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,unstable_viewTransition:f}=e,p=XX(e,JX),{basename:m}=$.useContext(Mu),y,S=!1;if(typeof c=="string"&&eK.test(c)&&(y=c,ZX))try{let A=new URL(window.location.href),E=c.startsWith("//")?new URL(A.protocol+c):new URL(c),b=r2(E.pathname,m);E.origin===A.origin&&b!=null?c=b+E.search+E.hash:S=!0}catch{}let v=bX(c,{relative:i}),g=tK(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:i,unstable_viewTransition:f});function _(A){r&&r(A),A.defaultPrevented||g(A)}return $.createElement("a",jM({},p,{href:y||v,onClick:S||s?r:_,ref:n,target:l}))});var GL;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(GL||(GL={}));var jL;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(jL||(jL={}));function tK(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=RX(),c=ug(),u=UU(t,{relative:o});return $.useCallback(f=>{if($X(f,n)){f.preventDefault();let p=r!==void 0?r:E_(c)===E_(u);l(t,{replace:p,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[c,l,u,r,i,n,t,s,o,a])}var HU={exports:{}},GU={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hg=$;function nK(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var rK=typeof Object.is=="function"?Object.is:nK,iK=hg.useSyncExternalStore,sK=hg.useRef,oK=hg.useEffect,aK=hg.useMemo,lK=hg.useDebugValue;GU.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=sK(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=aK(function(){function l(m){if(!c){if(c=!0,u=m,m=r(m),i!==void 0&&o.hasValue){var y=o.value;if(i(y,m))return f=y}return f=m}if(y=f,rK(u,m))return y;var S=r(m);return i!==void 0&&i(y,S)?y:(u=m,f=S)}var c=!1,u,f,p=n===void 0?null:n;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,n,r,i]);var a=iK(t,s[0],s[1]);return oK(function(){o.hasValue=!0,o.value=a},[a]),lK(a),a};HU.exports=GU;var cK=HU.exports,qi="default"in $E?Ys:$E,WL=Symbol.for("react-redux-context"),XL=typeof globalThis<"u"?globalThis:{};function uK(){if(!qi.createContext)return{};const t=XL[WL]??(XL[WL]=new Map);let e=t.get(qi.createContext);return e||(e=qi.createContext(null),t.set(qi.createContext,e)),e}var Fl=uK(),hK=()=>{throw new Error("uSES not initialized!")};function s2(t=Fl){return function(){return qi.useContext(t)}}var jU=s2(),WU=hK,fK=t=>{WU=t},dK=(t,e)=>t===e;function pK(t=Fl){const e=t===Fl?jU:s2(t),n=(r,i={})=>{const{equalityFn:s=dK,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:l,getServerState:c,stabilityCheck:u,identityFunctionCheck:f}=e();qi.useRef(!0);const p=qi.useCallback({[r.name](y){return r(y)}}[r.name],[r,u,o.stabilityCheck]),m=WU(l.addNestedSub,a.getState,c||a.getState,p,s);return qi.useDebugValue(m),m};return Object.assign(n,{withTypes:()=>n}),n}var mK=pK();function gK(t){t()}function yK(){let t=null,e=null;return{clear(){t=null,e=null},notify(){gK(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var KL={notify(){},get:()=>[]};function vK(t,e){let n,r=KL,i=0,s=!1;function o(S){u();const v=r.subscribe(S);let g=!1;return()=>{g||(g=!0,v(),f())}}function a(){r.notify()}function l(){y.onStateChange&&y.onStateChange()}function c(){return s}function u(){i++,n||(n=e?e.addNestedSub(l):t.subscribe(l),r=yK())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=KL)}function p(){s||(s=!0,u())}function m(){s&&(s=!1,f())}const y={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:c,trySubscribe:p,tryUnsubscribe:m,getListeners:()=>r};return y}var _K=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",xK=_K?qi.useLayoutEffect:qi.useEffect;function SK({store:t,context:e,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=qi.useMemo(()=>{const c=vK(t);return{store:t,subscription:c,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}},[t,r,i,s]),a=qi.useMemo(()=>t.getState(),[t]);xK(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==t.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,a]);const l=e||Fl;return qi.createElement(l.Provider,{value:o},n)}var AK=SK;function XU(t=Fl){const e=t===Fl?jU:s2(t),n=()=>{const{store:r}=e();return r};return Object.assign(n,{withTypes:()=>n}),n}var wK=XU();function EK(t=Fl){const e=t===Fl?wK:XU(t),n=()=>e().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var MK=EK();fK(cK.useSyncExternalStoreWithSelector);function Br(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var TK=typeof Symbol=="function"&&Symbol.observable||"@@observable",$L=TK,ZA=()=>Math.random().toString(36).substring(7).split("").join("."),CK={INIT:`@@redux/INIT${ZA()}`,REPLACE:`@@redux/REPLACE${ZA()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${ZA()}`},T_=CK;function o2(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function KU(t,e,n){if(typeof t!="function")throw new Error(Br(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Br(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Br(1));return n(KU)(t,e)}let r=t,i=e,s=new Map,o=s,a=0,l=!1;function c(){o===s&&(o=new Map,s.forEach((v,g)=>{o.set(g,v)}))}function u(){if(l)throw new Error(Br(3));return i}function f(v){if(typeof v!="function")throw new Error(Br(4));if(l)throw new Error(Br(5));let g=!0;c();const _=a++;return o.set(_,v),function(){if(g){if(l)throw new Error(Br(6));g=!1,c(),o.delete(_),s=null}}}function p(v){if(!o2(v))throw new Error(Br(7));if(typeof v.type>"u")throw new Error(Br(8));if(typeof v.type!="string")throw new Error(Br(17));if(l)throw new Error(Br(9));try{l=!0,i=r(i,v)}finally{l=!1}return(s=o).forEach(_=>{_()}),v}function m(v){if(typeof v!="function")throw new Error(Br(10));r=v,p({type:T_.REPLACE})}function y(){const v=f;return{subscribe(g){if(typeof g!="object"||g===null)throw new Error(Br(11));function _(){const E=g;E.next&&E.next(u())}return _(),{unsubscribe:v(_)}},[$L](){return this}}}return p({type:T_.INIT}),{dispatch:p,subscribe:f,getState:u,replaceReducer:m,[$L]:y}}function bK(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:T_.INIT})>"u")throw new Error(Br(12));if(typeof n(void 0,{type:T_.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Br(13))})}function RK(t){const e=Object.keys(t),n={};for(let s=0;s<e.length;s++){const o=e[s];typeof t[o]=="function"&&(n[o]=t[o])}const r=Object.keys(n);let i;try{bK(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let l=!1;const c={};for(let u=0;u<r.length;u++){const f=r[u],p=n[f],m=o[f],y=p(m,a);if(typeof y>"u")throw a&&a.type,new Error(Br(14));c[f]=y,l=l||y!==m}return l=l||r.length!==Object.keys(o).length,l?c:o}}function C_(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function PK(...t){return e=>(n,r)=>{const i=e(n,r);let s=()=>{throw new Error(Br(15))};const o={getState:i.getState,dispatch:(l,...c)=>s(l,...c)},a=t.map(l=>l(o));return s=C_(...a)(i.dispatch),{...i,dispatch:s}}}function IK(t){return o2(t)&&"type"in t&&typeof t.type=="string"}var $U=Symbol.for("immer-nothing"),JL=Symbol.for("immer-draftable"),ts=Symbol.for("immer-state");function Js(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var wf=Object.getPrototypeOf;function kl(t){return!!t&&!!t[ts]}function ba(t){var e;return t?JU(t)||Array.isArray(t)||!!t[JL]||!!((e=t.constructor)!=null&&e[JL])||Kx(t)||$x(t):!1}var LK=Object.prototype.constructor.toString();function JU(t){if(!t||typeof t!="object")return!1;const e=wf(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===LK}function pm(t,e){Xx(t)===0?Object.entries(t).forEach(([n,r])=>{e(n,r,t)}):t.forEach((n,r)=>e(r,n,t))}function Xx(t){const e=t[ts];return e?e.type_:Array.isArray(t)?1:Kx(t)?2:$x(t)?3:0}function WM(t,e){return Xx(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function qU(t,e,n){const r=Xx(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function DK(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Kx(t){return t instanceof Map}function $x(t){return t instanceof Set}function Tc(t){return t.copy_||t.base_}function XM(t,e){if(Kx(t))return new Map(t);if($x(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);if(!e&&JU(t))return wf(t)?{...t}:Object.assign(Object.create(null),t);const n=Object.getOwnPropertyDescriptors(t);delete n[ts];let r=Reflect.ownKeys(n);for(let i=0;i<r.length;i++){const s=r[i],o=n[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[s]})}return Object.create(wf(t),n)}function a2(t,e=!1){return Jx(t)||kl(t)||!ba(t)||(Xx(t)>1&&(t.set=t.add=t.clear=t.delete=BK),Object.freeze(t),e&&pm(t,(n,r)=>a2(r,!0))),t}function BK(){Js(2)}function Jx(t){return Object.isFrozen(t)}var NK={};function pu(t){const e=NK[t];return e||Js(0,t),e}var mm;function YU(){return mm}function OK(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function qL(t,e){e&&(pu("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function KM(t){$M(t),t.drafts_.forEach(FK),t.drafts_=null}function $M(t){t===mm&&(mm=t.parent_)}function YL(t){return mm=OK(mm,t)}function FK(t){const e=t[ts];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function QL(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[ts].modified_&&(KM(e),Js(4)),ba(t)&&(t=b_(e,t),e.parent_||R_(e,t)),e.patches_&&pu("Patches").generateReplacementPatches_(n[ts].base_,t,e.patches_,e.inversePatches_)):t=b_(e,n,[]),KM(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==$U?t:void 0}function b_(t,e,n){if(Jx(e))return e;const r=e[ts];if(!r)return pm(e,(i,s)=>ZL(t,r,e,i,s,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return R_(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),pm(s,(a,l)=>ZL(t,r,i,a,l,n,o)),R_(t,i,!1),n&&t.patches_&&pu("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function ZL(t,e,n,r,i,s,o){if(kl(i)){const a=s&&e&&e.type_!==3&&!WM(e.assigned_,r)?s.concat(r):void 0,l=b_(t,i,a);if(qU(n,r,l),kl(l))t.canAutoFreeze_=!1;else return}else o&&n.add(i);if(ba(i)&&!Jx(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;b_(t,i),(!e||!e.scope_.parent_)&&R_(t,i)}}function R_(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&a2(e,n)}function kK(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:YU(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=l2;n&&(i=[r],s=gm);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var l2={get(t,e){if(e===ts)return t;const n=Tc(t);if(!WM(n,e))return UK(t,n,e);const r=n[e];return t.finalized_||!ba(r)?r:r===ew(t.base_,e)?(tw(t),t.copy_[e]=qM(r,t)):r},has(t,e){return e in Tc(t)},ownKeys(t){return Reflect.ownKeys(Tc(t))},set(t,e,n){const r=QU(Tc(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=ew(Tc(t),e),s=i==null?void 0:i[ts];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(DK(n,i)&&(n!==void 0||WM(t.base_,e)))return!0;tw(t),JM(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return ew(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,tw(t),JM(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Tc(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){Js(11)},getPrototypeOf(t){return wf(t.base_)},setPrototypeOf(){Js(12)}},gm={};pm(l2,(t,e)=>{gm[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});gm.deleteProperty=function(t,e){return gm.set.call(this,t,e,void 0)};gm.set=function(t,e,n){return l2.set.call(this,t[0],e,n,t[0])};function ew(t,e){const n=t[ts];return(n?Tc(n):t)[e]}function UK(t,e,n){var i;const r=QU(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function QU(t,e){if(!(e in t))return;let n=wf(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=wf(n)}}function JM(t){t.modified_||(t.modified_=!0,t.parent_&&JM(t.parent_))}function tw(t){t.copy_||(t.copy_=XM(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var VK=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const s=n;n=e;const o=this;return function(l=s,...c){return o.produce(l,u=>n.call(this,u,...c))}}typeof n!="function"&&Js(6),r!==void 0&&typeof r!="function"&&Js(7);let i;if(ba(e)){const s=YL(this),o=qM(e,void 0);let a=!0;try{i=n(o),a=!1}finally{a?KM(s):$M(s)}return qL(s,r),QL(i,s)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===$U&&(i=void 0),this.autoFreeze_&&a2(i,!0),r){const s=[],o=[];pu("Patches").generateReplacementPatches_(e,i,s,o),r(s,o)}return i}else Js(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(o,...a)=>this.produceWithPatches(o,l=>e(l,...a));let r,i;return[this.produce(e,n,(o,a)=>{r=o,i=a}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){ba(t)||Js(8),kl(t)&&(t=ZU(t));const e=YL(this),n=qM(t,void 0);return n[ts].isManual_=!0,$M(e),n}finishDraft(t,e){const n=t&&t[ts];(!n||!n.isManual_)&&Js(9);const{scope_:r}=n;return qL(r,e),QL(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=pu("Patches").applyPatches_;return kl(t)?r(t,e):this.produce(t,i=>r(i,e))}};function qM(t,e){const n=Kx(t)?pu("MapSet").proxyMap_(t,e):$x(t)?pu("MapSet").proxySet_(t,e):kK(t,e);return(e?e.scope_:YU()).drafts_.push(n),n}function ZU(t){return kl(t)||Js(10,t),e9(t)}function e9(t){if(!ba(t)||Jx(t))return t;const e=t[ts];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=XM(t,e.scope_.immer_.useStrictShallowCopy_)}else n=XM(t,!0);return pm(n,(r,i)=>{qU(n,r,e9(i))}),e&&(e.finalized_=!1),n}var ns=new VK,t9=ns.produce;ns.produceWithPatches.bind(ns);ns.setAutoFreeze.bind(ns);ns.setUseStrictShallowCopy.bind(ns);ns.applyPatches.bind(ns);ns.createDraft.bind(ns);ns.finishDraft.bind(ns);function zK(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function HK(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function GK(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var eD=t=>Array.isArray(t)?t:[t];function jK(t){const e=Array.isArray(t[0])?t[0]:t;return GK(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function WK(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var XK=class{constructor(t){this.value=t}deref(){return this.value}},KK=typeof WeakRef<"u"?WeakRef:XK,$K=0,tD=1;function a0(){return{s:$K,v:void 0,o:null,p:null}}function c2(t,e={}){let n=a0();const{resultEqualityCheck:r}=e;let i,s=0;function o(){var f;let a=n;const{length:l}=arguments;for(let p=0,m=l;p<m;p++){const y=arguments[p];if(typeof y=="function"||typeof y=="object"&&y!==null){let S=a.o;S===null&&(a.o=S=new WeakMap);const v=S.get(y);v===void 0?(a=a0(),S.set(y,a)):a=v}else{let S=a.p;S===null&&(a.p=S=new Map);const v=S.get(y);v===void 0?(a=a0(),S.set(y,a)):a=v}}const c=a;let u;if(a.s===tD?u=a.v:(u=t.apply(null,arguments),s++),c.s=tD,r){const p=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;p!=null&&r(p,u)&&(u=p,s!==0&&s--),i=typeof u=="object"&&u!==null||typeof u=="function"?new KK(u):u}return c.v=u,u}return o.clearCache=()=>{n=a0(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function n9(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let s=0,o=0,a,l={},c=i.pop();typeof c=="object"&&(l=c,c=i.pop()),zK(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const u={...n,...l},{memoize:f,memoizeOptions:p=[],argsMemoize:m=c2,argsMemoizeOptions:y=[],devModeChecks:S={}}=u,v=eD(p),g=eD(y),_=jK(i),A=f(function(){return s++,c.apply(null,arguments)},...v),E=m(function(){o++;const C=WK(_,arguments);return a=A.apply(null,C),a},...g);return Object.assign(E,{resultFunc:c,memoizedResultFunc:A,dependencies:_,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:m})};return Object.assign(r,{withTypes:()=>r}),r}var JK=n9(c2),qK=Object.assign((t,e=JK)=>{HK(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(s=>t[s]);return e(r,(...s)=>s.reduce((o,a,l)=>(o[n[l]]=a,o),{}))},{withTypes:()=>qK});function r9(t){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,t):i(s)}var YK=r9(),QK=r9,ZK=(...t)=>{const e=n9(...t),n=Object.assign((...r)=>{const i=e(...r),s=(o,...a)=>i(kl(o)?ZU(o):o,...a);return Object.assign(s,i),s},{withTypes:()=>n});return n};ZK(c2);var e$=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?C_:C_.apply(null,arguments)},t$=t=>t&&typeof t.match=="function";function xa(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(Oi(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>IK(r)&&r.type===t,n}var i9=class dp extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,dp.prototype)}static get[Symbol.species](){return dp}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new dp(...e[0].concat(this)):new dp(...e.concat(this))}};function nD(t){return ba(t)?t9(t,()=>{}):t}function rD(t,e,n){if(t.has(e)){let i=t.get(e);return n.update&&(i=n.update(i,e,t),t.set(e,i)),i}if(!n.insert)throw new Error(Oi(10));const r=n.insert(e,t);return t.set(e,r),r}function n$(t){return typeof t=="boolean"}var r$=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=e??{};let o=new i9;return n&&(n$(n)?o.push(YK):o.push(QK(n.extraArgument))),o},i$="RTK_autoBatch",s9=t=>e=>{setTimeout(e,t)},s$=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:s9(10),o$=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,s=!1,o=!1;const a=new Set,l=t.type==="tick"?queueMicrotask:t.type==="raf"?s$:t.type==="callback"?t.queueNotification:s9(t.timeout),c=()=>{o=!1,s&&(s=!1,a.forEach(u=>u()))};return Object.assign({},r,{subscribe(u){const f=()=>i&&u(),p=r.subscribe(f);return a.add(u),()=>{p(),a.delete(u)}},dispatch(u){var f;try{return i=!((f=u==null?void 0:u.meta)!=null&&f[i$]),s=!i,s&&(o||(o=!0,l(c))),r.dispatch(u)}finally{i=!0}}})},a$=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new i9(t);return r&&i.push(o$(typeof r=="object"?r:void 0)),i},l$=!0;function c$(t){const e=r$(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=t||{};let a;if(typeof n=="function")a=n;else if(o2(n))a=RK(n);else throw new Error(Oi(1));let l;typeof r=="function"?l=r(e):l=e();let c=C_;i&&(c=e$({trace:!l$,...typeof i=="object"&&i}));const u=PK(...l),f=a$(u);let p=typeof o=="function"?o(f):f();const m=c(...p);return KU(a,s,m)}function o9(t){const e={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(Oi(28));if(a in e)throw new Error(Oi(29));return e[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return t(i),[e,n,r]}function u$(t){return typeof t=="function"}function h$(t,e){let[n,r,i]=o9(e),s;if(u$(t))s=()=>nD(t());else{const a=nD(t);s=()=>a}function o(a=s(),l){let c=[n[l.type],...r.filter(({matcher:u})=>u(l)).map(({reducer:u})=>u)];return c.filter(u=>!!u).length===0&&(c=[i]),c.reduce((u,f)=>{if(f)if(kl(u)){const m=f(u,l);return m===void 0?u:m}else{if(ba(u))return t9(u,p=>f(p,l));{const p=f(u,l);if(p===void 0){if(u===null)return u;throw new Error(Oi(9))}return p}}return u},a)}return o.getInitialState=s,o}var f$="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",a9=(t=21)=>{let e="",n=t;for(;n--;)e+=f$[Math.random()*64|0];return e},d$=(t,e)=>t$(t)?t.match(e):t(e);function p$(...t){return e=>t.some(n=>d$(n,e))}var m$=["name","message","stack","code"],nw=class{constructor(t,e){MA(this,"_type");this.payload=t,this.meta=e}},iD=class{constructor(t,e){MA(this,"_type");this.payload=t,this.meta=e}},g$=t=>{if(typeof t=="object"&&t!==null){const e={};for(const n of m$)typeof t[n]=="string"&&(e[n]=t[n]);return e}return{message:String(t)}},y$=(()=>{function t(e,n,r){const i=xa(e+"/fulfilled",(l,c,u,f)=>({payload:l,meta:{...f||{},arg:u,requestId:c,requestStatus:"fulfilled"}})),s=xa(e+"/pending",(l,c,u)=>({payload:void 0,meta:{...u||{},arg:c,requestId:l,requestStatus:"pending"}})),o=xa(e+"/rejected",(l,c,u,f,p)=>({payload:f,error:(r&&r.serializeError||g$)(l||"Rejected"),meta:{...p||{},arg:u,requestId:c,rejectedWithValue:!!f,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"}}));function a(l){return(c,u,f)=>{const p=r!=null&&r.idGenerator?r.idGenerator(l):a9(),m=new AbortController;let y,S;function v(_){S=_,m.abort()}const g=async function(){var E,b;let _;try{let C=(E=r==null?void 0:r.condition)==null?void 0:E.call(r,l,{getState:u,extra:f});if(_$(C)&&(C=await C),C===!1||m.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const P=new Promise((L,N)=>{y=()=>{N({name:"AbortError",message:S||"Aborted"})},m.signal.addEventListener("abort",y)});c(s(p,l,(b=r==null?void 0:r.getPendingMeta)==null?void 0:b.call(r,{requestId:p,arg:l},{getState:u,extra:f}))),_=await Promise.race([P,Promise.resolve(n(l,{dispatch:c,getState:u,extra:f,requestId:p,signal:m.signal,abort:v,rejectWithValue:(L,N)=>new nw(L,N),fulfillWithValue:(L,N)=>new iD(L,N)})).then(L=>{if(L instanceof nw)throw L;return L instanceof iD?i(L.payload,p,l,L.meta):i(L,p,l)})])}catch(C){_=C instanceof nw?o(null,p,l,C.payload,C.meta):o(C,p,l)}finally{y&&m.signal.removeEventListener("abort",y)}return r&&!r.dispatchConditionRejection&&o.match(_)&&_.meta.condition||c(_),_}();return Object.assign(g,{abort:v,requestId:p,arg:l,unwrap(){return g.then(v$)}})}}return Object.assign(a,{pending:s,rejected:o,fulfilled:i,settled:p$(o,i),typePrefix:e})}return t.withTypes=()=>t,t})();function v$(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function _$(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var x$=Symbol.for("rtk-slice-createasyncthunk");function S$(t,e){return`${t}/${e}`}function A$({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[x$];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(Oi(11));typeof process<"u";const a=(typeof i.reducers=="function"?i.reducers(M$()):i.reducers)||{},l=Object.keys(a),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(A,E){const b=typeof A=="string"?A:A.type;if(!b)throw new Error(Oi(12));if(b in c.sliceCaseReducersByType)throw new Error(Oi(13));return c.sliceCaseReducersByType[b]=E,u},addMatcher(A,E){return c.sliceMatchers.push({matcher:A,reducer:E}),u},exposeAction(A,E){return c.actionCreators[A]=E,u},exposeCaseReducer(A,E){return c.sliceCaseReducersByName[A]=E,u}};l.forEach(A=>{const E=a[A],b={reducerName:A,type:S$(s,A),createNotation:typeof i.reducers=="function"};C$(E)?R$(b,E,u,e):T$(b,E,u)});function f(){const[A={},E=[],b=void 0]=typeof i.extraReducers=="function"?o9(i.extraReducers):[i.extraReducers],C={...A,...c.sliceCaseReducersByType};return h$(i.initialState,P=>{for(let L in C)P.addCase(L,C[L]);for(let L of c.sliceMatchers)P.addMatcher(L.matcher,L.reducer);for(let L of E)P.addMatcher(L.matcher,L.reducer);b&&P.addDefaultCase(b)})}const p=A=>A,m=new Map;let y;function S(A,E){return y||(y=f()),y(A,E)}function v(){return y||(y=f()),y.getInitialState()}function g(A,E=!1){function b(P){let L=P[A];return typeof L>"u"&&E&&(L=v()),L}function C(P=p){const L=rD(m,E,{insert:()=>new WeakMap});return rD(L,P,{insert:()=>{const N={};for(const[T,D]of Object.entries(i.selectors??{}))N[T]=w$(D,P,v,E);return N}})}return{reducerPath:A,getSelectors:C,get selectors(){return C(b)},selectSlice:b}}const _={name:s,reducer:S,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:v,...g(o),injectInto(A,{reducerPath:E,...b}={}){const C=E??o;return A.inject({reducerPath:C,reducer:S},b),{..._,...g(C,!0)}}};return _}}function w$(t,e,n,r){function i(s,...o){let a=e(s);return typeof a>"u"&&r&&(a=n()),t(a,...o)}return i.unwrapped=t,i}var E$=A$();function M$(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function T$({type:t,reducerName:e,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!b$(r))throw new Error(Oi(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,o?xa(t,o):xa(t))}function C$(t){return t._reducerDefinitionType==="asyncThunk"}function b$(t){return t._reducerDefinitionType==="reducerWithPrepare"}function R$({type:t,reducerName:e},n,r,i){if(!i)throw new Error(Oi(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:l,settled:c,options:u}=n,f=i(t,s,u);r.exposeAction(e,f),o&&r.addCase(f.fulfilled,o),a&&r.addCase(f.pending,a),l&&r.addCase(f.rejected,l),c&&r.addMatcher(f.settled,c),r.exposeCaseReducer(e,{fulfilled:o||l0,pending:a||l0,rejected:l||l0,settled:c||l0})}function l0(){}var P$=(t,e)=>{if(typeof t!="function")throw new Error(Oi(32))},u2="listenerMiddleware",I$=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:s}=t;if(e)i=xa(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Oi(21));return P$(s),{predicate:i,type:e,effect:s}},L$=Object.assign(t=>{const{type:e,predicate:n,effect:r}=I$(t);return{id:a9(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Oi(22))}}},{withTypes:()=>L$}),D$=Object.assign(xa(`${u2}/add`),{withTypes:()=>D$});xa(`${u2}/removeAll`);var B$=Object.assign(xa(`${u2}/remove`),{withTypes:()=>B$});function Oi(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var sD={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l9=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},N$=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},c9={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=s>>2,f=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),r.push(n[u],n[f],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(l9(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):N$(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||f==null)throw new O$;const p=s<<2|a>>4;if(r.push(p),c!==64){const m=a<<4&240|c>>2;if(r.push(m),f!==64){const y=c<<6&192|f;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class O$ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const F$=function(t){const e=l9(t);return c9.encodeByteArray(e,!0)},P_=function(t){return F$(t).replace(/\./g,"")},k$=function(t){try{return c9.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U$(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V$=()=>U$().__FIREBASE_DEFAULTS__,z$=()=>{if(typeof process>"u"||typeof sD>"u")return;const t=sD.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},H$=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&k$(t[1]);return e&&JSON.parse(e)},h2=()=>{try{return V$()||z$()||H$()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},G$=t=>{var e,n;return(n=(e=h2())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},j$=t=>{const e=G$(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},u9=()=>{var t;return(t=h2())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W${constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X$(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[P_(JSON.stringify(n)),P_(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function K$(){var t;const e=(t=h2())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $$(){return!K$()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function h9(){try{return typeof indexedDB=="object"}catch{return!1}}function J$(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q$="FirebaseError";class Yf extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=q$,Object.setPrototypeOf(this,Yf.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,f9.prototype.create)}}class f9{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Y$(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Yf(i,a,r)}}function Y$(t,e){return t.replace(Q$,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Q$=/\{\$([^}]+)}/g;function YM(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(oD(s)&&oD(o)){if(!YM(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function oD(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z$(t){return t&&t._delegate?t._delegate:t}class ym{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eJ=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new W$;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nJ(e))try{this.getOrInitializeService({instanceIdentifier:Cc})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Cc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Cc){return this.instances.has(e)}getOptions(e=Cc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:tJ(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Cc){return this.component?this.component.multipleInstances?e:Cc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function tJ(t){return t===Cc?void 0:t}function nJ(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rJ{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new eJ(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Qt||(Qt={}));const iJ={debug:Qt.DEBUG,verbose:Qt.VERBOSE,info:Qt.INFO,warn:Qt.WARN,error:Qt.ERROR,silent:Qt.SILENT},sJ=Qt.INFO,oJ={[Qt.DEBUG]:"log",[Qt.VERBOSE]:"log",[Qt.INFO]:"info",[Qt.WARN]:"warn",[Qt.ERROR]:"error"},aJ=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=oJ[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class d9{constructor(e){this.name=e,this._logLevel=sJ,this._logHandler=aJ,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Qt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?iJ[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Qt.DEBUG,...e),this._logHandler(this,Qt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Qt.VERBOSE,...e),this._logHandler(this,Qt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Qt.INFO,...e),this._logHandler(this,Qt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Qt.WARN,...e),this._logHandler(this,Qt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Qt.ERROR,...e),this._logHandler(this,Qt.ERROR,...e)}}const lJ=(t,e)=>e.some(n=>t instanceof n);let aD,lD;function cJ(){return aD||(aD=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function uJ(){return lD||(lD=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const p9=new WeakMap,QM=new WeakMap,m9=new WeakMap,rw=new WeakMap,f2=new WeakMap;function hJ(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Cl(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&p9.set(n,t)}).catch(()=>{}),f2.set(e,t),e}function fJ(t){if(QM.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});QM.set(t,e)}let ZM={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return QM.get(t);if(e==="objectStoreNames")return t.objectStoreNames||m9.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Cl(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function dJ(t){ZM=t(ZM)}function pJ(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(iw(this),e,...n);return m9.set(r,e.sort?e.sort():[e]),Cl(r)}:uJ().includes(t)?function(...e){return t.apply(iw(this),e),Cl(p9.get(this))}:function(...e){return Cl(t.apply(iw(this),e))}}function mJ(t){return typeof t=="function"?pJ(t):(t instanceof IDBTransaction&&fJ(t),lJ(t,cJ())?new Proxy(t,ZM):t)}function Cl(t){if(t instanceof IDBRequest)return hJ(t);if(rw.has(t))return rw.get(t);const e=mJ(t);return e!==t&&(rw.set(t,e),f2.set(e,t)),e}const iw=t=>f2.get(t);function gJ(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Cl(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Cl(o.result),l.oldVersion,l.newVersion,Cl(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const yJ=["get","getKey","getAll","getAllKeys","count"],vJ=["put","add","delete","clear"],sw=new Map;function cD(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(sw.get(e))return sw.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=vJ.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||yJ.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return sw.set(e,s),s}dJ(t=>({...t,get:(e,n,r)=>cD(e,n)||t.get(e,n,r),has:(e,n)=>!!cD(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _J{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(xJ(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function xJ(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const eT="@firebase/app",uD="0.9.27";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mu=new d9("@firebase/app"),SJ="@firebase/app-compat",AJ="@firebase/analytics-compat",wJ="@firebase/analytics",EJ="@firebase/app-check-compat",MJ="@firebase/app-check",TJ="@firebase/auth",CJ="@firebase/auth-compat",bJ="@firebase/database",RJ="@firebase/database-compat",PJ="@firebase/functions",IJ="@firebase/functions-compat",LJ="@firebase/installations",DJ="@firebase/installations-compat",BJ="@firebase/messaging",NJ="@firebase/messaging-compat",OJ="@firebase/performance",FJ="@firebase/performance-compat",kJ="@firebase/remote-config",UJ="@firebase/remote-config-compat",VJ="@firebase/storage",zJ="@firebase/storage-compat",HJ="@firebase/firestore",GJ="@firebase/firestore-compat",jJ="firebase",WJ="10.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT="[DEFAULT]",XJ={[eT]:"fire-core",[SJ]:"fire-core-compat",[wJ]:"fire-analytics",[AJ]:"fire-analytics-compat",[MJ]:"fire-app-check",[EJ]:"fire-app-check-compat",[TJ]:"fire-auth",[CJ]:"fire-auth-compat",[bJ]:"fire-rtdb",[RJ]:"fire-rtdb-compat",[PJ]:"fire-fn",[IJ]:"fire-fn-compat",[LJ]:"fire-iid",[DJ]:"fire-iid-compat",[BJ]:"fire-fcm",[NJ]:"fire-fcm-compat",[OJ]:"fire-perf",[FJ]:"fire-perf-compat",[kJ]:"fire-rc",[UJ]:"fire-rc-compat",[VJ]:"fire-gcs",[zJ]:"fire-gcs-compat",[HJ]:"fire-fst",[GJ]:"fire-fst-compat","fire-js":"fire-js",[jJ]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_=new Map,nT=new Map;function KJ(t,e){try{t.container.addComponent(e)}catch(n){mu.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function D_(t){const e=t.name;if(nT.has(e))return mu.debug(`There were multiple attempts to register component ${e}.`),!1;nT.set(e,t);for(const n of L_.values())KJ(n,t);return!0}function $J(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JJ={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},bl=new f9("app","Firebase",JJ);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qJ{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ym("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YJ=WJ;function g9(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:tT,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw bl.create("bad-app-name",{appName:String(i)});if(n||(n=u9()),!n)throw bl.create("no-options");const s=L_.get(i);if(s){if(YM(n,s.options)&&YM(r,s.config))return s;throw bl.create("duplicate-app",{appName:i})}const o=new rJ(i);for(const l of nT.values())o.addComponent(l);const a=new qJ(n,r,o);return L_.set(i,a),a}function QJ(t=tT){const e=L_.get(t);if(!e&&t===tT&&u9())return g9();if(!e)throw bl.create("no-app",{appName:t});return e}function rf(t,e,n){var r;let i=(r=XJ[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mu.warn(a.join(" "));return}D_(new ym(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZJ="firebase-heartbeat-database",eq=1,vm="firebase-heartbeat-store";let ow=null;function y9(){return ow||(ow=gJ(ZJ,eq,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(vm)}catch(n){console.warn(n)}}}}).catch(t=>{throw bl.create("idb-open",{originalErrorMessage:t.message})})),ow}async function tq(t){try{const n=(await y9()).transaction(vm),r=await n.objectStore(vm).get(v9(t));return await n.done,r}catch(e){if(e instanceof Yf)mu.warn(e.message);else{const n=bl.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});mu.warn(n.message)}}}async function hD(t,e){try{const r=(await y9()).transaction(vm,"readwrite");await r.objectStore(vm).put(e,v9(t)),await r.done}catch(n){if(n instanceof Yf)mu.warn(n.message);else{const r=bl.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});mu.warn(r.message)}}}function v9(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nq=1024,rq=30*24*60*60*1e3;class iq{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new oq(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=fD();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=rq}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=fD(),{heartbeatsToSend:r,unsentEntries:i}=sq(this._heartbeatsCache.heartbeats),s=P_(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function fD(){return new Date().toISOString().substring(0,10)}function sq(t,e=nq){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),dD(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),dD(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class oq{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return h9()?J$().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await tq(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return hD(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return hD(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function dD(t){return P_(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aq(t){D_(new ym("platform-logger",e=>new _J(e),"PRIVATE")),D_(new ym("heartbeat",e=>new iq(e),"PRIVATE")),rf(eT,uD,t),rf(eT,uD,"esm2017"),rf("fire-js","")}aq("");var lq=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},He,d2=d2||{},Tt=lq||self;function qx(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function fg(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function cq(t){return Object.prototype.hasOwnProperty.call(t,aw)&&t[aw]||(t[aw]=++uq)}var aw="closure_uid_"+(1e9*Math.random()>>>0),uq=0;function hq(t,e,n){return t.call.apply(t.bind,arguments)}function fq(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function ri(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?ri=hq:ri=fq,ri.apply(null,arguments)}function c0(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function br(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Yl(){this.s=this.s,this.o=this.o}var dq=0;Yl.prototype.s=!1;Yl.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),dq!=0)&&cq(this)};Yl.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const _9=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function p2(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function pD(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(qx(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function ii(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}ii.prototype.h=function(){this.defaultPrevented=!0};var pq=function(){if(!Tt.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};Tt.addEventListener("test",n,e),Tt.removeEventListener("test",n,e)}catch{}return t}();function _m(t){return/^[\s\xa0]*$/.test(t)}function Yx(){var t=Tt.navigator;return t&&(t=t.userAgent)?t:""}function Mo(t){return Yx().indexOf(t)!=-1}function m2(t){return m2[" "](t),t}m2[" "]=function(){};function mq(t,e){var n=aY;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var gq=Mo("Opera"),Ef=Mo("Trident")||Mo("MSIE"),x9=Mo("Edge"),rT=x9||Ef,S9=Mo("Gecko")&&!(Yx().toLowerCase().indexOf("webkit")!=-1&&!Mo("Edge"))&&!(Mo("Trident")||Mo("MSIE"))&&!Mo("Edge"),yq=Yx().toLowerCase().indexOf("webkit")!=-1&&!Mo("Edge");function A9(){var t=Tt.document;return t?t.documentMode:void 0}var iT;e:{var lw="",cw=function(){var t=Yx();if(S9)return/rv:([^\);]+)(\)|;)/.exec(t);if(x9)return/Edge\/([\d\.]+)/.exec(t);if(Ef)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(yq)return/WebKit\/(\S+)/.exec(t);if(gq)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(cw&&(lw=cw?cw[1]:""),Ef){var uw=A9();if(uw!=null&&uw>parseFloat(lw)){iT=String(uw);break e}}iT=lw}var sT;if(Tt.document&&Ef){var mD=A9();sT=mD||parseInt(iT,10)||void 0}else sT=void 0;var vq=sT;function xm(t,e){if(ii.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(S9){e:{try{m2(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:_q[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&xm.$.h.call(this)}}br(xm,ii);var _q={2:"touch",3:"pen",4:"mouse"};xm.prototype.h=function(){xm.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var dg="closure_listenable_"+(1e6*Math.random()|0),xq=0;function Sq(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++xq,this.fa=this.ia=!1}function Qx(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function g2(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function Aq(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function w9(t){const e={};for(const n in t)e[n]=t[n];return e}const gD="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E9(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<gD.length;s++)n=gD[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Zx(t){this.src=t,this.g={},this.h=0}Zx.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=aT(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new Sq(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function oT(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=_9(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Qx(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function aT(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var y2="closure_lm_"+(1e6*Math.random()|0),hw={};function M9(t,e,n,r,i){if(r&&r.once)return C9(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)M9(t,e[s],n,r,i);return null}return n=x2(n),t&&t[dg]?t.O(e,n,fg(r)?!!r.capture:!!r,i):T9(t,e,n,!1,r,i)}function T9(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=fg(i)?!!i.capture:!!i,a=_2(t);if(a||(t[y2]=a=new Zx(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=wq(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)pq||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(R9(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function wq(){function t(n){return e.call(t.src,t.listener,n)}const e=Eq;return t}function C9(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)C9(t,e[s],n,r,i);return null}return n=x2(n),t&&t[dg]?t.P(e,n,fg(r)?!!r.capture:!!r,i):T9(t,e,n,!0,r,i)}function b9(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)b9(t,e[s],n,r,i);else r=fg(r)?!!r.capture:!!r,n=x2(n),t&&t[dg]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=aT(s,n,r,i),-1<n&&(Qx(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=_2(t))&&(e=t.g[e.toString()],t=-1,e&&(t=aT(e,n,r,i)),(n=-1<t?e[t]:null)&&v2(n))}function v2(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[dg])oT(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(R9(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=_2(e))?(oT(n,t),n.h==0&&(n.src=null,e[y2]=null)):Qx(t)}}}function R9(t){return t in hw?hw[t]:hw[t]="on"+t}function Eq(t,e){if(t.fa)t=!0;else{e=new xm(e,this);var n=t.listener,r=t.la||t.src;t.ia&&v2(t),t=n.call(r,e)}return t}function _2(t){return t=t[y2],t instanceof Zx?t:null}var fw="__closure_events_fn_"+(1e9*Math.random()>>>0);function x2(t){return typeof t=="function"?t:(t[fw]||(t[fw]=function(e){return t.handleEvent(e)}),t[fw])}function Cr(){Yl.call(this),this.i=new Zx(this),this.S=this,this.J=null}br(Cr,Yl);Cr.prototype[dg]=!0;Cr.prototype.removeEventListener=function(t,e,n,r){b9(this,t,e,n,r)};function Vr(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new ii(e,t);else if(e instanceof ii)e.target=e.target||t;else{var i=e;e=new ii(r,t),E9(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=u0(o,r,!0,e)&&i}if(o=e.g=t,i=u0(o,r,!0,e)&&i,i=u0(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=u0(o,r,!1,e)&&i}Cr.prototype.N=function(){if(Cr.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Qx(n[r]);delete t.g[e],t.h--}}this.J=null};Cr.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Cr.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function u0(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&oT(t.i,o),i=a.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var S2=Tt.JSON.stringify;class Mq{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function Tq(){var t=A2;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class Cq{constructor(){this.h=this.g=null}add(e,n){const r=P9.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var P9=new Mq(()=>new bq,t=>t.reset());class bq{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Rq(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function Pq(t){Tt.setTimeout(()=>{throw t},0)}let Sm,Am=!1,A2=new Cq,I9=()=>{const t=Tt.Promise.resolve(void 0);Sm=()=>{t.then(Iq)}};var Iq=()=>{for(var t;t=Tq();){try{t.h.call(t.g)}catch(n){Pq(n)}var e=P9;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Am=!1};function e1(t,e){Cr.call(this),this.h=t||1,this.g=e||Tt,this.j=ri(this.qb,this),this.l=Date.now()}br(e1,Cr);He=e1.prototype;He.ga=!1;He.T=null;He.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Vr(this,"tick"),this.ga&&(w2(this),this.start()))}};He.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function w2(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}He.N=function(){e1.$.N.call(this),w2(this),delete this.g};function E2(t,e,n){if(typeof t=="function")n&&(t=ri(t,n));else if(t&&typeof t.handleEvent=="function")t=ri(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Tt.setTimeout(t,e||0)}function L9(t){t.g=E2(()=>{t.g=null,t.i&&(t.i=!1,L9(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class Lq extends Yl{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:L9(this)}N(){super.N(),this.g&&(Tt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wm(t){Yl.call(this),this.h=t,this.g={}}br(wm,Yl);var yD=[];function D9(t,e,n,r){Array.isArray(n)||(n&&(yD[0]=n.toString()),n=yD);for(var i=0;i<n.length;i++){var s=M9(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function B9(t){g2(t.g,function(e,n){this.g.hasOwnProperty(n)&&v2(e)},t),t.g={}}wm.prototype.N=function(){wm.$.N.call(this),B9(this)};wm.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function t1(){this.g=!0}t1.prototype.Ea=function(){this.g=!1};function Dq(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var f=u.split("_");o=2<=f.length&&f[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function Bq(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function Vh(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+Oq(t,n)+(r?" "+r:"")})}function Nq(t,e){t.info(function(){return"TIMEOUT: "+e})}t1.prototype.info=function(){};function Oq(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return S2(n)}catch{return e}}var Cu={},vD=null;function n1(){return vD=vD||new Cr}Cu.Ta="serverreachability";function N9(t){ii.call(this,Cu.Ta,t)}br(N9,ii);function Em(t){const e=n1();Vr(e,new N9(e))}Cu.STAT_EVENT="statevent";function O9(t,e){ii.call(this,Cu.STAT_EVENT,t),this.stat=e}br(O9,ii);function Si(t){const e=n1();Vr(e,new O9(e,t))}Cu.Ua="timingevent";function F9(t,e){ii.call(this,Cu.Ua,t),this.size=e}br(F9,ii);function pg(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Tt.setTimeout(function(){t()},e)}var r1={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},k9={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function M2(){}M2.prototype.h=null;function _D(t){return t.h||(t.h=t.i())}function U9(){}var mg={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function T2(){ii.call(this,"d")}br(T2,ii);function C2(){ii.call(this,"c")}br(C2,ii);var lT;function i1(){}br(i1,M2);i1.prototype.g=function(){return new XMLHttpRequest};i1.prototype.i=function(){return{}};lT=new i1;function gg(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new wm(this),this.P=Fq,t=rT?125:void 0,this.V=new e1(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new V9}function V9(){this.i=null,this.g="",this.h=!1}var Fq=45e3,z9={},cT={};He=gg.prototype;He.setTimeout=function(t){this.P=t};function uT(t,e,n){t.L=1,t.A=o1(Ra(e)),t.u=n,t.S=!0,H9(t,null)}function H9(t,e){t.G=Date.now(),yg(t),t.B=Ra(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),q9(n.i,"t",r),t.o=0,n=t.l.J,t.h=new V9,t.g=y5(t.l,n?e:null,!t.u),0<t.O&&(t.M=new Lq(ri(t.Pa,t,t.g),t.O)),D9(t.U,t.g,"readystatechange",t.nb),e=t.I?w9(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Em(),Dq(t.j,t.v,t.B,t.m,t.W,t.u)}He.nb=function(t){t=t.target;const e=this.M;e&&Co(t)==3?e.l():this.Pa(t)};He.Pa=function(t){try{if(t==this.g)e:{const u=Co(this.g);var e=this.g.Ia();const f=this.g.da();if(!(3>u)&&(u!=3||rT||this.g&&(this.h.h||this.g.ja()||wD(this.g)))){this.J||u!=4||e==7||(e==8||0>=f?Em(3):Em(2)),s1(this);var n=this.g.da();this.ca=n;t:if(G9(this)){var r=wD(this.g);t="";var i=r.length,s=Co(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){zc(this),Pp(this);var o="";break t}this.h.i=new Tt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,Bq(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_m(a)){var c=a;break t}}c=null}if(n=c)Vh(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,hT(this,n);else{this.i=!1,this.s=3,Si(12),zc(this),Pp(this);break e}}this.S?(j9(this,u,o),rT&&this.i&&u==3&&(D9(this.U,this.V,"tick",this.mb),this.V.start())):(Vh(this.j,this.m,o,null),hT(this,o)),u==4&&zc(this),this.i&&!this.J&&(u==4?d5(this.l,this):(this.i=!1,yg(this)))}else iY(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,Si(12)):(this.s=0,Si(13)),zc(this),Pp(this)}}}catch{}finally{}};function G9(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function j9(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=kq(t,n),i==cT){e==4&&(t.s=4,Si(14),r=!1),Vh(t.j,t.m,null,"[Incomplete Response]");break}else if(i==z9){t.s=4,Si(15),Vh(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Vh(t.j,t.m,i,null),hT(t,i);G9(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,Si(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),D2(e),e.M=!0,Si(11))):(Vh(t.j,t.m,n,"[Invalid Chunked Response]"),zc(t),Pp(t))}He.mb=function(){if(this.g){var t=Co(this.g),e=this.g.ja();this.o<e.length&&(s1(this),j9(this,t,e),this.i&&t!=4&&yg(this))}};function kq(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?cT:(n=Number(e.substring(n,r)),isNaN(n)?z9:(r+=1,r+n>e.length?cT:(e=e.slice(r,r+n),t.o=r+n,e)))}He.cancel=function(){this.J=!0,zc(this)};function yg(t){t.Y=Date.now()+t.P,W9(t,t.P)}function W9(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=pg(ri(t.lb,t),e)}function s1(t){t.C&&(Tt.clearTimeout(t.C),t.C=null)}He.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(Nq(this.j,this.B),this.L!=2&&(Em(),Si(17)),zc(this),this.s=2,Pp(this)):W9(this,this.Y-t)};function Pp(t){t.l.H==0||t.J||d5(t.l,t)}function zc(t){s1(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,w2(t.V),B9(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function hT(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||fT(n.i,t))){if(!t.K&&fT(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)O_(n),u1(n);else break e;L2(n),Si(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=pg(ri(n.ib,n),6e3));if(1>=Z9(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Hc(n,11)}else if((t.K||n.g==t)&&O_(n),!_m(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const u=c[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const f=c[4];f!=null&&(n.Ga=f,n.l.info("SVER="+n.Ga));const p=c[5];p!=null&&typeof p=="number"&&0<p&&(r=1.5*p,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const m=t.g;if(m){const y=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(y){var s=r.i;s.g||y.indexOf("spdy")==-1&&y.indexOf("quic")==-1&&y.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(b2(s,s.h),s.h=null))}if(r.F){const S=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;S&&(r.Da=S,An(r.I,r.F,S))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=g5(r,r.J?r.pa:null,r.Y),o.K){e5(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(s1(a),yg(a)),r.g=o}else h5(r);0<n.j.length&&h1(n)}else c[0]!="stop"&&c[0]!="close"||Hc(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Hc(n,7):I2(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}Em(4)}catch{}}function Uq(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(qx(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function Vq(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(qx(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function X9(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(qx(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=Vq(t),r=Uq(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var K9=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zq(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Zc(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Zc){this.h=t.h,B_(this,t.j),this.s=t.s,this.g=t.g,N_(this,t.m),this.l=t.l;var e=t.i,n=new Mm;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),xD(this,n),this.o=t.o}else t&&(e=String(t).match(K9))?(this.h=!1,B_(this,e[1]||"",!0),this.s=pp(e[2]||""),this.g=pp(e[3]||"",!0),N_(this,e[4]),this.l=pp(e[5]||"",!0),xD(this,e[6]||"",!0),this.o=pp(e[7]||"")):(this.h=!1,this.i=new Mm(null,this.h))}Zc.prototype.toString=function(){var t=[],e=this.j;e&&t.push(mp(e,SD,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(mp(e,SD,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(mp(n,n.charAt(0)=="/"?jq:Gq,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",mp(n,Xq)),t.join("")};function Ra(t){return new Zc(t)}function B_(t,e,n){t.j=n?pp(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function N_(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function xD(t,e,n){e instanceof Mm?(t.i=e,Kq(t.i,t.h)):(n||(e=mp(e,Wq)),t.i=new Mm(e,t.h))}function An(t,e,n){t.i.set(e,n)}function o1(t){return An(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function pp(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function mp(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,Hq),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Hq(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var SD=/[#\/\?@]/g,Gq=/[#\?:]/g,jq=/[#\?]/g,Wq=/[#\?@]/g,Xq=/#/g;function Mm(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Ql(t){t.g||(t.g=new Map,t.h=0,t.i&&zq(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}He=Mm.prototype;He.add=function(t,e){Ql(this),this.i=null,t=Qf(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function $9(t,e){Ql(t),e=Qf(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function J9(t,e){return Ql(t),e=Qf(t,e),t.g.has(e)}He.forEach=function(t,e){Ql(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};He.ta=function(){Ql(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};He.Z=function(t){Ql(this);let e=[];if(typeof t=="string")J9(this,t)&&(e=e.concat(this.g.get(Qf(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};He.set=function(t,e){return Ql(this),this.i=null,t=Qf(this,t),J9(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};He.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function q9(t,e,n){$9(t,e),0<n.length&&(t.i=null,t.g.set(Qf(t,e),p2(n)),t.h+=n.length)}He.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function Qf(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Kq(t,e){e&&!t.j&&(Ql(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&($9(this,r),q9(this,i,n))},t)),t.j=e}var $q=class{constructor(t,e){this.g=t,this.map=e}};function Y9(t){this.l=t||Jq,Tt.PerformanceNavigationTiming?(t=Tt.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Tt.g&&Tt.g.Ka&&Tt.g.Ka()&&Tt.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Jq=10;function Q9(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function Z9(t){return t.h?1:t.g?t.g.size:0}function fT(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function b2(t,e){t.g?t.g.add(e):t.h=e}function e5(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}Y9.prototype.cancel=function(){if(this.i=t5(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function t5(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return p2(t.i)}var qq=class{stringify(t){return Tt.JSON.stringify(t,void 0)}parse(t){return Tt.JSON.parse(t,void 0)}};function Yq(){this.g=new qq}function Qq(t,e,n){const r=n||"";try{X9(t,function(i,s){let o=i;fg(i)&&(o=S2(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Zq(t,e){const n=new t1;if(Tt.Image){const r=new Image;r.onload=c0(h0,n,r,"TestLoadImage: loaded",!0,e),r.onerror=c0(h0,n,r,"TestLoadImage: error",!1,e),r.onabort=c0(h0,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=c0(h0,n,r,"TestLoadImage: timeout",!1,e),Tt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function h0(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function a1(t){this.l=t.ec||null,this.j=t.ob||!1}br(a1,M2);a1.prototype.g=function(){return new l1(this.l,this.j)};a1.prototype.i=function(t){return function(){return t}}({});function l1(t,e){Cr.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=R2,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}br(l1,Cr);var R2=0;He=l1.prototype;He.open=function(t,e){if(this.readyState!=R2)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Tm(this)};He.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Tt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};He.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,vg(this)),this.readyState=R2};He.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Tm(this)),this.g&&(this.readyState=3,Tm(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Tt.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;n5(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function n5(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}He.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?vg(this):Tm(this),this.readyState==3&&n5(this)}};He.Za=function(t){this.g&&(this.response=this.responseText=t,vg(this))};He.Ya=function(t){this.g&&(this.response=t,vg(this))};He.ka=function(){this.g&&vg(this)};function vg(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Tm(t)}He.setRequestHeader=function(t,e){this.v.append(t,e)};He.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};He.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Tm(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(l1.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var eY=Tt.JSON.parse;function Wn(t){Cr.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=r5,this.L=this.M=!1}br(Wn,Cr);var r5="",tY=/^https?$/i,nY=["POST","PUT"];He=Wn.prototype;He.Oa=function(t){this.M=t};He.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():lT.g(),this.C=this.u?_D(this.u):_D(lT),this.g.onreadystatechange=ri(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){AD(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=Tt.FormData&&t instanceof Tt.FormData,!(0<=_9(nY,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{o5(this),0<this.B&&((this.L=rY(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ri(this.ua,this)):this.A=E2(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){AD(this,s)}};function rY(t){return Ef&&typeof t.timeout=="number"&&t.ontimeout!==void 0}He.ua=function(){typeof d2<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Vr(this,"timeout"),this.abort(8))};function AD(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,i5(t),c1(t)}function i5(t){t.F||(t.F=!0,Vr(t,"complete"),Vr(t,"error"))}He.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Vr(this,"complete"),Vr(this,"abort"),c1(this))};He.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),c1(this,!0)),Wn.$.N.call(this)};He.La=function(){this.s||(this.G||this.v||this.l?s5(this):this.kb())};He.kb=function(){s5(this)};function s5(t){if(t.h&&typeof d2<"u"&&(!t.C[1]||Co(t)!=4||t.da()!=2)){if(t.v&&Co(t)==4)E2(t.La,0,t);else if(Vr(t,"readystatechange"),Co(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(K9)[1]||null;!i&&Tt.self&&Tt.self.location&&(i=Tt.self.location.protocol.slice(0,-1)),r=!tY.test(i?i.toLowerCase():"")}n=r}if(n)Vr(t,"complete"),Vr(t,"success");else{t.m=6;try{var s=2<Co(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",i5(t)}}finally{c1(t)}}}}function c1(t,e){if(t.g){o5(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Vr(t,"ready");try{n.onreadystatechange=r}catch{}}}function o5(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Tt.clearTimeout(t.A),t.A=null)}He.isActive=function(){return!!this.g};function Co(t){return t.g?t.g.readyState:0}He.da=function(){try{return 2<Co(this)?this.g.status:-1}catch{return-1}};He.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};He.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),eY(e)}};function wD(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case r5:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function iY(t){const e={};t=(t.g&&2<=Co(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(_m(t[r]))continue;var n=Rq(t[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}Aq(e,function(r){return r.join(", ")})}He.Ia=function(){return this.m};He.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function a5(t){let e="";return g2(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function P2(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=a5(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):An(t,e,n))}function kd(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function l5(t){this.Ga=0,this.j=[],this.l=new t1,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=kd("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=kd("baseRetryDelayMs",5e3,t),this.hb=kd("retryDelaySeedMs",1e4,t),this.eb=kd("forwardChannelMaxRetries",2,t),this.xa=kd("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new Y9(t&&t.concurrentRequestLimit),this.Ja=new Yq,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}He=l5.prototype;He.ra=8;He.H=1;function I2(t){if(c5(t),t.H==3){var e=t.W++,n=Ra(t.I);if(An(n,"SID",t.K),An(n,"RID",e),An(n,"TYPE","terminate"),_g(t,n),e=new gg(t,t.l,e),e.L=2,e.A=o1(Ra(n)),n=!1,Tt.navigator&&Tt.navigator.sendBeacon)try{n=Tt.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&Tt.Image&&(new Image().src=e.A,n=!0),n||(e.g=y5(e.l,null),e.g.ha(e.A)),e.G=Date.now(),yg(e)}m5(t)}function u1(t){t.g&&(D2(t),t.g.cancel(),t.g=null)}function c5(t){u1(t),t.u&&(Tt.clearTimeout(t.u),t.u=null),O_(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&Tt.clearTimeout(t.m),t.m=null)}function h1(t){if(!Q9(t.i)&&!t.m){t.m=!0;var e=t.Na;Sm||I9(),Am||(Sm(),Am=!0),A2.add(e,t),t.C=0}}function sY(t,e){return Z9(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=pg(ri(t.Na,t,e),p5(t,t.C)),t.C++,!0)}He.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new gg(this,this.l,t);let s=this.s;if(this.U&&(s?(s=w9(s),E9(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=u5(this,i,e),n=Ra(this.I),An(n,"RID",t),An(n,"CVER",22),this.F&&An(n,"X-HTTP-Session-Id",this.F),_g(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(a5(s)))+"&"+e:this.o&&P2(n,this.o,s)),b2(this.i,i),this.bb&&An(n,"TYPE","init"),this.P?(An(n,"$req",e),An(n,"SID","null"),i.aa=!0,uT(i,n,null)):uT(i,n,e),this.H=2}}else this.H==3&&(t?ED(this,t):this.j.length==0||Q9(this.i)||ED(this))};function ED(t,e){var n;e?n=e.m:n=t.W++;const r=Ra(t.I);An(r,"SID",t.K),An(r,"RID",n),An(r,"AID",t.V),_g(t,r),t.o&&t.s&&P2(r,t.o,t.s),n=new gg(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=u5(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),b2(t.i,n),uT(n,r,e)}function _g(t,e){t.na&&g2(t.na,function(n,r){An(e,r,n)}),t.h&&X9({},function(n,r){An(e,r,n)})}function u5(t,e,n){n=Math.min(t.j.length,n);var r=t.h?ri(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let c=i[l].g;const u=i[l].map;if(c-=s,0>c)s=Math.max(0,i[l].g-100),a=!1;else try{Qq(u,o,"req"+c+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function h5(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Sm||I9(),Am||(Sm(),Am=!0),A2.add(e,t),t.A=0}}function L2(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=pg(ri(t.Ma,t),p5(t,t.A)),t.A++,!0)}He.Ma=function(){if(this.u=null,f5(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=pg(ri(this.jb,this),t)}};He.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Si(10),u1(this),f5(this))};function D2(t){t.B!=null&&(Tt.clearTimeout(t.B),t.B=null)}function f5(t){t.g=new gg(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Ra(t.wa);An(e,"RID","rpc"),An(e,"SID",t.K),An(e,"AID",t.V),An(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&An(e,"TO",t.qa),An(e,"TYPE","xmlhttp"),_g(t,e),t.o&&t.s&&P2(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=o1(Ra(e)),n.u=null,n.S=!0,H9(n,t)}He.ib=function(){this.v!=null&&(this.v=null,u1(this),L2(this),Si(19))};function O_(t){t.v!=null&&(Tt.clearTimeout(t.v),t.v=null)}function d5(t,e){var n=null;if(t.g==e){O_(t),D2(t),t.g=null;var r=2}else if(fT(t.i,e))n=e.F,e5(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=n1(),Vr(r,new F9(r,n)),h1(t)}else h5(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&sY(t,e)||r==2&&L2(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Hc(t,5);break;case 4:Hc(t,10);break;case 3:Hc(t,6);break;default:Hc(t,2)}}}function p5(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Hc(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=ri(t.pb,t);n||(n=new Zc("//www.google.com/images/cleardot.gif"),Tt.location&&Tt.location.protocol=="http"||B_(n,"https"),o1(n)),Zq(n.toString(),r)}else Si(2);t.H=0,t.h&&t.h.za(e),m5(t),c5(t)}He.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Si(2)):(this.l.info("Failed to ping google.com"),Si(1))};function m5(t){if(t.H=0,t.ma=[],t.h){const e=t5(t.i);(e.length!=0||t.j.length!=0)&&(pD(t.ma,e),pD(t.ma,t.j),t.i.i.length=0,p2(t.j),t.j.length=0),t.h.ya()}}function g5(t,e,n){var r=n instanceof Zc?Ra(n):new Zc(n);if(r.g!="")e&&(r.g=e+"."+r.g),N_(r,r.m);else{var i=Tt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Zc(null);r&&B_(s,r),e&&(s.g=e),i&&N_(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&An(r,n,e),An(r,"VER",t.ra),_g(t,r),r}function y5(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new Wn(new a1({ob:n})):new Wn(t.va),e.Oa(t.J),e}He.isActive=function(){return!!this.h&&this.h.isActive(this)};function v5(){}He=v5.prototype;He.Ba=function(){};He.Aa=function(){};He.za=function(){};He.ya=function(){};He.isActive=function(){return!0};He.Va=function(){};function F_(){if(Ef&&!(10<=Number(vq)))throw Error("Environmental error: no available transport.")}F_.prototype.g=function(t,e){return new rs(t,e)};function rs(t,e){Cr.call(this),this.g=new l5(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!_m(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!_m(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Zf(this)}br(rs,Cr);rs.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Si(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=g5(t,null,t.Y),h1(t)};rs.prototype.close=function(){I2(this.g)};rs.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=S2(t),t=n);e.j.push(new $q(e.fb++,t)),e.H==3&&h1(e)};rs.prototype.N=function(){this.g.h=null,delete this.j,I2(this.g),delete this.g,rs.$.N.call(this)};function _5(t){T2.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}br(_5,T2);function x5(){C2.call(this),this.status=1}br(x5,C2);function Zf(t){this.g=t}br(Zf,v5);Zf.prototype.Ba=function(){Vr(this.g,"a")};Zf.prototype.Aa=function(t){Vr(this.g,new _5(t))};Zf.prototype.za=function(t){Vr(this.g,new x5)};Zf.prototype.ya=function(){Vr(this.g,"b")};function oY(){this.blockSize=-1}function no(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}br(no,oY);no.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function dw(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}no.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)dw(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){dw(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){dw(this,r),i=0;break}}this.h=i,this.i+=e};no.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function fn(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var aY={};function B2(t){return-128<=t&&128>t?mq(t,function(e){return new fn([e|0],0>e?-1:0)}):new fn([t|0],0>t?-1:0)}function bo(t){if(isNaN(t)||!isFinite(t))return sf;if(0>t)return Fr(bo(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=dT;return new fn(e,0)}function S5(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Fr(S5(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=bo(Math.pow(e,8)),r=sf,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=bo(Math.pow(e,s)),r=r.R(s).add(bo(o))):(r=r.R(n),r=r.add(bo(o)))}return r}var dT=4294967296,sf=B2(0),pT=B2(1),MD=B2(16777216);He=fn.prototype;He.ea=function(){if(Ts(this))return-Fr(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:dT+r)*e,e*=dT}return t};He.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(pa(this))return"0";if(Ts(this))return"-"+Fr(this).toString(t);for(var e=bo(Math.pow(t,6)),n=this,r="";;){var i=U_(n,e).g;n=k_(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,pa(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};He.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function pa(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Ts(t){return t.h==-1}He.X=function(t){return t=k_(this,t),Ts(t)?-1:pa(t)?0:1};function Fr(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new fn(n,~t.h).add(pT)}He.abs=function(){return Ts(this)?Fr(this):this};He.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new fn(n,n[n.length-1]&-2147483648?-1:0)};function k_(t,e){return t.add(Fr(e))}He.R=function(t){if(pa(this)||pa(t))return sf;if(Ts(this))return Ts(t)?Fr(this).R(Fr(t)):Fr(Fr(this).R(t));if(Ts(t))return Fr(this.R(Fr(t)));if(0>this.X(MD)&&0>t.X(MD))return bo(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,l=t.D(i)&65535;n[2*r+2*i]+=o*l,f0(n,2*r+2*i),n[2*r+2*i+1]+=s*l,f0(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,f0(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,f0(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new fn(n,0)};function f0(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Ud(t,e){this.g=t,this.h=e}function U_(t,e){if(pa(e))throw Error("division by zero");if(pa(t))return new Ud(sf,sf);if(Ts(t))return e=U_(Fr(t),e),new Ud(Fr(e.g),Fr(e.h));if(Ts(e))return e=U_(t,Fr(e)),new Ud(Fr(e.g),e.h);if(30<t.g.length){if(Ts(t)||Ts(e))throw Error("slowDivide_ only works with positive integers.");for(var n=pT,r=e;0>=r.X(t);)n=TD(n),r=TD(r);var i=Qu(n,1),s=Qu(r,1);for(r=Qu(r,2),n=Qu(n,2);!pa(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Qu(r,1),n=Qu(n,1)}return e=k_(t,i.R(e)),new Ud(i,e)}for(i=sf;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=bo(n),o=s.R(e);Ts(o)||0<o.X(t);)n-=r,s=bo(n),o=s.R(e);pa(s)&&(s=pT),i=i.add(s),t=k_(t,o)}return new Ud(i,t)}He.gb=function(t){return U_(this,t).h};He.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new fn(n,this.h&t.h)};He.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new fn(n,this.h|t.h)};He.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new fn(n,this.h^t.h)};function TD(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new fn(n,t.h)}function Qu(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new fn(i,t.h)}F_.prototype.createWebChannel=F_.prototype.g;rs.prototype.send=rs.prototype.u;rs.prototype.open=rs.prototype.m;rs.prototype.close=rs.prototype.close;r1.NO_ERROR=0;r1.TIMEOUT=8;r1.HTTP_ERROR=6;k9.COMPLETE="complete";U9.EventType=mg;mg.OPEN="a";mg.CLOSE="b";mg.ERROR="c";mg.MESSAGE="d";Cr.prototype.listen=Cr.prototype.O;Wn.prototype.listenOnce=Wn.prototype.P;Wn.prototype.getLastError=Wn.prototype.Sa;Wn.prototype.getLastErrorCode=Wn.prototype.Ia;Wn.prototype.getStatus=Wn.prototype.da;Wn.prototype.getResponseJson=Wn.prototype.Wa;Wn.prototype.getResponseText=Wn.prototype.ja;Wn.prototype.send=Wn.prototype.ha;Wn.prototype.setWithCredentials=Wn.prototype.Oa;no.prototype.digest=no.prototype.l;no.prototype.reset=no.prototype.reset;no.prototype.update=no.prototype.j;fn.prototype.add=fn.prototype.add;fn.prototype.multiply=fn.prototype.R;fn.prototype.modulo=fn.prototype.gb;fn.prototype.compare=fn.prototype.X;fn.prototype.toNumber=fn.prototype.ea;fn.prototype.toString=fn.prototype.toString;fn.prototype.getBits=fn.prototype.D;fn.fromNumber=bo;fn.fromString=S5;var lY=function(){return new F_},cY=function(){return n1()},pw=r1,uY=k9,hY=Cu,CD={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},d0=U9,fY=Wn,dY=no,of=fn;const bD="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ei.UNAUTHENTICATED=new ei(null),ei.GOOGLE_CREDENTIALS=new ei("google-credentials-uid"),ei.FIRST_PARTY=new ei("first-party-uid"),ei.MOCK_USER=new ei("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ed="10.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gu=new d9("@firebase/firestore");function Vd(){return gu.logLevel}function We(t,...e){if(gu.logLevel<=Qt.DEBUG){const n=e.map(N2);gu.debug(`Firestore (${ed}): ${t}`,...n)}}function Uo(t,...e){if(gu.logLevel<=Qt.ERROR){const n=e.map(N2);gu.error(`Firestore (${ed}): ${t}`,...n)}}function Mf(t,...e){if(gu.logLevel<=Qt.WARN){const n=e.map(N2);gu.warn(`Firestore (${ed}): ${t}`,...n)}}function N2(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(t="Unexpected state"){const e=`FIRESTORE (${ed}) INTERNAL ASSERTION FAILED: `+t;throw Uo(e),new Error(e)}function ar(t,e){t||Ot()}function sn(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ke={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ut extends Yf{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A5{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pY{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ei.UNAUTHENTICATED))}shutdown(){}}class mY{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class gY{constructor(e){this.t=e,this.currentUser=ei.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Rl;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Rl,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{We("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(We("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Rl)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(We("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ar(typeof r.accessToken=="string"),new A5(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ar(e===null||typeof e=="string"),new ei(e)}}class yY{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ei.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class vY{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new yY(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ei.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _Y{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xY{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&We("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,We("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{We("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):We("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ar(typeof n.token=="string"),this.R=n.token,new _Y(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SY(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AY{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=SY(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function on(t,e){return t<e?-1:t>e?1:0}function Tf(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ut(ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ut(ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ut(ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ut(ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Fi.fromMillis(Date.now())}static fromDate(e){return Fi.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Fi(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?on(this.nanoseconds,e.nanoseconds):on(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Pt(e)}static min(){return new Pt(new Fi(0,0))}static max(){return new Pt(new Fi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ot(),r===void 0?r=e.length-n:r>e.length-n&&Ot(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Cm.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Cm?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Hn extends Cm{construct(e,n,r){return new Hn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ut(ke.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Hn(n)}static emptyPath(){return new Hn([])}}const wY=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vi extends Cm{construct(e,n,r){return new vi(e,n,r)}static isValidIdentifier(e){return wY.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new vi(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ut(ke.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ut(ke.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ut(ke.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ut(ke.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vi(n)}static emptyPath(){return new vi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.path=e}static fromPath(e){return new xt(Hn.fromString(e))}static fromName(e){return new xt(Hn.fromString(e).popFirst(5))}static empty(){return new xt(Hn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Hn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Hn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xt(new Hn(e.slice()))}}function EY(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Pt.fromTimestamp(r===1e9?new Fi(n+1,0):new Fi(n,r));return new Ul(i,xt.empty(),e)}function MY(t){return new Ul(t.readTime,t.key,-1)}class Ul{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ul(Pt.min(),xt.empty(),-1)}static max(){return new Ul(Pt.max(),xt.empty(),-1)}}function TY(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=xt.comparator(t.documentKey,e.documentKey),n!==0?n:on(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CY="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class bY{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O2(t){if(t.code!==ke.FAILED_PRECONDITION||t.message!==CY)throw t;We("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ot(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Ce((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Ce?n:Ce.resolve(n)}catch(n){return Ce.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Ce.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Ce.reject(n)}static resolve(e){return new Ce((n,r)=>{n(e)})}static reject(e){return new Ce((n,r)=>{r(e)})}static waitFor(e){return new Ce((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=Ce.resolve(!1);for(const r of e)n=n.next(i=>i?Ce.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new Ce((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,n){return new Ce((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Rl,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Ip(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=k2(r.target.error);this.V.reject(new Ip(e,i))}}static open(e,n,r,i){try{return new F2(n,e.transaction(i,r))}catch(s){throw new Ip(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(We("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new PY(n)}}class Gc{constructor(e,n,r){this.name=e,this.version=n,this.p=r,Gc.S(I_())===12.2&&Uo("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return We("SimpleDb","Removing database:",e),Nc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!h9())return!1;if(Gc.C())return!0;const e=I_(),n=Gc.S(e),r=0<n&&n<10,i=Gc.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async O(e){return this.db||(We("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new Ip(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new ut(ke.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new ut(ke.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Ip(e,o))},i.onupgradeneeded=s=>{We("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.N(o,i.transaction,s.oldVersion,this.version).next(()=>{We("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.O(e);const a=F2.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),Ce.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(We("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class RY{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Nc(this.k.delete())}}class Ip extends ut{constructor(e,n){super(ke.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function xg(t){return t.name==="IndexedDbTransactionError"}class PY{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(We("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(We("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Nc(r)}add(e){return We("SimpleDb","ADD",this.store.name,e,e),Nc(this.store.add(e))}get(e){return Nc(this.store.get(e)).next(n=>(n===void 0&&(n=null),We("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return We("SimpleDb","DELETE",this.store.name,e),Nc(this.store.delete(e))}count(){return We("SimpleDb","COUNT",this.store.name),Nc(this.store.count())}W(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new Ce((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.G(s,(a,l)=>{o.push(l)}).next(()=>o)}}j(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new Ce((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,n){We("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.G(i,n)}Z(e){const n=this.cursor({});return new Ce((r,i)=>{n.onerror=s=>{const o=k2(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){const r=[];return new Ce((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new RY(a),c=n(a.primaryKey,a.value,l);if(c instanceof Ce){const u=c.catch(f=>(l.done(),Ce.reject(f)));r.push(u)}l.isDone?i():l.$===null?a.continue():a.continue(l.$)}}).next(()=>Ce.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Nc(t){return new Ce((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=k2(r.target.error);n(i)}})}let RD=!1;function k2(t){const e=Gc.S(I_());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new ut("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return RD||(RD=!0,setTimeout(()=>{throw r},0)),r}}return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}U2._e=-1;function f1(t){return t==null}function mT(t){return t===0&&1/t==-1/0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PD(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function d1(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function IY(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e,n){this.comparator=e,this.root=n||Or.EMPTY}insert(e,n){return new Qn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Or.BLACK,null,null))}remove(e){return new Qn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Or.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new p0(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new p0(this.root,e,this.comparator,!1)}getReverseIterator(){return new p0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new p0(this.root,e,this.comparator,!0)}}class p0{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Or{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Or.RED,this.left=i??Or.EMPTY,this.right=s??Or.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Or(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Or.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Or.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Or.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Or.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ot();const e=this.left.check();if(e!==this.right.check())throw Ot();return e+(this.isRed()?0:1)}}Or.EMPTY=null,Or.RED=!0,Or.BLACK=!1;Or.EMPTY=new class{constructor(){this.size=0}get key(){throw Ot()}get value(){throw Ot()}get color(){throw Ot()}get left(){throw Ot()}get right(){throw Ot()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Or(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e){this.comparator=e,this.data=new Qn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ID(this.data.getIterator())}getIteratorFrom(e){return new ID(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof zr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new zr(this.comparator);return n.data=e,n}}class ID{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e){this.fields=e,e.sort(vi.comparator)}static empty(){return new pl([])}unionWith(e){let n=new zr(vi.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new pl(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Tf(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w5 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new w5("Invalid base64 string: "+s):s}}(e);return new ai(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new ai(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return on(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ai.EMPTY_BYTE_STRING=new ai("");const LY=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vl(t){if(ar(!!t),typeof t=="string"){let e=0;const n=LY.exec(t);if(ar(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ir(t.seconds),nanos:ir(t.nanos)}}function ir(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function yu(t){return typeof t=="string"?ai.fromBase64String(t):ai.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V2(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function z2(t){const e=t.mapValue.fields.__previous_value__;return V2(e)?z2(e):e}function bm(t){const e=Vl(t.mapValue.fields.__local_write_time__.timestampValue);return new Fi(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DY{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Rm{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Rm("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Rm&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function vu(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?V2(t)?4:BY(t)?9007199254740991:10:Ot()}function Vo(t,e){if(t===e)return!0;const n=vu(t);if(n!==vu(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return bm(t).isEqual(bm(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Vl(i.timestampValue),a=Vl(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return yu(i.bytesValue).isEqual(yu(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return ir(i.geoPointValue.latitude)===ir(s.geoPointValue.latitude)&&ir(i.geoPointValue.longitude)===ir(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ir(i.integerValue)===ir(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=ir(i.doubleValue),a=ir(s.doubleValue);return o===a?mT(o)===mT(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Tf(t.arrayValue.values||[],e.arrayValue.values||[],Vo);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(PD(o)!==PD(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Vo(o[l],a[l])))return!1;return!0}(t,e);default:return Ot()}}function Pm(t,e){return(t.values||[]).find(n=>Vo(n,e))!==void 0}function Cf(t,e){if(t===e)return 0;const n=vu(t),r=vu(e);if(n!==r)return on(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return on(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=ir(s.integerValue||s.doubleValue),l=ir(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return LD(t.timestampValue,e.timestampValue);case 4:return LD(bm(t),bm(e));case 5:return on(t.stringValue,e.stringValue);case 6:return function(s,o){const a=yu(s),l=yu(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=on(a[c],l[c]);if(u!==0)return u}return on(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=on(ir(s.latitude),ir(o.latitude));return a!==0?a:on(ir(s.longitude),ir(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const u=Cf(a[c],l[c]);if(u)return u}return on(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===m0.mapValue&&o===m0.mapValue)return 0;if(s===m0.mapValue)return 1;if(o===m0.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let f=0;f<l.length&&f<u.length;++f){const p=on(l[f],u[f]);if(p!==0)return p;const m=Cf(a[l[f]],c[u[f]]);if(m!==0)return m}return on(l.length,u.length)}(t.mapValue,e.mapValue);default:throw Ot()}}function LD(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return on(t,e);const n=Vl(t),r=Vl(e),i=on(n.seconds,r.seconds);return i!==0?i:on(n.nanos,r.nanos)}function bf(t){return gT(t)}function gT(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Vl(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return yu(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return xt.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=gT(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${gT(n.fields[o])}`;return i+"}"}(t.mapValue):Ot()}function yT(t){return!!t&&"integerValue"in t}function H2(t){return!!t&&"arrayValue"in t}function DD(t){return!!t&&"nullValue"in t}function BD(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function mw(t){return!!t&&"mapValue"in t}function Lp(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return d1(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Lp(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Lp(t.arrayValue.values[n]);return e}return Object.assign({},t)}function BY(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e){this.value=e}static empty(){return new To({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!mw(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Lp(n)}setAll(e){let n=vi.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Lp(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());mw(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Vo(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];mw(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){d1(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new To(Lp(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ni(e,0,Pt.min(),Pt.min(),Pt.min(),To.empty(),0)}static newFoundDocument(e,n,r,i){return new ni(e,1,n,Pt.min(),r,i,0)}static newNoDocument(e,n){return new ni(e,2,n,Pt.min(),Pt.min(),To.empty(),0)}static newUnknownDocument(e,n){return new ni(e,3,n,Pt.min(),Pt.min(),To.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Pt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=To.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=To.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ni&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ni(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(e,n){this.position=e,this.inclusive=n}}function ND(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=xt.comparator(xt.fromName(o.referenceValue),n.key):r=Cf(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function OD(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Vo(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e,n="asc"){this.field=e,this.dir=n}}function NY(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E5{}class dr extends E5{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new FY(e,n,r):n==="array-contains"?new VY(e,r):n==="in"?new zY(e,r):n==="not-in"?new HY(e,r):n==="array-contains-any"?new GY(e,r):new dr(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new kY(e,r):new UY(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Cf(n,this.value)):n!==null&&vu(this.value)===vu(n)&&this.matchesComparison(Cf(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ot()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class zo extends E5{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new zo(e,n)}matches(e){return M5(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function M5(t){return t.op==="and"}function T5(t){return OY(t)&&M5(t)}function OY(t){for(const e of t.filters)if(e instanceof zo)return!1;return!0}function vT(t){if(t instanceof dr)return t.field.canonicalString()+t.op.toString()+bf(t.value);if(T5(t))return t.filters.map(e=>vT(e)).join(",");{const e=t.filters.map(n=>vT(n)).join(",");return`${t.op}(${e})`}}function C5(t,e){return t instanceof dr?function(r,i){return i instanceof dr&&r.op===i.op&&r.field.isEqual(i.field)&&Vo(r.value,i.value)}(t,e):t instanceof zo?function(r,i){return i instanceof zo&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&C5(o,i.filters[a]),!0):!1}(t,e):void Ot()}function b5(t){return t instanceof dr?function(n){return`${n.field.canonicalString()} ${n.op} ${bf(n.value)}`}(t):t instanceof zo?function(n){return n.op.toString()+" {"+n.getFilters().map(b5).join(" ,")+"}"}(t):"Filter"}class FY extends dr{constructor(e,n,r){super(e,n,r),this.key=xt.fromName(r.referenceValue)}matches(e){const n=xt.comparator(e.key,this.key);return this.matchesComparison(n)}}class kY extends dr{constructor(e,n){super(e,"in",n),this.keys=R5("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class UY extends dr{constructor(e,n){super(e,"not-in",n),this.keys=R5("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function R5(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>xt.fromName(r.referenceValue))}class VY extends dr{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return H2(n)&&Pm(n.arrayValue,this.value)}}class zY extends dr{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Pm(this.value.arrayValue,n)}}class HY extends dr{constructor(e,n){super(e,"not-in",n)}matches(e){if(Pm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Pm(this.value.arrayValue,n)}}class GY extends dr{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!H2(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Pm(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jY{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function FD(t,e=null,n=[],r=[],i=null,s=null,o=null){return new jY(t,e,n,r,i,s,o)}function G2(t){const e=sn(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>vT(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),f1(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>bf(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>bf(r)).join(",")),e.ce=n}return e.ce}function j2(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!NY(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!C5(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!OD(t.startAt,e.startAt)&&OD(t.endAt,e.endAt)}function _T(t){return xt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function WY(t,e,n,r,i,s,o,a){return new p1(t,e,n,r,i,s,o,a)}function P5(t){return new p1(t)}function kD(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function XY(t){return t.collectionGroup!==null}function Dp(t){const e=sn(t);if(e.le===null){e.le=[];const n=new Set;for(const s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new zr(vi.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new z_(s,r))}),n.has(vi.keyField().canonicalString())||e.le.push(new z_(vi.keyField(),r))}return e.le}function Do(t){const e=sn(t);return e.he||(e.he=KY(e,Dp(t))),e.he}function KY(t,e){if(t.limitType==="F")return FD(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new z_(i.field,s)});const n=t.endAt?new V_(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new V_(t.startAt.position,t.startAt.inclusive):null;return FD(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function xT(t,e,n){return new p1(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function m1(t,e){return j2(Do(t),Do(e))&&t.limitType===e.limitType}function I5(t){return`${G2(Do(t))}|lt:${t.limitType}`}function wh(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>b5(i)).join(", ")}]`),f1(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>bf(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>bf(i)).join(",")),`Target(${r})`}(Do(t))}; limitType=${t.limitType})`}function g1(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):xt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Dp(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=ND(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Dp(r),i)||r.endAt&&!function(o,a,l){const c=ND(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Dp(r),i))}(t,e)}function $Y(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function L5(t){return(e,n)=>{let r=!1;for(const i of Dp(t)){const s=JY(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function JY(t,e,n){const r=t.field.isKeyField()?xt.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Cf(l,c):Ot()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ot()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){d1(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return IY(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qY=new Qn(xt.comparator);function zl(){return qY}const D5=new Qn(xt.comparator);function gp(...t){let e=D5;for(const n of t)e=e.insert(n.key,n);return e}function YY(t){let e=D5;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function jc(){return Bp()}function B5(){return Bp()}function Bp(){return new td(t=>t.toString(),(t,e)=>t.isEqual(e))}const QY=new zr(xt.comparator);function Zt(...t){let e=QY;for(const n of t)e=e.add(n);return e}const ZY=new zr(on);function eQ(){return ZY}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tQ(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mT(e)?"-0":e}}function nQ(t){return{integerValue:""+t}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(){this._=void 0}}function rQ(t,e,n){return t instanceof ST?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&V2(s)&&(s=z2(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof H_?N5(t,e):t instanceof G_?O5(t,e):function(i,s){const o=sQ(i,s),a=UD(o)+UD(i.Ie);return yT(o)&&yT(i.Ie)?nQ(a):tQ(i.serializer,a)}(t,e)}function iQ(t,e,n){return t instanceof H_?N5(t,e):t instanceof G_?O5(t,e):n}function sQ(t,e){return t instanceof AT?function(r){return yT(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class ST extends y1{}class H_ extends y1{constructor(e){super(),this.elements=e}}function N5(t,e){const n=F5(e);for(const r of t.elements)n.some(i=>Vo(i,r))||n.push(r);return{arrayValue:{values:n}}}class G_ extends y1{constructor(e){super(),this.elements=e}}function O5(t,e){let n=F5(e);for(const r of t.elements)n=n.filter(i=>!Vo(i,r));return{arrayValue:{values:n}}}class AT extends y1{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function UD(t){return ir(t.integerValue||t.doubleValue)}function F5(t){return H2(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function oQ(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof H_&&i instanceof H_||r instanceof G_&&i instanceof G_?Tf(r.elements,i.elements,Vo):r instanceof AT&&i instanceof AT?Vo(r.Ie,i.Ie):r instanceof ST&&i instanceof ST}(t.transform,e.transform)}class eu{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new eu}static exists(e){return new eu(void 0,e)}static updateTime(e){return new eu(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fv(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class W2{}function k5(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new lQ(t.key,eu.none()):new X2(t.key,t.data,eu.none());{const n=t.data,r=To.empty();let i=new zr(vi.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new v1(t.key,r,new pl(i.toArray()),eu.none())}}function aQ(t,e,n){t instanceof X2?function(i,s,o){const a=i.value.clone(),l=zD(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof v1?function(i,s,o){if(!Fv(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=zD(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(U5(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Np(t,e,n,r){return t instanceof X2?function(s,o,a,l){if(!Fv(s.precondition,o))return a;const c=s.value.clone(),u=HD(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof v1?function(s,o,a,l){if(!Fv(s.precondition,o))return a;const c=HD(s.fieldTransforms,l,o),u=o.data;return u.setAll(U5(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return Fv(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function VD(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Tf(r,i,(s,o)=>oQ(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class X2 extends W2{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class v1 extends W2{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function U5(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function zD(t,e,n){const r=new Map;ar(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,iQ(o,a,n[i]))}return r}function HD(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,rQ(s,o,e))}return r}class lQ extends W2{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cQ{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&aQ(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Np(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Np(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=B5();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=k5(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Pt.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Zt())}isEqual(e){return this.batchId===e.batchId&&Tf(this.mutations,e.mutations,(n,r)=>VD(n,r))&&Tf(this.baseMutations,e.baseMutations,(n,r)=>VD(n,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uQ{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hQ{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nr,Kt;function V5(t){if(t===void 0)return Uo("GRPC error has no .code"),ke.UNKNOWN;switch(t){case nr.OK:return ke.OK;case nr.CANCELLED:return ke.CANCELLED;case nr.UNKNOWN:return ke.UNKNOWN;case nr.DEADLINE_EXCEEDED:return ke.DEADLINE_EXCEEDED;case nr.RESOURCE_EXHAUSTED:return ke.RESOURCE_EXHAUSTED;case nr.INTERNAL:return ke.INTERNAL;case nr.UNAVAILABLE:return ke.UNAVAILABLE;case nr.UNAUTHENTICATED:return ke.UNAUTHENTICATED;case nr.INVALID_ARGUMENT:return ke.INVALID_ARGUMENT;case nr.NOT_FOUND:return ke.NOT_FOUND;case nr.ALREADY_EXISTS:return ke.ALREADY_EXISTS;case nr.PERMISSION_DENIED:return ke.PERMISSION_DENIED;case nr.FAILED_PRECONDITION:return ke.FAILED_PRECONDITION;case nr.ABORTED:return ke.ABORTED;case nr.OUT_OF_RANGE:return ke.OUT_OF_RANGE;case nr.UNIMPLEMENTED:return ke.UNIMPLEMENTED;case nr.DATA_LOSS:return ke.DATA_LOSS;default:return Ot()}}(Kt=nr||(nr={}))[Kt.OK=0]="OK",Kt[Kt.CANCELLED=1]="CANCELLED",Kt[Kt.UNKNOWN=2]="UNKNOWN",Kt[Kt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Kt[Kt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Kt[Kt.NOT_FOUND=5]="NOT_FOUND",Kt[Kt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Kt[Kt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Kt[Kt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Kt[Kt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Kt[Kt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Kt[Kt.ABORTED=10]="ABORTED",Kt[Kt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Kt[Kt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Kt[Kt.INTERNAL=13]="INTERNAL",Kt[Kt.UNAVAILABLE=14]="UNAVAILABLE",Kt[Kt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fQ(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dQ=new of([4294967295,4294967295],0);function GD(t){const e=fQ().encode(t),n=new dY;return n.update(e),new Uint8Array(n.digest())}function jD(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new of([n,r],0),new of([i,s],0)]}class K2{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new yp(`Invalid padding: ${n}`);if(r<0)throw new yp(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new yp(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new yp(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=of.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(of.fromNumber(r)));return i.compare(dQ)===1&&(i=new of([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=GD(e),[r,i]=jD(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new K2(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const n=GD(e),[r,i]=jD(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Re(o)}}Re(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class yp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Sg.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new _1(Pt.min(),i,new Qn(on),zl(),Zt())}}class Sg{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Sg(r,n,Zt(),Zt(),Zt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}}class z5{constructor(e,n){this.targetId=e,this.fe=n}}class H5{constructor(e,n,r=ai.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class WD{constructor(){this.ge=0,this.pe=KD(),this.ye=ai.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Zt(),n=Zt(),r=Zt();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Ot()}}),new Sg(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=KD()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,ar(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class pQ{constructor(e){this.Le=e,this.ke=new Map,this.qe=zl(),this.Qe=XD(),this.Ke=new Qn(on)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:Ot()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){const s=i.target;if(_T(s))if(r===0){const o=new xt(s.path);this.We(n,o,ni.newNoDocument(o,Pt.min()))}else ar(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=yu(r).toUint8Array()}catch(l){if(l instanceof w5)return Mf("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new K2(o,i,s)}catch(l){return Mf(l instanceof yp?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){const n=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&_T(a.target)){const l=new xt(a.target.path);this.qe.get(l)!==null||this.st(o,l)||this.We(o,l,ni.newNoDocument(l,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=Zt();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));const i=new _1(e,n,this.Ke,this.qe,r);return this.qe=zl(),this.Qe=XD(),this.Ke=new Qn(on),i}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new WD,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new zr(on),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||We("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new WD),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function XD(){return new Qn(xt.comparator)}function KD(){return new Qn(xt.comparator)}const mQ={asc:"ASCENDING",desc:"DESCENDING"},gQ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yQ={and:"AND",or:"OR"};class vQ{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function wT(t,e){return t.useProto3Json||f1(e)?e:{value:e}}function _Q(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xQ(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function af(t){return ar(!!t),Pt.fromTimestamp(function(n){const r=Vl(n);return new Fi(r.seconds,r.nanos)}(t))}function SQ(t,e){return ET(t,e).canonicalString()}function ET(t,e){const n=function(i){return new Hn(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function G5(t){const e=Hn.fromString(t);return ar($5(e)),e}function gw(t,e){const n=G5(e);if(n.get(1)!==t.databaseId.projectId)throw new ut(ke.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ut(ke.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new xt(W5(n))}function j5(t,e){return SQ(t.databaseId,e)}function AQ(t){const e=G5(t);return e.length===4?Hn.emptyPath():W5(e)}function $D(t){return new Hn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function W5(t){return ar(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function wQ(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ot()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(ar(u===void 0||typeof u=="string"),ai.fromBase64String(u||"")):(ar(u===void 0||u instanceof Uint8Array),ai.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?ke.UNKNOWN:V5(c.code);return new ut(u,c.message||"")}(o);n=new H5(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=gw(t,r.document.name),s=af(r.document.updateTime),o=r.document.createTime?af(r.document.createTime):Pt.min(),a=new To({mapValue:{fields:r.document.fields}}),l=ni.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new kv(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=gw(t,r.document),s=r.readTime?af(r.readTime):Pt.min(),o=ni.newNoDocument(i,s),a=r.removedTargetIds||[];n=new kv([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=gw(t,r.document),s=r.removedTargetIds||[];n=new kv([],s,i,null)}else{if(!("filter"in e))return Ot();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new hQ(i,s),a=r.targetId;n=new z5(a,o)}}return n}function EQ(t,e){return{documents:[j5(t,e.path)]}}function MQ(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=j5(t,i);const s=function(c){if(c.length!==0)return K5(zo.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(u=>function(p){return{field:Eh(p.field),direction:bQ(p.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=wT(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ut:n,parent:i}}function TQ(t){let e=AQ(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ar(r===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(f){const p=X5(f);return p instanceof zo&&T5(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(y){return new z_(Mh(y.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,f1(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(f){const p=!!f.before,m=f.values||[];return new V_(m,p)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const p=!f.before,m=f.values||[];return new V_(m,p)}(n.endAt)),WY(e,i,o,s,a,"F",l,c)}function CQ(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ot()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function X5(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Mh(n.unaryFilter.field);return dr.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Mh(n.unaryFilter.field);return dr.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Mh(n.unaryFilter.field);return dr.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Mh(n.unaryFilter.field);return dr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ot()}}(t):t.fieldFilter!==void 0?function(n){return dr.create(Mh(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ot()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return zo.create(n.compositeFilter.filters.map(r=>X5(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ot()}}(n.compositeFilter.op))}(t):Ot()}function bQ(t){return mQ[t]}function RQ(t){return gQ[t]}function PQ(t){return yQ[t]}function Eh(t){return{fieldPath:t.canonicalString()}}function Mh(t){return vi.fromServerFormat(t.fieldPath)}function K5(t){return t instanceof dr?function(n){if(n.op==="=="){if(BD(n.value))return{unaryFilter:{field:Eh(n.field),op:"IS_NAN"}};if(DD(n.value))return{unaryFilter:{field:Eh(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(BD(n.value))return{unaryFilter:{field:Eh(n.field),op:"IS_NOT_NAN"}};if(DD(n.value))return{unaryFilter:{field:Eh(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Eh(n.field),op:RQ(n.op),value:n.value}}}(t):t instanceof zo?function(n){const r=n.getFilters().map(i=>K5(i));return r.length===1?r[0]:{compositeFilter:{op:PQ(n.op),filters:r}}}(t):Ot()}function $5(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e,n,r,i,s=Pt.min(),o=Pt.min(),a=ai.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ml(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ml(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ml(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ml(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IQ{constructor(e){this.ct=e}}function LQ(t){const e=TQ({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?xT(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DQ{constructor(){this._n=new BQ}addToCollectionParentIndex(e,n){return this._n.add(n),Ce.resolve()}getCollectionParents(e,n){return Ce.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return Ce.resolve()}deleteFieldIndex(e,n){return Ce.resolve()}deleteAllFieldIndexes(e){return Ce.resolve()}createTargetIndexes(e,n){return Ce.resolve()}getDocumentsMatchingTarget(e,n){return Ce.resolve(null)}getIndexType(e,n){return Ce.resolve(0)}getFieldIndexes(e,n){return Ce.resolve([])}getNextCollectionGroupToUpdate(e){return Ce.resolve(null)}getMinOffset(e,n){return Ce.resolve(Ul.min())}getMinOffsetFromCollectionGroup(e,n){return Ce.resolve(Ul.min())}updateCollectionGroup(e,n,r){return Ce.resolve()}updateIndexEntries(e,n){return Ce.resolve()}}class BQ{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new zr(Hn.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new zr(Hn.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Rf(0)}static Bn(){return new Rf(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NQ{constructor(){this.changes=new td(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ni.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Ce.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OQ{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FQ{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Np(r.mutation,i,pl.empty(),Fi.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Zt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Zt()){const i=jc();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=gp();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=jc();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Zt()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=zl();const o=Bp(),a=function(){return Bp()}();return n.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof v1)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),Np(u.mutation,c,u.mutation.getFieldMask(),Fi.now())):o.set(c.key,pl.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var f;return a.set(c,new OQ(u,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Bp();let i=new Qn((o,a)=>o-a),s=Zt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||pl.empty();u=a.applyToLocalView(c,u),r.set(l,u);const f=(i.get(a.batchId)||Zt()).add(l);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,f=B5();u.forEach(p=>{if(!s.has(p)){const m=k5(n.get(p),r.get(p));m!==null&&f.set(p,m),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return Ce.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return xt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):XY(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):Ce.resolve(jc());let a=-1,l=s;return o.next(c=>Ce.forEach(c,(u,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(u)?Ce.resolve():this.remoteDocumentCache.getEntry(e,u).next(p=>{l=l.insert(u,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Zt())).next(u=>({batchId:a,changes:YY(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new xt(n)).next(r=>{let i=gp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=gp();return this.indexManager.getCollectionParents(e,s).next(a=>Ce.forEach(a,l=>{const c=function(f,p){return new p1(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,ni.newInvalidDocument(u)))});let a=gp();return o.forEach((l,c)=>{const u=s.get(l);u!==void 0&&Np(u.mutation,c,pl.empty(),Fi.now()),g1(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kQ{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return Ce.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:af(i.createTime)}}(n)),Ce.resolve()}getNamedQuery(e,n){return Ce.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:LQ(i.bundledQuery),readTime:af(i.readTime)}}(n)),Ce.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UQ{constructor(){this.overlays=new Qn(xt.comparator),this.hr=new Map}getOverlay(e,n){return Ce.resolve(this.overlays.get(n))}getOverlays(e,n){const r=jc();return Ce.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),Ce.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),Ce.resolve()}getOverlaysForCollection(e,n,r){const i=jc(),s=n.length+1,o=new xt(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return Ce.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Qn((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=jc(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=jc(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return Ce.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new uQ(n,r));let s=this.hr.get(n);s===void 0&&(s=Zt(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(){this.Pr=new zr(wr.Ir),this.Tr=new zr(wr.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new wr(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new wr(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new xt(new Hn([])),r=new wr(n,e),i=new wr(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new xt(new Hn([])),r=new wr(n,e),i=new wr(n,e+1);let s=Zt();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new wr(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class wr{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return xt.comparator(e.key,n.key)||on(e.pr,n.pr)}static Er(e,n){return on(e.pr,n.pr)||xt.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VQ{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new zr(wr.Ir)}checkEmpty(e){return Ce.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new cQ(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new wr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Ce.resolve(o)}lookupMutationBatch(e,n){return Ce.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.br(r),s=i<0?0:i;return Ce.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ce.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return Ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new wr(n,0),i=new wr(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),Ce.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new zr(on);return n.forEach(i=>{const s=new wr(i,0),o=new wr(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),Ce.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;xt.isDocumentKey(s)||(s=s.child(""));const o=new wr(new xt(s),0);let a=new zr(on);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.pr)),!0)},o),Ce.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ar(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return Ce.forEach(n.mutations,i=>{const s=new wr(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new wr(n,0),i=this.wr.firstAfterOrEqual(r);return Ce.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ce.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zQ{constructor(e){this.vr=e,this.docs=function(){return new Qn(xt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Ce.resolve(r?r.document.mutableCopy():ni.newInvalidDocument(n))}getEntries(e,n){let r=zl();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ni.newInvalidDocument(i))}),Ce.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=zl();const o=n.path,a=new xt(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||TY(MY(u),r)<=0||(i.has(u.key)||g1(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return Ce.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Ot()}Fr(e,n){return Ce.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new HQ(this)}getSize(e){return Ce.resolve(this.size)}}class HQ extends NQ{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),Ce.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GQ{constructor(e){this.persistence=e,this.Mr=new td(n=>G2(n),j2),this.lastRemoteSnapshotVersion=Pt.min(),this.highestTargetId=0,this.Or=0,this.Nr=new $2,this.targetCount=0,this.Br=Rf.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),Ce.resolve()}getLastRemoteSnapshotVersion(e){return Ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ce.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),Ce.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),Ce.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Br=new Rf(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,Ce.resolve()}updateTargetData(e,n){return this.qn(n),Ce.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,Ce.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Ce.waitFor(s).next(()=>i)}getTargetCount(e){return Ce.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return Ce.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),Ce.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),Ce.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),Ce.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return Ce.resolve(r)}containsKey(e,n){return Ce.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jQ{constructor(e,n){this.Lr={},this.overlays={},this.kr=new U2(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new GQ(this),this.indexManager=new DQ,this.remoteDocumentCache=function(i){return new zQ(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new IQ(n),this.$r=new kQ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new UQ,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new VQ(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){We("MemoryPersistence","Starting transaction:",e);const i=new WQ(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return Ce.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}}class WQ extends bY{constructor(e){super(),this.currentSequenceNumber=e}}class J2{constructor(e){this.persistence=e,this.zr=new $2,this.jr=null}static Hr(e){return new J2(e)}get Jr(){if(this.jr)return this.jr;throw Ot()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),Ce.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),Ce.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),Ce.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ce.forEach(this.Jr,r=>{const i=xt.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,Pt.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return Ce.or([()=>Ce.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=Zt(),i=Zt();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new q2(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XQ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KQ{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return $$()?8:Gc.v(I_())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new XQ;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(Vd()<=Qt.DEBUG&&We("QueryEngine","SDK will not create cache indexes for query:",wh(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Ce.resolve()):(Vd()<=Qt.DEBUG&&We("QueryEngine","Query:",wh(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Vd()<=Qt.DEBUG&&We("QueryEngine","The SDK decides to create cache indexes for query:",wh(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Do(n))):Ce.resolve())}ji(e,n){if(kD(n))return Ce.resolve(null);let r=Do(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=xT(n,null,"F"),r=Do(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Zt(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Zi(n,a);return this.Xi(n,c,o,l.readTime)?this.ji(e,xT(n,null,"F")):this.es(e,c,n,l)}))})))}Hi(e,n,r,i){return kD(n)||i.isEqual(Pt.min())?Ce.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?Ce.resolve(null):(Vd()<=Qt.DEBUG&&We("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),wh(n)),this.es(e,o,n,EY(i,-1)).next(a=>a))})}Zi(e,n){let r=new zr(L5(e));return n.forEach((i,s)=>{g1(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return Vd()<=Qt.DEBUG&&We("QueryEngine","Using full collection scan to execute query:",wh(n)),this.zi.getDocumentsMatchingQuery(e,n,Ul.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Q{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new Qn(on),this.rs=new td(s=>G2(s),j2),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new FQ(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function JQ(t,e,n,r){return new $Q(t,e,n,r)}async function J5(t,e){const n=sn(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Zt();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})}function q5(t){const e=sn(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function qQ(t,e){const n=sn(t),r=e.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];e.targetChanges.forEach((u,f)=>{const p=i.get(f);if(!p)return;a.push(n.Qr.removeMatchingKeys(s,u.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,u.addedDocuments,f)));let m=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(ai.EMPTY_BYTE_STRING,Pt.min()).withLastLimboFreeSnapshotVersion(Pt.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,r)),i=i.insert(f,m),function(S,v,g){return S.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:g.addedDocuments.size+g.modifiedDocuments.size+g.removedDocuments.size>0}(p,m,u)&&a.push(n.Qr.updateTargetData(s,m))});let l=zl(),c=Zt();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(YQ(s,o,e.documentUpdates).next(u=>{l=u.cs,c=u.ls})),!r.isEqual(Pt.min())){const u=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return Ce.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.ns=i,s))}function YQ(t,e,n){let r=Zt(),i=Zt();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=zl();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Pt.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):We("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:i}})}function QQ(t,e){const n=sn(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,Ce.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new ml(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}async function MT(t,e,n){const r=sn(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!xg(o))throw o;We("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}function JD(t,e,n){const r=sn(t);let i=Pt.min(),s=Zt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const f=sn(l),p=f.rs.get(u);return p!==void 0?Ce.resolve(f.ns.get(p)):f.Qr.getTargetData(c,u)}(r,o,Do(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:Pt.min(),n?s:Zt())).next(a=>(ZQ(r,$Y(e),a),{documents:a,hs:s})))}function ZQ(t,e,n){let r=t.ss.get(e)||Pt.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}class qD{constructor(){this.activeTargetIds=eQ()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class eZ{constructor(){this.no=new qD,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new qD,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tZ{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){We("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){We("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let g0=null;function yw(){return g0===null?g0=function(){return 268435456+Math.round(2147483648*Math.random())}():g0++,"0x"+g0.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nZ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rZ{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr="WebChannelConnection";class iZ extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${s}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get wo(){return!1}So(n,r,i,s,o){const a=yw(),l=this.bo(n,r.toUriEncodedString());We("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,s,o),this.Co(n,l,c,i).then(u=>(We("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Mf("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",i),u})}vo(n,r,i,s,o,a){return this.So(n,r,i,s,o)}Do(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ed}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}bo(n,r){const i=nZ[n];return`${this.fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){const s=yw();return new Promise((o,a)=>{const l=new fY;l.setWithCredentials(!0),l.listenOnce(uY.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case pw.NO_ERROR:const u=l.getResponseJson();We(qr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case pw.TIMEOUT:We(qr,`RPC '${e}' ${s} timed out`),a(new ut(ke.DEADLINE_EXCEEDED,"Request time out"));break;case pw.HTTP_ERROR:const f=l.getStatus();if(We(qr,`RPC '${e}' ${s} failed with status:`,f,"response text:",l.getResponseText()),f>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const y=function(v){const g=v.toLowerCase().replace(/_/g,"-");return Object.values(ke).indexOf(g)>=0?g:ke.UNKNOWN}(m.status);a(new ut(y,m.message))}else a(new ut(ke.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ut(ke.UNAVAILABLE,"Connection failed."));break;default:Ot()}}finally{We(qr,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);We(qr,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Fo(e,n,r){const i=yw(),s=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=lY(),a=cY(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=s.join("");We(qr,`Creating RPC '${e}' stream ${i}: ${u}`,l);const f=o.createWebChannel(u,l);let p=!1,m=!1;const y=new rZ({lo:v=>{m?We(qr,`Not sending because RPC '${e}' stream ${i} is closed:`,v):(p||(We(qr,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),We(qr,`RPC '${e}' stream ${i} sending:`,v),f.send(v))},ho:()=>f.close()}),S=(v,g,_)=>{v.listen(g,A=>{try{_(A)}catch(E){setTimeout(()=>{throw E},0)}})};return S(f,d0.EventType.OPEN,()=>{m||We(qr,`RPC '${e}' stream ${i} transport opened.`)}),S(f,d0.EventType.CLOSE,()=>{m||(m=!0,We(qr,`RPC '${e}' stream ${i} transport closed`),y.Vo())}),S(f,d0.EventType.ERROR,v=>{m||(m=!0,Mf(qr,`RPC '${e}' stream ${i} transport errored:`,v),y.Vo(new ut(ke.UNAVAILABLE,"The operation could not be completed")))}),S(f,d0.EventType.MESSAGE,v=>{var g;if(!m){const _=v.data[0];ar(!!_);const A=_,E=A.error||((g=A[0])===null||g===void 0?void 0:g.error);if(E){We(qr,`RPC '${e}' stream ${i} received error:`,E);const b=E.status;let C=function(N){const T=nr[N];if(T!==void 0)return V5(T)}(b),P=E.message;C===void 0&&(C=ke.INTERNAL,P="Unknown error status: "+b+" with message "+E.message),m=!0,y.Vo(new ut(C,P)),f.close()}else We(qr,`RPC '${e}' stream ${i} received:`,_),y.mo(_)}}),S(a,hY.STAT_EVENT,v=>{v.stat===CD.PROXY?We(qr,`RPC '${e}' stream ${i} detected buffering proxy`):v.stat===CD.NOPROXY&&We(qr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.Ro()},0),y}}function vw(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y5(t){return new vQ(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q5{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=s,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),i=Math.max(0,n-r);i>0&&We("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sZ{constructor(e,n,r,i,s,o,a,l){this.oi=e,this.$o=r,this.Uo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new Q5(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,n){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===ke.RESOURCE_EXHAUSTED?(Uo(n.toString()),Uo("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===ke.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(n)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{const i=new ut(ke.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){const r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(e){return We("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(We("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class oZ extends sZ{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();const n=wQ(this.serializer,e),r=function(s){if(!("targetChange"in s))return Pt.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Pt.min():o.readTime?af(o.readTime):Pt.min()}(e);return this.listener.u_(n,r)}c_(e){const n={};n.database=$D(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=_T(l)?{documents:EQ(s,l)}:{query:MQ(s,l).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=xQ(s,o.resumeToken);const c=wT(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Pt.min())>0){a.readTime=_Q(s,o.snapshotVersion.toTimestamp());const c=wT(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=CQ(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){const n={};n.database=$D(this.serializer),n.removeTarget=e,this.t_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aZ extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new ut(ke.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,ET(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ut(ke.UNKNOWN,s.toString())})}vo(e,n,r,i,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,ET(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ut(ke.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class lZ{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Uo(n),this.g_=!1):We("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cZ{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=s,this.M_.io(o=>{r.enqueueAndForget(async()=>{wg(this)&&(We("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=sn(l);c.v_.add(4),await Ag(c),c.x_.set("Unknown"),c.v_.delete(4),await x1(c)}(this))})}),this.x_=new lZ(r,i)}}async function x1(t){if(wg(t))for(const e of t.F_)await e(!0)}async function Ag(t){for(const e of t.F_)await e(!1)}function Z5(t,e){const n=sn(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),Z2(n)?Q2(n):nd(n).Jo()&&Y2(n,e))}function e6(t,e){const n=sn(t),r=nd(n);n.C_.delete(e),r.Jo()&&t6(n,e),n.C_.size===0&&(r.Jo()?r.Xo():wg(n)&&n.x_.set("Unknown"))}function Y2(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}nd(t).c_(e)}function t6(t,e){t.O_.Oe(e),nd(t).l_(e)}function Q2(t){t.O_=new pQ({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),nd(t).start(),t.x_.p_()}function Z2(t){return wg(t)&&!nd(t).Ho()&&t.C_.size>0}function wg(t){return sn(t).v_.size===0}function n6(t){t.O_=void 0}async function uZ(t){t.C_.forEach((e,n)=>{Y2(t,e)})}async function hZ(t,e){n6(t),Z2(t)?(t.x_.S_(e),Q2(t)):t.x_.set("Unknown")}async function fZ(t,e,n){if(t.x_.set("Online"),e instanceof H5&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.C_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.C_.delete(a),i.O_.removeTarget(a))}(t,e)}catch(r){We("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await QD(t,r)}else if(e instanceof kv?t.O_.$e(e):e instanceof z5?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(Pt.min()))try{const r=await q5(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.O_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.C_.get(c);u&&s.C_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.C_.get(l);if(!u)return;s.C_.set(l,u.withResumeToken(ai.EMPTY_BYTE_STRING,u.snapshotVersion)),t6(s,l);const f=new ml(u.target,l,c,u.sequenceNumber);Y2(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){We("RemoteStore","Failed to raise snapshot:",r),await QD(t,r)}}async function QD(t,e,n){if(!xg(e))throw e;t.v_.add(1),await Ag(t),t.x_.set("Offline"),n||(n=()=>q5(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{We("RemoteStore","Retrying IndexedDB access"),await n(),t.v_.delete(1),await x1(t)})}async function ZD(t,e){const n=sn(t);n.asyncQueue.verifyOperationInProgress(),We("RemoteStore","RemoteStore received new credentials");const r=wg(n);n.v_.add(3),await Ag(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),await x1(n)}async function dZ(t,e){const n=sn(t);e?(n.v_.delete(2),await x1(n)):e||(n.v_.add(2),await Ag(n),n.x_.set("Unknown"))}function nd(t){return t.N_||(t.N_=function(n,r,i){const s=sn(n);return s.R_(),new oZ(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:uZ.bind(null,t),To:hZ.bind(null,t),u_:fZ.bind(null,t)}),t.F_.push(async e=>{e?(t.N_.Zo(),Z2(t)?Q2(t):t.x_.set("Unknown")):(await t.N_.stop(),n6(t))})),t.N_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Rl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new eR(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ut(ke.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function r6(t,e){if(Uo("AsyncQueue",`${e}: ${t}`),xg(t))return new ut(ke.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e){this.comparator=e?(n,r)=>e(n,r)||xt.comparator(n.key,r.key):(n,r)=>xt.comparator(n.key,r.key),this.keyedMap=gp(),this.sortedSet=new Qn(this.comparator)}static emptySet(e){return new lf(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof lf)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new lf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eB{constructor(){this.L_=new Qn(xt.comparator)}track(e){const n=e.doc.key,r=this.L_.get(n);r?e.type!==0&&r.type===3?this.L_=this.L_.insert(n,e):e.type===3&&r.type!==1?this.L_=this.L_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.L_=this.L_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.L_=this.L_.remove(n):e.type===1&&r.type===2?this.L_=this.L_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):Ot():this.L_=this.L_.insert(n,e)}k_(){const e=[];return this.L_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Pf{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Pf(e,n,lf.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&m1(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pZ{constructor(){this.q_=void 0,this.Q_=[]}}class mZ{constructor(){this.queries=new td(e=>I5(e),m1),this.onlineState="Unknown",this.K_=new Set}}async function gZ(t,e){const n=sn(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new pZ),i)try{s.q_=await n.onListen(r)}catch(o){const a=r6(o,`Initialization of query '${wh(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.Q_.push(e),e.U_(n.onlineState),s.q_&&e.W_(s.q_)&&tR(n)}async function yZ(t,e){const n=sn(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.Q_.indexOf(e);o>=0&&(s.Q_.splice(o,1),i=s.Q_.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function vZ(t,e){const n=sn(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Q_)a.W_(i)&&(r=!0);o.q_=i}}r&&tR(n)}function _Z(t,e,n){const r=sn(t),i=r.queries.get(e);if(i)for(const s of i.Q_)s.onError(n);r.queries.delete(e)}function tR(t){t.K_.forEach(e=>{e.next()})}class xZ{constructor(e,n,r){this.query=e,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Pf(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.z_?this.H_(e)&&(this.G_.next(e),n=!0):this.J_(e,this.onlineState)&&(this.Y_(e),n=!0),this.j_=e,n}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),n=!0),n}J_(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.Z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}H_(e){if(e.docChanges.length>0)return!0;const n=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Y_(e){e=Pf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6{constructor(e){this.key=e}}class s6{constructor(e){this.key=e}}class SZ{constructor(e,n){this.query=e,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=Zt(),this.mutatedKeys=Zt(),this.ua=L5(e),this.ca=new lf(this.ua)}get la(){return this.oa}ha(e,n){const r=n?n.Pa:new eB,i=n?n.ca:this.ca;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,f)=>{const p=i.get(u),m=g1(this.query,f)?f:null,y=!!p&&this.mutatedKeys.has(p.key),S=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let v=!1;p&&m?p.data.isEqual(m.data)?y!==S&&(r.track({type:3,doc:m}),v=!0):this.Ia(p,m)||(r.track({type:2,doc:m}),v=!0,(l&&this.ua(m,l)>0||c&&this.ua(m,c)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),v=!0):p&&!m&&(r.track({type:1,doc:p}),v=!0,(l||c)&&(a=!0)),v&&(m?(o=o.add(m),s=S?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{ca:o,Pa:r,Xi:a,mutatedKeys:s}}Ia(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const o=e.Pa.k_();o.sort((u,f)=>function(m,y){const S=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ot()}};return S(m)-S(y)}(u.type,f.type)||this.ua(u.doc,f.doc)),this.Ta(r),i=i!=null&&i;const a=n&&!i?this.Ea():[],l=this.aa.size===0&&this.current&&!i?1:0,c=l!==this._a;return this._a=l,o.length!==0||c?{snapshot:new Pf(this.query,e.ca,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new eB,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=Zt(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});const n=[];return e.forEach(r=>{this.aa.has(r)||n.push(new s6(r))}),this.aa.forEach(r=>{e.has(r)||n.push(new i6(r))}),n}Ra(e){this.oa=e.hs,this.aa=Zt();const n=this.ha(e.documents);return this.applyChanges(n,!0)}Va(){return Pf.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}}class AZ{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class wZ{constructor(e){this.key=e,this.ma=!1}}class EZ{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new td(a=>I5(a),m1),this.pa=new Map,this.ya=new Set,this.wa=new Qn(xt.comparator),this.Sa=new Map,this.ba=new $2,this.Da={},this.Ca=new Map,this.va=Rf.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}}async function MZ(t,e){const n=LZ(t);let r,i;const s=n.ga.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Va();else{const o=await QQ(n.localStore,Do(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await TZ(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&Z5(n.remoteStore,o)}return i}async function TZ(t,e,n,r,i){t.Ma=(f,p,m)=>async function(S,v,g,_){let A=v.view.ha(g);A.Xi&&(A=await JD(S.localStore,v.query,!1).then(({documents:P})=>v.view.ha(P,A)));const E=_&&_.targetChanges.get(v.targetId),b=_&&_.targetMismatches.get(v.targetId)!=null,C=v.view.applyChanges(A,S.isPrimaryClient,E,b);return nB(S,v.targetId,C.da),C.snapshot}(t,f,p,m);const s=await JD(t.localStore,e,!0),o=new SZ(e,s.hs),a=o.ha(s.documents),l=Sg.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);nB(t,n,c.da);const u=new AZ(e,n,o);return t.ga.set(e,u),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),c.snapshot}async function CZ(t,e){const n=sn(t),r=n.ga.get(e),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter(s=>!m1(s,e))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await MT(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),e6(n.remoteStore,r.targetId),TT(n,r.targetId)}).catch(O2)):(TT(n,r.targetId),await MT(n.localStore,r.targetId,!0))}async function o6(t,e){const n=sn(t);try{const r=await qQ(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Sa.get(s);o&&(ar(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.ma=!0:i.modifiedDocuments.size>0?ar(o.ma):i.removedDocuments.size>0&&(ar(o.ma),o.ma=!1))}),await l6(n,r,e)}catch(r){await O2(r)}}function tB(t,e,n){const r=sn(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ga.forEach((s,o)=>{const a=o.view.U_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=sn(o);l.onlineState=a;let c=!1;l.queries.forEach((u,f)=>{for(const p of f.Q_)p.U_(a)&&(c=!0)}),c&&tR(l)}(r.eventManager,e),i.length&&r.fa.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function bZ(t,e,n){const r=sn(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Sa.get(e),s=i&&i.key;if(s){let o=new Qn(xt.comparator);o=o.insert(s,ni.newNoDocument(s,Pt.min()));const a=Zt().add(s),l=new _1(Pt.min(),new Map,new Qn(on),o,a);await o6(r,l),r.wa=r.wa.remove(s),r.Sa.delete(e),nR(r)}else await MT(r.localStore,e,!1).then(()=>TT(r,e,n)).catch(O2)}function TT(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.pa.get(e))t.ga.delete(r),n&&t.fa.xa(r,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.Vr(e).forEach(r=>{t.ba.containsKey(r)||a6(t,r)})}function a6(t,e){t.ya.delete(e.path.canonicalString());const n=t.wa.get(e);n!==null&&(e6(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),nR(t))}function nB(t,e,n){for(const r of n)r instanceof i6?(t.ba.addReference(r.key,e),RZ(t,r)):r instanceof s6?(We("SyncEngine","Document no longer in limbo: "+r.key),t.ba.removeReference(r.key,e),t.ba.containsKey(r.key)||a6(t,r.key)):Ot()}function RZ(t,e){const n=e.key,r=n.path.canonicalString();t.wa.get(n)||t.ya.has(r)||(We("SyncEngine","New document in limbo: "+n),t.ya.add(r),nR(t))}function nR(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){const e=t.ya.values().next().value;t.ya.delete(e);const n=new xt(Hn.fromString(e)),r=t.va.next();t.Sa.set(r,new wZ(n)),t.wa=t.wa.insert(n,r),Z5(t.remoteStore,new ml(Do(P5(n.path)),r,"TargetPurposeLimboResolution",U2._e))}}async function l6(t,e,n){const r=sn(t),i=[],s=[],o=[];r.ga.isEmpty()||(r.ga.forEach((a,l)=>{o.push(r.Ma(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){i.push(c);const u=q2.Ki(l.targetId,c);s.push(u)}}))}),await Promise.all(o),r.fa.u_(i),await async function(l,c){const u=sn(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Ce.forEach(c,p=>Ce.forEach(p.qi,m=>u.persistence.referenceDelegate.addReference(f,p.targetId,m)).next(()=>Ce.forEach(p.Qi,m=>u.persistence.referenceDelegate.removeReference(f,p.targetId,m)))))}catch(f){if(!xg(f))throw f;We("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const m=u.ns.get(p),y=m.snapshotVersion,S=m.withLastLimboFreeSnapshotVersion(y);u.ns=u.ns.insert(p,S)}}}(r.localStore,s))}async function PZ(t,e){const n=sn(t);if(!n.currentUser.isEqual(e)){We("SyncEngine","User change. New user:",e.toKey());const r=await J5(n.localStore,e);n.currentUser=e,function(s,o){s.Ca.forEach(a=>{a.forEach(l=>{l.reject(new ut(ke.CANCELLED,o))})}),s.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await l6(n,r.us)}}function IZ(t,e){const n=sn(t),r=n.Sa.get(e);if(r&&r.ma)return Zt().add(r.key);{let i=Zt();const s=n.pa.get(e);if(!s)return i;for(const o of s){const a=n.ga.get(o);i=i.unionWith(a.view.la)}return i}}function LZ(t){const e=sn(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=o6.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=IZ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bZ.bind(null,e),e.fa.u_=vZ.bind(null,e.eventManager),e.fa.xa=_Z.bind(null,e.eventManager),e}class rB{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Y5(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return JQ(this.persistence,new KQ,e.initialUser,this.serializer)}createPersistence(e){return new jQ(J2.Hr,this.serializer)}createSharedClientState(e){return new eZ}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class DZ{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>tB(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=PZ.bind(null,this.syncEngine),await dZ(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new mZ}()}createDatastore(e){const n=Y5(e.databaseInfo.databaseId),r=function(s){return new iZ(s)}(e.databaseInfo);return function(s,o,a,l){return new aZ(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new cZ(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>tB(this.syncEngine,n,0),function(){return YD.D()?new YD:new tZ}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,u){const f=new EZ(i,s,o,a,l,c);return u&&(f.Fa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(r){const i=sn(r);We("RemoteStore","RemoteStore shutting down."),i.v_.add(5),await Ag(i),i.M_.shutdown(),i.x_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BZ{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Uo("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NZ{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ei.UNAUTHENTICATED,this.clientId=AY.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{We("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(We("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ut(ke.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=r6(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function _w(t,e){t.asyncQueue.verifyOperationInProgress(),We("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await J5(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function iB(t,e){t.asyncQueue.verifyOperationInProgress();const n=await FZ(t);We("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>ZD(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>ZD(e.remoteStore,i)),t._onlineComponents=e}function OZ(t){return t.name==="FirebaseError"?t.code===ke.FAILED_PRECONDITION||t.code===ke.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function FZ(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){We("FirestoreClient","Using user provided OfflineComponentProvider");try{await _w(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!OZ(n))throw n;Mf("Error using user provided cache. Falling back to memory cache: "+n),await _w(t,new rB)}}else We("FirestoreClient","Using default OfflineComponentProvider"),await _w(t,new rB);return t._offlineComponents}async function kZ(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(We("FirestoreClient","Using user provided OnlineComponentProvider"),await iB(t,t._uninitializedComponentsProvider._online)):(We("FirestoreClient","Using default OnlineComponentProvider"),await iB(t,new DZ))),t._onlineComponents}async function UZ(t){const e=await kZ(t),n=e.eventManager;return n.onListen=MZ.bind(null,e.syncEngine),n.onUnlisten=CZ.bind(null,e.syncEngine),n}function VZ(t,e,n={}){const r=new Rl;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new BZ({next:p=>{o.enqueueAndForget(()=>yZ(s,f)),p.fromCache&&l.source==="server"?c.reject(new ut(ke.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new xZ(a,u,{includeMetadataChanges:!0,Z_:!0});return gZ(s,f)}(await UZ(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c6(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sB=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zZ(t,e,n){if(!n)throw new ut(ke.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function HZ(t,e,n,r){if(e===!0&&r===!0)throw new ut(ke.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function oB(t){if(xt.isDocumentKey(t))throw new ut(ke.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function GZ(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ot()}function CT(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ut(ke.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=GZ(t);throw new ut(ke.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aB{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ut(ke.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ut(ke.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}HZ("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=c6((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ut(ke.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ut(ke.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ut(ke.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rR{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aB({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ut(ke.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new ut(ke.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aB(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new pY;switch(r.type){case"firstParty":return new vY(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ut(ke.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=sB.get(n);r&&(We("ComponentProvider","Removing Datastore"),sB.delete(n),r.terminate())}(this),Promise.resolve()}}function jZ(t,e,n,r={}){var i;const s=(t=CT(t,rR))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Mf("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=ei.MOCK_USER;else{a=X$(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new ut(ke.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new ei(c)}t._authCredentials=new mY(new A5(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new S1(this.firestore,e,this._query)}}class rd{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rd(this.firestore,e,this._key)}}class cf extends S1{constructor(e,n,r){super(e,n,P5(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rd(this.firestore,null,new xt(e))}withConverter(e){return new cf(this.firestore,e,this._path)}}function WZ(t,e,...n){if(t=Z$(t),zZ("collection","path",e),t instanceof rR){const r=Hn.fromString(e,...n);return oB(r),new cf(t,null,r)}{if(!(t instanceof rd||t instanceof cf))throw new ut(ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Hn.fromString(e,...n));return oB(r),new cf(t.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XZ{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new Q5(this,"async_queue_retry"),this._u=()=>{const n=vw();n&&We("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const e=vw();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const n=vw();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});const n=new Rl;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}async cu(){if(this.eu.length!==0){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!xg(e))throw e;We("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo(()=>this.cu())}}uu(e){const n=this.Xa.then(()=>(this.iu=!0,e().catch(r=>{this.ru=r,this.iu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Uo("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.iu=!1,r))));return this.Xa=n,n}enqueueAfterDelay(e,n,r){this.au(),this.ou.indexOf(e)>-1&&(n=0);const i=eR.createAndSchedule(this,e,n,r,s=>this.lu(s));return this.nu.push(i),i}au(){this.ru&&Ot()}verifyOperationInProgress(){}async hu(){let e;do e=this.Xa,await e;while(e!==this.Xa)}Pu(e){for(const n of this.nu)if(n.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.nu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){const n=this.nu.indexOf(e);this.nu.splice(n,1)}}class u6 extends rR{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new XZ}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||h6(this),this._firestoreClient.terminate()}}function KZ(t,e){const n=typeof t=="object"?t:QJ(),r=typeof t=="string"?t:e||"(default)",i=$J(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=j$("firestore");s&&jZ(i,...s)}return i}function $Z(t){return t._firestoreClient||h6(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function h6(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,u){return new DY(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,c6(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new NZ(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(e){this._byteString=e}static fromBase64String(e){try{return new j_(ai.fromBase64String(e))}catch(n){throw new ut(ke.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new j_(ai.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f6{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ut(ke.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JZ{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ut(ke.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ut(ke.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return on(this._lat,e._lat)||on(this._long,e._long)}}const qZ=new RegExp("[~\\*/\\[\\]]");function YZ(t,e,n){if(e.search(qZ)>=0)throw lB(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new f6(...e.split("."))._internalPath}catch{throw lB(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function lB(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new ut(ke.INVALID_ARGUMENT,a+t+l)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new rd(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QZ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(p6("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class QZ extends d6{data(){return super.data()}}function p6(t,e){return typeof e=="string"?YZ(t,e):e instanceof f6?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZZ(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ut(ke.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class eee{convertValue(e,n="none"){switch(vu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ir(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(yu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Ot()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return d1(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new JZ(ir(e.latitude),ir(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=z2(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(bm(e));default:return null}}convertTimestamp(e){const n=Vl(e);return new Fi(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Hn.fromString(e);ar($5(r));const i=new Rm(r.get(1),r.get(3)),s=new xt(r.popFirst(5));return i.isEqual(n)||Uo(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class tee extends d6{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Uv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(p6("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Uv extends tee{data(e={}){return super.data(e)}}class nee{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new y0(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Uv(this._firestore,this._userDataWriter,r.key,r,new y0(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ut(ke.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Uv(i._firestore,i._userDataWriter,a.doc.key,a.doc,new y0(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Uv(i._firestore,i._userDataWriter,a.doc.key,a.doc,new y0(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:ree(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function ree(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ot()}}class iee extends eee{constructor(e){super(),this.firestore=e}convertBytes(e){return new j_(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new rd(this.firestore,null,n)}}function see(t){t=CT(t,S1);const e=CT(t.firestore,u6),n=$Z(e),r=new iee(e);return ZZ(t._query),VZ(n,t._query).then(i=>new nee(e,r,t,i))}(function(e,n=!0){(function(i){ed=i})(YJ),D_(new ym("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new u6(new gY(r.getProvider("auth-internal")),new xY(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ut(ke.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Rm(c.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),rf(bD,"4.4.2",e),rf(bD,"4.4.2","esm2017")})();var oee="firebase",aee="10.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rf(oee,aee,"app");const lee={apiKey:"AIzaSyCdnuxel4imeAOVQVogRiHvqvrXb5qVRQw",authDomain:"ecovibe-c6720.firebaseapp.com",projectId:"ecovibe-c6720",storageBucket:"ecovibe-c6720.appspot.com",messagingSenderId:"944059551615",appId:"1:944059551615:web:2f96d7e9a67d0065e9544a"},cee=g9(lee),uee=KZ(cee);function iR(t,e){if(!e)return t;const{category:n="",tags:r=[],searchQuery:i="",collections:s=[],productTypes:o=[],priceRange:a={min:0,max:0},seller:l="",selectedOptions:c=[]}=e;let u=[];for(let f of t){let p=!0;r.length>0&&!f.Tags.some(m=>e.tags.includes(m))&&(p=!1),n!==""&&f.Category!==n&&(p=!1),i!==""&&!f.Name.toLowerCase().includes(i.toLowerCase())&&(p=!1),s.length>0&&!s.includes(f.Collection)&&(p=!1),o.length>0&&!o.includes(f.Type)&&(p=!1),a.min>-1&&a.max>0&&(f.Price<a.min||f.Price>a.max)&&(p=!1),l!=""&&f.Seller!==l&&(p=!1),c.length>0&&f.Options&&(f.Options.some(({title:y,options:S})=>c.some(v=>v.title===y&&S.some(g=>g===v.selectedOption)))||(p=!1)),p&&u.push(f)}return e.sortBy!==""&&u.sort((f,p)=>e.sortBy==="high to low"?p.Price-f.Price:e.sortBy==="low to high"?f.Price-p.Price:f.Tags.includes(e.sortBy)&&!p.Tags.includes(e.sortBy)?-1:!f.Tags.includes(e.sortBy)&&p.Tags.includes(e.sortBy)?1:0),u}const Vv=y$("products/getAsyncProducts",async(t,{rejectWithValue:e,fulfillWithValue:n})=>{try{const r=WZ(uee,"Products"),s=(await see(r)).docs.map(a=>({...a.data(),id:a.id}));return iR(s,t)}catch(r){return console.log(r),e(r.message)}}),hee={loading:!1,data:[],error:""},fee=E$({name:"products",initialState:hee,extraReducers:t=>{t.addCase(Vv.pending,(e,n)=>{e.loading=!0,e.data=[],e.error=""}),t.addCase(Vv.fulfilled,(e,n)=>{e.loading=!1,e.data=n.payload,e.error=""}),t.addCase(Vv.rejected,(e,n)=>{e.loading=!1,e.data=[],e.error=n.payload})}}),dee=fee.reducer;var m6={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},cB=Ys.createContext&&Ys.createContext(m6),pee=["attr","size","title"];function mee(t,e){if(t==null)return{};var n=gee(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function gee(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function W_(){return W_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},W_.apply(this,arguments)}function uB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function X_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uB(Object(n),!0).forEach(function(r){yee(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yee(t,e,n){return e=vee(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vee(t){var e=_ee(t,"string");return typeof e=="symbol"?e:String(e)}function _ee(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function g6(t){return t&&t.map((e,n)=>Ys.createElement(e.tag,X_({key:n},e.attr),g6(e.child)))}function pn(t){return e=>Ys.createElement(xee,W_({attr:X_({},t.attr)},e),g6(t.child))}function xee(t){var e=n=>{var{attr:r,size:i,title:s}=t,o=mee(t,pee),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),Ys.createElement("svg",W_({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:X_(X_({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&Ys.createElement("title",null,s),t.children)};return cB!==void 0?Ys.createElement(cB.Consumer,null,n=>e(n)):e(m6)}function K_(t){return pn({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(t)}function eo(t){return pn({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"},child:[]}]})(t)}function sR(t){return pn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"},child:[]}]})(t)}function See(t){return pn({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 416H381.54c-.74 19.81-14.71 32-32.74 32H288c-18.69 0-33.02-17.47-32.77-32H16c-8.8 0-16 7.2-16 16v16c0 35.2 28.8 64 64 64h512c35.2 0 64-28.8 64-64v-16c0-8.8-7.2-16-16-16zM576 48c0-26.4-21.6-48-48-48H112C85.6 0 64 21.6 64 48v336h512V48zm-64 272H128V64h384v256z"},child:[]}]})(t)}function Aee(t){return pn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"},child:[]}]})(t)}function hB(t){return pn({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}const fB=[{title:"Fashion"},{title:"Electronics"},{title:"Home Decor"},{title:"Health and Wellness"},{title:"Beauty and Personal Care"}],wee=[{title:"Home"},{title:"Products"},{title:"Contact Us"},{title:"FAQs"}],xw={homePage:{img01:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2Ffreestocks-_3Q3tsJ01nc-unsplash.jpg?alt=media&token=55706bbb-c885-44c2-9db2-a594a053329a",img02:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2Fbrooke-cagle-8jp-6SjVibM-unsplash.jpg?alt=media&token=00462705-2985-4e3d-813a-ae537817ac46",img03:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2Flauren-richmond-490uCO8h7ZA-unsplash.jpg?alt=media&token=4c8d59f0-a015-4f42-a916-12b17bf2c553"}};function y6(t){const e=t.reduce((i,s)=>Number(i)+Number(s),0),n=t.length;return Math.round(e/n)}const Eee=t=>{for(var e=[],n=0;n<t;n++)e.push(n);return e},Mee="https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2Ficon.svg?alt=media&token=927bf580-49b0-4e03-9118-0a11258c817e";function Tee(t){return pn({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},child:[]},{tag:"path",attr:{d:"M3.604 7.197l7.138 -3.109a.96 .96 0 0 1 1.27 .527l4.924 11.902a1 1 0 0 1 -.514 1.304l-7.137 3.109a.96 .96 0 0 1 -1.271 -.527l-4.924 -11.903a1 1 0 0 1 .514 -1.304z"},child:[]},{tag:"path",attr:{d:"M15 4h1a1 1 0 0 1 1 1v3.5"},child:[]},{tag:"path",attr:{d:"M20 6c.264 .112 .52 .217 .768 .315a1 1 0 0 1 .53 1.311l-2.298 5.374"},child:[]}]})(t)}function Cee(t){return pn({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},child:[]},{tag:"path",attr:{d:"M4 4h6v6h-6z"},child:[]},{tag:"path",attr:{d:"M14 4h6v6h-6z"},child:[]},{tag:"path",attr:{d:"M4 14h6v6h-6z"},child:[]},{tag:"path",attr:{d:"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"},child:[]}]})(t)}function v6(t){return pn({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},child:[]},{tag:"path",attr:{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0"},child:[]},{tag:"path",attr:{d:"M12 7v5l3 3"},child:[]}]})(t)}function bee(t){return pn({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},child:[]},{tag:"path",attr:{d:"M3 5m0 3a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3z"},child:[]},{tag:"path",attr:{d:"M3 10l18 0"},child:[]},{tag:"path",attr:{d:"M7 15l.01 0"},child:[]},{tag:"path",attr:{d:"M11 15l2 0"},child:[]}]})(t)}function Ree(t){return pn({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},child:[]},{tag:"path",attr:{d:"M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"},child:[]},{tag:"path",attr:{d:"M14.071 17.764a8.989 8.989 0 0 1 -2.071 .236c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.346 0 6.173 1.727 8.482 5.182"},child:[]},{tag:"path",attr:{d:"M19 22v.01"},child:[]},{tag:"path",attr:{d:"M19 19a2.003 2.003 0 0 0 .914 -3.782a1.98 1.98 0 0 0 -2.414 .483"},child:[]}]})(t)}function Pee(t){return pn({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},child:[]},{tag:"path",attr:{d:"M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572"},child:[]}]})(t)}function Iee(t){return pn({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},child:[]},{tag:"path",attr:{d:"M21 3l-6.5 18a.55 .55 0 0 1 -1 0l-3.5 -7l-7 -3.5a.55 .55 0 0 1 0 -1l18 -6.5"},child:[]}]})(t)}function Lee(t){return pn({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},child:[]},{tag:"path",attr:{d:"M13.5 21h-6.5a2 2 0 0 1 -2 -2v-6a2 2 0 0 1 2 -2h10a2 2 0 0 1 1.74 1.012"},child:[]},{tag:"path",attr:{d:"M11 16a1 1 0 1 0 2 0a1 1 0 0 0 -2 0"},child:[]},{tag:"path",attr:{d:"M8 11v-4a4 4 0 1 1 8 0v4"},child:[]},{tag:"path",attr:{d:"M19 16l-2 3h4l-2 3"},child:[]}]})(t)}function Dee(t){return pn({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},child:[]},{tag:"path",attr:{d:"M15 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2"},child:[]},{tag:"path",attr:{d:"M21 12h-13l3 -3"},child:[]},{tag:"path",attr:{d:"M11 15l-3 -3"},child:[]}]})(t)}function _6({title:t}){return R.jsxs("aside",{className:"md:hidden flex h-20 mx-auto w-[95%] px-4 py-2 bg-primary-900/90 rounded-lg items-center justify-between",children:[R.jsxs("div",{className:"flex flex-col justify-evenly h-full",children:[R.jsx("h2",{className:"text-lg text-white",children:t}),R.jsxs("p",{className:"flex items-center justify-center gap-x-1 py-1 text-gray-300",children:[R.jsx(v6,{className:"text-2xl"}),R.jsx("span",{className:"text-xs",children:"22h 55m 20s remaining "})]})]}),R.jsxs("button",{className:"flex items-center justify-center hover:bg-white transition-all hover:text-primary-500 hover:font-semibold text-white border border-gray-100 px-2 py-1 rounded-md text-sm gap-x-1.5",children:[R.jsx("span",{children:"View All"}),R.jsx("span",{children:R.jsx(eo,{})})]})]})}const Bee=()=>R.jsxs("div",{className:"mx-auto 2xl:max-w-screen-2xl",children:[R.jsxs("div",{className:"flex flex-col md:flex-row gap-y-2 gap-x-2 items-center justify-between px-2 py-1 md:px-4 md:h-[500px] h-96",children:[R.jsxs("div",{className:"h-3/4 md:h-full md:w-2/3 w-full justify-center items-center bg-blue-400 rounded-md relative cursor-pointer",children:[R.jsx("div",{className:"absolute inset-0 w-full h-full z-0",children:R.jsx("img",{src:xw.homePage.img03,alt:"hero-image",className:"w-full h-full object-cover object-center rounded-md"})}),R.jsxs("div",{className:"bg-black bg-opacity-25 backdrop-blur-sm hover:backdrop-blur-md transition-all duration-700 absolute w-full h-full z-10 flex flex-col items-start justify-center px-6 py-2 rounded-md",children:[R.jsxs("h1",{className:"text-white text-3xl md:text-5xl font-bold",children:["Fresh & Healthy ",R.jsx("br",{}),R.jsx("span",{className:"text-primary-500",children:"Organic"}),"Food"]}),R.jsxs("div",{className:"flex flex-col items-start justify-between md:gap-y-4 gap-y-2 md:px-4 mf:py-2 px-2 py-1 border-l-4 mt-2 border-primary-600",children:[R.jsxs("p",{className:"text-white text-lg md:text-xl cursor-pointer",children:["Sale up to",R.jsx("span",{className:"bg-primary-500 text-white px-2 py-1 rounded-md mx-2 hover:px-3 hover:py-1.5 transition-all duration-300",children:"30% OFF"})]}),R.jsx("span",{className:"text-primary-800 text-sm md:text-xl bg-white bg-opacity-10 cursor-pointer",children:"Free shipping on all your order."})]}),R.jsx("button",{className:"md:px-10 px-4 font-semibold hover:bg-primary-700 hover:text-white transition-all duration-500 py-2 bg-white text-primary-600 ml-2 mt-4 rounded-lg text-sm md:text-lg",children:"Shop Now"})]})]}),R.jsxs("div",{className:"flex w-full h-1/4 md:h-full md:w-1/3 items-center md:flex-col justify-between gap-x-2 cursor-pointer",children:[R.jsxs("div",{className:"relative w-1/2 md:w-full md:h-[240px] h-24 rounded-md bg-amber-300",children:[R.jsx("div",{className:"absolute inset-0 w-full h-full z-0",children:R.jsx("img",{src:xw.homePage.img01,alt:"hero-image",className:"w-full h-full object-cover object-c rounded-md"})}),R.jsxs("div",{className:"bg-black bg-opacity-30 backdrop-blur-sm hover:backdrop-blur-md transition-all duration-700 absolute w-full h-full z-10 flex flex-col gap-y-1 items-center md:items-start justify-center px-6 py-2 rounded-md",children:[R.jsx("p",{className:"text-white text-xs md:text-lg font-semibold",children:"Summer Sale"}),R.jsx("p",{className:"text-white text-sm md:text-3xl font-bold border-b-4 border-b-primary-500",children:"75% OFF"}),R.jsx("span",{className:"md:text-sm text-gray-300 text-xs md:block hidden",children:"Only Fashion & clothes"}),R.jsxs("button",{className:"md:px-3 md:py-1.5 text-xs px-2 py-1 md:text-base bg-primary-400 rounded-lg text-white flex items-center justify-center gap-x-2 hover:scale-110 transition-all duration-300",children:[R.jsx("span",{children:"Shop Now"}),R.jsx(K_,{className:"rotate-180"})]})]})]}),R.jsxs("div",{className:"md:w-full w-1/2 md:h-[240px] h-24 rounded-md bg-accent-400 relative",children:[R.jsx("div",{className:"absolute inset-0 w-full h-full z-0",children:R.jsx("img",{src:xw.homePage.img02,alt:"hero-image",className:"w-full h-full object-cover object-c rounded-md"})}),R.jsxs("div",{className:"bg-black bg-opacity-30 backdrop-blur-sm hover:backdrop-blur-md transition-all duration-700 absolute w-full h-full z-10 flex flex-col gap-y-0.5 md:gap-y-1 items-center justify-center px-6 py-2 rounded-md",children:[R.jsx("p",{className:"text-white md:text-lg text-xs font-semibold",children:"Best Deal"}),R.jsxs("p",{className:"text-white text-xs md:text-2xl lg:text-3xl font-bold border-b md:border-b-4 border-b-primary-500",children:["Special Products ",R.jsx("br",{})," Deal of the Month"]}),R.jsxs("button",{className:"md:px-3 md:py-1.5 px-2 py-1 text-xs md:text-lg rounded-lg text-white flex items-center justify-center gap-x-2 hover:scale-110 transition-all duration-300",children:[R.jsx("span",{children:"Shop Now"}),R.jsx(K_,{className:"rotate-180"})]})]})]})]})]}),R.jsxs("div",{className:"",children:[R.jsxs("div",{className:"hidden md:flex items-center mx-auto w-[99%] px-2 py-1 my-4 rounded-lg bg-gray-50 shadow-xl xl:justify-around justify-between",children:[R.jsxs("div",{className:"flex items-center gap-x-3 lg:gap-x-4 justify-center h-20 px-2 py-1 group",children:[R.jsx("span",{className:"group-hover:scale-125 transition-all duration-500",children:R.jsx("svg",{width:"40",height:"28",viewBox:"0 0 40 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:R.jsx("path",{d:"M32.7021 20.3042C31.7247 20.3042 30.7962 20.687 30.0957 21.3793C29.3952 22.0798 29.0043 22.992 29.0043 23.9694C29.0043 24.9468 29.3871 25.8591 30.0957 26.5595C30.8043 27.2519 31.7247 27.6347 32.7021 27.6347C34.7058 27.6347 36.3348 25.9894 36.3348 23.9694C36.3348 21.9495 34.7058 20.3042 32.7021 20.3042ZM32.7021 26.0057C31.5781 26.0057 30.6333 25.0772 30.6333 23.9694C30.6333 22.8617 31.5781 21.9332 32.7021 21.9332C33.8098 21.9332 34.7058 22.8454 34.7058 23.9694C34.7058 25.0935 33.8098 26.0057 32.7021 26.0057ZM33.6469 8.09488C33.5003 7.95641 33.3048 7.88311 33.1012 7.88311H28.9228C28.4749 7.88311 28.1083 8.24964 28.1083 8.69761V15.3765C28.1083 15.8245 28.4749 16.191 28.9228 16.191H35.5528C36.0008 16.191 36.3673 15.8245 36.3673 15.3765V10.9049C36.3673 10.6768 36.2696 10.4569 36.0986 10.3022L33.6469 8.09488ZM34.7383 14.562H29.7373V9.50396H32.7835L34.7383 11.2633V14.562ZM12.8121 20.3042C11.8347 20.3042 10.9061 20.687 10.2057 21.3793C9.50519 22.0798 9.11423 22.992 9.11423 23.9694C9.11423 24.9468 9.49705 25.8591 10.2057 26.5595C10.9143 27.2519 11.8347 27.6347 12.8121 27.6347C14.8157 27.6347 16.4447 25.9894 16.4447 23.9694C16.4447 21.9495 14.8157 20.3042 12.8121 20.3042ZM12.8121 26.0057C11.688 26.0057 10.7432 25.0772 10.7432 23.9694C10.7432 22.8617 11.688 21.9332 12.8121 21.9332C13.9198 21.9332 14.8157 22.8454 14.8157 23.9694C14.8157 25.0935 13.9198 26.0057 12.8121 26.0057ZM7.37935 21.306H5.74221V19.1395C5.74221 18.6915 5.37569 18.325 4.92771 18.325C4.47974 18.325 4.11322 18.6915 4.11322 19.1395V22.1205C4.11322 22.5685 4.47974 22.935 4.92771 22.935H7.37935C7.82733 22.935 8.19385 22.5685 8.19385 22.1205C8.19385 21.6726 7.82733 21.306 7.37935 21.306ZM11.5089 16.867C11.5089 16.4191 11.1423 16.0525 10.6944 16.0525H0.814498C0.366524 16.0525 0 16.4191 0 16.867C0 17.315 0.366524 17.6815 0.814498 17.6815H10.6944C11.1423 17.6815 11.5089 17.3231 11.5089 16.867ZM2.46793 13.9267L12.3478 13.9837C12.7958 13.9837 13.1623 13.6253 13.1704 13.1773C13.1786 12.7212 12.8121 12.3547 12.3641 12.3547L2.48422 12.2977C2.47607 12.2977 2.47607 12.2977 2.47607 12.2977C2.0281 12.2977 1.66158 12.6561 1.66158 13.104C1.65343 13.5602 2.01996 13.9267 2.46793 13.9267ZM4.12951 10.2289H14.0094C14.4573 10.2289 14.8239 9.86234 14.8239 9.41437C14.8239 8.96639 14.4573 8.59987 14.0094 8.59987H4.12951C3.68153 8.59987 3.31501 8.96639 3.31501 9.41437C3.31501 9.86234 3.68153 10.2289 4.12951 10.2289ZM39.6986 9.12929L33.8668 4.29932C33.7202 4.17715 33.541 4.11199 33.3456 4.11199H26.4875V1.17979C26.4875 0.73182 26.121 0.365295 25.673 0.365295H4.92771C4.47974 0.365295 4.11322 0.73182 4.11322 1.17979V7.14192C4.11322 7.58989 4.47974 7.95642 4.92771 7.95642C5.37569 7.95642 5.74221 7.58989 5.74221 7.14192V1.99429H24.8666V21.306H18.1877C17.7398 21.306 17.3732 21.6726 17.3732 22.1205C17.3732 22.5685 17.7398 22.935 18.1877 22.935H28.1328C28.5807 22.935 28.9473 22.5685 28.9473 22.1205C28.9473 21.6726 28.5807 21.306 28.1328 21.306H26.4956V5.74098H33.0605L38.371 10.1393L38.314 21.2897H37.4669C37.0189 21.2897 36.6524 21.6563 36.6524 22.1042C36.6524 22.5522 37.0189 22.9187 37.4669 22.9187H39.1203C39.5683 22.9187 39.9348 22.5604 39.9348 22.1124L40 9.7646C39.9919 9.52025 39.886 9.28405 39.6986 9.12929Z",fill:"#445bee"})})}),R.jsxs("h3",{className:"flex flex-col justify-center gap-y-2 h-full",children:[R.jsx("span",{className:"font-bold",children:"Free Shipping"}),R.jsx("span",{className:"text-xs line-clamp-1",children:"Free shipping on all your order"})]})]}),R.jsxs("div",{className:"flex items-center gap-x-3 lg:gap-x-4 justify-center h-20 px-2 py-1 group",children:[R.jsx("span",{className:"group-hover:scale-125 transition-all duration-500",children:R.jsxs("svg",{width:"41",height:"40",viewBox:"0 0 41 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[R.jsx("g",{clipPath:"url(#clip0_44_853)",children:R.jsx("path",{d:"M34.0182 15.2101V13.6723C34.0182 9.9916 32.7157 6.57143 30.3543 4.03361C27.9342 1.42857 24.6064 0 20.9762 0H19.7073C16.077 0 12.7493 1.42857 10.3291 4.03361C7.96778 6.57143 6.66526 9.9916 6.66526 13.6723V15.2101C3.79971 15.4034 1.5224 17.7899 1.5224 20.7059V23.1092C1.5224 26.1429 3.99299 28.6134 7.0266 28.6134H10.1274C10.6821 28.6134 11.1358 28.1597 11.1358 27.605V16.2017C11.1358 15.6471 10.6821 15.1933 10.1274 15.1933H8.68206V13.6723C8.68206 7.02521 13.4216 2.01681 19.6989 2.01681H20.9678C27.2535 2.01681 31.9846 7.02521 31.9846 13.6723V15.1933H30.5392C29.9846 15.1933 29.5308 15.6471 29.5308 16.2017V27.5966C29.5308 28.1513 29.9846 28.605 30.5392 28.605H31.951C31.5392 33.8655 27.9174 35.084 26.2367 35.3613C25.7745 33.9412 24.4384 32.916 22.8669 32.916H20.3459C18.3964 32.916 16.8081 34.5042 16.8081 36.4538C16.8081 38.4034 18.3964 40 20.3459 40H22.8753C24.5056 40 25.8753 38.8908 26.2871 37.395C27.1106 37.2773 28.4132 36.9832 29.7073 36.2269C31.5308 35.1597 33.6905 32.9832 33.9762 28.5966C36.8585 28.4202 39.1443 26.0252 39.1443 23.1008V20.6975C39.1527 17.7899 36.8838 15.395 34.0182 15.2101ZM9.13585 26.5882H7.04341C5.11904 26.5882 3.55601 25.0252 3.55601 23.1008V20.6975C3.55601 18.7731 5.11904 17.2101 7.04341 17.2101H9.13585V26.5882ZM22.8753 37.9832H20.3459C19.5056 37.9832 18.8249 37.3025 18.8249 36.4622C18.8249 35.6218 19.5056 34.9412 20.3459 34.9412H22.8753C23.7157 34.9412 24.3964 35.6218 24.3964 36.4622C24.3964 37.3025 23.7157 37.9832 22.8753 37.9832ZM37.1359 23.1008C37.1359 25.0252 35.5728 26.5882 33.6485 26.5882H31.556V17.2101H33.6485C35.5728 17.2101 37.1359 18.7731 37.1359 20.6975V23.1008Z",fill:"#445bee"})}),R.jsx("defs",{children:R.jsx("clipPath",{id:"clip0_44_853",children:R.jsx("rect",{width:"40",height:"40",fill:"white",transform:"translate(0.333344)"})})})]})}),R.jsxs("h3",{className:"flex flex-col justify-center gap-y-2 h-full",children:[R.jsx("span",{className:"font-bold",children:"Free Shipping"}),R.jsx("span",{className:"text-xs line-clamp-1",children:"Free shipping on all your order"})]})]}),R.jsxs("div",{className:"flex items-center gap-x-3 lg:gap-x-4 justify-center h-20 px-2 py-1 group",children:[R.jsx("span",{className:"group-hover:scale-125 transition-all duration-500",children:R.jsxs("svg",{width:"41",height:"40",viewBox:"0 0 41 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[R.jsxs("g",{clipPath:"url(#clip0_44_884)",children:[R.jsx("path",{d:"M36.6468 34.6678L34.345 8.72697C34.3036 8.21362 33.873 7.82447 33.3514 7.82447H28.4994C28.4911 3.51066 24.9805 0 20.6666 0C16.3528 0 12.8422 3.51066 12.8339 7.82447H7.9819C7.46855 7.82447 7.03799 8.21362 6.98831 8.72697L4.68651 34.6678C4.68651 34.7009 4.68651 34.7257 4.68651 34.7589C4.68651 37.6485 7.34435 40 10.6066 40H30.7267C33.9889 40 36.6468 37.6485 36.6468 34.7589C36.6468 34.7257 36.6468 34.7009 36.6468 34.6678ZM20.6666 1.98717C23.8875 1.98717 26.5039 4.6036 26.5122 7.82447H14.8211C14.8293 4.6036 17.4458 1.98717 20.6666 1.98717ZM30.7267 38.0046H10.6066C8.45385 38.0046 6.69852 36.5721 6.67368 34.792L8.89268 9.81163H12.8339V13.2975C12.8339 13.8439 13.281 14.291 13.8275 14.291C14.3739 14.291 14.8211 13.8439 14.8211 13.2975V9.81163H26.5122V13.2975C26.5122 13.8439 26.9593 14.291 27.5058 14.291C28.0523 14.291 28.4994 13.8439 28.4994 13.2975V9.81163H32.4406L34.6596 34.8002C34.6348 36.5721 32.8794 38.0046 30.7267 38.0046Z",fill:"#445bee"}),R.jsx("path",{d:"M24.7982 20.6831L18.9361 26.5452L16.5432 24.1524C16.1541 23.7632 15.5248 23.7632 15.1357 24.1524C14.7465 24.5415 14.7465 25.1708 15.1357 25.5599L18.2323 28.6566C18.4228 28.8471 18.6794 28.9464 18.9361 28.9464C19.1928 28.9464 19.4412 28.8471 19.6399 28.6566L26.2058 22.0907C26.595 21.7015 26.595 21.0723 26.2058 20.6831C25.8167 20.3022 25.1874 20.3022 24.7982 20.6831Z",fill:"#445bee"})]}),R.jsx("defs",{children:R.jsx("clipPath",{id:"clip0_44_884",children:R.jsx("rect",{width:"40",height:"40",fill:"white",transform:"translate(0.666687)"})})})]})}),R.jsxs("h3",{className:"flex flex-col justify-center gap-y-2 h-full",children:[R.jsx("span",{className:"font-bold",children:"Free Shipping"}),R.jsx("span",{className:"text-xs line-clamp-1",children:"Free shipping on all your order"})]})]}),R.jsxs("div",{className:"flex items-center gap-x-3 lg:gap-x-4 justify-center h-20 px-2 py-1 group",children:[R.jsx("span",{className:"group-hover:scale-125 transition-all duration-500",children:R.jsx("svg",{width:"38",height:"40",viewBox:"0 0 38 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:R.jsx("path",{d:"M37.3959 9.43014C37.3959 9.27818 37.3621 9.12621 37.2946 8.98269C37.1595 8.69565 36.8978 8.50148 36.6108 8.44238L19.4136 0.101309C19.135 -0.0337695 18.8058 -0.0337695 18.5272 0.101309L1.16121 8.51836C0.823514 8.67877 0.604012 9.01646 0.587128 9.39637V9.40481C0.587128 9.41325 0.587128 9.4217 0.587128 9.43858V30.5614C0.587128 30.9498 0.80663 31.3043 1.16121 31.4732L18.5272 39.8903C18.5356 39.8903 18.5356 39.8903 18.5441 39.8987C18.5694 39.9071 18.5947 39.9156 18.6201 39.9325C18.6285 39.9325 18.6369 39.9409 18.6538 39.9409C18.6791 39.9493 18.7045 39.9578 18.7298 39.9662C18.7382 39.9662 18.7467 39.9747 18.7551 39.9747C18.7805 39.9831 18.8142 39.9831 18.8396 39.9916C18.848 39.9916 18.8564 39.9916 18.8649 39.9916C18.8987 39.9916 18.9409 40 18.9746 40C19.0084 40 19.0506 40 19.0844 39.9916C19.0928 39.9916 19.1013 39.9916 19.1097 39.9916C19.135 39.9916 19.1688 39.9831 19.1941 39.9747C19.2026 39.9747 19.211 39.9662 19.2195 39.9662C19.2448 39.9578 19.2701 39.9493 19.2954 39.9409C19.3039 39.9409 19.3123 39.9325 19.3292 39.9325C19.3545 39.924 19.3799 39.9156 19.4052 39.8987C19.4136 39.8987 19.4136 39.8987 19.4221 39.8903L36.8387 31.4479C37.1848 31.279 37.4128 30.9244 37.4128 30.5361V9.45547C37.3959 9.44702 37.3959 9.43858 37.3959 9.43014ZM18.9662 2.13592L34.0274 9.43858L28.4808 12.1317L13.4195 4.82904L18.9662 2.13592ZM18.9662 16.7412L3.90498 9.43858L11.0979 5.95188L26.1591 13.2545L18.9662 16.7412ZM2.6133 11.068L17.9531 18.5057V37.3575L2.6133 29.9198V11.068ZM19.9793 37.3575V18.5057L27.1806 15.0106V19.9409C27.1806 20.4981 27.6365 20.954 28.1937 20.954C28.7509 20.954 29.2068 20.4981 29.2068 19.9409V14.0228L35.3697 11.0342V29.886L19.9793 37.3575Z",fill:"#445bee"})})}),R.jsxs("h3",{className:"flex flex-col justify-center gap-y-2 h-full",children:[R.jsx("span",{className:"font-bold",children:"Free Shipping"}),R.jsx("span",{className:"text-xs line-clamp-1",children:"Free shipping on all your order"})]})]})]}),R.jsx(_6,{title:"Deal Of The Day"})]})]});function dB(t){return pn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M21.822 7.431A1 1 0 0 0 21 7H7.333L6.179 4.23A1.994 1.994 0 0 0 4.333 3H2v2h2.333l4.744 11.385A1 1 0 0 0 10 17h8c.417 0 .79-.259.937-.648l3-8a1 1 0 0 0-.115-.921zM17.307 15h-6.64l-2.5-6h11.39l-2.25 6z"},child:[]},{tag:"circle",attr:{cx:"10.5",cy:"19.5",r:"1.5"},child:[]},{tag:"circle",attr:{cx:"17.5",cy:"19.5",r:"1.5"},child:[]}]})(t)}function Nee(t){return pn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M16.293 9.293 12 13.586 7.707 9.293l-1.414 1.414L12 16.414l5.707-5.707z"},child:[]}]})(t)}function x6(t){return pn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 4.595a5.904 5.904 0 0 0-3.996-1.558 5.942 5.942 0 0 0-4.213 1.758c-2.353 2.363-2.352 6.059.002 8.412l7.332 7.332c.17.299.498.492.875.492a.99.99 0 0 0 .792-.409l7.415-7.415c2.354-2.354 2.354-6.049-.002-8.416a5.938 5.938 0 0 0-4.209-1.754A5.906 5.906 0 0 0 12 4.595zm6.791 1.61c1.563 1.571 1.564 4.025.002 5.588L12 18.586l-6.793-6.793c-1.562-1.563-1.561-4.017-.002-5.584.76-.756 1.754-1.172 2.799-1.172s2.035.416 2.789 1.17l.5.5a.999.999 0 0 0 1.414 0l.5-.5c1.512-1.509 4.074-1.505 5.584-.002z"},child:[]}]})(t)}function Oee(t){return pn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M4 6h16v2H4zm0 5h16v2H4zm0 5h16v2H4z"},child:[]}]})(t)}function pB(t){return pn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M10 18a7.952 7.952 0 0 0 4.897-1.688l4.396 4.396 1.414-1.414-4.396-4.396A7.952 7.952 0 0 0 18 10c0-4.411-3.589-8-8-8s-8 3.589-8 8 3.589 8 8 8zm0-14c3.309 0 6 2.691 6 6s-2.691 6-6 6-6-2.691-6-6 2.691-6 6-6z"},child:[]}]})(t)}var S6={},A6={exports:{}},Fee="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",kee=Fee,Uee=kee;function w6(){}function E6(){}E6.resetWarningCache=w6;var Vee=function(){function t(r,i,s,o,a,l){if(l!==Uee){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:E6,resetWarningCache:w6};return n.PropTypes=n,n};A6.exports=Vee();var zee=A6.exports;Object.defineProperty(S6,"__esModule",{value:!0});var mB=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hee=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),M6=$,Sw=T6(M6),Gee=zee,ea=T6(Gee);function T6(t){return t&&t.__esModule?t:{default:t}}function jee(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wee(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Xee(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Kee={overflow:"hidden",position:"relative"},$ee={position:"relative",overflow:"hidden",cursor:"pointer",display:"block",float:"left"},Jee=function(e,n){return`
    .react-stars-`+n+`:before {
      position: absolute;
      overflow: hidden;
      display: block;
      z-index: 1;
      top: 0; left: 0;
      width: 50%;
      content: attr(data-forhalf);
      color: `+e+`;
  }`},oR=function(t){Xee(e,t);function e(n){jee(this,e);var r=Wee(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return n=mB({},n),r.state={uniqueness:(Math.random()+"").replace(".",""),value:n.value||0,stars:[],halfStar:{at:Math.floor(n.value),hidden:n.half&&n.value%1<.5}},r.state.config={count:n.count,size:n.size,char:n.char,color1:n.color1,color2:n.color2,half:n.half,edit:n.edit},r}return Hee(e,[{key:"componentDidMount",value:function(){this.setState({stars:this.getStars(this.state.value)})}},{key:"componentWillReceiveProps",value:function(r){this.setState({stars:this.getStars(r.value),value:r.value,halfStar:{at:Math.floor(r.value),hidden:this.state.config.half&&r.value%1<.5}})}},{key:"isDecimal",value:function(r){return r%1!==0}},{key:"getRate",value:function(){var r=void 0;return this.state.config.half?r=Math.floor(this.state.value):r=Math.round(this.state.value),r}},{key:"getStars",value:function(r){typeof r>"u"&&(r=this.getRate());for(var i=[],s=0;s<this.state.config.count;s++)i.push({active:s<=r-1});return i}},{key:"mouseOver",value:function(r){var i=this.state,s=i.config,o=i.halfStar;if(s.edit){var a=Number(r.target.getAttribute("data-index"));if(s.half){var l=this.moreThanHalf(r,s.size);o.hidden=l,l&&(a=a+1),o.at=a}else a=a+1;this.setState({stars:this.getStars(a)})}}},{key:"moreThanHalf",value:function(r,i){var s=r.target,o=r.clientX-s.getBoundingClientRect().left;return o=Math.round(Math.abs(o)),o>i/2}},{key:"mouseLeave",value:function(){var r=this.state,i=r.value,s=r.halfStar,o=r.config;o.edit&&(o.half&&(s.hidden=!this.isDecimal(i),s.at=Math.floor(this.state.value)),this.setState({stars:this.getStars()}))}},{key:"clicked",value:function(r){var i=this.state,s=i.config,o=i.halfStar;if(s.edit){var a=Number(r.target.getAttribute("data-index")),l=void 0;if(s.half){var c=this.moreThanHalf(r,s.size);o.hidden=c,c&&(a=a+1),l=c?a:a+.5,o.at=a}else l=a=a+1;this.setState({value:l,stars:this.getStars(a)}),this.props.onChange(l)}}},{key:"renderHalfStarStyleElement",value:function(){var r=this.state,i=r.config,s=r.uniqueness;return Sw.default.createElement("style",{dangerouslySetInnerHTML:{__html:Jee(i.color2,s)}})}},{key:"renderStars",value:function(){var r=this,i=this.state,s=i.halfStar,o=i.stars,a=i.uniqueness,l=i.config,c=l.color1,u=l.color2,f=l.size,p=l.char,m=l.half,y=l.edit;return o.map(function(S,v){var g="";m&&!s.hidden&&s.at===v&&(g="react-stars-"+a);var _=mB({},$ee,{color:S.active?u:c,cursor:y?"pointer":"default",fontSize:f+"px"});return Sw.default.createElement("span",{className:g,style:_,key:v,"data-index":v,"data-forhalf":p,onMouseOver:r.mouseOver.bind(r),onMouseMove:r.mouseOver.bind(r),onMouseLeave:r.mouseLeave.bind(r),onClick:r.clicked.bind(r)},p)})}},{key:"render",value:function(){var r=this.props.className;return Sw.default.createElement("div",{className:r,style:Kee},this.state.config.half?this.renderHalfStarStyleElement():"",this.renderStars())}}]),e}(M6.Component);oR.propTypes={className:ea.default.string,edit:ea.default.bool,half:ea.default.bool,value:ea.default.number,count:ea.default.number,char:ea.default.string,size:ea.default.number,color1:ea.default.string,color2:ea.default.string};oR.defaultProps={edit:!0,half:!0,value:0,count:5,char:"",size:15,color1:"gray",color2:"#ffd700",onChange:function(){}};var A1=S6.default=oR;function qee(t){const{Thumbnail:e,Name:n,Price:r,Stars:i}=t;return R.jsxs("div",{className:"flex flex-col items-center justify-between hover:-translate-y-0.5 duration-500 h-72 md:h-80 md:w-56 w-44 bg-gray-50 rounded-lg hover:shadow-md transition-all",children:[R.jsxs("div",{className:"w-full h-3/5 relative",children:[R.jsx("img",{src:e,alt:n,className:"rounded-lg h-full w-full object-cover"}),R.jsxs("button",{className:"absolute top-2 right-2 text-xl md:text-2xl bg-gray-50/60 p-1.5 hover:scale-110 transition-all duration-300 rounded-full group",children:[R.jsx(x6,{className:"group-hover:hidden"}),R.jsx(sR,{className:"hidden group-hover:block group-hover:text-red-600 transition-all"})]})]}),R.jsxs("div",{className:"flex flex-col justify-between px-3 py-1.5 md:px-4 md:py-2 h-2/5 w-full",children:[R.jsx("h2",{className:"font-bold line-clamp-2 md:mt-1",children:n}),R.jsxs("div",{className:"w-full flex items-center justify-between py-1",children:[R.jsx("div",{className:"",children:R.jsx(A1,{count:5,value:y6(i),size:18,color2:"#ffd700",edit:!1})}),R.jsx("p",{className:"font-semibold ",children:R.jsxs("span",{children:["$",r]})})]})]})]})}function Yee(){return R.jsxs("div",{className:"flex flex-col items-center justify-between hover:-translate-y-0.5 duration-500 h-72 md:h-80 md:w-56 w-44 bg-gray-50 rounded-lg hover:shadow-md transition-all",children:[R.jsx("div",{className:"w-full h-3/5 relative",children:R.jsx("div",{className:"rounded-lg h-full w-full object-cover bg-gray-300"})}),R.jsxs("div",{className:"flex flex-col justify-between px-3 py-1.5 md:px-4 md:py-2 h-2/5 w-full",children:[R.jsx("h2",{className:"font-bold line-clamp-2 bg-gray-300 mt-2.5 w-3/5 h-4 rounded-full",children:""}),R.jsxs("div",{className:"w-full flex items-center justify-between py-1",children:[R.jsx("div",{className:"",children:R.jsx(A1,{count:5,size:18,color2:"gray",edit:!1})}),R.jsx("p",{className:"font-semibold bg-gray-300 w-11 h-4 rounded-full",children:R.jsx("span",{children:""})})]})]})]})}function Qee(){return R.jsxs("div",{className:"mx-auto 2xl:max-w-screen-2xl my-4 md:my-6 relative animate-pulse",children:[R.jsx("h2",{className:"px-2 text-2xl font-bold my-1 md:my-2 md:text-3xl",children:"Trend Products"}),R.jsxs("div",{className:"w-full overflow-auto scroll-smooth styled-scroll-bar",children:[R.jsx("div",{className:"h-72 bg-gradient-to-l from-gray-50/0 transition-all duration-500 to-gray-50 w-16 md:w-24 absolute z-10 left-0 top-9 flex items-center justify-start opacity-50",children:R.jsx("button",{className:"text-lg md:text-2xl p-2 bg-gray-100 shadow-2xl rounded-md mx-2",children:R.jsx(K_,{})})}),R.jsx("div",{className:"inline-flex items-center gap-x-8 px-4 py-2",children:Eee(10).map((t,e)=>R.jsx(Yee,{},e))}),R.jsx("div",{className:"h-72 bg-gradient-to-r from-gray-50/0 transition-all duration-500 to-gray-50 w-16 md:w-24 absolute z-10 right-0 top-8 flex items-center justify-end opacity-50",children:R.jsx("button",{className:"text-lg md:text-2xl p-2 bg-gray-100 shadow-2xl rounded-md mx-2",children:R.jsx(eo,{})})})]})]})}function Zee({isLoading:t,products:e,filterObject:n}){const r=iR(e,n),i=$.useRef();if(t)return R.jsx(Qee,{});if(!t&&e.length)return R.jsxs("div",{className:"mx-auto 2xl:max-w-screen-2xl my-4 md:my-10 relative",children:[R.jsxs("div",{className:"w-full px-2 my-1 md:px-4 flex items-center justify-between",children:[R.jsx("h2",{className:"text-2xl font-bold  md:text-3xl",children:"Trend Products"}),R.jsxs("span",{className:"flex items-center gap-x-1 md:gap-x-1.5 md:text-lg text-sm text-gray-500 hover:text-accent-300 transition-all cursor-pointer",children:["View All ",R.jsx(eo,{className:"text-xs md:text-base"})]})]}),R.jsxs("div",{ref:i,className:"w-full overflow-auto scroll-smooth styled-scroll-bar md:px-4",children:[R.jsx("div",{className:"h-72 bg-gradient-to-l from-gray-50/0 transition-all duration-500 to-gray-50 w-16 md:w-24 absolute z-10 left-0 top-9 flex items-center justify-start opacity-50 hover:opacity-100",children:R.jsx("button",{onClick:()=>{i.current.scrollLeft-=200},className:"text-lg md:text-2xl p-2 bg-gray-100 shadow-2xl rounded-md mx-2",children:R.jsx(K_,{})})}),R.jsx("div",{className:"inline-flex items-center gap-x-8 px-4 py-2",children:r.map(s=>R.jsx(qee,{...s},s.id))}),R.jsx("div",{className:"h-72 bg-gradient-to-r from-gray-50/0 transition-all duration-500 to-gray-50 w-16 md:w-24 absolute z-10 right-0 top-8 flex items-center justify-end opacity-50 hover:opacity-100",children:R.jsx("button",{onClick:()=>{i.current.scrollLeft+=200},className:"text-lg md:text-2xl p-2 bg-gray-100 shadow-2xl rounded-md mx-2",children:R.jsx(eo,{})})})]})]})}function ete(){return R.jsxs("div",{className:"mx-auto 2xl:max-w-screen-2xl mt-6 bg-gray-50 py-4 lg:py-6 lg:px-4",children:[R.jsx("h2",{className:"px-2 text-2xl font-bold my-1 md:my-2 md:text-3xl",children:"SPRING/SUMMER 2024"}),R.jsxs("div",{id:"wrapper",className:"flex flex-col gap-y-3 lg:flex-row lg:gap-x-3 items-center px-1 py-0.5 lg:px-4 lg:py-2",children:[R.jsx(v0,{}),R.jsxs("div",{className:"flex items-center gap-x-3 w-full",children:[R.jsx(v0,{}),R.jsx(v0,{})]}),R.jsx(v0,{})]})]})}const v0=()=>R.jsxs("div",{className:"w-full h-72 bg-gray-300/35 rounded-xl animate-pulse",children:[R.jsx("div",{className:"w-full h-3/5 relative",children:R.jsx("div",{className:"w-full h-full rounded-t-md object-cover bg-gray-400"})}),R.jsxs("div",{className:"flex flex-col items-start justify-evenly h-2/5 px-4 py-2",children:[R.jsx("span",{className:"my-0.5 w-1/4 p-0.5 rounded-full bg-gray-400"}),R.jsx("h2",{className:"w-3/4 p-0.5 rounded-full bg-gray-400"}),R.jsxs("p",{className:"mt-1 font-bold flex items-center w-full justify-between",children:[R.jsx("span",{className:"w-1/4 rounded-full h-2 bg-gray-400"}),R.jsx("div",{children:R.jsx(A1,{count:5,size:18,color2:"red",edit:!1})})]})]})]});function tte({products:t,isLoading:e}){const n=iR(t,{collections:["Summer"]});if(e)return R.jsx(ete,{});if(n.length&&!e)return R.jsxs(R.Fragment,{children:[R.jsxs("div",{className:"mx-auto 2xl:max-w-screen-2xl mt-6 bg-gray-100 py-4 lg:py-6",children:[R.jsx("h2",{className:"px-2 md:px-3 text-2xl font-bold my-1 md:text-3xl cursor-pointer hover:text-accent-300 w-fit transition-all",children:"SPRING/SUMMER 2024"}),R.jsxs("div",{id:"wrapper",className:"flex flex-col gap-y-3 lg:flex-row lg:gap-x-3 items-center px-2 py-1 lg:px-4 lg:py-2 lg:h-[450px]",children:[R.jsx(_0,{product:n[0]}),R.jsxs("div",{className:"flex items-center gap-x-3 w-full",children:[R.jsx(_0,{product:n[1],minimal:!0}),R.jsx(_0,{product:n[2],minimal:!0})]}),R.jsx(_0,{product:n[3]})]})]}),R.jsx(_6,{title:"Trending Products"})]})}const _0=({product:t,minimal:e})=>R.jsxs("div",{className:"w-full h-80 lg:h-96 bg-gray-300/35 rounded-xl cursor-pointer",children:[R.jsxs("div",{className:"w-full h-3/5 relative",children:[R.jsx("img",{src:t.Thumbnail,alt:t.Name,className:"w-full h-full rounded-t-md object-cover"}),R.jsxs("button",{className:"absolute top-2 right-2 text-xl md:text-2xl bg-gray-50/60 p-1.5 hover:scale-110 transition-all duration-300 rounded-full group",children:[R.jsx(x6,{className:"group-hover:hidden"}),R.jsx(sR,{className:"hidden group-hover:block group-hover:text-red-600 transition-all"})]})]}),R.jsxs("div",{className:"flex flex-col items-start h-2/5 justify-between px-4 py-2",children:[R.jsxs("div",{children:[R.jsx("span",{className:"text-xs my-0.5",children:t.Tags[0]}),R.jsx("h2",{className:"font-bold",children:t.Name}),R.jsxs("p",{className:`${e&&"hidden"} flex items-center justify-center gap-x-2 mt-2`,children:[t.Options.Color.map((n,r)=>R.jsx("span",{style:{backgroundColor:n},className:"p-2 rounded-full border border-gray-400"},r)),R.jsx("span",{className:"text-sm ml-0.5",children:"+5 more ..."})]})]}),R.jsxs("p",{className:"mt-1 font-bold flex items-center w-full justify-between",children:[R.jsxs("span",{children:["$",t.Price]}),R.jsx("div",{children:R.jsx(A1,{count:5,value:y6(t.Stars),size:e?12:18,color2:"#ffd700",edit:!1})})]})]})]}),fi={menTshirts:{imgUrl:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2Fproduct%20gallery%20banner%20(1).jpg?alt=media&token=99be3f20-a87c-4023-9c78-6ed0767cd21e",title:"T-Shirt for men's",offer:"30%"},menConverse:{imgUrl:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2Fproduct%20gallery%20banner%20(5).jpg?alt=media&token=90803c66-3bef-4059-ad6e-e67923837011",title:"Men's Converse sneakers",offer:"40%"},sweaterWomen:{imgUrl:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2Fproduct%20gallery%20banner%20(4).jpg?alt=media&token=92d2cf69-e1b8-4f0c-86f3-3241d4083e40",title:"Sweater For Women",offer:"30-60%"},womenTshirts:{imgUrl:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2Fproduct%20gallery%20banner%20(3).jpg?alt=media&token=92fb3974-60c9-4cf2-a81d-770e9137d24f",title:"T-shirt For Womens",offer:"40-50%"},fashionBags:{imgUrl:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2Fproduct%20gallery%20banner%20(2).jpg?alt=media&token=e6298847-e5b3-445d-8052-c710dfbd8407",title:"Fashoinable Bag Women",offer:"20%"}};function nte(){return R.jsxs("div",{className:"mx-auto 2xl:max-w-screen-2xl mt-4 md:mt-10",children:[R.jsxs("div",{className:"w-full px-2 my-1 md:my-4 md:px-4 flex items-center justify-between",children:[R.jsx("h2",{className:"text-2xl font-bold md:text-3xl",children:"Top Products"}),R.jsxs("span",{className:"flex items-center gap-x-1 md:gap-x-1.5 md:text-lg text-sm text-gray-500 hover:text-accent-300 transition-all cursor-pointer",children:["View All ",R.jsx(eo,{className:"text-xs md:text-base"})]})]}),R.jsxs("div",{id:"wrapper",className:"flex flex-col md:flex-row w-full items-center gap-y-3 px-2 py-1 gap-x-4 md:h-[600px] lg:h-[700px]",children:[R.jsxs("div",{className:"flex md:flex-col w-full md:h-full items-center justify-between gap-x-2",children:[R.jsxs("div",{className:"w-1/2 md:w-full h-48 md:h-1/2 rounded-md group",children:[R.jsxs("div",{className:"h-3/4 relative",children:[R.jsx("img",{src:fi.menTshirts.imgUrl,alt:"men t-shirt pic",className:"w-full h-full object-cover rounded-md"}),R.jsx("div",{className:"inset-0 bg-gray-300/70 absolute rounded invisible h-0 group-hover:h-full group-hover:visible ease-linear duration-500 flex items-center justify-center",children:R.jsx("button",{className:"px-2 py-1 bg-white/65 text-black font-bold border-2 border-gray-300 rounded-md text-sm hidden group-hover:block md:text-lg hover:scale-110 transition-all",children:"view more ..."})})]}),R.jsxs("p",{className:"flex flex-col items-center px-2 py-1 ",children:[R.jsx("span",{className:"font-bold text-sm line-clamp-1 text-center md:text-lg",children:fi.menTshirts.title}),R.jsxs("span",{className:"px-2 py-1 bg-red-400 rounded-md text-white text-xs md:text-base",children:["Up to ",fi.menTshirts.offer," OFF"]})]})]}),R.jsxs("div",{className:"w-1/2 md:w-full h-48 md:h-1/2  group",children:[R.jsxs("div",{className:"h-3/4 relative",children:[R.jsx("img",{src:fi.menConverse.imgUrl,alt:"men t-shirt pic",className:"w-full h-full object-cover rounded-md"}),R.jsx("div",{className:"inset-0 bg-gray-300/70 absolute rounded invisible h-0 group-hover:h-full group-hover:visible ease-linear duration-500 flex items-center justify-center",children:R.jsx("button",{className:"px-2 py-1 bg-white/65 text-black font-bold border-2 border-gray-300 rounded-md text-sm hidden group-hover:block md:text-lg hover:scale-110 transition-all",children:"view more ..."})})]}),R.jsxs("p",{className:"flex flex-col items-center px-2 py-1 ",children:[R.jsx("span",{className:"font-bold text-sm line-clamp-1 text-center md:text-lg",children:fi.menConverse.title}),R.jsxs("span",{className:"px-2 py-1 bg-red-400 rounded-md text-white text-xs md:text-base",children:["Up to ",fi.menConverse.offer," OFF"]})]})]})]}),R.jsxs("div",{className:"w-full h-72 md:h-full group",children:[R.jsxs("div",{className:"h-3/4 md:h-5/6 relative",children:[R.jsx("img",{src:fi.sweaterWomen.imgUrl,alt:"men t-shirt pic",className:"w-full h-full object-cover rounded-md"}),R.jsx("div",{className:"inset-0 bg-gray-300/70 absolute rounded invisible h-0 group-hover:h-full group-hover:visible ease-linear duration-500 flex items-center justify-center",children:R.jsx("button",{className:"px-2 py-1 bg-white/65 text-black font-bold border-2 border-gray-300 rounded-md text-sm hidden group-hover:block md:text-lg hover:scale-110 transition-all",children:"view more ..."})})]}),R.jsxs("p",{className:"flex flex-col h-1/4 md:h-1/6 items-center justify-center px-2 py-1 md:px-4 md:py-2",children:[R.jsx("span",{className:"font-bold text-sm line-clamp-1 text-center md:text-lg",children:fi.sweaterWomen.title}),R.jsxs("span",{className:"px-2 py-1 bg-red-400 rounded-md text-white text-xs md:text-base",children:["Up to ",fi.sweaterWomen.offer," OFF"]})]})]}),R.jsxs("div",{className:"flex md:flex-col w-full md:h-full items-center justify-between gap-x-2",children:[R.jsxs("div",{className:"w-1/2 md:w-full h-48 md:h-1/2 group",children:[R.jsxs("div",{className:"h-3/4 relative",children:[R.jsx("img",{src:fi.womenTshirts.imgUrl,alt:"men t-shirt pic",className:"w-full h-full object-cover rounded-md"}),R.jsx("div",{className:"inset-0 bg-gray-300/70 absolute rounded invisible h-0 group-hover:h-full group-hover:visible ease-linear duration-500 flex items-center justify-center",children:R.jsx("button",{className:"px-2 py-1 bg-white/65 text-black font-bold border-2 border-gray-300 rounded-md text-sm hidden group-hover:block md:text-lg hover:scale-110 transition-all",children:"view more ..."})})]}),R.jsxs("p",{className:"flex flex-col items-center px-2 py-1 ",children:[R.jsx("span",{className:"font-bold text-sm line-clamp-1 text-center md:text-lg",children:fi.womenTshirts.title}),R.jsxs("span",{className:"px-2 py-1 bg-red-400 rounded-md text-white text-xs md:text-base",children:["Up to ",fi.womenTshirts.offer," OFF"]})]})]}),R.jsxs("div",{className:"w-1/2 md:w-full h-48 md:h-1/2 group",children:[R.jsxs("div",{className:"h-3/4 relative",children:[R.jsx("img",{src:fi.fashionBags.imgUrl,alt:"men t-shirt pic",className:"w-full h-full object-cover rounded-md"}),R.jsx("div",{className:"inset-0 bg-gray-300/70 absolute rounded invisible h-0 group-hover:h-full group-hover:visible ease-linear duration-500 flex items-center justify-center",children:R.jsx("button",{className:"px-2 py-1 bg-white/65 text-black font-bold border-2 border-gray-300 rounded-md text-sm hidden group-hover:block md:text-lg hover:scale-110 transition-all",children:"view more ..."})})]}),R.jsxs("p",{className:"flex flex-col items-center px-2 py-1 ",children:[R.jsx("span",{className:"font-bold text-sm line-clamp-1 text-center md:text-lg",children:fi.fashionBags.title}),R.jsxs("span",{className:"px-2 py-1 bg-red-400 rounded-md text-white text-xs md:text-base",children:["Up to ",fi.fashionBags.offer," OFF"]})]})]})]})]})]})}var C6={exports:{}};(function(t,e){(function(r,i){t.exports=i($)})(lp,n=>(()=>{var r={"./node_modules/css-mediaquery/index.js":(a,l)=>{l.match=y,l.parse=S;var c=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,u=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,f=/^(?:(min|max)-)?(.+)/,p=/(em|rem|px|cm|mm|in|pt|pc)?$/,m=/(dpi|dpcm|dppx)?$/;function y(A,E){return S(A).some(function(b){var C=b.inverse,P=b.type==="all"||E.type===b.type;if(P&&C||!(P||C))return!1;var L=b.expressions.every(function(N){var T=N.feature,D=N.modifier,z=N.value,j=E[T];if(!j)return!1;switch(T){case"orientation":case"scan":return j.toLowerCase()===z.toLowerCase();case"width":case"height":case"device-width":case"device-height":z=_(z),j=_(j);break;case"resolution":z=g(z),j=g(j);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":z=v(z),j=v(j);break;case"grid":case"color":case"color-index":case"monochrome":z=parseInt(z,10)||1,j=parseInt(j,10)||0;break}switch(D){case"min":return j>=z;case"max":return j<=z;default:return j===z}});return L&&!C||!L&&C})}function S(A){return A.split(",").map(function(E){E=E.trim();var b=E.match(c),C=b[1],P=b[2],L=b[3]||"",N={};return N.inverse=!!C&&C.toLowerCase()==="not",N.type=P?P.toLowerCase():"all",L=L.match(/\([^\)]+\)/g)||[],N.expressions=L.map(function(T){var D=T.match(u),z=D[1].toLowerCase().match(f);return{modifier:z[1],feature:z[2],value:D[2]}}),N})}function v(A){var E=Number(A),b;return E||(b=A.match(/^(\d+)\s*\/\s*(\d+)$/),E=b[1]/b[2]),E}function g(A){var E=parseFloat(A),b=String(A).match(m)[1];switch(b){case"dpcm":return E/2.54;case"dppx":return E*96;default:return E}}function _(A){var E=parseFloat(A),b=String(A).match(p)[1];switch(b){case"em":return E*16;case"rem":return E*16;case"cm":return E*96/2.54;case"mm":return E*96/2.54/10;case"in":return E*96;case"pt":return E*72;case"pc":return E*72/12;default:return E}}},"./node_modules/hyphenate-style-name/index.js":(a,l,c)=>{c.r(l),c.d(l,{default:()=>S});var u=/[A-Z]/g,f=/^ms-/,p={};function m(v){return"-"+v.toLowerCase()}function y(v){if(p.hasOwnProperty(v))return p[v];var g=v.replace(u,m);return p[v]=f.test(g)?"-"+g:g}const S=y},"./node_modules/matchmediaquery/index.js":(a,l,c)=>{var u=c("./node_modules/css-mediaquery/index.js").match,f=typeof window<"u"?window.matchMedia:null;function p(y,S,v){var g=this;if(f&&!v){var _=f.call(window,y);this.matches=_.matches,this.media=_.media,_.addListener(b)}else this.matches=u(y,S),this.media=y;this.addListener=A,this.removeListener=E,this.dispose=C;function A(P){_&&_.addListener(P)}function E(P){_&&_.removeListener(P)}function b(P){g.matches=P.matches,g.media=P.media}function C(){_&&_.removeListener(b)}}function m(y,S,v){return new p(y,S,v)}a.exports=m},"./node_modules/object-assign/index.js":a=>{/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable;function f(m){if(m==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(m)}function p(){try{if(!Object.assign)return!1;var m=new String("abc");if(m[5]="de",Object.getOwnPropertyNames(m)[0]==="5")return!1;for(var y={},S=0;S<10;S++)y["_"+String.fromCharCode(S)]=S;var v=Object.getOwnPropertyNames(y).map(function(_){return y[_]});if(v.join("")!=="0123456789")return!1;var g={};return"abcdefghijklmnopqrst".split("").forEach(function(_){g[_]=_}),Object.keys(Object.assign({},g)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}a.exports=p()?Object.assign:function(m,y){for(var S,v=f(m),g,_=1;_<arguments.length;_++){S=Object(arguments[_]);for(var A in S)c.call(S,A)&&(v[A]=S[A]);if(l){g=l(S);for(var E=0;E<g.length;E++)u.call(S,g[E])&&(v[g[E]]=S[g[E]])}}return v}},"./node_modules/prop-types/checkPropTypes.js":(a,l,c)=>{var u=function(){};{var f=c("./node_modules/prop-types/lib/ReactPropTypesSecret.js"),p={},m=c("./node_modules/prop-types/lib/has.js");u=function(S){var v="Warning: "+S;typeof console<"u"&&console.error(v);try{throw new Error(v)}catch{}}}function y(S,v,g,_,A){for(var E in S)if(m(S,E)){var b;try{if(typeof S[E]!="function"){var C=Error((_||"React class")+": "+g+" type `"+E+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof S[E]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw C.name="Invariant Violation",C}b=S[E](v,E,_,g,null,f)}catch(L){b=L}if(b&&!(b instanceof Error)&&u((_||"React class")+": type specification of "+g+" `"+E+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof b+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),b instanceof Error&&!(b.message in p)){p[b.message]=!0;var P=A?A():"";u("Failed "+g+" type: "+b.message+(P??""))}}}y.resetWarningCache=function(){p={}},a.exports=y},"./node_modules/prop-types/factoryWithTypeCheckers.js":(a,l,c)=>{var u=c("./node_modules/react-is/index.js"),f=c("./node_modules/object-assign/index.js"),p=c("./node_modules/prop-types/lib/ReactPropTypesSecret.js"),m=c("./node_modules/prop-types/lib/has.js"),y=c("./node_modules/prop-types/checkPropTypes.js"),S=function(){};S=function(g){var _="Warning: "+g;typeof console<"u"&&console.error(_);try{throw new Error(_)}catch{}};function v(){return null}a.exports=function(g,_){var A=typeof Symbol=="function"&&Symbol.iterator,E="@@iterator";function b(ce){var oe=ce&&(A&&ce[A]||ce[E]);if(typeof oe=="function")return oe}var C="<<anonymous>>",P={array:D("array"),bigint:D("bigint"),bool:D("boolean"),func:D("function"),number:D("number"),object:D("object"),string:D("string"),symbol:D("symbol"),any:z(),arrayOf:j,element:H(),elementType:q(),instanceOf:Z,node:K(),objectOf:O,oneOf:ae,oneOfType:W,shape:te,exact:Te};function L(ce,oe){return ce===oe?ce!==0||1/ce===1/oe:ce!==ce&&oe!==oe}function N(ce,oe){this.message=ce,this.data=oe&&typeof oe=="object"?oe:{},this.stack=""}N.prototype=Error.prototype;function T(ce){var oe={},V=0;function he(ye,le,be,Ee,F,B,J){if(Ee=Ee||C,B=B||be,J!==p){if(_){var xe=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw xe.name="Invariant Violation",xe}else if(typeof console<"u"){var Se=Ee+":"+be;!oe[Se]&&V<3&&(S("You are manually calling a React.PropTypes validation function for the `"+B+"` prop on `"+Ee+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),oe[Se]=!0,V++)}}return le[be]==null?ye?le[be]===null?new N("The "+F+" `"+B+"` is marked as required "+("in `"+Ee+"`, but its value is `null`.")):new N("The "+F+" `"+B+"` is marked as required in "+("`"+Ee+"`, but its value is `undefined`.")):null:ce(le,be,Ee,F,B)}var ie=he.bind(null,!1);return ie.isRequired=he.bind(null,!0),ie}function D(ce){function oe(V,he,ie,ye,le,be){var Ee=V[he],F=Ae(Ee);if(F!==ce){var B=Pe(Ee);return new N("Invalid "+ye+" `"+le+"` of type "+("`"+B+"` supplied to `"+ie+"`, expected ")+("`"+ce+"`."),{expectedType:ce})}return null}return T(oe)}function z(){return T(v)}function j(ce){function oe(V,he,ie,ye,le){if(typeof ce!="function")return new N("Property `"+le+"` of component `"+ie+"` has invalid PropType notation inside arrayOf.");var be=V[he];if(!Array.isArray(be)){var Ee=Ae(be);return new N("Invalid "+ye+" `"+le+"` of type "+("`"+Ee+"` supplied to `"+ie+"`, expected an array."))}for(var F=0;F<be.length;F++){var B=ce(be,F,ie,ye,le+"["+F+"]",p);if(B instanceof Error)return B}return null}return T(oe)}function H(){function ce(oe,V,he,ie,ye){var le=oe[V];if(!g(le)){var be=Ae(le);return new N("Invalid "+ie+" `"+ye+"` of type "+("`"+be+"` supplied to `"+he+"`, expected a single ReactElement."))}return null}return T(ce)}function q(){function ce(oe,V,he,ie,ye){var le=oe[V];if(!u.isValidElementType(le)){var be=Ae(le);return new N("Invalid "+ie+" `"+ye+"` of type "+("`"+be+"` supplied to `"+he+"`, expected a single ReactElement type."))}return null}return T(ce)}function Z(ce){function oe(V,he,ie,ye,le){if(!(V[he]instanceof ce)){var be=ce.name||C,Ee=Ue(V[he]);return new N("Invalid "+ye+" `"+le+"` of type "+("`"+Ee+"` supplied to `"+ie+"`, expected ")+("instance of `"+be+"`."))}return null}return T(oe)}function ae(ce){if(!Array.isArray(ce))return arguments.length>1?S("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):S("Invalid argument supplied to oneOf, expected an array."),v;function oe(V,he,ie,ye,le){for(var be=V[he],Ee=0;Ee<ce.length;Ee++)if(L(be,ce[Ee]))return null;var F=JSON.stringify(ce,function(J,xe){var Se=Pe(xe);return Se==="symbol"?String(xe):xe});return new N("Invalid "+ye+" `"+le+"` of value `"+String(be)+"` "+("supplied to `"+ie+"`, expected one of "+F+"."))}return T(oe)}function O(ce){function oe(V,he,ie,ye,le){if(typeof ce!="function")return new N("Property `"+le+"` of component `"+ie+"` has invalid PropType notation inside objectOf.");var be=V[he],Ee=Ae(be);if(Ee!=="object")return new N("Invalid "+ye+" `"+le+"` of type "+("`"+Ee+"` supplied to `"+ie+"`, expected an object."));for(var F in be)if(m(be,F)){var B=ce(be,F,ie,ye,le+"."+F,p);if(B instanceof Error)return B}return null}return T(oe)}function W(ce){if(!Array.isArray(ce))return S("Invalid argument supplied to oneOfType, expected an instance of array."),v;for(var oe=0;oe<ce.length;oe++){var V=ce[oe];if(typeof V!="function")return S("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+$e(V)+" at index "+oe+"."),v}function he(ie,ye,le,be,Ee){for(var F=[],B=0;B<ce.length;B++){var J=ce[B],xe=J(ie,ye,le,be,Ee,p);if(xe==null)return null;xe.data&&m(xe.data,"expectedType")&&F.push(xe.data.expectedType)}var Se=F.length>0?", expected one of type ["+F.join(", ")+"]":"";return new N("Invalid "+be+" `"+Ee+"` supplied to "+("`"+le+"`"+Se+"."))}return T(he)}function K(){function ce(oe,V,he,ie,ye){return ne(oe[V])?null:new N("Invalid "+ie+" `"+ye+"` supplied to "+("`"+he+"`, expected a ReactNode."))}return T(ce)}function Y(ce,oe,V,he,ie){return new N((ce||"React class")+": "+oe+" type `"+V+"."+he+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+ie+"`.")}function te(ce){function oe(V,he,ie,ye,le){var be=V[he],Ee=Ae(be);if(Ee!=="object")return new N("Invalid "+ye+" `"+le+"` of type `"+Ee+"` "+("supplied to `"+ie+"`, expected `object`."));for(var F in ce){var B=ce[F];if(typeof B!="function")return Y(ie,ye,le,F,Pe(B));var J=B(be,F,ie,ye,le+"."+F,p);if(J)return J}return null}return T(oe)}function Te(ce){function oe(V,he,ie,ye,le){var be=V[he],Ee=Ae(be);if(Ee!=="object")return new N("Invalid "+ye+" `"+le+"` of type `"+Ee+"` "+("supplied to `"+ie+"`, expected `object`."));var F=f({},V[he],ce);for(var B in F){var J=ce[B];if(m(ce,B)&&typeof J!="function")return Y(ie,ye,le,B,Pe(J));if(!J)return new N("Invalid "+ye+" `"+le+"` key `"+B+"` supplied to `"+ie+"`.\nBad object: "+JSON.stringify(V[he],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(ce),null,"  "));var xe=J(be,B,ie,ye,le+"."+B,p);if(xe)return xe}return null}return T(oe)}function ne(ce){switch(typeof ce){case"number":case"string":case"undefined":return!0;case"boolean":return!ce;case"object":if(Array.isArray(ce))return ce.every(ne);if(ce===null||g(ce))return!0;var oe=b(ce);if(oe){var V=oe.call(ce),he;if(oe!==ce.entries){for(;!(he=V.next()).done;)if(!ne(he.value))return!1}else for(;!(he=V.next()).done;){var ie=he.value;if(ie&&!ne(ie[1]))return!1}}else return!1;return!0;default:return!1}}function de(ce,oe){return ce==="symbol"?!0:oe?oe["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&oe instanceof Symbol:!1}function Ae(ce){var oe=typeof ce;return Array.isArray(ce)?"array":ce instanceof RegExp?"object":de(oe,ce)?"symbol":oe}function Pe(ce){if(typeof ce>"u"||ce===null)return""+ce;var oe=Ae(ce);if(oe==="object"){if(ce instanceof Date)return"date";if(ce instanceof RegExp)return"regexp"}return oe}function $e(ce){var oe=Pe(ce);switch(oe){case"array":case"object":return"an "+oe;case"boolean":case"date":case"regexp":return"a "+oe;default:return oe}}function Ue(ce){return!ce.constructor||!ce.constructor.name?C:ce.constructor.name}return P.checkPropTypes=y,P.resetWarningCache=y.resetWarningCache,P.PropTypes=P,P}},"./node_modules/prop-types/index.js":(a,l,c)=>{{var u=c("./node_modules/react-is/index.js"),f=!0;a.exports=c("./node_modules/prop-types/factoryWithTypeCheckers.js")(u.isElement,f)}},"./node_modules/prop-types/lib/ReactPropTypesSecret.js":a=>{var l="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";a.exports=l},"./node_modules/prop-types/lib/has.js":a=>{a.exports=Function.call.bind(Object.prototype.hasOwnProperty)},"./node_modules/react-is/cjs/react-is.development.js":(a,l)=>{/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var c=typeof Symbol=="function"&&Symbol.for,u=c?Symbol.for("react.element"):60103,f=c?Symbol.for("react.portal"):60106,p=c?Symbol.for("react.fragment"):60107,m=c?Symbol.for("react.strict_mode"):60108,y=c?Symbol.for("react.profiler"):60114,S=c?Symbol.for("react.provider"):60109,v=c?Symbol.for("react.context"):60110,g=c?Symbol.for("react.async_mode"):60111,_=c?Symbol.for("react.concurrent_mode"):60111,A=c?Symbol.for("react.forward_ref"):60112,E=c?Symbol.for("react.suspense"):60113,b=c?Symbol.for("react.suspense_list"):60120,C=c?Symbol.for("react.memo"):60115,P=c?Symbol.for("react.lazy"):60116,L=c?Symbol.for("react.block"):60121,N=c?Symbol.for("react.fundamental"):60117,T=c?Symbol.for("react.responder"):60118,D=c?Symbol.for("react.scope"):60119;function z(J){return typeof J=="string"||typeof J=="function"||J===p||J===_||J===y||J===m||J===E||J===b||typeof J=="object"&&J!==null&&(J.$$typeof===P||J.$$typeof===C||J.$$typeof===S||J.$$typeof===v||J.$$typeof===A||J.$$typeof===N||J.$$typeof===T||J.$$typeof===D||J.$$typeof===L)}function j(J){if(typeof J=="object"&&J!==null){var xe=J.$$typeof;switch(xe){case u:var Se=J.type;switch(Se){case g:case _:case p:case y:case m:case E:return Se;default:var we=Se&&Se.$$typeof;switch(we){case v:case A:case P:case C:case S:return we;default:return xe}}case f:return xe}}}var H=g,q=_,Z=v,ae=S,O=u,W=A,K=p,Y=P,te=C,Te=f,ne=y,de=m,Ae=E,Pe=!1;function $e(J){return Pe||(Pe=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),Ue(J)||j(J)===g}function Ue(J){return j(J)===_}function ce(J){return j(J)===v}function oe(J){return j(J)===S}function V(J){return typeof J=="object"&&J!==null&&J.$$typeof===u}function he(J){return j(J)===A}function ie(J){return j(J)===p}function ye(J){return j(J)===P}function le(J){return j(J)===C}function be(J){return j(J)===f}function Ee(J){return j(J)===y}function F(J){return j(J)===m}function B(J){return j(J)===E}l.AsyncMode=H,l.ConcurrentMode=q,l.ContextConsumer=Z,l.ContextProvider=ae,l.Element=O,l.ForwardRef=W,l.Fragment=K,l.Lazy=Y,l.Memo=te,l.Portal=Te,l.Profiler=ne,l.StrictMode=de,l.Suspense=Ae,l.isAsyncMode=$e,l.isConcurrentMode=Ue,l.isContextConsumer=ce,l.isContextProvider=oe,l.isElement=V,l.isForwardRef=he,l.isFragment=ie,l.isLazy=ye,l.isMemo=le,l.isPortal=be,l.isProfiler=Ee,l.isStrictMode=F,l.isSuspense=B,l.isValidElementType=z,l.typeOf=j})()},"./node_modules/react-is/index.js":(a,l,c)=>{a.exports=c("./node_modules/react-is/cjs/react-is.development.js")},"./node_modules/shallow-equal/dist/index.esm.js":(a,l,c)=>{c.r(l),c.d(l,{shallowEqualArrays:()=>f,shallowEqualObjects:()=>u});function u(p,m){if(p===m)return!0;if(!p||!m)return!1;var y=Object.keys(p),S=Object.keys(m),v=y.length;if(S.length!==v)return!1;for(var g=0;g<v;g++){var _=y[g];if(p[_]!==m[_]||!Object.prototype.hasOwnProperty.call(m,_))return!1}return!0}function f(p,m){if(p===m)return!0;if(!p||!m)return!1;var y=p.length;if(m.length!==y)return!1;for(var S=0;S<y;S++)if(p[S]!==m[S])return!1;return!0}},"./src/Component.ts":function(a,l,c){var u=this&&this.__rest||function(y,S){var v={};for(var g in y)Object.prototype.hasOwnProperty.call(y,g)&&S.indexOf(g)<0&&(v[g]=y[g]);if(y!=null&&typeof Object.getOwnPropertySymbols=="function")for(var _=0,g=Object.getOwnPropertySymbols(y);_<g.length;_++)S.indexOf(g[_])<0&&Object.prototype.propertyIsEnumerable.call(y,g[_])&&(v[g[_]]=y[g[_]]);return v},f=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(l,"__esModule",{value:!0});var p=f(c("./src/useMediaQuery.ts")),m=function(y){var S=y.children,v=y.device,g=y.onChange,_=u(y,["children","device","onChange"]),A=(0,p.default)(_,v,g);return typeof S=="function"?S(A):A?S:null};l.default=m},"./src/Context.ts":(a,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});var u=c("react"),f=(0,u.createContext)(void 0);l.default=f},"./src/index.ts":function(a,l,c){var u=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(l,"__esModule",{value:!0}),l.Context=l.toQuery=l.useMediaQuery=l.default=void 0;var f=u(c("./src/useMediaQuery.ts"));l.useMediaQuery=f.default;var p=u(c("./src/Component.ts"));l.default=p.default;var m=u(c("./src/toQuery.ts"));l.toQuery=m.default;var y=u(c("./src/Context.ts"));l.Context=y.default},"./src/mediaQuery.ts":function(a,l,c){var u=this&&this.__assign||function(){return u=Object.assign||function(E){for(var b,C=1,P=arguments.length;C<P;C++){b=arguments[C];for(var L in b)Object.prototype.hasOwnProperty.call(b,L)&&(E[L]=b[L])}return E},u.apply(this,arguments)},f=this&&this.__rest||function(E,b){var C={};for(var P in E)Object.prototype.hasOwnProperty.call(E,P)&&b.indexOf(P)<0&&(C[P]=E[P]);if(E!=null&&typeof Object.getOwnPropertySymbols=="function")for(var L=0,P=Object.getOwnPropertySymbols(E);L<P.length;L++)b.indexOf(P[L])<0&&Object.prototype.propertyIsEnumerable.call(E,P[L])&&(C[P[L]]=E[P[L]]);return C},p=this&&this.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(l,"__esModule",{value:!0});var m=p(c("./node_modules/prop-types/index.js")),y=m.default.oneOfType([m.default.string,m.default.number]),S={all:m.default.bool,grid:m.default.bool,aural:m.default.bool,braille:m.default.bool,handheld:m.default.bool,print:m.default.bool,projection:m.default.bool,screen:m.default.bool,tty:m.default.bool,tv:m.default.bool,embossed:m.default.bool},v={orientation:m.default.oneOf(["portrait","landscape"]),scan:m.default.oneOf(["progressive","interlace"]),aspectRatio:m.default.string,deviceAspectRatio:m.default.string,height:y,deviceHeight:y,width:y,deviceWidth:y,color:m.default.bool,colorIndex:m.default.bool,monochrome:m.default.bool,resolution:y,type:Object.keys(S)};v.type;var g=f(v,["type"]),_=u({minAspectRatio:m.default.string,maxAspectRatio:m.default.string,minDeviceAspectRatio:m.default.string,maxDeviceAspectRatio:m.default.string,minHeight:y,maxHeight:y,minDeviceHeight:y,maxDeviceHeight:y,minWidth:y,maxWidth:y,minDeviceWidth:y,maxDeviceWidth:y,minColor:m.default.number,maxColor:m.default.number,minColorIndex:m.default.number,maxColorIndex:m.default.number,minMonochrome:m.default.number,maxMonochrome:m.default.number,minResolution:y,maxResolution:y},g),A=u(u({},S),_);l.default={all:A,types:S,matchers:v,features:_}},"./src/toQuery.ts":function(a,l,c){var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});var f=u(c("./node_modules/hyphenate-style-name/index.js")),p=u(c("./src/mediaQuery.ts")),m=function(g){return"not ".concat(g)},y=function(g,_){var A=(0,f.default)(g);return typeof _=="number"&&(_="".concat(_,"px")),_===!0?A:_===!1?m(A):"(".concat(A,": ").concat(_,")")},S=function(g){return g.join(" and ")},v=function(g){var _=[];return Object.keys(p.default.all).forEach(function(A){var E=g[A];E!=null&&_.push(y(A,E))}),S(_)};l.default=v},"./src/useMediaQuery.ts":function(a,l,c){var u=this&&this.__importDefault||function(N){return N&&N.__esModule?N:{default:N}};Object.defineProperty(l,"__esModule",{value:!0});var f=c("react"),p=u(c("./node_modules/matchmediaquery/index.js")),m=u(c("./node_modules/hyphenate-style-name/index.js")),y=c("./node_modules/shallow-equal/dist/index.esm.js"),S=u(c("./src/toQuery.ts")),v=u(c("./src/Context.ts")),g=function(N){return N.query||(0,S.default)(N)},_=function(N){if(N){var T=Object.keys(N);return T.reduce(function(D,z){return D[(0,m.default)(z)]=N[z],D},{})}},A=function(){var N=(0,f.useRef)(!1);return(0,f.useEffect)(function(){N.current=!0},[]),N.current},E=function(N){var T=(0,f.useContext)(v.default),D=function(){return _(N)||_(T)},z=(0,f.useState)(D),j=z[0],H=z[1];return(0,f.useEffect)(function(){var q=D();(0,y.shallowEqualObjects)(j,q)||H(q)},[N,T]),j},b=function(N){var T=function(){return g(N)},D=(0,f.useState)(T),z=D[0],j=D[1];return(0,f.useEffect)(function(){var H=T();z!==H&&j(H)},[N]),z},C=function(N,T){var D=function(){return(0,p.default)(N,T||{},!!T)},z=(0,f.useState)(D),j=z[0],H=z[1],q=A();return(0,f.useEffect)(function(){if(q){var Z=D();return H(Z),function(){Z&&Z.dispose()}}},[N,T]),j},P=function(N){var T=(0,f.useState)(N.matches),D=T[0],z=T[1];return(0,f.useEffect)(function(){var j=function(H){z(H.matches)};return N.addListener(j),z(N.matches),function(){N.removeListener(j)}},[N]),D},L=function(N,T,D){var z=E(T),j=b(N);if(!j)throw new Error("Invalid or missing MediaQuery!");var H=C(j,z),q=P(H),Z=A();return(0,f.useEffect)(function(){Z&&D&&D(q)},[q]),(0,f.useEffect)(function(){return function(){H&&H.dispose()}},[]),q};l.default=L},react:a=>{a.exports=n}},i={};function s(a){var l=i[a];if(l!==void 0)return l.exports;var c=i[a]={exports:{}};return r[a].call(c.exports,c,c.exports,s),c.exports}s.d=(a,l)=>{for(var c in l)s.o(l,c)&&!s.o(a,c)&&Object.defineProperty(a,c,{enumerable:!0,get:l[c]})},s.o=(a,l)=>Object.prototype.hasOwnProperty.call(a,l),s.r=a=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var o=s("./src/index.ts");return o})())})(C6);var b6=C6.exports,R6={},P6={},w1={},I6={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={animating:!1,autoplaying:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,dragging:!1,edgeDragged:!1,initialized:!1,lazyLoadedList:[],listHeight:null,listWidth:null,scrolling:!1,slideCount:null,slideHeight:null,slideWidth:null,swipeLeft:null,swiped:!1,swiping:!1,touchObject:{startX:0,startY:0,curX:0,curY:0},trackStyle:{},trackWidth:0,targetSlide:0},n=e;t.default=n})(I6);var rte="Expected a function",gB=NaN,ite="[object Symbol]",ste=/^\s+|\s+$/g,ote=/^[-+]0x[0-9a-f]+$/i,ate=/^0b[01]+$/i,lte=/^0o[0-7]+$/i,cte=parseInt,ute=typeof lp=="object"&&lp&&lp.Object===Object&&lp,hte=typeof self=="object"&&self&&self.Object===Object&&self,fte=ute||hte||Function("return this")(),dte=Object.prototype,pte=dte.toString,mte=Math.max,gte=Math.min,Aw=function(){return fte.Date.now()};function yte(t,e,n){var r,i,s,o,a,l,c=0,u=!1,f=!1,p=!0;if(typeof t!="function")throw new TypeError(rte);e=yB(e)||0,bT(n)&&(u=!!n.leading,f="maxWait"in n,s=f?mte(yB(n.maxWait)||0,e):s,p="trailing"in n?!!n.trailing:p);function m(C){var P=r,L=i;return r=i=void 0,c=C,o=t.apply(L,P),o}function y(C){return c=C,a=setTimeout(g,e),u?m(C):o}function S(C){var P=C-l,L=C-c,N=e-P;return f?gte(N,s-L):N}function v(C){var P=C-l,L=C-c;return l===void 0||P>=e||P<0||f&&L>=s}function g(){var C=Aw();if(v(C))return _(C);a=setTimeout(g,S(C))}function _(C){return a=void 0,p&&r?m(C):(r=i=void 0,o)}function A(){a!==void 0&&clearTimeout(a),c=0,r=l=i=a=void 0}function E(){return a===void 0?o:_(Aw())}function b(){var C=Aw(),P=v(C);if(r=arguments,i=this,l=C,P){if(a===void 0)return y(l);if(f)return a=setTimeout(g,e),m(l)}return a===void 0&&(a=setTimeout(g,e)),o}return b.cancel=A,b.flush=E,b}function bT(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function vte(t){return!!t&&typeof t=="object"}function _te(t){return typeof t=="symbol"||vte(t)&&pte.call(t)==ite}function yB(t){if(typeof t=="number")return t;if(_te(t))return gB;if(bT(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=bT(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(ste,"");var n=ate.test(t);return n||lte.test(t)?cte(t.slice(2),n?2:8):ote.test(t)?gB:+t}var xte=yte,L6={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(s=i(s,r(a)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var a in s)e.call(s,a)&&s[a]&&(o=i(o,a));return o}function i(s,o){return o?s?s+" "+o:s+o:s}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(L6);var E1=L6.exports,Xe={};Object.defineProperty(Xe,"__esModule",{value:!0});Xe.checkSpecKeys=Xe.checkNavigable=Xe.changeSlide=Xe.canUseDOM=Xe.canGoNext=void 0;Xe.clamp=D6;Xe.swipeStart=Xe.swipeMove=Xe.swipeEnd=Xe.slidesOnRight=Xe.slidesOnLeft=Xe.slideHandler=Xe.siblingDirection=Xe.safePreventDefault=Xe.lazyStartIndex=Xe.lazySlidesOnRight=Xe.lazySlidesOnLeft=Xe.lazyEndIndex=Xe.keyHandler=Xe.initializedState=Xe.getWidth=Xe.getTrackLeft=Xe.getTrackCSS=Xe.getTrackAnimateCSS=Xe.getTotalSlides=Xe.getSwipeDirection=Xe.getSlideCount=Xe.getRequiredLazySlides=Xe.getPreClones=Xe.getPostClones=Xe.getOnDemandLazySlides=Xe.getNavigableIndexes=Xe.getHeight=Xe.extractObject=void 0;var Ste=Ate($);function Ate(t){return t&&t.__esModule?t:{default:t}}function vB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Cn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vB(Object(n),!0).forEach(function(r){wte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wte(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function D6(t,e,n){return Math.max(e,Math.min(t,n))}var tu=function(e){var n=["onTouchStart","onTouchMove","onWheel"];n.includes(e._reactName)||e.preventDefault()};Xe.safePreventDefault=tu;var aR=function(e){for(var n=[],r=lR(e),i=cR(e),s=r;s<i;s++)e.lazyLoadedList.indexOf(s)<0&&n.push(s);return n};Xe.getOnDemandLazySlides=aR;var Ete=function(e){for(var n=[],r=lR(e),i=cR(e),s=r;s<i;s++)n.push(s);return n};Xe.getRequiredLazySlides=Ete;var lR=function(e){return e.currentSlide-B6(e)};Xe.lazyStartIndex=lR;var cR=function(e){return e.currentSlide+N6(e)};Xe.lazyEndIndex=cR;var B6=function(e){return e.centerMode?Math.floor(e.slidesToShow/2)+(parseInt(e.centerPadding)>0?1:0):0};Xe.lazySlidesOnLeft=B6;var N6=function(e){return e.centerMode?Math.floor((e.slidesToShow-1)/2)+1+(parseInt(e.centerPadding)>0?1:0):e.slidesToShow};Xe.lazySlidesOnRight=N6;var $_=function(e){return e&&e.offsetWidth||0};Xe.getWidth=$_;var uR=function(e){return e&&e.offsetHeight||0};Xe.getHeight=uR;var hR=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r,i,s,o;return r=e.startX-e.curX,i=e.startY-e.curY,s=Math.atan2(i,r),o=Math.round(s*180/Math.PI),o<0&&(o=360-Math.abs(o)),o<=45&&o>=0||o<=360&&o>=315?"left":o>=135&&o<=225?"right":n===!0?o>=35&&o<=135?"up":"down":"vertical"};Xe.getSwipeDirection=hR;var fR=function(e){var n=!0;return e.infinite||(e.centerMode&&e.currentSlide>=e.slideCount-1||e.slideCount<=e.slidesToShow||e.currentSlide>=e.slideCount-e.slidesToShow)&&(n=!1),n};Xe.canGoNext=fR;var Mte=function(e,n){var r={};return n.forEach(function(i){return r[i]=e[i]}),r};Xe.extractObject=Mte;var Tte=function(e){var n=Ste.default.Children.count(e.children),r=e.listRef,i=Math.ceil($_(r)),s=e.trackRef&&e.trackRef.node,o=Math.ceil($_(s)),a;if(e.vertical)a=i;else{var l=e.centerMode&&parseInt(e.centerPadding)*2;typeof e.centerPadding=="string"&&e.centerPadding.slice(-1)==="%"&&(l*=i/100),a=Math.ceil((i-l)/e.slidesToShow)}var c=r&&uR(r.querySelector('[data-index="0"]')),u=c*e.slidesToShow,f=e.currentSlide===void 0?e.initialSlide:e.currentSlide;e.rtl&&e.currentSlide===void 0&&(f=n-1-e.initialSlide);var p=e.lazyLoadedList||[],m=aR(Cn(Cn({},e),{},{currentSlide:f,lazyLoadedList:p}));p=p.concat(m);var y={slideCount:n,slideWidth:a,listWidth:i,trackWidth:o,currentSlide:f,slideHeight:c,listHeight:u,lazyLoadedList:p};return e.autoplaying===null&&e.autoplay&&(y.autoplaying="playing"),y};Xe.initializedState=Tte;var Cte=function(e){var n=e.waitForAnimate,r=e.animating,i=e.fade,s=e.infinite,o=e.index,a=e.slideCount,l=e.lazyLoad,c=e.currentSlide,u=e.centerMode,f=e.slidesToScroll,p=e.slidesToShow,m=e.useCSS,y=e.lazyLoadedList;if(n&&r)return{};var S=o,v,g,_,A={},E={},b=s?o:D6(o,0,a-1);if(i){if(!s&&(o<0||o>=a))return{};o<0?S=o+a:o>=a&&(S=o-a),l&&y.indexOf(S)<0&&(y=y.concat(S)),A={animating:!0,currentSlide:S,lazyLoadedList:y,targetSlide:S},E={animating:!1,targetSlide:S}}else v=S,S<0?(v=S+a,s?a%f!==0&&(v=a-a%f):v=0):!fR(e)&&S>c?S=v=c:u&&S>=a?(S=s?a:a-1,v=s?0:a-1):S>=a&&(v=S-a,s?a%f!==0&&(v=0):v=a-p),!s&&S+p>=a&&(v=a-p),g=Lm(Cn(Cn({},e),{},{slideIndex:S})),_=Lm(Cn(Cn({},e),{},{slideIndex:v})),s||(g===_&&(S=v),g=_),l&&(y=y.concat(aR(Cn(Cn({},e),{},{currentSlide:S})))),m?(A={animating:!0,currentSlide:v,trackStyle:dR(Cn(Cn({},e),{},{left:g})),lazyLoadedList:y,targetSlide:b},E={animating:!1,currentSlide:v,trackStyle:Im(Cn(Cn({},e),{},{left:_})),swipeLeft:null,targetSlide:b}):A={currentSlide:v,trackStyle:Im(Cn(Cn({},e),{},{left:_})),lazyLoadedList:y,targetSlide:b};return{state:A,nextState:E}};Xe.slideHandler=Cte;var bte=function(e,n){var r,i,s,o,a,l=e.slidesToScroll,c=e.slidesToShow,u=e.slideCount,f=e.currentSlide,p=e.targetSlide,m=e.lazyLoad,y=e.infinite;if(o=u%l!==0,r=o?0:(u-f)%l,n.message==="previous")s=r===0?l:c-r,a=f-s,m&&!y&&(i=f-s,a=i===-1?u-1:i),y||(a=p-l);else if(n.message==="next")s=r===0?l:r,a=f+s,m&&!y&&(a=(f+l)%u+r),y||(a=p+l);else if(n.message==="dots")a=n.index*n.slidesToScroll;else if(n.message==="children"){if(a=n.index,y){var S=U6(Cn(Cn({},e),{},{targetSlide:a}));a>n.currentSlide&&S==="left"?a=a-u:a<n.currentSlide&&S==="right"&&(a=a+u)}}else n.message==="index"&&(a=Number(n.index));return a};Xe.changeSlide=bte;var Rte=function(e,n,r){return e.target.tagName.match("TEXTAREA|INPUT|SELECT")||!n?"":e.keyCode===37?r?"next":"previous":e.keyCode===39?r?"previous":"next":""};Xe.keyHandler=Rte;var Pte=function(e,n,r){return e.target.tagName==="IMG"&&tu(e),!n||!r&&e.type.indexOf("mouse")!==-1?"":{dragging:!0,touchObject:{startX:e.touches?e.touches[0].pageX:e.clientX,startY:e.touches?e.touches[0].pageY:e.clientY,curX:e.touches?e.touches[0].pageX:e.clientX,curY:e.touches?e.touches[0].pageY:e.clientY}}};Xe.swipeStart=Pte;var Ite=function(e,n){var r=n.scrolling,i=n.animating,s=n.vertical,o=n.swipeToSlide,a=n.verticalSwiping,l=n.rtl,c=n.currentSlide,u=n.edgeFriction,f=n.edgeDragged,p=n.onEdge,m=n.swiped,y=n.swiping,S=n.slideCount,v=n.slidesToScroll,g=n.infinite,_=n.touchObject,A=n.swipeEvent,E=n.listHeight,b=n.listWidth;if(!r){if(i)return tu(e);s&&o&&a&&tu(e);var C,P={},L=Lm(n);_.curX=e.touches?e.touches[0].pageX:e.clientX,_.curY=e.touches?e.touches[0].pageY:e.clientY,_.swipeLength=Math.round(Math.sqrt(Math.pow(_.curX-_.startX,2)));var N=Math.round(Math.sqrt(Math.pow(_.curY-_.startY,2)));if(!a&&!y&&N>10)return{scrolling:!0};a&&(_.swipeLength=N);var T=(l?-1:1)*(_.curX>_.startX?1:-1);a&&(T=_.curY>_.startY?1:-1);var D=Math.ceil(S/v),z=hR(n.touchObject,a),j=_.swipeLength;return g||(c===0&&(z==="right"||z==="down")||c+1>=D&&(z==="left"||z==="up")||!fR(n)&&(z==="left"||z==="up"))&&(j=_.swipeLength*u,f===!1&&p&&(p(z),P.edgeDragged=!0)),!m&&A&&(A(z),P.swiped=!0),s?C=L+j*(E/b)*T:l?C=L-j*T:C=L+j*T,a&&(C=L+j*T),P=Cn(Cn({},P),{},{touchObject:_,swipeLeft:C,trackStyle:Im(Cn(Cn({},n),{},{left:C}))}),Math.abs(_.curX-_.startX)<Math.abs(_.curY-_.startY)*.8||_.swipeLength>10&&(P.swiping=!0,tu(e)),P}};Xe.swipeMove=Ite;var Lte=function(e,n){var r=n.dragging,i=n.swipe,s=n.touchObject,o=n.listWidth,a=n.touchThreshold,l=n.verticalSwiping,c=n.listHeight,u=n.swipeToSlide,f=n.scrolling,p=n.onSwipe,m=n.targetSlide,y=n.currentSlide,S=n.infinite;if(!r)return i&&tu(e),{};var v=l?c/a:o/a,g=hR(s,l),_={dragging:!1,edgeDragged:!1,scrolling:!1,swiping:!1,swiped:!1,swipeLeft:null,touchObject:{}};if(f||!s.swipeLength)return _;if(s.swipeLength>v){tu(e),p&&p(g);var A,E,b=S?y:m;switch(g){case"left":case"up":E=b+PT(n),A=u?RT(n,E):E,_.currentDirection=0;break;case"right":case"down":E=b-PT(n),A=u?RT(n,E):E,_.currentDirection=1;break;default:A=b}_.triggerSlideHandler=A}else{var C=Lm(n);_.trackStyle=dR(Cn(Cn({},n),{},{left:C}))}return _};Xe.swipeEnd=Lte;var O6=function(e){for(var n=e.infinite?e.slideCount*2:e.slideCount,r=e.infinite?e.slidesToShow*-1:0,i=e.infinite?e.slidesToShow*-1:0,s=[];r<n;)s.push(r),r=i+e.slidesToScroll,i+=Math.min(e.slidesToScroll,e.slidesToShow);return s};Xe.getNavigableIndexes=O6;var RT=function(e,n){var r=O6(e),i=0;if(n>r[r.length-1])n=r[r.length-1];else for(var s in r){if(n<r[s]){n=i;break}i=r[s]}return n};Xe.checkNavigable=RT;var PT=function(e){var n=e.centerMode?e.slideWidth*Math.floor(e.slidesToShow/2):0;if(e.swipeToSlide){var r,i=e.listRef,s=i.querySelectorAll&&i.querySelectorAll(".slick-slide")||[];if(Array.from(s).every(function(l){if(e.vertical){if(l.offsetTop+uR(l)/2>e.swipeLeft*-1)return r=l,!1}else if(l.offsetLeft-n+$_(l)/2>e.swipeLeft*-1)return r=l,!1;return!0}),!r)return 0;var o=e.rtl===!0?e.slideCount-e.currentSlide:e.currentSlide,a=Math.abs(r.dataset.index-o)||1;return a}else return e.slidesToScroll};Xe.getSlideCount=PT;var M1=function(e,n){return n.reduce(function(r,i){return r&&e.hasOwnProperty(i)},!0)?null:console.error("Keys Missing:",e)};Xe.checkSpecKeys=M1;var Im=function(e){M1(e,["left","variableWidth","slideCount","slidesToShow","slideWidth"]);var n,r,i=e.slideCount+2*e.slidesToShow;e.vertical?r=i*e.slideHeight:n=k6(e)*e.slideWidth;var s={opacity:1,transition:"",WebkitTransition:""};if(e.useTransform){var o=e.vertical?"translate3d(0px, "+e.left+"px, 0px)":"translate3d("+e.left+"px, 0px, 0px)",a=e.vertical?"translate3d(0px, "+e.left+"px, 0px)":"translate3d("+e.left+"px, 0px, 0px)",l=e.vertical?"translateY("+e.left+"px)":"translateX("+e.left+"px)";s=Cn(Cn({},s),{},{WebkitTransform:o,transform:a,msTransform:l})}else e.vertical?s.top=e.left:s.left=e.left;return e.fade&&(s={opacity:1}),n&&(s.width=n),r&&(s.height=r),window&&!window.addEventListener&&window.attachEvent&&(e.vertical?s.marginTop=e.left+"px":s.marginLeft=e.left+"px"),s};Xe.getTrackCSS=Im;var dR=function(e){M1(e,["left","variableWidth","slideCount","slidesToShow","slideWidth","speed","cssEase"]);var n=Im(e);return e.useTransform?(n.WebkitTransition="-webkit-transform "+e.speed+"ms "+e.cssEase,n.transition="transform "+e.speed+"ms "+e.cssEase):e.vertical?n.transition="top "+e.speed+"ms "+e.cssEase:n.transition="left "+e.speed+"ms "+e.cssEase,n};Xe.getTrackAnimateCSS=dR;var Lm=function(e){if(e.unslick)return 0;M1(e,["slideIndex","trackRef","infinite","centerMode","slideCount","slidesToShow","slidesToScroll","slideWidth","listWidth","variableWidth","slideHeight"]);var n=e.slideIndex,r=e.trackRef,i=e.infinite,s=e.centerMode,o=e.slideCount,a=e.slidesToShow,l=e.slidesToScroll,c=e.slideWidth,u=e.listWidth,f=e.variableWidth,p=e.slideHeight,m=e.fade,y=e.vertical,S=0,v,g,_=0;if(m||e.slideCount===1)return 0;var A=0;if(i?(A=-Op(e),o%l!==0&&n+l>o&&(A=-(n>o?a-(n-o):o%l)),s&&(A+=parseInt(a/2))):(o%l!==0&&n+l>o&&(A=a-o%l),s&&(A=parseInt(a/2))),S=A*c,_=A*p,y?v=n*p*-1+_:v=n*c*-1+S,f===!0){var E,b=r&&r.node;if(E=n+Op(e),g=b&&b.childNodes[E],v=g?g.offsetLeft*-1:0,s===!0){E=i?n+Op(e):n,g=b&&b.children[E],v=0;for(var C=0;C<E;C++)v-=b&&b.children[C]&&b.children[C].offsetWidth;v-=parseInt(e.centerPadding),v+=g&&(u-g.offsetWidth)/2}}return v};Xe.getTrackLeft=Lm;var Op=function(e){return e.unslick||!e.infinite?0:e.variableWidth?e.slideCount:e.slidesToShow+(e.centerMode?1:0)};Xe.getPreClones=Op;var F6=function(e){return e.unslick||!e.infinite?0:e.slideCount};Xe.getPostClones=F6;var k6=function(e){return e.slideCount===1?1:Op(e)+e.slideCount+F6(e)};Xe.getTotalSlides=k6;var U6=function(e){return e.targetSlide>e.currentSlide?e.targetSlide>e.currentSlide+V6(e)?"left":"right":e.targetSlide<e.currentSlide-z6(e)?"right":"left"};Xe.siblingDirection=U6;var V6=function(e){var n=e.slidesToShow,r=e.centerMode,i=e.rtl,s=e.centerPadding;if(r){var o=(n-1)/2+1;return parseInt(s)>0&&(o+=1),i&&n%2===0&&(o+=1),o}return i?0:n-1};Xe.slidesOnRight=V6;var z6=function(e){var n=e.slidesToShow,r=e.centerMode,i=e.rtl,s=e.centerPadding;if(r){var o=(n-1)/2+1;return parseInt(s)>0&&(o+=1),!i&&n%2===0&&(o+=1),o}return i?n-1:0};Xe.slidesOnLeft=z6;var Dte=function(){return!!(typeof window<"u"&&window.document&&window.document.createElement)};Xe.canUseDOM=Dte;var T1={};function IT(t){"@babel/helpers - typeof";return IT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},IT(t)}Object.defineProperty(T1,"__esModule",{value:!0});T1.Track=void 0;var il=H6($),ww=H6(E1),Ew=Xe;function H6(t){return t&&t.__esModule?t:{default:t}}function LT(){return LT=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},LT.apply(this,arguments)}function Bte(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _B(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Nte(t,e,n){return e&&_B(t.prototype,e),n&&_B(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ote(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&DT(t,e)}function DT(t,e){return DT=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},DT(t,e)}function Fte(t){var e=Ute();return function(){var r=J_(t),i;if(e){var s=J_(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return kte(this,i)}}function kte(t,e){if(e&&(IT(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return BT(t)}function BT(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ute(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function J_(t){return J_=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},J_(t)}function xB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ri(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xB(Object(n),!0).forEach(function(r){NT(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function NT(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Mw=function(e){var n,r,i,s,o;e.rtl?o=e.slideCount-1-e.index:o=e.index,i=o<0||o>=e.slideCount,e.centerMode?(s=Math.floor(e.slidesToShow/2),r=(o-e.currentSlide)%e.slideCount===0,o>e.currentSlide-s-1&&o<=e.currentSlide+s&&(n=!0)):n=e.currentSlide<=o&&o<e.currentSlide+e.slidesToShow;var a;e.targetSlide<0?a=e.targetSlide+e.slideCount:e.targetSlide>=e.slideCount?a=e.targetSlide-e.slideCount:a=e.targetSlide;var l=o===a;return{"slick-slide":!0,"slick-active":n,"slick-center":r,"slick-cloned":i,"slick-current":l}},Vte=function(e){var n={};return(e.variableWidth===void 0||e.variableWidth===!1)&&(n.width=e.slideWidth),e.fade&&(n.position="relative",e.vertical?n.top=-e.index*parseInt(e.slideHeight):n.left=-e.index*parseInt(e.slideWidth),n.opacity=e.currentSlide===e.index?1:0,e.useCSS&&(n.transition="opacity "+e.speed+"ms "+e.cssEase+", visibility "+e.speed+"ms "+e.cssEase)),n},Tw=function(e,n){return e.key||n},zte=function(e){var n,r=[],i=[],s=[],o=il.default.Children.count(e.children),a=(0,Ew.lazyStartIndex)(e),l=(0,Ew.lazyEndIndex)(e);return il.default.Children.forEach(e.children,function(c,u){var f,p={message:"children",index:u,slidesToScroll:e.slidesToScroll,currentSlide:e.currentSlide};!e.lazyLoad||e.lazyLoad&&e.lazyLoadedList.indexOf(u)>=0?f=c:f=il.default.createElement("div",null);var m=Vte(Ri(Ri({},e),{},{index:u})),y=f.props.className||"",S=Mw(Ri(Ri({},e),{},{index:u}));if(r.push(il.default.cloneElement(f,{key:"original"+Tw(f,u),"data-index":u,className:(0,ww.default)(S,y),tabIndex:"-1","aria-hidden":!S["slick-active"],style:Ri(Ri({outline:"none"},f.props.style||{}),m),onClick:function(_){f.props&&f.props.onClick&&f.props.onClick(_),e.focusOnSelect&&e.focusOnSelect(p)}})),e.infinite&&e.fade===!1){var v=o-u;v<=(0,Ew.getPreClones)(e)&&o!==e.slidesToShow&&(n=-v,n>=a&&(f=c),S=Mw(Ri(Ri({},e),{},{index:n})),i.push(il.default.cloneElement(f,{key:"precloned"+Tw(f,n),"data-index":n,tabIndex:"-1",className:(0,ww.default)(S,y),"aria-hidden":!S["slick-active"],style:Ri(Ri({},f.props.style||{}),m),onClick:function(_){f.props&&f.props.onClick&&f.props.onClick(_),e.focusOnSelect&&e.focusOnSelect(p)}}))),o!==e.slidesToShow&&(n=o+u,n<l&&(f=c),S=Mw(Ri(Ri({},e),{},{index:n})),s.push(il.default.cloneElement(f,{key:"postcloned"+Tw(f,n),"data-index":n,tabIndex:"-1",className:(0,ww.default)(S,y),"aria-hidden":!S["slick-active"],style:Ri(Ri({},f.props.style||{}),m),onClick:function(_){f.props&&f.props.onClick&&f.props.onClick(_),e.focusOnSelect&&e.focusOnSelect(p)}})))}}),e.rtl?i.concat(r,s).reverse():i.concat(r,s)},Hte=function(t){Ote(n,t);var e=Fte(n);function n(){var r;Bte(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),NT(BT(r),"node",null),NT(BT(r),"handleRef",function(a){r.node=a}),r}return Nte(n,[{key:"render",value:function(){var i=zte(this.props),s=this.props,o=s.onMouseEnter,a=s.onMouseOver,l=s.onMouseLeave,c={onMouseEnter:o,onMouseOver:a,onMouseLeave:l};return il.default.createElement("div",LT({ref:this.handleRef,className:"slick-track",style:this.props.trackStyle},c),i)}}]),n}(il.default.PureComponent);T1.Track=Hte;var C1={};function OT(t){"@babel/helpers - typeof";return OT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},OT(t)}Object.defineProperty(C1,"__esModule",{value:!0});C1.Dots=void 0;var x0=G6($),Gte=G6(E1),SB=Xe;function G6(t){return t&&t.__esModule?t:{default:t}}function AB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jte(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AB(Object(n),!0).forEach(function(r){Wte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wte(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xte(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wB(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Kte(t,e,n){return e&&wB(t.prototype,e),n&&wB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function $te(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&FT(t,e)}function FT(t,e){return FT=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},FT(t,e)}function Jte(t){var e=Qte();return function(){var r=q_(t),i;if(e){var s=q_(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return qte(this,i)}}function qte(t,e){if(e&&(OT(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yte(t)}function Yte(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qte(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function q_(t){return q_=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},q_(t)}var Zte=function(e){var n;return e.infinite?n=Math.ceil(e.slideCount/e.slidesToScroll):n=Math.ceil((e.slideCount-e.slidesToShow)/e.slidesToScroll)+1,n},ene=function(t){$te(n,t);var e=Jte(n);function n(){return Xte(this,n),e.apply(this,arguments)}return Kte(n,[{key:"clickHandler",value:function(i,s){s.preventDefault(),this.props.clickHandler(i)}},{key:"render",value:function(){for(var i=this.props,s=i.onMouseEnter,o=i.onMouseOver,a=i.onMouseLeave,l=i.infinite,c=i.slidesToScroll,u=i.slidesToShow,f=i.slideCount,p=i.currentSlide,m=Zte({slideCount:f,slidesToScroll:c,slidesToShow:u,infinite:l}),y={onMouseEnter:s,onMouseOver:o,onMouseLeave:a},S=[],v=0;v<m;v++){var g=(v+1)*c-1,_=l?g:(0,SB.clamp)(g,0,f-1),A=_-(c-1),E=l?A:(0,SB.clamp)(A,0,f-1),b=(0,Gte.default)({"slick-active":l?p>=E&&p<=_:p===E}),C={message:"dots",index:v,slidesToScroll:c,currentSlide:p},P=this.clickHandler.bind(this,C);S=S.concat(x0.default.createElement("li",{key:v,className:b},x0.default.cloneElement(this.props.customPaging(v),{onClick:P})))}return x0.default.cloneElement(this.props.appendDots(S),jte({className:this.props.dotsClass},y))}}]),n}(x0.default.PureComponent);C1.Dots=ene;var If={};function kT(t){"@babel/helpers - typeof";return kT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kT(t)}Object.defineProperty(If,"__esModule",{value:!0});If.PrevArrow=If.NextArrow=void 0;var uf=W6($),j6=W6(E1),tne=Xe;function W6(t){return t&&t.__esModule?t:{default:t}}function Y_(){return Y_=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Y_.apply(this,arguments)}function EB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Q_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EB(Object(n),!0).forEach(function(r){nne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nne(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function X6(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function MB(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function K6(t,e,n){return e&&MB(t.prototype,e),n&&MB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function $6(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UT(t,e)}function UT(t,e){return UT=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},UT(t,e)}function J6(t){var e=sne();return function(){var r=Z_(t),i;if(e){var s=Z_(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return rne(this,i)}}function rne(t,e){if(e&&(kT(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ine(t)}function ine(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sne(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Z_(t){return Z_=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Z_(t)}var one=function(t){$6(n,t);var e=J6(n);function n(){return X6(this,n),e.apply(this,arguments)}return K6(n,[{key:"clickHandler",value:function(i,s){s&&s.preventDefault(),this.props.clickHandler(i,s)}},{key:"render",value:function(){var i={"slick-arrow":!0,"slick-prev":!0},s=this.clickHandler.bind(this,{message:"previous"});!this.props.infinite&&(this.props.currentSlide===0||this.props.slideCount<=this.props.slidesToShow)&&(i["slick-disabled"]=!0,s=null);var o={key:"0","data-role":"none",className:(0,j6.default)(i),style:{display:"block"},onClick:s},a={currentSlide:this.props.currentSlide,slideCount:this.props.slideCount},l;return this.props.prevArrow?l=uf.default.cloneElement(this.props.prevArrow,Q_(Q_({},o),a)):l=uf.default.createElement("button",Y_({key:"0",type:"button"},o)," ","Previous"),l}}]),n}(uf.default.PureComponent);If.PrevArrow=one;var ane=function(t){$6(n,t);var e=J6(n);function n(){return X6(this,n),e.apply(this,arguments)}return K6(n,[{key:"clickHandler",value:function(i,s){s&&s.preventDefault(),this.props.clickHandler(i,s)}},{key:"render",value:function(){var i={"slick-arrow":!0,"slick-next":!0},s=this.clickHandler.bind(this,{message:"next"});(0,tne.canGoNext)(this.props)||(i["slick-disabled"]=!0,s=null);var o={key:"1","data-role":"none",className:(0,j6.default)(i),style:{display:"block"},onClick:s},a={currentSlide:this.props.currentSlide,slideCount:this.props.slideCount},l;return this.props.nextArrow?l=uf.default.cloneElement(this.props.nextArrow,Q_(Q_({},o),a)):l=uf.default.createElement("button",Y_({key:"1",type:"button"},o)," ","Next"),l}}]),n}(uf.default.PureComponent);If.NextArrow=ane;var q6=function(){if(typeof Map<"u")return Map;function t(e,n){var r=-1;return e.some(function(i,s){return i[0]===n?(r=s,!0):!1}),r}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(n){var r=t(this.__entries__,n),i=this.__entries__[r];return i&&i[1]},e.prototype.set=function(n,r){var i=t(this.__entries__,n);~i?this.__entries__[i][1]=r:this.__entries__.push([n,r])},e.prototype.delete=function(n){var r=this.__entries__,i=t(r,n);~i&&r.splice(i,1)},e.prototype.has=function(n){return!!~t(this.__entries__,n)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(n,r){r===void 0&&(r=null);for(var i=0,s=this.__entries__;i<s.length;i++){var o=s[i];n.call(r,o[1],o[0])}},e}()}(),VT=typeof window<"u"&&typeof document<"u"&&window.document===document,ex=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),lne=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(ex):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),cne=2;function une(t,e){var n=!1,r=!1,i=0;function s(){n&&(n=!1,t()),r&&a()}function o(){lne(s)}function a(){var l=Date.now();if(n){if(l-i<cne)return;r=!0}else n=!0,r=!1,setTimeout(o,e);i=l}return a}var hne=20,fne=["top","right","bottom","left","width","height","size","weight"],dne=typeof MutationObserver<"u",pne=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=une(this.refresh.bind(this),hne)}return t.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},t.prototype.removeObserver=function(e){var n=this.observers_,r=n.indexOf(e);~r&&n.splice(r,1),!n.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},t.prototype.updateObservers_=function(){var e=this.observers_.filter(function(n){return n.gatherActive(),n.hasActive()});return e.forEach(function(n){return n.broadcastActive()}),e.length>0},t.prototype.connect_=function(){!VT||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),dne?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){!VT||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(e){var n=e.propertyName,r=n===void 0?"":n,i=fne.some(function(s){return!!~r.indexOf(s)});i&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),Y6=function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];Object.defineProperty(t,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return t},Lf=function(t){var e=t&&t.ownerDocument&&t.ownerDocument.defaultView;return e||ex},Q6=b1(0,0,0,0);function tx(t){return parseFloat(t)||0}function TB(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce(function(r,i){var s=t["border-"+i+"-width"];return r+tx(s)},0)}function mne(t){for(var e=["top","right","bottom","left"],n={},r=0,i=e;r<i.length;r++){var s=i[r],o=t["padding-"+s];n[s]=tx(o)}return n}function gne(t){var e=t.getBBox();return b1(0,0,e.width,e.height)}function yne(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return Q6;var r=Lf(t).getComputedStyle(t),i=mne(r),s=i.left+i.right,o=i.top+i.bottom,a=tx(r.width),l=tx(r.height);if(r.boxSizing==="border-box"&&(Math.round(a+s)!==e&&(a-=TB(r,"left","right")+s),Math.round(l+o)!==n&&(l-=TB(r,"top","bottom")+o)),!_ne(t)){var c=Math.round(a+s)-e,u=Math.round(l+o)-n;Math.abs(c)!==1&&(a-=c),Math.abs(u)!==1&&(l-=u)}return b1(i.left,i.top,a,l)}var vne=function(){return typeof SVGGraphicsElement<"u"?function(t){return t instanceof Lf(t).SVGGraphicsElement}:function(t){return t instanceof Lf(t).SVGElement&&typeof t.getBBox=="function"}}();function _ne(t){return t===Lf(t).document.documentElement}function xne(t){return VT?vne(t)?gne(t):yne(t):Q6}function Sne(t){var e=t.x,n=t.y,r=t.width,i=t.height,s=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,o=Object.create(s.prototype);return Y6(o,{x:e,y:n,width:r,height:i,top:n,right:e+r,bottom:i+n,left:e}),o}function b1(t,e,n,r){return{x:t,y:e,width:n,height:r}}var Ane=function(){function t(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=b1(0,0,0,0),this.target=e}return t.prototype.isActive=function(){var e=xne(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},t}(),wne=function(){function t(e,n){var r=Sne(n);Y6(this,{target:e,contentRect:r})}return t}(),Ene=function(){function t(e,n,r){if(this.activeObservations_=[],this.observations_=new q6,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=n,this.callbackCtx_=r}return t.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof Lf(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)||(n.set(e,new Ane(e)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof Lf(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)&&(n.delete(e),n.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&e.activeObservations_.push(n)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,n=this.activeObservations_.map(function(r){return new wne(r.target,r.broadcastRect())});this.callback_.call(e,n,e),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),Z6=typeof WeakMap<"u"?new WeakMap:new q6,eV=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=pne.getInstance(),r=new Ene(e,n,this);Z6.set(this,r)}return t}();["observe","unobserve","disconnect"].forEach(function(t){eV.prototype[t]=function(){var e;return(e=Z6.get(this))[t].apply(e,arguments)}});var Mne=function(){return typeof ex.ResizeObserver<"u"?ex.ResizeObserver:eV}();const Tne=Object.freeze(Object.defineProperty({__proto__:null,default:Mne},Symbol.toStringTag,{value:"Module"})),Cne=R7(Tne);Object.defineProperty(w1,"__esModule",{value:!0});w1.InnerSlider=void 0;var di=Eg($),bne=Eg(I6),Rne=Eg(xte),Pne=Eg(E1),In=Xe,Ine=T1,Lne=C1,CB=If,Dne=Eg(Cne);function Eg(t){return t&&t.__esModule?t:{default:t}}function nx(t){"@babel/helpers - typeof";return nx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nx(t)}function rx(){return rx=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rx.apply(this,arguments)}function Bne(t,e){if(t==null)return{};var n=Nne(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Nne(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function bB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bB(Object(n),!0).forEach(function(r){Ht(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function One(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function RB(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Fne(t,e,n){return e&&RB(t.prototype,e),n&&RB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function kne(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zT(t,e)}function zT(t,e){return zT=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},zT(t,e)}function Une(t){var e=zne();return function(){var r=ix(t),i;if(e){var s=ix(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return Vne(this,i)}}function Vne(t,e){if(e&&(nx(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zt(t)}function zt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zne(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ix(t){return ix=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},ix(t)}function Ht(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Hne=function(t){kne(n,t);var e=Une(n);function n(r){var i;One(this,n),i=e.call(this,r),Ht(zt(i),"listRefHandler",function(o){return i.list=o}),Ht(zt(i),"trackRefHandler",function(o){return i.track=o}),Ht(zt(i),"adaptHeight",function(){if(i.props.adaptiveHeight&&i.list){var o=i.list.querySelector('[data-index="'.concat(i.state.currentSlide,'"]'));i.list.style.height=(0,In.getHeight)(o)+"px"}}),Ht(zt(i),"componentDidMount",function(){if(i.props.onInit&&i.props.onInit(),i.props.lazyLoad){var o=(0,In.getOnDemandLazySlides)(pt(pt({},i.props),i.state));o.length>0&&(i.setState(function(l){return{lazyLoadedList:l.lazyLoadedList.concat(o)}}),i.props.onLazyLoad&&i.props.onLazyLoad(o))}var a=pt({listRef:i.list,trackRef:i.track},i.props);i.updateState(a,!0,function(){i.adaptHeight(),i.props.autoplay&&i.autoPlay("update")}),i.props.lazyLoad==="progressive"&&(i.lazyLoadTimer=setInterval(i.progressiveLazyLoad,1e3)),i.ro=new Dne.default(function(){i.state.animating?(i.onWindowResized(!1),i.callbackTimers.push(setTimeout(function(){return i.onWindowResized()},i.props.speed))):i.onWindowResized()}),i.ro.observe(i.list),document.querySelectorAll&&Array.prototype.forEach.call(document.querySelectorAll(".slick-slide"),function(l){l.onfocus=i.props.pauseOnFocus?i.onSlideFocus:null,l.onblur=i.props.pauseOnFocus?i.onSlideBlur:null}),window.addEventListener?window.addEventListener("resize",i.onWindowResized):window.attachEvent("onresize",i.onWindowResized)}),Ht(zt(i),"componentWillUnmount",function(){i.animationEndCallback&&clearTimeout(i.animationEndCallback),i.lazyLoadTimer&&clearInterval(i.lazyLoadTimer),i.callbackTimers.length&&(i.callbackTimers.forEach(function(o){return clearTimeout(o)}),i.callbackTimers=[]),window.addEventListener?window.removeEventListener("resize",i.onWindowResized):window.detachEvent("onresize",i.onWindowResized),i.autoplayTimer&&clearInterval(i.autoplayTimer),i.ro.disconnect()}),Ht(zt(i),"componentDidUpdate",function(o){if(i.checkImagesLoad(),i.props.onReInit&&i.props.onReInit(),i.props.lazyLoad){var a=(0,In.getOnDemandLazySlides)(pt(pt({},i.props),i.state));a.length>0&&(i.setState(function(u){return{lazyLoadedList:u.lazyLoadedList.concat(a)}}),i.props.onLazyLoad&&i.props.onLazyLoad(a))}i.adaptHeight();var l=pt(pt({listRef:i.list,trackRef:i.track},i.props),i.state),c=i.didPropsChange(o);c&&i.updateState(l,c,function(){i.state.currentSlide>=di.default.Children.count(i.props.children)&&i.changeSlide({message:"index",index:di.default.Children.count(i.props.children)-i.props.slidesToShow,currentSlide:i.state.currentSlide}),i.props.autoplay?i.autoPlay("update"):i.pause("paused")})}),Ht(zt(i),"onWindowResized",function(o){i.debouncedResize&&i.debouncedResize.cancel(),i.debouncedResize=(0,Rne.default)(function(){return i.resizeWindow(o)},50),i.debouncedResize()}),Ht(zt(i),"resizeWindow",function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,a=!!(i.track&&i.track.node);if(a){var l=pt(pt({listRef:i.list,trackRef:i.track},i.props),i.state);i.updateState(l,o,function(){i.props.autoplay?i.autoPlay("update"):i.pause("paused")}),i.setState({animating:!1}),clearTimeout(i.animationEndCallback),delete i.animationEndCallback}}),Ht(zt(i),"updateState",function(o,a,l){var c=(0,In.initializedState)(o);o=pt(pt(pt({},o),c),{},{slideIndex:c.currentSlide});var u=(0,In.getTrackLeft)(o);o=pt(pt({},o),{},{left:u});var f=(0,In.getTrackCSS)(o);(a||di.default.Children.count(i.props.children)!==di.default.Children.count(o.children))&&(c.trackStyle=f),i.setState(c,l)}),Ht(zt(i),"ssrInit",function(){if(i.props.variableWidth){var o=0,a=0,l=[],c=(0,In.getPreClones)(pt(pt(pt({},i.props),i.state),{},{slideCount:i.props.children.length})),u=(0,In.getPostClones)(pt(pt(pt({},i.props),i.state),{},{slideCount:i.props.children.length}));i.props.children.forEach(function(P){l.push(P.props.style.width),o+=P.props.style.width});for(var f=0;f<c;f++)a+=l[l.length-1-f],o+=l[l.length-1-f];for(var p=0;p<u;p++)o+=l[p];for(var m=0;m<i.state.currentSlide;m++)a+=l[m];var y={width:o+"px",left:-a+"px"};if(i.props.centerMode){var S="".concat(l[i.state.currentSlide],"px");y.left="calc(".concat(y.left," + (100% - ").concat(S,") / 2 ) ")}return{trackStyle:y}}var v=di.default.Children.count(i.props.children),g=pt(pt(pt({},i.props),i.state),{},{slideCount:v}),_=(0,In.getPreClones)(g)+(0,In.getPostClones)(g)+v,A=100/i.props.slidesToShow*_,E=100/_,b=-E*((0,In.getPreClones)(g)+i.state.currentSlide)*A/100;i.props.centerMode&&(b+=(100-E*A/100)/2);var C={width:A+"%",left:b+"%"};return{slideWidth:E+"%",trackStyle:C}}),Ht(zt(i),"checkImagesLoad",function(){var o=i.list&&i.list.querySelectorAll&&i.list.querySelectorAll(".slick-slide img")||[],a=o.length,l=0;Array.prototype.forEach.call(o,function(c){var u=function(){return++l&&l>=a&&i.onWindowResized()};if(!c.onclick)c.onclick=function(){return c.parentNode.focus()};else{var f=c.onclick;c.onclick=function(){f(),c.parentNode.focus()}}c.onload||(i.props.lazyLoad?c.onload=function(){i.adaptHeight(),i.callbackTimers.push(setTimeout(i.onWindowResized,i.props.speed))}:(c.onload=u,c.onerror=function(){u(),i.props.onLazyLoadError&&i.props.onLazyLoadError()}))})}),Ht(zt(i),"progressiveLazyLoad",function(){for(var o=[],a=pt(pt({},i.props),i.state),l=i.state.currentSlide;l<i.state.slideCount+(0,In.getPostClones)(a);l++)if(i.state.lazyLoadedList.indexOf(l)<0){o.push(l);break}for(var c=i.state.currentSlide-1;c>=-(0,In.getPreClones)(a);c--)if(i.state.lazyLoadedList.indexOf(c)<0){o.push(c);break}o.length>0?(i.setState(function(u){return{lazyLoadedList:u.lazyLoadedList.concat(o)}}),i.props.onLazyLoad&&i.props.onLazyLoad(o)):i.lazyLoadTimer&&(clearInterval(i.lazyLoadTimer),delete i.lazyLoadTimer)}),Ht(zt(i),"slideHandler",function(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,l=i.props,c=l.asNavFor,u=l.beforeChange,f=l.onLazyLoad,p=l.speed,m=l.afterChange,y=i.state.currentSlide,S=(0,In.slideHandler)(pt(pt(pt({index:o},i.props),i.state),{},{trackRef:i.track,useCSS:i.props.useCSS&&!a})),v=S.state,g=S.nextState;if(v){u&&u(y,v.currentSlide);var _=v.lazyLoadedList.filter(function(A){return i.state.lazyLoadedList.indexOf(A)<0});f&&_.length>0&&f(_),!i.props.waitForAnimate&&i.animationEndCallback&&(clearTimeout(i.animationEndCallback),m&&m(y),delete i.animationEndCallback),i.setState(v,function(){c&&i.asNavForIndex!==o&&(i.asNavForIndex=o,c.innerSlider.slideHandler(o)),g&&(i.animationEndCallback=setTimeout(function(){var A=g.animating,E=Bne(g,["animating"]);i.setState(E,function(){i.callbackTimers.push(setTimeout(function(){return i.setState({animating:A})},10)),m&&m(v.currentSlide),delete i.animationEndCallback})},p))})}}),Ht(zt(i),"changeSlide",function(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,l=pt(pt({},i.props),i.state),c=(0,In.changeSlide)(l,o);if(!(c!==0&&!c)&&(a===!0?i.slideHandler(c,a):i.slideHandler(c),i.props.autoplay&&i.autoPlay("update"),i.props.focusOnSelect)){var u=i.list.querySelectorAll(".slick-current");u[0]&&u[0].focus()}}),Ht(zt(i),"clickHandler",function(o){i.clickable===!1&&(o.stopPropagation(),o.preventDefault()),i.clickable=!0}),Ht(zt(i),"keyHandler",function(o){var a=(0,In.keyHandler)(o,i.props.accessibility,i.props.rtl);a!==""&&i.changeSlide({message:a})}),Ht(zt(i),"selectHandler",function(o){i.changeSlide(o)}),Ht(zt(i),"disableBodyScroll",function(){var o=function(l){l=l||window.event,l.preventDefault&&l.preventDefault(),l.returnValue=!1};window.ontouchmove=o}),Ht(zt(i),"enableBodyScroll",function(){window.ontouchmove=null}),Ht(zt(i),"swipeStart",function(o){i.props.verticalSwiping&&i.disableBodyScroll();var a=(0,In.swipeStart)(o,i.props.swipe,i.props.draggable);a!==""&&i.setState(a)}),Ht(zt(i),"swipeMove",function(o){var a=(0,In.swipeMove)(o,pt(pt(pt({},i.props),i.state),{},{trackRef:i.track,listRef:i.list,slideIndex:i.state.currentSlide}));a&&(a.swiping&&(i.clickable=!1),i.setState(a))}),Ht(zt(i),"swipeEnd",function(o){var a=(0,In.swipeEnd)(o,pt(pt(pt({},i.props),i.state),{},{trackRef:i.track,listRef:i.list,slideIndex:i.state.currentSlide}));if(a){var l=a.triggerSlideHandler;delete a.triggerSlideHandler,i.setState(a),l!==void 0&&(i.slideHandler(l),i.props.verticalSwiping&&i.enableBodyScroll())}}),Ht(zt(i),"touchEnd",function(o){i.swipeEnd(o),i.clickable=!0}),Ht(zt(i),"slickPrev",function(){i.callbackTimers.push(setTimeout(function(){return i.changeSlide({message:"previous"})},0))}),Ht(zt(i),"slickNext",function(){i.callbackTimers.push(setTimeout(function(){return i.changeSlide({message:"next"})},0))}),Ht(zt(i),"slickGoTo",function(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(o=Number(o),isNaN(o))return"";i.callbackTimers.push(setTimeout(function(){return i.changeSlide({message:"index",index:o,currentSlide:i.state.currentSlide},a)},0))}),Ht(zt(i),"play",function(){var o;if(i.props.rtl)o=i.state.currentSlide-i.props.slidesToScroll;else if((0,In.canGoNext)(pt(pt({},i.props),i.state)))o=i.state.currentSlide+i.props.slidesToScroll;else return!1;i.slideHandler(o)}),Ht(zt(i),"autoPlay",function(o){i.autoplayTimer&&clearInterval(i.autoplayTimer);var a=i.state.autoplaying;if(o==="update"){if(a==="hovered"||a==="focused"||a==="paused")return}else if(o==="leave"){if(a==="paused"||a==="focused")return}else if(o==="blur"&&(a==="paused"||a==="hovered"))return;i.autoplayTimer=setInterval(i.play,i.props.autoplaySpeed+50),i.setState({autoplaying:"playing"})}),Ht(zt(i),"pause",function(o){i.autoplayTimer&&(clearInterval(i.autoplayTimer),i.autoplayTimer=null);var a=i.state.autoplaying;o==="paused"?i.setState({autoplaying:"paused"}):o==="focused"?(a==="hovered"||a==="playing")&&i.setState({autoplaying:"focused"}):a==="playing"&&i.setState({autoplaying:"hovered"})}),Ht(zt(i),"onDotsOver",function(){return i.props.autoplay&&i.pause("hovered")}),Ht(zt(i),"onDotsLeave",function(){return i.props.autoplay&&i.state.autoplaying==="hovered"&&i.autoPlay("leave")}),Ht(zt(i),"onTrackOver",function(){return i.props.autoplay&&i.pause("hovered")}),Ht(zt(i),"onTrackLeave",function(){return i.props.autoplay&&i.state.autoplaying==="hovered"&&i.autoPlay("leave")}),Ht(zt(i),"onSlideFocus",function(){return i.props.autoplay&&i.pause("focused")}),Ht(zt(i),"onSlideBlur",function(){return i.props.autoplay&&i.state.autoplaying==="focused"&&i.autoPlay("blur")}),Ht(zt(i),"render",function(){var o=(0,Pne.default)("slick-slider",i.props.className,{"slick-vertical":i.props.vertical,"slick-initialized":!0}),a=pt(pt({},i.props),i.state),l=(0,In.extractObject)(a,["fade","cssEase","speed","infinite","centerMode","focusOnSelect","currentSlide","lazyLoad","lazyLoadedList","rtl","slideWidth","slideHeight","listHeight","vertical","slidesToShow","slidesToScroll","slideCount","trackStyle","variableWidth","unslick","centerPadding","targetSlide","useCSS"]),c=i.props.pauseOnHover;l=pt(pt({},l),{},{onMouseEnter:c?i.onTrackOver:null,onMouseLeave:c?i.onTrackLeave:null,onMouseOver:c?i.onTrackOver:null,focusOnSelect:i.props.focusOnSelect&&i.clickable?i.selectHandler:null});var u;if(i.props.dots===!0&&i.state.slideCount>=i.props.slidesToShow){var f=(0,In.extractObject)(a,["dotsClass","slideCount","slidesToShow","currentSlide","slidesToScroll","clickHandler","children","customPaging","infinite","appendDots"]),p=i.props.pauseOnDotsHover;f=pt(pt({},f),{},{clickHandler:i.changeSlide,onMouseEnter:p?i.onDotsLeave:null,onMouseOver:p?i.onDotsOver:null,onMouseLeave:p?i.onDotsLeave:null}),u=di.default.createElement(Lne.Dots,f)}var m,y,S=(0,In.extractObject)(a,["infinite","centerMode","currentSlide","slideCount","slidesToShow","prevArrow","nextArrow"]);S.clickHandler=i.changeSlide,i.props.arrows&&(m=di.default.createElement(CB.PrevArrow,S),y=di.default.createElement(CB.NextArrow,S));var v=null;i.props.vertical&&(v={height:i.state.listHeight});var g=null;i.props.vertical===!1?i.props.centerMode===!0&&(g={padding:"0px "+i.props.centerPadding}):i.props.centerMode===!0&&(g={padding:i.props.centerPadding+" 0px"});var _=pt(pt({},v),g),A=i.props.touchMove,E={className:"slick-list",style:_,onClick:i.clickHandler,onMouseDown:A?i.swipeStart:null,onMouseMove:i.state.dragging&&A?i.swipeMove:null,onMouseUp:A?i.swipeEnd:null,onMouseLeave:i.state.dragging&&A?i.swipeEnd:null,onTouchStart:A?i.swipeStart:null,onTouchMove:i.state.dragging&&A?i.swipeMove:null,onTouchEnd:A?i.touchEnd:null,onTouchCancel:i.state.dragging&&A?i.swipeEnd:null,onKeyDown:i.props.accessibility?i.keyHandler:null},b={className:o,dir:"ltr",style:i.props.style};return i.props.unslick&&(E={className:"slick-list"},b={className:o}),di.default.createElement("div",b,i.props.unslick?"":m,di.default.createElement("div",rx({ref:i.listRefHandler},E),di.default.createElement(Ine.Track,rx({ref:i.trackRefHandler},l),i.props.children)),i.props.unslick?"":y,i.props.unslick?"":u)}),i.list=null,i.track=null,i.state=pt(pt({},bne.default),{},{currentSlide:i.props.initialSlide,slideCount:di.default.Children.count(i.props.children)}),i.callbackTimers=[],i.clickable=!0,i.debouncedResize=null;var s=i.ssrInit();return i.state=pt(pt({},i.state),s),i}return Fne(n,[{key:"didPropsChange",value:function(i){for(var s=!1,o=0,a=Object.keys(this.props);o<a.length;o++){var l=a[o];if(!i.hasOwnProperty(l)){s=!0;break}if(!(nx(i[l])==="object"||typeof i[l]=="function")&&i[l]!==this.props[l]){s=!0;break}}return s||di.default.Children.count(this.props.children)!==di.default.Children.count(i.children)}}]),n}(di.default.Component);w1.InnerSlider=Hne;var Gne=function(t){return t.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}).toLowerCase()},jne=Gne,Wne=jne,Xne=function(t){var e=/[height|width]$/;return e.test(t)},PB=function(t){var e="",n=Object.keys(t);return n.forEach(function(r,i){var s=t[r];r=Wne(r),Xne(r)&&typeof s=="number"&&(s=s+"px"),s===!0?e+=r:s===!1?e+="not "+r:e+="("+r+": "+s+")",i<n.length-1&&(e+=" and ")}),e},Kne=function(t){var e="";return typeof t=="string"?t:t instanceof Array?(t.forEach(function(n,r){e+=PB(n),r<t.length-1&&(e+=", ")}),e):PB(t)},$ne=Kne,tV={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=n($);function n(s){return s&&s.__esModule?s:{default:s}}var r={accessibility:!0,adaptiveHeight:!1,afterChange:null,appendDots:function(o){return e.default.createElement("ul",{style:{display:"block"}},o)},arrows:!0,autoplay:!1,autoplaySpeed:3e3,beforeChange:null,centerMode:!1,centerPadding:"50px",className:"",cssEase:"ease",customPaging:function(o){return e.default.createElement("button",null,o+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:null,nextArrow:null,onEdge:null,onInit:null,onLazyLoadError:null,onReInit:null,pauseOnDotsHover:!1,pauseOnFocus:!1,pauseOnHover:!0,prevArrow:null,responsive:null,rows:1,rtl:!1,slide:"div",slidesPerRow:1,slidesToScroll:1,slidesToShow:1,speed:500,swipe:!0,swipeEvent:null,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,waitForAnimate:!0},i=r;t.default=i})(tV);var Cw,IB;function Jne(){if(IB)return Cw;IB=1;function t(e){this.options=e,!e.deferSetup&&this.setup()}return t.prototype={constructor:t,setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){!this.initialised&&this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(e){return this.options===e||this.options.match===e}},Cw=t,Cw}var bw,LB;function nV(){if(LB)return bw;LB=1;function t(r,i){var s=0,o=r.length,a;for(s;s<o&&(a=i(r[s],s),a!==!1);s++);}function e(r){return Object.prototype.toString.apply(r)==="[object Array]"}function n(r){return typeof r=="function"}return bw={isFunction:n,isArray:e,each:t},bw}var Rw,DB;function qne(){if(DB)return Rw;DB=1;var t=Jne(),e=nV().each;function n(r,i){this.query=r,this.isUnconditional=i,this.handlers=[],this.mql=window.matchMedia(r);var s=this;this.listener=function(o){s.mql=o.currentTarget||o,s.assess()},this.mql.addListener(this.listener)}return n.prototype={constuctor:n,addHandler:function(r){var i=new t(r);this.handlers.push(i),this.matches()&&i.on()},removeHandler:function(r){var i=this.handlers;e(i,function(s,o){if(s.equals(r))return s.destroy(),!i.splice(o,1)})},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){e(this.handlers,function(r){r.destroy()}),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var r=this.matches()?"on":"off";e(this.handlers,function(i){i[r]()})}},Rw=n,Rw}var Pw,BB;function Yne(){if(BB)return Pw;BB=1;var t=qne(),e=nV(),n=e.each,r=e.isFunction,i=e.isArray;function s(){if(!window.matchMedia)throw new Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!window.matchMedia("only all").matches}return s.prototype={constructor:s,register:function(o,a,l){var c=this.queries,u=l&&this.browserIsIncapable;return c[o]||(c[o]=new t(o,u)),r(a)&&(a={match:a}),i(a)||(a=[a]),n(a,function(f){r(f)&&(f={match:f}),c[o].addHandler(f)}),this},unregister:function(o,a){var l=this.queries[o];return l&&(a?l.removeHandler(a):(l.clear(),delete this.queries[o])),this}},Pw=s,Pw}var Iw,NB;function Qne(){if(NB)return Iw;NB=1;var t=Yne();return Iw=new t,Iw}(function(t){function e(L){"@babel/helpers - typeof";return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},e(L)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a($),r=w1,i=a($ne),s=a(tV),o=Xe;function a(L){return L&&L.__esModule?L:{default:L}}function l(){return l=Object.assign||function(L){for(var N=1;N<arguments.length;N++){var T=arguments[N];for(var D in T)Object.prototype.hasOwnProperty.call(T,D)&&(L[D]=T[D])}return L},l.apply(this,arguments)}function c(L,N){var T=Object.keys(L);if(Object.getOwnPropertySymbols){var D=Object.getOwnPropertySymbols(L);N&&(D=D.filter(function(z){return Object.getOwnPropertyDescriptor(L,z).enumerable})),T.push.apply(T,D)}return T}function u(L){for(var N=1;N<arguments.length;N++){var T=arguments[N]!=null?arguments[N]:{};N%2?c(Object(T),!0).forEach(function(D){b(L,D,T[D])}):Object.getOwnPropertyDescriptors?Object.defineProperties(L,Object.getOwnPropertyDescriptors(T)):c(Object(T)).forEach(function(D){Object.defineProperty(L,D,Object.getOwnPropertyDescriptor(T,D))})}return L}function f(L,N){if(!(L instanceof N))throw new TypeError("Cannot call a class as a function")}function p(L,N){for(var T=0;T<N.length;T++){var D=N[T];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(L,D.key,D)}}function m(L,N,T){return N&&p(L.prototype,N),T&&p(L,T),Object.defineProperty(L,"prototype",{writable:!1}),L}function y(L,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function");L.prototype=Object.create(N&&N.prototype,{constructor:{value:L,writable:!0,configurable:!0}}),Object.defineProperty(L,"prototype",{writable:!1}),N&&S(L,N)}function S(L,N){return S=Object.setPrototypeOf||function(D,z){return D.__proto__=z,D},S(L,N)}function v(L){var N=A();return function(){var D=E(L),z;if(N){var j=E(this).constructor;z=Reflect.construct(D,arguments,j)}else z=D.apply(this,arguments);return g(this,z)}}function g(L,N){if(N&&(e(N)==="object"||typeof N=="function"))return N;if(N!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _(L)}function _(L){if(L===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return L}function A(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function E(L){return E=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},E(L)}function b(L,N,T){return N in L?Object.defineProperty(L,N,{value:T,enumerable:!0,configurable:!0,writable:!0}):L[N]=T,L}var C=(0,o.canUseDOM)()&&Qne(),P=function(L){y(T,L);var N=v(T);function T(D){var z;return f(this,T),z=N.call(this,D),b(_(z),"innerSliderRefHandler",function(j){return z.innerSlider=j}),b(_(z),"slickPrev",function(){return z.innerSlider.slickPrev()}),b(_(z),"slickNext",function(){return z.innerSlider.slickNext()}),b(_(z),"slickGoTo",function(j){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return z.innerSlider.slickGoTo(j,H)}),b(_(z),"slickPause",function(){return z.innerSlider.pause("paused")}),b(_(z),"slickPlay",function(){return z.innerSlider.autoPlay("play")}),z.state={breakpoint:null},z._responsiveMediaHandlers=[],z}return m(T,[{key:"media",value:function(z,j){C.register(z,j),this._responsiveMediaHandlers.push({query:z,handler:j})}},{key:"componentDidMount",value:function(){var z=this;if(this.props.responsive){var j=this.props.responsive.map(function(q){return q.breakpoint});j.sort(function(q,Z){return q-Z}),j.forEach(function(q,Z){var ae;Z===0?ae=(0,i.default)({minWidth:0,maxWidth:q}):ae=(0,i.default)({minWidth:j[Z-1]+1,maxWidth:q}),(0,o.canUseDOM)()&&z.media(ae,function(){z.setState({breakpoint:q})})});var H=(0,i.default)({minWidth:j.slice(-1)[0]});(0,o.canUseDOM)()&&this.media(H,function(){z.setState({breakpoint:null})})}}},{key:"componentWillUnmount",value:function(){this._responsiveMediaHandlers.forEach(function(z){C.unregister(z.query,z.handler)})}},{key:"render",value:function(){var z=this,j,H;this.state.breakpoint?(H=this.props.responsive.filter(function(ne){return ne.breakpoint===z.state.breakpoint}),j=H[0].settings==="unslick"?"unslick":u(u(u({},s.default),this.props),H[0].settings)):j=u(u({},s.default),this.props),j.centerMode&&(j.slidesToScroll>1,j.slidesToScroll=1),j.fade&&(j.slidesToShow>1,j.slidesToScroll>1,j.slidesToShow=1,j.slidesToScroll=1);var q=n.default.Children.toArray(this.props.children);q=q.filter(function(ne){return typeof ne=="string"?!!ne.trim():!!ne}),j.variableWidth&&(j.rows>1||j.slidesPerRow>1)&&(console.warn("variableWidth is not supported in case of rows > 1 or slidesPerRow > 1"),j.variableWidth=!1);for(var Z=[],ae=null,O=0;O<q.length;O+=j.rows*j.slidesPerRow){for(var W=[],K=O;K<O+j.rows*j.slidesPerRow;K+=j.slidesPerRow){for(var Y=[],te=K;te<K+j.slidesPerRow&&(j.variableWidth&&q[te].props.style&&(ae=q[te].props.style.width),!(te>=q.length));te+=1)Y.push(n.default.cloneElement(q[te],{key:100*O+10*K+te,tabIndex:-1,style:{width:"".concat(100/j.slidesPerRow,"%"),display:"inline-block"}}));W.push(n.default.createElement("div",{key:10*O+K},Y))}j.variableWidth?Z.push(n.default.createElement("div",{key:O,style:{width:ae}},W)):Z.push(n.default.createElement("div",{key:O},W))}if(j==="unslick"){var Te="regular slider "+(this.props.className||"");return n.default.createElement("div",{className:Te},q)}else Z.length<=j.slidesToShow&&(j.unslick=!0);return n.default.createElement(r.InnerSlider,l({style:this.props.style,ref:this.innerSliderRefHandler},j),Z)}}]),T}(n.default.Component);t.default=P})(P6);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=n(P6);function n(i){return i&&i.__esModule?i:{default:i}}var r=e.default;t.default=r})(R6);const Zne=bx(R6),OB=[{title:"Sale of the Month",subTitle:"Best Deals",offer:40,bgUrl:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2FRectangle%2054.svg?alt=media&token=c38cea1f-61d2-4541-b566-b54bed5f4c9d"},{title:"100% Fresh Fruit",subTitle:"Summer Sale",offer:25,bgUrl:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2Fmae-mu-9002s2VnOAY-unsplash.jpg?alt=media&token=0efd9de9-21b1-4fa0-98f7-b22ca47616e4"},{title:"85% Fat Free",subTitle:"Low-Fat Meat",offer:10,bgUrl:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2FRectangle%2054%20(1).svg?alt=media&token=653bc353-2038-44c8-97f0-8aa13f752bdd"}];function ere(){const t=b6.useMediaQuery({maxWidth:425}),e={dots:!0,infinite:!0,arrows:!1,speed:1200,slidesToShow:1,slidesToScroll:1,fade:t,appendDots:n};function n(r){return R.jsx(R.Fragment,{children:R.jsx("div",{className:"flex justify-center sm:justify-between items-end mt-2 gap-x-2 absolute bottom-0 w-full py-2 md:hidden",children:R.jsx("div",{className:"flex items-center justify-center gap-x-1.5",children:r.map(i=>R.jsx("p",{className:`${i.props.className===""?"bg-gray-950":"bg-gray-100"} w-2.5 h-2.5 rounded-full transition-all`},i.key))})})})}return R.jsx("div",{className:"mx-auto 2xl:max-w-screen-2xl my-4 px-2 md:px-6",children:t?R.jsx(Zne,{...e,children:OB.map((r,i)=>R.jsx(FB,{...r},i))}):R.jsx("div",{className:"flex items-center justify-evenly gap-x-8 lg:gap-x-8 w-full px-4 py-2 group",children:OB.map((r,i)=>R.jsx(FB,{...r},i))})})}const FB=({bgUrl:t,title:e,subTitle:n,offer:r})=>R.jsxs("div",{className:"w-full md:w-1/3 h-[500px] md:h-[550px] relative md:hover:-translate-y-6 transition-all duration-500 md:group-hover:scale-95 md:hover:!scale-105",children:[R.jsx("div",{className:"absolute w-full top-0 h-full -z-10",children:R.jsx("img",{src:t,alt:"slide pic",className:"h-full w-full object-cover rounded-md"})}),R.jsxs("div",{className:"h-full w-full z-10 flex flex-col items-center py-6 lg:py-8 rounded-md",children:[R.jsxs("div",{className:"flex flex-col items-center gap-y-4",children:[R.jsx("p",{className:"text-gray-200 text-lg",children:n}),R.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-100 cursor-pointer",children:e}),R.jsxs("p",{className:"text-gray-200 text-xl",children:["Up To ",r,"% ",R.jsx("span",{className:"bg-white text-accent-700 text-base px-3 py-1 rounded-xl",children:"OFF"})]})]}),R.jsxs("button",{className:"flex items-center my-4 md:my-6 gap-x-2 text-xl text-accent-800 hover:bg-accent-50/60 transition-all duration-500 bg-white px-4 py-2 md:px-6 md:py-3 rounded-xl",children:[R.jsx("span",{children:"Shop Now"}),R.jsx(eo,{})]})]})]}),tre=[{sellerName:"John",img:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2FRectangle%204338.svg?alt=media&token=1f7ab351-dcc5-46df-a479-eda4d0f4dfe0",sellerShogaln:"ABC Store"},{sellerName:"Alice",img:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2FRectangle%204338%20(3).svg?alt=media&token=8889bc8b-42c2-47e0-965c-cae8836dfc1a",sellerShogaln:"XYZ Market"},{sellerName:"Bob",img:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2FRectangle%204338%20(2).svg?alt=media&token=f74a301e-5871-45e7-bca3-b992ddcd1f7f",sellerShogaln:"123 Shop"},{sellerName:"Emily",img:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2FRectangle%204338%20(1).svg?alt=media&token=9dd41abb-7c79-477a-bce2-585a5937e858",sellerShogaln:"Best Deals Co."}];function nre(){return R.jsxs("div",{className:"mx-auto 2xl:max-w-screen-2xl mt-6 md:mt-8",children:[R.jsxs("div",{className:"w-full flex flex-col items-center justify-center md:gap-y-3",children:[R.jsx("span",{className:"text-sm md:text-lg text-accent-600 font-semibold",children:"Our Best Seller's"}),R.jsx("h2",{className:"text-2xl md:text-5xl text-center font-bold",children:"Meet Awesome Seller's !"}),R.jsx("span",{className:"text-center w-3/5 text-lg hidden md:inline",children:"Discover a wide range of products from various sellers.  Join our community and become a seller to showcase your unique items.  Share your creations and reach a global audience.  Start your selling journey today and turn your passion into profits! "})]}),R.jsx("div",{id:"wrapper",className:"px-4 py-3 md:py-6 flex items-center flex-wrap justify-evenly gap-x-8 gap-y-12 w-full",children:tre.map((t,e)=>R.jsxs("div",{className:"w-24 h-32 md:w-1/5 md:h-96 flex flex-col relative md:cursor-pointer",children:[R.jsx("div",{className:"w-full h-3/4 md:h-full",children:R.jsx("img",{src:t.img,alt:t.sellerName,className:"w-full h-full rounded-full md:rounded-lg object-cover"})}),R.jsx("div",{className:"w-full h-1/4 md:absolute md:bottom-0 md:flex items-center justify-center px-2 py-1 mt-4 md:mt-0 md:px-4 md:py-2",children:R.jsxs("div",{className:"w-11/12 flex flex-col items-center justify-center md:rounded-md md:bg-gray-50 md:hover:scale-105 transition-all h-full relative",children:[R.jsx("span",{className:"hidden md:block absolute z-0 bottom-0 left-0",children:R.jsx("svg",{width:"61",height:"30",viewBox:"0 0 61 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:R.jsx("circle",{cx:"16",cy:"45",r:"45",fill:"#13C296",fillOpacity:"0.11"})})}),R.jsxs("div",{children:[R.jsx("h2",{className:"my-1 text-center md:text-2xl font-bold text-lg",children:t.sellerName}),R.jsx("span",{className:"text-center text-xs font-semibold line-clamp-1",children:t.sellerShogaln})]}),R.jsx("span",{className:"hidden md:block absolute z-0 top-0 right-0",children:R.jsx("span",{children:R.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"25",fill:"none",viewBox:"0 0 20 25",children:[R.jsx("circle",{cx:".706257",cy:"24.3533",r:".646687",fill:"#3758F9",transform:"rotate(-90 .706257 24.3533)"}),R.jsx("circle",{cx:"6.39687",cy:"24.3533",r:".646687",fill:"#3758F9",transform:"rotate(-90 6.39687 24.3533)"}),R.jsx("circle",{cx:"12.0881",cy:"24.3533",r:".646687",fill:"#3758F9",transform:"rotate(-90 12.0881 24.3533)"}),R.jsx("circle",{cx:"17.7787",cy:"24.3533",r:".646687",fill:"#3758F9",transform:"rotate(-90 17.7787 24.3533)"}),R.jsx("circle",{cx:".706257",cy:"18.6624",r:".646687",fill:"#3758F9",transform:"rotate(-90 .706257 18.6624)"}),R.jsx("circle",{cx:"6.39687",cy:"18.6624",r:".646687",fill:"#3758F9",transform:"rotate(-90 6.39687 18.6624)"}),R.jsx("circle",{cx:"12.0881",cy:"18.6624",r:".646687",fill:"#3758F9",transform:"rotate(-90 12.0881 18.6624)"}),R.jsx("circle",{cx:"17.7787",cy:"18.6624",r:".646687",fill:"#3758F9",transform:"rotate(-90 17.7787 18.6624)"}),R.jsx("circle",{cx:".706257",cy:"12.9717",r:".646687",fill:"#3758F9",transform:"rotate(-90 .706257 12.9717)"}),R.jsx("circle",{cx:"6.39687",cy:"12.9717",r:".646687",fill:"#3758F9",transform:"rotate(-90 6.39687 12.9717)"}),R.jsx("circle",{cx:"12.0881",cy:"12.9717",r:".646687",fill:"#3758F9",transform:"rotate(-90 12.0881 12.9717)"}),R.jsx("circle",{cx:"17.7787",cy:"12.9717",r:".646687",fill:"#3758F9",transform:"rotate(-90 17.7787 12.9717)"}),R.jsx("circle",{cx:".706257",cy:"7.2808",r:".646687",fill:"#3758F9",transform:"rotate(-90 .706257 7.2808)"}),R.jsx("circle",{cx:"6.39687",cy:"7.2808",r:".646687",fill:"#3758F9",transform:"rotate(-90 6.39687 7.2808)"}),R.jsx("circle",{cx:"12.0881",cy:"7.2808",r:".646687",fill:"#3758F9",transform:"rotate(-90 12.0881 7.2808)"}),R.jsx("circle",{cx:"17.7787",cy:"7.2808",r:".646687",fill:"#3758F9",transform:"rotate(-90 17.7787 7.2808)"}),R.jsx("circle",{cx:".706257",cy:"1.58989",r:".646687",fill:"#3758F9",transform:"rotate(-90 .706257 1.58989)"}),R.jsx("circle",{cx:"6.39687",cy:"1.58989",r:".646687",fill:"#3758F9",transform:"rotate(-90 6.39687 1.58989)"}),R.jsx("circle",{cx:"12.0881",cy:"1.58989",r:".646687",fill:"#3758F9",transform:"rotate(-90 12.0881 1.58989)"}),R.jsx("circle",{cx:"17.7787",cy:"1.58989",r:".646687",fill:"#3758F9",transform:"rotate(-90 17.7787 1.58989)"})]})})})]})})]},e))})]})}const Zu=[{title:"Living Room",img:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2FPaste%20image%2003.png?alt=media&token=1970e707-5bd4-473b-84a9-954d05a3e9f7"},{title:"Bedroom",img:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2FImage%20Placeholder%2001.png?alt=media&token=14009cfd-68a3-4f84-a831-8c661bff903c"},{title:"Kitchen",img:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2FImage%20Placeholder%202.png?alt=media&token=0b304ed1-2caf-4a3a-923c-8af0eb585972"}];function rre(){return R.jsx("div",{className:"mx-auto 2xl:max-w-screen-2xl mt-6 md:mt-8",children:R.jsxs("div",{id:"wrapper",className:"flex flex-col md:flex-row items-center justify-center gap-y-4 gap-x-6 lg:gap-x-10 w-full px-4 py-2 h-96 md:h-[500px] lg:h-[550px]",children:[R.jsxs("div",{className:"md:w-1/3 w-full h-full relative",children:[R.jsx("div",{className:"w-full h-full absolute -z-10",children:R.jsx("img",{src:Zu[0].img,alt:"",className:"h-full w-full object-cover"})}),R.jsxs("div",{className:"z-10 h-full w-full px-4 py-2 md:px-6 md:py-4 flex items-start flex-col gap-y-2",children:[R.jsx("h2",{className:"text-3xl md:text-4xl",children:Zu[0].title}),R.jsxs("button",{className:"flex items-center gap-x-1 border-b-2 border-b-black",children:[R.jsx("span",{children:"Shop Now"}),R.jsx("span",{children:R.jsx(eo,{})})]})]})]}),R.jsxs("div",{className:"md:w-1/2 w-full h-full flex flex-col gap-y-4 md:gap-y-5",children:[R.jsxs("div",{className:"w-full h-1/2 relative",children:[R.jsx("div",{className:"w-full h-full absolute -z-10",children:R.jsx("img",{src:Zu[1].img,alt:"",className:"h-full w-full object-cover"})}),R.jsxs("div",{className:"z-10 h-full w-full px-4 py-2 md:px-6 md:py-4 flex items-start flex-col gap-y-2",children:[R.jsx("h2",{className:"text-3xl md:text-4xl",children:Zu[1].title}),R.jsxs("button",{className:"flex items-center gap-x-1 border-b-2 border-b-black",children:[R.jsx("span",{children:"Shop Now"}),R.jsx("span",{children:R.jsx(eo,{})})]})]})]}),R.jsxs("div",{className:"w-full h-1/2 relative",children:[R.jsx("div",{className:"w-full h-full absolute -z-10",children:R.jsx("img",{src:Zu[2].img,alt:"",className:"h-full w-full object-cover"})}),R.jsxs("div",{className:"z-10 h-full w-full px-4 py-2 md:px-6 md:py-4 flex items-start flex-col gap-y-2",children:[R.jsx("h2",{className:"text-3xl md:text-4xl",children:Zu[2].title}),R.jsxs("button",{className:"flex items-center gap-x-1 border-b-2 border-b-black",children:[R.jsx("span",{children:"Shop Now"}),R.jsx("span",{children:R.jsx(eo,{})})]})]})]})]})]})})}function Dr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class ire extends $.Component{componentDidMount(){this.element=this.ref.current,setTimeout(()=>{var e,n;((n=this.element)===null||n===void 0||(e=n.parentElement)===null||e===void 0?void 0:e.querySelector(":hover"))===this.element&&this.onMouseEnter()},0)}componentWillUnmount(){this.transitionTimeout&&clearTimeout(this.transitionTimeout),this.updateCall&&cancelAnimationFrame(this.updateCall)}render(){const{children:e,className:n}=this.props;return R.jsx("div",{ref:this.ref,className:n,style:{...this.props.style,...this.state.style,transition:"".concat(this.settings.speed,"ms ").concat(this.settings.easing)},onMouseEnter:this.onMouseEnter,onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave,children:e})}constructor(e){super(e),Dr(this,"ref",void 0),Dr(this,"width",void 0),Dr(this,"height",void 0),Dr(this,"left",void 0),Dr(this,"top",void 0),Dr(this,"transitionTimeout",void 0),Dr(this,"element",void 0),Dr(this,"reverse",void 0),Dr(this,"updateCall",void 0),Dr(this,"settings",void 0),Dr(this,"onMouseEnter",()=>{const{style:n}=this.state;this.updateElementPosition(),this.setState({...this.state,style:{...n,willChange:"transform"}})}),Dr(this,"reset",()=>{window.requestAnimationFrame(()=>{this.setState({...this.state,style:{transform:"perspective(".concat(this.settings.perspective,"px) ")+"rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)"}})})}),Dr(this,"onMouseMove",n=>{n.persist(),this.updateCall!==null&&window.cancelAnimationFrame(this.updateCall),this.updateCall=requestAnimationFrame(this.update.bind(this,n))}),Dr(this,"onMouseLeave",()=>{this.settings.reset&&this.reset()}),Dr(this,"getValues",n=>{const r=(n.nativeEvent.clientX-this.left)/this.width,i=(n.nativeEvent.clientY-this.top)/this.height,s=Math.min(Math.max(r,0),1),o=Math.min(Math.max(i,0),1),a=(this.reverse*(this.settings.max/2-s*this.settings.max)).toFixed(2),l=(this.reverse*(o*this.settings.max-this.settings.max/2)).toFixed(2),c=s*100,u=o*100;return{tiltX:a,tiltY:l,percentageX:c,percentageY:u}}),Dr(this,"updateElementPosition",()=>{var n,r,i,s,o;const a=(n=this.element)===null||n===void 0?void 0:n.getBoundingClientRect();var l;this.width=(l=(r=this.element)===null||r===void 0?void 0:r.offsetWidth)!==null&&l!==void 0?l:0;var c;this.height=(c=(i=this.element)===null||i===void 0?void 0:i.offsetHeight)!==null&&c!==void 0?c:0;var u;this.left=(u=(s=a)===null||s===void 0?void 0:s.left)!==null&&u!==void 0?u:0;var f;this.top=(f=(o=a)===null||o===void 0?void 0:o.top)!==null&&f!==void 0?f:0}),Dr(this,"update",n=>{const r=this.getValues(n),{style:i}=this.state;this.setState({...this.state,style:{...i,transform:"perspective(".concat(this.settings.perspective,"px) ")+"rotateX(".concat(this.settings.axis==="x"?0:r.tiltY,"deg) ")+"rotateY(".concat(this.settings.axis==="y"?0:r.tiltX,"deg) ")+"scale3d(".concat(this.settings.scale,", ").concat(this.settings.scale,", ").concat(this.settings.scale,")")}}),this.updateCall=null}),this.ref=$.createRef(),this.width=0,this.height=0,this.left=0,this.top=0,this.transitionTimeout=null,this.updateCall=null,this.element=null,this.settings={reverse:!1,max:35,perspective:1e3,easing:"cubic-bezier(.03,.98,.52,.99)",scale:1.1,speed:1e3,transition:!0,axis:null,reset:!0,...e.options},this.state={style:{transition:"".concat(this.settings.speed,"ms ").concat(this.settings.easing)}},this.reverse=this.settings.reverse?-1:1}}const sre=[{title:"New Man Collections",subTitle:"Elevate your style with modern cuts, luxurious fabrics, and timeless designs. From sharp tailored suits to casual everyday essentials, this collection has everything you need to look and feel your best.",bgurl:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2Fjade-aucamp-Kj6LgGceZ4M-unsplash.jpg?alt=media&token=bf06f396-12d7-4c1b-a4a8-3b837d76c63a"},{title:"Woman Winter Collections",subTitle:"Discover the latest woman winter collections, featuring cozy  outerwear, stylish  accessories, and chic  scarves to keep you warm and fashionable during the chilly season. From elegant coats to trendy boots.",bgurl:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2Fdom-hill-nimElTcTNyY-unsplash.jpg?alt=media&token=360a3cac-5de4-4bc6-9b8c-02818769b5a2"}];function ore(){return R.jsxs("div",{className:"mx-auto 2xl:max-w-screen-2xl",children:[R.jsxs("div",{className:"w-full px-2 my-1 md:px-4 flex items-center justify-between",children:[R.jsx("h2",{className:"text-2xl font-bold  md:text-3xl",children:"Best Selling Items"}),R.jsxs("span",{className:"flex items-center gap-x-1 md:gap-x-1.5 md:text-lg text-sm text-gray-500 hover:text-accent-300 transition-all cursor-pointer",children:["View All ",R.jsx(eo,{className:"text-xs md:text-base"})]})]}),R.jsx("div",{id:"wrapper",className:"flex flex-col gap-y-6 md:flex-row items-center justify-evenly w-full px-4 py-4 md:py-6",children:sre.map((t,e)=>R.jsx(ire,{className:"w-full md:w-2/5 h-48 md:h-64 relative cursor-pointer",children:R.jsxs("div",{className:"w-full h-full",children:[R.jsx("div",{className:"absolute w-full h-full -z-10",children:R.jsx("img",{src:t.bgurl,alt:"banner-pic",className:"w-full h-full object-cover object-top rounded-xl"})}),R.jsxs("div",{className:"z-10 flex flex-col px-4 py-4 bg-gray-800/35 rounded-xl h-full md: justify-evenly",children:[R.jsx("h2",{className:"text-xl md:text-2xl font-bold text-white",children:t.title}),R.jsx("span",{className:"line-clamp-3 text-gray-300",children:t.subTitle}),R.jsx("button",{className:"bg-white text-gray-950 hover:bg-gray-950 hover:text-white transition-all md:text-lg font-semibold rounded-xl text-sm my-3 px-4 py-2 w-fit md:self-end md:px-5 md:py-2.5",children:"Shop Now"})]})]})},e))})]})}function Df(){return Df=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Df.apply(this,arguments)}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Mg="161",bc={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Rc={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},rV=0,HT=1,iV=2,are=3,sV=0,R1=1,Fp=2,js=3,Ho=0,wi=1,Cs=2,Sa=0,nu=1,GT=2,jT=3,WT=4,oV=5,cl=100,aV=101,lV=102,XT=103,KT=104,cV=200,uV=201,hV=202,fV=203,sx=204,ox=205,dV=206,pV=207,mV=208,gV=209,yV=210,vV=211,_V=212,xV=213,SV=214,AV=0,wV=1,EV=2,Dm=3,MV=4,TV=5,CV=6,bV=7,Tg=0,RV=1,PV=2,Bo=0,IV=1,LV=2,DV=3,pR=4,BV=5,NV=6,$T="attached",OV="detached",P1=300,Pa=301,Hl=302,Bm=303,Nm=304,id=306,Gl=1e3,kr=1001,Bf=1002,zn=1003,Om=1004,lre=1004,ul=1005,cre=1005,Sn=1006,hf=1007,ure=1007,Is=1008,hre=1008,No=1009,FV=1010,kV=1011,I1=1012,mR=1013,ma=1014,bs=1015,Nf=1016,gR=1017,yR=1018,Pl=1020,UV=1021,_i=1023,VV=1024,zV=1025,Il=1026,_u=1027,HV=1028,vR=1029,GV=1030,_R=1031,xR=1033,zv=33776,Hv=33777,Gv=33778,jv=33779,JT=35840,qT=35841,YT=35842,QT=35843,SR=36196,ZT=37492,eC=37496,tC=37808,nC=37809,rC=37810,iC=37811,sC=37812,oC=37813,aC=37814,lC=37815,cC=37816,uC=37817,hC=37818,fC=37819,dC=37820,pC=37821,Wv=36492,mC=36494,gC=36495,jV=36283,yC=36284,vC=36285,_C=36286,WV=2200,XV=2201,KV=2202,Of=2300,xu=2301,Xv=2302,Wc=2400,Xc=2401,Fm=2402,L1=2500,AR=2501,$V=0,wR=1,ax=2,ER=3e3,Ll=3001,JV=3200,qV=3201,Zl=0,YV=1,Ki="",fr="srgb",Go="srgb-linear",D1="display-p3",Cg="display-p3-linear",km="linear",gn="srgb",Um="rec709",Vm="p3",fre=0,Pc=7680,dre=7681,pre=7682,mre=7683,gre=34055,yre=34056,vre=5386,_re=512,xre=513,Sre=514,Are=515,wre=516,Ere=517,Mre=518,xC=519,QV=512,ZV=513,e8=514,MR=515,t8=516,n8=517,r8=518,i8=519,zm=35044,Tre=35048,Cre=35040,bre=35045,Rre=35049,Pre=35041,Ire=35046,Lre=35050,Dre=35042,Bre="100",SC="300 es",lx=1035,Ro=2e3,Hm=2001;class Wo{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const Yr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let kB=1234567;const ru=Math.PI/180,Ff=180/Math.PI;function Zi(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Yr[t&255]+Yr[t>>8&255]+Yr[t>>16&255]+Yr[t>>24&255]+"-"+Yr[e&255]+Yr[e>>8&255]+"-"+Yr[e>>16&15|64]+Yr[e>>24&255]+"-"+Yr[n&63|128]+Yr[n>>8&255]+"-"+Yr[n>>16&255]+Yr[n>>24&255]+Yr[r&255]+Yr[r>>8&255]+Yr[r>>16&255]+Yr[r>>24&255]).toLowerCase()}function Gn(t,e,n){return Math.max(e,Math.min(n,t))}function TR(t,e){return(t%e+e)%e}function Nre(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function Ore(t,e,n){return t!==e?(n-t)/(e-t):0}function kp(t,e,n){return(1-n)*t+n*e}function Fre(t,e,n,r){return kp(t,e,1-Math.exp(-n*r))}function kre(t,e=1){return e-Math.abs(TR(t,e*2)-e)}function Ure(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function Vre(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function zre(t,e){return t+Math.floor(Math.random()*(e-t+1))}function Hre(t,e){return t+Math.random()*(e-t)}function Gre(t){return t*(.5-Math.random())}function jre(t){t!==void 0&&(kB=t);let e=kB+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Wre(t){return t*ru}function Xre(t){return t*Ff}function AC(t){return(t&t-1)===0&&t!==0}function Kre(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function cx(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function $re(t,e,n,r,i){const s=Math.cos,o=Math.sin,a=s(n/2),l=o(n/2),c=s((e+r)/2),u=o((e+r)/2),f=s((e-r)/2),p=o((e-r)/2),m=s((r-e)/2),y=o((r-e)/2);switch(i){case"XYX":t.set(a*u,l*f,l*p,a*c);break;case"YZY":t.set(l*p,a*u,l*f,a*c);break;case"ZXZ":t.set(l*f,l*p,a*u,a*c);break;case"XZX":t.set(a*u,l*y,l*m,a*c);break;case"YXY":t.set(l*m,a*u,l*y,a*c);break;case"ZYZ":t.set(l*y,l*m,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function xi(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Lt(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const s8={DEG2RAD:ru,RAD2DEG:Ff,generateUUID:Zi,clamp:Gn,euclideanModulo:TR,mapLinear:Nre,inverseLerp:Ore,lerp:kp,damp:Fre,pingpong:kre,smoothstep:Ure,smootherstep:Vre,randInt:zre,randFloat:Hre,randFloatSpread:Gre,seededRandom:jre,degToRad:Wre,radToDeg:Xre,isPowerOfTwo:AC,ceilPowerOfTwo:Kre,floorPowerOfTwo:cx,setQuaternionFromProperEuler:$re,normalize:Lt,denormalize:xi};class _e{constructor(e=0,n=0){_e.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Gn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class kt{constructor(e,n,r,i,s,o,a,l,c){kt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,i,s,o,a,l,c)}set(e,n,r,i,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=a,u[3]=n,u[4]=s,u[5]=l,u[6]=r,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,o=r[0],a=r[3],l=r[6],c=r[1],u=r[4],f=r[7],p=r[2],m=r[5],y=r[8],S=i[0],v=i[3],g=i[6],_=i[1],A=i[4],E=i[7],b=i[2],C=i[5],P=i[8];return s[0]=o*S+a*_+l*b,s[3]=o*v+a*A+l*C,s[6]=o*g+a*E+l*P,s[1]=c*S+u*_+f*b,s[4]=c*v+u*A+f*C,s[7]=c*g+u*E+f*P,s[2]=p*S+m*_+y*b,s[5]=p*v+m*A+y*C,s[8]=p*g+m*E+y*P,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return n*o*u-n*a*c-r*s*u+r*a*l+i*s*c-i*o*l}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=u*o-a*c,p=a*l-u*s,m=c*s-o*l,y=n*f+r*p+i*m;if(y===0)return this.set(0,0,0,0,0,0,0,0,0);const S=1/y;return e[0]=f*S,e[1]=(i*c-u*r)*S,e[2]=(a*r-i*o)*S,e[3]=p*S,e[4]=(u*n-i*l)*S,e[5]=(i*s-a*n)*S,e[6]=m*S,e[7]=(r*l-c*n)*S,e[8]=(o*n-r*s)*S,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(r*l,r*c,-r*(l*o+c*a)+o+e,-i*c,i*l,-i*(-c*o+l*a)+a+n,0,0,1),this}scale(e,n){return this.premultiply(Lw.makeScale(e,n)),this}rotate(e){return this.premultiply(Lw.makeRotation(-e)),this}translate(e,n){return this.premultiply(Lw.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Lw=new kt;function o8(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const Jre={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function zh(t,e){return new Jre[t](e)}function Gm(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function a8(){const t=Gm("canvas");return t.style.display="block",t}const UB={};function iu(t){t in UB||(UB[t]=!0,console.warn(t))}const VB=new kt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),zB=new kt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),S0={[Go]:{transfer:km,primaries:Um,toReference:t=>t,fromReference:t=>t},[fr]:{transfer:gn,primaries:Um,toReference:t=>t.convertSRGBToLinear(),fromReference:t=>t.convertLinearToSRGB()},[Cg]:{transfer:km,primaries:Vm,toReference:t=>t.applyMatrix3(zB),fromReference:t=>t.applyMatrix3(VB)},[D1]:{transfer:gn,primaries:Vm,toReference:t=>t.convertSRGBToLinear().applyMatrix3(zB),fromReference:t=>t.applyMatrix3(VB).convertLinearToSRGB()}},qre=new Set([Go,Cg]),ln={enabled:!0,_workingColorSpace:Go,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(t){if(!qre.has(t))throw new Error(`Unsupported working color space, "${t}".`);this._workingColorSpace=t},convert:function(t,e,n){if(this.enabled===!1||e===n||!e||!n)return t;const r=S0[e].toReference,i=S0[n].fromReference;return i(r(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this._workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this._workingColorSpace)},getPrimaries:function(t){return S0[t].primaries},getTransfer:function(t){return t===Ki?km:S0[t].transfer}};function ff(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function Dw(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let eh;class CR{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{eh===void 0&&(eh=Gm("canvas")),eh.width=e.width,eh.height=e.height;const r=eh.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=eh}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=Gm("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=ff(s[o]/255)*255;return r.putImageData(i,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(ff(n[r]/255)*255):n[r]=ff(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Yre=0;class Kc{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Yre++}),this.uuid=Zi(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(Bw(i[o].image)):s.push(Bw(i[o]))}else s=Bw(i);r.url=s}return n||(e.images[this.uuid]=r),r}}function Bw(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?CR.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Qre=0;class Mn extends Wo{constructor(e=Mn.DEFAULT_IMAGE,n=Mn.DEFAULT_MAPPING,r=kr,i=kr,s=Sn,o=Is,a=_i,l=No,c=Mn.DEFAULT_ANISOTROPY,u=Ki){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Qre++}),this.uuid=Zi(),this.name="",this.source=new Kc(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new _e(0,0),this.repeat=new _e(1,1),this.center=new _e(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new kt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof u=="string"?this.colorSpace=u:(iu("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=u===Ll?fr:Ki),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==P1)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Gl:e.x=e.x-Math.floor(e.x);break;case kr:e.x=e.x<0?0:1;break;case Bf:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Gl:e.y=e.y-Math.floor(e.y);break;case kr:e.y=e.y<0?0:1;break;case Bf:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return iu("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===fr?Ll:ER}set encoding(e){iu("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===Ll?fr:Ki}}Mn.DEFAULT_IMAGE=null;Mn.DEFAULT_MAPPING=P1;Mn.DEFAULT_ANISOTROPY=1;class cn{constructor(e=0,n=0,r=0,i=1){cn.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*n+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*n+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*n+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*n+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,s;const l=e.elements,c=l[0],u=l[4],f=l[8],p=l[1],m=l[5],y=l[9],S=l[2],v=l[6],g=l[10];if(Math.abs(u-p)<.01&&Math.abs(f-S)<.01&&Math.abs(y-v)<.01){if(Math.abs(u+p)<.1&&Math.abs(f+S)<.1&&Math.abs(y+v)<.1&&Math.abs(c+m+g-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const A=(c+1)/2,E=(m+1)/2,b=(g+1)/2,C=(u+p)/4,P=(f+S)/4,L=(y+v)/4;return A>E&&A>b?A<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(A),i=C/r,s=P/r):E>b?E<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(E),r=C/i,s=L/i):b<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(b),r=P/s,i=L/s),this.set(r,i,s,n),this}let _=Math.sqrt((v-y)*(v-y)+(f-S)*(f-S)+(p-u)*(p-u));return Math.abs(_)<.001&&(_=1),this.x=(v-y)/_,this.y=(f-S)/_,this.z=(p-u)/_,this.w=Math.acos((c+m+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class l8 extends Wo{constructor(e=1,n=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new cn(0,0,e,n),this.scissorTest=!1,this.viewport=new cn(0,0,e,n);const i={width:e,height:n,depth:1};r.encoding!==void 0&&(iu("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===Ll?fr:Ki),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Sn,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},r),this.texture=new Mn(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps,this.texture.internalFormat=r.internalFormat,this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}setSize(e,n,r=1){(this.width!==e||this.height!==n||this.depth!==r)&&(this.width=e,this.height=n,this.depth=r,this.texture.image.width=e,this.texture.image.height=n,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new Kc(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class ro extends l8{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class B1 extends Mn{constructor(e=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=zn,this.minFilter=zn,this.wrapR=kr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Zre extends ro{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new B1(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class bR extends Mn{constructor(e=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=zn,this.minFilter=zn,this.wrapR=kr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class eie extends ro{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new bR(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class tie extends ro{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<r;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,n,r=1){if(this.width!==e||this.height!==n||this.depth!==r){this.width=e,this.height=n,this.depth=r;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=e,this.texture[i].image.height=n,this.texture[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let n=0,r=e.texture.length;n<r;n++)this.texture[n]=e.texture[n].clone(),this.texture[n].isRenderTargetTexture=!0;return this}}class Tr{constructor(e=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}static slerpFlat(e,n,r,i,s,o,a){let l=r[i+0],c=r[i+1],u=r[i+2],f=r[i+3];const p=s[o+0],m=s[o+1],y=s[o+2],S=s[o+3];if(a===0){e[n+0]=l,e[n+1]=c,e[n+2]=u,e[n+3]=f;return}if(a===1){e[n+0]=p,e[n+1]=m,e[n+2]=y,e[n+3]=S;return}if(f!==S||l!==p||c!==m||u!==y){let v=1-a;const g=l*p+c*m+u*y+f*S,_=g>=0?1:-1,A=1-g*g;if(A>Number.EPSILON){const b=Math.sqrt(A),C=Math.atan2(b,g*_);v=Math.sin(v*C)/b,a=Math.sin(a*C)/b}const E=a*_;if(l=l*v+p*E,c=c*v+m*E,u=u*v+y*E,f=f*v+S*E,v===1-a){const b=1/Math.sqrt(l*l+c*c+u*u+f*f);l*=b,c*=b,u*=b,f*=b}}e[n]=l,e[n+1]=c,e[n+2]=u,e[n+3]=f}static multiplyQuaternionsFlat(e,n,r,i,s,o){const a=r[i],l=r[i+1],c=r[i+2],u=r[i+3],f=s[o],p=s[o+1],m=s[o+2],y=s[o+3];return e[n]=a*y+u*f+l*m-c*p,e[n+1]=l*y+u*p+c*f-a*m,e[n+2]=c*y+u*m+a*p-l*f,e[n+3]=u*y-a*f-l*p-c*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(r/2),u=a(i/2),f=a(s/2),p=l(r/2),m=l(i/2),y=l(s/2);switch(o){case"XYZ":this._x=p*u*f+c*m*y,this._y=c*m*f-p*u*y,this._z=c*u*y+p*m*f,this._w=c*u*f-p*m*y;break;case"YXZ":this._x=p*u*f+c*m*y,this._y=c*m*f-p*u*y,this._z=c*u*y-p*m*f,this._w=c*u*f+p*m*y;break;case"ZXY":this._x=p*u*f-c*m*y,this._y=c*m*f+p*u*y,this._z=c*u*y+p*m*f,this._w=c*u*f-p*m*y;break;case"ZYX":this._x=p*u*f-c*m*y,this._y=c*m*f+p*u*y,this._z=c*u*y-p*m*f,this._w=c*u*f+p*m*y;break;case"YZX":this._x=p*u*f+c*m*y,this._y=c*m*f+p*u*y,this._z=c*u*y-p*m*f,this._w=c*u*f-p*m*y;break;case"XZY":this._x=p*u*f-c*m*y,this._y=c*m*f-p*u*y,this._z=c*u*y+p*m*f,this._w=c*u*f+p*m*y;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],s=n[8],o=n[1],a=n[5],l=n[9],c=n[2],u=n[6],f=n[10],p=r+a+f;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(u-l)*m,this._y=(s-c)*m,this._z=(o-i)*m}else if(r>a&&r>f){const m=2*Math.sqrt(1+r-a-f);this._w=(u-l)/m,this._x=.25*m,this._y=(i+o)/m,this._z=(s+c)/m}else if(a>f){const m=2*Math.sqrt(1+a-r-f);this._w=(s-c)/m,this._x=(i+o)/m,this._y=.25*m,this._z=(l+u)/m}else{const m=2*Math.sqrt(1+f-r-a);this._w=(o-i)/m,this._x=(s+c)/m,this._y=(l+u)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Gn(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,s=e._z,o=e._w,a=n._x,l=n._y,c=n._z,u=n._w;return this._x=r*u+o*a+i*c-s*l,this._y=i*u+o*l+s*a-r*c,this._z=s*u+o*c+r*l-i*a,this._w=o*u-r*a-i*l-s*c,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-n;return this._w=m*o+n*this._w,this._x=m*r+n*this._x,this._y=m*i+n*this._y,this._z=m*s+n*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),f=Math.sin((1-n)*u)/c,p=Math.sin(n*u)/c;return this._w=o*f+this._w*p,this._x=r*f+this._x*p,this._y=i*f+this._y*p,this._z=s*f+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=Math.random(),n=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(n*Math.cos(i),r*Math.sin(s),r*Math.cos(s),n*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class k{constructor(e=0,n=0,r=0){k.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(HB.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(HB.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[3]*r+s[6]*i,this.y=s[1]*n+s[4]*r+s[7]*i,this.z=s[2]*n+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*n+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*n+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*n+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*n+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*i-a*r),u=2*(a*n-s*i),f=2*(s*r-o*n);return this.x=n+l*c+o*f-a*u,this.y=r+l*u+a*c-s*f,this.z=i+l*f+s*u-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[4]*r+s[8]*i,this.y=s[1]*n+s[5]*r+s[9]*i,this.z=s[2]*n+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,s=e.z,o=n.x,a=n.y,l=n.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return Nw.copy(this).projectOnVector(e),this.sub(Nw)}reflect(e){return this.sub(Nw.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Gn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(n),this.y=r*Math.sin(n),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Nw=new k,HB=new Tr;class si{constructor(e=new k(1/0,1/0,1/0),n=new k(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(Vs.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(Vs.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=Vs.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(n===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,Vs):Vs.fromBufferAttribute(s,o),Vs.applyMatrix4(e.matrixWorld),this.expandByPoint(Vs);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),A0.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),A0.copy(r.boundingBox)),A0.applyMatrix4(e.matrixWorld),this.union(A0)}const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Vs),Vs.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(zd),w0.subVectors(this.max,zd),th.subVectors(e.a,zd),nh.subVectors(e.b,zd),rh.subVectors(e.c,zd),ja.subVectors(nh,th),Wa.subVectors(rh,nh),fc.subVectors(th,rh);let n=[0,-ja.z,ja.y,0,-Wa.z,Wa.y,0,-fc.z,fc.y,ja.z,0,-ja.x,Wa.z,0,-Wa.x,fc.z,0,-fc.x,-ja.y,ja.x,0,-Wa.y,Wa.x,0,-fc.y,fc.x,0];return!Ow(n,th,nh,rh,w0)||(n=[1,0,0,0,1,0,0,0,1],!Ow(n,th,nh,rh,w0))?!1:(E0.crossVectors(ja,Wa),n=[E0.x,E0.y,E0.z],Ow(n,th,nh,rh,w0))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Vs).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Vs).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(ta[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ta[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ta[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ta[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ta[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ta[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ta[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ta[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ta),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ta=[new k,new k,new k,new k,new k,new k,new k,new k],Vs=new k,A0=new si,th=new k,nh=new k,rh=new k,ja=new k,Wa=new k,fc=new k,zd=new k,w0=new k,E0=new k,dc=new k;function Ow(t,e,n,r,i){for(let s=0,o=t.length-3;s<=o;s+=3){dc.fromArray(t,s);const a=i.x*Math.abs(dc.x)+i.y*Math.abs(dc.y)+i.z*Math.abs(dc.z),l=e.dot(dc),c=n.dot(dc),u=r.dot(dc);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const nie=new si,Hd=new k,Fw=new k;class Hr{constructor(e=new k,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):nie.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Hd.subVectors(e,this.center);const n=Hd.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(Hd,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Fw.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Hd.copy(e.center).add(Fw)),this.expandByPoint(Hd.copy(e.center).sub(Fw))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const na=new k,kw=new k,M0=new k,Xa=new k,Uw=new k,T0=new k,Vw=new k;class bu{constructor(e=new k,n=new k(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,na)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=na.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(na.copy(this.origin).addScaledVector(this.direction,n),na.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){kw.copy(e).add(n).multiplyScalar(.5),M0.copy(n).sub(e).normalize(),Xa.copy(this.origin).sub(kw);const s=e.distanceTo(n)*.5,o=-this.direction.dot(M0),a=Xa.dot(this.direction),l=-Xa.dot(M0),c=Xa.lengthSq(),u=Math.abs(1-o*o);let f,p,m,y;if(u>0)if(f=o*l-a,p=o*a-l,y=s*u,f>=0)if(p>=-y)if(p<=y){const S=1/u;f*=S,p*=S,m=f*(f+o*p+2*a)+p*(o*f+p+2*l)+c}else p=s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+c;else p=-s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+c;else p<=-y?(f=Math.max(0,-(-o*s+a)),p=f>0?-s:Math.min(Math.max(-s,-l),s),m=-f*f+p*(p+2*l)+c):p<=y?(f=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+c):(f=Math.max(0,-(o*s+a)),p=f>0?s:Math.min(Math.max(-s,-l),s),m=-f*f+p*(p+2*l)+c);else p=o>0?-s:s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,f),i&&i.copy(kw).addScaledVector(M0,p),m}intersectSphere(e,n){na.subVectors(e.center,this.origin);const r=na.dot(this.direction),i=na.dot(na)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,n):this.at(a,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,f=1/this.direction.z,p=this.origin;return c>=0?(r=(e.min.x-p.x)*c,i=(e.max.x-p.x)*c):(r=(e.max.x-p.x)*c,i=(e.min.x-p.x)*c),u>=0?(s=(e.min.y-p.y)*u,o=(e.max.y-p.y)*u):(s=(e.max.y-p.y)*u,o=(e.min.y-p.y)*u),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),f>=0?(a=(e.min.z-p.z)*f,l=(e.max.z-p.z)*f):(a=(e.max.z-p.z)*f,l=(e.min.z-p.z)*f),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,na)!==null}intersectTriangle(e,n,r,i,s){Uw.subVectors(n,e),T0.subVectors(r,e),Vw.crossVectors(Uw,T0);let o=this.direction.dot(Vw),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Xa.subVectors(this.origin,e);const l=a*this.direction.dot(T0.crossVectors(Xa,T0));if(l<0)return null;const c=a*this.direction.dot(Uw.cross(Xa));if(c<0||l+c>o)return null;const u=-a*Xa.dot(Vw);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class ft{constructor(e,n,r,i,s,o,a,l,c,u,f,p,m,y,S,v){ft.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,i,s,o,a,l,c,u,f,p,m,y,S,v)}set(e,n,r,i,s,o,a,l,c,u,f,p,m,y,S,v){const g=this.elements;return g[0]=e,g[4]=n,g[8]=r,g[12]=i,g[1]=s,g[5]=o,g[9]=a,g[13]=l,g[2]=c,g[6]=u,g[10]=f,g[14]=p,g[3]=m,g[7]=y,g[11]=S,g[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ft().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/ih.setFromMatrixColumn(e,0).length(),s=1/ih.setFromMatrixColumn(e,1).length(),o=1/ih.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*s,n[5]=r[5]*s,n[6]=r[6]*s,n[7]=0,n[8]=r[8]*o,n[9]=r[9]*o,n[10]=r[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),c=Math.sin(i),u=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const p=o*u,m=o*f,y=a*u,S=a*f;n[0]=l*u,n[4]=-l*f,n[8]=c,n[1]=m+y*c,n[5]=p-S*c,n[9]=-a*l,n[2]=S-p*c,n[6]=y+m*c,n[10]=o*l}else if(e.order==="YXZ"){const p=l*u,m=l*f,y=c*u,S=c*f;n[0]=p+S*a,n[4]=y*a-m,n[8]=o*c,n[1]=o*f,n[5]=o*u,n[9]=-a,n[2]=m*a-y,n[6]=S+p*a,n[10]=o*l}else if(e.order==="ZXY"){const p=l*u,m=l*f,y=c*u,S=c*f;n[0]=p-S*a,n[4]=-o*f,n[8]=y+m*a,n[1]=m+y*a,n[5]=o*u,n[9]=S-p*a,n[2]=-o*c,n[6]=a,n[10]=o*l}else if(e.order==="ZYX"){const p=o*u,m=o*f,y=a*u,S=a*f;n[0]=l*u,n[4]=y*c-m,n[8]=p*c+S,n[1]=l*f,n[5]=S*c+p,n[9]=m*c-y,n[2]=-c,n[6]=a*l,n[10]=o*l}else if(e.order==="YZX"){const p=o*l,m=o*c,y=a*l,S=a*c;n[0]=l*u,n[4]=S-p*f,n[8]=y*f+m,n[1]=f,n[5]=o*u,n[9]=-a*u,n[2]=-c*u,n[6]=m*f+y,n[10]=p-S*f}else if(e.order==="XZY"){const p=o*l,m=o*c,y=a*l,S=a*c;n[0]=l*u,n[4]=-f,n[8]=c*u,n[1]=p*f+S,n[5]=o*u,n[9]=m*f-y,n[2]=y*f-m,n[6]=a*u,n[10]=S*f+p}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(rie,e,iie)}lookAt(e,n,r){const i=this.elements;return ji.subVectors(e,n),ji.lengthSq()===0&&(ji.z=1),ji.normalize(),Ka.crossVectors(r,ji),Ka.lengthSq()===0&&(Math.abs(r.z)===1?ji.x+=1e-4:ji.z+=1e-4,ji.normalize(),Ka.crossVectors(r,ji)),Ka.normalize(),C0.crossVectors(ji,Ka),i[0]=Ka.x,i[4]=C0.x,i[8]=ji.x,i[1]=Ka.y,i[5]=C0.y,i[9]=ji.y,i[2]=Ka.z,i[6]=C0.z,i[10]=ji.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,o=r[0],a=r[4],l=r[8],c=r[12],u=r[1],f=r[5],p=r[9],m=r[13],y=r[2],S=r[6],v=r[10],g=r[14],_=r[3],A=r[7],E=r[11],b=r[15],C=i[0],P=i[4],L=i[8],N=i[12],T=i[1],D=i[5],z=i[9],j=i[13],H=i[2],q=i[6],Z=i[10],ae=i[14],O=i[3],W=i[7],K=i[11],Y=i[15];return s[0]=o*C+a*T+l*H+c*O,s[4]=o*P+a*D+l*q+c*W,s[8]=o*L+a*z+l*Z+c*K,s[12]=o*N+a*j+l*ae+c*Y,s[1]=u*C+f*T+p*H+m*O,s[5]=u*P+f*D+p*q+m*W,s[9]=u*L+f*z+p*Z+m*K,s[13]=u*N+f*j+p*ae+m*Y,s[2]=y*C+S*T+v*H+g*O,s[6]=y*P+S*D+v*q+g*W,s[10]=y*L+S*z+v*Z+g*K,s[14]=y*N+S*j+v*ae+g*Y,s[3]=_*C+A*T+E*H+b*O,s[7]=_*P+A*D+E*q+b*W,s[11]=_*L+A*z+E*Z+b*K,s[15]=_*N+A*j+E*ae+b*Y,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],f=e[6],p=e[10],m=e[14],y=e[3],S=e[7],v=e[11],g=e[15];return y*(+s*l*f-i*c*f-s*a*p+r*c*p+i*a*m-r*l*m)+S*(+n*l*m-n*c*p+s*o*p-i*o*m+i*c*u-s*l*u)+v*(+n*c*f-n*a*m-s*o*f+r*o*m+s*a*u-r*c*u)+g*(-i*a*u-n*l*f+n*a*p+i*o*f-r*o*p+r*l*u)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=e[9],p=e[10],m=e[11],y=e[12],S=e[13],v=e[14],g=e[15],_=f*v*c-S*p*c+S*l*m-a*v*m-f*l*g+a*p*g,A=y*p*c-u*v*c-y*l*m+o*v*m+u*l*g-o*p*g,E=u*S*c-y*f*c+y*a*m-o*S*m-u*a*g+o*f*g,b=y*f*l-u*S*l-y*a*p+o*S*p+u*a*v-o*f*v,C=n*_+r*A+i*E+s*b;if(C===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/C;return e[0]=_*P,e[1]=(S*p*s-f*v*s-S*i*m+r*v*m+f*i*g-r*p*g)*P,e[2]=(a*v*s-S*l*s+S*i*c-r*v*c-a*i*g+r*l*g)*P,e[3]=(f*l*s-a*p*s-f*i*c+r*p*c+a*i*m-r*l*m)*P,e[4]=A*P,e[5]=(u*v*s-y*p*s+y*i*m-n*v*m-u*i*g+n*p*g)*P,e[6]=(y*l*s-o*v*s-y*i*c+n*v*c+o*i*g-n*l*g)*P,e[7]=(o*p*s-u*l*s+u*i*c-n*p*c-o*i*m+n*l*m)*P,e[8]=E*P,e[9]=(y*f*s-u*S*s-y*r*m+n*S*m+u*r*g-n*f*g)*P,e[10]=(o*S*s-y*a*s+y*r*c-n*S*c-o*r*g+n*a*g)*P,e[11]=(u*a*s-o*f*s-u*r*c+n*f*c+o*r*m-n*a*m)*P,e[12]=b*P,e[13]=(u*S*i-y*f*i+y*r*p-n*S*p-u*r*v+n*f*v)*P,e[14]=(y*a*i-o*S*i-y*r*l+n*S*l+o*r*v-n*a*v)*P,e[15]=(o*f*i-u*a*i+u*r*l-n*f*l-o*r*p+n*a*p)*P,this}scale(e){const n=this.elements,r=e.x,i=e.y,s=e.z;return n[0]*=r,n[4]*=i,n[8]*=s,n[1]*=r,n[5]*=i,n[9]*=s,n[2]*=r,n[6]*=i,n[10]*=s,n[3]*=r,n[7]*=i,n[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),s=1-r,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+r,c*a-i*l,c*l+i*a,0,c*a+i*l,u*a+r,u*l-i*o,0,c*l-i*a,u*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,s=n._x,o=n._y,a=n._z,l=n._w,c=s+s,u=o+o,f=a+a,p=s*c,m=s*u,y=s*f,S=o*u,v=o*f,g=a*f,_=l*c,A=l*u,E=l*f,b=r.x,C=r.y,P=r.z;return i[0]=(1-(S+g))*b,i[1]=(m+E)*b,i[2]=(y-A)*b,i[3]=0,i[4]=(m-E)*C,i[5]=(1-(p+g))*C,i[6]=(v+_)*C,i[7]=0,i[8]=(y+A)*P,i[9]=(v-_)*P,i[10]=(1-(p+S))*P,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let s=ih.set(i[0],i[1],i[2]).length();const o=ih.set(i[4],i[5],i[6]).length(),a=ih.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],zs.copy(this);const c=1/s,u=1/o,f=1/a;return zs.elements[0]*=c,zs.elements[1]*=c,zs.elements[2]*=c,zs.elements[4]*=u,zs.elements[5]*=u,zs.elements[6]*=u,zs.elements[8]*=f,zs.elements[9]*=f,zs.elements[10]*=f,n.setFromRotationMatrix(zs),r.x=s,r.y=o,r.z=a,this}makePerspective(e,n,r,i,s,o,a=Ro){const l=this.elements,c=2*s/(n-e),u=2*s/(r-i),f=(n+e)/(n-e),p=(r+i)/(r-i);let m,y;if(a===Ro)m=-(o+s)/(o-s),y=-2*o*s/(o-s);else if(a===Hm)m=-o/(o-s),y=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=f,l[12]=0,l[1]=0,l[5]=u,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=y,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,n,r,i,s,o,a=Ro){const l=this.elements,c=1/(n-e),u=1/(r-i),f=1/(o-s),p=(n+e)*c,m=(r+i)*u;let y,S;if(a===Ro)y=(o+s)*f,S=-2*f;else if(a===Hm)y=s*f,S=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=S,l[14]=-y,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const ih=new k,zs=new ft,rie=new k(0,0,0),iie=new k(1,1,1),Ka=new k,C0=new k,ji=new k,GB=new ft,jB=new Tr;class bg{constructor(e=0,n=0,r=0,i=bg.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],c=i[5],u=i[9],f=i[2],p=i[6],m=i[10];switch(n){case"XYZ":this._y=Math.asin(Gn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Gn(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(Gn(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-f,m),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Gn(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(Gn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-Gn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return GB.makeRotationFromQuaternion(e),this.setFromRotationMatrix(GB,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return jB.setFromEuler(this),this.setFromQuaternion(jB,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}bg.DEFAULT_ORDER="XYZ";class su{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let sie=0;const WB=new k,sh=new Tr,ra=new ft,b0=new k,Gd=new k,oie=new k,aie=new Tr,XB=new k(1,0,0),KB=new k(0,1,0),$B=new k(0,0,1),lie={type:"added"},cie={type:"removed"};class Jt extends Wo{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:sie++}),this.uuid=Zi(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Jt.DEFAULT_UP.clone();const e=new k,n=new bg,r=new Tr,i=new k(1,1,1);function s(){r.setFromEuler(n,!1)}function o(){n.setFromQuaternion(r,void 0,!1)}n._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new ft},normalMatrix:{value:new kt}}),this.matrix=new ft,this.matrixWorld=new ft,this.matrixAutoUpdate=Jt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Jt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new su,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return sh.setFromAxisAngle(e,n),this.quaternion.multiply(sh),this}rotateOnWorldAxis(e,n){return sh.setFromAxisAngle(e,n),this.quaternion.premultiply(sh),this}rotateX(e){return this.rotateOnAxis(XB,e)}rotateY(e){return this.rotateOnAxis(KB,e)}rotateZ(e){return this.rotateOnAxis($B,e)}translateOnAxis(e,n){return WB.copy(e).applyQuaternion(this.quaternion),this.position.add(WB.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(XB,e)}translateY(e){return this.translateOnAxis(KB,e)}translateZ(e){return this.translateOnAxis($B,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(ra.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?b0.copy(e):b0.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),Gd.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ra.lookAt(Gd,b0,this.up):ra.lookAt(b0,Gd,this.up),this.quaternion.setFromRotationMatrix(ra),i&&(ra.extractRotation(i.matrixWorld),sh.setFromRotationMatrix(ra),this.quaternion.premultiply(sh.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(lie)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(cie)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),ra.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),ra.multiply(e.parent.matrixWorld)),e.applyMatrix4(ra),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,n);if(o!==void 0)return o}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Gd,e,oie),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Gd,aie,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++){const s=n[r];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++){const a=i[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),i.maxGeometryCount=this._maxGeometryCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const f=l[c];s(e.shapes,f)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(n){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),f=o(e.shapes),p=o(e.skeletons),m=o(e.animations),y=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),f.length>0&&(r.shapes=f),p.length>0&&(r.skeletons=p),m.length>0&&(r.animations=m),y.length>0&&(r.nodes=y)}return r.object=i,r;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}Jt.DEFAULT_UP=new k(0,1,0);Jt.DEFAULT_MATRIX_AUTO_UPDATE=!0;Jt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Hs=new k,ia=new k,zw=new k,sa=new k,oh=new k,ah=new k,JB=new k,Hw=new k,Gw=new k,jw=new k;class $i{constructor(e=new k,n=new k,r=new k){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),Hs.subVectors(e,n),i.cross(Hs);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,n,r,i,s){Hs.subVectors(i,n),ia.subVectors(r,n),zw.subVectors(e,n);const o=Hs.dot(Hs),a=Hs.dot(ia),l=Hs.dot(zw),c=ia.dot(ia),u=ia.dot(zw),f=o*c-a*a;if(f===0)return s.set(0,0,0),null;const p=1/f,m=(c*l-a*u)*p,y=(o*u-a*l)*p;return s.set(1-m-y,y,m)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,sa)===null?!1:sa.x>=0&&sa.y>=0&&sa.x+sa.y<=1}static getInterpolation(e,n,r,i,s,o,a,l){return this.getBarycoord(e,n,r,i,sa)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,sa.x),l.addScaledVector(o,sa.y),l.addScaledVector(a,sa.z),l)}static isFrontFacing(e,n,r,i){return Hs.subVectors(r,n),ia.subVectors(e,n),Hs.cross(ia).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Hs.subVectors(this.c,this.b),ia.subVectors(this.a,this.b),Hs.cross(ia).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return $i.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return $i.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,r,i,s){return $i.getInterpolation(e,this.a,this.b,this.c,n,r,i,s)}containsPoint(e){return $i.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return $i.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,s=this.c;let o,a;oh.subVectors(i,r),ah.subVectors(s,r),Hw.subVectors(e,r);const l=oh.dot(Hw),c=ah.dot(Hw);if(l<=0&&c<=0)return n.copy(r);Gw.subVectors(e,i);const u=oh.dot(Gw),f=ah.dot(Gw);if(u>=0&&f<=u)return n.copy(i);const p=l*f-u*c;if(p<=0&&l>=0&&u<=0)return o=l/(l-u),n.copy(r).addScaledVector(oh,o);jw.subVectors(e,s);const m=oh.dot(jw),y=ah.dot(jw);if(y>=0&&m<=y)return n.copy(s);const S=m*c-l*y;if(S<=0&&c>=0&&y<=0)return a=c/(c-y),n.copy(r).addScaledVector(ah,a);const v=u*y-m*f;if(v<=0&&f-u>=0&&m-y>=0)return JB.subVectors(s,i),a=(f-u)/(f-u+(m-y)),n.copy(i).addScaledVector(JB,a);const g=1/(v+S+p);return o=S*g,a=p*g,n.copy(r).addScaledVector(oh,o).addScaledVector(ah,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const c8={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},$a={h:0,s:0,l:0},R0={h:0,s:0,l:0};function Ww(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class ze{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=fr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,ln.toWorkingColorSpace(this,n),this}setRGB(e,n,r,i=ln.workingColorSpace){return this.r=e,this.g=n,this.b=r,ln.toWorkingColorSpace(this,i),this}setHSL(e,n,r,i=ln.workingColorSpace){if(e=TR(e,1),n=Gn(n,0,1),r=Gn(r,0,1),n===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+n):r+n-r*n,o=2*r-s;this.r=Ww(o,s,e+1/3),this.g=Ww(o,s,e),this.b=Ww(o,s,e-1/3)}return ln.toWorkingColorSpace(this,i),this}setStyle(e,n=fr){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,n);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,n);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,n);if(o===6)return this.setHex(parseInt(s,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=fr){const r=c8[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=ff(e.r),this.g=ff(e.g),this.b=ff(e.b),this}copyLinearToSRGB(e){return this.r=Dw(e.r),this.g=Dw(e.g),this.b=Dw(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=fr){return ln.fromWorkingColorSpace(Qr.copy(this),e),Math.round(Gn(Qr.r*255,0,255))*65536+Math.round(Gn(Qr.g*255,0,255))*256+Math.round(Gn(Qr.b*255,0,255))}getHexString(e=fr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=ln.workingColorSpace){ln.fromWorkingColorSpace(Qr.copy(this),n);const r=Qr.r,i=Qr.g,s=Qr.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const f=o-a;switch(c=u<=.5?f/(o+a):f/(2-o-a),o){case r:l=(i-s)/f+(i<s?6:0);break;case i:l=(s-r)/f+2;break;case s:l=(r-i)/f+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,n=ln.workingColorSpace){return ln.fromWorkingColorSpace(Qr.copy(this),n),e.r=Qr.r,e.g=Qr.g,e.b=Qr.b,e}getStyle(e=fr){ln.fromWorkingColorSpace(Qr.copy(this),e);const n=Qr.r,r=Qr.g,i=Qr.b;return e!==fr?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,n,r){return this.getHSL($a),this.setHSL($a.h+e,$a.s+n,$a.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL($a),e.getHSL(R0);const r=kp($a.h,R0.h,n),i=kp($a.s,R0.s,n),s=kp($a.l,R0.l,n);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*n+s[3]*r+s[6]*i,this.g=s[1]*n+s[4]*r+s[7]*i,this.b=s[2]*n+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Qr=new ze;ze.NAMES=c8;let uie=0;class lr extends Wo{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:uie++}),this.uuid=Zi(),this.name="",this.type="Material",this.blending=nu,this.side=Ho,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=sx,this.blendDst=ox,this.blendEquation=cl,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ze(0,0,0),this.blendAlpha=0,this.depthFunc=Dm,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=xC,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Pc,this.stencilZFail=Pc,this.stencilZPass=Pc,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==nu&&(r.blending=this.blending),this.side!==Ho&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==sx&&(r.blendSrc=this.blendSrc),this.blendDst!==ox&&(r.blendDst=this.blendDst),this.blendEquation!==cl&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==Dm&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==xC&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Pc&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Pc&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Pc&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(n){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=n[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Yi extends lr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ze(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Tg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ha=hie();function hie(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):c<-14?(r[l]=1024>>-c-14,r[l|256]=1024>>-c-14|32768,i[l]=-c-1,i[l|256]=-c-1):c<=15?(r[l]=c+15<<10,r[l|256]=c+15<<10|32768,i[l]=13,i[l|256]=13):c<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function Pi(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=Gn(t,-65504,65504),ha.floatView[0]=t;const e=ha.uint32View[0],n=e>>23&511;return ha.baseTable[n]+((e&8388607)>>ha.shiftTable[n])}function vp(t){const e=t>>10;return ha.uint32View[0]=ha.mantissaTable[ha.offsetTable[e]+(t&1023)]+ha.exponentTable[e],ha.floatView[0]}const fie={toHalfFloat:Pi,fromHalfFloat:vp},tr=new k,P0=new _e;class qt{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=zm,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=bs,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return iu("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)P0.fromBufferAttribute(this,n),P0.applyMatrix3(e),this.setXY(n,P0.x,P0.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)tr.fromBufferAttribute(this,n),tr.applyMatrix3(e),this.setXYZ(n,tr.x,tr.y,tr.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)tr.fromBufferAttribute(this,n),tr.applyMatrix4(e),this.setXYZ(n,tr.x,tr.y,tr.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)tr.fromBufferAttribute(this,n),tr.applyNormalMatrix(e),this.setXYZ(n,tr.x,tr.y,tr.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)tr.fromBufferAttribute(this,n),tr.transformDirection(e),this.setXYZ(n,tr.x,tr.y,tr.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=xi(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=Lt(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=xi(n,this.array)),n}setX(e,n){return this.normalized&&(n=Lt(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=xi(n,this.array)),n}setY(e,n){return this.normalized&&(n=Lt(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=xi(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Lt(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=xi(n,this.array)),n}setW(e,n){return this.normalized&&(n=Lt(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Lt(n,this.array),r=Lt(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=Lt(n,this.array),r=Lt(r,this.array),i=Lt(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e*=this.itemSize,this.normalized&&(n=Lt(n,this.array),r=Lt(r,this.array),i=Lt(i,this.array),s=Lt(s,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==zm&&(e.usage=this.usage),e}}class die extends qt{constructor(e,n,r){super(new Int8Array(e),n,r)}}class pie extends qt{constructor(e,n,r){super(new Uint8Array(e),n,r)}}class mie extends qt{constructor(e,n,r){super(new Uint8ClampedArray(e),n,r)}}class gie extends qt{constructor(e,n,r){super(new Int16Array(e),n,r)}}class RR extends qt{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class yie extends qt{constructor(e,n,r){super(new Int32Array(e),n,r)}}class PR extends qt{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class vie extends qt{constructor(e,n,r){super(new Uint16Array(e),n,r),this.isFloat16BufferAttribute=!0}getX(e){let n=vp(this.array[e*this.itemSize]);return this.normalized&&(n=xi(n,this.array)),n}setX(e,n){return this.normalized&&(n=Lt(n,this.array)),this.array[e*this.itemSize]=Pi(n),this}getY(e){let n=vp(this.array[e*this.itemSize+1]);return this.normalized&&(n=xi(n,this.array)),n}setY(e,n){return this.normalized&&(n=Lt(n,this.array)),this.array[e*this.itemSize+1]=Pi(n),this}getZ(e){let n=vp(this.array[e*this.itemSize+2]);return this.normalized&&(n=xi(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Lt(n,this.array)),this.array[e*this.itemSize+2]=Pi(n),this}getW(e){let n=vp(this.array[e*this.itemSize+3]);return this.normalized&&(n=xi(n,this.array)),n}setW(e,n){return this.normalized&&(n=Lt(n,this.array)),this.array[e*this.itemSize+3]=Pi(n),this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Lt(n,this.array),r=Lt(r,this.array)),this.array[e+0]=Pi(n),this.array[e+1]=Pi(r),this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=Lt(n,this.array),r=Lt(r,this.array),i=Lt(i,this.array)),this.array[e+0]=Pi(n),this.array[e+1]=Pi(r),this.array[e+2]=Pi(i),this}setXYZW(e,n,r,i,s){return e*=this.itemSize,this.normalized&&(n=Lt(n,this.array),r=Lt(r,this.array),i=Lt(i,this.array),s=Lt(s,this.array)),this.array[e+0]=Pi(n),this.array[e+1]=Pi(r),this.array[e+2]=Pi(i),this.array[e+3]=Pi(s),this}}class it extends qt{constructor(e,n,r){super(new Float32Array(e),n,r)}}class _ie extends qt{constructor(e,n,r){super(new Float64Array(e),n,r)}}let xie=0;const _s=new ft,Xw=new Jt,lh=new k,Wi=new si,jd=new si,Ar=new k;class It extends Wo{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:xie++}),this.uuid=Zi(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(o8(e)?PR:RR)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new kt().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return _s.makeRotationFromQuaternion(e),this.applyMatrix4(_s),this}rotateX(e){return _s.makeRotationX(e),this.applyMatrix4(_s),this}rotateY(e){return _s.makeRotationY(e),this.applyMatrix4(_s),this}rotateZ(e){return _s.makeRotationZ(e),this.applyMatrix4(_s),this}translate(e,n,r){return _s.makeTranslation(e,n,r),this.applyMatrix4(_s),this}scale(e,n,r){return _s.makeScale(e,n,r),this.applyMatrix4(_s),this}lookAt(e){return Xw.lookAt(e),Xw.updateMatrix(),this.applyMatrix4(Xw.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(lh).negate(),this.translate(lh.x,lh.y,lh.z),this}setFromPoints(e){const n=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];n.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new it(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new si);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new k(-1/0,-1/0,-1/0),new k(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const s=n[r];Wi.setFromBufferAttribute(s),this.morphTargetsRelative?(Ar.addVectors(this.boundingBox.min,Wi.min),this.boundingBox.expandByPoint(Ar),Ar.addVectors(this.boundingBox.max,Wi.max),this.boundingBox.expandByPoint(Ar)):(this.boundingBox.expandByPoint(Wi.min),this.boundingBox.expandByPoint(Wi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Hr);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new k,1/0);return}if(e){const r=this.boundingSphere.center;if(Wi.setFromBufferAttribute(e),n)for(let s=0,o=n.length;s<o;s++){const a=n[s];jd.setFromBufferAttribute(a),this.morphTargetsRelative?(Ar.addVectors(Wi.min,jd.min),Wi.expandByPoint(Ar),Ar.addVectors(Wi.max,jd.max),Wi.expandByPoint(Ar)):(Wi.expandByPoint(jd.min),Wi.expandByPoint(jd.max))}Wi.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)Ar.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(Ar));if(n)for(let s=0,o=n.length;s<o;s++){const a=n[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)Ar.fromBufferAttribute(a,c),l&&(lh.fromBufferAttribute(e,c),Ar.add(lh)),i=Math.max(i,r.distanceToSquared(Ar))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=n.position.array,s=n.normal.array,o=n.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new qt(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let T=0;T<a;T++)c[T]=new k,u[T]=new k;const f=new k,p=new k,m=new k,y=new _e,S=new _e,v=new _e,g=new k,_=new k;function A(T,D,z){f.fromArray(i,T*3),p.fromArray(i,D*3),m.fromArray(i,z*3),y.fromArray(o,T*2),S.fromArray(o,D*2),v.fromArray(o,z*2),p.sub(f),m.sub(f),S.sub(y),v.sub(y);const j=1/(S.x*v.y-v.x*S.y);isFinite(j)&&(g.copy(p).multiplyScalar(v.y).addScaledVector(m,-S.y).multiplyScalar(j),_.copy(m).multiplyScalar(S.x).addScaledVector(p,-v.x).multiplyScalar(j),c[T].add(g),c[D].add(g),c[z].add(g),u[T].add(_),u[D].add(_),u[z].add(_))}let E=this.groups;E.length===0&&(E=[{start:0,count:r.length}]);for(let T=0,D=E.length;T<D;++T){const z=E[T],j=z.start,H=z.count;for(let q=j,Z=j+H;q<Z;q+=3)A(r[q+0],r[q+1],r[q+2])}const b=new k,C=new k,P=new k,L=new k;function N(T){P.fromArray(s,T*3),L.copy(P);const D=c[T];b.copy(D),b.sub(P.multiplyScalar(P.dot(D))).normalize(),C.crossVectors(L,D);const j=C.dot(u[T])<0?-1:1;l[T*4]=b.x,l[T*4+1]=b.y,l[T*4+2]=b.z,l[T*4+3]=j}for(let T=0,D=E.length;T<D;++T){const z=E[T],j=z.start,H=z.count;for(let q=j,Z=j+H;q<Z;q+=3)N(r[q+0]),N(r[q+1]),N(r[q+2])}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new qt(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let p=0,m=r.count;p<m;p++)r.setXYZ(p,0,0,0);const i=new k,s=new k,o=new k,a=new k,l=new k,c=new k,u=new k,f=new k;if(e)for(let p=0,m=e.count;p<m;p+=3){const y=e.getX(p+0),S=e.getX(p+1),v=e.getX(p+2);i.fromBufferAttribute(n,y),s.fromBufferAttribute(n,S),o.fromBufferAttribute(n,v),u.subVectors(o,s),f.subVectors(i,s),u.cross(f),a.fromBufferAttribute(r,y),l.fromBufferAttribute(r,S),c.fromBufferAttribute(r,v),a.add(u),l.add(u),c.add(u),r.setXYZ(y,a.x,a.y,a.z),r.setXYZ(S,l.x,l.y,l.z),r.setXYZ(v,c.x,c.y,c.z)}else for(let p=0,m=n.count;p<m;p+=3)i.fromBufferAttribute(n,p+0),s.fromBufferAttribute(n,p+1),o.fromBufferAttribute(n,p+2),u.subVectors(o,s),f.subVectors(i,s),u.cross(f),r.setXYZ(p+0,u.x,u.y,u.z),r.setXYZ(p+1,u.x,u.y,u.z),r.setXYZ(p+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)Ar.fromBufferAttribute(e,n),Ar.normalize(),e.setXYZ(n,Ar.x,Ar.y,Ar.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,f=a.normalized,p=new c.constructor(l.length*u);let m=0,y=0;for(let S=0,v=l.length;S<v;S++){a.isInterleavedBufferAttribute?m=l[S]*a.data.stride+a.offset:m=l[S]*u;for(let g=0;g<u;g++)p[y++]=c[m++]}return new qt(p,u,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new It,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],c=e(l,r);n.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,f=c.length;u<f;u++){const p=c[u],m=e(p,r);l.push(m)}n.morphAttributes[a]=l}n.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];n.addGroup(c.start,c.count,c.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let f=0,p=c.length;f<p;f++){const m=c[f];u.push(m.toJSON(e.data))}u.length>0&&(i[l]=u,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(n));const i=e.attributes;for(const c in i){const u=i[c];this.setAttribute(c,u.clone(n))}const s=e.morphAttributes;for(const c in s){const u=[],f=s[c];for(let p=0,m=f.length;p<m;p++)u.push(f[p].clone(n));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const f=o[c];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const qB=new ft,pc=new bu,I0=new Hr,YB=new k,ch=new k,uh=new k,hh=new k,Kw=new k,L0=new k,D0=new _e,B0=new _e,N0=new _e,QB=new k,ZB=new k,eN=new k,O0=new k,F0=new k;class Yn extends Jt{constructor(e=new It,n=new Yi){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,n){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;n.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){L0.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],f=s[l];u!==0&&(Kw.fromBufferAttribute(f,e),o?L0.addScaledVector(Kw,u):L0.addScaledVector(Kw.sub(n),u))}n.add(L0)}return n}raycast(e,n){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),I0.copy(r.boundingSphere),I0.applyMatrix4(s),pc.copy(e.ray).recast(e.near),!(I0.containsPoint(pc.origin)===!1&&(pc.intersectSphere(I0,YB)===null||pc.origin.distanceToSquared(YB)>(e.far-e.near)**2))&&(qB.copy(s).invert(),pc.copy(e.ray).applyMatrix4(qB),!(r.boundingBox!==null&&pc.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,pc)))}_computeIntersections(e,n,r){let i;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,f=s.attributes.normal,p=s.groups,m=s.drawRange;if(a!==null)if(Array.isArray(o))for(let y=0,S=p.length;y<S;y++){const v=p[y],g=o[v.materialIndex],_=Math.max(v.start,m.start),A=Math.min(a.count,Math.min(v.start+v.count,m.start+m.count));for(let E=_,b=A;E<b;E+=3){const C=a.getX(E),P=a.getX(E+1),L=a.getX(E+2);i=k0(this,g,e,r,c,u,f,C,P,L),i&&(i.faceIndex=Math.floor(E/3),i.face.materialIndex=v.materialIndex,n.push(i))}}else{const y=Math.max(0,m.start),S=Math.min(a.count,m.start+m.count);for(let v=y,g=S;v<g;v+=3){const _=a.getX(v),A=a.getX(v+1),E=a.getX(v+2);i=k0(this,o,e,r,c,u,f,_,A,E),i&&(i.faceIndex=Math.floor(v/3),n.push(i))}}else if(l!==void 0)if(Array.isArray(o))for(let y=0,S=p.length;y<S;y++){const v=p[y],g=o[v.materialIndex],_=Math.max(v.start,m.start),A=Math.min(l.count,Math.min(v.start+v.count,m.start+m.count));for(let E=_,b=A;E<b;E+=3){const C=E,P=E+1,L=E+2;i=k0(this,g,e,r,c,u,f,C,P,L),i&&(i.faceIndex=Math.floor(E/3),i.face.materialIndex=v.materialIndex,n.push(i))}}else{const y=Math.max(0,m.start),S=Math.min(l.count,m.start+m.count);for(let v=y,g=S;v<g;v+=3){const _=v,A=v+1,E=v+2;i=k0(this,o,e,r,c,u,f,_,A,E),i&&(i.faceIndex=Math.floor(v/3),n.push(i))}}}}function Sie(t,e,n,r,i,s,o,a){let l;if(e.side===wi?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===Ho,a),l===null)return null;F0.copy(a),F0.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(F0);return c<n.near||c>n.far?null:{distance:c,point:F0.clone(),object:t}}function k0(t,e,n,r,i,s,o,a,l,c){t.getVertexPosition(a,ch),t.getVertexPosition(l,uh),t.getVertexPosition(c,hh);const u=Sie(t,e,n,r,ch,uh,hh,O0);if(u){i&&(D0.fromBufferAttribute(i,a),B0.fromBufferAttribute(i,l),N0.fromBufferAttribute(i,c),u.uv=$i.getInterpolation(O0,ch,uh,hh,D0,B0,N0,new _e)),s&&(D0.fromBufferAttribute(s,a),B0.fromBufferAttribute(s,l),N0.fromBufferAttribute(s,c),u.uv1=$i.getInterpolation(O0,ch,uh,hh,D0,B0,N0,new _e),u.uv2=u.uv1),o&&(QB.fromBufferAttribute(o,a),ZB.fromBufferAttribute(o,l),eN.fromBufferAttribute(o,c),u.normal=$i.getInterpolation(O0,ch,uh,hh,QB,ZB,eN,new k),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const f={a,b:l,c,normal:new k,materialIndex:0};$i.getNormal(ch,uh,hh,f.normal),u.face=f}return u}class Ru extends It{constructor(e=1,n=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],f=[];let p=0,m=0;y("z","y","x",-1,-1,r,n,e,o,s,0),y("z","y","x",1,-1,r,n,-e,o,s,1),y("x","z","y",1,1,e,r,n,i,o,2),y("x","z","y",1,-1,e,r,-n,i,o,3),y("x","y","z",1,-1,e,n,r,i,s,4),y("x","y","z",-1,-1,e,n,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new it(c,3)),this.setAttribute("normal",new it(u,3)),this.setAttribute("uv",new it(f,2));function y(S,v,g,_,A,E,b,C,P,L,N){const T=E/P,D=b/L,z=E/2,j=b/2,H=C/2,q=P+1,Z=L+1;let ae=0,O=0;const W=new k;for(let K=0;K<Z;K++){const Y=K*D-j;for(let te=0;te<q;te++){const Te=te*T-z;W[S]=Te*_,W[v]=Y*A,W[g]=H,c.push(W.x,W.y,W.z),W[S]=0,W[v]=0,W[g]=C>0?1:-1,u.push(W.x,W.y,W.z),f.push(te/P),f.push(1-K/L),ae+=1}}for(let K=0;K<L;K++)for(let Y=0;Y<P;Y++){const te=p+Y+q*K,Te=p+Y+q*(K+1),ne=p+(Y+1)+q*(K+1),de=p+(Y+1)+q*K;l.push(te,Te,de),l.push(Te,ne,de),O+=6}a.addGroup(m,O,N),m+=O,p+=ae}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ru(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function kf(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function mi(t){const e={};for(let n=0;n<t.length;n++){const r=kf(t[n]);for(const i in r)e[i]=r[i]}return e}function Aie(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function u8(t){return t.getRenderTarget()===null?t.outputColorSpace:ln.workingColorSpace}const h8={clone:kf,merge:mi};var wie=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Eie=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class io extends lr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=wie,this.fragmentShader=Eie,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=kf(e.uniforms),this.uniformsGroups=Aie(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?n.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?n.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?n.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?n.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?n.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?n.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?n.uniforms[i]={type:"m4",value:o.toArray()}:n.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class Rg extends Jt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ft,this.projectionMatrix=new ft,this.projectionMatrixInverse=new ft,this.coordinateSystem=Ro}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Ja=new k,tN=new _e,nN=new _e;class wn extends Rg{constructor(e=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=Ff*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(ru*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Ff*2*Math.atan(Math.tan(ru*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,r){Ja.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Ja.x,Ja.y).multiplyScalar(-e/Ja.z),Ja.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(Ja.x,Ja.y).multiplyScalar(-e/Ja.z)}getViewSize(e,n){return this.getViewBounds(e,tN,nN),n.subVectors(nN,tN)}setViewOffset(e,n,r,i,s,o){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(ru*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*i/l,n-=o.offsetY*r/c,i*=o.width/l,r*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,n,n-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const fh=-90,dh=1;class IR extends Jt{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new wn(fh,dh,e,n);i.layers=this.layers,this.add(i);const s=new wn(fh,dh,e,n);s.layers=this.layers,this.add(s);const o=new wn(fh,dh,e,n);o.layers=this.layers,this.add(o);const a=new wn(fh,dh,e,n);a.layers=this.layers,this.add(a);const l=new wn(fh,dh,e,n);l.layers=this.layers,this.add(l);const c=new wn(fh,dh,e,n);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,i,s,o,a,l]=n;for(const c of n)this.remove(c);if(e===Ro)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Hm)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of n)this.add(c),c.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,u]=this.children,f=e.getRenderTarget(),p=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),y=e.xr.enabled;e.xr.enabled=!1;const S=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(n,s),e.setRenderTarget(r,1,i),e.render(n,o),e.setRenderTarget(r,2,i),e.render(n,a),e.setRenderTarget(r,3,i),e.render(n,l),e.setRenderTarget(r,4,i),e.render(n,c),r.texture.generateMipmaps=S,e.setRenderTarget(r,5,i),e.render(n,u),e.setRenderTarget(f,p,m),e.xr.enabled=y,r.texture.needsPMREMUpdate=!0}}class Pg extends Mn{constructor(e,n,r,i,s,o,a,l,c,u){e=e!==void 0?e:[],n=n!==void 0?n:Pa,super(e,n,r,i,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class LR extends ro{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];n.encoding!==void 0&&(iu("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===Ll?fr:Ki),this.texture=new Pg(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Sn}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Ru(5,5,5),s=new io({name:"CubemapFromEquirect",uniforms:kf(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:wi,blending:Sa});s.uniforms.tEquirect.value=n;const o=new Yn(i,s),a=n.minFilter;return n.minFilter===Is&&(n.minFilter=Sn),new IR(1,10,this).update(e,o),n.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,n,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(n,r,i);e.setRenderTarget(s)}}const $w=new k,Mie=new k,Tie=new kt;class ua{constructor(e=new k(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=$w.subVectors(r,n).cross(Mie.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta($w),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:n.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||Tie.getNormalMatrix(e),i=this.coplanarPoint($w).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const mc=new Hr,U0=new k;class Ig{constructor(e=new ua,n=new ua,r=new ua,i=new ua,s=new ua,o=new ua){this.planes=[e,n,r,i,s,o]}set(e,n,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(n),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=Ro){const r=this.planes,i=e.elements,s=i[0],o=i[1],a=i[2],l=i[3],c=i[4],u=i[5],f=i[6],p=i[7],m=i[8],y=i[9],S=i[10],v=i[11],g=i[12],_=i[13],A=i[14],E=i[15];if(r[0].setComponents(l-s,p-c,v-m,E-g).normalize(),r[1].setComponents(l+s,p+c,v+m,E+g).normalize(),r[2].setComponents(l+o,p+u,v+y,E+_).normalize(),r[3].setComponents(l-o,p-u,v-y,E-_).normalize(),r[4].setComponents(l-a,p-f,v-S,E-A).normalize(),n===Ro)r[5].setComponents(l+a,p+f,v+S,E+A).normalize();else if(n===Hm)r[5].setComponents(a,f,S,A).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),mc.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),mc.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(mc)}intersectsSprite(e){return mc.center.set(0,0,0),mc.radius=.7071067811865476,mc.applyMatrix4(e.matrixWorld),this.intersectsSphere(mc)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(n[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(U0.x=i.normal.x>0?e.max.x:e.min.x,U0.y=i.normal.y>0?e.max.y:e.min.y,U0.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(U0)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function f8(){let t=null,e=!1,n=null,r=null;function i(s,o){n(s,o),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){n=s},setContext:function(s){t=s}}}function Cie(t,e){const n=e.isWebGL2,r=new WeakMap;function i(c,u){const f=c.array,p=c.usage,m=f.byteLength,y=t.createBuffer();t.bindBuffer(u,y),t.bufferData(u,f,p),c.onUploadCallback();let S;if(f instanceof Float32Array)S=t.FLOAT;else if(f instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(n)S=t.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else S=t.UNSIGNED_SHORT;else if(f instanceof Int16Array)S=t.SHORT;else if(f instanceof Uint32Array)S=t.UNSIGNED_INT;else if(f instanceof Int32Array)S=t.INT;else if(f instanceof Int8Array)S=t.BYTE;else if(f instanceof Uint8Array)S=t.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)S=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:y,type:S,bytesPerElement:f.BYTES_PER_ELEMENT,version:c.version,size:m}}function s(c,u,f){const p=u.array,m=u._updateRange,y=u.updateRanges;if(t.bindBuffer(f,c),m.count===-1&&y.length===0&&t.bufferSubData(f,0,p),y.length!==0){for(let S=0,v=y.length;S<v;S++){const g=y[S];n?t.bufferSubData(f,g.start*p.BYTES_PER_ELEMENT,p,g.start,g.count):t.bufferSubData(f,g.start*p.BYTES_PER_ELEMENT,p.subarray(g.start,g.start+g.count))}u.clearUpdateRanges()}m.count!==-1&&(n?t.bufferSubData(f,m.offset*p.BYTES_PER_ELEMENT,p,m.offset,m.count):t.bufferSubData(f,m.offset*p.BYTES_PER_ELEMENT,p.subarray(m.offset,m.offset+m.count)),m.count=-1),u.onUploadCallback()}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),r.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=r.get(c);u&&(t.deleteBuffer(u.buffer),r.delete(c))}function l(c,u){if(c.isGLBufferAttribute){const p=r.get(c);(!p||p.version<c.version)&&r.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const f=r.get(c);if(f===void 0)r.set(c,i(c,u));else if(f.version<c.version){if(f.size!==c.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");s(f.buffer,c,u),f.version=c.version}}return{get:o,remove:a,update:l}}class sd extends It{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const s=e/2,o=n/2,a=Math.floor(r),l=Math.floor(i),c=a+1,u=l+1,f=e/a,p=n/l,m=[],y=[],S=[],v=[];for(let g=0;g<u;g++){const _=g*p-o;for(let A=0;A<c;A++){const E=A*f-s;y.push(E,-_,0),S.push(0,0,1),v.push(A/a),v.push(1-g/l)}}for(let g=0;g<l;g++)for(let _=0;_<a;_++){const A=_+c*g,E=_+c*(g+1),b=_+1+c*(g+1),C=_+1+c*g;m.push(A,E,C),m.push(E,b,C)}this.setIndex(m),this.setAttribute("position",new it(y,3)),this.setAttribute("normal",new it(S,3)),this.setAttribute("uv",new it(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sd(e.width,e.height,e.widthSegments,e.heightSegments)}}var bie=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Rie=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Pie=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Iie=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Lie=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Die=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Bie=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Nie=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Oie=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Fie=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,kie=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Uie=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Vie=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,zie=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Hie=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Gie=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,jie=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Wie=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Xie=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Kie=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,$ie=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Jie=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,qie=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Yie=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Qie=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Zie=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,ese=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,tse=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,nse=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,rse=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,ise="gl_FragColor = linearToOutputTexel( gl_FragColor );",sse=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,ose=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,ase=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,lse=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,cse=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,use=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,hse=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,fse=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,dse=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,pse=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,mse=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,gse=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,yse=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,vse=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,_se=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,xse=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Sse=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Ase=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,wse=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Ese=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Mse=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Tse=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Cse=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,bse=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Rse=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Pse=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Ise=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Lse=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Dse=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,Bse=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,Nse=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Ose=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Fse=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,kse=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Use=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Vse=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,zse=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Hse=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,Gse=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,jse=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,Wse=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Xse=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Kse=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,$se=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Jse=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,qse=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Yse=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Qse=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Zse=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,eoe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,toe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,noe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,roe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,ioe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,soe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,ooe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,aoe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,loe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,coe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,uoe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,hoe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,foe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,doe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,poe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,moe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,goe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,yoe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,voe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,_oe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,xoe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Soe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Aoe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,woe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Eoe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Moe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Toe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Coe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,boe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Roe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Poe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Ioe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Loe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Doe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Boe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Noe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Ooe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Foe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,koe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Uoe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Voe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,zoe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Hoe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Goe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,joe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Woe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Xoe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Koe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,$oe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Joe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,qoe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Yoe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Qoe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Zoe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,eae=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,tae=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,nae=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,rae=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,iae=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,sae=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,oae=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Nt={alphahash_fragment:bie,alphahash_pars_fragment:Rie,alphamap_fragment:Pie,alphamap_pars_fragment:Iie,alphatest_fragment:Lie,alphatest_pars_fragment:Die,aomap_fragment:Bie,aomap_pars_fragment:Nie,batching_pars_vertex:Oie,batching_vertex:Fie,begin_vertex:kie,beginnormal_vertex:Uie,bsdfs:Vie,iridescence_fragment:zie,bumpmap_pars_fragment:Hie,clipping_planes_fragment:Gie,clipping_planes_pars_fragment:jie,clipping_planes_pars_vertex:Wie,clipping_planes_vertex:Xie,color_fragment:Kie,color_pars_fragment:$ie,color_pars_vertex:Jie,color_vertex:qie,common:Yie,cube_uv_reflection_fragment:Qie,defaultnormal_vertex:Zie,displacementmap_pars_vertex:ese,displacementmap_vertex:tse,emissivemap_fragment:nse,emissivemap_pars_fragment:rse,colorspace_fragment:ise,colorspace_pars_fragment:sse,envmap_fragment:ose,envmap_common_pars_fragment:ase,envmap_pars_fragment:lse,envmap_pars_vertex:cse,envmap_physical_pars_fragment:Sse,envmap_vertex:use,fog_vertex:hse,fog_pars_vertex:fse,fog_fragment:dse,fog_pars_fragment:pse,gradientmap_pars_fragment:mse,lightmap_fragment:gse,lightmap_pars_fragment:yse,lights_lambert_fragment:vse,lights_lambert_pars_fragment:_se,lights_pars_begin:xse,lights_toon_fragment:Ase,lights_toon_pars_fragment:wse,lights_phong_fragment:Ese,lights_phong_pars_fragment:Mse,lights_physical_fragment:Tse,lights_physical_pars_fragment:Cse,lights_fragment_begin:bse,lights_fragment_maps:Rse,lights_fragment_end:Pse,logdepthbuf_fragment:Ise,logdepthbuf_pars_fragment:Lse,logdepthbuf_pars_vertex:Dse,logdepthbuf_vertex:Bse,map_fragment:Nse,map_pars_fragment:Ose,map_particle_fragment:Fse,map_particle_pars_fragment:kse,metalnessmap_fragment:Use,metalnessmap_pars_fragment:Vse,morphcolor_vertex:zse,morphnormal_vertex:Hse,morphtarget_pars_vertex:Gse,morphtarget_vertex:jse,normal_fragment_begin:Wse,normal_fragment_maps:Xse,normal_pars_fragment:Kse,normal_pars_vertex:$se,normal_vertex:Jse,normalmap_pars_fragment:qse,clearcoat_normal_fragment_begin:Yse,clearcoat_normal_fragment_maps:Qse,clearcoat_pars_fragment:Zse,iridescence_pars_fragment:eoe,opaque_fragment:toe,packing:noe,premultiplied_alpha_fragment:roe,project_vertex:ioe,dithering_fragment:soe,dithering_pars_fragment:ooe,roughnessmap_fragment:aoe,roughnessmap_pars_fragment:loe,shadowmap_pars_fragment:coe,shadowmap_pars_vertex:uoe,shadowmap_vertex:hoe,shadowmask_pars_fragment:foe,skinbase_vertex:doe,skinning_pars_vertex:poe,skinning_vertex:moe,skinnormal_vertex:goe,specularmap_fragment:yoe,specularmap_pars_fragment:voe,tonemapping_fragment:_oe,tonemapping_pars_fragment:xoe,transmission_fragment:Soe,transmission_pars_fragment:Aoe,uv_pars_fragment:woe,uv_pars_vertex:Eoe,uv_vertex:Moe,worldpos_vertex:Toe,background_vert:Coe,background_frag:boe,backgroundCube_vert:Roe,backgroundCube_frag:Poe,cube_vert:Ioe,cube_frag:Loe,depth_vert:Doe,depth_frag:Boe,distanceRGBA_vert:Noe,distanceRGBA_frag:Ooe,equirect_vert:Foe,equirect_frag:koe,linedashed_vert:Uoe,linedashed_frag:Voe,meshbasic_vert:zoe,meshbasic_frag:Hoe,meshlambert_vert:Goe,meshlambert_frag:joe,meshmatcap_vert:Woe,meshmatcap_frag:Xoe,meshnormal_vert:Koe,meshnormal_frag:$oe,meshphong_vert:Joe,meshphong_frag:qoe,meshphysical_vert:Yoe,meshphysical_frag:Qoe,meshtoon_vert:Zoe,meshtoon_frag:eae,points_vert:tae,points_frag:nae,shadow_vert:rae,shadow_frag:iae,sprite_vert:sae,sprite_frag:oae},Fe={common:{diffuse:{value:new ze(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new kt},alphaMap:{value:null},alphaMapTransform:{value:new kt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new kt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new kt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new kt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new kt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new kt},normalScale:{value:new _e(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new kt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new kt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new kt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new kt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ze(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ze(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new kt},alphaTest:{value:0},uvTransform:{value:new kt}},sprite:{diffuse:{value:new ze(16777215)},opacity:{value:1},center:{value:new _e(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new kt},alphaMap:{value:null},alphaMapTransform:{value:new kt},alphaTest:{value:0}}},Ks={basic:{uniforms:mi([Fe.common,Fe.specularmap,Fe.envmap,Fe.aomap,Fe.lightmap,Fe.fog]),vertexShader:Nt.meshbasic_vert,fragmentShader:Nt.meshbasic_frag},lambert:{uniforms:mi([Fe.common,Fe.specularmap,Fe.envmap,Fe.aomap,Fe.lightmap,Fe.emissivemap,Fe.bumpmap,Fe.normalmap,Fe.displacementmap,Fe.fog,Fe.lights,{emissive:{value:new ze(0)}}]),vertexShader:Nt.meshlambert_vert,fragmentShader:Nt.meshlambert_frag},phong:{uniforms:mi([Fe.common,Fe.specularmap,Fe.envmap,Fe.aomap,Fe.lightmap,Fe.emissivemap,Fe.bumpmap,Fe.normalmap,Fe.displacementmap,Fe.fog,Fe.lights,{emissive:{value:new ze(0)},specular:{value:new ze(1118481)},shininess:{value:30}}]),vertexShader:Nt.meshphong_vert,fragmentShader:Nt.meshphong_frag},standard:{uniforms:mi([Fe.common,Fe.envmap,Fe.aomap,Fe.lightmap,Fe.emissivemap,Fe.bumpmap,Fe.normalmap,Fe.displacementmap,Fe.roughnessmap,Fe.metalnessmap,Fe.fog,Fe.lights,{emissive:{value:new ze(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Nt.meshphysical_vert,fragmentShader:Nt.meshphysical_frag},toon:{uniforms:mi([Fe.common,Fe.aomap,Fe.lightmap,Fe.emissivemap,Fe.bumpmap,Fe.normalmap,Fe.displacementmap,Fe.gradientmap,Fe.fog,Fe.lights,{emissive:{value:new ze(0)}}]),vertexShader:Nt.meshtoon_vert,fragmentShader:Nt.meshtoon_frag},matcap:{uniforms:mi([Fe.common,Fe.bumpmap,Fe.normalmap,Fe.displacementmap,Fe.fog,{matcap:{value:null}}]),vertexShader:Nt.meshmatcap_vert,fragmentShader:Nt.meshmatcap_frag},points:{uniforms:mi([Fe.points,Fe.fog]),vertexShader:Nt.points_vert,fragmentShader:Nt.points_frag},dashed:{uniforms:mi([Fe.common,Fe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Nt.linedashed_vert,fragmentShader:Nt.linedashed_frag},depth:{uniforms:mi([Fe.common,Fe.displacementmap]),vertexShader:Nt.depth_vert,fragmentShader:Nt.depth_frag},normal:{uniforms:mi([Fe.common,Fe.bumpmap,Fe.normalmap,Fe.displacementmap,{opacity:{value:1}}]),vertexShader:Nt.meshnormal_vert,fragmentShader:Nt.meshnormal_frag},sprite:{uniforms:mi([Fe.sprite,Fe.fog]),vertexShader:Nt.sprite_vert,fragmentShader:Nt.sprite_frag},background:{uniforms:{uvTransform:{value:new kt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Nt.background_vert,fragmentShader:Nt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Nt.backgroundCube_vert,fragmentShader:Nt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Nt.cube_vert,fragmentShader:Nt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Nt.equirect_vert,fragmentShader:Nt.equirect_frag},distanceRGBA:{uniforms:mi([Fe.common,Fe.displacementmap,{referencePosition:{value:new k},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Nt.distanceRGBA_vert,fragmentShader:Nt.distanceRGBA_frag},shadow:{uniforms:mi([Fe.lights,Fe.fog,{color:{value:new ze(0)},opacity:{value:1}}]),vertexShader:Nt.shadow_vert,fragmentShader:Nt.shadow_frag}};Ks.physical={uniforms:mi([Ks.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new kt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new kt},clearcoatNormalScale:{value:new _e(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new kt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new kt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new kt},sheen:{value:0},sheenColor:{value:new ze(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new kt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new kt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new kt},transmissionSamplerSize:{value:new _e},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new kt},attenuationDistance:{value:0},attenuationColor:{value:new ze(0)},specularColor:{value:new ze(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new kt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new kt},anisotropyVector:{value:new _e},anisotropyMap:{value:null},anisotropyMapTransform:{value:new kt}}]),vertexShader:Nt.meshphysical_vert,fragmentShader:Nt.meshphysical_frag};const V0={r:0,b:0,g:0};function aae(t,e,n,r,i,s,o){const a=new ze(0);let l=s===!0?0:1,c,u,f=null,p=0,m=null;function y(v,g){let _=!1,A=g.isScene===!0?g.background:null;A&&A.isTexture&&(A=(g.backgroundBlurriness>0?n:e).get(A)),A===null?S(a,l):A&&A.isColor&&(S(A,1),_=!0);const E=t.xr.getEnvironmentBlendMode();E==="additive"?r.buffers.color.setClear(0,0,0,1,o):E==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,o),(t.autoClear||_)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),A&&(A.isCubeTexture||A.mapping===id)?(u===void 0&&(u=new Yn(new Ru(1,1,1),new io({name:"BackgroundCubeMaterial",uniforms:kf(Ks.backgroundCube.uniforms),vertexShader:Ks.backgroundCube.vertexShader,fragmentShader:Ks.backgroundCube.fragmentShader,side:wi,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(b,C,P){this.matrixWorld.copyPosition(P.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),u.material.uniforms.envMap.value=A,u.material.uniforms.flipEnvMap.value=A.isCubeTexture&&A.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,u.material.toneMapped=ln.getTransfer(A.colorSpace)!==gn,(f!==A||p!==A.version||m!==t.toneMapping)&&(u.material.needsUpdate=!0,f=A,p=A.version,m=t.toneMapping),u.layers.enableAll(),v.unshift(u,u.geometry,u.material,0,0,null)):A&&A.isTexture&&(c===void 0&&(c=new Yn(new sd(2,2),new io({name:"BackgroundMaterial",uniforms:kf(Ks.background.uniforms),vertexShader:Ks.background.vertexShader,fragmentShader:Ks.background.fragmentShader,side:Ho,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=A,c.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,c.material.toneMapped=ln.getTransfer(A.colorSpace)!==gn,A.matrixAutoUpdate===!0&&A.updateMatrix(),c.material.uniforms.uvTransform.value.copy(A.matrix),(f!==A||p!==A.version||m!==t.toneMapping)&&(c.material.needsUpdate=!0,f=A,p=A.version,m=t.toneMapping),c.layers.enableAll(),v.unshift(c,c.geometry,c.material,0,0,null))}function S(v,g){v.getRGB(V0,u8(t)),r.buffers.color.setClear(V0.r,V0.g,V0.b,g,o)}return{getClearColor:function(){return a},setClearColor:function(v,g=1){a.set(v),l=g,S(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(v){l=v,S(a,l)},render:y}}function lae(t,e,n,r){const i=t.getParameter(t.MAX_VERTEX_ATTRIBS),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||s!==null,a={},l=v(null);let c=l,u=!1;function f(H,q,Z,ae,O){let W=!1;if(o){const K=S(ae,Z,q);c!==K&&(c=K,m(c.object)),W=g(H,ae,Z,O),W&&_(H,ae,Z,O)}else{const K=q.wireframe===!0;(c.geometry!==ae.id||c.program!==Z.id||c.wireframe!==K)&&(c.geometry=ae.id,c.program=Z.id,c.wireframe=K,W=!0)}O!==null&&n.update(O,t.ELEMENT_ARRAY_BUFFER),(W||u)&&(u=!1,L(H,q,Z,ae),O!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.get(O).buffer))}function p(){return r.isWebGL2?t.createVertexArray():s.createVertexArrayOES()}function m(H){return r.isWebGL2?t.bindVertexArray(H):s.bindVertexArrayOES(H)}function y(H){return r.isWebGL2?t.deleteVertexArray(H):s.deleteVertexArrayOES(H)}function S(H,q,Z){const ae=Z.wireframe===!0;let O=a[H.id];O===void 0&&(O={},a[H.id]=O);let W=O[q.id];W===void 0&&(W={},O[q.id]=W);let K=W[ae];return K===void 0&&(K=v(p()),W[ae]=K),K}function v(H){const q=[],Z=[],ae=[];for(let O=0;O<i;O++)q[O]=0,Z[O]=0,ae[O]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:q,enabledAttributes:Z,attributeDivisors:ae,object:H,attributes:{},index:null}}function g(H,q,Z,ae){const O=c.attributes,W=q.attributes;let K=0;const Y=Z.getAttributes();for(const te in Y)if(Y[te].location>=0){const ne=O[te];let de=W[te];if(de===void 0&&(te==="instanceMatrix"&&H.instanceMatrix&&(de=H.instanceMatrix),te==="instanceColor"&&H.instanceColor&&(de=H.instanceColor)),ne===void 0||ne.attribute!==de||de&&ne.data!==de.data)return!0;K++}return c.attributesNum!==K||c.index!==ae}function _(H,q,Z,ae){const O={},W=q.attributes;let K=0;const Y=Z.getAttributes();for(const te in Y)if(Y[te].location>=0){let ne=W[te];ne===void 0&&(te==="instanceMatrix"&&H.instanceMatrix&&(ne=H.instanceMatrix),te==="instanceColor"&&H.instanceColor&&(ne=H.instanceColor));const de={};de.attribute=ne,ne&&ne.data&&(de.data=ne.data),O[te]=de,K++}c.attributes=O,c.attributesNum=K,c.index=ae}function A(){const H=c.newAttributes;for(let q=0,Z=H.length;q<Z;q++)H[q]=0}function E(H){b(H,0)}function b(H,q){const Z=c.newAttributes,ae=c.enabledAttributes,O=c.attributeDivisors;Z[H]=1,ae[H]===0&&(t.enableVertexAttribArray(H),ae[H]=1),O[H]!==q&&((r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](H,q),O[H]=q)}function C(){const H=c.newAttributes,q=c.enabledAttributes;for(let Z=0,ae=q.length;Z<ae;Z++)q[Z]!==H[Z]&&(t.disableVertexAttribArray(Z),q[Z]=0)}function P(H,q,Z,ae,O,W,K){K===!0?t.vertexAttribIPointer(H,q,Z,O,W):t.vertexAttribPointer(H,q,Z,ae,O,W)}function L(H,q,Z,ae){if(r.isWebGL2===!1&&(H.isInstancedMesh||ae.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;A();const O=ae.attributes,W=Z.getAttributes(),K=q.defaultAttributeValues;for(const Y in W){const te=W[Y];if(te.location>=0){let Te=O[Y];if(Te===void 0&&(Y==="instanceMatrix"&&H.instanceMatrix&&(Te=H.instanceMatrix),Y==="instanceColor"&&H.instanceColor&&(Te=H.instanceColor)),Te!==void 0){const ne=Te.normalized,de=Te.itemSize,Ae=n.get(Te);if(Ae===void 0)continue;const Pe=Ae.buffer,$e=Ae.type,Ue=Ae.bytesPerElement,ce=r.isWebGL2===!0&&($e===t.INT||$e===t.UNSIGNED_INT||Te.gpuType===mR);if(Te.isInterleavedBufferAttribute){const oe=Te.data,V=oe.stride,he=Te.offset;if(oe.isInstancedInterleavedBuffer){for(let ie=0;ie<te.locationSize;ie++)b(te.location+ie,oe.meshPerAttribute);H.isInstancedMesh!==!0&&ae._maxInstanceCount===void 0&&(ae._maxInstanceCount=oe.meshPerAttribute*oe.count)}else for(let ie=0;ie<te.locationSize;ie++)E(te.location+ie);t.bindBuffer(t.ARRAY_BUFFER,Pe);for(let ie=0;ie<te.locationSize;ie++)P(te.location+ie,de/te.locationSize,$e,ne,V*Ue,(he+de/te.locationSize*ie)*Ue,ce)}else{if(Te.isInstancedBufferAttribute){for(let oe=0;oe<te.locationSize;oe++)b(te.location+oe,Te.meshPerAttribute);H.isInstancedMesh!==!0&&ae._maxInstanceCount===void 0&&(ae._maxInstanceCount=Te.meshPerAttribute*Te.count)}else for(let oe=0;oe<te.locationSize;oe++)E(te.location+oe);t.bindBuffer(t.ARRAY_BUFFER,Pe);for(let oe=0;oe<te.locationSize;oe++)P(te.location+oe,de/te.locationSize,$e,ne,de*Ue,de/te.locationSize*oe*Ue,ce)}}else if(K!==void 0){const ne=K[Y];if(ne!==void 0)switch(ne.length){case 2:t.vertexAttrib2fv(te.location,ne);break;case 3:t.vertexAttrib3fv(te.location,ne);break;case 4:t.vertexAttrib4fv(te.location,ne);break;default:t.vertexAttrib1fv(te.location,ne)}}}}C()}function N(){z();for(const H in a){const q=a[H];for(const Z in q){const ae=q[Z];for(const O in ae)y(ae[O].object),delete ae[O];delete q[Z]}delete a[H]}}function T(H){if(a[H.id]===void 0)return;const q=a[H.id];for(const Z in q){const ae=q[Z];for(const O in ae)y(ae[O].object),delete ae[O];delete q[Z]}delete a[H.id]}function D(H){for(const q in a){const Z=a[q];if(Z[H.id]===void 0)continue;const ae=Z[H.id];for(const O in ae)y(ae[O].object),delete ae[O];delete Z[H.id]}}function z(){j(),u=!0,c!==l&&(c=l,m(c.object))}function j(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:f,reset:z,resetDefaultState:j,dispose:N,releaseStatesOfGeometry:T,releaseStatesOfProgram:D,initAttributes:A,enableAttribute:E,disableUnusedAttributes:C}}function cae(t,e,n,r){const i=r.isWebGL2;let s;function o(u){s=u}function a(u,f){t.drawArrays(s,u,f),n.update(f,s,1)}function l(u,f,p){if(p===0)return;let m,y;if(i)m=t,y="drawArraysInstanced";else if(m=e.get("ANGLE_instanced_arrays"),y="drawArraysInstancedANGLE",m===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[y](s,u,f,p),n.update(f,s,p)}function c(u,f,p){if(p===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let y=0;y<p;y++)this.render(u[y],f[y]);else{m.multiDrawArraysWEBGL(s,u,0,f,0,p);let y=0;for(let S=0;S<p;S++)y+=f[S];n.update(y,s,1)}}this.setMode=o,this.render=a,this.renderInstances=l,this.renderMultiDraw=c}function uae(t,e,n){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const P=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(P){if(P==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";P="mediump"}return P==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&t.constructor.name==="WebGL2RenderingContext";let a=n.precision!==void 0?n.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),u=n.logarithmicDepthBuffer===!0,f=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),p=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=t.getParameter(t.MAX_TEXTURE_SIZE),y=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),S=t.getParameter(t.MAX_VERTEX_ATTRIBS),v=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),g=t.getParameter(t.MAX_VARYING_VECTORS),_=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),A=p>0,E=o||e.has("OES_texture_float"),b=A&&E,C=o?t.getParameter(t.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:i,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:f,maxVertexTextures:p,maxTextureSize:m,maxCubemapSize:y,maxAttributes:S,maxVertexUniforms:v,maxVaryings:g,maxFragmentUniforms:_,vertexTextures:A,floatFragmentTextures:E,floatVertexTextures:b,maxSamples:C}}function hae(t){const e=this;let n=null,r=0,i=!1,s=!1;const o=new ua,a=new kt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,p){const m=f.length!==0||p||r!==0||i;return i=p,r=f.length,m},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,p){n=u(f,p,0)},this.setState=function(f,p,m){const y=f.clippingPlanes,S=f.clipIntersection,v=f.clipShadows,g=t.get(f);if(!i||y===null||y.length===0||s&&!v)s?u(null):c();else{const _=s?0:r,A=_*4;let E=g.clippingState||null;l.value=E,E=u(y,p,A,m);for(let b=0;b!==A;++b)E[b]=n[b];g.clippingState=E,this.numIntersection=S?this.numPlanes:0,this.numPlanes+=_}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(f,p,m,y){const S=f!==null?f.length:0;let v=null;if(S!==0){if(v=l.value,y!==!0||v===null){const g=m+S*4,_=p.matrixWorldInverse;a.getNormalMatrix(_),(v===null||v.length<g)&&(v=new Float32Array(g));for(let A=0,E=m;A!==S;++A,E+=4)o.copy(f[A]).applyMatrix4(_,a),o.normal.toArray(v,E),v[E+3]=o.constant}l.value=v,l.needsUpdate=!0}return e.numPlanes=S,e.numIntersection=0,v}}function fae(t){let e=new WeakMap;function n(o,a){return a===Bm?o.mapping=Pa:a===Nm&&(o.mapping=Hl),o}function r(o){if(o&&o.isTexture){const a=o.mapping;if(a===Bm||a===Nm)if(e.has(o)){const l=e.get(o).texture;return n(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new LR(l.height);return c.fromEquirectangularTexture(t,o),e.set(o,c),o.addEventListener("dispose",i),n(c.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}class Ls extends Rg{constructor(e=-1,n=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+n,l=i-n;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const Hh=4,rN=[.125,.215,.35,.446,.526,.582],Oc=20,Jw=new Ls,iN=new ze;let qw=null,Yw=0,Qw=0;const Ic=(1+Math.sqrt(5))/2,ph=1/Ic,sN=[new k(1,1,1),new k(-1,1,1),new k(1,1,-1),new k(-1,1,-1),new k(0,Ic,ph),new k(0,Ic,-ph),new k(ph,0,Ic),new k(-ph,0,Ic),new k(Ic,ph,0),new k(-Ic,ph,0)];class wC{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,i=100){qw=this._renderer.getRenderTarget(),Yw=this._renderer.getActiveCubeFace(),Qw=this._renderer.getActiveMipmapLevel(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),n>0&&this._blur(s,0,0,n),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=lN(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=aN(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(qw,Yw,Qw),e.scissorTest=!1,z0(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===Pa||e.mapping===Hl?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),qw=this._renderer.getRenderTarget(),Yw=this._renderer.getActiveCubeFace(),Qw=this._renderer.getActiveMipmapLevel();const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:Sn,minFilter:Sn,generateMipmaps:!1,type:Nf,format:_i,colorSpace:Go,depthBuffer:!1},i=oN(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=oN(e,n,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=dae(s)),this._blurMaterial=pae(s,e,n)}return i}_compileMaterial(e){const n=new Yn(this._lodPlanes[0],e);this._renderer.compile(n,Jw)}_sceneToCubeUV(e,n,r,i){const a=new wn(90,1,n,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,f=u.autoClear,p=u.toneMapping;u.getClearColor(iN),u.toneMapping=Bo,u.autoClear=!1;const m=new Yi({name:"PMREM.Background",side:wi,depthWrite:!1,depthTest:!1}),y=new Yn(new Ru,m);let S=!1;const v=e.background;v?v.isColor&&(m.color.copy(v),e.background=null,S=!0):(m.color.copy(iN),S=!0);for(let g=0;g<6;g++){const _=g%3;_===0?(a.up.set(0,l[g],0),a.lookAt(c[g],0,0)):_===1?(a.up.set(0,0,l[g]),a.lookAt(0,c[g],0)):(a.up.set(0,l[g],0),a.lookAt(0,0,c[g]));const A=this._cubeSize;z0(i,_*A,g>2?A:0,A,A),u.setRenderTarget(i),S&&u.render(y,a),u.render(e,a)}y.geometry.dispose(),y.material.dispose(),u.toneMapping=p,u.autoClear=f,e.background=v}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===Pa||e.mapping===Hl;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=lN()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=aN());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new Yn(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;z0(n,0,0,3*l,2*l),r.setRenderTarget(n),r.render(o,Jw)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=sN[(i-1)%sN.length];this._blur(e,i-1,i,s,o)}n.autoClear=r}_blur(e,n,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,n,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,n,r,i,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,f=new Yn(this._lodPlanes[i],c),p=c.uniforms,m=this._sizeLods[r]-1,y=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*Oc-1),S=s/y,v=isFinite(s)?1+Math.floor(u*S):Oc;v>Oc&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${Oc}`);const g=[];let _=0;for(let P=0;P<Oc;++P){const L=P/S,N=Math.exp(-L*L/2);g.push(N),P===0?_+=N:P<v&&(_+=2*N)}for(let P=0;P<g.length;P++)g[P]=g[P]/_;p.envMap.value=e.texture,p.samples.value=v,p.weights.value=g,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:A}=this;p.dTheta.value=y,p.mipInt.value=A-r;const E=this._sizeLods[i],b=3*E*(i>A-Hh?i-A+Hh:0),C=4*(this._cubeSize-E);z0(n,b,C,3*E,2*E),l.setRenderTarget(n),l.render(f,Jw)}}function dae(t){const e=[],n=[],r=[];let i=t;const s=t-Hh+1+rN.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);n.push(a);let l=1/a;o>t-Hh?l=rN[o-t+Hh-1]:o===0&&(l=0),r.push(l);const c=1/(a-2),u=-c,f=1+c,p=[u,u,f,u,f,f,u,u,f,f,u,f],m=6,y=6,S=3,v=2,g=1,_=new Float32Array(S*y*m),A=new Float32Array(v*y*m),E=new Float32Array(g*y*m);for(let C=0;C<m;C++){const P=C%3*2/3-1,L=C>2?0:-1,N=[P,L,0,P+2/3,L,0,P+2/3,L+1,0,P,L,0,P+2/3,L+1,0,P,L+1,0];_.set(N,S*y*C),A.set(p,v*y*C);const T=[C,C,C,C,C,C];E.set(T,g*y*C)}const b=new It;b.setAttribute("position",new qt(_,S)),b.setAttribute("uv",new qt(A,v)),b.setAttribute("faceIndex",new qt(E,g)),e.push(b),i>Hh&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function oN(t,e,n){const r=new ro(t,e,n);return r.texture.mapping=id,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function z0(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function pae(t,e,n){const r=new Float32Array(Oc),i=new k(0,1,0);return new io({name:"SphericalGaussianBlur",defines:{n:Oc,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:DR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Sa,depthTest:!1,depthWrite:!1})}function aN(){return new io({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:DR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Sa,depthTest:!1,depthWrite:!1})}function lN(){return new io({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:DR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Sa,depthTest:!1,depthWrite:!1})}function DR(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function mae(t){let e=new WeakMap,n=null;function r(a){if(a&&a.isTexture){const l=a.mapping,c=l===Bm||l===Nm,u=l===Pa||l===Hl;if(c||u)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let f=e.get(a);return n===null&&(n=new wC(t)),f=c?n.fromEquirectangular(a,f):n.fromCubemap(a,f),e.set(a,f),f.texture}else{if(e.has(a))return e.get(a).texture;{const f=a.image;if(c&&f&&f.height>0||u&&f&&i(f)){n===null&&(n=new wC(t));const p=c?n.fromEquirectangular(a):n.fromCubemap(a);return e.set(a,p),a.addEventListener("dispose",s),p.texture}else return null}}}return a}function i(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:o}}function gae(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(r){r.isWebGL2?(n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance")):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(r){const i=n(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function yae(t,e,n,r){const i={},s=new WeakMap;function o(f){const p=f.target;p.index!==null&&e.remove(p.index);for(const y in p.attributes)e.remove(p.attributes[y]);for(const y in p.morphAttributes){const S=p.morphAttributes[y];for(let v=0,g=S.length;v<g;v++)e.remove(S[v])}p.removeEventListener("dispose",o),delete i[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),r.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,n.memory.geometries--}function a(f,p){return i[p.id]===!0||(p.addEventListener("dispose",o),i[p.id]=!0,n.memory.geometries++),p}function l(f){const p=f.attributes;for(const y in p)e.update(p[y],t.ARRAY_BUFFER);const m=f.morphAttributes;for(const y in m){const S=m[y];for(let v=0,g=S.length;v<g;v++)e.update(S[v],t.ARRAY_BUFFER)}}function c(f){const p=[],m=f.index,y=f.attributes.position;let S=0;if(m!==null){const _=m.array;S=m.version;for(let A=0,E=_.length;A<E;A+=3){const b=_[A+0],C=_[A+1],P=_[A+2];p.push(b,C,C,P,P,b)}}else if(y!==void 0){const _=y.array;S=y.version;for(let A=0,E=_.length/3-1;A<E;A+=3){const b=A+0,C=A+1,P=A+2;p.push(b,C,C,P,P,b)}}else return;const v=new(o8(p)?PR:RR)(p,1);v.version=S;const g=s.get(f);g&&e.remove(g),s.set(f,v)}function u(f){const p=s.get(f);if(p){const m=f.index;m!==null&&p.version<m.version&&c(f)}else c(f);return s.get(f)}return{get:a,update:l,getWireframeAttribute:u}}function vae(t,e,n,r){const i=r.isWebGL2;let s;function o(m){s=m}let a,l;function c(m){a=m.type,l=m.bytesPerElement}function u(m,y){t.drawElements(s,y,a,m*l),n.update(y,s,1)}function f(m,y,S){if(S===0)return;let v,g;if(i)v=t,g="drawElementsInstanced";else if(v=e.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",v===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}v[g](s,y,a,m*l,S),n.update(y,s,S)}function p(m,y,S){if(S===0)return;const v=e.get("WEBGL_multi_draw");if(v===null)for(let g=0;g<S;g++)this.render(m[g]/l,y[g]);else{v.multiDrawElementsWEBGL(s,y,0,a,m,0,S);let g=0;for(let _=0;_<S;_++)g+=y[_];n.update(g,s,1)}}this.setMode=o,this.setIndex=c,this.render=u,this.renderInstances=f,this.renderMultiDraw=p}function _ae(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(n.calls++,o){case t.TRIANGLES:n.triangles+=a*(s/3);break;case t.LINES:n.lines+=a*(s/2);break;case t.LINE_STRIP:n.lines+=a*(s-1);break;case t.LINE_LOOP:n.lines+=a*s;break;case t.POINTS:n.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function xae(t,e){return t[0]-e[0]}function Sae(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Aae(t,e,n){const r={},i=new Float32Array(8),s=new WeakMap,o=new cn,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,u,f){const p=c.morphTargetInfluences;if(e.isWebGL2===!0){const y=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,S=y!==void 0?y.length:0;let v=s.get(u);if(v===void 0||v.count!==S){let q=function(){j.dispose(),s.delete(u),u.removeEventListener("dispose",q)};var m=q;v!==void 0&&v.texture.dispose();const A=u.morphAttributes.position!==void 0,E=u.morphAttributes.normal!==void 0,b=u.morphAttributes.color!==void 0,C=u.morphAttributes.position||[],P=u.morphAttributes.normal||[],L=u.morphAttributes.color||[];let N=0;A===!0&&(N=1),E===!0&&(N=2),b===!0&&(N=3);let T=u.attributes.position.count*N,D=1;T>e.maxTextureSize&&(D=Math.ceil(T/e.maxTextureSize),T=e.maxTextureSize);const z=new Float32Array(T*D*4*S),j=new B1(z,T,D,S);j.type=bs,j.needsUpdate=!0;const H=N*4;for(let Z=0;Z<S;Z++){const ae=C[Z],O=P[Z],W=L[Z],K=T*D*4*Z;for(let Y=0;Y<ae.count;Y++){const te=Y*H;A===!0&&(o.fromBufferAttribute(ae,Y),z[K+te+0]=o.x,z[K+te+1]=o.y,z[K+te+2]=o.z,z[K+te+3]=0),E===!0&&(o.fromBufferAttribute(O,Y),z[K+te+4]=o.x,z[K+te+5]=o.y,z[K+te+6]=o.z,z[K+te+7]=0),b===!0&&(o.fromBufferAttribute(W,Y),z[K+te+8]=o.x,z[K+te+9]=o.y,z[K+te+10]=o.z,z[K+te+11]=W.itemSize===4?o.w:1)}}v={count:S,texture:j,size:new _e(T,D)},s.set(u,v),u.addEventListener("dispose",q)}let g=0;for(let A=0;A<p.length;A++)g+=p[A];const _=u.morphTargetsRelative?1:1-g;f.getUniforms().setValue(t,"morphTargetBaseInfluence",_),f.getUniforms().setValue(t,"morphTargetInfluences",p),f.getUniforms().setValue(t,"morphTargetsTexture",v.texture,n),f.getUniforms().setValue(t,"morphTargetsTextureSize",v.size)}else{const y=p===void 0?0:p.length;let S=r[u.id];if(S===void 0||S.length!==y){S=[];for(let E=0;E<y;E++)S[E]=[E,0];r[u.id]=S}for(let E=0;E<y;E++){const b=S[E];b[0]=E,b[1]=p[E]}S.sort(Sae);for(let E=0;E<8;E++)E<y&&S[E][1]?(a[E][0]=S[E][0],a[E][1]=S[E][1]):(a[E][0]=Number.MAX_SAFE_INTEGER,a[E][1]=0);a.sort(xae);const v=u.morphAttributes.position,g=u.morphAttributes.normal;let _=0;for(let E=0;E<8;E++){const b=a[E],C=b[0],P=b[1];C!==Number.MAX_SAFE_INTEGER&&P?(v&&u.getAttribute("morphTarget"+E)!==v[C]&&u.setAttribute("morphTarget"+E,v[C]),g&&u.getAttribute("morphNormal"+E)!==g[C]&&u.setAttribute("morphNormal"+E,g[C]),i[E]=P,_+=P):(v&&u.hasAttribute("morphTarget"+E)===!0&&u.deleteAttribute("morphTarget"+E),g&&u.hasAttribute("morphNormal"+E)===!0&&u.deleteAttribute("morphNormal"+E),i[E]=0)}const A=u.morphTargetsRelative?1:1-_;f.getUniforms().setValue(t,"morphTargetBaseInfluence",A),f.getUniforms().setValue(t,"morphTargetInfluences",i)}}return{update:l}}function wae(t,e,n,r){let i=new WeakMap;function s(l){const c=r.render.frame,u=l.geometry,f=e.get(l,u);if(i.get(f)!==c&&(e.update(f),i.set(f,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.get(l)!==c&&(n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER),i.set(l,c))),l.isSkinnedMesh){const p=l.skeleton;i.get(p)!==c&&(p.update(),i.set(p,c))}return f}function o(){i=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),n.remove(c.instanceMatrix),c.instanceColor!==null&&n.remove(c.instanceColor)}return{update:s,dispose:o}}class BR extends Mn{constructor(e,n,r,i,s,o,a,l,c,u){if(u=u!==void 0?u:Il,u!==Il&&u!==_u)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&u===Il&&(r=ma),r===void 0&&u===_u&&(r=Pl),super(null,i,s,o,a,l,u,r,c),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=a!==void 0?a:zn,this.minFilter=l!==void 0?l:zn,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}const d8=new Mn,p8=new BR(1,1);p8.compareFunction=MR;const m8=new B1,g8=new bR,y8=new Pg,cN=[],uN=[],hN=new Float32Array(16),fN=new Float32Array(9),dN=new Float32Array(4);function od(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let s=cN[i];if(s===void 0&&(s=new Float32Array(i),cN[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=n,t[o].toArray(s,a)}return s}function mr(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function gr(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function N1(t,e){let n=uN[e];n===void 0&&(n=new Int32Array(e),uN[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function Eae(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Mae(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(mr(n,e))return;t.uniform2fv(this.addr,e),gr(n,e)}}function Tae(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(mr(n,e))return;t.uniform3fv(this.addr,e),gr(n,e)}}function Cae(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(mr(n,e))return;t.uniform4fv(this.addr,e),gr(n,e)}}function bae(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(mr(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),gr(n,e)}else{if(mr(n,r))return;dN.set(r),t.uniformMatrix2fv(this.addr,!1,dN),gr(n,r)}}function Rae(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(mr(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),gr(n,e)}else{if(mr(n,r))return;fN.set(r),t.uniformMatrix3fv(this.addr,!1,fN),gr(n,r)}}function Pae(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(mr(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),gr(n,e)}else{if(mr(n,r))return;hN.set(r),t.uniformMatrix4fv(this.addr,!1,hN),gr(n,r)}}function Iae(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Lae(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(mr(n,e))return;t.uniform2iv(this.addr,e),gr(n,e)}}function Dae(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(mr(n,e))return;t.uniform3iv(this.addr,e),gr(n,e)}}function Bae(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(mr(n,e))return;t.uniform4iv(this.addr,e),gr(n,e)}}function Nae(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Oae(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(mr(n,e))return;t.uniform2uiv(this.addr,e),gr(n,e)}}function Fae(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(mr(n,e))return;t.uniform3uiv(this.addr,e),gr(n,e)}}function kae(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(mr(n,e))return;t.uniform4uiv(this.addr,e),gr(n,e)}}function Uae(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i);const s=this.type===t.SAMPLER_2D_SHADOW?p8:d8;n.setTexture2D(e||s,i)}function Vae(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||g8,i)}function zae(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||y8,i)}function Hae(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||m8,i)}function Gae(t){switch(t){case 5126:return Eae;case 35664:return Mae;case 35665:return Tae;case 35666:return Cae;case 35674:return bae;case 35675:return Rae;case 35676:return Pae;case 5124:case 35670:return Iae;case 35667:case 35671:return Lae;case 35668:case 35672:return Dae;case 35669:case 35673:return Bae;case 5125:return Nae;case 36294:return Oae;case 36295:return Fae;case 36296:return kae;case 35678:case 36198:case 36298:case 36306:case 35682:return Uae;case 35679:case 36299:case 36307:return Vae;case 35680:case 36300:case 36308:case 36293:return zae;case 36289:case 36303:case 36311:case 36292:return Hae}}function jae(t,e){t.uniform1fv(this.addr,e)}function Wae(t,e){const n=od(e,this.size,2);t.uniform2fv(this.addr,n)}function Xae(t,e){const n=od(e,this.size,3);t.uniform3fv(this.addr,n)}function Kae(t,e){const n=od(e,this.size,4);t.uniform4fv(this.addr,n)}function $ae(t,e){const n=od(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function Jae(t,e){const n=od(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function qae(t,e){const n=od(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function Yae(t,e){t.uniform1iv(this.addr,e)}function Qae(t,e){t.uniform2iv(this.addr,e)}function Zae(t,e){t.uniform3iv(this.addr,e)}function ele(t,e){t.uniform4iv(this.addr,e)}function tle(t,e){t.uniform1uiv(this.addr,e)}function nle(t,e){t.uniform2uiv(this.addr,e)}function rle(t,e){t.uniform3uiv(this.addr,e)}function ile(t,e){t.uniform4uiv(this.addr,e)}function sle(t,e,n){const r=this.cache,i=e.length,s=N1(n,i);mr(r,s)||(t.uniform1iv(this.addr,s),gr(r,s));for(let o=0;o!==i;++o)n.setTexture2D(e[o]||d8,s[o])}function ole(t,e,n){const r=this.cache,i=e.length,s=N1(n,i);mr(r,s)||(t.uniform1iv(this.addr,s),gr(r,s));for(let o=0;o!==i;++o)n.setTexture3D(e[o]||g8,s[o])}function ale(t,e,n){const r=this.cache,i=e.length,s=N1(n,i);mr(r,s)||(t.uniform1iv(this.addr,s),gr(r,s));for(let o=0;o!==i;++o)n.setTextureCube(e[o]||y8,s[o])}function lle(t,e,n){const r=this.cache,i=e.length,s=N1(n,i);mr(r,s)||(t.uniform1iv(this.addr,s),gr(r,s));for(let o=0;o!==i;++o)n.setTexture2DArray(e[o]||m8,s[o])}function cle(t){switch(t){case 5126:return jae;case 35664:return Wae;case 35665:return Xae;case 35666:return Kae;case 35674:return $ae;case 35675:return Jae;case 35676:return qae;case 5124:case 35670:return Yae;case 35667:case 35671:return Qae;case 35668:case 35672:return Zae;case 35669:case 35673:return ele;case 5125:return tle;case 36294:return nle;case 36295:return rle;case 36296:return ile;case 35678:case 36198:case 36298:case 36306:case 35682:return sle;case 35679:case 36299:case 36307:return ole;case 35680:case 36300:case 36308:case 36293:return ale;case 36289:case 36303:case 36311:case 36292:return lle}}class ule{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.setValue=Gae(n.type)}}class hle{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=cle(n.type)}}class fle{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,n[a.id],r)}}}const Zw=/(\w+)(\])?(\[|\.)?/g;function pN(t,e){t.seq.push(e),t.map[e.id]=e}function dle(t,e,n){const r=t.name,i=r.length;for(Zw.lastIndex=0;;){const s=Zw.exec(r),o=Zw.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===i){pN(n,c===void 0?new ule(a,t,e):new hle(a,t,e));break}else{let f=n.map[a];f===void 0&&(f=new fle(a),pN(n,f)),n=f}}}class Kv{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(n,i),o=e.getUniformLocation(n,s.name);dle(s,o,this)}}setValue(e,n,r,i){const s=this.map[n];s!==void 0&&s.setValue(e,r,i)}setOptional(e,n,r){const i=n[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,n,r,i){for(let s=0,o=n.length;s!==o;++s){const a=n[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,n){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in n&&r.push(o)}return r}}function mN(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}const ple=37297;let mle=0;function gle(t,e){const n=t.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${n[o]}`)}return r.join(`
`)}function yle(t){const e=ln.getPrimaries(ln.workingColorSpace),n=ln.getPrimaries(t);let r;switch(e===n?r="":e===Vm&&n===Um?r="LinearDisplayP3ToLinearSRGB":e===Um&&n===Vm&&(r="LinearSRGBToLinearDisplayP3"),t){case Go:case Cg:return[r,"LinearTransferOETF"];case fr:case D1:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),[r,"LinearTransferOETF"]}}function gN(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return n.toUpperCase()+`

`+i+`

`+gle(t.getShaderSource(e),o)}else return i}function vle(t,e){const n=yle(e);return`vec4 ${t}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function _le(t,e){let n;switch(e){case IV:n="Linear";break;case LV:n="Reinhard";break;case DV:n="OptimizedCineon";break;case pR:n="ACESFilmic";break;case NV:n="AgX";break;case BV:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function xle(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||t.alphaToCoverage||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Gh).join(`
`)}function Sle(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Gh).join(`
`)}function Ale(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function wle(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=t.getActiveAttrib(e,i),o=s.name;let a=1;s.type===t.FLOAT_MAT2&&(a=2),s.type===t.FLOAT_MAT3&&(a=3),s.type===t.FLOAT_MAT4&&(a=4),n[o]={type:s.type,location:t.getAttribLocation(e,o),locationSize:a}}return n}function Gh(t){return t!==""}function yN(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function vN(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Ele=/^[ \t]*#include +<([\w\d./]+)>/gm;function EC(t){return t.replace(Ele,Tle)}const Mle=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function Tle(t,e){let n=Nt[e];if(n===void 0){const r=Mle.get(e);if(r!==void 0)n=Nt[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return EC(n)}const Cle=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function _N(t){return t.replace(Cle,ble)}function ble(t,e,n,r){let i="";for(let s=parseInt(e);s<parseInt(n);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function xN(t){let e=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	`;return t.isWebGL2&&(e+=`precision ${t.precision} sampler3D;
		precision ${t.precision} sampler2DArray;
		precision ${t.precision} sampler2DShadow;
		precision ${t.precision} samplerCubeShadow;
		precision ${t.precision} sampler2DArrayShadow;
		precision ${t.precision} isampler2D;
		precision ${t.precision} isampler3D;
		precision ${t.precision} isamplerCube;
		precision ${t.precision} isampler2DArray;
		precision ${t.precision} usampler2D;
		precision ${t.precision} usampler3D;
		precision ${t.precision} usamplerCube;
		precision ${t.precision} usampler2DArray;
		`),t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Rle(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===R1?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===Fp?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===js&&(e="SHADOWMAP_TYPE_VSM"),e}function Ple(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Pa:case Hl:e="ENVMAP_TYPE_CUBE";break;case id:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Ile(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case Hl:e="ENVMAP_MODE_REFRACTION";break}return e}function Lle(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case Tg:e="ENVMAP_BLENDING_MULTIPLY";break;case RV:e="ENVMAP_BLENDING_MIX";break;case PV:e="ENVMAP_BLENDING_ADD";break}return e}function Dle(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function Ble(t,e,n,r){const i=t.getContext(),s=n.defines;let o=n.vertexShader,a=n.fragmentShader;const l=Rle(n),c=Ple(n),u=Ile(n),f=Lle(n),p=Dle(n),m=n.isWebGL2?"":xle(n),y=Sle(n),S=Ale(s),v=i.createProgram();let g,_,A=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(g=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,S].filter(Gh).join(`
`),g.length>0&&(g+=`
`),_=[m,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,S].filter(Gh).join(`
`),_.length>0&&(_+=`
`)):(g=[xN(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,S,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Gh).join(`
`),_=[m,xN(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,S,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+f:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Bo?"#define TONE_MAPPING":"",n.toneMapping!==Bo?Nt.tonemapping_pars_fragment:"",n.toneMapping!==Bo?_le("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Nt.colorspace_pars_fragment,vle("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(Gh).join(`
`)),o=EC(o),o=yN(o,n),o=vN(o,n),a=EC(a),a=yN(a,n),a=vN(a,n),o=_N(o),a=_N(a),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(A=`#version 300 es
`,g=[y,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,_=["precision mediump sampler2DArray;","#define varying in",n.glslVersion===SC?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===SC?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+_);const E=A+g+o,b=A+_+a,C=mN(i,i.VERTEX_SHADER,E),P=mN(i,i.FRAGMENT_SHADER,b);i.attachShader(v,C),i.attachShader(v,P),n.index0AttributeName!==void 0?i.bindAttribLocation(v,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(v,0,"position"),i.linkProgram(v);function L(z){if(t.debug.checkShaderErrors){const j=i.getProgramInfoLog(v).trim(),H=i.getShaderInfoLog(C).trim(),q=i.getShaderInfoLog(P).trim();let Z=!0,ae=!0;if(i.getProgramParameter(v,i.LINK_STATUS)===!1)if(Z=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,v,C,P);else{const O=gN(i,C,"vertex"),W=gN(i,P,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(v,i.VALIDATE_STATUS)+`

Material Name: `+z.name+`
Material Type: `+z.type+`

Program Info Log: `+j+`
`+O+`
`+W)}else j!==""?console.warn("THREE.WebGLProgram: Program Info Log:",j):(H===""||q==="")&&(ae=!1);ae&&(z.diagnostics={runnable:Z,programLog:j,vertexShader:{log:H,prefix:g},fragmentShader:{log:q,prefix:_}})}i.deleteShader(C),i.deleteShader(P),N=new Kv(i,v),T=wle(i,v)}let N;this.getUniforms=function(){return N===void 0&&L(this),N};let T;this.getAttributes=function(){return T===void 0&&L(this),T};let D=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return D===!1&&(D=i.getProgramParameter(v,ple)),D},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(v),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=mle++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=C,this.fragmentShader=P,this}let Nle=0;class Ole{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new Fle(e),n.set(e,r)),r}}class Fle{constructor(e){this.id=Nle++,this.code=e,this.usedTimes=0}}function kle(t,e,n,r,i,s,o){const a=new su,l=new Ole,c=new Set,u=[],f=i.isWebGL2,p=i.logarithmicDepthBuffer,m=i.vertexTextures;let y=i.precision;const S={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(T){return c.add(T),T===0?"uv":`uv${T}`}function g(T,D,z,j,H){const q=j.fog,Z=H.geometry,ae=T.isMeshStandardMaterial?j.environment:null,O=(T.isMeshStandardMaterial?n:e).get(T.envMap||ae),W=O&&O.mapping===id?O.image.height:null,K=S[T.type];T.precision!==null&&(y=i.getMaxPrecision(T.precision),y!==T.precision&&console.warn("THREE.WebGLProgram.getParameters:",T.precision,"not supported, using",y,"instead."));const Y=Z.morphAttributes.position||Z.morphAttributes.normal||Z.morphAttributes.color,te=Y!==void 0?Y.length:0;let Te=0;Z.morphAttributes.position!==void 0&&(Te=1),Z.morphAttributes.normal!==void 0&&(Te=2),Z.morphAttributes.color!==void 0&&(Te=3);let ne,de,Ae,Pe;if(K){const Wt=Ks[K];ne=Wt.vertexShader,de=Wt.fragmentShader}else ne=T.vertexShader,de=T.fragmentShader,l.update(T),Ae=l.getVertexShaderID(T),Pe=l.getFragmentShaderID(T);const $e=t.getRenderTarget(),Ue=H.isInstancedMesh===!0,ce=H.isBatchedMesh===!0,oe=!!T.map,V=!!T.matcap,he=!!O,ie=!!T.aoMap,ye=!!T.lightMap,le=!!T.bumpMap,be=!!T.normalMap,Ee=!!T.displacementMap,F=!!T.emissiveMap,B=!!T.metalnessMap,J=!!T.roughnessMap,xe=T.anisotropy>0,Se=T.clearcoat>0,we=T.iridescence>0,Qe=T.sheen>0,Ne=T.transmission>0,Ve=xe&&!!T.anisotropyMap,ct=Se&&!!T.clearcoatMap,wt=Se&&!!T.clearcoatNormalMap,Re=Se&&!!T.clearcoatRoughnessMap,Gt=we&&!!T.iridescenceMap,Dt=we&&!!T.iridescenceThicknessMap,vt=Qe&&!!T.sheenColorMap,lt=Qe&&!!T.sheenRoughnessMap,Ye=!!T.specularMap,Q=!!T.specularColorMap,Me=!!T.specularIntensityMap,Ge=Ne&&!!T.transmissionMap,Je=Ne&&!!T.thicknessMap,_t=!!T.gradientMap,X=!!T.alphaMap,Ie=T.alphaTest>0,Be=!!T.alphaHash,nt=!!T.extensions;let rt=Bo;T.toneMapped&&($e===null||$e.isXRRenderTarget===!0)&&(rt=t.toneMapping);const Bt={isWebGL2:f,shaderID:K,shaderType:T.type,shaderName:T.name,vertexShader:ne,fragmentShader:de,defines:T.defines,customVertexShaderID:Ae,customFragmentShaderID:Pe,isRawShaderMaterial:T.isRawShaderMaterial===!0,glslVersion:T.glslVersion,precision:y,batching:ce,instancing:Ue,instancingColor:Ue&&H.instanceColor!==null,supportsVertexTextures:m,outputColorSpace:$e===null?t.outputColorSpace:$e.isXRRenderTarget===!0?$e.texture.colorSpace:Go,alphaToCoverage:!!T.alphaToCoverage,map:oe,matcap:V,envMap:he,envMapMode:he&&O.mapping,envMapCubeUVHeight:W,aoMap:ie,lightMap:ye,bumpMap:le,normalMap:be,displacementMap:m&&Ee,emissiveMap:F,normalMapObjectSpace:be&&T.normalMapType===YV,normalMapTangentSpace:be&&T.normalMapType===Zl,metalnessMap:B,roughnessMap:J,anisotropy:xe,anisotropyMap:Ve,clearcoat:Se,clearcoatMap:ct,clearcoatNormalMap:wt,clearcoatRoughnessMap:Re,iridescence:we,iridescenceMap:Gt,iridescenceThicknessMap:Dt,sheen:Qe,sheenColorMap:vt,sheenRoughnessMap:lt,specularMap:Ye,specularColorMap:Q,specularIntensityMap:Me,transmission:Ne,transmissionMap:Ge,thicknessMap:Je,gradientMap:_t,opaque:T.transparent===!1&&T.blending===nu&&T.alphaToCoverage===!1,alphaMap:X,alphaTest:Ie,alphaHash:Be,combine:T.combine,mapUv:oe&&v(T.map.channel),aoMapUv:ie&&v(T.aoMap.channel),lightMapUv:ye&&v(T.lightMap.channel),bumpMapUv:le&&v(T.bumpMap.channel),normalMapUv:be&&v(T.normalMap.channel),displacementMapUv:Ee&&v(T.displacementMap.channel),emissiveMapUv:F&&v(T.emissiveMap.channel),metalnessMapUv:B&&v(T.metalnessMap.channel),roughnessMapUv:J&&v(T.roughnessMap.channel),anisotropyMapUv:Ve&&v(T.anisotropyMap.channel),clearcoatMapUv:ct&&v(T.clearcoatMap.channel),clearcoatNormalMapUv:wt&&v(T.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Re&&v(T.clearcoatRoughnessMap.channel),iridescenceMapUv:Gt&&v(T.iridescenceMap.channel),iridescenceThicknessMapUv:Dt&&v(T.iridescenceThicknessMap.channel),sheenColorMapUv:vt&&v(T.sheenColorMap.channel),sheenRoughnessMapUv:lt&&v(T.sheenRoughnessMap.channel),specularMapUv:Ye&&v(T.specularMap.channel),specularColorMapUv:Q&&v(T.specularColorMap.channel),specularIntensityMapUv:Me&&v(T.specularIntensityMap.channel),transmissionMapUv:Ge&&v(T.transmissionMap.channel),thicknessMapUv:Je&&v(T.thicknessMap.channel),alphaMapUv:X&&v(T.alphaMap.channel),vertexTangents:!!Z.attributes.tangent&&(be||xe),vertexColors:T.vertexColors,vertexAlphas:T.vertexColors===!0&&!!Z.attributes.color&&Z.attributes.color.itemSize===4,pointsUvs:H.isPoints===!0&&!!Z.attributes.uv&&(oe||X),fog:!!q,useFog:T.fog===!0,fogExp2:!!q&&q.isFogExp2,flatShading:T.flatShading===!0,sizeAttenuation:T.sizeAttenuation===!0,logarithmicDepthBuffer:p,skinning:H.isSkinnedMesh===!0,morphTargets:Z.morphAttributes.position!==void 0,morphNormals:Z.morphAttributes.normal!==void 0,morphColors:Z.morphAttributes.color!==void 0,morphTargetsCount:te,morphTextureStride:Te,numDirLights:D.directional.length,numPointLights:D.point.length,numSpotLights:D.spot.length,numSpotLightMaps:D.spotLightMap.length,numRectAreaLights:D.rectArea.length,numHemiLights:D.hemi.length,numDirLightShadows:D.directionalShadowMap.length,numPointLightShadows:D.pointShadowMap.length,numSpotLightShadows:D.spotShadowMap.length,numSpotLightShadowsWithMaps:D.numSpotLightShadowsWithMaps,numLightProbes:D.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:T.dithering,shadowMapEnabled:t.shadowMap.enabled&&z.length>0,shadowMapType:t.shadowMap.type,toneMapping:rt,useLegacyLights:t._useLegacyLights,decodeVideoTexture:oe&&T.map.isVideoTexture===!0&&ln.getTransfer(T.map.colorSpace)===gn,premultipliedAlpha:T.premultipliedAlpha,doubleSided:T.side===Cs,flipSided:T.side===wi,useDepthPacking:T.depthPacking>=0,depthPacking:T.depthPacking||0,index0AttributeName:T.index0AttributeName,extensionDerivatives:nt&&T.extensions.derivatives===!0,extensionFragDepth:nt&&T.extensions.fragDepth===!0,extensionDrawBuffers:nt&&T.extensions.drawBuffers===!0,extensionShaderTextureLOD:nt&&T.extensions.shaderTextureLOD===!0,extensionClipCullDistance:nt&&T.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:nt&&T.extensions.multiDraw===!0&&r.has("WEBGL_multi_draw"),rendererExtensionFragDepth:f||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:f||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:f||r.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:T.customProgramCacheKey()};return Bt.vertexUv1s=c.has(1),Bt.vertexUv2s=c.has(2),Bt.vertexUv3s=c.has(3),c.clear(),Bt}function _(T){const D=[];if(T.shaderID?D.push(T.shaderID):(D.push(T.customVertexShaderID),D.push(T.customFragmentShaderID)),T.defines!==void 0)for(const z in T.defines)D.push(z),D.push(T.defines[z]);return T.isRawShaderMaterial===!1&&(A(D,T),E(D,T),D.push(t.outputColorSpace)),D.push(T.customProgramCacheKey),D.join()}function A(T,D){T.push(D.precision),T.push(D.outputColorSpace),T.push(D.envMapMode),T.push(D.envMapCubeUVHeight),T.push(D.mapUv),T.push(D.alphaMapUv),T.push(D.lightMapUv),T.push(D.aoMapUv),T.push(D.bumpMapUv),T.push(D.normalMapUv),T.push(D.displacementMapUv),T.push(D.emissiveMapUv),T.push(D.metalnessMapUv),T.push(D.roughnessMapUv),T.push(D.anisotropyMapUv),T.push(D.clearcoatMapUv),T.push(D.clearcoatNormalMapUv),T.push(D.clearcoatRoughnessMapUv),T.push(D.iridescenceMapUv),T.push(D.iridescenceThicknessMapUv),T.push(D.sheenColorMapUv),T.push(D.sheenRoughnessMapUv),T.push(D.specularMapUv),T.push(D.specularColorMapUv),T.push(D.specularIntensityMapUv),T.push(D.transmissionMapUv),T.push(D.thicknessMapUv),T.push(D.combine),T.push(D.fogExp2),T.push(D.sizeAttenuation),T.push(D.morphTargetsCount),T.push(D.morphAttributeCount),T.push(D.numDirLights),T.push(D.numPointLights),T.push(D.numSpotLights),T.push(D.numSpotLightMaps),T.push(D.numHemiLights),T.push(D.numRectAreaLights),T.push(D.numDirLightShadows),T.push(D.numPointLightShadows),T.push(D.numSpotLightShadows),T.push(D.numSpotLightShadowsWithMaps),T.push(D.numLightProbes),T.push(D.shadowMapType),T.push(D.toneMapping),T.push(D.numClippingPlanes),T.push(D.numClipIntersection),T.push(D.depthPacking)}function E(T,D){a.disableAll(),D.isWebGL2&&a.enable(0),D.supportsVertexTextures&&a.enable(1),D.instancing&&a.enable(2),D.instancingColor&&a.enable(3),D.matcap&&a.enable(4),D.envMap&&a.enable(5),D.normalMapObjectSpace&&a.enable(6),D.normalMapTangentSpace&&a.enable(7),D.clearcoat&&a.enable(8),D.iridescence&&a.enable(9),D.alphaTest&&a.enable(10),D.vertexColors&&a.enable(11),D.vertexAlphas&&a.enable(12),D.vertexUv1s&&a.enable(13),D.vertexUv2s&&a.enable(14),D.vertexUv3s&&a.enable(15),D.vertexTangents&&a.enable(16),D.anisotropy&&a.enable(17),D.alphaHash&&a.enable(18),D.batching&&a.enable(19),T.push(a.mask),a.disableAll(),D.fog&&a.enable(0),D.useFog&&a.enable(1),D.flatShading&&a.enable(2),D.logarithmicDepthBuffer&&a.enable(3),D.skinning&&a.enable(4),D.morphTargets&&a.enable(5),D.morphNormals&&a.enable(6),D.morphColors&&a.enable(7),D.premultipliedAlpha&&a.enable(8),D.shadowMapEnabled&&a.enable(9),D.useLegacyLights&&a.enable(10),D.doubleSided&&a.enable(11),D.flipSided&&a.enable(12),D.useDepthPacking&&a.enable(13),D.dithering&&a.enable(14),D.transmission&&a.enable(15),D.sheen&&a.enable(16),D.opaque&&a.enable(17),D.pointsUvs&&a.enable(18),D.decodeVideoTexture&&a.enable(19),D.alphaToCoverage&&a.enable(20),T.push(a.mask)}function b(T){const D=S[T.type];let z;if(D){const j=Ks[D];z=h8.clone(j.uniforms)}else z=T.uniforms;return z}function C(T,D){let z;for(let j=0,H=u.length;j<H;j++){const q=u[j];if(q.cacheKey===D){z=q,++z.usedTimes;break}}return z===void 0&&(z=new Ble(t,D,T,s),u.push(z)),z}function P(T){if(--T.usedTimes===0){const D=u.indexOf(T);u[D]=u[u.length-1],u.pop(),T.destroy()}}function L(T){l.remove(T)}function N(){l.dispose()}return{getParameters:g,getProgramCacheKey:_,getUniforms:b,acquireProgram:C,releaseProgram:P,releaseShaderCache:L,programs:u,dispose:N}}function Ule(){let t=new WeakMap;function e(s){let o=t.get(s);return o===void 0&&(o={},t.set(s,o)),o}function n(s){t.delete(s)}function r(s,o,a){t.get(s)[o]=a}function i(){t=new WeakMap}return{get:e,remove:n,update:r,dispose:i}}function Vle(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function SN(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function AN(){const t=[];let e=0;const n=[],r=[],i=[];function s(){e=0,n.length=0,r.length=0,i.length=0}function o(f,p,m,y,S,v){let g=t[e];return g===void 0?(g={id:f.id,object:f,geometry:p,material:m,groupOrder:y,renderOrder:f.renderOrder,z:S,group:v},t[e]=g):(g.id=f.id,g.object=f,g.geometry=p,g.material=m,g.groupOrder=y,g.renderOrder=f.renderOrder,g.z=S,g.group=v),e++,g}function a(f,p,m,y,S,v){const g=o(f,p,m,y,S,v);m.transmission>0?r.push(g):m.transparent===!0?i.push(g):n.push(g)}function l(f,p,m,y,S,v){const g=o(f,p,m,y,S,v);m.transmission>0?r.unshift(g):m.transparent===!0?i.unshift(g):n.unshift(g)}function c(f,p){n.length>1&&n.sort(f||Vle),r.length>1&&r.sort(p||SN),i.length>1&&i.sort(p||SN)}function u(){for(let f=e,p=t.length;f<p;f++){const m=t[f];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:n,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:u,sort:c}}function zle(){let t=new WeakMap;function e(r,i){const s=t.get(r);let o;return s===void 0?(o=new AN,t.set(r,[o])):i>=s.length?(o=new AN,s.push(o)):o=s[i],o}function n(){t=new WeakMap}return{get:e,dispose:n}}function Hle(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new k,color:new ze};break;case"SpotLight":n={position:new k,direction:new k,color:new ze,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new k,color:new ze,distance:0,decay:0};break;case"HemisphereLight":n={direction:new k,skyColor:new ze,groundColor:new ze};break;case"RectAreaLight":n={color:new ze,position:new k,halfWidth:new k,halfHeight:new k};break}return t[e.id]=n,n}}}function Gle(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new _e};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new _e};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new _e,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let jle=0;function Wle(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function Xle(t,e){const n=new Hle,r=Gle(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)i.probe.push(new k);const s=new k,o=new ft,a=new ft;function l(u,f){let p=0,m=0,y=0;for(let z=0;z<9;z++)i.probe[z].set(0,0,0);let S=0,v=0,g=0,_=0,A=0,E=0,b=0,C=0,P=0,L=0,N=0;u.sort(Wle);const T=f===!0?Math.PI:1;for(let z=0,j=u.length;z<j;z++){const H=u[z],q=H.color,Z=H.intensity,ae=H.distance,O=H.shadow&&H.shadow.map?H.shadow.map.texture:null;if(H.isAmbientLight)p+=q.r*Z*T,m+=q.g*Z*T,y+=q.b*Z*T;else if(H.isLightProbe){for(let W=0;W<9;W++)i.probe[W].addScaledVector(H.sh.coefficients[W],Z);N++}else if(H.isDirectionalLight){const W=n.get(H);if(W.color.copy(H.color).multiplyScalar(H.intensity*T),H.castShadow){const K=H.shadow,Y=r.get(H);Y.shadowBias=K.bias,Y.shadowNormalBias=K.normalBias,Y.shadowRadius=K.radius,Y.shadowMapSize=K.mapSize,i.directionalShadow[S]=Y,i.directionalShadowMap[S]=O,i.directionalShadowMatrix[S]=H.shadow.matrix,E++}i.directional[S]=W,S++}else if(H.isSpotLight){const W=n.get(H);W.position.setFromMatrixPosition(H.matrixWorld),W.color.copy(q).multiplyScalar(Z*T),W.distance=ae,W.coneCos=Math.cos(H.angle),W.penumbraCos=Math.cos(H.angle*(1-H.penumbra)),W.decay=H.decay,i.spot[g]=W;const K=H.shadow;if(H.map&&(i.spotLightMap[P]=H.map,P++,K.updateMatrices(H),H.castShadow&&L++),i.spotLightMatrix[g]=K.matrix,H.castShadow){const Y=r.get(H);Y.shadowBias=K.bias,Y.shadowNormalBias=K.normalBias,Y.shadowRadius=K.radius,Y.shadowMapSize=K.mapSize,i.spotShadow[g]=Y,i.spotShadowMap[g]=O,C++}g++}else if(H.isRectAreaLight){const W=n.get(H);W.color.copy(q).multiplyScalar(Z),W.halfWidth.set(H.width*.5,0,0),W.halfHeight.set(0,H.height*.5,0),i.rectArea[_]=W,_++}else if(H.isPointLight){const W=n.get(H);if(W.color.copy(H.color).multiplyScalar(H.intensity*T),W.distance=H.distance,W.decay=H.decay,H.castShadow){const K=H.shadow,Y=r.get(H);Y.shadowBias=K.bias,Y.shadowNormalBias=K.normalBias,Y.shadowRadius=K.radius,Y.shadowMapSize=K.mapSize,Y.shadowCameraNear=K.camera.near,Y.shadowCameraFar=K.camera.far,i.pointShadow[v]=Y,i.pointShadowMap[v]=O,i.pointShadowMatrix[v]=H.shadow.matrix,b++}i.point[v]=W,v++}else if(H.isHemisphereLight){const W=n.get(H);W.skyColor.copy(H.color).multiplyScalar(Z*T),W.groundColor.copy(H.groundColor).multiplyScalar(Z*T),i.hemi[A]=W,A++}}_>0&&(e.isWebGL2?t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Fe.LTC_FLOAT_1,i.rectAreaLTC2=Fe.LTC_FLOAT_2):(i.rectAreaLTC1=Fe.LTC_HALF_1,i.rectAreaLTC2=Fe.LTC_HALF_2):t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Fe.LTC_FLOAT_1,i.rectAreaLTC2=Fe.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=Fe.LTC_HALF_1,i.rectAreaLTC2=Fe.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=p,i.ambient[1]=m,i.ambient[2]=y;const D=i.hash;(D.directionalLength!==S||D.pointLength!==v||D.spotLength!==g||D.rectAreaLength!==_||D.hemiLength!==A||D.numDirectionalShadows!==E||D.numPointShadows!==b||D.numSpotShadows!==C||D.numSpotMaps!==P||D.numLightProbes!==N)&&(i.directional.length=S,i.spot.length=g,i.rectArea.length=_,i.point.length=v,i.hemi.length=A,i.directionalShadow.length=E,i.directionalShadowMap.length=E,i.pointShadow.length=b,i.pointShadowMap.length=b,i.spotShadow.length=C,i.spotShadowMap.length=C,i.directionalShadowMatrix.length=E,i.pointShadowMatrix.length=b,i.spotLightMatrix.length=C+P-L,i.spotLightMap.length=P,i.numSpotLightShadowsWithMaps=L,i.numLightProbes=N,D.directionalLength=S,D.pointLength=v,D.spotLength=g,D.rectAreaLength=_,D.hemiLength=A,D.numDirectionalShadows=E,D.numPointShadows=b,D.numSpotShadows=C,D.numSpotMaps=P,D.numLightProbes=N,i.version=jle++)}function c(u,f){let p=0,m=0,y=0,S=0,v=0;const g=f.matrixWorldInverse;for(let _=0,A=u.length;_<A;_++){const E=u[_];if(E.isDirectionalLight){const b=i.directional[p];b.direction.setFromMatrixPosition(E.matrixWorld),s.setFromMatrixPosition(E.target.matrixWorld),b.direction.sub(s),b.direction.transformDirection(g),p++}else if(E.isSpotLight){const b=i.spot[y];b.position.setFromMatrixPosition(E.matrixWorld),b.position.applyMatrix4(g),b.direction.setFromMatrixPosition(E.matrixWorld),s.setFromMatrixPosition(E.target.matrixWorld),b.direction.sub(s),b.direction.transformDirection(g),y++}else if(E.isRectAreaLight){const b=i.rectArea[S];b.position.setFromMatrixPosition(E.matrixWorld),b.position.applyMatrix4(g),a.identity(),o.copy(E.matrixWorld),o.premultiply(g),a.extractRotation(o),b.halfWidth.set(E.width*.5,0,0),b.halfHeight.set(0,E.height*.5,0),b.halfWidth.applyMatrix4(a),b.halfHeight.applyMatrix4(a),S++}else if(E.isPointLight){const b=i.point[m];b.position.setFromMatrixPosition(E.matrixWorld),b.position.applyMatrix4(g),m++}else if(E.isHemisphereLight){const b=i.hemi[v];b.direction.setFromMatrixPosition(E.matrixWorld),b.direction.transformDirection(g),v++}}}return{setup:l,setupView:c,state:i}}function wN(t,e){const n=new Xle(t,e),r=[],i=[];function s(){r.length=0,i.length=0}function o(f){r.push(f)}function a(f){i.push(f)}function l(f){n.setup(r,f)}function c(f){n.setupView(r,f)}return{init:s,state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function Kle(t,e){let n=new WeakMap;function r(s,o=0){const a=n.get(s);let l;return a===void 0?(l=new wN(t,e),n.set(s,[l])):o>=a.length?(l=new wN(t,e),a.push(l)):l=a[o],l}function i(){n=new WeakMap}return{get:r,dispose:i}}class NR extends lr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=JV,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class OR extends lr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const $le=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Jle=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function qle(t,e,n){let r=new Ig;const i=new _e,s=new _e,o=new cn,a=new NR({depthPacking:qV}),l=new OR,c={},u=n.maxTextureSize,f={[Ho]:wi,[wi]:Ho,[Cs]:Cs},p=new io({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new _e},radius:{value:4}},vertexShader:$le,fragmentShader:Jle}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const y=new It;y.setAttribute("position",new qt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const S=new Yn(y,p),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=R1;let g=this.type;this.render=function(C,P,L){if(v.enabled===!1||v.autoUpdate===!1&&v.needsUpdate===!1||C.length===0)return;const N=t.getRenderTarget(),T=t.getActiveCubeFace(),D=t.getActiveMipmapLevel(),z=t.state;z.setBlending(Sa),z.buffers.color.setClear(1,1,1,1),z.buffers.depth.setTest(!0),z.setScissorTest(!1);const j=g!==js&&this.type===js,H=g===js&&this.type!==js;for(let q=0,Z=C.length;q<Z;q++){const ae=C[q],O=ae.shadow;if(O===void 0){console.warn("THREE.WebGLShadowMap:",ae,"has no shadow.");continue}if(O.autoUpdate===!1&&O.needsUpdate===!1)continue;i.copy(O.mapSize);const W=O.getFrameExtents();if(i.multiply(W),s.copy(O.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(s.x=Math.floor(u/W.x),i.x=s.x*W.x,O.mapSize.x=s.x),i.y>u&&(s.y=Math.floor(u/W.y),i.y=s.y*W.y,O.mapSize.y=s.y)),O.map===null||j===!0||H===!0){const Y=this.type!==js?{minFilter:zn,magFilter:zn}:{};O.map!==null&&O.map.dispose(),O.map=new ro(i.x,i.y,Y),O.map.texture.name=ae.name+".shadowMap",O.camera.updateProjectionMatrix()}t.setRenderTarget(O.map),t.clear();const K=O.getViewportCount();for(let Y=0;Y<K;Y++){const te=O.getViewport(Y);o.set(s.x*te.x,s.y*te.y,s.x*te.z,s.y*te.w),z.viewport(o),O.updateMatrices(ae,Y),r=O.getFrustum(),E(P,L,O.camera,ae,this.type)}O.isPointLightShadow!==!0&&this.type===js&&_(O,L),O.needsUpdate=!1}g=this.type,v.needsUpdate=!1,t.setRenderTarget(N,T,D)};function _(C,P){const L=e.update(S);p.defines.VSM_SAMPLES!==C.blurSamples&&(p.defines.VSM_SAMPLES=C.blurSamples,m.defines.VSM_SAMPLES=C.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),C.mapPass===null&&(C.mapPass=new ro(i.x,i.y)),p.uniforms.shadow_pass.value=C.map.texture,p.uniforms.resolution.value=C.mapSize,p.uniforms.radius.value=C.radius,t.setRenderTarget(C.mapPass),t.clear(),t.renderBufferDirect(P,null,L,p,S,null),m.uniforms.shadow_pass.value=C.mapPass.texture,m.uniforms.resolution.value=C.mapSize,m.uniforms.radius.value=C.radius,t.setRenderTarget(C.map),t.clear(),t.renderBufferDirect(P,null,L,m,S,null)}function A(C,P,L,N){let T=null;const D=L.isPointLight===!0?C.customDistanceMaterial:C.customDepthMaterial;if(D!==void 0)T=D;else if(T=L.isPointLight===!0?l:a,t.localClippingEnabled&&P.clipShadows===!0&&Array.isArray(P.clippingPlanes)&&P.clippingPlanes.length!==0||P.displacementMap&&P.displacementScale!==0||P.alphaMap&&P.alphaTest>0||P.map&&P.alphaTest>0){const z=T.uuid,j=P.uuid;let H=c[z];H===void 0&&(H={},c[z]=H);let q=H[j];q===void 0&&(q=T.clone(),H[j]=q,P.addEventListener("dispose",b)),T=q}if(T.visible=P.visible,T.wireframe=P.wireframe,N===js?T.side=P.shadowSide!==null?P.shadowSide:P.side:T.side=P.shadowSide!==null?P.shadowSide:f[P.side],T.alphaMap=P.alphaMap,T.alphaTest=P.alphaTest,T.map=P.map,T.clipShadows=P.clipShadows,T.clippingPlanes=P.clippingPlanes,T.clipIntersection=P.clipIntersection,T.displacementMap=P.displacementMap,T.displacementScale=P.displacementScale,T.displacementBias=P.displacementBias,T.wireframeLinewidth=P.wireframeLinewidth,T.linewidth=P.linewidth,L.isPointLight===!0&&T.isMeshDistanceMaterial===!0){const z=t.properties.get(T);z.light=L}return T}function E(C,P,L,N,T){if(C.visible===!1)return;if(C.layers.test(P.layers)&&(C.isMesh||C.isLine||C.isPoints)&&(C.castShadow||C.receiveShadow&&T===js)&&(!C.frustumCulled||r.intersectsObject(C))){C.modelViewMatrix.multiplyMatrices(L.matrixWorldInverse,C.matrixWorld);const j=e.update(C),H=C.material;if(Array.isArray(H)){const q=j.groups;for(let Z=0,ae=q.length;Z<ae;Z++){const O=q[Z],W=H[O.materialIndex];if(W&&W.visible){const K=A(C,W,N,T);C.onBeforeShadow(t,C,P,L,j,K,O),t.renderBufferDirect(L,null,j,K,C,O),C.onAfterShadow(t,C,P,L,j,K,O)}}}else if(H.visible){const q=A(C,H,N,T);C.onBeforeShadow(t,C,P,L,j,q,null),t.renderBufferDirect(L,null,j,q,C,null),C.onAfterShadow(t,C,P,L,j,q,null)}}const z=C.children;for(let j=0,H=z.length;j<H;j++)E(z[j],P,L,N,T)}function b(C){C.target.removeEventListener("dispose",b);for(const L in c){const N=c[L],T=C.target.uuid;T in N&&(N[T].dispose(),delete N[T])}}}function Yle(t,e,n){const r=n.isWebGL2;function i(){let X=!1;const Ie=new cn;let Be=null;const nt=new cn(0,0,0,0);return{setMask:function(rt){Be!==rt&&!X&&(t.colorMask(rt,rt,rt,rt),Be=rt)},setLocked:function(rt){X=rt},setClear:function(rt,Bt,Wt,mn,Xn){Xn===!0&&(rt*=mn,Bt*=mn,Wt*=mn),Ie.set(rt,Bt,Wt,mn),nt.equals(Ie)===!1&&(t.clearColor(rt,Bt,Wt,mn),nt.copy(Ie))},reset:function(){X=!1,Be=null,nt.set(-1,0,0,0)}}}function s(){let X=!1,Ie=null,Be=null,nt=null;return{setTest:function(rt){rt?Ue(t.DEPTH_TEST):ce(t.DEPTH_TEST)},setMask:function(rt){Ie!==rt&&!X&&(t.depthMask(rt),Ie=rt)},setFunc:function(rt){if(Be!==rt){switch(rt){case AV:t.depthFunc(t.NEVER);break;case wV:t.depthFunc(t.ALWAYS);break;case EV:t.depthFunc(t.LESS);break;case Dm:t.depthFunc(t.LEQUAL);break;case MV:t.depthFunc(t.EQUAL);break;case TV:t.depthFunc(t.GEQUAL);break;case CV:t.depthFunc(t.GREATER);break;case bV:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}Be=rt}},setLocked:function(rt){X=rt},setClear:function(rt){nt!==rt&&(t.clearDepth(rt),nt=rt)},reset:function(){X=!1,Ie=null,Be=null,nt=null}}}function o(){let X=!1,Ie=null,Be=null,nt=null,rt=null,Bt=null,Wt=null,mn=null,Xn=null;return{setTest:function(Yt){X||(Yt?Ue(t.STENCIL_TEST):ce(t.STENCIL_TEST))},setMask:function(Yt){Ie!==Yt&&!X&&(t.stencilMask(Yt),Ie=Yt)},setFunc:function(Yt,Rr,ls){(Be!==Yt||nt!==Rr||rt!==ls)&&(t.stencilFunc(Yt,Rr,ls),Be=Yt,nt=Rr,rt=ls)},setOp:function(Yt,Rr,ls){(Bt!==Yt||Wt!==Rr||mn!==ls)&&(t.stencilOp(Yt,Rr,ls),Bt=Yt,Wt=Rr,mn=ls)},setLocked:function(Yt){X=Yt},setClear:function(Yt){Xn!==Yt&&(t.clearStencil(Yt),Xn=Yt)},reset:function(){X=!1,Ie=null,Be=null,nt=null,rt=null,Bt=null,Wt=null,mn=null,Xn=null}}}const a=new i,l=new s,c=new o,u=new WeakMap,f=new WeakMap;let p={},m={},y=new WeakMap,S=[],v=null,g=!1,_=null,A=null,E=null,b=null,C=null,P=null,L=null,N=new ze(0,0,0),T=0,D=!1,z=null,j=null,H=null,q=null,Z=null;const ae=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let O=!1,W=0;const K=t.getParameter(t.VERSION);K.indexOf("WebGL")!==-1?(W=parseFloat(/^WebGL (\d)/.exec(K)[1]),O=W>=1):K.indexOf("OpenGL ES")!==-1&&(W=parseFloat(/^OpenGL ES (\d)/.exec(K)[1]),O=W>=2);let Y=null,te={};const Te=t.getParameter(t.SCISSOR_BOX),ne=t.getParameter(t.VIEWPORT),de=new cn().fromArray(Te),Ae=new cn().fromArray(ne);function Pe(X,Ie,Be,nt){const rt=new Uint8Array(4),Bt=t.createTexture();t.bindTexture(X,Bt),t.texParameteri(X,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(X,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let Wt=0;Wt<Be;Wt++)r&&(X===t.TEXTURE_3D||X===t.TEXTURE_2D_ARRAY)?t.texImage3D(Ie,0,t.RGBA,1,1,nt,0,t.RGBA,t.UNSIGNED_BYTE,rt):t.texImage2D(Ie+Wt,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,rt);return Bt}const $e={};$e[t.TEXTURE_2D]=Pe(t.TEXTURE_2D,t.TEXTURE_2D,1),$e[t.TEXTURE_CUBE_MAP]=Pe(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&($e[t.TEXTURE_2D_ARRAY]=Pe(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),$e[t.TEXTURE_3D]=Pe(t.TEXTURE_3D,t.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),Ue(t.DEPTH_TEST),l.setFunc(Dm),Ee(!1),F(HT),Ue(t.CULL_FACE),le(Sa);function Ue(X){p[X]!==!0&&(t.enable(X),p[X]=!0)}function ce(X){p[X]!==!1&&(t.disable(X),p[X]=!1)}function oe(X,Ie){return m[X]!==Ie?(t.bindFramebuffer(X,Ie),m[X]=Ie,r&&(X===t.DRAW_FRAMEBUFFER&&(m[t.FRAMEBUFFER]=Ie),X===t.FRAMEBUFFER&&(m[t.DRAW_FRAMEBUFFER]=Ie)),!0):!1}function V(X,Ie){let Be=S,nt=!1;if(X)if(Be=y.get(Ie),Be===void 0&&(Be=[],y.set(Ie,Be)),X.isWebGLMultipleRenderTargets){const rt=X.texture;if(Be.length!==rt.length||Be[0]!==t.COLOR_ATTACHMENT0){for(let Bt=0,Wt=rt.length;Bt<Wt;Bt++)Be[Bt]=t.COLOR_ATTACHMENT0+Bt;Be.length=rt.length,nt=!0}}else Be[0]!==t.COLOR_ATTACHMENT0&&(Be[0]=t.COLOR_ATTACHMENT0,nt=!0);else Be[0]!==t.BACK&&(Be[0]=t.BACK,nt=!0);nt&&(n.isWebGL2?t.drawBuffers(Be):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Be))}function he(X){return v!==X?(t.useProgram(X),v=X,!0):!1}const ie={[cl]:t.FUNC_ADD,[aV]:t.FUNC_SUBTRACT,[lV]:t.FUNC_REVERSE_SUBTRACT};if(r)ie[XT]=t.MIN,ie[KT]=t.MAX;else{const X=e.get("EXT_blend_minmax");X!==null&&(ie[XT]=X.MIN_EXT,ie[KT]=X.MAX_EXT)}const ye={[cV]:t.ZERO,[uV]:t.ONE,[hV]:t.SRC_COLOR,[sx]:t.SRC_ALPHA,[yV]:t.SRC_ALPHA_SATURATE,[mV]:t.DST_COLOR,[dV]:t.DST_ALPHA,[fV]:t.ONE_MINUS_SRC_COLOR,[ox]:t.ONE_MINUS_SRC_ALPHA,[gV]:t.ONE_MINUS_DST_COLOR,[pV]:t.ONE_MINUS_DST_ALPHA,[vV]:t.CONSTANT_COLOR,[_V]:t.ONE_MINUS_CONSTANT_COLOR,[xV]:t.CONSTANT_ALPHA,[SV]:t.ONE_MINUS_CONSTANT_ALPHA};function le(X,Ie,Be,nt,rt,Bt,Wt,mn,Xn,Yt){if(X===Sa){g===!0&&(ce(t.BLEND),g=!1);return}if(g===!1&&(Ue(t.BLEND),g=!0),X!==oV){if(X!==_||Yt!==D){if((A!==cl||C!==cl)&&(t.blendEquation(t.FUNC_ADD),A=cl,C=cl),Yt)switch(X){case nu:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case GT:t.blendFunc(t.ONE,t.ONE);break;case jT:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case WT:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",X);break}else switch(X){case nu:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case GT:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case jT:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case WT:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",X);break}E=null,b=null,P=null,L=null,N.set(0,0,0),T=0,_=X,D=Yt}return}rt=rt||Ie,Bt=Bt||Be,Wt=Wt||nt,(Ie!==A||rt!==C)&&(t.blendEquationSeparate(ie[Ie],ie[rt]),A=Ie,C=rt),(Be!==E||nt!==b||Bt!==P||Wt!==L)&&(t.blendFuncSeparate(ye[Be],ye[nt],ye[Bt],ye[Wt]),E=Be,b=nt,P=Bt,L=Wt),(mn.equals(N)===!1||Xn!==T)&&(t.blendColor(mn.r,mn.g,mn.b,Xn),N.copy(mn),T=Xn),_=X,D=!1}function be(X,Ie){X.side===Cs?ce(t.CULL_FACE):Ue(t.CULL_FACE);let Be=X.side===wi;Ie&&(Be=!Be),Ee(Be),X.blending===nu&&X.transparent===!1?le(Sa):le(X.blending,X.blendEquation,X.blendSrc,X.blendDst,X.blendEquationAlpha,X.blendSrcAlpha,X.blendDstAlpha,X.blendColor,X.blendAlpha,X.premultipliedAlpha),l.setFunc(X.depthFunc),l.setTest(X.depthTest),l.setMask(X.depthWrite),a.setMask(X.colorWrite);const nt=X.stencilWrite;c.setTest(nt),nt&&(c.setMask(X.stencilWriteMask),c.setFunc(X.stencilFunc,X.stencilRef,X.stencilFuncMask),c.setOp(X.stencilFail,X.stencilZFail,X.stencilZPass)),J(X.polygonOffset,X.polygonOffsetFactor,X.polygonOffsetUnits),X.alphaToCoverage===!0?Ue(t.SAMPLE_ALPHA_TO_COVERAGE):ce(t.SAMPLE_ALPHA_TO_COVERAGE)}function Ee(X){z!==X&&(X?t.frontFace(t.CW):t.frontFace(t.CCW),z=X)}function F(X){X!==rV?(Ue(t.CULL_FACE),X!==j&&(X===HT?t.cullFace(t.BACK):X===iV?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):ce(t.CULL_FACE),j=X}function B(X){X!==H&&(O&&t.lineWidth(X),H=X)}function J(X,Ie,Be){X?(Ue(t.POLYGON_OFFSET_FILL),(q!==Ie||Z!==Be)&&(t.polygonOffset(Ie,Be),q=Ie,Z=Be)):ce(t.POLYGON_OFFSET_FILL)}function xe(X){X?Ue(t.SCISSOR_TEST):ce(t.SCISSOR_TEST)}function Se(X){X===void 0&&(X=t.TEXTURE0+ae-1),Y!==X&&(t.activeTexture(X),Y=X)}function we(X,Ie,Be){Be===void 0&&(Y===null?Be=t.TEXTURE0+ae-1:Be=Y);let nt=te[Be];nt===void 0&&(nt={type:void 0,texture:void 0},te[Be]=nt),(nt.type!==X||nt.texture!==Ie)&&(Y!==Be&&(t.activeTexture(Be),Y=Be),t.bindTexture(X,Ie||$e[X]),nt.type=X,nt.texture=Ie)}function Qe(){const X=te[Y];X!==void 0&&X.type!==void 0&&(t.bindTexture(X.type,null),X.type=void 0,X.texture=void 0)}function Ne(){try{t.compressedTexImage2D.apply(t,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function Ve(){try{t.compressedTexImage3D.apply(t,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function ct(){try{t.texSubImage2D.apply(t,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function wt(){try{t.texSubImage3D.apply(t,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function Re(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function Gt(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function Dt(){try{t.texStorage2D.apply(t,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function vt(){try{t.texStorage3D.apply(t,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function lt(){try{t.texImage2D.apply(t,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function Ye(){try{t.texImage3D.apply(t,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function Q(X){de.equals(X)===!1&&(t.scissor(X.x,X.y,X.z,X.w),de.copy(X))}function Me(X){Ae.equals(X)===!1&&(t.viewport(X.x,X.y,X.z,X.w),Ae.copy(X))}function Ge(X,Ie){let Be=f.get(Ie);Be===void 0&&(Be=new WeakMap,f.set(Ie,Be));let nt=Be.get(X);nt===void 0&&(nt=t.getUniformBlockIndex(Ie,X.name),Be.set(X,nt))}function Je(X,Ie){const nt=f.get(Ie).get(X);u.get(Ie)!==nt&&(t.uniformBlockBinding(Ie,nt,X.__bindingPointIndex),u.set(Ie,nt))}function _t(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),r===!0&&(t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),p={},Y=null,te={},m={},y=new WeakMap,S=[],v=null,g=!1,_=null,A=null,E=null,b=null,C=null,P=null,L=null,N=new ze(0,0,0),T=0,D=!1,z=null,j=null,H=null,q=null,Z=null,de.set(0,0,t.canvas.width,t.canvas.height),Ae.set(0,0,t.canvas.width,t.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:Ue,disable:ce,bindFramebuffer:oe,drawBuffers:V,useProgram:he,setBlending:le,setMaterial:be,setFlipSided:Ee,setCullFace:F,setLineWidth:B,setPolygonOffset:J,setScissorTest:xe,activeTexture:Se,bindTexture:we,unbindTexture:Qe,compressedTexImage2D:Ne,compressedTexImage3D:Ve,texImage2D:lt,texImage3D:Ye,updateUBOMapping:Ge,uniformBlockBinding:Je,texStorage2D:Dt,texStorage3D:vt,texSubImage2D:ct,texSubImage3D:wt,compressedTexSubImage2D:Re,compressedTexSubImage3D:Gt,scissor:Q,viewport:Me,reset:_t}}function Qle(t,e,n,r,i,s,o){const a=i.isWebGL2,l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new WeakMap;let f;const p=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(F,B){return m?new OffscreenCanvas(F,B):Gm("canvas")}function S(F,B,J,xe){let Se=1;if((F.width>xe||F.height>xe)&&(Se=xe/Math.max(F.width,F.height)),Se<1||B===!0)if(typeof HTMLImageElement<"u"&&F instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&F instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&F instanceof ImageBitmap){const we=B?cx:Math.floor,Qe=we(Se*F.width),Ne=we(Se*F.height);f===void 0&&(f=y(Qe,Ne));const Ve=J?y(Qe,Ne):f;return Ve.width=Qe,Ve.height=Ne,Ve.getContext("2d").drawImage(F,0,0,Qe,Ne),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+F.width+"x"+F.height+") to ("+Qe+"x"+Ne+")."),Ve}else return"data"in F&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+F.width+"x"+F.height+")."),F;return F}function v(F){return AC(F.width)&&AC(F.height)}function g(F){return a?!1:F.wrapS!==kr||F.wrapT!==kr||F.minFilter!==zn&&F.minFilter!==Sn}function _(F,B){return F.generateMipmaps&&B&&F.minFilter!==zn&&F.minFilter!==Sn}function A(F){t.generateMipmap(F)}function E(F,B,J,xe,Se=!1){if(a===!1)return B;if(F!==null){if(t[F]!==void 0)return t[F];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+F+"'")}let we=B;if(B===t.RED&&(J===t.FLOAT&&(we=t.R32F),J===t.HALF_FLOAT&&(we=t.R16F),J===t.UNSIGNED_BYTE&&(we=t.R8)),B===t.RED_INTEGER&&(J===t.UNSIGNED_BYTE&&(we=t.R8UI),J===t.UNSIGNED_SHORT&&(we=t.R16UI),J===t.UNSIGNED_INT&&(we=t.R32UI),J===t.BYTE&&(we=t.R8I),J===t.SHORT&&(we=t.R16I),J===t.INT&&(we=t.R32I)),B===t.RG&&(J===t.FLOAT&&(we=t.RG32F),J===t.HALF_FLOAT&&(we=t.RG16F),J===t.UNSIGNED_BYTE&&(we=t.RG8)),B===t.RGBA){const Qe=Se?km:ln.getTransfer(xe);J===t.FLOAT&&(we=t.RGBA32F),J===t.HALF_FLOAT&&(we=t.RGBA16F),J===t.UNSIGNED_BYTE&&(we=Qe===gn?t.SRGB8_ALPHA8:t.RGBA8),J===t.UNSIGNED_SHORT_4_4_4_4&&(we=t.RGBA4),J===t.UNSIGNED_SHORT_5_5_5_1&&(we=t.RGB5_A1)}return(we===t.R16F||we===t.R32F||we===t.RG16F||we===t.RG32F||we===t.RGBA16F||we===t.RGBA32F)&&e.get("EXT_color_buffer_float"),we}function b(F,B,J){return _(F,J)===!0||F.isFramebufferTexture&&F.minFilter!==zn&&F.minFilter!==Sn?Math.log2(Math.max(B.width,B.height))+1:F.mipmaps!==void 0&&F.mipmaps.length>0?F.mipmaps.length:F.isCompressedTexture&&Array.isArray(F.image)?B.mipmaps.length:1}function C(F){return F===zn||F===Om||F===ul?t.NEAREST:t.LINEAR}function P(F){const B=F.target;B.removeEventListener("dispose",P),N(B),B.isVideoTexture&&u.delete(B)}function L(F){const B=F.target;B.removeEventListener("dispose",L),D(B)}function N(F){const B=r.get(F);if(B.__webglInit===void 0)return;const J=F.source,xe=p.get(J);if(xe){const Se=xe[B.__cacheKey];Se.usedTimes--,Se.usedTimes===0&&T(F),Object.keys(xe).length===0&&p.delete(J)}r.remove(F)}function T(F){const B=r.get(F);t.deleteTexture(B.__webglTexture);const J=F.source,xe=p.get(J);delete xe[B.__cacheKey],o.memory.textures--}function D(F){const B=F.texture,J=r.get(F),xe=r.get(B);if(xe.__webglTexture!==void 0&&(t.deleteTexture(xe.__webglTexture),o.memory.textures--),F.depthTexture&&F.depthTexture.dispose(),F.isWebGLCubeRenderTarget)for(let Se=0;Se<6;Se++){if(Array.isArray(J.__webglFramebuffer[Se]))for(let we=0;we<J.__webglFramebuffer[Se].length;we++)t.deleteFramebuffer(J.__webglFramebuffer[Se][we]);else t.deleteFramebuffer(J.__webglFramebuffer[Se]);J.__webglDepthbuffer&&t.deleteRenderbuffer(J.__webglDepthbuffer[Se])}else{if(Array.isArray(J.__webglFramebuffer))for(let Se=0;Se<J.__webglFramebuffer.length;Se++)t.deleteFramebuffer(J.__webglFramebuffer[Se]);else t.deleteFramebuffer(J.__webglFramebuffer);if(J.__webglDepthbuffer&&t.deleteRenderbuffer(J.__webglDepthbuffer),J.__webglMultisampledFramebuffer&&t.deleteFramebuffer(J.__webglMultisampledFramebuffer),J.__webglColorRenderbuffer)for(let Se=0;Se<J.__webglColorRenderbuffer.length;Se++)J.__webglColorRenderbuffer[Se]&&t.deleteRenderbuffer(J.__webglColorRenderbuffer[Se]);J.__webglDepthRenderbuffer&&t.deleteRenderbuffer(J.__webglDepthRenderbuffer)}if(F.isWebGLMultipleRenderTargets)for(let Se=0,we=B.length;Se<we;Se++){const Qe=r.get(B[Se]);Qe.__webglTexture&&(t.deleteTexture(Qe.__webglTexture),o.memory.textures--),r.remove(B[Se])}r.remove(B),r.remove(F)}let z=0;function j(){z=0}function H(){const F=z;return F>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+F+" texture units while this GPU supports only "+i.maxTextures),z+=1,F}function q(F){const B=[];return B.push(F.wrapS),B.push(F.wrapT),B.push(F.wrapR||0),B.push(F.magFilter),B.push(F.minFilter),B.push(F.anisotropy),B.push(F.internalFormat),B.push(F.format),B.push(F.type),B.push(F.generateMipmaps),B.push(F.premultiplyAlpha),B.push(F.flipY),B.push(F.unpackAlignment),B.push(F.colorSpace),B.join()}function Z(F,B){const J=r.get(F);if(F.isVideoTexture&&be(F),F.isRenderTargetTexture===!1&&F.version>0&&J.__version!==F.version){const xe=F.image;if(xe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(xe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{de(J,F,B);return}}n.bindTexture(t.TEXTURE_2D,J.__webglTexture,t.TEXTURE0+B)}function ae(F,B){const J=r.get(F);if(F.version>0&&J.__version!==F.version){de(J,F,B);return}n.bindTexture(t.TEXTURE_2D_ARRAY,J.__webglTexture,t.TEXTURE0+B)}function O(F,B){const J=r.get(F);if(F.version>0&&J.__version!==F.version){de(J,F,B);return}n.bindTexture(t.TEXTURE_3D,J.__webglTexture,t.TEXTURE0+B)}function W(F,B){const J=r.get(F);if(F.version>0&&J.__version!==F.version){Ae(J,F,B);return}n.bindTexture(t.TEXTURE_CUBE_MAP,J.__webglTexture,t.TEXTURE0+B)}const K={[Gl]:t.REPEAT,[kr]:t.CLAMP_TO_EDGE,[Bf]:t.MIRRORED_REPEAT},Y={[zn]:t.NEAREST,[Om]:t.NEAREST_MIPMAP_NEAREST,[ul]:t.NEAREST_MIPMAP_LINEAR,[Sn]:t.LINEAR,[hf]:t.LINEAR_MIPMAP_NEAREST,[Is]:t.LINEAR_MIPMAP_LINEAR},te={[QV]:t.NEVER,[i8]:t.ALWAYS,[ZV]:t.LESS,[MR]:t.LEQUAL,[e8]:t.EQUAL,[r8]:t.GEQUAL,[t8]:t.GREATER,[n8]:t.NOTEQUAL};function Te(F,B,J){if(B.type===bs&&e.has("OES_texture_float_linear")===!1&&(B.magFilter===Sn||B.magFilter===hf||B.magFilter===ul||B.magFilter===Is||B.minFilter===Sn||B.minFilter===hf||B.minFilter===ul||B.minFilter===Is)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),J?(t.texParameteri(F,t.TEXTURE_WRAP_S,K[B.wrapS]),t.texParameteri(F,t.TEXTURE_WRAP_T,K[B.wrapT]),(F===t.TEXTURE_3D||F===t.TEXTURE_2D_ARRAY)&&t.texParameteri(F,t.TEXTURE_WRAP_R,K[B.wrapR]),t.texParameteri(F,t.TEXTURE_MAG_FILTER,Y[B.magFilter]),t.texParameteri(F,t.TEXTURE_MIN_FILTER,Y[B.minFilter])):(t.texParameteri(F,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(F,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),(F===t.TEXTURE_3D||F===t.TEXTURE_2D_ARRAY)&&t.texParameteri(F,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),(B.wrapS!==kr||B.wrapT!==kr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(F,t.TEXTURE_MAG_FILTER,C(B.magFilter)),t.texParameteri(F,t.TEXTURE_MIN_FILTER,C(B.minFilter)),B.minFilter!==zn&&B.minFilter!==Sn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),B.compareFunction&&(t.texParameteri(F,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(F,t.TEXTURE_COMPARE_FUNC,te[B.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const xe=e.get("EXT_texture_filter_anisotropic");if(B.magFilter===zn||B.minFilter!==ul&&B.minFilter!==Is||B.type===bs&&e.has("OES_texture_float_linear")===!1||a===!1&&B.type===Nf&&e.has("OES_texture_half_float_linear")===!1)return;(B.anisotropy>1||r.get(B).__currentAnisotropy)&&(t.texParameterf(F,xe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(B.anisotropy,i.getMaxAnisotropy())),r.get(B).__currentAnisotropy=B.anisotropy)}}function ne(F,B){let J=!1;F.__webglInit===void 0&&(F.__webglInit=!0,B.addEventListener("dispose",P));const xe=B.source;let Se=p.get(xe);Se===void 0&&(Se={},p.set(xe,Se));const we=q(B);if(we!==F.__cacheKey){Se[we]===void 0&&(Se[we]={texture:t.createTexture(),usedTimes:0},o.memory.textures++,J=!0),Se[we].usedTimes++;const Qe=Se[F.__cacheKey];Qe!==void 0&&(Se[F.__cacheKey].usedTimes--,Qe.usedTimes===0&&T(B)),F.__cacheKey=we,F.__webglTexture=Se[we].texture}return J}function de(F,B,J){let xe=t.TEXTURE_2D;(B.isDataArrayTexture||B.isCompressedArrayTexture)&&(xe=t.TEXTURE_2D_ARRAY),B.isData3DTexture&&(xe=t.TEXTURE_3D);const Se=ne(F,B),we=B.source;n.bindTexture(xe,F.__webglTexture,t.TEXTURE0+J);const Qe=r.get(we);if(we.version!==Qe.__version||Se===!0){n.activeTexture(t.TEXTURE0+J);const Ne=ln.getPrimaries(ln.workingColorSpace),Ve=B.colorSpace===Ki?null:ln.getPrimaries(B.colorSpace),ct=B.colorSpace===Ki||Ne===Ve?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,B.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,B.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,B.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,ct);const wt=g(B)&&v(B.image)===!1;let Re=S(B.image,wt,!1,i.maxTextureSize);Re=Ee(B,Re);const Gt=v(Re)||a,Dt=s.convert(B.format,B.colorSpace);let vt=s.convert(B.type),lt=E(B.internalFormat,Dt,vt,B.colorSpace,B.isVideoTexture);Te(xe,B,Gt);let Ye;const Q=B.mipmaps,Me=a&&B.isVideoTexture!==!0&&lt!==SR,Ge=Qe.__version===void 0||Se===!0,Je=we.dataReady,_t=b(B,Re,Gt);if(B.isDepthTexture)lt=t.DEPTH_COMPONENT,a?B.type===bs?lt=t.DEPTH_COMPONENT32F:B.type===ma?lt=t.DEPTH_COMPONENT24:B.type===Pl?lt=t.DEPTH24_STENCIL8:lt=t.DEPTH_COMPONENT16:B.type===bs&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),B.format===Il&&lt===t.DEPTH_COMPONENT&&B.type!==I1&&B.type!==ma&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),B.type=ma,vt=s.convert(B.type)),B.format===_u&&lt===t.DEPTH_COMPONENT&&(lt=t.DEPTH_STENCIL,B.type!==Pl&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),B.type=Pl,vt=s.convert(B.type))),Ge&&(Me?n.texStorage2D(t.TEXTURE_2D,1,lt,Re.width,Re.height):n.texImage2D(t.TEXTURE_2D,0,lt,Re.width,Re.height,0,Dt,vt,null));else if(B.isDataTexture)if(Q.length>0&&Gt){Me&&Ge&&n.texStorage2D(t.TEXTURE_2D,_t,lt,Q[0].width,Q[0].height);for(let X=0,Ie=Q.length;X<Ie;X++)Ye=Q[X],Me?Je&&n.texSubImage2D(t.TEXTURE_2D,X,0,0,Ye.width,Ye.height,Dt,vt,Ye.data):n.texImage2D(t.TEXTURE_2D,X,lt,Ye.width,Ye.height,0,Dt,vt,Ye.data);B.generateMipmaps=!1}else Me?(Ge&&n.texStorage2D(t.TEXTURE_2D,_t,lt,Re.width,Re.height),Je&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,Re.width,Re.height,Dt,vt,Re.data)):n.texImage2D(t.TEXTURE_2D,0,lt,Re.width,Re.height,0,Dt,vt,Re.data);else if(B.isCompressedTexture)if(B.isCompressedArrayTexture){Me&&Ge&&n.texStorage3D(t.TEXTURE_2D_ARRAY,_t,lt,Q[0].width,Q[0].height,Re.depth);for(let X=0,Ie=Q.length;X<Ie;X++)Ye=Q[X],B.format!==_i?Dt!==null?Me?Je&&n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,X,0,0,0,Ye.width,Ye.height,Re.depth,Dt,Ye.data,0,0):n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,X,lt,Ye.width,Ye.height,Re.depth,0,Ye.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Me?Je&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,X,0,0,0,Ye.width,Ye.height,Re.depth,Dt,vt,Ye.data):n.texImage3D(t.TEXTURE_2D_ARRAY,X,lt,Ye.width,Ye.height,Re.depth,0,Dt,vt,Ye.data)}else{Me&&Ge&&n.texStorage2D(t.TEXTURE_2D,_t,lt,Q[0].width,Q[0].height);for(let X=0,Ie=Q.length;X<Ie;X++)Ye=Q[X],B.format!==_i?Dt!==null?Me?Je&&n.compressedTexSubImage2D(t.TEXTURE_2D,X,0,0,Ye.width,Ye.height,Dt,Ye.data):n.compressedTexImage2D(t.TEXTURE_2D,X,lt,Ye.width,Ye.height,0,Ye.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Me?Je&&n.texSubImage2D(t.TEXTURE_2D,X,0,0,Ye.width,Ye.height,Dt,vt,Ye.data):n.texImage2D(t.TEXTURE_2D,X,lt,Ye.width,Ye.height,0,Dt,vt,Ye.data)}else if(B.isDataArrayTexture)Me?(Ge&&n.texStorage3D(t.TEXTURE_2D_ARRAY,_t,lt,Re.width,Re.height,Re.depth),Je&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,Re.width,Re.height,Re.depth,Dt,vt,Re.data)):n.texImage3D(t.TEXTURE_2D_ARRAY,0,lt,Re.width,Re.height,Re.depth,0,Dt,vt,Re.data);else if(B.isData3DTexture)Me?(Ge&&n.texStorage3D(t.TEXTURE_3D,_t,lt,Re.width,Re.height,Re.depth),Je&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,Re.width,Re.height,Re.depth,Dt,vt,Re.data)):n.texImage3D(t.TEXTURE_3D,0,lt,Re.width,Re.height,Re.depth,0,Dt,vt,Re.data);else if(B.isFramebufferTexture){if(Ge)if(Me)n.texStorage2D(t.TEXTURE_2D,_t,lt,Re.width,Re.height);else{let X=Re.width,Ie=Re.height;for(let Be=0;Be<_t;Be++)n.texImage2D(t.TEXTURE_2D,Be,lt,X,Ie,0,Dt,vt,null),X>>=1,Ie>>=1}}else if(Q.length>0&&Gt){Me&&Ge&&n.texStorage2D(t.TEXTURE_2D,_t,lt,Q[0].width,Q[0].height);for(let X=0,Ie=Q.length;X<Ie;X++)Ye=Q[X],Me?Je&&n.texSubImage2D(t.TEXTURE_2D,X,0,0,Dt,vt,Ye):n.texImage2D(t.TEXTURE_2D,X,lt,Dt,vt,Ye);B.generateMipmaps=!1}else Me?(Ge&&n.texStorage2D(t.TEXTURE_2D,_t,lt,Re.width,Re.height),Je&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,Dt,vt,Re)):n.texImage2D(t.TEXTURE_2D,0,lt,Dt,vt,Re);_(B,Gt)&&A(xe),Qe.__version=we.version,B.onUpdate&&B.onUpdate(B)}F.__version=B.version}function Ae(F,B,J){if(B.image.length!==6)return;const xe=ne(F,B),Se=B.source;n.bindTexture(t.TEXTURE_CUBE_MAP,F.__webglTexture,t.TEXTURE0+J);const we=r.get(Se);if(Se.version!==we.__version||xe===!0){n.activeTexture(t.TEXTURE0+J);const Qe=ln.getPrimaries(ln.workingColorSpace),Ne=B.colorSpace===Ki?null:ln.getPrimaries(B.colorSpace),Ve=B.colorSpace===Ki||Qe===Ne?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,B.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,B.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,B.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ve);const ct=B.isCompressedTexture||B.image[0].isCompressedTexture,wt=B.image[0]&&B.image[0].isDataTexture,Re=[];for(let X=0;X<6;X++)!ct&&!wt?Re[X]=S(B.image[X],!1,!0,i.maxCubemapSize):Re[X]=wt?B.image[X].image:B.image[X],Re[X]=Ee(B,Re[X]);const Gt=Re[0],Dt=v(Gt)||a,vt=s.convert(B.format,B.colorSpace),lt=s.convert(B.type),Ye=E(B.internalFormat,vt,lt,B.colorSpace),Q=a&&B.isVideoTexture!==!0,Me=we.__version===void 0||xe===!0,Ge=Se.dataReady;let Je=b(B,Gt,Dt);Te(t.TEXTURE_CUBE_MAP,B,Dt);let _t;if(ct){Q&&Me&&n.texStorage2D(t.TEXTURE_CUBE_MAP,Je,Ye,Gt.width,Gt.height);for(let X=0;X<6;X++){_t=Re[X].mipmaps;for(let Ie=0;Ie<_t.length;Ie++){const Be=_t[Ie];B.format!==_i?vt!==null?Q?Ge&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+X,Ie,0,0,Be.width,Be.height,vt,Be.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+X,Ie,Ye,Be.width,Be.height,0,Be.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Q?Ge&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+X,Ie,0,0,Be.width,Be.height,vt,lt,Be.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+X,Ie,Ye,Be.width,Be.height,0,vt,lt,Be.data)}}}else{_t=B.mipmaps,Q&&Me&&(_t.length>0&&Je++,n.texStorage2D(t.TEXTURE_CUBE_MAP,Je,Ye,Re[0].width,Re[0].height));for(let X=0;X<6;X++)if(wt){Q?Ge&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+X,0,0,0,Re[X].width,Re[X].height,vt,lt,Re[X].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+X,0,Ye,Re[X].width,Re[X].height,0,vt,lt,Re[X].data);for(let Ie=0;Ie<_t.length;Ie++){const nt=_t[Ie].image[X].image;Q?Ge&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+X,Ie+1,0,0,nt.width,nt.height,vt,lt,nt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+X,Ie+1,Ye,nt.width,nt.height,0,vt,lt,nt.data)}}else{Q?Ge&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+X,0,0,0,vt,lt,Re[X]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+X,0,Ye,vt,lt,Re[X]);for(let Ie=0;Ie<_t.length;Ie++){const Be=_t[Ie];Q?Ge&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+X,Ie+1,0,0,vt,lt,Be.image[X]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+X,Ie+1,Ye,vt,lt,Be.image[X])}}}_(B,Dt)&&A(t.TEXTURE_CUBE_MAP),we.__version=Se.version,B.onUpdate&&B.onUpdate(B)}F.__version=B.version}function Pe(F,B,J,xe,Se,we){const Qe=s.convert(J.format,J.colorSpace),Ne=s.convert(J.type),Ve=E(J.internalFormat,Qe,Ne,J.colorSpace);if(!r.get(B).__hasExternalTextures){const wt=Math.max(1,B.width>>we),Re=Math.max(1,B.height>>we);Se===t.TEXTURE_3D||Se===t.TEXTURE_2D_ARRAY?n.texImage3D(Se,we,Ve,wt,Re,B.depth,0,Qe,Ne,null):n.texImage2D(Se,we,Ve,wt,Re,0,Qe,Ne,null)}n.bindFramebuffer(t.FRAMEBUFFER,F),le(B)?l.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,xe,Se,r.get(J).__webglTexture,0,ye(B)):(Se===t.TEXTURE_2D||Se>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&Se<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,xe,Se,r.get(J).__webglTexture,we),n.bindFramebuffer(t.FRAMEBUFFER,null)}function $e(F,B,J){if(t.bindRenderbuffer(t.RENDERBUFFER,F),B.depthBuffer&&!B.stencilBuffer){let xe=a===!0?t.DEPTH_COMPONENT24:t.DEPTH_COMPONENT16;if(J||le(B)){const Se=B.depthTexture;Se&&Se.isDepthTexture&&(Se.type===bs?xe=t.DEPTH_COMPONENT32F:Se.type===ma&&(xe=t.DEPTH_COMPONENT24));const we=ye(B);le(B)?l.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,we,xe,B.width,B.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,we,xe,B.width,B.height)}else t.renderbufferStorage(t.RENDERBUFFER,xe,B.width,B.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,F)}else if(B.depthBuffer&&B.stencilBuffer){const xe=ye(B);J&&le(B)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,xe,t.DEPTH24_STENCIL8,B.width,B.height):le(B)?l.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,xe,t.DEPTH24_STENCIL8,B.width,B.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,B.width,B.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,F)}else{const xe=B.isWebGLMultipleRenderTargets===!0?B.texture:[B.texture];for(let Se=0;Se<xe.length;Se++){const we=xe[Se],Qe=s.convert(we.format,we.colorSpace),Ne=s.convert(we.type),Ve=E(we.internalFormat,Qe,Ne,we.colorSpace),ct=ye(B);J&&le(B)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,ct,Ve,B.width,B.height):le(B)?l.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,ct,Ve,B.width,B.height):t.renderbufferStorage(t.RENDERBUFFER,Ve,B.width,B.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function Ue(F,B){if(B&&B.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,F),!(B.depthTexture&&B.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(B.depthTexture).__webglTexture||B.depthTexture.image.width!==B.width||B.depthTexture.image.height!==B.height)&&(B.depthTexture.image.width=B.width,B.depthTexture.image.height=B.height,B.depthTexture.needsUpdate=!0),Z(B.depthTexture,0);const xe=r.get(B.depthTexture).__webglTexture,Se=ye(B);if(B.depthTexture.format===Il)le(B)?l.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,xe,0,Se):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,xe,0);else if(B.depthTexture.format===_u)le(B)?l.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,xe,0,Se):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,xe,0);else throw new Error("Unknown depthTexture format")}function ce(F){const B=r.get(F),J=F.isWebGLCubeRenderTarget===!0;if(F.depthTexture&&!B.__autoAllocateDepthBuffer){if(J)throw new Error("target.depthTexture not supported in Cube render targets");Ue(B.__webglFramebuffer,F)}else if(J){B.__webglDepthbuffer=[];for(let xe=0;xe<6;xe++)n.bindFramebuffer(t.FRAMEBUFFER,B.__webglFramebuffer[xe]),B.__webglDepthbuffer[xe]=t.createRenderbuffer(),$e(B.__webglDepthbuffer[xe],F,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,B.__webglFramebuffer),B.__webglDepthbuffer=t.createRenderbuffer(),$e(B.__webglDepthbuffer,F,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function oe(F,B,J){const xe=r.get(F);B!==void 0&&Pe(xe.__webglFramebuffer,F,F.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),J!==void 0&&ce(F)}function V(F){const B=F.texture,J=r.get(F),xe=r.get(B);F.addEventListener("dispose",L),F.isWebGLMultipleRenderTargets!==!0&&(xe.__webglTexture===void 0&&(xe.__webglTexture=t.createTexture()),xe.__version=B.version,o.memory.textures++);const Se=F.isWebGLCubeRenderTarget===!0,we=F.isWebGLMultipleRenderTargets===!0,Qe=v(F)||a;if(Se){J.__webglFramebuffer=[];for(let Ne=0;Ne<6;Ne++)if(a&&B.mipmaps&&B.mipmaps.length>0){J.__webglFramebuffer[Ne]=[];for(let Ve=0;Ve<B.mipmaps.length;Ve++)J.__webglFramebuffer[Ne][Ve]=t.createFramebuffer()}else J.__webglFramebuffer[Ne]=t.createFramebuffer()}else{if(a&&B.mipmaps&&B.mipmaps.length>0){J.__webglFramebuffer=[];for(let Ne=0;Ne<B.mipmaps.length;Ne++)J.__webglFramebuffer[Ne]=t.createFramebuffer()}else J.__webglFramebuffer=t.createFramebuffer();if(we)if(i.drawBuffers){const Ne=F.texture;for(let Ve=0,ct=Ne.length;Ve<ct;Ve++){const wt=r.get(Ne[Ve]);wt.__webglTexture===void 0&&(wt.__webglTexture=t.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&F.samples>0&&le(F)===!1){const Ne=we?B:[B];J.__webglMultisampledFramebuffer=t.createFramebuffer(),J.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,J.__webglMultisampledFramebuffer);for(let Ve=0;Ve<Ne.length;Ve++){const ct=Ne[Ve];J.__webglColorRenderbuffer[Ve]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,J.__webglColorRenderbuffer[Ve]);const wt=s.convert(ct.format,ct.colorSpace),Re=s.convert(ct.type),Gt=E(ct.internalFormat,wt,Re,ct.colorSpace,F.isXRRenderTarget===!0),Dt=ye(F);t.renderbufferStorageMultisample(t.RENDERBUFFER,Dt,Gt,F.width,F.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ve,t.RENDERBUFFER,J.__webglColorRenderbuffer[Ve])}t.bindRenderbuffer(t.RENDERBUFFER,null),F.depthBuffer&&(J.__webglDepthRenderbuffer=t.createRenderbuffer(),$e(J.__webglDepthRenderbuffer,F,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(Se){n.bindTexture(t.TEXTURE_CUBE_MAP,xe.__webglTexture),Te(t.TEXTURE_CUBE_MAP,B,Qe);for(let Ne=0;Ne<6;Ne++)if(a&&B.mipmaps&&B.mipmaps.length>0)for(let Ve=0;Ve<B.mipmaps.length;Ve++)Pe(J.__webglFramebuffer[Ne][Ve],F,B,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,Ve);else Pe(J.__webglFramebuffer[Ne],F,B,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,0);_(B,Qe)&&A(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(we){const Ne=F.texture;for(let Ve=0,ct=Ne.length;Ve<ct;Ve++){const wt=Ne[Ve],Re=r.get(wt);n.bindTexture(t.TEXTURE_2D,Re.__webglTexture),Te(t.TEXTURE_2D,wt,Qe),Pe(J.__webglFramebuffer,F,wt,t.COLOR_ATTACHMENT0+Ve,t.TEXTURE_2D,0),_(wt,Qe)&&A(t.TEXTURE_2D)}n.unbindTexture()}else{let Ne=t.TEXTURE_2D;if((F.isWebGL3DRenderTarget||F.isWebGLArrayRenderTarget)&&(a?Ne=F.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(Ne,xe.__webglTexture),Te(Ne,B,Qe),a&&B.mipmaps&&B.mipmaps.length>0)for(let Ve=0;Ve<B.mipmaps.length;Ve++)Pe(J.__webglFramebuffer[Ve],F,B,t.COLOR_ATTACHMENT0,Ne,Ve);else Pe(J.__webglFramebuffer,F,B,t.COLOR_ATTACHMENT0,Ne,0);_(B,Qe)&&A(Ne),n.unbindTexture()}F.depthBuffer&&ce(F)}function he(F){const B=v(F)||a,J=F.isWebGLMultipleRenderTargets===!0?F.texture:[F.texture];for(let xe=0,Se=J.length;xe<Se;xe++){const we=J[xe];if(_(we,B)){const Qe=F.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,Ne=r.get(we).__webglTexture;n.bindTexture(Qe,Ne),A(Qe),n.unbindTexture()}}}function ie(F){if(a&&F.samples>0&&le(F)===!1){const B=F.isWebGLMultipleRenderTargets?F.texture:[F.texture],J=F.width,xe=F.height;let Se=t.COLOR_BUFFER_BIT;const we=[],Qe=F.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Ne=r.get(F),Ve=F.isWebGLMultipleRenderTargets===!0;if(Ve)for(let ct=0;ct<B.length;ct++)n.bindFramebuffer(t.FRAMEBUFFER,Ne.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+ct,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,Ne.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+ct,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,Ne.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Ne.__webglFramebuffer);for(let ct=0;ct<B.length;ct++){we.push(t.COLOR_ATTACHMENT0+ct),F.depthBuffer&&we.push(Qe);const wt=Ne.__ignoreDepthValues!==void 0?Ne.__ignoreDepthValues:!1;if(wt===!1&&(F.depthBuffer&&(Se|=t.DEPTH_BUFFER_BIT),F.stencilBuffer&&(Se|=t.STENCIL_BUFFER_BIT)),Ve&&t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,Ne.__webglColorRenderbuffer[ct]),wt===!0&&(t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[Qe]),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[Qe])),Ve){const Re=r.get(B[ct]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,Re,0)}t.blitFramebuffer(0,0,J,xe,0,0,J,xe,Se,t.NEAREST),c&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,we)}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),Ve)for(let ct=0;ct<B.length;ct++){n.bindFramebuffer(t.FRAMEBUFFER,Ne.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+ct,t.RENDERBUFFER,Ne.__webglColorRenderbuffer[ct]);const wt=r.get(B[ct]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,Ne.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+ct,t.TEXTURE_2D,wt,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Ne.__webglMultisampledFramebuffer)}}function ye(F){return Math.min(i.maxSamples,F.samples)}function le(F){const B=r.get(F);return a&&F.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&B.__useRenderToTexture!==!1}function be(F){const B=o.render.frame;u.get(F)!==B&&(u.set(F,B),F.update())}function Ee(F,B){const J=F.colorSpace,xe=F.format,Se=F.type;return F.isCompressedTexture===!0||F.isVideoTexture===!0||F.format===lx||J!==Go&&J!==Ki&&(ln.getTransfer(J)===gn?a===!1?e.has("EXT_sRGB")===!0&&xe===_i?(F.format=lx,F.minFilter=Sn,F.generateMipmaps=!1):B=CR.sRGBToLinear(B):(xe!==_i||Se!==No)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",J)),B}this.allocateTextureUnit=H,this.resetTextureUnits=j,this.setTexture2D=Z,this.setTexture2DArray=ae,this.setTexture3D=O,this.setTextureCube=W,this.rebindTextures=oe,this.setupRenderTarget=V,this.updateRenderTargetMipmap=he,this.updateMultisampleRenderTarget=ie,this.setupDepthRenderbuffer=ce,this.setupFrameBufferTexture=Pe,this.useMultisampledRTT=le}function v8(t,e,n){const r=n.isWebGL2;function i(s,o=Ki){let a;const l=ln.getTransfer(o);if(s===No)return t.UNSIGNED_BYTE;if(s===gR)return t.UNSIGNED_SHORT_4_4_4_4;if(s===yR)return t.UNSIGNED_SHORT_5_5_5_1;if(s===FV)return t.BYTE;if(s===kV)return t.SHORT;if(s===I1)return t.UNSIGNED_SHORT;if(s===mR)return t.INT;if(s===ma)return t.UNSIGNED_INT;if(s===bs)return t.FLOAT;if(s===Nf)return r?t.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===UV)return t.ALPHA;if(s===_i)return t.RGBA;if(s===VV)return t.LUMINANCE;if(s===zV)return t.LUMINANCE_ALPHA;if(s===Il)return t.DEPTH_COMPONENT;if(s===_u)return t.DEPTH_STENCIL;if(s===lx)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===HV)return t.RED;if(s===vR)return t.RED_INTEGER;if(s===GV)return t.RG;if(s===_R)return t.RG_INTEGER;if(s===xR)return t.RGBA_INTEGER;if(s===zv||s===Hv||s===Gv||s===jv)if(l===gn)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===zv)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===Hv)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Gv)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===jv)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===zv)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Hv)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Gv)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===jv)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===JT||s===qT||s===YT||s===QT)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===JT)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===qT)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===YT)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===QT)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===SR)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===ZT||s===eC)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===ZT)return l===gn?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===eC)return l===gn?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===tC||s===nC||s===rC||s===iC||s===sC||s===oC||s===aC||s===lC||s===cC||s===uC||s===hC||s===fC||s===dC||s===pC)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===tC)return l===gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===nC)return l===gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===rC)return l===gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===iC)return l===gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===sC)return l===gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===oC)return l===gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===aC)return l===gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===lC)return l===gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===cC)return l===gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===uC)return l===gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===hC)return l===gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===fC)return l===gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===dC)return l===gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===pC)return l===gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===Wv||s===mC||s===gC)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===Wv)return l===gn?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(s===mC)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(s===gC)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(s===jV||s===yC||s===vC||s===_C)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===Wv)return a.COMPRESSED_RED_RGTC1_EXT;if(s===yC)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===vC)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===_C)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===Pl?r?t.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):t[s]!==void 0?t[s]:null}return{convert:i}}class _8 extends wn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class ga extends Jt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Zle={type:"move"};class eE{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new ga,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new ga,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new k,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new k),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new ga,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new k,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new k),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const S of e.hand.values()){const v=n.getJointPose(S,r),g=this._getHandJoint(c,S);v!==null&&(g.matrix.fromArray(v.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=v.radius),g.visible=v!==null}const u=c.joints["index-finger-tip"],f=c.joints["thumb-tip"],p=u.position.distanceTo(f.position),m=.02,y=.005;c.inputState.pinching&&p>m+y?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&p<=m-y&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=n.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=n.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Zle)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new ga;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}const ece=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,tce=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class nce{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n,r){if(this.texture===null){const i=new Mn,s=e.properties.get(i);s.__webglTexture=n.texture,(n.depthNear!=r.depthNear||n.depthFar!=r.depthFar)&&(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=i}}render(e,n){if(this.texture!==null){if(this.mesh===null){const r=n.cameras[0].viewport,i=new io({extensions:{fragDepth:!0},vertexShader:ece,fragmentShader:tce,uniforms:{depthColor:{value:this.texture},depthWidth:{value:r.z},depthHeight:{value:r.w}}});this.mesh=new Yn(new sd(20,20),i)}e.render(this.mesh,n)}}reset(){this.texture=null,this.mesh=null}}class rce extends Wo{constructor(e,n){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,f=null,p=null,m=null,y=null;const S=new nce,v=n.getContextAttributes();let g=null,_=null;const A=[],E=[],b=new _e;let C=null;const P=new wn;P.layers.enable(1),P.viewport=new cn;const L=new wn;L.layers.enable(2),L.viewport=new cn;const N=[P,L],T=new _8;T.layers.enable(1),T.layers.enable(2);let D=null,z=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ne){let de=A[ne];return de===void 0&&(de=new eE,A[ne]=de),de.getTargetRaySpace()},this.getControllerGrip=function(ne){let de=A[ne];return de===void 0&&(de=new eE,A[ne]=de),de.getGripSpace()},this.getHand=function(ne){let de=A[ne];return de===void 0&&(de=new eE,A[ne]=de),de.getHandSpace()};function j(ne){const de=E.indexOf(ne.inputSource);if(de===-1)return;const Ae=A[de];Ae!==void 0&&(Ae.update(ne.inputSource,ne.frame,c||o),Ae.dispatchEvent({type:ne.type,data:ne.inputSource}))}function H(){i.removeEventListener("select",j),i.removeEventListener("selectstart",j),i.removeEventListener("selectend",j),i.removeEventListener("squeeze",j),i.removeEventListener("squeezestart",j),i.removeEventListener("squeezeend",j),i.removeEventListener("end",H),i.removeEventListener("inputsourceschange",q);for(let ne=0;ne<A.length;ne++){const de=E[ne];de!==null&&(E[ne]=null,A[ne].disconnect(de))}D=null,z=null,S.reset(),e.setRenderTarget(g),m=null,p=null,f=null,i=null,_=null,Te.stop(),r.isPresenting=!1,e.setPixelRatio(C),e.setSize(b.width,b.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ne){s=ne,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ne){a=ne,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(ne){c=ne},this.getBaseLayer=function(){return p!==null?p:m},this.getBinding=function(){return f},this.getFrame=function(){return y},this.getSession=function(){return i},this.setSession=async function(ne){if(i=ne,i!==null){if(g=e.getRenderTarget(),i.addEventListener("select",j),i.addEventListener("selectstart",j),i.addEventListener("selectend",j),i.addEventListener("squeeze",j),i.addEventListener("squeezestart",j),i.addEventListener("squeezeend",j),i.addEventListener("end",H),i.addEventListener("inputsourceschange",q),v.xrCompatible!==!0&&await n.makeXRCompatible(),C=e.getPixelRatio(),e.getSize(b),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const de={antialias:i.renderState.layers===void 0?v.antialias:!0,alpha:!0,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(i,n,de),i.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),_=new ro(m.framebufferWidth,m.framebufferHeight,{format:_i,type:No,colorSpace:e.outputColorSpace,stencilBuffer:v.stencil})}else{let de=null,Ae=null,Pe=null;v.depth&&(Pe=v.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,de=v.stencil?_u:Il,Ae=v.stencil?Pl:ma);const $e={colorFormat:n.RGBA8,depthFormat:Pe,scaleFactor:s};f=new XRWebGLBinding(i,n),p=f.createProjectionLayer($e),i.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),_=new ro(p.textureWidth,p.textureHeight,{format:_i,type:No,depthTexture:new BR(p.textureWidth,p.textureHeight,Ae,void 0,void 0,void 0,void 0,void 0,void 0,de),stencilBuffer:v.stencil,colorSpace:e.outputColorSpace,samples:v.antialias?4:0});const Ue=e.properties.get(_);Ue.__ignoreDepthValues=p.ignoreDepthValues}_.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await i.requestReferenceSpace(a),Te.setContext(i),Te.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function q(ne){for(let de=0;de<ne.removed.length;de++){const Ae=ne.removed[de],Pe=E.indexOf(Ae);Pe>=0&&(E[Pe]=null,A[Pe].disconnect(Ae))}for(let de=0;de<ne.added.length;de++){const Ae=ne.added[de];let Pe=E.indexOf(Ae);if(Pe===-1){for(let Ue=0;Ue<A.length;Ue++)if(Ue>=E.length){E.push(Ae),Pe=Ue;break}else if(E[Ue]===null){E[Ue]=Ae,Pe=Ue;break}if(Pe===-1)break}const $e=A[Pe];$e&&$e.connect(Ae)}}const Z=new k,ae=new k;function O(ne,de,Ae){Z.setFromMatrixPosition(de.matrixWorld),ae.setFromMatrixPosition(Ae.matrixWorld);const Pe=Z.distanceTo(ae),$e=de.projectionMatrix.elements,Ue=Ae.projectionMatrix.elements,ce=$e[14]/($e[10]-1),oe=$e[14]/($e[10]+1),V=($e[9]+1)/$e[5],he=($e[9]-1)/$e[5],ie=($e[8]-1)/$e[0],ye=(Ue[8]+1)/Ue[0],le=ce*ie,be=ce*ye,Ee=Pe/(-ie+ye),F=Ee*-ie;de.matrixWorld.decompose(ne.position,ne.quaternion,ne.scale),ne.translateX(F),ne.translateZ(Ee),ne.matrixWorld.compose(ne.position,ne.quaternion,ne.scale),ne.matrixWorldInverse.copy(ne.matrixWorld).invert();const B=ce+Ee,J=oe+Ee,xe=le-F,Se=be+(Pe-F),we=V*oe/J*B,Qe=he*oe/J*B;ne.projectionMatrix.makePerspective(xe,Se,we,Qe,B,J),ne.projectionMatrixInverse.copy(ne.projectionMatrix).invert()}function W(ne,de){de===null?ne.matrixWorld.copy(ne.matrix):ne.matrixWorld.multiplyMatrices(de.matrixWorld,ne.matrix),ne.matrixWorldInverse.copy(ne.matrixWorld).invert()}this.updateCamera=function(ne){if(i===null)return;S.texture!==null&&(ne.near=S.depthNear,ne.far=S.depthFar),T.near=L.near=P.near=ne.near,T.far=L.far=P.far=ne.far,(D!==T.near||z!==T.far)&&(i.updateRenderState({depthNear:T.near,depthFar:T.far}),D=T.near,z=T.far,P.near=D,P.far=z,L.near=D,L.far=z,P.updateProjectionMatrix(),L.updateProjectionMatrix(),ne.updateProjectionMatrix());const de=ne.parent,Ae=T.cameras;W(T,de);for(let Pe=0;Pe<Ae.length;Pe++)W(Ae[Pe],de);Ae.length===2?O(T,P,L):T.projectionMatrix.copy(P.projectionMatrix),K(ne,T,de)};function K(ne,de,Ae){Ae===null?ne.matrix.copy(de.matrixWorld):(ne.matrix.copy(Ae.matrixWorld),ne.matrix.invert(),ne.matrix.multiply(de.matrixWorld)),ne.matrix.decompose(ne.position,ne.quaternion,ne.scale),ne.updateMatrixWorld(!0),ne.projectionMatrix.copy(de.projectionMatrix),ne.projectionMatrixInverse.copy(de.projectionMatrixInverse),ne.isPerspectiveCamera&&(ne.fov=Ff*2*Math.atan(1/ne.projectionMatrix.elements[5]),ne.zoom=1)}this.getCamera=function(){return T},this.getFoveation=function(){if(!(p===null&&m===null))return l},this.setFoveation=function(ne){l=ne,p!==null&&(p.fixedFoveation=ne),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=ne)},this.hasDepthSensing=function(){return S.texture!==null};let Y=null;function te(ne,de){if(u=de.getViewerPose(c||o),y=de,u!==null){const Ae=u.views;m!==null&&(e.setRenderTargetFramebuffer(_,m.framebuffer),e.setRenderTarget(_));let Pe=!1;Ae.length!==T.cameras.length&&(T.cameras.length=0,Pe=!0);for(let Ue=0;Ue<Ae.length;Ue++){const ce=Ae[Ue];let oe=null;if(m!==null)oe=m.getViewport(ce);else{const he=f.getViewSubImage(p,ce);oe=he.viewport,Ue===0&&(e.setRenderTargetTextures(_,he.colorTexture,p.ignoreDepthValues?void 0:he.depthStencilTexture),e.setRenderTarget(_))}let V=N[Ue];V===void 0&&(V=new wn,V.layers.enable(Ue),V.viewport=new cn,N[Ue]=V),V.matrix.fromArray(ce.transform.matrix),V.matrix.decompose(V.position,V.quaternion,V.scale),V.projectionMatrix.fromArray(ce.projectionMatrix),V.projectionMatrixInverse.copy(V.projectionMatrix).invert(),V.viewport.set(oe.x,oe.y,oe.width,oe.height),Ue===0&&(T.matrix.copy(V.matrix),T.matrix.decompose(T.position,T.quaternion,T.scale)),Pe===!0&&T.cameras.push(V)}const $e=i.enabledFeatures;if($e&&$e.includes("depth-sensing")){const Ue=f.getDepthInformation(Ae[0]);Ue&&Ue.isValid&&Ue.texture&&S.init(e,Ue,i.renderState)}}for(let Ae=0;Ae<A.length;Ae++){const Pe=E[Ae],$e=A[Ae];Pe!==null&&$e!==void 0&&$e.update(Pe,de,c||o)}S.render(e,T),Y&&Y(ne,de),de.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:de}),y=null}const Te=new f8;Te.setAnimationLoop(te),this.setAnimationLoop=function(ne){Y=ne},this.dispose=function(){}}}function ice(t,e){function n(v,g){v.matrixAutoUpdate===!0&&v.updateMatrix(),g.value.copy(v.matrix)}function r(v,g){g.color.getRGB(v.fogColor.value,u8(t)),g.isFog?(v.fogNear.value=g.near,v.fogFar.value=g.far):g.isFogExp2&&(v.fogDensity.value=g.density)}function i(v,g,_,A,E){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(v,g):g.isMeshToonMaterial?(s(v,g),f(v,g)):g.isMeshPhongMaterial?(s(v,g),u(v,g)):g.isMeshStandardMaterial?(s(v,g),p(v,g),g.isMeshPhysicalMaterial&&m(v,g,E)):g.isMeshMatcapMaterial?(s(v,g),y(v,g)):g.isMeshDepthMaterial?s(v,g):g.isMeshDistanceMaterial?(s(v,g),S(v,g)):g.isMeshNormalMaterial?s(v,g):g.isLineBasicMaterial?(o(v,g),g.isLineDashedMaterial&&a(v,g)):g.isPointsMaterial?l(v,g,_,A):g.isSpriteMaterial?c(v,g):g.isShadowMaterial?(v.color.value.copy(g.color),v.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function s(v,g){v.opacity.value=g.opacity,g.color&&v.diffuse.value.copy(g.color),g.emissive&&v.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(v.map.value=g.map,n(g.map,v.mapTransform)),g.alphaMap&&(v.alphaMap.value=g.alphaMap,n(g.alphaMap,v.alphaMapTransform)),g.bumpMap&&(v.bumpMap.value=g.bumpMap,n(g.bumpMap,v.bumpMapTransform),v.bumpScale.value=g.bumpScale,g.side===wi&&(v.bumpScale.value*=-1)),g.normalMap&&(v.normalMap.value=g.normalMap,n(g.normalMap,v.normalMapTransform),v.normalScale.value.copy(g.normalScale),g.side===wi&&v.normalScale.value.negate()),g.displacementMap&&(v.displacementMap.value=g.displacementMap,n(g.displacementMap,v.displacementMapTransform),v.displacementScale.value=g.displacementScale,v.displacementBias.value=g.displacementBias),g.emissiveMap&&(v.emissiveMap.value=g.emissiveMap,n(g.emissiveMap,v.emissiveMapTransform)),g.specularMap&&(v.specularMap.value=g.specularMap,n(g.specularMap,v.specularMapTransform)),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest);const _=e.get(g).envMap;if(_&&(v.envMap.value=_,v.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,v.reflectivity.value=g.reflectivity,v.ior.value=g.ior,v.refractionRatio.value=g.refractionRatio),g.lightMap){v.lightMap.value=g.lightMap;const A=t._useLegacyLights===!0?Math.PI:1;v.lightMapIntensity.value=g.lightMapIntensity*A,n(g.lightMap,v.lightMapTransform)}g.aoMap&&(v.aoMap.value=g.aoMap,v.aoMapIntensity.value=g.aoMapIntensity,n(g.aoMap,v.aoMapTransform))}function o(v,g){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,g.map&&(v.map.value=g.map,n(g.map,v.mapTransform))}function a(v,g){v.dashSize.value=g.dashSize,v.totalSize.value=g.dashSize+g.gapSize,v.scale.value=g.scale}function l(v,g,_,A){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,v.size.value=g.size*_,v.scale.value=A*.5,g.map&&(v.map.value=g.map,n(g.map,v.uvTransform)),g.alphaMap&&(v.alphaMap.value=g.alphaMap,n(g.alphaMap,v.alphaMapTransform)),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest)}function c(v,g){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,v.rotation.value=g.rotation,g.map&&(v.map.value=g.map,n(g.map,v.mapTransform)),g.alphaMap&&(v.alphaMap.value=g.alphaMap,n(g.alphaMap,v.alphaMapTransform)),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest)}function u(v,g){v.specular.value.copy(g.specular),v.shininess.value=Math.max(g.shininess,1e-4)}function f(v,g){g.gradientMap&&(v.gradientMap.value=g.gradientMap)}function p(v,g){v.metalness.value=g.metalness,g.metalnessMap&&(v.metalnessMap.value=g.metalnessMap,n(g.metalnessMap,v.metalnessMapTransform)),v.roughness.value=g.roughness,g.roughnessMap&&(v.roughnessMap.value=g.roughnessMap,n(g.roughnessMap,v.roughnessMapTransform)),e.get(g).envMap&&(v.envMapIntensity.value=g.envMapIntensity)}function m(v,g,_){v.ior.value=g.ior,g.sheen>0&&(v.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),v.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(v.sheenColorMap.value=g.sheenColorMap,n(g.sheenColorMap,v.sheenColorMapTransform)),g.sheenRoughnessMap&&(v.sheenRoughnessMap.value=g.sheenRoughnessMap,n(g.sheenRoughnessMap,v.sheenRoughnessMapTransform))),g.clearcoat>0&&(v.clearcoat.value=g.clearcoat,v.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(v.clearcoatMap.value=g.clearcoatMap,n(g.clearcoatMap,v.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,n(g.clearcoatRoughnessMap,v.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(v.clearcoatNormalMap.value=g.clearcoatNormalMap,n(g.clearcoatNormalMap,v.clearcoatNormalMapTransform),v.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===wi&&v.clearcoatNormalScale.value.negate())),g.iridescence>0&&(v.iridescence.value=g.iridescence,v.iridescenceIOR.value=g.iridescenceIOR,v.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],v.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(v.iridescenceMap.value=g.iridescenceMap,n(g.iridescenceMap,v.iridescenceMapTransform)),g.iridescenceThicknessMap&&(v.iridescenceThicknessMap.value=g.iridescenceThicknessMap,n(g.iridescenceThicknessMap,v.iridescenceThicknessMapTransform))),g.transmission>0&&(v.transmission.value=g.transmission,v.transmissionSamplerMap.value=_.texture,v.transmissionSamplerSize.value.set(_.width,_.height),g.transmissionMap&&(v.transmissionMap.value=g.transmissionMap,n(g.transmissionMap,v.transmissionMapTransform)),v.thickness.value=g.thickness,g.thicknessMap&&(v.thicknessMap.value=g.thicknessMap,n(g.thicknessMap,v.thicknessMapTransform)),v.attenuationDistance.value=g.attenuationDistance,v.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(v.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(v.anisotropyMap.value=g.anisotropyMap,n(g.anisotropyMap,v.anisotropyMapTransform))),v.specularIntensity.value=g.specularIntensity,v.specularColor.value.copy(g.specularColor),g.specularColorMap&&(v.specularColorMap.value=g.specularColorMap,n(g.specularColorMap,v.specularColorMapTransform)),g.specularIntensityMap&&(v.specularIntensityMap.value=g.specularIntensityMap,n(g.specularIntensityMap,v.specularIntensityMapTransform))}function y(v,g){g.matcap&&(v.matcap.value=g.matcap)}function S(v,g){const _=e.get(g).light;v.referencePosition.value.setFromMatrixPosition(_.matrixWorld),v.nearDistance.value=_.shadow.camera.near,v.farDistance.value=_.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function sce(t,e,n,r){let i={},s={},o=[];const a=n.isWebGL2?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(_,A){const E=A.program;r.uniformBlockBinding(_,E)}function c(_,A){let E=i[_.id];E===void 0&&(y(_),E=u(_),i[_.id]=E,_.addEventListener("dispose",v));const b=A.program;r.updateUBOMapping(_,b);const C=e.render.frame;s[_.id]!==C&&(p(_),s[_.id]=C)}function u(_){const A=f();_.__bindingPointIndex=A;const E=t.createBuffer(),b=_.__size,C=_.usage;return t.bindBuffer(t.UNIFORM_BUFFER,E),t.bufferData(t.UNIFORM_BUFFER,b,C),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,A,E),E}function f(){for(let _=0;_<a;_++)if(o.indexOf(_)===-1)return o.push(_),_;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(_){const A=i[_.id],E=_.uniforms,b=_.__cache;t.bindBuffer(t.UNIFORM_BUFFER,A);for(let C=0,P=E.length;C<P;C++){const L=Array.isArray(E[C])?E[C]:[E[C]];for(let N=0,T=L.length;N<T;N++){const D=L[N];if(m(D,C,N,b)===!0){const z=D.__offset,j=Array.isArray(D.value)?D.value:[D.value];let H=0;for(let q=0;q<j.length;q++){const Z=j[q],ae=S(Z);typeof Z=="number"||typeof Z=="boolean"?(D.__data[0]=Z,t.bufferSubData(t.UNIFORM_BUFFER,z+H,D.__data)):Z.isMatrix3?(D.__data[0]=Z.elements[0],D.__data[1]=Z.elements[1],D.__data[2]=Z.elements[2],D.__data[3]=0,D.__data[4]=Z.elements[3],D.__data[5]=Z.elements[4],D.__data[6]=Z.elements[5],D.__data[7]=0,D.__data[8]=Z.elements[6],D.__data[9]=Z.elements[7],D.__data[10]=Z.elements[8],D.__data[11]=0):(Z.toArray(D.__data,H),H+=ae.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,z,D.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function m(_,A,E,b){const C=_.value,P=A+"_"+E;if(b[P]===void 0)return typeof C=="number"||typeof C=="boolean"?b[P]=C:b[P]=C.clone(),!0;{const L=b[P];if(typeof C=="number"||typeof C=="boolean"){if(L!==C)return b[P]=C,!0}else if(L.equals(C)===!1)return L.copy(C),!0}return!1}function y(_){const A=_.uniforms;let E=0;const b=16;for(let P=0,L=A.length;P<L;P++){const N=Array.isArray(A[P])?A[P]:[A[P]];for(let T=0,D=N.length;T<D;T++){const z=N[T],j=Array.isArray(z.value)?z.value:[z.value];for(let H=0,q=j.length;H<q;H++){const Z=j[H],ae=S(Z),O=E%b;O!==0&&b-O<ae.boundary&&(E+=b-O),z.__data=new Float32Array(ae.storage/Float32Array.BYTES_PER_ELEMENT),z.__offset=E,E+=ae.storage}}}const C=E%b;return C>0&&(E+=b-C),_.__size=E,_.__cache={},this}function S(_){const A={boundary:0,storage:0};return typeof _=="number"||typeof _=="boolean"?(A.boundary=4,A.storage=4):_.isVector2?(A.boundary=8,A.storage=8):_.isVector3||_.isColor?(A.boundary=16,A.storage=12):_.isVector4?(A.boundary=16,A.storage=16):_.isMatrix3?(A.boundary=48,A.storage=48):_.isMatrix4?(A.boundary=64,A.storage=64):_.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",_),A}function v(_){const A=_.target;A.removeEventListener("dispose",v);const E=o.indexOf(A.__bindingPointIndex);o.splice(E,1),t.deleteBuffer(i[A.id]),delete i[A.id],delete s[A.id]}function g(){for(const _ in i)t.deleteBuffer(i[_]);o=[],i={},s={}}return{bind:l,update:c,dispose:g}}class FR{constructor(e={}){const{canvas:n=a8(),context:r=null,depth:i=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:f=!1}=e;this.isWebGLRenderer=!0;let p;r!==null?p=r.getContextAttributes().alpha:p=o;const m=new Uint32Array(4),y=new Int32Array(4);let S=null,v=null;const g=[],_=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=fr,this._useLegacyLights=!1,this.toneMapping=Bo,this.toneMappingExposure=1;const A=this;let E=!1,b=0,C=0,P=null,L=-1,N=null;const T=new cn,D=new cn;let z=null;const j=new ze(0);let H=0,q=n.width,Z=n.height,ae=1,O=null,W=null;const K=new cn(0,0,q,Z),Y=new cn(0,0,q,Z);let te=!1;const Te=new Ig;let ne=!1,de=!1,Ae=null;const Pe=new ft,$e=new _e,Ue=new k,ce={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function oe(){return P===null?ae:1}let V=r;function he(U,se){for(let pe=0;pe<U.length;pe++){const me=U[pe],fe=n.getContext(me,se);if(fe!==null)return fe}return null}try{const U={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:f};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${Mg}`),n.addEventListener("webglcontextlost",_t,!1),n.addEventListener("webglcontextrestored",X,!1),n.addEventListener("webglcontextcreationerror",Ie,!1),V===null){const se=["webgl2","webgl","experimental-webgl"];if(A.isWebGL1Renderer===!0&&se.shift(),V=he(se,U),V===null)throw he(se)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&V instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),V.getShaderPrecisionFormat===void 0&&(V.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(U){throw console.error("THREE.WebGLRenderer: "+U.message),U}let ie,ye,le,be,Ee,F,B,J,xe,Se,we,Qe,Ne,Ve,ct,wt,Re,Gt,Dt,vt,lt,Ye,Q,Me;function Ge(){ie=new gae(V),ye=new uae(V,ie,e),ie.init(ye),Ye=new v8(V,ie,ye),le=new Yle(V,ie,ye),be=new _ae(V),Ee=new Ule,F=new Qle(V,ie,le,Ee,ye,Ye,be),B=new fae(A),J=new mae(A),xe=new Cie(V,ye),Q=new lae(V,ie,xe,ye),Se=new yae(V,xe,be,Q),we=new wae(V,Se,xe,be),Dt=new Aae(V,ye,F),wt=new hae(Ee),Qe=new kle(A,B,J,ie,ye,Q,wt),Ne=new ice(A,Ee),Ve=new zle,ct=new Kle(ie,ye),Gt=new aae(A,B,J,le,we,p,l),Re=new qle(A,we,ye),Me=new sce(V,be,ye,le),vt=new cae(V,ie,be,ye),lt=new vae(V,ie,be,ye),be.programs=Qe.programs,A.capabilities=ye,A.extensions=ie,A.properties=Ee,A.renderLists=Ve,A.shadowMap=Re,A.state=le,A.info=be}Ge();const Je=new rce(A,V);this.xr=Je,this.getContext=function(){return V},this.getContextAttributes=function(){return V.getContextAttributes()},this.forceContextLoss=function(){const U=ie.get("WEBGL_lose_context");U&&U.loseContext()},this.forceContextRestore=function(){const U=ie.get("WEBGL_lose_context");U&&U.restoreContext()},this.getPixelRatio=function(){return ae},this.setPixelRatio=function(U){U!==void 0&&(ae=U,this.setSize(q,Z,!1))},this.getSize=function(U){return U.set(q,Z)},this.setSize=function(U,se,pe=!0){if(Je.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}q=U,Z=se,n.width=Math.floor(U*ae),n.height=Math.floor(se*ae),pe===!0&&(n.style.width=U+"px",n.style.height=se+"px"),this.setViewport(0,0,U,se)},this.getDrawingBufferSize=function(U){return U.set(q*ae,Z*ae).floor()},this.setDrawingBufferSize=function(U,se,pe){q=U,Z=se,ae=pe,n.width=Math.floor(U*pe),n.height=Math.floor(se*pe),this.setViewport(0,0,U,se)},this.getCurrentViewport=function(U){return U.copy(T)},this.getViewport=function(U){return U.copy(K)},this.setViewport=function(U,se,pe,me){U.isVector4?K.set(U.x,U.y,U.z,U.w):K.set(U,se,pe,me),le.viewport(T.copy(K).multiplyScalar(ae).floor())},this.getScissor=function(U){return U.copy(Y)},this.setScissor=function(U,se,pe,me){U.isVector4?Y.set(U.x,U.y,U.z,U.w):Y.set(U,se,pe,me),le.scissor(D.copy(Y).multiplyScalar(ae).floor())},this.getScissorTest=function(){return te},this.setScissorTest=function(U){le.setScissorTest(te=U)},this.setOpaqueSort=function(U){O=U},this.setTransparentSort=function(U){W=U},this.getClearColor=function(U){return U.copy(Gt.getClearColor())},this.setClearColor=function(){Gt.setClearColor.apply(Gt,arguments)},this.getClearAlpha=function(){return Gt.getClearAlpha()},this.setClearAlpha=function(){Gt.setClearAlpha.apply(Gt,arguments)},this.clear=function(U=!0,se=!0,pe=!0){let me=0;if(U){let fe=!1;if(P!==null){const qe=P.texture.format;fe=qe===xR||qe===_R||qe===vR}if(fe){const qe=P.texture.type,ot=qe===No||qe===ma||qe===I1||qe===Pl||qe===gR||qe===yR,dt=Gt.getClearColor(),mt=Gt.getClearAlpha(),Et=dt.r,At=dt.g,Mt=dt.b;ot?(m[0]=Et,m[1]=At,m[2]=Mt,m[3]=mt,V.clearBufferuiv(V.COLOR,0,m)):(y[0]=Et,y[1]=At,y[2]=Mt,y[3]=mt,V.clearBufferiv(V.COLOR,0,y))}else me|=V.COLOR_BUFFER_BIT}se&&(me|=V.DEPTH_BUFFER_BIT),pe&&(me|=V.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),V.clear(me)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",_t,!1),n.removeEventListener("webglcontextrestored",X,!1),n.removeEventListener("webglcontextcreationerror",Ie,!1),Ve.dispose(),ct.dispose(),Ee.dispose(),B.dispose(),J.dispose(),we.dispose(),Q.dispose(),Me.dispose(),Qe.dispose(),Je.dispose(),Je.removeEventListener("sessionstart",Xn),Je.removeEventListener("sessionend",Yt),Ae&&(Ae.dispose(),Ae=null),Rr.stop()};function _t(U){U.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),E=!0}function X(){console.log("THREE.WebGLRenderer: Context Restored."),E=!1;const U=be.autoReset,se=Re.enabled,pe=Re.autoUpdate,me=Re.needsUpdate,fe=Re.type;Ge(),be.autoReset=U,Re.enabled=se,Re.autoUpdate=pe,Re.needsUpdate=me,Re.type=fe}function Ie(U){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",U.statusMessage)}function Be(U){const se=U.target;se.removeEventListener("dispose",Be),nt(se)}function nt(U){rt(U),Ee.remove(U)}function rt(U){const se=Ee.get(U).programs;se!==void 0&&(se.forEach(function(pe){Qe.releaseProgram(pe)}),U.isShaderMaterial&&Qe.releaseShaderCache(U))}this.renderBufferDirect=function(U,se,pe,me,fe,qe){se===null&&(se=ce);const ot=fe.isMesh&&fe.matrixWorld.determinant()<0,dt=vS(U,se,pe,me,fe);le.setMaterial(me,ot);let mt=pe.index,Et=1;if(me.wireframe===!0){if(mt=Se.getWireframeAttribute(pe),mt===void 0)return;Et=2}const At=pe.drawRange,Mt=pe.attributes.position;let Rn=At.start*Et,Pr=(At.start+At.count)*Et;qe!==null&&(Rn=Math.max(Rn,qe.start*Et),Pr=Math.min(Pr,(qe.start+qe.count)*Et)),mt!==null?(Rn=Math.max(Rn,0),Pr=Math.min(Pr,mt.count)):Mt!=null&&(Rn=Math.max(Rn,0),Pr=Math.min(Pr,Mt.count));const vn=Pr-Rn;if(vn<0||vn===1/0)return;Q.setup(fe,me,dt,pe,mt);let yr,gt=vt;if(mt!==null&&(yr=xe.get(mt),gt=lt,gt.setIndex(yr)),fe.isMesh)me.wireframe===!0?(le.setLineWidth(me.wireframeLinewidth*oe()),gt.setMode(V.LINES)):gt.setMode(V.TRIANGLES);else if(fe.isLine){let et=me.linewidth;et===void 0&&(et=1),le.setLineWidth(et*oe()),fe.isLineSegments?gt.setMode(V.LINES):fe.isLineLoop?gt.setMode(V.LINE_LOOP):gt.setMode(V.LINE_STRIP)}else fe.isPoints?gt.setMode(V.POINTS):fe.isSprite&&gt.setMode(V.TRIANGLES);if(fe.isBatchedMesh)gt.renderMultiDraw(fe._multiDrawStarts,fe._multiDrawCounts,fe._multiDrawCount);else if(fe.isInstancedMesh)gt.renderInstances(Rn,vn,fe.count);else if(pe.isInstancedBufferGeometry){const et=pe._maxInstanceCount!==void 0?pe._maxInstanceCount:1/0,cs=Math.min(pe.instanceCount,et);gt.renderInstances(Rn,vn,cs)}else gt.render(Rn,vn)};function Bt(U,se,pe){U.transparent===!0&&U.side===Cs&&U.forceSinglePass===!1?(U.side=wi,U.needsUpdate=!0,Ou(U,se,pe),U.side=Ho,U.needsUpdate=!0,Ou(U,se,pe),U.side=Cs):Ou(U,se,pe)}this.compile=function(U,se,pe=null){pe===null&&(pe=U),v=ct.get(pe),v.init(),_.push(v),pe.traverseVisible(function(fe){fe.isLight&&fe.layers.test(se.layers)&&(v.pushLight(fe),fe.castShadow&&v.pushShadow(fe))}),U!==pe&&U.traverseVisible(function(fe){fe.isLight&&fe.layers.test(se.layers)&&(v.pushLight(fe),fe.castShadow&&v.pushShadow(fe))}),v.setupLights(A._useLegacyLights);const me=new Set;return U.traverse(function(fe){const qe=fe.material;if(qe)if(Array.isArray(qe))for(let ot=0;ot<qe.length;ot++){const dt=qe[ot];Bt(dt,pe,fe),me.add(dt)}else Bt(qe,pe,fe),me.add(qe)}),_.pop(),v=null,me},this.compileAsync=function(U,se,pe=null){const me=this.compile(U,se,pe);return new Promise(fe=>{function qe(){if(me.forEach(function(ot){Ee.get(ot).currentProgram.isReady()&&me.delete(ot)}),me.size===0){fe(U);return}setTimeout(qe,10)}ie.get("KHR_parallel_shader_compile")!==null?qe():setTimeout(qe,10)})};let Wt=null;function mn(U){Wt&&Wt(U)}function Xn(){Rr.stop()}function Yt(){Rr.start()}const Rr=new f8;Rr.setAnimationLoop(mn),typeof self<"u"&&Rr.setContext(self),this.setAnimationLoop=function(U){Wt=U,Je.setAnimationLoop(U),U===null?Rr.stop():Rr.start()},Je.addEventListener("sessionstart",Xn),Je.addEventListener("sessionend",Yt),this.render=function(U,se){if(se!==void 0&&se.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(E===!0)return;U.matrixWorldAutoUpdate===!0&&U.updateMatrixWorld(),se.parent===null&&se.matrixWorldAutoUpdate===!0&&se.updateMatrixWorld(),Je.enabled===!0&&Je.isPresenting===!0&&(Je.cameraAutoUpdate===!0&&Je.updateCamera(se),se=Je.getCamera()),U.isScene===!0&&U.onBeforeRender(A,U,se,P),v=ct.get(U,_.length),v.init(),_.push(v),Pe.multiplyMatrices(se.projectionMatrix,se.matrixWorldInverse),Te.setFromProjectionMatrix(Pe),de=this.localClippingEnabled,ne=wt.init(this.clippingPlanes,de),S=Ve.get(U,g.length),S.init(),g.push(S),ls(U,se,0,A.sortObjects),S.finish(),A.sortObjects===!0&&S.sort(O,W),this.info.render.frame++,ne===!0&&wt.beginShadows();const pe=v.state.shadowsArray;if(Re.render(pe,U,se),ne===!0&&wt.endShadows(),this.info.autoReset===!0&&this.info.reset(),(Je.enabled===!1||Je.isPresenting===!1||Je.hasDepthSensing()===!1)&&Gt.render(S,U),v.setupLights(A._useLegacyLights),se.isArrayCamera){const me=se.cameras;for(let fe=0,qe=me.length;fe<qe;fe++){const ot=me[fe];cd(S,U,ot,ot.viewport)}}else cd(S,U,se);P!==null&&(F.updateMultisampleRenderTarget(P),F.updateRenderTargetMipmap(P)),U.isScene===!0&&U.onAfterRender(A,U,se),Q.resetDefaultState(),L=-1,N=null,_.pop(),_.length>0?v=_[_.length-1]:v=null,g.pop(),g.length>0?S=g[g.length-1]:S=null};function ls(U,se,pe,me){if(U.visible===!1)return;if(U.layers.test(se.layers)){if(U.isGroup)pe=U.renderOrder;else if(U.isLOD)U.autoUpdate===!0&&U.update(se);else if(U.isLight)v.pushLight(U),U.castShadow&&v.pushShadow(U);else if(U.isSprite){if(!U.frustumCulled||Te.intersectsSprite(U)){me&&Ue.setFromMatrixPosition(U.matrixWorld).applyMatrix4(Pe);const ot=we.update(U),dt=U.material;dt.visible&&S.push(U,ot,dt,pe,Ue.z,null)}}else if((U.isMesh||U.isLine||U.isPoints)&&(!U.frustumCulled||Te.intersectsObject(U))){const ot=we.update(U),dt=U.material;if(me&&(U.boundingSphere!==void 0?(U.boundingSphere===null&&U.computeBoundingSphere(),Ue.copy(U.boundingSphere.center)):(ot.boundingSphere===null&&ot.computeBoundingSphere(),Ue.copy(ot.boundingSphere.center)),Ue.applyMatrix4(U.matrixWorld).applyMatrix4(Pe)),Array.isArray(dt)){const mt=ot.groups;for(let Et=0,At=mt.length;Et<At;Et++){const Mt=mt[Et],Rn=dt[Mt.materialIndex];Rn&&Rn.visible&&S.push(U,ot,Rn,pe,Ue.z,Mt)}}else dt.visible&&S.push(U,ot,dt,pe,Ue.z,null)}}const qe=U.children;for(let ot=0,dt=qe.length;ot<dt;ot++)ls(qe[ot],se,pe,me)}function cd(U,se,pe,me){const fe=U.opaque,qe=U.transmissive,ot=U.transparent;v.setupLightsView(pe),ne===!0&&wt.setGlobalState(A.clippingPlanes,pe),qe.length>0&&ud(fe,qe,se,pe),me&&le.viewport(T.copy(me)),fe.length>0&&Nu(fe,se,pe),qe.length>0&&Nu(qe,se,pe),ot.length>0&&Nu(ot,se,pe),le.buffers.depth.setTest(!0),le.buffers.depth.setMask(!0),le.buffers.color.setMask(!0),le.setPolygonOffset(!1)}function ud(U,se,pe,me){if((pe.isScene===!0?pe.overrideMaterial:null)!==null)return;const qe=ye.isWebGL2;Ae===null&&(Ae=new ro(1,1,{generateMipmaps:!0,type:ie.has("EXT_color_buffer_half_float")?Nf:No,minFilter:Is,samples:qe?4:0})),A.getDrawingBufferSize($e),qe?Ae.setSize($e.x,$e.y):Ae.setSize(cx($e.x),cx($e.y));const ot=A.getRenderTarget();A.setRenderTarget(Ae),A.getClearColor(j),H=A.getClearAlpha(),H<1&&A.setClearColor(16777215,.5),A.clear();const dt=A.toneMapping;A.toneMapping=Bo,Nu(U,pe,me),F.updateMultisampleRenderTarget(Ae),F.updateRenderTargetMipmap(Ae);let mt=!1;for(let Et=0,At=se.length;Et<At;Et++){const Mt=se[Et],Rn=Mt.object,Pr=Mt.geometry,vn=Mt.material,yr=Mt.group;if(vn.side===Cs&&Rn.layers.test(me.layers)){const gt=vn.side;vn.side=wi,vn.needsUpdate=!0,Ba(Rn,pe,me,Pr,vn,yr),vn.side=gt,vn.needsUpdate=!0,mt=!0}}mt===!0&&(F.updateMultisampleRenderTarget(Ae),F.updateRenderTargetMipmap(Ae)),A.setRenderTarget(ot),A.setClearColor(j,H),A.toneMapping=dt}function Nu(U,se,pe){const me=se.isScene===!0?se.overrideMaterial:null;for(let fe=0,qe=U.length;fe<qe;fe++){const ot=U[fe],dt=ot.object,mt=ot.geometry,Et=me===null?ot.material:me,At=ot.group;dt.layers.test(pe.layers)&&Ba(dt,se,pe,mt,Et,At)}}function Ba(U,se,pe,me,fe,qe){U.onBeforeRender(A,se,pe,me,fe,qe),U.modelViewMatrix.multiplyMatrices(pe.matrixWorldInverse,U.matrixWorld),U.normalMatrix.getNormalMatrix(U.modelViewMatrix),fe.onBeforeRender(A,se,pe,me,U,qe),fe.transparent===!0&&fe.side===Cs&&fe.forceSinglePass===!1?(fe.side=wi,fe.needsUpdate=!0,A.renderBufferDirect(pe,se,me,fe,U,qe),fe.side=Ho,fe.needsUpdate=!0,A.renderBufferDirect(pe,se,me,fe,U,qe),fe.side=Cs):A.renderBufferDirect(pe,se,me,fe,U,qe),U.onAfterRender(A,se,pe,me,fe,qe)}function Ou(U,se,pe){se.isScene!==!0&&(se=ce);const me=Ee.get(U),fe=v.state.lights,qe=v.state.shadowsArray,ot=fe.state.version,dt=Qe.getParameters(U,fe.state,qe,se,pe),mt=Qe.getProgramCacheKey(dt);let Et=me.programs;me.environment=U.isMeshStandardMaterial?se.environment:null,me.fog=se.fog,me.envMap=(U.isMeshStandardMaterial?J:B).get(U.envMap||me.environment),Et===void 0&&(U.addEventListener("dispose",Be),Et=new Map,me.programs=Et);let At=Et.get(mt);if(At!==void 0){if(me.currentProgram===At&&me.lightsStateVersion===ot)return qg(U,dt),At}else dt.uniforms=Qe.getUniforms(U),U.onBuild(pe,dt,A),U.onBeforeCompile(dt,A),At=Qe.acquireProgram(dt,mt),Et.set(mt,At),me.uniforms=dt.uniforms;const Mt=me.uniforms;return(!U.isShaderMaterial&&!U.isRawShaderMaterial||U.clipping===!0)&&(Mt.clippingPlanes=wt.uniform),qg(U,dt),me.needsLights=xS(U),me.lightsStateVersion=ot,me.needsLights&&(Mt.ambientLightColor.value=fe.state.ambient,Mt.lightProbe.value=fe.state.probe,Mt.directionalLights.value=fe.state.directional,Mt.directionalLightShadows.value=fe.state.directionalShadow,Mt.spotLights.value=fe.state.spot,Mt.spotLightShadows.value=fe.state.spotShadow,Mt.rectAreaLights.value=fe.state.rectArea,Mt.ltc_1.value=fe.state.rectAreaLTC1,Mt.ltc_2.value=fe.state.rectAreaLTC2,Mt.pointLights.value=fe.state.point,Mt.pointLightShadows.value=fe.state.pointShadow,Mt.hemisphereLights.value=fe.state.hemi,Mt.directionalShadowMap.value=fe.state.directionalShadowMap,Mt.directionalShadowMatrix.value=fe.state.directionalShadowMatrix,Mt.spotShadowMap.value=fe.state.spotShadowMap,Mt.spotLightMatrix.value=fe.state.spotLightMatrix,Mt.spotLightMap.value=fe.state.spotLightMap,Mt.pointShadowMap.value=fe.state.pointShadowMap,Mt.pointShadowMatrix.value=fe.state.pointShadowMatrix),me.currentProgram=At,me.uniformsList=null,At}function Jg(U){if(U.uniformsList===null){const se=U.currentProgram.getUniforms();U.uniformsList=Kv.seqWithValue(se.seq,U.uniforms)}return U.uniformsList}function qg(U,se){const pe=Ee.get(U);pe.outputColorSpace=se.outputColorSpace,pe.batching=se.batching,pe.instancing=se.instancing,pe.instancingColor=se.instancingColor,pe.skinning=se.skinning,pe.morphTargets=se.morphTargets,pe.morphNormals=se.morphNormals,pe.morphColors=se.morphColors,pe.morphTargetsCount=se.morphTargetsCount,pe.numClippingPlanes=se.numClippingPlanes,pe.numIntersection=se.numClipIntersection,pe.vertexAlphas=se.vertexAlphas,pe.vertexTangents=se.vertexTangents,pe.toneMapping=se.toneMapping}function vS(U,se,pe,me,fe){se.isScene!==!0&&(se=ce),F.resetTextureUnits();const qe=se.fog,ot=me.isMeshStandardMaterial?se.environment:null,dt=P===null?A.outputColorSpace:P.isXRRenderTarget===!0?P.texture.colorSpace:Go,mt=(me.isMeshStandardMaterial?J:B).get(me.envMap||ot),Et=me.vertexColors===!0&&!!pe.attributes.color&&pe.attributes.color.itemSize===4,At=!!pe.attributes.tangent&&(!!me.normalMap||me.anisotropy>0),Mt=!!pe.morphAttributes.position,Rn=!!pe.morphAttributes.normal,Pr=!!pe.morphAttributes.color;let vn=Bo;me.toneMapped&&(P===null||P.isXRRenderTarget===!0)&&(vn=A.toneMapping);const yr=pe.morphAttributes.position||pe.morphAttributes.normal||pe.morphAttributes.color,gt=yr!==void 0?yr.length:0,et=Ee.get(me),cs=v.state.lights;if(ne===!0&&(de===!0||U!==N)){const Ir=U===N&&me.id===L;wt.setState(me,U,Ir)}let Ut=!1;me.version===et.__version?(et.needsLights&&et.lightsStateVersion!==cs.state.version||et.outputColorSpace!==dt||fe.isBatchedMesh&&et.batching===!1||!fe.isBatchedMesh&&et.batching===!0||fe.isInstancedMesh&&et.instancing===!1||!fe.isInstancedMesh&&et.instancing===!0||fe.isSkinnedMesh&&et.skinning===!1||!fe.isSkinnedMesh&&et.skinning===!0||fe.isInstancedMesh&&et.instancingColor===!0&&fe.instanceColor===null||fe.isInstancedMesh&&et.instancingColor===!1&&fe.instanceColor!==null||et.envMap!==mt||me.fog===!0&&et.fog!==qe||et.numClippingPlanes!==void 0&&(et.numClippingPlanes!==wt.numPlanes||et.numIntersection!==wt.numIntersection)||et.vertexAlphas!==Et||et.vertexTangents!==At||et.morphTargets!==Mt||et.morphNormals!==Rn||et.morphColors!==Pr||et.toneMapping!==vn||ye.isWebGL2===!0&&et.morphTargetsCount!==gt)&&(Ut=!0):(Ut=!0,et.__version=me.version);let Fn=et.currentProgram;Ut===!0&&(Fn=Ou(me,se,fe));let co=!1,us=!1,vr=!1;const Kn=Fn.getUniforms(),uo=et.uniforms;if(le.useProgram(Fn.program)&&(co=!0,us=!0,vr=!0),me.id!==L&&(L=me.id,us=!0),co||N!==U){Kn.setValue(V,"projectionMatrix",U.projectionMatrix),Kn.setValue(V,"viewMatrix",U.matrixWorldInverse);const Ir=Kn.map.cameraPosition;Ir!==void 0&&Ir.setValue(V,Ue.setFromMatrixPosition(U.matrixWorld)),ye.logarithmicDepthBuffer&&Kn.setValue(V,"logDepthBufFC",2/(Math.log(U.far+1)/Math.LN2)),(me.isMeshPhongMaterial||me.isMeshToonMaterial||me.isMeshLambertMaterial||me.isMeshBasicMaterial||me.isMeshStandardMaterial||me.isShaderMaterial)&&Kn.setValue(V,"isOrthographic",U.isOrthographicCamera===!0),N!==U&&(N=U,us=!0,vr=!0)}if(fe.isSkinnedMesh){Kn.setOptional(V,fe,"bindMatrix"),Kn.setOptional(V,fe,"bindMatrixInverse");const Ir=fe.skeleton;Ir&&(ye.floatVertexTextures?(Ir.boneTexture===null&&Ir.computeBoneTexture(),Kn.setValue(V,"boneTexture",Ir.boneTexture,F)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}fe.isBatchedMesh&&(Kn.setOptional(V,fe,"batchingTexture"),Kn.setValue(V,"batchingTexture",fe._matricesTexture,F));const Fu=pe.morphAttributes;if((Fu.position!==void 0||Fu.normal!==void 0||Fu.color!==void 0&&ye.isWebGL2===!0)&&Dt.update(fe,pe,Fn),(us||et.receiveShadow!==fe.receiveShadow)&&(et.receiveShadow=fe.receiveShadow,Kn.setValue(V,"receiveShadow",fe.receiveShadow)),me.isMeshGouraudMaterial&&me.envMap!==null&&(uo.envMap.value=mt,uo.flipEnvMap.value=mt.isCubeTexture&&mt.isRenderTargetTexture===!1?-1:1),us&&(Kn.setValue(V,"toneMappingExposure",A.toneMappingExposure),et.needsLights&&_S(uo,vr),qe&&me.fog===!0&&Ne.refreshFogUniforms(uo,qe),Ne.refreshMaterialUniforms(uo,me,ae,Z,Ae),Kv.upload(V,Jg(et),uo,F)),me.isShaderMaterial&&me.uniformsNeedUpdate===!0&&(Kv.upload(V,Jg(et),uo,F),me.uniformsNeedUpdate=!1),me.isSpriteMaterial&&Kn.setValue(V,"center",fe.center),Kn.setValue(V,"modelViewMatrix",fe.modelViewMatrix),Kn.setValue(V,"normalMatrix",fe.normalMatrix),Kn.setValue(V,"modelMatrix",fe.matrixWorld),me.isShaderMaterial||me.isRawShaderMaterial){const Ir=me.uniformsGroups;for(let ku=0,Ui=Ir.length;ku<Ui;ku++)if(ye.isWebGL2){const Yg=Ir[ku];Me.update(Yg,Fn),Me.bind(Yg,Fn)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Fn}function _S(U,se){U.ambientLightColor.needsUpdate=se,U.lightProbe.needsUpdate=se,U.directionalLights.needsUpdate=se,U.directionalLightShadows.needsUpdate=se,U.pointLights.needsUpdate=se,U.pointLightShadows.needsUpdate=se,U.spotLights.needsUpdate=se,U.spotLightShadows.needsUpdate=se,U.rectAreaLights.needsUpdate=se,U.hemisphereLights.needsUpdate=se}function xS(U){return U.isMeshLambertMaterial||U.isMeshToonMaterial||U.isMeshPhongMaterial||U.isMeshStandardMaterial||U.isShadowMaterial||U.isShaderMaterial&&U.lights===!0}this.getActiveCubeFace=function(){return b},this.getActiveMipmapLevel=function(){return C},this.getRenderTarget=function(){return P},this.setRenderTargetTextures=function(U,se,pe){Ee.get(U.texture).__webglTexture=se,Ee.get(U.depthTexture).__webglTexture=pe;const me=Ee.get(U);me.__hasExternalTextures=!0,me.__hasExternalTextures&&(me.__autoAllocateDepthBuffer=pe===void 0,me.__autoAllocateDepthBuffer||ie.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),me.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(U,se){const pe=Ee.get(U);pe.__webglFramebuffer=se,pe.__useDefaultFramebuffer=se===void 0},this.setRenderTarget=function(U,se=0,pe=0){P=U,b=se,C=pe;let me=!0,fe=null,qe=!1,ot=!1;if(U){const mt=Ee.get(U);mt.__useDefaultFramebuffer!==void 0?(le.bindFramebuffer(V.FRAMEBUFFER,null),me=!1):mt.__webglFramebuffer===void 0?F.setupRenderTarget(U):mt.__hasExternalTextures&&F.rebindTextures(U,Ee.get(U.texture).__webglTexture,Ee.get(U.depthTexture).__webglTexture);const Et=U.texture;(Et.isData3DTexture||Et.isDataArrayTexture||Et.isCompressedArrayTexture)&&(ot=!0);const At=Ee.get(U).__webglFramebuffer;U.isWebGLCubeRenderTarget?(Array.isArray(At[se])?fe=At[se][pe]:fe=At[se],qe=!0):ye.isWebGL2&&U.samples>0&&F.useMultisampledRTT(U)===!1?fe=Ee.get(U).__webglMultisampledFramebuffer:Array.isArray(At)?fe=At[pe]:fe=At,T.copy(U.viewport),D.copy(U.scissor),z=U.scissorTest}else T.copy(K).multiplyScalar(ae).floor(),D.copy(Y).multiplyScalar(ae).floor(),z=te;if(le.bindFramebuffer(V.FRAMEBUFFER,fe)&&ye.drawBuffers&&me&&le.drawBuffers(U,fe),le.viewport(T),le.scissor(D),le.setScissorTest(z),qe){const mt=Ee.get(U.texture);V.framebufferTexture2D(V.FRAMEBUFFER,V.COLOR_ATTACHMENT0,V.TEXTURE_CUBE_MAP_POSITIVE_X+se,mt.__webglTexture,pe)}else if(ot){const mt=Ee.get(U.texture),Et=se||0;V.framebufferTextureLayer(V.FRAMEBUFFER,V.COLOR_ATTACHMENT0,mt.__webglTexture,pe||0,Et)}L=-1},this.readRenderTargetPixels=function(U,se,pe,me,fe,qe,ot){if(!(U&&U.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let dt=Ee.get(U).__webglFramebuffer;if(U.isWebGLCubeRenderTarget&&ot!==void 0&&(dt=dt[ot]),dt){le.bindFramebuffer(V.FRAMEBUFFER,dt);try{const mt=U.texture,Et=mt.format,At=mt.type;if(Et!==_i&&Ye.convert(Et)!==V.getParameter(V.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Mt=At===Nf&&(ie.has("EXT_color_buffer_half_float")||ye.isWebGL2&&ie.has("EXT_color_buffer_float"));if(At!==No&&Ye.convert(At)!==V.getParameter(V.IMPLEMENTATION_COLOR_READ_TYPE)&&!(At===bs&&(ye.isWebGL2||ie.has("OES_texture_float")||ie.has("WEBGL_color_buffer_float")))&&!Mt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}se>=0&&se<=U.width-me&&pe>=0&&pe<=U.height-fe&&V.readPixels(se,pe,me,fe,Ye.convert(Et),Ye.convert(At),qe)}finally{const mt=P!==null?Ee.get(P).__webglFramebuffer:null;le.bindFramebuffer(V.FRAMEBUFFER,mt)}}},this.copyFramebufferToTexture=function(U,se,pe=0){const me=Math.pow(2,-pe),fe=Math.floor(se.image.width*me),qe=Math.floor(se.image.height*me);F.setTexture2D(se,0),V.copyTexSubImage2D(V.TEXTURE_2D,pe,0,0,U.x,U.y,fe,qe),le.unbindTexture()},this.copyTextureToTexture=function(U,se,pe,me=0){const fe=se.image.width,qe=se.image.height,ot=Ye.convert(pe.format),dt=Ye.convert(pe.type);F.setTexture2D(pe,0),V.pixelStorei(V.UNPACK_FLIP_Y_WEBGL,pe.flipY),V.pixelStorei(V.UNPACK_PREMULTIPLY_ALPHA_WEBGL,pe.premultiplyAlpha),V.pixelStorei(V.UNPACK_ALIGNMENT,pe.unpackAlignment),se.isDataTexture?V.texSubImage2D(V.TEXTURE_2D,me,U.x,U.y,fe,qe,ot,dt,se.image.data):se.isCompressedTexture?V.compressedTexSubImage2D(V.TEXTURE_2D,me,U.x,U.y,se.mipmaps[0].width,se.mipmaps[0].height,ot,se.mipmaps[0].data):V.texSubImage2D(V.TEXTURE_2D,me,U.x,U.y,ot,dt,se.image),me===0&&pe.generateMipmaps&&V.generateMipmap(V.TEXTURE_2D),le.unbindTexture()},this.copyTextureToTexture3D=function(U,se,pe,me,fe=0){if(A.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const qe=U.max.x-U.min.x+1,ot=U.max.y-U.min.y+1,dt=U.max.z-U.min.z+1,mt=Ye.convert(me.format),Et=Ye.convert(me.type);let At;if(me.isData3DTexture)F.setTexture3D(me,0),At=V.TEXTURE_3D;else if(me.isDataArrayTexture||me.isCompressedArrayTexture)F.setTexture2DArray(me,0),At=V.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}V.pixelStorei(V.UNPACK_FLIP_Y_WEBGL,me.flipY),V.pixelStorei(V.UNPACK_PREMULTIPLY_ALPHA_WEBGL,me.premultiplyAlpha),V.pixelStorei(V.UNPACK_ALIGNMENT,me.unpackAlignment);const Mt=V.getParameter(V.UNPACK_ROW_LENGTH),Rn=V.getParameter(V.UNPACK_IMAGE_HEIGHT),Pr=V.getParameter(V.UNPACK_SKIP_PIXELS),vn=V.getParameter(V.UNPACK_SKIP_ROWS),yr=V.getParameter(V.UNPACK_SKIP_IMAGES),gt=pe.isCompressedTexture?pe.mipmaps[fe]:pe.image;V.pixelStorei(V.UNPACK_ROW_LENGTH,gt.width),V.pixelStorei(V.UNPACK_IMAGE_HEIGHT,gt.height),V.pixelStorei(V.UNPACK_SKIP_PIXELS,U.min.x),V.pixelStorei(V.UNPACK_SKIP_ROWS,U.min.y),V.pixelStorei(V.UNPACK_SKIP_IMAGES,U.min.z),pe.isDataTexture||pe.isData3DTexture?V.texSubImage3D(At,fe,se.x,se.y,se.z,qe,ot,dt,mt,Et,gt.data):pe.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),V.compressedTexSubImage3D(At,fe,se.x,se.y,se.z,qe,ot,dt,mt,gt.data)):V.texSubImage3D(At,fe,se.x,se.y,se.z,qe,ot,dt,mt,Et,gt),V.pixelStorei(V.UNPACK_ROW_LENGTH,Mt),V.pixelStorei(V.UNPACK_IMAGE_HEIGHT,Rn),V.pixelStorei(V.UNPACK_SKIP_PIXELS,Pr),V.pixelStorei(V.UNPACK_SKIP_ROWS,vn),V.pixelStorei(V.UNPACK_SKIP_IMAGES,yr),fe===0&&me.generateMipmaps&&V.generateMipmap(At),le.unbindTexture()},this.initTexture=function(U){U.isCubeTexture?F.setTextureCube(U,0):U.isData3DTexture?F.setTexture3D(U,0):U.isDataArrayTexture||U.isCompressedArrayTexture?F.setTexture2DArray(U,0):F.setTexture2D(U,0),le.unbindTexture()},this.resetState=function(){b=0,C=0,P=null,le.reset(),Q.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ro}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=e===D1?"display-p3":"srgb",n.unpackColorSpace=ln.workingColorSpace===Cg?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===fr?Ll:ER}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Ll?fr:Go}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class x8 extends FR{}x8.prototype.isWebGL1Renderer=!0;class O1{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new ze(e),this.density=n}clone(){return new O1(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class F1{constructor(e,n=1,r=1e3){this.isFog=!0,this.name="",this.color=new ze(e),this.near=n,this.far=r}clone(){return new F1(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class ux extends Jt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n}}class Lg{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=zm,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Zi()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return iu("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,r){e*=this.stride,r*=n.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=n.array[r+i];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Zi()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(n,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Zi()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const pi=new k;class jl{constructor(e,n,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,r=this.data.count;n<r;n++)pi.fromBufferAttribute(this,n),pi.applyMatrix4(e),this.setXYZ(n,pi.x,pi.y,pi.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)pi.fromBufferAttribute(this,n),pi.applyNormalMatrix(e),this.setXYZ(n,pi.x,pi.y,pi.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)pi.fromBufferAttribute(this,n),pi.transformDirection(e),this.setXYZ(n,pi.x,pi.y,pi.z);return this}getComponent(e,n){let r=this.array[e*this.data.stride+this.offset+n];return this.normalized&&(r=xi(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=Lt(r,this.array)),this.data.array[e*this.data.stride+this.offset+n]=r,this}setX(e,n){return this.normalized&&(n=Lt(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=Lt(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=Lt(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=Lt(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=xi(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=xi(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=xi(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=xi(n,this.array)),n}setXY(e,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=Lt(n,this.array),r=Lt(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this}setXYZ(e,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=Lt(n,this.array),r=Lt(r,this.array),i=Lt(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(n=Lt(n,this.array),r=Lt(r,this.array),i=Lt(i,this.array),s=Lt(s,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[i+s])}return new qt(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new jl(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class kR extends lr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new ze(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let mh;const Wd=new k,gh=new k,yh=new k,vh=new _e,Xd=new _e,S8=new ft,H0=new k,Kd=new k,G0=new k,EN=new _e,tE=new _e,MN=new _e;class A8 extends Jt{constructor(e=new kR){if(super(),this.isSprite=!0,this.type="Sprite",mh===void 0){mh=new It;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new Lg(n,5);mh.setIndex([0,1,2,0,2,3]),mh.setAttribute("position",new jl(r,3,0,!1)),mh.setAttribute("uv",new jl(r,2,3,!1))}this.geometry=mh,this.material=e,this.center=new _e(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),gh.setFromMatrixScale(this.matrixWorld),S8.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),yh.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&gh.multiplyScalar(-yh.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;j0(H0.set(-.5,-.5,0),yh,o,gh,i,s),j0(Kd.set(.5,-.5,0),yh,o,gh,i,s),j0(G0.set(.5,.5,0),yh,o,gh,i,s),EN.set(0,0),tE.set(1,0),MN.set(1,1);let a=e.ray.intersectTriangle(H0,Kd,G0,!1,Wd);if(a===null&&(j0(Kd.set(-.5,.5,0),yh,o,gh,i,s),tE.set(0,1),a=e.ray.intersectTriangle(H0,G0,Kd,!1,Wd),a===null))return;const l=e.ray.origin.distanceTo(Wd);l<e.near||l>e.far||n.push({distance:l,point:Wd.clone(),uv:$i.getInterpolation(Wd,H0,Kd,G0,EN,tE,MN,new _e),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function j0(t,e,n,r,i,s){vh.subVectors(t,n).addScalar(.5).multiply(r),i!==void 0?(Xd.x=s*vh.x-i*vh.y,Xd.y=i*vh.x+s*vh.y):Xd.copy(vh),t.copy(e),t.x+=Xd.x,t.y+=Xd.y,t.applyMatrix4(S8)}const W0=new k,TN=new k;class w8 extends Jt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let r=0,i=n.length;r<i;r++){const s=n[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,r=0){n=Math.abs(n);const i=this.levels;let s;for(s=0;s<i.length&&!(n<i[s].distance);s++);return i.splice(s,0,{distance:n,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let r,i;for(r=1,i=n.length;r<i;r++){let s=n[r].distance;if(n[r].object.visible&&(s-=s*n[r].hysteresis),e<s)break}return n[r-1].object}return null}raycast(e,n){if(this.levels.length>0){W0.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(W0);this.getObjectForDistance(i).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){W0.setFromMatrixPosition(e.matrixWorld),TN.setFromMatrixPosition(this.matrixWorld);const r=W0.distanceTo(TN)/e.zoom;n[0].object.visible=!0;let i,s;for(i=1,s=n.length;i<s;i++){let o=n[i].distance;if(n[i].object.visible&&(o-=o*n[i].hysteresis),r>=o)n[i-1].object.visible=!1,n[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)n[i].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];n.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return n}}const CN=new k,bN=new cn,RN=new cn,oce=new k,PN=new ft,X0=new k,nE=new Hr,IN=new ft,rE=new bu;class UR extends Yn{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=$T,this.bindMatrix=new ft,this.bindMatrixInverse=new ft,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new si),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,X0),this.boundingBox.expandByPoint(X0)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Hr),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,X0),this.boundingSphere.expandByPoint(X0)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,n){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),nE.copy(this.boundingSphere),nE.applyMatrix4(i),e.ray.intersectsSphere(nE)!==!1&&(IN.copy(i).invert(),rE.copy(e.ray).applyMatrix4(IN),!(this.boundingBox!==null&&rE.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,n,rE)))}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new cn,n=this.geometry.attributes.skinWeight;for(let r=0,i=n.count;r<i;r++){e.fromBufferAttribute(n,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),n.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===$T?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===OV?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const r=this.skeleton,i=this.geometry;bN.fromBufferAttribute(i.attributes.skinIndex,e),RN.fromBufferAttribute(i.attributes.skinWeight,e),CN.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let s=0;s<4;s++){const o=RN.getComponent(s);if(o!==0){const a=bN.getComponent(s);PN.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),n.addScaledVector(oce.copy(CN).applyMatrix4(PN),o)}}return n.applyMatrix4(this.bindMatrixInverse)}}class k1 extends Jt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class ou extends Mn{constructor(e=null,n=1,r=1,i,s,o,a,l,c=zn,u=zn,f,p){super(null,o,a,l,c,u,i,s,f,p),this.isDataTexture=!0,this.image={data:e,width:n,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const LN=new ft,ace=new ft;class Dg{constructor(e=[],n=[]){this.uuid=Zi(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new ft)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const r=new ft;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,n=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:ace;LN.multiplyMatrices(a,n[s]),LN.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new Dg(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const r=new ou(n,e,e,_i,bs);return r.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=r,this}getBoneByName(e){for(let n=0,r=this.bones.length;n<r;n++){const i=this.bones[n];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=n[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new k1),this.bones.push(o),this.boneInverses.push(new ft().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,r=this.boneInverses;for(let i=0,s=n.length;i<s;i++){const o=n[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class Uf extends qt{constructor(e,n,r,i=1){super(e,n,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const _h=new ft,DN=new ft,K0=[],BN=new si,lce=new ft,$d=new Yn,Jd=new Hr;class VR extends Yn{constructor(e,n,r){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new Uf(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,lce)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new si),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,_h),BN.copy(e.boundingBox).applyMatrix4(_h),this.boundingBox.union(BN)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new Hr),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,_h),Jd.copy(e.boundingSphere).applyMatrix4(_h),this.boundingSphere.union(Jd)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}raycast(e,n){const r=this.matrixWorld,i=this.count;if($d.geometry=this.geometry,$d.material=this.material,$d.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Jd.copy(this.boundingSphere),Jd.applyMatrix4(r),e.ray.intersectsSphere(Jd)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,_h),DN.multiplyMatrices(r,_h),$d.matrixWorld=DN,$d.raycast(e,K0);for(let o=0,a=K0.length;o<a;o++){const l=K0[o];l.instanceId=s,l.object=this,n.push(l)}K0.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new Uf(new Float32Array(this.instanceMatrix.count*3),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function cce(t,e){return t.z-e.z}function uce(t,e){return e.z-t.z}class hce{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,n){const r=this.pool,i=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1});const s=r[this.index];i.push(s),this.index++,s.start=e.start,s.count=e.count,s.z=n}reset(){this.list.length=0,this.index=0}}const xh="batchId",qa=new ft,NN=new ft,fce=new ft,ON=new ft,iE=new Ig,$0=new si,gc=new Hr,qd=new k,sE=new hce,Zr=new Yn,J0=[];function dce(t,e,n=0){const r=e.itemSize;if(t.isInterleavedBufferAttribute||t.array.constructor!==e.array.constructor){const i=t.count;for(let s=0;s<i;s++)for(let o=0;o<r;o++)e.setComponent(s+n,o,t.getComponent(s,o))}else e.array.set(t.array,n*r);e.needsUpdate=!0}class E8 extends Yn{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,n,r=n*2,i){super(new It,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=n,this._maxIndexCount=r,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4),r=new ou(n,e,e,_i,bs);this._matricesTexture=r}_initializeGeometry(e){const n=this.geometry,r=this._maxVertexCount,i=this._maxGeometryCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const l=e.getAttribute(a),{array:c,itemSize:u,normalized:f}=l,p=new c.constructor(r*u),m=new l.constructor(p,u,f);m.setUsage(l.usage),n.setAttribute(a,m)}if(e.getIndex()!==null){const a=r>65536?new Uint32Array(s):new Uint16Array(s);n.setIndex(new qt(a,1))}const o=i>65536?new Uint32Array(r):new Uint16Array(r);n.setAttribute(xh,new qt(o,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(xh))throw new Error(`BatchedMesh: Geometry cannot use attribute "${xh}"`);const n=this.geometry;if(!!e.getIndex()!=!!n.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const r in n.attributes){if(r===xh)continue;if(!e.hasAttribute(r))throw new Error(`BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),s=n.getAttribute(r);if(i.itemSize!==s.itemSize||i.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new si);const e=this._geometryCount,n=this.boundingBox,r=this._active;n.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,qa),this.getBoundingBoxAt(i,$0).applyMatrix4(qa),n.union($0))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Hr);const e=this._geometryCount,n=this.boundingSphere,r=this._active;n.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,qa),this.getBoundingSphereAt(i,gc).applyMatrix4(qa),n.union(gc))}addGeometry(e,n=-1,r=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const i={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const o=this._reservedRanges,a=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(s=o[o.length-1]),n===-1?i.vertexCount=e.getAttribute("position").count:i.vertexCount=n,s===null?i.vertexStart=0:i.vertexStart=s.vertexStart+s.vertexCount;const c=e.getIndex(),u=c!==null;if(u&&(r===-1?i.indexCount=c.count:i.indexCount=r,s===null?i.indexStart=0:i.indexStart=s.indexStart+s.indexCount),i.indexStart!==-1&&i.indexStart+i.indexCount>this._maxIndexCount||i.vertexStart+i.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const f=this._visibility,p=this._active,m=this._matricesTexture,y=this._matricesTexture.image.data;f.push(!0),p.push(!0);const S=this._geometryCount;this._geometryCount++,fce.toArray(y,S*16),m.needsUpdate=!0,o.push(i),a.push({start:u?i.indexStart:i.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new si,sphereInitialized:!1,sphere:new Hr});const v=this.geometry.getAttribute(xh);for(let g=0;g<i.vertexCount;g++)v.setX(i.vertexStart+g,S);return v.needsUpdate=!0,this.setGeometryAt(S,e),S}setGeometryAt(e,n){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(n);const r=this.geometry,i=r.getIndex()!==null,s=r.getIndex(),o=n.getIndex(),a=this._reservedRanges[e];if(i&&o.count>a.indexCount||n.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,c=a.vertexCount;for(const m in r.attributes){if(m===xh)continue;const y=n.getAttribute(m),S=r.getAttribute(m);dce(y,S,l);const v=y.itemSize;for(let g=y.count,_=c;g<_;g++){const A=l+g;for(let E=0;E<v;E++)S.setComponent(A,E,0)}S.needsUpdate=!0}if(i){const m=a.indexStart;for(let y=0;y<o.count;y++)s.setX(m+y,l+o.getX(y));for(let y=o.count,S=a.indexCount;y<S;y++)s.setX(m+y,l);s.needsUpdate=!0}const u=this._bounds[e];n.boundingBox!==null?(u.box.copy(n.boundingBox),u.boxInitialized=!0):u.boxInitialized=!1,n.boundingSphere!==null?(u.sphere.copy(n.boundingSphere),u.sphereInitialized=!0):u.sphereInitialized=!1;const f=this._drawRanges[e],p=n.getAttribute("position");return f.count=i?o.count:p.count,this._visibilityChanged=!0,e}deleteGeometry(e){const n=this._active;return e>=n.length||n[e]===!1?this:(n[e]=!1,this._visibilityChanged=!0,this)}getBoundingBoxAt(e,n){if(this._active[e]===!1)return null;const i=this._bounds[e],s=i.box,o=this.geometry;if(i.boxInitialized===!1){s.makeEmpty();const a=o.index,l=o.attributes.position,c=this._drawRanges[e];for(let u=c.start,f=c.start+c.count;u<f;u++){let p=u;a&&(p=a.getX(p)),s.expandByPoint(qd.fromBufferAttribute(l,p))}i.boxInitialized=!0}return n.copy(s),n}getBoundingSphereAt(e,n){if(this._active[e]===!1)return null;const i=this._bounds[e],s=i.sphere,o=this.geometry;if(i.sphereInitialized===!1){s.makeEmpty(),this.getBoundingBoxAt(e,$0),$0.getCenter(s.center);const a=o.index,l=o.attributes.position,c=this._drawRanges[e];let u=0;for(let f=c.start,p=c.start+c.count;f<p;f++){let m=f;a&&(m=a.getX(m)),qd.fromBufferAttribute(l,m),u=Math.max(u,s.center.distanceToSquared(qd))}s.radius=Math.sqrt(u),i.sphereInitialized=!0}return n.copy(s),n}setMatrixAt(e,n){const r=this._active,i=this._matricesTexture,s=this._matricesTexture.image.data,o=this._geometryCount;return e>=o||r[e]===!1?this:(n.toArray(s,e*16),i.needsUpdate=!0,this)}getMatrixAt(e,n){const r=this._active,i=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||r[e]===!1?null:n.fromArray(i,e*16)}setVisibleAt(e,n){const r=this._visibility,i=this._active,s=this._geometryCount;return e>=s||i[e]===!1||r[e]===n?this:(r[e]=n,this._visibilityChanged=!0,this)}getVisibleAt(e){const n=this._visibility,r=this._active,i=this._geometryCount;return e>=i||r[e]===!1?!1:n[e]}raycast(e,n){const r=this._visibility,i=this._active,s=this._drawRanges,o=this._geometryCount,a=this.matrixWorld,l=this.geometry;Zr.material=this.material,Zr.geometry.index=l.index,Zr.geometry.attributes=l.attributes,Zr.geometry.boundingBox===null&&(Zr.geometry.boundingBox=new si),Zr.geometry.boundingSphere===null&&(Zr.geometry.boundingSphere=new Hr);for(let c=0;c<o;c++){if(!r[c]||!i[c])continue;const u=s[c];Zr.geometry.setDrawRange(u.start,u.count),this.getMatrixAt(c,Zr.matrixWorld).premultiply(a),this.getBoundingBoxAt(c,Zr.geometry.boundingBox),this.getBoundingSphereAt(c,Zr.geometry.boundingSphere),Zr.raycast(e,J0);for(let f=0,p=J0.length;f<p;f++){const m=J0[f];m.object=this,m.batchId=c,n.push(m)}J0.length=0}Zr.material=null,Zr.geometry.index=null,Zr.geometry.attributes={},Zr.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(n=>({...n})),this._reservedRanges=e._reservedRanges.map(n=>({...n})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(n=>({boxInitialized:n.boxInitialized,box:n.box.clone(),sphereInitialized:n.sphereInitialized,sphere:n.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,n,r,i,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=i.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._active,c=this._visibility,u=this._multiDrawStarts,f=this._multiDrawCounts,p=this._drawRanges,m=this.perObjectFrustumCulled;m&&(ON.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),iE.setFromProjectionMatrix(ON,e.coordinateSystem));let y=0;if(this.sortObjects){NN.copy(this.matrixWorld).invert(),qd.setFromMatrixPosition(r.matrixWorld).applyMatrix4(NN);for(let g=0,_=c.length;g<_;g++)if(c[g]&&l[g]){this.getMatrixAt(g,qa),this.getBoundingSphereAt(g,gc).applyMatrix4(qa);let A=!1;if(m&&(A=!iE.intersectsSphere(gc)),!A){const E=qd.distanceTo(gc.center);sE.push(p[g],E)}}const S=sE.list,v=this.customSort;v===null?S.sort(s.transparent?uce:cce):v.call(this,S,r);for(let g=0,_=S.length;g<_;g++){const A=S[g];u[y]=A.start*a,f[y]=A.count,y++}sE.reset()}else for(let S=0,v=c.length;S<v;S++)if(c[S]&&l[S]){let g=!1;if(m&&(this.getMatrixAt(S,qa),this.getBoundingSphereAt(S,gc).applyMatrix4(qa),g=!iE.intersectsSphere(gc)),!g){const _=p[S];u[y]=_.start*a,f[y]=_.count,y++}}this._multiDrawCount=y,this._visibilityChanged=!1}onBeforeShadow(e,n,r,i,s,o){this.onBeforeRender(e,null,i,s,o)}}class li extends lr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ze(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const FN=new k,kN=new k,UN=new ft,oE=new bu,q0=new Hr;class Ia extends Jt{constructor(e=new It,n=new li){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[0];for(let i=1,s=n.count;i<s;i++)FN.fromBufferAttribute(n,i-1),kN.fromBufferAttribute(n,i),r[i]=r[i-1],r[i]+=FN.distanceTo(kN);e.setAttribute("lineDistance",new it(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),q0.copy(r.boundingSphere),q0.applyMatrix4(i),q0.radius+=s,e.ray.intersectsSphere(q0)===!1)return;UN.copy(i).invert(),oE.copy(e.ray).applyMatrix4(UN);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new k,u=new k,f=new k,p=new k,m=this.isLineSegments?2:1,y=r.index,v=r.attributes.position;if(y!==null){const g=Math.max(0,o.start),_=Math.min(y.count,o.start+o.count);for(let A=g,E=_-1;A<E;A+=m){const b=y.getX(A),C=y.getX(A+1);if(c.fromBufferAttribute(v,b),u.fromBufferAttribute(v,C),oE.distanceSqToSegment(c,u,p,f)>l)continue;p.applyMatrix4(this.matrixWorld);const L=e.ray.origin.distanceTo(p);L<e.near||L>e.far||n.push({distance:L,point:f.clone().applyMatrix4(this.matrixWorld),index:A,face:null,faceIndex:null,object:this})}}else{const g=Math.max(0,o.start),_=Math.min(v.count,o.start+o.count);for(let A=g,E=_-1;A<E;A+=m){if(c.fromBufferAttribute(v,A),u.fromBufferAttribute(v,A+1),oE.distanceSqToSegment(c,u,p,f)>l)continue;p.applyMatrix4(this.matrixWorld);const C=e.ray.origin.distanceTo(p);C<e.near||C>e.far||n.push({distance:C,point:f.clone().applyMatrix4(this.matrixWorld),index:A,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const VN=new k,zN=new k;class oo extends Ia{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[];for(let i=0,s=n.count;i<s;i+=2)VN.fromBufferAttribute(n,i),zN.fromBufferAttribute(n,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+VN.distanceTo(zN);e.setAttribute("lineDistance",new it(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class zR extends Ia{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class U1 extends lr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ze(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const HN=new ft,MC=new bu,Y0=new Hr,Q0=new k;class HR extends Jt{constructor(e=new It,n=new U1){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Y0.copy(r.boundingSphere),Y0.applyMatrix4(i),Y0.radius+=s,e.ray.intersectsSphere(Y0)===!1)return;HN.copy(i).invert(),MC.copy(e.ray).applyMatrix4(HN);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=r.index,f=r.attributes.position;if(c!==null){const p=Math.max(0,o.start),m=Math.min(c.count,o.start+o.count);for(let y=p,S=m;y<S;y++){const v=c.getX(y);Q0.fromBufferAttribute(f,v),GN(Q0,v,l,i,e,n,this)}}else{const p=Math.max(0,o.start),m=Math.min(f.count,o.start+o.count);for(let y=p,S=m;y<S;y++)Q0.fromBufferAttribute(f,y),GN(Q0,y,l,i,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function GN(t,e,n,r,i,s,o){const a=MC.distanceSqToPoint(t);if(a<n){const l=new k;MC.closestPointToPoint(t,l),l.applyMatrix4(r);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class pce extends Mn{constructor(e,n,r,i,s,o,a,l,c){super(e,n,r,i,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Sn,this.magFilter=s!==void 0?s:Sn,this.generateMipmaps=!1;const u=this;function f(){u.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class mce extends Mn{constructor(e,n){super({width:e,height:n}),this.isFramebufferTexture=!0,this.magFilter=zn,this.minFilter=zn,this.generateMipmaps=!1,this.needsUpdate=!0}}class V1 extends Mn{constructor(e,n,r,i,s,o,a,l,c,u,f,p){super(null,o,a,l,c,u,i,s,f,p),this.isCompressedTexture=!0,this.image={width:n,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class gce extends V1{constructor(e,n,r,i,s,o){super(e,n,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=kr}}class yce extends V1{constructor(e,n,r){super(void 0,e[0].width,e[0].height,n,r,Pa),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class vce extends Mn{constructor(e,n,r,i,s,o,a,l,c){super(e,n,r,i,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class ao{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const r=this.getUtoTmapping(e);return this.getPoint(r,n)}getPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return n}getSpacedPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPointAt(r/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let r,i=this.getPoint(0),s=0;n.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),n.push(s),i=r;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const r=this.getLengths();let i=0;const s=r.length;let o;n?o=n:o=e*r[s-1];let a=0,l=s-1,c;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),c=r[i]-o,c<0)a=i+1;else if(c>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const u=r[i],p=r[i+1]-u,m=(o-u)/p;return(i+m)/(s-1)}getTangent(e,n){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=n||(o.isVector2?new _e:new k);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,n){const r=this.getUtoTmapping(e);return this.getTangent(r,n)}computeFrenetFrames(e,n){const r=new k,i=[],s=[],o=[],a=new k,l=new ft;for(let m=0;m<=e;m++){const y=m/e;i[m]=this.getTangentAt(y,new k)}s[0]=new k,o[0]=new k;let c=Number.MAX_VALUE;const u=Math.abs(i[0].x),f=Math.abs(i[0].y),p=Math.abs(i[0].z);u<=c&&(c=u,r.set(1,0,0)),f<=c&&(c=f,r.set(0,1,0)),p<=c&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(i[m-1],i[m]),a.length()>Number.EPSILON){a.normalize();const y=Math.acos(Gn(i[m-1].dot(i[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,y))}o[m].crossVectors(i[m],s[m])}if(n===!0){let m=Math.acos(Gn(s[0].dot(s[e]),-1,1));m/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let y=1;y<=e;y++)s[y].applyMatrix4(l.makeRotationAxis(i[y],m*y)),o[y].crossVectors(i[y],s[y])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class z1 extends ao{constructor(e=0,n=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,n){const r=n||new _e,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),f=Math.sin(this.aRotation),p=l-this.aX,m=c-this.aY;l=p*u-m*f+this.aX,c=p*f+m*u+this.aY}return r.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class M8 extends z1{constructor(e,n,r,i,s,o){super(e,n,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function GR(){let t=0,e=0,n=0,r=0;function i(s,o,a,l){t=s,e=a,n=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){i(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,f){let p=(o-s)/c-(a-s)/(c+u)+(a-o)/u,m=(a-o)/u-(l-o)/(u+f)+(l-a)/f;p*=u,m*=u,i(o,a,p,m)},calc:function(s){const o=s*s,a=o*s;return t+e*s+n*o+r*a}}}const Z0=new k,aE=new GR,lE=new GR,cE=new GR;class T8 extends ao{constructor(e=[],n=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=r,this.tension=i}getPoint(e,n=new k){const r=n,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,u;this.closed||a>0?c=i[(a-1)%s]:(Z0.subVectors(i[0],i[1]).add(i[0]),c=Z0);const f=i[a%s],p=i[(a+1)%s];if(this.closed||a+2<s?u=i[(a+2)%s]:(Z0.subVectors(i[s-1],i[s-2]).add(i[s-1]),u=Z0),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let y=Math.pow(c.distanceToSquared(f),m),S=Math.pow(f.distanceToSquared(p),m),v=Math.pow(p.distanceToSquared(u),m);S<1e-4&&(S=1),y<1e-4&&(y=S),v<1e-4&&(v=S),aE.initNonuniformCatmullRom(c.x,f.x,p.x,u.x,y,S,v),lE.initNonuniformCatmullRom(c.y,f.y,p.y,u.y,y,S,v),cE.initNonuniformCatmullRom(c.z,f.z,p.z,u.z,y,S,v)}else this.curveType==="catmullrom"&&(aE.initCatmullRom(c.x,f.x,p.x,u.x,this.tension),lE.initCatmullRom(c.y,f.y,p.y,u.y,this.tension),cE.initCatmullRom(c.z,f.z,p.z,u.z,this.tension));return r.set(aE.calc(l),lE.calc(l),cE.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new k().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function jN(t,e,n,r,i){const s=(r-e)*.5,o=(i-n)*.5,a=t*t,l=t*a;return(2*n-2*r+s+o)*l+(-3*n+3*r-2*s-o)*a+s*t+n}function _ce(t,e){const n=1-t;return n*n*e}function xce(t,e){return 2*(1-t)*t*e}function Sce(t,e){return t*t*e}function Up(t,e,n,r){return _ce(t,e)+xce(t,n)+Sce(t,r)}function Ace(t,e){const n=1-t;return n*n*n*e}function wce(t,e){const n=1-t;return 3*n*n*t*e}function Ece(t,e){return 3*(1-t)*t*t*e}function Mce(t,e){return t*t*t*e}function Vp(t,e,n,r,i){return Ace(t,e)+wce(t,n)+Ece(t,r)+Mce(t,i)}class jR extends ao{constructor(e=new _e,n=new _e,r=new _e,i=new _e){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new _e){const r=n,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(Vp(e,i.x,s.x,o.x,a.x),Vp(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class C8 extends ao{constructor(e=new k,n=new k,r=new k,i=new k){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new k){const r=n,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(Vp(e,i.x,s.x,o.x,a.x),Vp(e,i.y,s.y,o.y,a.y),Vp(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class WR extends ao{constructor(e=new _e,n=new _e){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new _e){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new _e){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class b8 extends ao{constructor(e=new k,n=new k){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new k){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new k){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class XR extends ao{constructor(e=new _e,n=new _e,r=new _e){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new _e){const r=n,i=this.v0,s=this.v1,o=this.v2;return r.set(Up(e,i.x,s.x,o.x),Up(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class KR extends ao{constructor(e=new k,n=new k,r=new k){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new k){const r=n,i=this.v0,s=this.v1,o=this.v2;return r.set(Up(e,i.x,s.x,o.x),Up(e,i.y,s.y,o.y),Up(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class $R extends ao{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new _e){const r=n,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],c=i[o],u=i[o>i.length-2?i.length-1:o+1],f=i[o>i.length-3?i.length-1:o+2];return r.set(jN(a,l.x,c.x,u.x,f.x),jN(a,l.y,c.y,u.y,f.y)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new _e().fromArray(i))}return this}}var hx=Object.freeze({__proto__:null,ArcCurve:M8,CatmullRomCurve3:T8,CubicBezierCurve:jR,CubicBezierCurve3:C8,EllipseCurve:z1,LineCurve:WR,LineCurve3:b8,QuadraticBezierCurve:XR,QuadraticBezierCurve3:KR,SplineCurve:$R});class R8 extends ao{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(n)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new hx[r](n,e))}return this}getPoint(e,n){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,n)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let r=0,i=this.curves.length;r<i;r++)n+=this.curves[r].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];r&&r.equals(u)||(n.push(u),r=u)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,r=this.curves.length;n<r;n++){const i=this.curves[n];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(new hx[i.type]().fromJSON(i))}return this}}class jm extends R8{constructor(e){super(),this.type="Path",this.currentPoint=new _e,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,r=e.length;n<r;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const r=new WR(this.currentPoint.clone(),new _e(e,n));return this.curves.push(r),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,r,i){const s=new XR(this.currentPoint.clone(),new _e(e,n),new _e(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,n,r,i,s,o){const a=new jR(this.currentPoint.clone(),new _e(e,n),new _e(r,i),new _e(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),r=new $R(n);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,n+l,r,i,s,o),this}absarc(e,n,r,i,s,o){return this.absellipse(e,n,r,r,i,s,o),this}ellipse(e,n,r,i,s,o,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,n+u,r,i,s,o,a,l),this}absellipse(e,n,r,i,s,o,a,l){const c=new z1(e,n,r,i,s,o,a,l);if(this.curves.length>0){const f=c.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Bg extends It{constructor(e=[new _e(0,-.5),new _e(.5,0),new _e(0,.5)],n=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:r,phiLength:i},n=Math.floor(n),i=Gn(i,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],u=1/n,f=new k,p=new _e,m=new k,y=new k,S=new k;let v=0,g=0;for(let _=0;_<=e.length-1;_++)switch(_){case 0:v=e[_+1].x-e[_].x,g=e[_+1].y-e[_].y,m.x=g*1,m.y=-v,m.z=g*0,S.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(S.x,S.y,S.z);break;default:v=e[_+1].x-e[_].x,g=e[_+1].y-e[_].y,m.x=g*1,m.y=-v,m.z=g*0,y.copy(m),m.x+=S.x,m.y+=S.y,m.z+=S.z,m.normalize(),l.push(m.x,m.y,m.z),S.copy(y)}for(let _=0;_<=n;_++){const A=r+_*u*i,E=Math.sin(A),b=Math.cos(A);for(let C=0;C<=e.length-1;C++){f.x=e[C].x*E,f.y=e[C].y,f.z=e[C].x*b,o.push(f.x,f.y,f.z),p.x=_/n,p.y=C/(e.length-1),a.push(p.x,p.y);const P=l[3*C+0]*E,L=l[3*C+1],N=l[3*C+0]*b;c.push(P,L,N)}}for(let _=0;_<n;_++)for(let A=0;A<e.length-1;A++){const E=A+_*e.length,b=E,C=E+e.length,P=E+e.length+1,L=E+1;s.push(b,C,L),s.push(P,L,C)}this.setIndex(s),this.setAttribute("position",new it(o,3)),this.setAttribute("uv",new it(a,2)),this.setAttribute("normal",new it(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Bg(e.points,e.segments,e.phiStart,e.phiLength)}}class H1 extends Bg{constructor(e=1,n=1,r=4,i=8){const s=new jm;s.absarc(0,-n/2,e,Math.PI*1.5,0),s.absarc(0,n/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:n,capSegments:r,radialSegments:i}}static fromJSON(e){return new H1(e.radius,e.length,e.capSegments,e.radialSegments)}}class G1 extends It{constructor(e=1,n=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:r,thetaLength:i},n=Math.max(3,n);const s=[],o=[],a=[],l=[],c=new k,u=new _e;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let f=0,p=3;f<=n;f++,p+=3){const m=r+f/n*i;c.x=e*Math.cos(m),c.y=e*Math.sin(m),o.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(o[p]/e+1)/2,u.y=(o[p+1]/e+1)/2,l.push(u.x,u.y)}for(let f=1;f<=n;f++)s.push(f,f+1,0);this.setIndex(s),this.setAttribute("position",new it(o,3)),this.setAttribute("normal",new it(a,3)),this.setAttribute("uv",new it(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new G1(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class ad extends It{constructor(e=1,n=1,r=1,i=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;i=Math.floor(i),s=Math.floor(s);const u=[],f=[],p=[],m=[];let y=0;const S=[],v=r/2;let g=0;_(),o===!1&&(e>0&&A(!0),n>0&&A(!1)),this.setIndex(u),this.setAttribute("position",new it(f,3)),this.setAttribute("normal",new it(p,3)),this.setAttribute("uv",new it(m,2));function _(){const E=new k,b=new k;let C=0;const P=(n-e)/r;for(let L=0;L<=s;L++){const N=[],T=L/s,D=T*(n-e)+e;for(let z=0;z<=i;z++){const j=z/i,H=j*l+a,q=Math.sin(H),Z=Math.cos(H);b.x=D*q,b.y=-T*r+v,b.z=D*Z,f.push(b.x,b.y,b.z),E.set(q,P,Z).normalize(),p.push(E.x,E.y,E.z),m.push(j,1-T),N.push(y++)}S.push(N)}for(let L=0;L<i;L++)for(let N=0;N<s;N++){const T=S[N][L],D=S[N+1][L],z=S[N+1][L+1],j=S[N][L+1];u.push(T,D,j),u.push(D,z,j),C+=6}c.addGroup(g,C,0),g+=C}function A(E){const b=y,C=new _e,P=new k;let L=0;const N=E===!0?e:n,T=E===!0?1:-1;for(let z=1;z<=i;z++)f.push(0,v*T,0),p.push(0,T,0),m.push(.5,.5),y++;const D=y;for(let z=0;z<=i;z++){const H=z/i*l+a,q=Math.cos(H),Z=Math.sin(H);P.x=N*Z,P.y=v*T,P.z=N*q,f.push(P.x,P.y,P.z),p.push(0,T,0),C.x=q*.5+.5,C.y=Z*.5*T+.5,m.push(C.x,C.y),y++}for(let z=0;z<i;z++){const j=b+z,H=D+z;E===!0?u.push(H,H+1,j):u.push(H+1,H,j),L+=3}c.addGroup(g,L,E===!0?1:2),g+=L}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ad(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class j1 extends ad{constructor(e=1,n=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,n,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new j1(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class ec extends It{constructor(e=[],n=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:r,detail:i};const s=[],o=[];a(i),c(r),u(),this.setAttribute("position",new it(s,3)),this.setAttribute("normal",new it(s.slice(),3)),this.setAttribute("uv",new it(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(_){const A=new k,E=new k,b=new k;for(let C=0;C<n.length;C+=3)m(n[C+0],A),m(n[C+1],E),m(n[C+2],b),l(A,E,b,_)}function l(_,A,E,b){const C=b+1,P=[];for(let L=0;L<=C;L++){P[L]=[];const N=_.clone().lerp(E,L/C),T=A.clone().lerp(E,L/C),D=C-L;for(let z=0;z<=D;z++)z===0&&L===C?P[L][z]=N:P[L][z]=N.clone().lerp(T,z/D)}for(let L=0;L<C;L++)for(let N=0;N<2*(C-L)-1;N++){const T=Math.floor(N/2);N%2===0?(p(P[L][T+1]),p(P[L+1][T]),p(P[L][T])):(p(P[L][T+1]),p(P[L+1][T+1]),p(P[L+1][T]))}}function c(_){const A=new k;for(let E=0;E<s.length;E+=3)A.x=s[E+0],A.y=s[E+1],A.z=s[E+2],A.normalize().multiplyScalar(_),s[E+0]=A.x,s[E+1]=A.y,s[E+2]=A.z}function u(){const _=new k;for(let A=0;A<s.length;A+=3){_.x=s[A+0],_.y=s[A+1],_.z=s[A+2];const E=v(_)/2/Math.PI+.5,b=g(_)/Math.PI+.5;o.push(E,1-b)}y(),f()}function f(){for(let _=0;_<o.length;_+=6){const A=o[_+0],E=o[_+2],b=o[_+4],C=Math.max(A,E,b),P=Math.min(A,E,b);C>.9&&P<.1&&(A<.2&&(o[_+0]+=1),E<.2&&(o[_+2]+=1),b<.2&&(o[_+4]+=1))}}function p(_){s.push(_.x,_.y,_.z)}function m(_,A){const E=_*3;A.x=e[E+0],A.y=e[E+1],A.z=e[E+2]}function y(){const _=new k,A=new k,E=new k,b=new k,C=new _e,P=new _e,L=new _e;for(let N=0,T=0;N<s.length;N+=9,T+=6){_.set(s[N+0],s[N+1],s[N+2]),A.set(s[N+3],s[N+4],s[N+5]),E.set(s[N+6],s[N+7],s[N+8]),C.set(o[T+0],o[T+1]),P.set(o[T+2],o[T+3]),L.set(o[T+4],o[T+5]),b.copy(_).add(A).add(E).divideScalar(3);const D=v(b);S(C,T+0,_,D),S(P,T+2,A,D),S(L,T+4,E,D)}}function S(_,A,E,b){b<0&&_.x===1&&(o[A]=_.x-1),E.x===0&&E.z===0&&(o[A]=b/2/Math.PI+.5)}function v(_){return Math.atan2(_.z,-_.x)}function g(_){return Math.atan2(-_.y,Math.sqrt(_.x*_.x+_.z*_.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ec(e.vertices,e.indices,e.radius,e.details)}}class W1 extends ec{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new W1(e.radius,e.detail)}}const ev=new k,tv=new k,uE=new k,nv=new $i;class P8 extends It{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const i=Math.pow(10,4),s=Math.cos(ru*n),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],u=["a","b","c"],f=new Array(3),p={},m=[];for(let y=0;y<l;y+=3){o?(c[0]=o.getX(y),c[1]=o.getX(y+1),c[2]=o.getX(y+2)):(c[0]=y,c[1]=y+1,c[2]=y+2);const{a:S,b:v,c:g}=nv;if(S.fromBufferAttribute(a,c[0]),v.fromBufferAttribute(a,c[1]),g.fromBufferAttribute(a,c[2]),nv.getNormal(uE),f[0]=`${Math.round(S.x*i)},${Math.round(S.y*i)},${Math.round(S.z*i)}`,f[1]=`${Math.round(v.x*i)},${Math.round(v.y*i)},${Math.round(v.z*i)}`,f[2]=`${Math.round(g.x*i)},${Math.round(g.y*i)},${Math.round(g.z*i)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let _=0;_<3;_++){const A=(_+1)%3,E=f[_],b=f[A],C=nv[u[_]],P=nv[u[A]],L=`${E}_${b}`,N=`${b}_${E}`;N in p&&p[N]?(uE.dot(p[N].normal)<=s&&(m.push(C.x,C.y,C.z),m.push(P.x,P.y,P.z)),p[N]=null):L in p||(p[L]={index0:c[_],index1:c[A],normal:uE.clone()})}}for(const y in p)if(p[y]){const{index0:S,index1:v}=p[y];ev.fromBufferAttribute(a,S),tv.fromBufferAttribute(a,v),m.push(ev.x,ev.y,ev.z),m.push(tv.x,tv.y,tv.z)}this.setAttribute("position",new it(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class au extends jm{constructor(e){super(e),this.uuid=Zi(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let r=0,i=this.holes.length;r<i;r++)n[r]=this.holes[r].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,r=this.holes.length;n<r;n++){const i=this.holes[n];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(new jm().fromJSON(i))}return this}}const Tce={triangulate:function(t,e,n=2){const r=e&&e.length,i=r?e[0]*n:t.length;let s=I8(t,0,i,n,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,f,p,m;if(r&&(s=Ice(t,e,s,n)),t.length>80*n){a=c=t[0],l=u=t[1];for(let y=n;y<i;y+=n)f=t[y],p=t[y+1],f<a&&(a=f),p<l&&(l=p),f>c&&(c=f),p>u&&(u=p);m=Math.max(c-a,u-l),m=m!==0?32767/m:0}return Wm(s,o,n,a,l,m,0),o}};function I8(t,e,n,r,i){let s,o;if(i===Hce(t,e,n,r)>0)for(s=e;s<n;s+=r)o=WN(s,t[s],t[s+1],o);else for(s=n-r;s>=e;s-=r)o=WN(s,t[s],t[s+1],o);return o&&X1(o,o.next)&&(Km(o),o=o.next),o}function Su(t,e){if(!t)return t;e||(e=t);let n=t,r;do if(r=!1,!n.steiner&&(X1(n,n.next)||Dn(n.prev,n,n.next)===0)){if(Km(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function Wm(t,e,n,r,i,s,o){if(!t)return;!o&&s&&Oce(t,r,i,s);let a=t,l,c;for(;t.prev!==t.next;){if(l=t.prev,c=t.next,s?bce(t,r,i,s):Cce(t)){e.push(l.i/n|0),e.push(t.i/n|0),e.push(c.i/n|0),Km(t),t=c.next,a=c.next;continue}if(t=c,t===a){o?o===1?(t=Rce(Su(t),e,n),Wm(t,e,n,r,i,s,2)):o===2&&Pce(t,e,n,r,i,s):Wm(Su(t),e,n,r,i,s,1);break}}}function Cce(t){const e=t.prev,n=t,r=t.next;if(Dn(e,n,r)>=0)return!1;const i=e.x,s=n.x,o=r.x,a=e.y,l=n.y,c=r.y,u=i<s?i<o?i:o:s<o?s:o,f=a<l?a<c?a:c:l<c?l:c,p=i>s?i>o?i:o:s>o?s:o,m=a>l?a>c?a:c:l>c?l:c;let y=r.next;for(;y!==e;){if(y.x>=u&&y.x<=p&&y.y>=f&&y.y<=m&&jh(i,a,s,l,o,c,y.x,y.y)&&Dn(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function bce(t,e,n,r){const i=t.prev,s=t,o=t.next;if(Dn(i,s,o)>=0)return!1;const a=i.x,l=s.x,c=o.x,u=i.y,f=s.y,p=o.y,m=a<l?a<c?a:c:l<c?l:c,y=u<f?u<p?u:p:f<p?f:p,S=a>l?a>c?a:c:l>c?l:c,v=u>f?u>p?u:p:f>p?f:p,g=TC(m,y,e,n,r),_=TC(S,v,e,n,r);let A=t.prevZ,E=t.nextZ;for(;A&&A.z>=g&&E&&E.z<=_;){if(A.x>=m&&A.x<=S&&A.y>=y&&A.y<=v&&A!==i&&A!==o&&jh(a,u,l,f,c,p,A.x,A.y)&&Dn(A.prev,A,A.next)>=0||(A=A.prevZ,E.x>=m&&E.x<=S&&E.y>=y&&E.y<=v&&E!==i&&E!==o&&jh(a,u,l,f,c,p,E.x,E.y)&&Dn(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;A&&A.z>=g;){if(A.x>=m&&A.x<=S&&A.y>=y&&A.y<=v&&A!==i&&A!==o&&jh(a,u,l,f,c,p,A.x,A.y)&&Dn(A.prev,A,A.next)>=0)return!1;A=A.prevZ}for(;E&&E.z<=_;){if(E.x>=m&&E.x<=S&&E.y>=y&&E.y<=v&&E!==i&&E!==o&&jh(a,u,l,f,c,p,E.x,E.y)&&Dn(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function Rce(t,e,n){let r=t;do{const i=r.prev,s=r.next.next;!X1(i,s)&&L8(i,r,r.next,s)&&Xm(i,s)&&Xm(s,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(s.i/n|0),Km(r),Km(r.next),r=t=s),r=r.next}while(r!==t);return Su(r)}function Pce(t,e,n,r,i,s){let o=t;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&Uce(o,a)){let l=D8(o,a);o=Su(o,o.next),l=Su(l,l.next),Wm(o,e,n,r,i,s,0),Wm(l,e,n,r,i,s,0);return}a=a.next}o=o.next}while(o!==t)}function Ice(t,e,n,r){const i=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:t.length,c=I8(t,a,l,r,!1),c===c.next&&(c.steiner=!0),i.push(kce(c));for(i.sort(Lce),s=0;s<i.length;s++)n=Dce(i[s],n);return n}function Lce(t,e){return t.x-e.x}function Dce(t,e){const n=Bce(t,e);if(!n)return e;const r=D8(n,t);return Su(r,r.next),Su(n,n.next)}function Bce(t,e){let n=e,r=-1/0,i;const s=t.x,o=t.y;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){const p=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(p<=s&&p>r&&(r=p,i=n.x<n.next.x?n:n.next,p===s))return i}n=n.next}while(n!==e);if(!i)return null;const a=i,l=i.x,c=i.y;let u=1/0,f;n=i;do s>=n.x&&n.x>=l&&s!==n.x&&jh(o<c?s:r,o,l,c,o<c?r:s,o,n.x,n.y)&&(f=Math.abs(o-n.y)/(s-n.x),Xm(n,t)&&(f<u||f===u&&(n.x>i.x||n.x===i.x&&Nce(i,n)))&&(i=n,u=f)),n=n.next;while(n!==a);return i}function Nce(t,e){return Dn(t.prev,t,e.prev)<0&&Dn(e.next,t,t.next)<0}function Oce(t,e,n,r){let i=t;do i.z===0&&(i.z=TC(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,Fce(i)}function Fce(t){let e,n,r,i,s,o,a,l,c=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,r=n,a=0,e=0;e<c&&(a++,r=r.nextZ,!!r);e++);for(l=c;a>0||l>0&&r;)a!==0&&(l===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;n=r}s.nextZ=null,c*=2}while(o>1);return t}function TC(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function kce(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function jh(t,e,n,r,i,s,o,a){return(i-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(r-a)>=(n-o)*(e-a)&&(n-o)*(s-a)>=(i-o)*(r-a)}function Uce(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!Vce(t,e)&&(Xm(t,e)&&Xm(e,t)&&zce(t,e)&&(Dn(t.prev,t,e.prev)||Dn(t,e.prev,e))||X1(t,e)&&Dn(t.prev,t,t.next)>0&&Dn(e.prev,e,e.next)>0)}function Dn(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function X1(t,e){return t.x===e.x&&t.y===e.y}function L8(t,e,n,r){const i=iv(Dn(t,e,n)),s=iv(Dn(t,e,r)),o=iv(Dn(n,r,t)),a=iv(Dn(n,r,e));return!!(i!==s&&o!==a||i===0&&rv(t,n,e)||s===0&&rv(t,r,e)||o===0&&rv(n,t,r)||a===0&&rv(n,e,r))}function rv(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function iv(t){return t>0?1:t<0?-1:0}function Vce(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&L8(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function Xm(t,e){return Dn(t.prev,t,t.next)<0?Dn(t,e,t.next)>=0&&Dn(t,t.prev,e)>=0:Dn(t,e,t.prev)<0||Dn(t,t.next,e)<0}function zce(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function D8(t,e){const n=new CC(t.i,t.x,t.y),r=new CC(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function WN(t,e,n,r){const i=new CC(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Km(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function CC(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Hce(t,e,n,r){let i=0;for(let s=e,o=n-r;s<n;s+=r)i+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return i}class Oo{static area(e){const n=e.length;let r=0;for(let i=n-1,s=0;s<n;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return Oo.area(e)<0}static triangulateShape(e,n){const r=[],i=[],s=[];XN(e),KN(r,e);let o=e.length;n.forEach(XN);for(let l=0;l<n.length;l++)i.push(o),o+=n[l].length,KN(r,n[l]);const a=Tce.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function XN(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function KN(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class K1 extends It{constructor(e=new au([new _e(.5,.5),new _e(-.5,.5),new _e(-.5,-.5),new _e(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new it(i,3)),this.setAttribute("uv",new it(s,2)),this.computeVertexNormals();function o(a){const l=[],c=n.curveSegments!==void 0?n.curveSegments:12,u=n.steps!==void 0?n.steps:1,f=n.depth!==void 0?n.depth:1;let p=n.bevelEnabled!==void 0?n.bevelEnabled:!0,m=n.bevelThickness!==void 0?n.bevelThickness:.2,y=n.bevelSize!==void 0?n.bevelSize:m-.1,S=n.bevelOffset!==void 0?n.bevelOffset:0,v=n.bevelSegments!==void 0?n.bevelSegments:3;const g=n.extrudePath,_=n.UVGenerator!==void 0?n.UVGenerator:Gce;let A,E=!1,b,C,P,L;g&&(A=g.getSpacedPoints(u),E=!0,p=!1,b=g.computeFrenetFrames(u,!1),C=new k,P=new k,L=new k),p||(v=0,m=0,y=0,S=0);const N=a.extractPoints(c);let T=N.shape;const D=N.holes;if(!Oo.isClockWise(T)){T=T.reverse();for(let V=0,he=D.length;V<he;V++){const ie=D[V];Oo.isClockWise(ie)&&(D[V]=ie.reverse())}}const j=Oo.triangulateShape(T,D),H=T;for(let V=0,he=D.length;V<he;V++){const ie=D[V];T=T.concat(ie)}function q(V,he,ie){return he||console.error("THREE.ExtrudeGeometry: vec does not exist"),V.clone().addScaledVector(he,ie)}const Z=T.length,ae=j.length;function O(V,he,ie){let ye,le,be;const Ee=V.x-he.x,F=V.y-he.y,B=ie.x-V.x,J=ie.y-V.y,xe=Ee*Ee+F*F,Se=Ee*J-F*B;if(Math.abs(Se)>Number.EPSILON){const we=Math.sqrt(xe),Qe=Math.sqrt(B*B+J*J),Ne=he.x-F/we,Ve=he.y+Ee/we,ct=ie.x-J/Qe,wt=ie.y+B/Qe,Re=((ct-Ne)*J-(wt-Ve)*B)/(Ee*J-F*B);ye=Ne+Ee*Re-V.x,le=Ve+F*Re-V.y;const Gt=ye*ye+le*le;if(Gt<=2)return new _e(ye,le);be=Math.sqrt(Gt/2)}else{let we=!1;Ee>Number.EPSILON?B>Number.EPSILON&&(we=!0):Ee<-Number.EPSILON?B<-Number.EPSILON&&(we=!0):Math.sign(F)===Math.sign(J)&&(we=!0),we?(ye=-F,le=Ee,be=Math.sqrt(xe)):(ye=Ee,le=F,be=Math.sqrt(xe/2))}return new _e(ye/be,le/be)}const W=[];for(let V=0,he=H.length,ie=he-1,ye=V+1;V<he;V++,ie++,ye++)ie===he&&(ie=0),ye===he&&(ye=0),W[V]=O(H[V],H[ie],H[ye]);const K=[];let Y,te=W.concat();for(let V=0,he=D.length;V<he;V++){const ie=D[V];Y=[];for(let ye=0,le=ie.length,be=le-1,Ee=ye+1;ye<le;ye++,be++,Ee++)be===le&&(be=0),Ee===le&&(Ee=0),Y[ye]=O(ie[ye],ie[be],ie[Ee]);K.push(Y),te=te.concat(Y)}for(let V=0;V<v;V++){const he=V/v,ie=m*Math.cos(he*Math.PI/2),ye=y*Math.sin(he*Math.PI/2)+S;for(let le=0,be=H.length;le<be;le++){const Ee=q(H[le],W[le],ye);Pe(Ee.x,Ee.y,-ie)}for(let le=0,be=D.length;le<be;le++){const Ee=D[le];Y=K[le];for(let F=0,B=Ee.length;F<B;F++){const J=q(Ee[F],Y[F],ye);Pe(J.x,J.y,-ie)}}}const Te=y+S;for(let V=0;V<Z;V++){const he=p?q(T[V],te[V],Te):T[V];E?(P.copy(b.normals[0]).multiplyScalar(he.x),C.copy(b.binormals[0]).multiplyScalar(he.y),L.copy(A[0]).add(P).add(C),Pe(L.x,L.y,L.z)):Pe(he.x,he.y,0)}for(let V=1;V<=u;V++)for(let he=0;he<Z;he++){const ie=p?q(T[he],te[he],Te):T[he];E?(P.copy(b.normals[V]).multiplyScalar(ie.x),C.copy(b.binormals[V]).multiplyScalar(ie.y),L.copy(A[V]).add(P).add(C),Pe(L.x,L.y,L.z)):Pe(ie.x,ie.y,f/u*V)}for(let V=v-1;V>=0;V--){const he=V/v,ie=m*Math.cos(he*Math.PI/2),ye=y*Math.sin(he*Math.PI/2)+S;for(let le=0,be=H.length;le<be;le++){const Ee=q(H[le],W[le],ye);Pe(Ee.x,Ee.y,f+ie)}for(let le=0,be=D.length;le<be;le++){const Ee=D[le];Y=K[le];for(let F=0,B=Ee.length;F<B;F++){const J=q(Ee[F],Y[F],ye);E?Pe(J.x,J.y+A[u-1].y,A[u-1].x+ie):Pe(J.x,J.y,f+ie)}}}ne(),de();function ne(){const V=i.length/3;if(p){let he=0,ie=Z*he;for(let ye=0;ye<ae;ye++){const le=j[ye];$e(le[2]+ie,le[1]+ie,le[0]+ie)}he=u+v*2,ie=Z*he;for(let ye=0;ye<ae;ye++){const le=j[ye];$e(le[0]+ie,le[1]+ie,le[2]+ie)}}else{for(let he=0;he<ae;he++){const ie=j[he];$e(ie[2],ie[1],ie[0])}for(let he=0;he<ae;he++){const ie=j[he];$e(ie[0]+Z*u,ie[1]+Z*u,ie[2]+Z*u)}}r.addGroup(V,i.length/3-V,0)}function de(){const V=i.length/3;let he=0;Ae(H,he),he+=H.length;for(let ie=0,ye=D.length;ie<ye;ie++){const le=D[ie];Ae(le,he),he+=le.length}r.addGroup(V,i.length/3-V,1)}function Ae(V,he){let ie=V.length;for(;--ie>=0;){const ye=ie;let le=ie-1;le<0&&(le=V.length-1);for(let be=0,Ee=u+v*2;be<Ee;be++){const F=Z*be,B=Z*(be+1),J=he+ye+F,xe=he+le+F,Se=he+le+B,we=he+ye+B;Ue(J,xe,Se,we)}}}function Pe(V,he,ie){l.push(V),l.push(he),l.push(ie)}function $e(V,he,ie){ce(V),ce(he),ce(ie);const ye=i.length/3,le=_.generateTopUV(r,i,ye-3,ye-2,ye-1);oe(le[0]),oe(le[1]),oe(le[2])}function Ue(V,he,ie,ye){ce(V),ce(he),ce(ye),ce(he),ce(ie),ce(ye);const le=i.length/3,be=_.generateSideWallUV(r,i,le-6,le-3,le-2,le-1);oe(be[0]),oe(be[1]),oe(be[3]),oe(be[1]),oe(be[2]),oe(be[3])}function ce(V){i.push(l[V*3+0]),i.push(l[V*3+1]),i.push(l[V*3+2])}function oe(V){s.push(V.x),s.push(V.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,r=this.parameters.options;return jce(n,r,e)}static fromJSON(e,n){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=n[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new hx[i.type]().fromJSON(i)),new K1(r,e.options)}}const Gce={generateTopUV:function(t,e,n,r,i){const s=e[n*3],o=e[n*3+1],a=e[r*3],l=e[r*3+1],c=e[i*3],u=e[i*3+1];return[new _e(s,o),new _e(a,l),new _e(c,u)]},generateSideWallUV:function(t,e,n,r,i,s){const o=e[n*3],a=e[n*3+1],l=e[n*3+2],c=e[r*3],u=e[r*3+1],f=e[r*3+2],p=e[i*3],m=e[i*3+1],y=e[i*3+2],S=e[s*3],v=e[s*3+1],g=e[s*3+2];return Math.abs(a-u)<Math.abs(o-c)?[new _e(o,1-l),new _e(c,1-f),new _e(p,1-y),new _e(S,1-g)]:[new _e(a,1-l),new _e(u,1-f),new _e(m,1-y),new _e(v,1-g)]}};function jce(t,e,n){if(n.shapes=[],Array.isArray(t))for(let r=0,i=t.length;r<i;r++){const s=t[r];n.shapes.push(s.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class $1 extends ec{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new $1(e.radius,e.detail)}}class Ng extends ec{constructor(e=1,n=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Ng(e.radius,e.detail)}}class J1 extends It{constructor(e=.5,n=1,r=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],c=[],u=[];let f=e;const p=(n-e)/i,m=new k,y=new _e;for(let S=0;S<=i;S++){for(let v=0;v<=r;v++){const g=s+v/r*o;m.x=f*Math.cos(g),m.y=f*Math.sin(g),l.push(m.x,m.y,m.z),c.push(0,0,1),y.x=(m.x/n+1)/2,y.y=(m.y/n+1)/2,u.push(y.x,y.y)}f+=p}for(let S=0;S<i;S++){const v=S*(r+1);for(let g=0;g<r;g++){const _=g+v,A=_,E=_+r+1,b=_+r+2,C=_+1;a.push(A,E,C),a.push(E,b,C)}}this.setIndex(a),this.setAttribute("position",new it(l,3)),this.setAttribute("normal",new it(c,3)),this.setAttribute("uv",new it(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new J1(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class q1 extends It{constructor(e=new au([new _e(0,.5),new _e(-.5,-.5),new _e(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new it(i,3)),this.setAttribute("normal",new it(s,3)),this.setAttribute("uv",new it(o,2));function c(u){const f=i.length/3,p=u.extractPoints(n);let m=p.shape;const y=p.holes;Oo.isClockWise(m)===!1&&(m=m.reverse());for(let v=0,g=y.length;v<g;v++){const _=y[v];Oo.isClockWise(_)===!0&&(y[v]=_.reverse())}const S=Oo.triangulateShape(m,y);for(let v=0,g=y.length;v<g;v++){const _=y[v];m=m.concat(_)}for(let v=0,g=m.length;v<g;v++){const _=m[v];i.push(_.x,_.y,0),s.push(0,0,1),o.push(_.x,_.y)}for(let v=0,g=S.length;v<g;v++){const _=S[v],A=_[0]+f,E=_[1]+f,b=_[2]+f;r.push(A,E,b),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return Wce(n,e)}static fromJSON(e,n){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=n[e.shapes[i]];r.push(o)}return new q1(r,e.curveSegments)}}function Wce(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,r=t.length;n<r;n++){const i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}class Og extends It{constructor(e=1,n=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let c=0;const u=[],f=new k,p=new k,m=[],y=[],S=[],v=[];for(let g=0;g<=r;g++){const _=[],A=g/r;let E=0;g===0&&o===0?E=.5/n:g===r&&l===Math.PI&&(E=-.5/n);for(let b=0;b<=n;b++){const C=b/n;f.x=-e*Math.cos(i+C*s)*Math.sin(o+A*a),f.y=e*Math.cos(o+A*a),f.z=e*Math.sin(i+C*s)*Math.sin(o+A*a),y.push(f.x,f.y,f.z),p.copy(f).normalize(),S.push(p.x,p.y,p.z),v.push(C+E,1-A),_.push(c++)}u.push(_)}for(let g=0;g<r;g++)for(let _=0;_<n;_++){const A=u[g][_+1],E=u[g][_],b=u[g+1][_],C=u[g+1][_+1];(g!==0||o>0)&&m.push(A,E,C),(g!==r-1||l<Math.PI)&&m.push(E,b,C)}this.setIndex(m),this.setAttribute("position",new it(y,3)),this.setAttribute("normal",new it(S,3)),this.setAttribute("uv",new it(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Og(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Y1 extends ec{constructor(e=1,n=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Y1(e.radius,e.detail)}}class Q1 extends It{constructor(e=1,n=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],c=[],u=new k,f=new k,p=new k;for(let m=0;m<=r;m++)for(let y=0;y<=i;y++){const S=y/i*s,v=m/r*Math.PI*2;f.x=(e+n*Math.cos(v))*Math.cos(S),f.y=(e+n*Math.cos(v))*Math.sin(S),f.z=n*Math.sin(v),a.push(f.x,f.y,f.z),u.x=e*Math.cos(S),u.y=e*Math.sin(S),p.subVectors(f,u).normalize(),l.push(p.x,p.y,p.z),c.push(y/i),c.push(m/r)}for(let m=1;m<=r;m++)for(let y=1;y<=i;y++){const S=(i+1)*m+y-1,v=(i+1)*(m-1)+y-1,g=(i+1)*(m-1)+y,_=(i+1)*m+y;o.push(S,v,_),o.push(v,g,_)}this.setIndex(o),this.setAttribute("position",new it(a,3)),this.setAttribute("normal",new it(l,3)),this.setAttribute("uv",new it(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Q1(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Z1 extends It{constructor(e=1,n=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],c=[],u=[],f=new k,p=new k,m=new k,y=new k,S=new k,v=new k,g=new k;for(let A=0;A<=r;++A){const E=A/r*s*Math.PI*2;_(E,s,o,e,m),_(E+.01,s,o,e,y),v.subVectors(y,m),g.addVectors(y,m),S.crossVectors(v,g),g.crossVectors(S,v),S.normalize(),g.normalize();for(let b=0;b<=i;++b){const C=b/i*Math.PI*2,P=-n*Math.cos(C),L=n*Math.sin(C);f.x=m.x+(P*g.x+L*S.x),f.y=m.y+(P*g.y+L*S.y),f.z=m.z+(P*g.z+L*S.z),l.push(f.x,f.y,f.z),p.subVectors(f,m).normalize(),c.push(p.x,p.y,p.z),u.push(A/r),u.push(b/i)}}for(let A=1;A<=r;A++)for(let E=1;E<=i;E++){const b=(i+1)*(A-1)+(E-1),C=(i+1)*A+(E-1),P=(i+1)*A+E,L=(i+1)*(A-1)+E;a.push(b,C,L),a.push(C,P,L)}this.setIndex(a),this.setAttribute("position",new it(l,3)),this.setAttribute("normal",new it(c,3)),this.setAttribute("uv",new it(u,2));function _(A,E,b,C,P){const L=Math.cos(A),N=Math.sin(A),T=b/E*A,D=Math.cos(T);P.x=C*(2+D)*.5*L,P.y=C*(2+D)*N*.5,P.z=C*Math.sin(T)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Z1(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class eS extends It{constructor(e=new KR(new k(-1,-1,0),new k(-1,1,0),new k(1,1,0)),n=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(n,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new k,l=new k,c=new _e;let u=new k;const f=[],p=[],m=[],y=[];S(),this.setIndex(y),this.setAttribute("position",new it(f,3)),this.setAttribute("normal",new it(p,3)),this.setAttribute("uv",new it(m,2));function S(){for(let A=0;A<n;A++)v(A);v(s===!1?n:0),_(),g()}function v(A){u=e.getPointAt(A/n,u);const E=o.normals[A],b=o.binormals[A];for(let C=0;C<=i;C++){const P=C/i*Math.PI*2,L=Math.sin(P),N=-Math.cos(P);l.x=N*E.x+L*b.x,l.y=N*E.y+L*b.y,l.z=N*E.z+L*b.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=u.x+r*l.x,a.y=u.y+r*l.y,a.z=u.z+r*l.z,f.push(a.x,a.y,a.z)}}function g(){for(let A=1;A<=n;A++)for(let E=1;E<=i;E++){const b=(i+1)*(A-1)+(E-1),C=(i+1)*A+(E-1),P=(i+1)*A+E,L=(i+1)*(A-1)+E;y.push(b,C,L),y.push(C,P,L)}}function _(){for(let A=0;A<=n;A++)for(let E=0;E<=i;E++)c.x=A/n,c.y=E/i,m.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new eS(new hx[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class B8 extends It{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],r=new Set,i=new k,s=new k;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const f=l[c],p=f.start,m=f.count;for(let y=p,S=p+m;y<S;y+=3)for(let v=0;v<3;v++){const g=a.getX(y+v),_=a.getX(y+(v+1)%3);i.fromBufferAttribute(o,g),s.fromBufferAttribute(o,_),$N(i,s,r)===!0&&(n.push(i.x,i.y,i.z),n.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+c,f=3*a+(c+1)%3;i.fromBufferAttribute(o,u),s.fromBufferAttribute(o,f),$N(i,s,r)===!0&&(n.push(i.x,i.y,i.z),n.push(s.x,s.y,s.z))}}this.setAttribute("position",new it(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function $N(t,e,n){const r=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(r)===!0||n.has(i)===!0?!1:(n.add(r),n.add(i),!0)}var JN=Object.freeze({__proto__:null,BoxGeometry:Ru,CapsuleGeometry:H1,CircleGeometry:G1,ConeGeometry:j1,CylinderGeometry:ad,DodecahedronGeometry:W1,EdgesGeometry:P8,ExtrudeGeometry:K1,IcosahedronGeometry:$1,LatheGeometry:Bg,OctahedronGeometry:Ng,PlaneGeometry:sd,PolyhedronGeometry:ec,RingGeometry:J1,ShapeGeometry:q1,SphereGeometry:Og,TetrahedronGeometry:Y1,TorusGeometry:Q1,TorusKnotGeometry:Z1,TubeGeometry:eS,WireframeGeometry:B8});class N8 extends lr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new ze(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class O8 extends io{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Fg extends lr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ze(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ze(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Zl,this.normalScale=new _e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Xo extends Fg{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new _e(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Gn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ze(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ze(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ze(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class F8 extends lr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ze(16777215),this.specular=new ze(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ze(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Zl,this.normalScale=new _e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Tg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class k8 extends lr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ze(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ze(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Zl,this.normalScale=new _e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class U8 extends lr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Zl,this.normalScale=new _e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class V8 extends lr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new ze(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ze(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Zl,this.normalScale=new _e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Tg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class z8 extends lr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ze(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Zl,this.normalScale=new _e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class H8 extends li{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function $c(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function G8(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function j8(t){function e(i,s){return t[i]-t[s]}const n=t.length,r=new Array(n);for(let i=0;i!==n;++i)r[i]=i;return r.sort(e),r}function bC(t,e,n){const r=t.length,i=new t.constructor(r);for(let s=0,o=0;o!==r;++s){const a=n[s]*e;for(let l=0;l!==e;++l)i[o++]=t[a+l]}return i}function JR(t,e,n,r){let i=1,s=t[0];for(;s!==void 0&&s[r]===void 0;)s=t[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),n.push.apply(n,o)),s=t[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(n,n.length)),s=t[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),n.push(o)),s=t[i++];while(s!==void 0)}function Xce(t,e,n,r,i=30){const s=t.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),f=[],p=[];for(let m=0;m<c.times.length;++m){const y=c.times[m]*i;if(!(y<n||y>=r)){f.push(c.times[m]);for(let S=0;S<u;++S)p.push(c.values[m*u+S])}}f.length!==0&&(c.times=$c(f,c.times.constructor),c.values=$c(p,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function Kce(t,e=0,n=t,r=30){r<=0&&(r=30);const i=n.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=n.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=t.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===l});if(c===void 0)continue;let u=0;const f=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=f/3);let p=0;const m=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);const y=a.times.length-1;let S;if(s<=a.times[0]){const g=u,_=f-u;S=a.values.slice(g,_)}else if(s>=a.times[y]){const g=y*f+u,_=g+f-u;S=a.values.slice(g,_)}else{const g=a.createInterpolant(),_=u,A=f-u;g.evaluate(s),S=g.resultBuffer.slice(_,A)}l==="quaternion"&&new Tr().fromArray(S).normalize().conjugate().toArray(S);const v=c.times.length;for(let g=0;g<v;++g){const _=g*m+p;if(l==="quaternion")Tr.multiplyQuaternionsFlat(c.values,_,S,0,c.values,_);else{const A=m-p*2;for(let E=0;E<A;++E)c.values[_+E]-=S[E]}}}return t.blendMode=AR,t}const $ce={convertArray:$c,isTypedArray:G8,getKeyframeOrder:j8,sortedArray:bC,flattenJSON:JR,subclip:Xce,makeClipAdditive:Kce};class ld{constructor(e,n,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let r=this._cachedIndex,i=n[r],s=n[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=n[++r],e<i)break t}o=n.length;break n}if(!(e>=s)){const a=n[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=n[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<n[a]?o=a:r=a+1}if(i=n[r],s=n[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)n[o]=r[s+o];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class W8 extends ld{constructor(e,n,r,i){super(e,n,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Wc,endingEnd:Wc}}intervalChanged_(e,n,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case Xc:s=e,a=2*n-r;break;case Fm:s=i.length-2,a=n+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case Xc:o=e,l=2*r-n;break;case Fm:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=n}const c=(r-n)*.5,u=this.valueSize;this._weightPrev=c/(n-a),this._weightNext=c/(l-r),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,f=this._offsetNext,p=this._weightPrev,m=this._weightNext,y=(r-n)/(i-n),S=y*y,v=S*y,g=-p*v+2*p*S-p*y,_=(1+p)*v+(-1.5-2*p)*S+(-.5+p)*y+1,A=(-1-m)*v+(1.5+m)*S+.5*y,E=m*v-m*S;for(let b=0;b!==a;++b)s[b]=g*o[u+b]+_*o[c+b]+A*o[l+b]+E*o[f+b];return s}}class qR extends ld{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(r-n)/(i-n),f=1-u;for(let p=0;p!==a;++p)s[p]=o[c+p]*f+o[l+p]*u;return s}}class X8 extends ld{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class lo{constructor(e,n,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=$c(n,this.TimeBufferType),this.values=$c(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let r;if(n.toJSON!==this.toJSON)r=n.toJSON(e);else{r={name:e.name,times:$c(e.times,Array),values:$c(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new X8(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new qR(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new W8(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case Of:n=this.InterpolantFactoryMethodDiscrete;break;case xu:n=this.InterpolantFactoryMethodLinear;break;case Xv:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Of;case this.InterpolantFactoryMethodLinear:return xu;case this.InterpolantFactoryMethodSmooth:return Xv}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]*=e}return this}trim(e,n){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>n;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=r.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&G8(i))for(let a=0,l=i.length;a!==l;++a){const c=i[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),n=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===Xv,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(i)l=!0;else{const f=a*r,p=f-r,m=f+r;for(let y=0;y!==r;++y){const S=n[f+y];if(S!==n[p+y]||S!==n[m+y]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const f=a*r,p=o*r;for(let m=0;m!==r;++m)n[p+m]=n[f+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,c=0;c!==r;++c)n[l+c]=n[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=n.slice(0,o*r)):(this.times=e,this.values=n),this}clone(){const e=this.times.slice(),n=this.values.slice(),r=this.constructor,i=new r(this.name,e,n);return i.createInterpolant=this.createInterpolant,i}}lo.prototype.TimeBufferType=Float32Array;lo.prototype.ValueBufferType=Float32Array;lo.prototype.DefaultInterpolation=xu;class Pu extends lo{}Pu.prototype.ValueTypeName="bool";Pu.prototype.ValueBufferType=Array;Pu.prototype.DefaultInterpolation=Of;Pu.prototype.InterpolantFactoryMethodLinear=void 0;Pu.prototype.InterpolantFactoryMethodSmooth=void 0;class YR extends lo{}YR.prototype.ValueTypeName="color";class Vf extends lo{}Vf.prototype.ValueTypeName="number";class K8 extends ld{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-n)/(i-n);let c=e*a;for(let u=c+a;c!==u;c+=4)Tr.slerpFlat(s,0,o,c-a,o,c,l);return s}}class Wl extends lo{InterpolantFactoryMethodLinear(e){return new K8(this.times,this.values,this.getValueSize(),e)}}Wl.prototype.ValueTypeName="quaternion";Wl.prototype.DefaultInterpolation=xu;Wl.prototype.InterpolantFactoryMethodSmooth=void 0;class Iu extends lo{}Iu.prototype.ValueTypeName="string";Iu.prototype.ValueBufferType=Array;Iu.prototype.DefaultInterpolation=Of;Iu.prototype.InterpolantFactoryMethodLinear=void 0;Iu.prototype.InterpolantFactoryMethodSmooth=void 0;class zf extends lo{}zf.prototype.ValueTypeName="vector";class Hf{constructor(e,n=-1,r,i=L1){this.name=e,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=Zi(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)n.push(qce(r[o]).scale(i));const s=new this(e.name,e.duration,n,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const n=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)n.push(lo.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,n,r,i){const s=n.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=j8(l);l=bC(l,1,u),c=bC(c,1,u),!i&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new Vf(".morphTargetInfluences["+n[a].name+"]",l,c).scale(1/r))}return new this(e,-1,o)}static findByName(e,n){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===n)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,n,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const f=u[1];let p=i[f];p||(i[f]=p=[]),p.push(c)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],n,r));return o}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(f,p,m,y,S){if(m.length!==0){const v=[],g=[];JR(m,v,g,y),v.length!==0&&S.push(new f(p,v,g))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let f=0;f<c.length;f++){const p=c[f].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const m={};let y;for(y=0;y<p.length;y++)if(p[y].morphTargets)for(let S=0;S<p[y].morphTargets.length;S++)m[p[y].morphTargets[S]]=-1;for(const S in m){const v=[],g=[];for(let _=0;_!==p[y].morphTargets.length;++_){const A=p[y];v.push(A.time),g.push(A.morphTarget===S?1:0)}i.push(new Vf(".morphTargetInfluence["+S+"]",v,g))}l=m.length*o}else{const m=".bones["+n[f].name+"]";r(zf,m+".position",p,"pos",i),r(Wl,m+".quaternion",p,"rot",i),r(zf,m+".scale",p,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let n=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];n=Math.max(n,s.times[s.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Jce(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Vf;case"vector":case"vector2":case"vector3":case"vector4":return zf;case"color":return YR;case"quaternion":return Wl;case"bool":case"boolean":return Pu;case"string":return Iu}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function qce(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Jce(t.type);if(t.times===void 0){const n=[],r=[];JR(t.keys,n,r,"value"),t.times=n,t.values=r}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const ya={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class QR{constructor(e,n,r){const i=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(u){a++,s===!1&&i.onStart!==void 0&&i.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,i.onProgress!==void 0&&i.onProgress(u,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(u){i.onError!==void 0&&i.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,f){return c.push(u,f),this},this.removeHandler=function(u){const f=c.indexOf(u);return f!==-1&&c.splice(f,2),this},this.getHandler=function(u){for(let f=0,p=c.length;f<p;f+=2){const m=c[f],y=c[f+1];if(m.global&&(m.lastIndex=0),m.test(u))return y}return null}}}const Wh=new QR;class ci{constructor(e){this.manager=e!==void 0?e:Wh,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(i,s){r.load(e,i,n,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}ci.DEFAULT_MATERIAL_NAME="__DEFAULT";const oa={};class Yce extends Error{constructor(e,n){super(e),this.response=n}}class is extends ci{constructor(e){super(e)}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=ya.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(s),this.manager.itemEnd(e)},0),s;if(oa[e]!==void 0){oa[e].push({onLoad:n,onProgress:r,onError:i});return}oa[e]=[],oa[e].push({onLoad:n,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=oa[e],f=c.body.getReader(),p=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),m=p?parseInt(p):0,y=m!==0;let S=0;const v=new ReadableStream({start(g){_();function _(){f.read().then(({done:A,value:E})=>{if(A)g.close();else{S+=E.byteLength;const b=new ProgressEvent("progress",{lengthComputable:y,loaded:S,total:m});for(let C=0,P=u.length;C<P;C++){const L=u[C];L.onProgress&&L.onProgress(b)}g.enqueue(E),_()}})}}});return new Response(v)}else throw new Yce(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a===void 0)return c.text();{const f=/charset="?([^;"\s]*)"?/i.exec(a),p=f&&f[1]?f[1].toLowerCase():void 0,m=new TextDecoder(p);return c.arrayBuffer().then(y=>m.decode(y))}}}).then(c=>{ya.add(e,c);const u=oa[e];delete oa[e];for(let f=0,p=u.length;f<p;f++){const m=u[f];m.onLoad&&m.onLoad(c)}}).catch(c=>{const u=oa[e];if(u===void 0)throw this.manager.itemError(e),c;delete oa[e];for(let f=0,p=u.length;f<p;f++){const m=u[f];m.onError&&m.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Qce extends ci{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new is(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n=[];for(let r=0;r<e.length;r++){const i=Hf.parse(e[r]);n.push(i)}return n}}class Zce extends ci{constructor(e){super(e)}load(e,n,r,i){const s=this,o=[],a=new V1,l=new is(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(f){l.load(e[f],function(p){const m=s.parse(p,!0);o[f]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},c+=1,c===6&&(m.mipmapCount===1&&(a.minFilter=Sn),a.image=o,a.format=m.format,a.needsUpdate=!0,n&&n(a))},r,i)}if(Array.isArray(e))for(let f=0,p=e.length;f<p;++f)u(f);else l.load(e,function(f){const p=s.parse(f,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let y=0;y<m;y++){o[y]={mipmaps:[]};for(let S=0;S<p.mipmapCount;S++)o[y].mipmaps.push(p.mipmaps[y*p.mipmapCount+S]),o[y].format=p.format,o[y].width=p.width,o[y].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=Sn),a.format=p.format,a.needsUpdate=!0,n&&n(a)},r,i);return a}}class $m extends ci{constructor(e){super(e)}load(e,n,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=ya.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o;const a=Gm("img");function l(){u(),ya.add(e,this),n&&n(this),s.manager.itemEnd(e)}function c(f){u(),i&&i(f),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class eue extends ci{constructor(e){super(e)}load(e,n,r,i){const s=new Pg;s.colorSpace=fr;const o=new $m(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,a===6&&(s.needsUpdate=!0,n&&n(s))},void 0,i)}for(let c=0;c<e.length;++c)l(c);return s}}class tue extends ci{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new ou,a=new is(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let c;try{c=s.parse(l)}catch(u){if(i!==void 0)i(u);else{console.error(u);return}}c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:kr,o.wrapT=c.wrapT!==void 0?c.wrapT:kr,o.magFilter=c.magFilter!==void 0?c.magFilter:Sn,o.minFilter=c.minFilter!==void 0?c.minFilter:Sn,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0?o.colorSpace=c.colorSpace:c.encoding!==void 0&&(o.encoding=c.encoding),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=Is),c.mipmapCount===1&&(o.minFilter=Sn),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,n&&n(o,c)},r,i),o}}class $8 extends ci{constructor(e){super(e)}load(e,n,r,i){const s=new Mn,o=new $m(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,n!==void 0&&n(s)},r,i),s}}class tc extends Jt{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new ze(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}class J8 extends tc{constructor(e,n,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Jt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new ze(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const hE=new ft,qN=new k,YN=new k;class ZR{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new _e(512,512),this.map=null,this.mapPass=null,this.matrix=new ft,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ig,this._frameExtents=new _e(1,1),this._viewportCount=1,this._viewports=[new cn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;qN.setFromMatrixPosition(e.matrixWorld),n.position.copy(qN),YN.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(YN),n.updateMatrixWorld(),hE.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(hE),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(hE)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class nue extends ZR{constructor(){super(new wn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,r=Ff*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||n.far;(r!==n.fov||i!==n.aspect||s!==n.far)&&(n.fov=r,n.aspect=i,n.far=s,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class eP extends tc{constructor(e,n,r=0,i=Math.PI/3,s=0,o=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Jt.DEFAULT_UP),this.updateMatrix(),this.target=new Jt,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new nue}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const QN=new ft,Yd=new k,fE=new k;class rue extends ZR{constructor(){super(new wn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new _e(4,2),this._viewportCount=6,this._viewports=[new cn(2,1,1,1),new cn(0,1,1,1),new cn(3,1,1,1),new cn(1,1,1,1),new cn(3,0,1,1),new cn(1,0,1,1)],this._cubeDirections=[new k(1,0,0),new k(-1,0,0),new k(0,0,1),new k(0,0,-1),new k(0,1,0),new k(0,-1,0)],this._cubeUps=[new k(0,1,0),new k(0,1,0),new k(0,1,0),new k(0,1,0),new k(0,0,1),new k(0,0,-1)]}updateMatrices(e,n=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),Yd.setFromMatrixPosition(e.matrixWorld),r.position.copy(Yd),fE.copy(r.position),fE.add(this._cubeDirections[n]),r.up.copy(this._cubeUps[n]),r.lookAt(fE),r.updateMatrixWorld(),i.makeTranslation(-Yd.x,-Yd.y,-Yd.z),QN.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(QN)}}class tP extends tc{constructor(e,n,r=0,i=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new rue}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class iue extends ZR{constructor(){super(new Ls(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class nP extends tc{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Jt.DEFAULT_UP),this.updateMatrix(),this.target=new Jt,this.shadow=new iue}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class q8 extends tc{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class Y8 extends tc{constructor(e,n,r=10,i=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class Q8{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new k)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.282095),n.addScaledVector(o[1],.488603*i),n.addScaledVector(o[2],.488603*s),n.addScaledVector(o[3],.488603*r),n.addScaledVector(o[4],1.092548*(r*i)),n.addScaledVector(o[5],1.092548*(i*s)),n.addScaledVector(o[6],.315392*(3*s*s-1)),n.addScaledVector(o[7],1.092548*(r*s)),n.addScaledVector(o[8],.546274*(r*r-i*i)),n}getIrradianceAt(e,n){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.886227),n.addScaledVector(o[1],2*.511664*i),n.addScaledVector(o[2],2*.511664*s),n.addScaledVector(o[3],2*.511664*r),n.addScaledVector(o[4],2*.429043*r*i),n.addScaledVector(o[5],2*.429043*i*s),n.addScaledVector(o[6],.743125*s*s-.247708),n.addScaledVector(o[7],2*.429043*r*s),n.addScaledVector(o[8],.429043*(r*r-i*i)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,n+i*3);return this}toArray(e=[],n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,n+i*3);return e}static getBasisAt(e,n){const r=e.x,i=e.y,s=e.z;n[0]=.282095,n[1]=.488603*i,n[2]=.488603*s,n[3]=.488603*r,n[4]=1.092548*r*i,n[5]=1.092548*i*s,n[6]=.315392*(3*s*s-1),n[7]=1.092548*r*s,n[8]=.546274*(r*r-i*i)}}class Z8 extends tc{constructor(e=new Q8,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class tS extends ci{constructor(e){super(e),this.textures={}}load(e,n,r,i){const s=this,o=new is(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n=this.textures;function r(s){return n[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),n[s]}const i=tS.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new ze().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new ze().setHex(o.value);break;case"v2":i.uniforms[s].value=new _e().fromArray(o.value);break;case"v3":i.uniforms[s].value=new k().fromArray(o.value);break;case"v4":i.uniforms[s].value=new cn().fromArray(o.value);break;case"m3":i.uniforms[s].value=new kt().fromArray(o.value);break;case"m4":i.uniforms[s].value=new ft().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new _e().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new _e().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const n={ShadowMaterial:N8,SpriteMaterial:kR,RawShaderMaterial:O8,ShaderMaterial:io,PointsMaterial:U1,MeshPhysicalMaterial:Xo,MeshStandardMaterial:Fg,MeshPhongMaterial:F8,MeshToonMaterial:k8,MeshNormalMaterial:U8,MeshLambertMaterial:V8,MeshDepthMaterial:NR,MeshDistanceMaterial:OR,MeshBasicMaterial:Yi,MeshMatcapMaterial:z8,LineDashedMaterial:H8,LineBasicMaterial:li,Material:lr};return new n[e]}}class Fo{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class ez extends It{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class tz extends ci{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new is(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n={},r={};function i(m,y){if(n[y]!==void 0)return n[y];const v=m.interleavedBuffers[y],g=s(m,v.buffer),_=zh(v.type,g),A=new Lg(_,v.stride);return A.uuid=v.uuid,n[y]=A,A}function s(m,y){if(r[y]!==void 0)return r[y];const v=m.arrayBuffers[y],g=new Uint32Array(v).buffer;return r[y]=g,g}const o=e.isInstancedBufferGeometry?new ez:new It,a=e.data.index;if(a!==void 0){const m=zh(a.type,a.array);o.setIndex(new qt(m,1))}const l=e.data.attributes;for(const m in l){const y=l[m];let S;if(y.isInterleavedBufferAttribute){const v=i(e.data,y.data);S=new jl(v,y.itemSize,y.offset,y.normalized)}else{const v=zh(y.type,y.array),g=y.isInstancedBufferAttribute?Uf:qt;S=new g(v,y.itemSize,y.normalized)}y.name!==void 0&&(S.name=y.name),y.usage!==void 0&&S.setUsage(y.usage),o.setAttribute(m,S)}const c=e.data.morphAttributes;if(c)for(const m in c){const y=c[m],S=[];for(let v=0,g=y.length;v<g;v++){const _=y[v];let A;if(_.isInterleavedBufferAttribute){const E=i(e.data,_.data);A=new jl(E,_.itemSize,_.offset,_.normalized)}else{const E=zh(_.type,_.array);A=new qt(E,_.itemSize,_.normalized)}_.name!==void 0&&(A.name=_.name),S.push(A)}o.morphAttributes[m]=S}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let m=0,y=f.length;m!==y;++m){const S=f[m];o.addGroup(S.start,S.count,S.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const m=new k;p.center!==void 0&&m.fromArray(p.center),o.boundingSphere=new Hr(m,p.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class sue extends ci{constructor(e){super(e)}load(e,n,r,i){const s=this,o=this.path===""?Fo.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new is(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(f){i!==void 0&&i(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,n)},r,i)}async loadAsync(e,n){const r=this,i=this.path===""?Fo.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new is(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,n),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,n){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){n!==void 0&&n(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,r),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),n!==void 0){let f=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){f=!0;break}f===!1&&n(c)}return c}async parseAsync(e){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,n),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const n={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new au().fromJSON(e[r]);n[s.uuid]=s}return n}parseSkeletons(e,n){const r={},i={};if(n.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new Dg().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,n){const r={};if(e!==void 0){const i=new tz;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in JN?a=JN[l.type].fromJSON(l,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,n){const r={},i={};if(e!==void 0){const s=new tS;s.setTextures(n);for(let o=0,a=e.length;o<a;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const n={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=Hf.parse(i);n[s.uuid]=s}return n}parseImages(e,n){const r=this,i={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:r.resourcePath+c;return o(u)}else return l.data?{data:zh(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new QR(n);s=new $m(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const f=e[c],p=f.url;if(Array.isArray(p)){const m=[];for(let y=0,S=p.length;y<S;y++){const v=p[y],g=a(v);g!==null&&(g instanceof HTMLImageElement?m.push(g):m.push(new ou(g.data,g.width,g.height)))}i[f.uuid]=new Kc(m)}else{const m=a(f.url);i[f.uuid]=new Kc(m)}}}return i}async parseImagesAsync(e){const n=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:n.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:zh(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new $m(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const u=[];for(let f=0,p=c.length;f<p;f++){const m=c[f],y=await s(m);y!==null&&(y instanceof HTMLImageElement?u.push(y):u.push(new ou(y.data,y.width,y.height)))}r[l.uuid]=new Kc(u)}else{const u=await s(l.url);r[l.uuid]=new Kc(u)}}}return r}parseTextures(e,n){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),n[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=n[a.image],c=l.data;let u;Array.isArray(c)?(u=new Pg,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new ou:u=new Mn,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=r(a.mapping,oue)),a.channel!==void 0&&(u.channel=a.channel),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=r(a.wrap[0],ZN),u.wrapT=r(a.wrap[1],ZN)),a.format!==void 0&&(u.format=a.format),a.internalFormat!==void 0&&(u.internalFormat=a.internalFormat),a.type!==void 0&&(u.type=a.type),a.colorSpace!==void 0&&(u.colorSpace=a.colorSpace),a.encoding!==void 0&&(u.encoding=a.encoding),a.minFilter!==void 0&&(u.minFilter=r(a.minFilter,eO)),a.magFilter!==void 0&&(u.magFilter=r(a.magFilter,eO)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.generateMipmaps!==void 0&&(u.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(u.compareFunction=a.compareFunction),a.userData!==void 0&&(u.userData=a.userData),i[a.uuid]=u}return i}parseObject(e,n,r,i,s){let o;function a(p){return n[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),n[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const m=[];for(let y=0,S=p.length;y<S;y++){const v=p[y];r[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",v),m.push(r[v])}return m}return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),r[p]}}function c(p){return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),i[p]}let u,f;switch(e.type){case"Scene":o=new ux,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new ze(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new F1(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new O1(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new wn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Ls(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new q8(e.color,e.intensity);break;case"DirectionalLight":o=new nP(e.color,e.intensity);break;case"PointLight":o=new tP(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new Y8(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new eP(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new J8(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new Z8().fromJSON(e);break;case"SkinnedMesh":u=a(e.geometry),f=l(e.material),o=new UR(u,f),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":u=a(e.geometry),f=l(e.material),o=new Yn(u,f);break;case"InstancedMesh":u=a(e.geometry),f=l(e.material);const p=e.count,m=e.instanceMatrix,y=e.instanceColor;o=new VR(u,f,p),o.instanceMatrix=new Uf(new Float32Array(m.array),16),y!==void 0&&(o.instanceColor=new Uf(new Float32Array(y.array),y.itemSize));break;case"BatchedMesh":u=a(e.geometry),f=l(e.material),o=new E8(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,f),o.geometry=u,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(S=>{const v=new si;v.min.fromArray(S.boxMin),v.max.fromArray(S.boxMax);const g=new Hr;return g.radius=S.sphereRadius,g.center.fromArray(S.sphereCenter),{boxInitialized:S.boxInitialized,box:v,sphereInitialized:S.sphereInitialized,sphere:g}}),o._maxGeometryCount=e.maxGeometryCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=c(e.matricesTexture.uuid);break;case"LOD":o=new w8;break;case"Line":o=new Ia(a(e.geometry),l(e.material));break;case"LineLoop":o=new zR(a(e.geometry),l(e.material));break;case"LineSegments":o=new oo(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new HR(a(e.geometry),l(e.material));break;case"Sprite":o=new A8(l(e.material));break;case"Group":o=new ga;break;case"Bone":o=new k1;break;default:o=new Jt}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let m=0;m<p.length;m++)o.add(this.parseObject(p[m],n,r,i,s))}if(e.animations!==void 0){const p=e.animations;for(let m=0;m<p.length;m++){const y=p[m];o.animations.push(s[y])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let m=0;m<p.length;m++){const y=p[m],S=o.getObjectByProperty("uuid",y.object);S!==void 0&&o.addLevel(S,y.distance,y.hysteresis)}}return o}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=n[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const oue={UVMapping:P1,CubeReflectionMapping:Pa,CubeRefractionMapping:Hl,EquirectangularReflectionMapping:Bm,EquirectangularRefractionMapping:Nm,CubeUVReflectionMapping:id},ZN={RepeatWrapping:Gl,ClampToEdgeWrapping:kr,MirroredRepeatWrapping:Bf},eO={NearestFilter:zn,NearestMipmapNearestFilter:Om,NearestMipmapLinearFilter:ul,LinearFilter:Sn,LinearMipmapNearestFilter:hf,LinearMipmapLinearFilter:Is};class nz extends ci{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=ya.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(c=>{n&&n(c),s.manager.itemEnd(e)}).catch(c=>{i&&i(c)});return}return setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return ya.add(e,c),n&&n(c),s.manager.itemEnd(e),c}).catch(function(c){i&&i(c),ya.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});ya.add(e,l),s.manager.itemStart(e)}}let sv;class rP{static getContext(){return sv===void 0&&(sv=new(window.AudioContext||window.webkitAudioContext)),sv}static setContext(e){sv=e}}class aue extends ci{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new is(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);rP.getContext().decodeAudioData(c,function(f){n(f)}).catch(a)}catch(c){a(c)}},r,i);function a(l){i?i(l):console.error(l),s.manager.itemError(e)}}}const tO=new ft,nO=new ft,yc=new ft;class lue{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new wn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new wn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,yc.copy(e.projectionMatrix);const i=n.eyeSep/2,s=i*n.near/n.focus,o=n.near*Math.tan(ru*n.fov*.5)/n.zoom;let a,l;nO.elements[12]=-i,tO.elements[12]=i,a=-o*n.aspect+s,l=o*n.aspect+s,yc.elements[0]=2*n.near/(l-a),yc.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(yc),a=-o*n.aspect-s,l=o*n.aspect-s,yc.elements[0]=2*n.near/(l-a),yc.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(yc)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(nO),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(tO)}}class iP{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=rO(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=rO();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function rO(){return(typeof performance>"u"?Date:performance).now()}const vc=new k,iO=new Tr,cue=new k,_c=new k;class uue extends Jt{constructor(){super(),this.type="AudioListener",this.context=rP.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new iP}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(vc,iO,cue),_c.set(0,0,-1).applyQuaternion(iO),n.positionX){const i=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(vc.x,i),n.positionY.linearRampToValueAtTime(vc.y,i),n.positionZ.linearRampToValueAtTime(vc.z,i),n.forwardX.linearRampToValueAtTime(_c.x,i),n.forwardY.linearRampToValueAtTime(_c.y,i),n.forwardZ.linearRampToValueAtTime(_c.z,i),n.upX.linearRampToValueAtTime(r.x,i),n.upY.linearRampToValueAtTime(r.y,i),n.upZ.linearRampToValueAtTime(r.z,i)}else n.setPosition(vc.x,vc.y,vc.z),n.setOrientation(_c.x,_c.y,_c.z,r.x,r.y,r.z)}}class rz extends Jt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const xc=new k,sO=new Tr,hue=new k,Sc=new k;class fue extends rz{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(xc,sO,hue),Sc.set(0,0,1).applyQuaternion(sO);const n=this.panner;if(n.positionX){const r=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(xc.x,r),n.positionY.linearRampToValueAtTime(xc.y,r),n.positionZ.linearRampToValueAtTime(xc.z,r),n.orientationX.linearRampToValueAtTime(Sc.x,r),n.orientationY.linearRampToValueAtTime(Sc.y,r),n.orientationZ.linearRampToValueAtTime(Sc.z,r)}else n.setPosition(xc.x,xc.y,xc.z),n.setOrientation(Sc.x,Sc.y,Sc.z)}}class due{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let r=0;r<n.length;r++)e+=n[r];return e/n.length}}class iz{constructor(e,n,r){this.binding=e,this.valueSize=r;let i,s,o;switch(n){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=n}else{o+=n;const a=n/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const n=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,r=this.buffer,i=e*n+n,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=n*this._origIndex;this._mixBufferRegion(r,i,l,1-s,n)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*n,1,n);for(let l=n,c=n+n;l!==c;++l)if(r[l]!==r[l+n]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,n=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(n,i);for(let s=r,o=i;s!==o;++s)n[s]=n[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let r=e;r<n;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[n+r]=this.buffer[e+r]}_select(e,n,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[n+o]=e[r+o]}_slerp(e,n,r,i){Tr.slerpFlat(e,n,e,n,e,r,i)}_slerpAdditive(e,n,r,i,s){const o=this._workIndex*s;Tr.multiplyQuaternionsFlat(e,o,e,n,e,r),Tr.slerpFlat(e,n,e,n,e,o,i)}_lerp(e,n,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=n+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,n,r,i,s){for(let o=0;o!==s;++o){const a=n+o;e[a]=e[a]+e[r+o]*i}}}const sP="\\[\\]\\.:\\/",pue=new RegExp("["+sP+"]","g"),oP="[^"+sP+"]",mue="[^"+sP.replace("\\.","")+"]",gue=/((?:WC+[\/:])*)/.source.replace("WC",oP),yue=/(WCOD+)?/.source.replace("WCOD",mue),vue=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",oP),_ue=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",oP),xue=new RegExp("^"+gue+yue+vue+_ue+"$"),Sue=["material","materials","bones","map"];class Aue{constructor(e,n,r){const i=r||$t.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,i)}getValue(e,n){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,n)}setValue(e,n){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].unbind()}}class $t{constructor(e,n,r){this.path=n,this.parsedPath=r||$t.parseTrackName(n),this.node=$t.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new $t.Composite(e,n,r):new $t(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(pue,"")}static parseTrackName(e){const n=xue.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);Sue.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===n||a.uuid===n)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[n++]=r[i]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,i=n.propertyName;let s=n.propertyIndex;if(e||(e=$t.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let c=n.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[i];if(o===void 0){const c=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}$t.Composite=Aue;$t.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};$t.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};$t.prototype.GetterByBindingType=[$t.prototype._getValue_direct,$t.prototype._getValue_array,$t.prototype._getValue_arrayElement,$t.prototype._getValue_toArray];$t.prototype.SetterByBindingTypeAndVersioning=[[$t.prototype._setValue_direct,$t.prototype._setValue_direct_setNeedsUpdate,$t.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[$t.prototype._setValue_array,$t.prototype._setValue_array_setNeedsUpdate,$t.prototype._setValue_array_setMatrixWorldNeedsUpdate],[$t.prototype._setValue_arrayElement,$t.prototype._setValue_arrayElement_setNeedsUpdate,$t.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[$t.prototype._setValue_fromArray,$t.prototype._setValue_fromArray_setNeedsUpdate,$t.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class wue{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Zi(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let u=0,f=arguments.length;u!==f;++u){const p=arguments[u],m=p.uuid;let y=n[m];if(y===void 0){y=l++,n[m]=y,e.push(p);for(let S=0,v=o;S!==v;++S)s[S].push(new $t(p,r[S],i[S]))}else if(y<c){a=e[y];const S=--c,v=e[S];n[v.uuid]=y,e[y]=v,n[m]=S,e[S]=p;for(let g=0,_=o;g!==_;++g){const A=s[g],E=A[S];let b=A[y];A[y]=E,b===void 0&&(b=new $t(p,r[g],i[g])),A[S]=b}}else e[y]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,u=n[c];if(u!==void 0&&u>=s){const f=s++,p=e[f];n[p.uuid]=u,e[u]=p,n[c]=f,e[f]=l;for(let m=0,y=i;m!==y;++m){const S=r[m],v=S[f],g=S[u];S[u]=v,S[f]=g}}}this.nCachedObjects_=s}uncache(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,f=n[u];if(f!==void 0)if(delete n[u],f<s){const p=--s,m=e[p],y=--o,S=e[y];n[m.uuid]=f,e[f]=m,n[S.uuid]=p,e[p]=S,e.pop();for(let v=0,g=i;v!==g;++v){const _=r[v],A=_[p],E=_[y];_[f]=A,_[p]=E,_.pop()}}else{const p=--o,m=e[p];p>0&&(n[m.uuid]=f),e[f]=m,e.pop();for(let y=0,S=i;y!==S;++y){const v=r[y];v[f]=v[p],v.pop()}}}this.nCachedObjects_=s}subscribe_(e,n){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,f=new Array(c);i=s.length,r[e]=i,o.push(e),a.push(n),s.push(f);for(let p=u,m=l.length;p!==m;++p){const y=l[p];f[p]=new $t(y,e,n)}return f}unsubscribe_(e){const n=this._bindingsIndicesByPath,r=n[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];n[c]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class sz{constructor(e,n,r=null,i=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=r,this.blendMode=i;const s=n.tracks,o=s.length,a=new Array(o),l={endingStart:Wc,endingEnd:Wc};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=XV,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,r){if(e.fadeOut(n),this.fadeIn(n),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,n),this.warp(a,1,n)}return this}crossFadeTo(e,n,r){return e.crossFadeFrom(this,n,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+r,c[0]=e/o,c[1]=n/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?n=0:(this._startTime=null,n=r*l)}n*=this._updateTimeScale(e);const o=this._updateTime(n),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case AR:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);break;case L1:default:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(o),c[u].accumulate(i,a)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===KV;if(e===0)return s===-1?i:o&&(s&1)===1?n-i:i;if(r===WV){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=n)i=n;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=n||i<0){const a=Math.floor(i/n);i-=n*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?n:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return n-i}return i}_setEndings(e,n,r){const i=this._interpolantSettings;r?(i.endingStart=Xc,i.endingEnd=Xc):(e?i.endingStart=this.zeroSlopeAtStart?Xc:Wc:i.endingStart=Fm,n?i.endingEnd=this.zeroSlopeAtEnd?Xc:Wc:i.endingEnd=Fm)}_scheduleFading(e,n,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=n,a[1]=s+e,l[1]=r,this}}const Eue=new Float32Array(1);class Mue extends Wo{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let f=0;f!==s;++f){const p=i[f],m=p.name;let y=u[m];if(y!==void 0)++y.referenceCount,o[f]=y;else{if(y=o[f],y!==void 0){y._cacheIndex===null&&(++y.referenceCount,this._addInactiveBinding(y,l,m));continue}const S=n&&n._propertyBindings[f].binding.parsedPath;y=new iz($t.create(r,m,S),p.ValueTypeName,p.getValueSize()),++y.referenceCount,this._addInactiveBinding(y,l,m),o[f]=y}a[f].resultBuffer=y.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,r){const i=this._actions,s=this._actionsByClip;let o=s[n];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[n]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const n=this._actions,r=n[n.length-1],i=e._cacheIndex;r._cacheIndex=i,n[i]=r,n.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const f=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete f[p],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const n=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_takeBackAction(e){const n=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_addInactiveBinding(e,n,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[n];o===void 0&&(o={},i[n]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const n=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=n[n.length-1],c=e._cacheIndex;l._cacheIndex=c,n[c]=l,n.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const n=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_takeBackBinding(e){const n=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let r=e[n];return r===void 0&&(r=new qR(new Float32Array(2),new Float32Array(2),1,Eue),r.__cacheIndex=n,e[n]=r),r}_takeBackControlInterpolant(e){const n=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=n[i];e.__cacheIndex=i,n[i]=e,s.__cacheIndex=r,n[r]=s}clipAction(e,n,r){const i=n||this._root,s=i.uuid;let o=typeof e=="string"?Hf.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(r===void 0&&(o!==null?r=o.blendMode:r=L1),l!==void 0){const f=l.actionByRoot[s];if(f!==void 0&&f.blendMode===r)return f;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const u=new sz(this,o,n,r);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,n){const r=n||this._root,i=r.uuid,s=typeof e=="string"?Hf.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let r=n-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const n=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==r;++c)n[c]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,f=n[n.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,f._cacheIndex=u,n[u]=f,n.pop(),this._removeInactiveBindingsForAction(c)}delete i[r]}}uncacheRoot(e){const n=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[n];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[n];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,n){const r=this.existingAction(e,n);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class aP{constructor(e){this.value=e}clone(){return new aP(this.value.clone===void 0?this.value:this.value.clone())}}let Tue=0;class Cue extends Wo{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Tue++}),this.name="",this.usage=zm,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let r=0,i=n.length;r<i;r++){const s=Array.isArray(n[r])?n[r]:[n[r]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class bue extends Lg{constructor(e,n,r=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class Rue{constructor(e,n,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class oz{constructor(e,n,r=0,i=1/0){this.ray=new bu(e,n),this.near=r,this.far=i,this.camera=null,this.layers=new su,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}intersectObject(e,n=!0,r=[]){return RC(e,this,r,n),r.sort(oO),r}intersectObjects(e,n=!0,r=[]){for(let i=0,s=e.length;i<s;i++)RC(e[i],this,r,n);return r.sort(oO),r}}function oO(t,e){return t.distance-e.distance}function RC(t,e,n,r){if(t.layers.test(e.layers)&&t.raycast(e,n),r===!0){const i=t.children;for(let s=0,o=i.length;s<o;s++)RC(i[s],e,n,!0)}}class PC{constructor(e=1,n=0,r=0){return this.radius=e,this.phi=n,this.theta=r,this}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Gn(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Pue{constructor(e=1,n=0,r=0){return this.radius=e,this.theta=n,this.y=r,this}set(e,n,r){return this.radius=e,this.theta=n,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=n,this}clone(){return new this.constructor().copy(this)}}const aO=new _e;class Iue{constructor(e=new _e(1/0,1/0),n=new _e(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=aO.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,aO).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const lO=new k,ov=new k;class Lue{constructor(e=new k,n=new k){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){lO.subVectors(e,this.start),ov.subVectors(this.end,this.start);const r=ov.dot(ov);let s=ov.dot(lO)/r;return n&&(s=Gn(s,0,1)),s}closestPointToPoint(e,n,r){const i=this.closestPointToPointParameter(e,n);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const cO=new k;class Due extends Jt{constructor(e,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const r=new It,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,u=a/l*Math.PI*2;i.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}r.setAttribute("position",new it(i,3));const s=new li({fog:!1,toneMapped:!1});this.cone=new oo(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),cO.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(cO),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Ya=new k,av=new ft,dE=new ft;class Bue extends oo{constructor(e){const n=az(e),r=new It,i=[],s=[],o=new ze(0,0,1),a=new ze(0,1,0);for(let c=0;c<n.length;c++){const u=n[c];u.parent&&u.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new it(i,3)),r.setAttribute("color",new it(s,3));const l=new li({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,r=this.geometry,i=r.getAttribute("position");dE.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<n.length;s++){const a=n[s];a.parent&&a.parent.isBone&&(av.multiplyMatrices(dE,a.matrixWorld),Ya.setFromMatrixPosition(av),i.setXYZ(o,Ya.x,Ya.y,Ya.z),av.multiplyMatrices(dE,a.parent.matrixWorld),Ya.setFromMatrixPosition(av),i.setXYZ(o+1,Ya.x,Ya.y,Ya.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function az(t){const e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,az(t.children[n]));return e}class Nue extends Yn{constructor(e,n,r){const i=new Og(n,4,2),s=new Yi({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Oue=new k,uO=new ze,hO=new ze;class Fue extends Jt{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new Ng(n);i.rotateY(Math.PI*.5),this.material=new Yi({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new qt(o,3)),this.add(new Yn(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");uO.copy(this.light.color),hO.copy(this.light.groundColor);for(let r=0,i=n.count;r<i;r++){const s=r<i/2?uO:hO;n.setXYZ(r,s.r,s.g,s.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Oue.setFromMatrixPosition(this.light.matrixWorld).negate())}}class kue extends oo{constructor(e=10,n=10,r=4473924,i=8947848){r=new ze(r),i=new ze(i);const s=n/2,o=e/n,a=e/2,l=[],c=[];for(let p=0,m=0,y=-a;p<=n;p++,y+=o){l.push(-a,0,y,a,0,y),l.push(y,0,-a,y,0,a);const S=p===s?r:i;S.toArray(c,m),m+=3,S.toArray(c,m),m+=3,S.toArray(c,m),m+=3,S.toArray(c,m),m+=3}const u=new It;u.setAttribute("position",new it(l,3)),u.setAttribute("color",new it(c,3));const f=new li({vertexColors:!0,toneMapped:!1});super(u,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Uue extends oo{constructor(e=10,n=16,r=8,i=64,s=4473924,o=8947848){s=new ze(s),o=new ze(o);const a=[],l=[];if(n>1)for(let f=0;f<n;f++){const p=f/n*(Math.PI*2),m=Math.sin(p)*e,y=Math.cos(p)*e;a.push(0,0,0),a.push(m,0,y);const S=f&1?s:o;l.push(S.r,S.g,S.b),l.push(S.r,S.g,S.b)}for(let f=0;f<r;f++){const p=f&1?s:o,m=e-e/r*f;for(let y=0;y<i;y++){let S=y/i*(Math.PI*2),v=Math.sin(S)*m,g=Math.cos(S)*m;a.push(v,0,g),l.push(p.r,p.g,p.b),S=(y+1)/i*(Math.PI*2),v=Math.sin(S)*m,g=Math.cos(S)*m,a.push(v,0,g),l.push(p.r,p.g,p.b)}}const c=new It;c.setAttribute("position",new it(a,3)),c.setAttribute("color",new it(l,3));const u=new li({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const fO=new k,lv=new k,dO=new k;class Vue extends Jt{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",n===void 0&&(n=1);let i=new It;i.setAttribute("position",new it([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const s=new li({fog:!1,toneMapped:!1});this.lightPlane=new Ia(i,s),this.add(this.lightPlane),i=new It,i.setAttribute("position",new it([0,0,0,0,0,1],3)),this.targetLine=new Ia(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),fO.setFromMatrixPosition(this.light.matrixWorld),lv.setFromMatrixPosition(this.light.target.matrixWorld),dO.subVectors(lv,fO),this.lightPlane.lookAt(lv),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(lv),this.targetLine.scale.z=dO.length()}}const cv=new k,Un=new Rg;class zue extends oo{constructor(e){const n=new It,r=new li({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(y,S){l(y),l(S)}function l(y){i.push(0,0,0),s.push(0,0,0),o[y]===void 0&&(o[y]=[]),o[y].push(i.length/3-1)}n.setAttribute("position",new it(i,3)),n.setAttribute("color",new it(s,3)),super(n,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new ze(16755200),u=new ze(16711680),f=new ze(43775),p=new ze(16777215),m=new ze(3355443);this.setColors(c,u,f,p,m)}setColors(e,n,r,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,n.r,n.g,n.b),a.setXYZ(25,n.r,n.g,n.b),a.setXYZ(26,n.r,n.g,n.b),a.setXYZ(27,n.r,n.g,n.b),a.setXYZ(28,n.r,n.g,n.b),a.setXYZ(29,n.r,n.g,n.b),a.setXYZ(30,n.r,n.g,n.b),a.setXYZ(31,n.r,n.g,n.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,r=1,i=1;Un.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Jn("c",n,e,Un,0,0,-1),Jn("t",n,e,Un,0,0,1),Jn("n1",n,e,Un,-r,-i,-1),Jn("n2",n,e,Un,r,-i,-1),Jn("n3",n,e,Un,-r,i,-1),Jn("n4",n,e,Un,r,i,-1),Jn("f1",n,e,Un,-r,-i,1),Jn("f2",n,e,Un,r,-i,1),Jn("f3",n,e,Un,-r,i,1),Jn("f4",n,e,Un,r,i,1),Jn("u1",n,e,Un,r*.7,i*1.1,-1),Jn("u2",n,e,Un,-r*.7,i*1.1,-1),Jn("u3",n,e,Un,0,i*2,-1),Jn("cf1",n,e,Un,-r,0,1),Jn("cf2",n,e,Un,r,0,1),Jn("cf3",n,e,Un,0,-i,1),Jn("cf4",n,e,Un,0,i,1),Jn("cn1",n,e,Un,-r,0,-1),Jn("cn2",n,e,Un,r,0,-1),Jn("cn3",n,e,Un,0,-i,-1),Jn("cn4",n,e,Un,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Jn(t,e,n,r,i,s,o){cv.set(i,s,o).unproject(r);const a=e[t];if(a!==void 0){const l=n.getAttribute("position");for(let c=0,u=a.length;c<u;c++)l.setXYZ(a[c],cv.x,cv.y,cv.z)}}const uv=new si;class Hue extends oo{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new It;s.setIndex(new qt(r,1)),s.setAttribute("position",new qt(i,3)),super(s,new li({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&uv.setFromObject(this.object),uv.isEmpty())return;const n=uv.min,r=uv.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=n.x,s[4]=r.y,s[5]=r.z,s[6]=n.x,s[7]=n.y,s[8]=r.z,s[9]=r.x,s[10]=n.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=n.z,s[15]=n.x,s[16]=r.y,s[17]=n.z,s[18]=n.x,s[19]=n.y,s[20]=n.z,s[21]=r.x,s[22]=n.y,s[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Gue extends oo{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new It;s.setIndex(new qt(r,1)),s.setAttribute("position",new it(i,3)),super(s,new li({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class jue extends Ia{constructor(e,n=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new It;o.setAttribute("position",new it(s,3)),o.computeBoundingSphere(),super(o,new li({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new It;l.setAttribute("position",new it(a,3)),l.computeBoundingSphere(),this.add(new Yn(l,new Yi({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const pO=new k;let hv,pE;class Wue extends Jt{constructor(e=new k(0,0,1),n=new k(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",hv===void 0&&(hv=new It,hv.setAttribute("position",new it([0,0,0,0,1,0],3)),pE=new ad(0,.5,1,5,1),pE.translate(0,-.5,0)),this.position.copy(n),this.line=new Ia(hv,new li({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Yn(pE,new Yi({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{pO.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(pO,n)}}setLength(e,n=e*.2,r=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(r,n,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Xue extends oo{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new It;i.setAttribute("position",new it(n,3)),i.setAttribute("color",new it(r,3));const s=new li({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,n,r){const i=new ze,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(n),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Kue{constructor(){this.type="ShapePath",this.color=new ze,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new jm,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,r,i){return this.currentPath.quadraticCurveTo(e,n,r,i),this}bezierCurveTo(e,n,r,i,s,o){return this.currentPath.bezierCurveTo(e,n,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(g){const _=[];for(let A=0,E=g.length;A<E;A++){const b=g[A],C=new au;C.curves=b.curves,_.push(C)}return _}function r(g,_){const A=_.length;let E=!1;for(let b=A-1,C=0;C<A;b=C++){let P=_[b],L=_[C],N=L.x-P.x,T=L.y-P.y;if(Math.abs(T)>Number.EPSILON){if(T<0&&(P=_[C],N=-N,L=_[b],T=-T),g.y<P.y||g.y>L.y)continue;if(g.y===P.y){if(g.x===P.x)return!0}else{const D=T*(g.x-P.x)-N*(g.y-P.y);if(D===0)return!0;if(D<0)continue;E=!E}}else{if(g.y!==P.y)continue;if(L.x<=g.x&&g.x<=P.x||P.x<=g.x&&g.x<=L.x)return!0}}return E}const i=Oo.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new au,l.curves=a.curves,c.push(l),c;let u=!i(s[0].getPoints());u=e?!u:u;const f=[],p=[];let m=[],y=0,S;p[y]=void 0,m[y]=[];for(let g=0,_=s.length;g<_;g++)a=s[g],S=a.getPoints(),o=i(S),o=e?!o:o,o?(!u&&p[y]&&y++,p[y]={s:new au,p:S},p[y].s.curves=a.curves,u&&y++,m[y]=[]):m[y].push({h:a,p:S[0]});if(!p[0])return n(s);if(p.length>1){let g=!1,_=0;for(let A=0,E=p.length;A<E;A++)f[A]=[];for(let A=0,E=p.length;A<E;A++){const b=m[A];for(let C=0;C<b.length;C++){const P=b[C];let L=!0;for(let N=0;N<p.length;N++)r(P.p,p[N].p)&&(A!==N&&_++,L?(L=!1,f[N].push(P)):g=!0);L&&f[A].push(P)}}_>0&&g===!1&&(m=f)}let v;for(let g=0,_=p.length;g<_;g++){l=p[g].s,c.push(l),v=m[g];for(let A=0,E=v.length;A<E;A++)l.holes.push(v[A].h)}return c}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Mg}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Mg);const lz=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:pR,AddEquation:cl,AddOperation:PV,AdditiveAnimationBlendMode:AR,AdditiveBlending:GT,AgXToneMapping:NV,AlphaFormat:UV,AlwaysCompare:i8,AlwaysDepth:wV,AlwaysStencilFunc:xC,AmbientLight:q8,AnimationAction:sz,AnimationClip:Hf,AnimationLoader:Qce,AnimationMixer:Mue,AnimationObjectGroup:wue,AnimationUtils:$ce,ArcCurve:M8,ArrayCamera:_8,ArrowHelper:Wue,AttachedBindMode:$T,Audio:rz,AudioAnalyser:due,AudioContext:rP,AudioListener:uue,AudioLoader:aue,AxesHelper:Xue,BackSide:wi,BasicDepthPacking:JV,BasicShadowMap:sV,BatchedMesh:E8,Bone:k1,BooleanKeyframeTrack:Pu,Box2:Iue,Box3:si,Box3Helper:Gue,BoxGeometry:Ru,BoxHelper:Hue,BufferAttribute:qt,BufferGeometry:It,BufferGeometryLoader:tz,ByteType:FV,Cache:ya,Camera:Rg,CameraHelper:zue,CanvasTexture:vce,CapsuleGeometry:H1,CatmullRomCurve3:T8,CineonToneMapping:DV,CircleGeometry:G1,ClampToEdgeWrapping:kr,Clock:iP,Color:ze,ColorKeyframeTrack:YR,ColorManagement:ln,CompressedArrayTexture:gce,CompressedCubeTexture:yce,CompressedTexture:V1,CompressedTextureLoader:Zce,ConeGeometry:j1,ConstantAlphaFactor:xV,ConstantColorFactor:vV,CubeCamera:IR,CubeReflectionMapping:Pa,CubeRefractionMapping:Hl,CubeTexture:Pg,CubeTextureLoader:eue,CubeUVReflectionMapping:id,CubicBezierCurve:jR,CubicBezierCurve3:C8,CubicInterpolant:W8,CullFaceBack:HT,CullFaceFront:iV,CullFaceFrontBack:are,CullFaceNone:rV,Curve:ao,CurvePath:R8,CustomBlending:oV,CustomToneMapping:BV,CylinderGeometry:ad,Cylindrical:Pue,Data3DTexture:bR,DataArrayTexture:B1,DataTexture:ou,DataTextureLoader:tue,DataUtils:fie,DecrementStencilOp:mre,DecrementWrapStencilOp:yre,DefaultLoadingManager:Wh,DepthFormat:Il,DepthStencilFormat:_u,DepthTexture:BR,DetachedBindMode:OV,DirectionalLight:nP,DirectionalLightHelper:Vue,DiscreteInterpolant:X8,DisplayP3ColorSpace:D1,DodecahedronGeometry:W1,DoubleSide:Cs,DstAlphaFactor:dV,DstColorFactor:mV,DynamicCopyUsage:Lre,DynamicDrawUsage:Tre,DynamicReadUsage:Rre,EdgesGeometry:P8,EllipseCurve:z1,EqualCompare:e8,EqualDepth:MV,EqualStencilFunc:Sre,EquirectangularReflectionMapping:Bm,EquirectangularRefractionMapping:Nm,Euler:bg,EventDispatcher:Wo,ExtrudeGeometry:K1,FileLoader:is,Float16BufferAttribute:vie,Float32BufferAttribute:it,Float64BufferAttribute:_ie,FloatType:bs,Fog:F1,FogExp2:O1,FramebufferTexture:mce,FrontSide:Ho,Frustum:Ig,GLBufferAttribute:Rue,GLSL1:Bre,GLSL3:SC,GreaterCompare:t8,GreaterDepth:CV,GreaterEqualCompare:r8,GreaterEqualDepth:TV,GreaterEqualStencilFunc:Mre,GreaterStencilFunc:wre,GridHelper:kue,Group:ga,HalfFloatType:Nf,HemisphereLight:J8,HemisphereLightHelper:Fue,IcosahedronGeometry:$1,ImageBitmapLoader:nz,ImageLoader:$m,ImageUtils:CR,IncrementStencilOp:pre,IncrementWrapStencilOp:gre,InstancedBufferAttribute:Uf,InstancedBufferGeometry:ez,InstancedInterleavedBuffer:bue,InstancedMesh:VR,Int16BufferAttribute:gie,Int32BufferAttribute:yie,Int8BufferAttribute:die,IntType:mR,InterleavedBuffer:Lg,InterleavedBufferAttribute:jl,Interpolant:ld,InterpolateDiscrete:Of,InterpolateLinear:xu,InterpolateSmooth:Xv,InvertStencilOp:vre,KeepStencilOp:Pc,KeyframeTrack:lo,LOD:w8,LatheGeometry:Bg,Layers:su,LessCompare:ZV,LessDepth:EV,LessEqualCompare:MR,LessEqualDepth:Dm,LessEqualStencilFunc:Are,LessStencilFunc:xre,Light:tc,LightProbe:Z8,Line:Ia,Line3:Lue,LineBasicMaterial:li,LineCurve:WR,LineCurve3:b8,LineDashedMaterial:H8,LineLoop:zR,LineSegments:oo,LinearDisplayP3ColorSpace:Cg,LinearEncoding:ER,LinearFilter:Sn,LinearInterpolant:qR,LinearMipMapLinearFilter:hre,LinearMipMapNearestFilter:ure,LinearMipmapLinearFilter:Is,LinearMipmapNearestFilter:hf,LinearSRGBColorSpace:Go,LinearToneMapping:IV,LinearTransfer:km,Loader:ci,LoaderUtils:Fo,LoadingManager:QR,LoopOnce:WV,LoopPingPong:KV,LoopRepeat:XV,LuminanceAlphaFormat:zV,LuminanceFormat:VV,MOUSE:bc,Material:lr,MaterialLoader:tS,MathUtils:s8,Matrix3:kt,Matrix4:ft,MaxEquation:KT,Mesh:Yn,MeshBasicMaterial:Yi,MeshDepthMaterial:NR,MeshDistanceMaterial:OR,MeshLambertMaterial:V8,MeshMatcapMaterial:z8,MeshNormalMaterial:U8,MeshPhongMaterial:F8,MeshPhysicalMaterial:Xo,MeshStandardMaterial:Fg,MeshToonMaterial:k8,MinEquation:XT,MirroredRepeatWrapping:Bf,MixOperation:RV,MultiplyBlending:WT,MultiplyOperation:Tg,NearestFilter:zn,NearestMipMapLinearFilter:cre,NearestMipMapNearestFilter:lre,NearestMipmapLinearFilter:ul,NearestMipmapNearestFilter:Om,NeverCompare:QV,NeverDepth:AV,NeverStencilFunc:_re,NoBlending:Sa,NoColorSpace:Ki,NoToneMapping:Bo,NormalAnimationBlendMode:L1,NormalBlending:nu,NotEqualCompare:n8,NotEqualDepth:bV,NotEqualStencilFunc:Ere,NumberKeyframeTrack:Vf,Object3D:Jt,ObjectLoader:sue,ObjectSpaceNormalMap:YV,OctahedronGeometry:Ng,OneFactor:uV,OneMinusConstantAlphaFactor:SV,OneMinusConstantColorFactor:_V,OneMinusDstAlphaFactor:pV,OneMinusDstColorFactor:gV,OneMinusSrcAlphaFactor:ox,OneMinusSrcColorFactor:fV,OrthographicCamera:Ls,P3Primaries:Vm,PCFShadowMap:R1,PCFSoftShadowMap:Fp,PMREMGenerator:wC,Path:jm,PerspectiveCamera:wn,Plane:ua,PlaneGeometry:sd,PlaneHelper:jue,PointLight:tP,PointLightHelper:Nue,Points:HR,PointsMaterial:U1,PolarGridHelper:Uue,PolyhedronGeometry:ec,PositionalAudio:fue,PropertyBinding:$t,PropertyMixer:iz,QuadraticBezierCurve:XR,QuadraticBezierCurve3:KR,Quaternion:Tr,QuaternionKeyframeTrack:Wl,QuaternionLinearInterpolant:K8,RED_GREEN_RGTC2_Format:vC,RED_RGTC1_Format:jV,REVISION:Mg,RGBADepthPacking:qV,RGBAFormat:_i,RGBAIntegerFormat:xR,RGBA_ASTC_10x10_Format:fC,RGBA_ASTC_10x5_Format:cC,RGBA_ASTC_10x6_Format:uC,RGBA_ASTC_10x8_Format:hC,RGBA_ASTC_12x10_Format:dC,RGBA_ASTC_12x12_Format:pC,RGBA_ASTC_4x4_Format:tC,RGBA_ASTC_5x4_Format:nC,RGBA_ASTC_5x5_Format:rC,RGBA_ASTC_6x5_Format:iC,RGBA_ASTC_6x6_Format:sC,RGBA_ASTC_8x5_Format:oC,RGBA_ASTC_8x6_Format:aC,RGBA_ASTC_8x8_Format:lC,RGBA_BPTC_Format:Wv,RGBA_ETC2_EAC_Format:eC,RGBA_PVRTC_2BPPV1_Format:QT,RGBA_PVRTC_4BPPV1_Format:YT,RGBA_S3TC_DXT1_Format:Hv,RGBA_S3TC_DXT3_Format:Gv,RGBA_S3TC_DXT5_Format:jv,RGB_BPTC_SIGNED_Format:mC,RGB_BPTC_UNSIGNED_Format:gC,RGB_ETC1_Format:SR,RGB_ETC2_Format:ZT,RGB_PVRTC_2BPPV1_Format:qT,RGB_PVRTC_4BPPV1_Format:JT,RGB_S3TC_DXT1_Format:zv,RGFormat:GV,RGIntegerFormat:_R,RawShaderMaterial:O8,Ray:bu,Raycaster:oz,Rec709Primaries:Um,RectAreaLight:Y8,RedFormat:HV,RedIntegerFormat:vR,ReinhardToneMapping:LV,RenderTarget:l8,RepeatWrapping:Gl,ReplaceStencilOp:dre,ReverseSubtractEquation:lV,RingGeometry:J1,SIGNED_RED_GREEN_RGTC2_Format:_C,SIGNED_RED_RGTC1_Format:yC,SRGBColorSpace:fr,SRGBTransfer:gn,Scene:ux,ShaderChunk:Nt,ShaderLib:Ks,ShaderMaterial:io,ShadowMaterial:N8,Shape:au,ShapeGeometry:q1,ShapePath:Kue,ShapeUtils:Oo,ShortType:kV,Skeleton:Dg,SkeletonHelper:Bue,SkinnedMesh:UR,Source:Kc,Sphere:Hr,SphereGeometry:Og,Spherical:PC,SphericalHarmonics3:Q8,SplineCurve:$R,SpotLight:eP,SpotLightHelper:Due,Sprite:A8,SpriteMaterial:kR,SrcAlphaFactor:sx,SrcAlphaSaturateFactor:yV,SrcColorFactor:hV,StaticCopyUsage:Ire,StaticDrawUsage:zm,StaticReadUsage:bre,StereoCamera:lue,StreamCopyUsage:Dre,StreamDrawUsage:Cre,StreamReadUsage:Pre,StringKeyframeTrack:Iu,SubtractEquation:aV,SubtractiveBlending:jT,TOUCH:Rc,TangentSpaceNormalMap:Zl,TetrahedronGeometry:Y1,Texture:Mn,TextureLoader:$8,TorusGeometry:Q1,TorusKnotGeometry:Z1,Triangle:$i,TriangleFanDrawMode:ax,TriangleStripDrawMode:wR,TrianglesDrawMode:$V,TubeGeometry:eS,UVMapping:P1,Uint16BufferAttribute:RR,Uint32BufferAttribute:PR,Uint8BufferAttribute:pie,Uint8ClampedBufferAttribute:mie,Uniform:aP,UniformsGroup:Cue,UniformsLib:Fe,UniformsUtils:h8,UnsignedByteType:No,UnsignedInt248Type:Pl,UnsignedIntType:ma,UnsignedShort4444Type:gR,UnsignedShort5551Type:yR,UnsignedShortType:I1,VSMShadowMap:js,Vector2:_e,Vector3:k,Vector4:cn,VectorKeyframeTrack:zf,VideoTexture:pce,WebGL1Renderer:x8,WebGL3DRenderTarget:eie,WebGLArrayRenderTarget:Zre,WebGLCoordinateSystem:Ro,WebGLCubeRenderTarget:LR,WebGLMultipleRenderTargets:tie,WebGLRenderTarget:ro,WebGLRenderer:FR,WebGLUtils:v8,WebGPUCoordinateSystem:Hm,WireframeGeometry:B8,WrapAroundEnding:Fm,ZeroCurvatureEnding:Wc,ZeroFactor:cV,ZeroSlopeEnding:Xc,ZeroStencilOp:fre,_SRGBAFormat:lx,createCanvasElement:a8,sRGBEncoding:Ll},Symbol.toStringTag,{value:"Module"}));var cz={exports:{}},Lu={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Lu.ConcurrentRoot=1;Lu.ContinuousEventPriority=4;Lu.DefaultEventPriority=16;Lu.DiscreteEventPriority=1;Lu.IdleEventPriority=536870912;Lu.LegacyRoot=0;cz.exports=Lu;var Xh=cz.exports;function $ue(t){let e;const n=new Set,r=(c,u)=>{const f=typeof c=="function"?c(e):c;if(f!==e){const p=e;e=u?f:Object.assign({},e,f),n.forEach(m=>m(e,p))}},i=()=>e,s=(c,u=i,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=u(e);function m(){const y=u(e);if(!f(p,y)){const S=p;c(p=y,S)}}return n.add(m),()=>n.delete(m)},l={setState:r,getState:i,subscribe:(c,u,f)=>u||f?s(c,u,f):(n.add(c),()=>n.delete(c)),destroy:()=>n.clear()};return e=t(r,i,l),l}const Jue=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),mO=Jue?$.useEffect:$.useLayoutEffect;function uz(t){const e=typeof t=="function"?$ue(t):t,n=(r=e.getState,i=Object.is)=>{const[,s]=$.useReducer(v=>v+1,0),o=e.getState(),a=$.useRef(o),l=$.useRef(r),c=$.useRef(i),u=$.useRef(!1),f=$.useRef();f.current===void 0&&(f.current=r(o));let p,m=!1;(a.current!==o||l.current!==r||c.current!==i||u.current)&&(p=r(o),m=!i(f.current,p)),mO(()=>{m&&(f.current=p),a.current=o,l.current=r,c.current=i,u.current=!1});const y=$.useRef(o);mO(()=>{const v=()=>{try{const _=e.getState(),A=l.current(_);c.current(f.current,A)||(a.current=_,f.current=A,s())}catch{u.current=!0,s()}},g=e.subscribe(v);return e.getState()!==y.current&&v(),g},[]);const S=m?p:f.current;return $.useDebugValue(S),S};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},n}var hz={exports:{}},mE={exports:{}},gE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gO;function que(){return gO||(gO=1,function(t){function e(O,W){var K=O.length;O.push(W);e:for(;0<K;){var Y=K-1>>>1,te=O[Y];if(0<i(te,W))O[Y]=W,O[K]=te,K=Y;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var W=O[0],K=O.pop();if(K!==W){O[0]=K;e:for(var Y=0,te=O.length,Te=te>>>1;Y<Te;){var ne=2*(Y+1)-1,de=O[ne],Ae=ne+1,Pe=O[Ae];if(0>i(de,K))Ae<te&&0>i(Pe,de)?(O[Y]=Pe,O[Ae]=K,Y=Ae):(O[Y]=de,O[ne]=K,Y=ne);else if(Ae<te&&0>i(Pe,K))O[Y]=Pe,O[Ae]=K,Y=Ae;else break e}}return W}function i(O,W){var K=O.sortIndex-W.sortIndex;return K!==0?K:O.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,p=3,m=!1,y=!1,S=!1,v=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(O){for(var W=n(c);W!==null;){if(W.callback===null)r(c);else if(W.startTime<=O)r(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=n(c)}}function E(O){if(S=!1,A(O),!y)if(n(l)!==null)y=!0,Z(b);else{var W=n(c);W!==null&&ae(E,W.startTime-O)}}function b(O,W){y=!1,S&&(S=!1,g(L),L=-1),m=!0;var K=p;try{for(A(W),f=n(l);f!==null&&(!(f.expirationTime>W)||O&&!D());){var Y=f.callback;if(typeof Y=="function"){f.callback=null,p=f.priorityLevel;var te=Y(f.expirationTime<=W);W=t.unstable_now(),typeof te=="function"?f.callback=te:f===n(l)&&r(l),A(W)}else r(l);f=n(l)}if(f!==null)var Te=!0;else{var ne=n(c);ne!==null&&ae(E,ne.startTime-W),Te=!1}return Te}finally{f=null,p=K,m=!1}}var C=!1,P=null,L=-1,N=5,T=-1;function D(){return!(t.unstable_now()-T<N)}function z(){if(P!==null){var O=t.unstable_now();T=O;var W=!0;try{W=P(!0,O)}finally{W?j():(C=!1,P=null)}}else C=!1}var j;if(typeof _=="function")j=function(){_(z)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,q=H.port2;H.port1.onmessage=z,j=function(){q.postMessage(null)}}else j=function(){v(z,0)};function Z(O){P=O,C||(C=!0,j())}function ae(O,W){L=v(function(){O(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){y||m||(y=!0,Z(b))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(O){switch(p){case 1:case 2:case 3:var W=3;break;default:W=p}var K=p;p=W;try{return O()}finally{p=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,W){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var K=p;p=O;try{return W()}finally{p=K}},t.unstable_scheduleCallback=function(O,W,K){var Y=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?Y+K:Y):K=Y,O){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=K+te,O={id:u++,callback:W,priorityLevel:O,startTime:K,expirationTime:te,sortIndex:-1},K>Y?(O.sortIndex=K,e(c,O),n(l)===null&&O===n(c)&&(S?(g(L),L=-1):S=!0,ae(E,K-Y))):(O.sortIndex=te,e(l,O),y||m||(y=!0,Z(b))),O},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(O){var W=p;return function(){var K=p;p=W;try{return O.apply(this,arguments)}finally{p=K}}}}(gE)),gE}var yO;function Yue(){return yO||(yO=1,mE.exports=que()),mE.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Que=function(e){var n={},r=$,i=Yue(),s=Object.assign;function o(h){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+h,x=1;x<arguments.length;x++)d+="&args[]="+encodeURIComponent(arguments[x]);return"Minified React error #"+h+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),y=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),E=Symbol.for("react.offscreen"),b=Symbol.iterator;function C(h){return h===null||typeof h!="object"?null:(h=b&&h[b]||h["@@iterator"],typeof h=="function"?h:null)}function P(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case u:return"Fragment";case c:return"Portal";case p:return"Profiler";case f:return"StrictMode";case v:return"Suspense";case g:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case y:return(h.displayName||"Context")+".Consumer";case m:return(h._context.displayName||"Context")+".Provider";case S:var d=h.render;return h=h.displayName,h||(h=d.displayName||d.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case _:return d=h.displayName||null,d!==null?d:P(h.type)||"Memo";case A:d=h._payload,h=h._init;try{return P(h(d))}catch{}}return null}function L(h){var d=h.type;switch(h.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=d.render,h=h.displayName||h.name||"",d.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return P(d);case 8:return d===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function N(h){var d=h,x=h;if(h.alternate)for(;d.return;)d=d.return;else{h=d;do d=h,d.flags&4098&&(x=d.return),h=d.return;while(h)}return d.tag===3?x:null}function T(h){if(N(h)!==h)throw Error(o(188))}function D(h){var d=h.alternate;if(!d){if(d=N(h),d===null)throw Error(o(188));return d!==h?null:h}for(var x=h,w=d;;){var M=x.return;if(M===null)break;var I=M.alternate;if(I===null){if(w=M.return,w!==null){x=w;continue}break}if(M.child===I.child){for(I=M.child;I;){if(I===x)return T(M),h;if(I===w)return T(M),d;I=I.sibling}throw Error(o(188))}if(x.return!==w.return)x=M,w=I;else{for(var G=!1,ee=M.child;ee;){if(ee===x){G=!0,x=M,w=I;break}if(ee===w){G=!0,w=M,x=I;break}ee=ee.sibling}if(!G){for(ee=I.child;ee;){if(ee===x){G=!0,x=I,w=M;break}if(ee===w){G=!0,w=I,x=M;break}ee=ee.sibling}if(!G)throw Error(o(189))}}if(x.alternate!==w)throw Error(o(190))}if(x.tag!==3)throw Error(o(188));return x.stateNode.current===x?h:d}function z(h){return h=D(h),h!==null?j(h):null}function j(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var d=j(h);if(d!==null)return d;h=h.sibling}return null}function H(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){if(h.tag!==4){var d=H(h);if(d!==null)return d}h=h.sibling}return null}var q=Array.isArray,Z=e.getPublicInstance,ae=e.getRootHostContext,O=e.getChildHostContext,W=e.prepareForCommit,K=e.resetAfterCommit,Y=e.createInstance,te=e.appendInitialChild,Te=e.finalizeInitialChildren,ne=e.prepareUpdate,de=e.shouldSetTextContent,Ae=e.createTextInstance,Pe=e.scheduleTimeout,$e=e.cancelTimeout,Ue=e.noTimeout,ce=e.isPrimaryRenderer,oe=e.supportsMutation,V=e.supportsPersistence,he=e.supportsHydration,ie=e.getInstanceFromNode,ye=e.preparePortalMount,le=e.getCurrentEventPriority,be=e.detachDeletedInstance,Ee=e.supportsMicrotasks,F=e.scheduleMicrotask,B=e.supportsTestSelectors,J=e.findFiberRoot,xe=e.getBoundingRect,Se=e.getTextContent,we=e.isHiddenSubtree,Qe=e.matchAccessibilityRole,Ne=e.setFocusIfFocusable,Ve=e.setupIntersectionObserver,ct=e.appendChild,wt=e.appendChildToContainer,Re=e.commitTextUpdate,Gt=e.commitMount,Dt=e.commitUpdate,vt=e.insertBefore,lt=e.insertInContainerBefore,Ye=e.removeChild,Q=e.removeChildFromContainer,Me=e.resetTextContent,Ge=e.hideInstance,Je=e.hideTextInstance,_t=e.unhideInstance,X=e.unhideTextInstance,Ie=e.clearContainer,Be=e.cloneInstance,nt=e.createContainerChildSet,rt=e.appendChildToContainerChildSet,Bt=e.finalizeContainerChildren,Wt=e.replaceContainerChildren,mn=e.cloneHiddenInstance,Xn=e.cloneHiddenTextInstance,Yt=e.canHydrateInstance,Rr=e.canHydrateTextInstance,ls=e.canHydrateSuspenseInstance,cd=e.isSuspenseInstancePending,ud=e.isSuspenseInstanceFallback,Nu=e.registerSuspenseInstanceRetry,Ba=e.getNextHydratableSibling,Ou=e.getFirstHydratableChild,Jg=e.getFirstHydratableChildWithinContainer,qg=e.getFirstHydratableChildWithinSuspenseInstance,vS=e.hydrateInstance,_S=e.hydrateTextInstance,xS=e.hydrateSuspenseInstance,U=e.getNextHydratableInstanceAfterSuspenseInstance,se=e.commitHydratedContainer,pe=e.commitHydratedSuspenseInstance,me=e.clearSuspenseBoundary,fe=e.clearSuspenseBoundaryFromContainer,qe=e.shouldDeleteUnhydratedTailInstances,ot=e.didNotMatchHydratedContainerTextInstance,dt=e.didNotMatchHydratedTextInstance,mt;function Et(h){if(mt===void 0)try{throw Error()}catch(x){var d=x.stack.trim().match(/\n( *(at )?)/);mt=d&&d[1]||""}return`
`+mt+h}var At=!1;function Mt(h,d){if(!h||At)return"";At=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(De){var w=De}Reflect.construct(h,[],d)}else{try{d.call()}catch(De){w=De}h.call(d.prototype)}else{try{throw Error()}catch(De){w=De}h()}}catch(De){if(De&&w&&typeof De.stack=="string"){for(var M=De.stack.split(`
`),I=w.stack.split(`
`),G=M.length-1,ee=I.length-1;1<=G&&0<=ee&&M[G]!==I[ee];)ee--;for(;1<=G&&0<=ee;G--,ee--)if(M[G]!==I[ee]){if(G!==1||ee!==1)do if(G--,ee--,0>ee||M[G]!==I[ee]){var ve=`
`+M[G].replace(" at new "," at ");return h.displayName&&ve.includes("<anonymous>")&&(ve=ve.replace("<anonymous>",h.displayName)),ve}while(1<=G&&0<=ee);break}}}finally{At=!1,Error.prepareStackTrace=x}return(h=h?h.displayName||h.name:"")?Et(h):""}var Rn=Object.prototype.hasOwnProperty,Pr=[],vn=-1;function yr(h){return{current:h}}function gt(h){0>vn||(h.current=Pr[vn],Pr[vn]=null,vn--)}function et(h,d){vn++,Pr[vn]=h.current,h.current=d}var cs={},Ut=yr(cs),Fn=yr(!1),co=cs;function us(h,d){var x=h.type.contextTypes;if(!x)return cs;var w=h.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===d)return w.__reactInternalMemoizedMaskedChildContext;var M={},I;for(I in x)M[I]=d[I];return w&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=d,h.__reactInternalMemoizedMaskedChildContext=M),M}function vr(h){return h=h.childContextTypes,h!=null}function Kn(){gt(Fn),gt(Ut)}function uo(h,d,x){if(Ut.current!==cs)throw Error(o(168));et(Ut,d),et(Fn,x)}function Fu(h,d,x){var w=h.stateNode;if(d=d.childContextTypes,typeof w.getChildContext!="function")return x;w=w.getChildContext();for(var M in w)if(!(M in d))throw Error(o(108,L(h)||"Unknown",M));return s({},x,w)}function Ir(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||cs,co=Ut.current,et(Ut,h),et(Fn,Fn.current),!0}function ku(h,d,x){var w=h.stateNode;if(!w)throw Error(o(169));x?(h=Fu(h,d,co),w.__reactInternalMemoizedMergedChildContext=h,gt(Fn),gt(Ut),et(Ut,h)):gt(Fn),et(Fn,x)}var Ui=Math.clz32?Math.clz32:FG,Yg=Math.log,OG=Math.LN2;function FG(h){return h>>>=0,h===0?32:31-(Yg(h)/OG|0)|0}var Qg=64,Zg=4194304;function hd(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function ey(h,d){var x=h.pendingLanes;if(x===0)return 0;var w=0,M=h.suspendedLanes,I=h.pingedLanes,G=x&268435455;if(G!==0){var ee=G&~M;ee!==0?w=hd(ee):(I&=G,I!==0&&(w=hd(I)))}else G=x&~M,G!==0?w=hd(G):I!==0&&(w=hd(I));if(w===0)return 0;if(d!==0&&d!==w&&!(d&M)&&(M=w&-w,I=d&-d,M>=I||M===16&&(I&4194240)!==0))return d;if(w&4&&(w|=x&16),d=h.entangledLanes,d!==0)for(h=h.entanglements,d&=w;0<d;)x=31-Ui(d),M=1<<x,w|=h[x],d&=~M;return w}function kG(h,d){switch(h){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function UG(h,d){for(var x=h.suspendedLanes,w=h.pingedLanes,M=h.expirationTimes,I=h.pendingLanes;0<I;){var G=31-Ui(I),ee=1<<G,ve=M[G];ve===-1?(!(ee&x)||ee&w)&&(M[G]=kG(ee,d)):ve<=d&&(h.expiredLanes|=ee),I&=~ee}}function SS(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function AS(h){for(var d=[],x=0;31>x;x++)d.push(h);return d}function fd(h,d,x){h.pendingLanes|=d,d!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,d=31-Ui(d),h[d]=x}function VG(h,d){var x=h.pendingLanes&~d;h.pendingLanes=d,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=d,h.mutableReadLanes&=d,h.entangledLanes&=d,d=h.entanglements;var w=h.eventTimes;for(h=h.expirationTimes;0<x;){var M=31-Ui(x),I=1<<M;d[M]=0,w[M]=-1,h[M]=-1,x&=~I}}function wS(h,d){var x=h.entangledLanes|=d;for(h=h.entanglements;x;){var w=31-Ui(x),M=1<<w;M&d|h[w]&d&&(h[w]|=d),x&=~M}}var tn=0;function YP(h){return h&=-h,1<h?4<h?h&268435455?16:536870912:4:1}var ES=i.unstable_scheduleCallback,QP=i.unstable_cancelCallback,zG=i.unstable_shouldYield,HG=i.unstable_requestPaint,_r=i.unstable_now,MS=i.unstable_ImmediatePriority,GG=i.unstable_UserBlockingPriority,TS=i.unstable_NormalPriority,jG=i.unstable_IdlePriority,ty=null,ho=null;function WG(h){if(ho&&typeof ho.onCommitFiberRoot=="function")try{ho.onCommitFiberRoot(ty,h,void 0,(h.current.flags&128)===128)}catch{}}function XG(h,d){return h===d&&(h!==0||1/h===1/d)||h!==h&&d!==d}var fo=typeof Object.is=="function"?Object.is:XG,Ko=null,ny=!1,CS=!1;function ZP(h){Ko===null?Ko=[h]:Ko.push(h)}function KG(h){ny=!0,ZP(h)}function po(){if(!CS&&Ko!==null){CS=!0;var h=0,d=tn;try{var x=Ko;for(tn=1;h<x.length;h++){var w=x[h];do w=w(!0);while(w!==null)}Ko=null,ny=!1}catch(M){throw Ko!==null&&(Ko=Ko.slice(h+1)),ES(MS,po),M}finally{tn=d,CS=!1}}return null}var $G=a.ReactCurrentBatchConfig;function ry(h,d){if(fo(h,d))return!0;if(typeof h!="object"||h===null||typeof d!="object"||d===null)return!1;var x=Object.keys(h),w=Object.keys(d);if(x.length!==w.length)return!1;for(w=0;w<x.length;w++){var M=x[w];if(!Rn.call(d,M)||!fo(h[M],d[M]))return!1}return!0}function JG(h){switch(h.tag){case 5:return Et(h.type);case 16:return Et("Lazy");case 13:return Et("Suspense");case 19:return Et("SuspenseList");case 0:case 2:case 15:return h=Mt(h.type,!1),h;case 11:return h=Mt(h.type.render,!1),h;case 1:return h=Mt(h.type,!0),h;default:return""}}function Fs(h,d){if(h&&h.defaultProps){d=s({},d),h=h.defaultProps;for(var x in h)d[x]===void 0&&(d[x]=h[x]);return d}return d}var iy=yr(null),sy=null,Uu=null,bS=null;function RS(){bS=Uu=sy=null}function eI(h,d,x){ce?(et(iy,d._currentValue),d._currentValue=x):(et(iy,d._currentValue2),d._currentValue2=x)}function PS(h){var d=iy.current;gt(iy),ce?h._currentValue=d:h._currentValue2=d}function IS(h,d,x){for(;h!==null;){var w=h.alternate;if((h.childLanes&d)!==d?(h.childLanes|=d,w!==null&&(w.childLanes|=d)):w!==null&&(w.childLanes&d)!==d&&(w.childLanes|=d),h===x)break;h=h.return}}function Vu(h,d){sy=h,bS=Uu=null,h=h.dependencies,h!==null&&h.firstContext!==null&&(h.lanes&d&&(Hi=!0),h.firstContext=null)}function hs(h){var d=ce?h._currentValue:h._currentValue2;if(bS!==h)if(h={context:h,memoizedValue:d,next:null},Uu===null){if(sy===null)throw Error(o(308));Uu=h,sy.dependencies={lanes:0,firstContext:h}}else Uu=Uu.next=h;return d}var mo=null,Na=!1;function LS(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tI(h,d){h=h.updateQueue,d.updateQueue===h&&(d.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function $o(h,d){return{eventTime:h,lane:d,tag:0,payload:null,callback:null,next:null}}function Oa(h,d){var x=h.updateQueue;x!==null&&(x=x.shared,Zn!==null&&h.mode&1&&!(Vt&2)?(h=x.interleaved,h===null?(d.next=d,mo===null?mo=[x]:mo.push(x)):(d.next=h.next,h.next=d),x.interleaved=d):(h=x.pending,h===null?d.next=d:(d.next=h.next,h.next=d),x.pending=d))}function oy(h,d,x){if(d=d.updateQueue,d!==null&&(d=d.shared,(x&4194240)!==0)){var w=d.lanes;w&=h.pendingLanes,x|=w,d.lanes=x,wS(h,x)}}function nI(h,d){var x=h.updateQueue,w=h.alternate;if(w!==null&&(w=w.updateQueue,x===w)){var M=null,I=null;if(x=x.firstBaseUpdate,x!==null){do{var G={eventTime:x.eventTime,lane:x.lane,tag:x.tag,payload:x.payload,callback:x.callback,next:null};I===null?M=I=G:I=I.next=G,x=x.next}while(x!==null);I===null?M=I=d:I=I.next=d}else M=I=d;x={baseState:w.baseState,firstBaseUpdate:M,lastBaseUpdate:I,shared:w.shared,effects:w.effects},h.updateQueue=x;return}h=x.lastBaseUpdate,h===null?x.firstBaseUpdate=d:h.next=d,x.lastBaseUpdate=d}function ay(h,d,x,w){var M=h.updateQueue;Na=!1;var I=M.firstBaseUpdate,G=M.lastBaseUpdate,ee=M.shared.pending;if(ee!==null){M.shared.pending=null;var ve=ee,De=ve.next;ve.next=null,G===null?I=De:G.next=De,G=ve;var tt=h.alternate;tt!==null&&(tt=tt.updateQueue,ee=tt.lastBaseUpdate,ee!==G&&(ee===null?tt.firstBaseUpdate=De:ee.next=De,tt.lastBaseUpdate=ve))}if(I!==null){var bt=M.baseState;G=0,tt=De=ve=null,ee=I;do{var ht=ee.lane,dn=ee.eventTime;if((w&ht)===ht){tt!==null&&(tt=tt.next={eventTime:dn,lane:0,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null});e:{var at=h,Kr=ee;switch(ht=d,dn=x,Kr.tag){case 1:if(at=Kr.payload,typeof at=="function"){bt=at.call(dn,bt,ht);break e}bt=at;break e;case 3:at.flags=at.flags&-65537|128;case 0:if(at=Kr.payload,ht=typeof at=="function"?at.call(dn,bt,ht):at,ht==null)break e;bt=s({},bt,ht);break e;case 2:Na=!0}}ee.callback!==null&&ee.lane!==0&&(h.flags|=64,ht=M.effects,ht===null?M.effects=[ee]:ht.push(ee))}else dn={eventTime:dn,lane:ht,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null},tt===null?(De=tt=dn,ve=bt):tt=tt.next=dn,G|=ht;if(ee=ee.next,ee===null){if(ee=M.shared.pending,ee===null)break;ht=ee,ee=ht.next,ht.next=null,M.lastBaseUpdate=ht,M.shared.pending=null}}while(!0);if(tt===null&&(ve=bt),M.baseState=ve,M.firstBaseUpdate=De,M.lastBaseUpdate=tt,d=M.shared.interleaved,d!==null){M=d;do G|=M.lane,M=M.next;while(M!==d)}else I===null&&(M.shared.lanes=0);Ju|=G,h.lanes=G,h.memoizedState=bt}}function rI(h,d,x){if(h=d.effects,d.effects=null,h!==null)for(d=0;d<h.length;d++){var w=h[d],M=w.callback;if(M!==null){if(w.callback=null,w=x,typeof M!="function")throw Error(o(191,M));M.call(w)}}}var iI=new r.Component().refs;function DS(h,d,x,w){d=h.memoizedState,x=x(w,d),x=x==null?d:s({},d,x),h.memoizedState=x,h.lanes===0&&(h.updateQueue.baseState=x)}var ly={isMounted:function(h){return(h=h._reactInternals)?N(h)===h:!1},enqueueSetState:function(h,d,x){h=h._reactInternals;var w=hi(),M=Ua(h),I=$o(w,M);I.payload=d,x!=null&&(I.callback=x),Oa(h,I),d=gs(h,M,w),d!==null&&oy(d,h,M)},enqueueReplaceState:function(h,d,x){h=h._reactInternals;var w=hi(),M=Ua(h),I=$o(w,M);I.tag=1,I.payload=d,x!=null&&(I.callback=x),Oa(h,I),d=gs(h,M,w),d!==null&&oy(d,h,M)},enqueueForceUpdate:function(h,d){h=h._reactInternals;var x=hi(),w=Ua(h),M=$o(x,w);M.tag=2,d!=null&&(M.callback=d),Oa(h,M),d=gs(h,w,x),d!==null&&oy(d,h,w)}};function sI(h,d,x,w,M,I,G){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(w,I,G):d.prototype&&d.prototype.isPureReactComponent?!ry(x,w)||!ry(M,I):!0}function oI(h,d,x){var w=!1,M=cs,I=d.contextType;return typeof I=="object"&&I!==null?I=hs(I):(M=vr(d)?co:Ut.current,w=d.contextTypes,I=(w=w!=null)?us(h,M):cs),d=new d(x,I),h.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=ly,h.stateNode=d,d._reactInternals=h,w&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=M,h.__reactInternalMemoizedMaskedChildContext=I),d}function aI(h,d,x,w){h=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(x,w),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(x,w),d.state!==h&&ly.enqueueReplaceState(d,d.state,null)}function BS(h,d,x,w){var M=h.stateNode;M.props=x,M.state=h.memoizedState,M.refs=iI,LS(h);var I=d.contextType;typeof I=="object"&&I!==null?M.context=hs(I):(I=vr(d)?co:Ut.current,M.context=us(h,I)),M.state=h.memoizedState,I=d.getDerivedStateFromProps,typeof I=="function"&&(DS(h,d,I,x),M.state=h.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof M.getSnapshotBeforeUpdate=="function"||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(d=M.state,typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount(),d!==M.state&&ly.enqueueReplaceState(M,M.state,null),ay(h,x,M,w),M.state=h.memoizedState),typeof M.componentDidMount=="function"&&(h.flags|=4194308)}var zu=[],Hu=0,cy=null,uy=0,fs=[],ds=0,rc=null,Jo=1,qo="";function ic(h,d){zu[Hu++]=uy,zu[Hu++]=cy,cy=h,uy=d}function lI(h,d,x){fs[ds++]=Jo,fs[ds++]=qo,fs[ds++]=rc,rc=h;var w=Jo;h=qo;var M=32-Ui(w)-1;w&=~(1<<M),x+=1;var I=32-Ui(d)+M;if(30<I){var G=M-M%5;I=(w&(1<<G)-1).toString(32),w>>=G,M-=G,Jo=1<<32-Ui(d)+M|x<<M|w,qo=I+h}else Jo=1<<I|x<<M|w,qo=h}function NS(h){h.return!==null&&(ic(h,1),lI(h,1,0))}function OS(h){for(;h===cy;)cy=zu[--Hu],zu[Hu]=null,uy=zu[--Hu],zu[Hu]=null;for(;h===rc;)rc=fs[--ds],fs[ds]=null,qo=fs[--ds],fs[ds]=null,Jo=fs[--ds],fs[ds]=null}var Vi=null,zi=null,Tn=!1,dd=!1,ks=null;function cI(h,d){var x=ys(5,null,null,0);x.elementType="DELETED",x.stateNode=d,x.return=h,d=h.deletions,d===null?(h.deletions=[x],h.flags|=16):d.push(x)}function uI(h,d){switch(h.tag){case 5:return d=Yt(d,h.type,h.pendingProps),d!==null?(h.stateNode=d,Vi=h,zi=Ou(d),!0):!1;case 6:return d=Rr(d,h.pendingProps),d!==null?(h.stateNode=d,Vi=h,zi=null,!0):!1;case 13:if(d=ls(d),d!==null){var x=rc!==null?{id:Jo,overflow:qo}:null;return h.memoizedState={dehydrated:d,treeContext:x,retryLane:1073741824},x=ys(18,null,null,0),x.stateNode=d,x.return=h,h.child=x,Vi=h,zi=null,!0}return!1;default:return!1}}function FS(h){return(h.mode&1)!==0&&(h.flags&128)===0}function kS(h){if(Tn){var d=zi;if(d){var x=d;if(!uI(h,d)){if(FS(h))throw Error(o(418));d=Ba(x);var w=Vi;d&&uI(h,d)?cI(w,x):(h.flags=h.flags&-4097|2,Tn=!1,Vi=h)}}else{if(FS(h))throw Error(o(418));h.flags=h.flags&-4097|2,Tn=!1,Vi=h}}}function hI(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;Vi=h}function pd(h){if(!he||h!==Vi)return!1;if(!Tn)return hI(h),Tn=!0,!1;if(h.tag!==3&&(h.tag!==5||qe(h.type)&&!de(h.type,h.memoizedProps))){var d=zi;if(d){if(FS(h)){for(h=zi;h;)h=Ba(h);throw Error(o(418))}for(;d;)cI(h,d),d=Ba(d)}}if(hI(h),h.tag===13){if(!he)throw Error(o(316));if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(o(317));zi=U(h)}else zi=Vi?Ba(h.stateNode):null;return!0}function Gu(){he&&(zi=Vi=null,dd=Tn=!1)}function US(h){ks===null?ks=[h]:ks.push(h)}function md(h,d,x){if(h=x.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(x._owner){if(x=x._owner,x){if(x.tag!==1)throw Error(o(309));var w=x.stateNode}if(!w)throw Error(o(147,h));var M=w,I=""+h;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===I?d.ref:(d=function(G){var ee=M.refs;ee===iI&&(ee=M.refs={}),G===null?delete ee[I]:ee[I]=G},d._stringRef=I,d)}if(typeof h!="string")throw Error(o(284));if(!x._owner)throw Error(o(290,h))}return h}function hy(h,d){throw h=Object.prototype.toString.call(d),Error(o(31,h==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":h))}function fI(h){var d=h._init;return d(h._payload)}function dI(h){function d(ue,re){if(h){var ge=ue.deletions;ge===null?(ue.deletions=[re],ue.flags|=16):ge.push(re)}}function x(ue,re){if(!h)return null;for(;re!==null;)d(ue,re),re=re.sibling;return null}function w(ue,re){for(ue=new Map;re!==null;)re.key!==null?ue.set(re.key,re):ue.set(re.index,re),re=re.sibling;return ue}function M(ue,re){return ue=za(ue,re),ue.index=0,ue.sibling=null,ue}function I(ue,re,ge){return ue.index=ge,h?(ge=ue.alternate,ge!==null?(ge=ge.index,ge<re?(ue.flags|=2,re):ge):(ue.flags|=2,re)):(ue.flags|=1048576,re)}function G(ue){return h&&ue.alternate===null&&(ue.flags|=2),ue}function ee(ue,re,ge,Ke){return re===null||re.tag!==6?(re=AA(ge,ue.mode,Ke),re.return=ue,re):(re=M(re,ge),re.return=ue,re)}function ve(ue,re,ge,Ke){var st=ge.type;return st===u?tt(ue,re,ge.props.children,Ke,ge.key):re!==null&&(re.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===A&&fI(st)===re.type)?(Ke=M(re,ge.props),Ke.ref=md(ue,re,ge),Ke.return=ue,Ke):(Ke=Hy(ge.type,ge.key,ge.props,null,ue.mode,Ke),Ke.ref=md(ue,re,ge),Ke.return=ue,Ke)}function De(ue,re,ge,Ke){return re===null||re.tag!==4||re.stateNode.containerInfo!==ge.containerInfo||re.stateNode.implementation!==ge.implementation?(re=wA(ge,ue.mode,Ke),re.return=ue,re):(re=M(re,ge.children||[]),re.return=ue,re)}function tt(ue,re,ge,Ke,st){return re===null||re.tag!==7?(re=hc(ge,ue.mode,Ke,st),re.return=ue,re):(re=M(re,ge),re.return=ue,re)}function bt(ue,re,ge){if(typeof re=="string"&&re!==""||typeof re=="number")return re=AA(""+re,ue.mode,ge),re.return=ue,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case l:return ge=Hy(re.type,re.key,re.props,null,ue.mode,ge),ge.ref=md(ue,null,re),ge.return=ue,ge;case c:return re=wA(re,ue.mode,ge),re.return=ue,re;case A:var Ke=re._init;return bt(ue,Ke(re._payload),ge)}if(q(re)||C(re))return re=hc(re,ue.mode,ge,null),re.return=ue,re;hy(ue,re)}return null}function ht(ue,re,ge,Ke){var st=re!==null?re.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number")return st!==null?null:ee(ue,re,""+ge,Ke);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case l:return ge.key===st?ve(ue,re,ge,Ke):null;case c:return ge.key===st?De(ue,re,ge,Ke):null;case A:return st=ge._init,ht(ue,re,st(ge._payload),Ke)}if(q(ge)||C(ge))return st!==null?null:tt(ue,re,ge,Ke,null);hy(ue,ge)}return null}function dn(ue,re,ge,Ke,st){if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number")return ue=ue.get(ge)||null,ee(re,ue,""+Ke,st);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case l:return ue=ue.get(Ke.key===null?ge:Ke.key)||null,ve(re,ue,Ke,st);case c:return ue=ue.get(Ke.key===null?ge:Ke.key)||null,De(re,ue,Ke,st);case A:var Ft=Ke._init;return dn(ue,re,ge,Ft(Ke._payload),st)}if(q(Ke)||C(Ke))return ue=ue.get(ge)||null,tt(re,ue,Ke,st,null);hy(re,Ke)}return null}function at(ue,re,ge,Ke){for(var st=null,Ft=null,Rt=re,nn=re=0,Sr=null;Rt!==null&&nn<ge.length;nn++){Rt.index>nn?(Sr=Rt,Rt=null):Sr=Rt.sibling;var rn=ht(ue,Rt,ge[nn],Ke);if(rn===null){Rt===null&&(Rt=Sr);break}h&&Rt&&rn.alternate===null&&d(ue,Rt),re=I(rn,re,nn),Ft===null?st=rn:Ft.sibling=rn,Ft=rn,Rt=Sr}if(nn===ge.length)return x(ue,Rt),Tn&&ic(ue,nn),st;if(Rt===null){for(;nn<ge.length;nn++)Rt=bt(ue,ge[nn],Ke),Rt!==null&&(re=I(Rt,re,nn),Ft===null?st=Rt:Ft.sibling=Rt,Ft=Rt);return Tn&&ic(ue,nn),st}for(Rt=w(ue,Rt);nn<ge.length;nn++)Sr=dn(Rt,ue,nn,ge[nn],Ke),Sr!==null&&(h&&Sr.alternate!==null&&Rt.delete(Sr.key===null?nn:Sr.key),re=I(Sr,re,nn),Ft===null?st=Sr:Ft.sibling=Sr,Ft=Sr);return h&&Rt.forEach(function(Ha){return d(ue,Ha)}),Tn&&ic(ue,nn),st}function Kr(ue,re,ge,Ke){var st=C(ge);if(typeof st!="function")throw Error(o(150));if(ge=st.call(ge),ge==null)throw Error(o(151));for(var Ft=st=null,Rt=re,nn=re=0,Sr=null,rn=ge.next();Rt!==null&&!rn.done;nn++,rn=ge.next()){Rt.index>nn?(Sr=Rt,Rt=null):Sr=Rt.sibling;var Ha=ht(ue,Rt,rn.value,Ke);if(Ha===null){Rt===null&&(Rt=Sr);break}h&&Rt&&Ha.alternate===null&&d(ue,Rt),re=I(Ha,re,nn),Ft===null?st=Ha:Ft.sibling=Ha,Ft=Ha,Rt=Sr}if(rn.done)return x(ue,Rt),Tn&&ic(ue,nn),st;if(Rt===null){for(;!rn.done;nn++,rn=ge.next())rn=bt(ue,rn.value,Ke),rn!==null&&(re=I(rn,re,nn),Ft===null?st=rn:Ft.sibling=rn,Ft=rn);return Tn&&ic(ue,nn),st}for(Rt=w(ue,Rt);!rn.done;nn++,rn=ge.next())rn=dn(Rt,ue,nn,rn.value,Ke),rn!==null&&(h&&rn.alternate!==null&&Rt.delete(rn.key===null?nn:rn.key),re=I(rn,re,nn),Ft===null?st=rn:Ft.sibling=rn,Ft=rn);return h&&Rt.forEach(function(M7){return d(ue,M7)}),Tn&&ic(ue,nn),st}function vs(ue,re,ge,Ke){if(typeof ge=="object"&&ge!==null&&ge.type===u&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case l:e:{for(var st=ge.key,Ft=re;Ft!==null;){if(Ft.key===st){if(st=ge.type,st===u){if(Ft.tag===7){x(ue,Ft.sibling),re=M(Ft,ge.props.children),re.return=ue,ue=re;break e}}else if(Ft.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===A&&fI(st)===Ft.type){x(ue,Ft.sibling),re=M(Ft,ge.props),re.ref=md(ue,Ft,ge),re.return=ue,ue=re;break e}x(ue,Ft);break}else d(ue,Ft);Ft=Ft.sibling}ge.type===u?(re=hc(ge.props.children,ue.mode,Ke,ge.key),re.return=ue,ue=re):(Ke=Hy(ge.type,ge.key,ge.props,null,ue.mode,Ke),Ke.ref=md(ue,re,ge),Ke.return=ue,ue=Ke)}return G(ue);case c:e:{for(Ft=ge.key;re!==null;){if(re.key===Ft)if(re.tag===4&&re.stateNode.containerInfo===ge.containerInfo&&re.stateNode.implementation===ge.implementation){x(ue,re.sibling),re=M(re,ge.children||[]),re.return=ue,ue=re;break e}else{x(ue,re);break}else d(ue,re);re=re.sibling}re=wA(ge,ue.mode,Ke),re.return=ue,ue=re}return G(ue);case A:return Ft=ge._init,vs(ue,re,Ft(ge._payload),Ke)}if(q(ge))return at(ue,re,ge,Ke);if(C(ge))return Kr(ue,re,ge,Ke);hy(ue,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"?(ge=""+ge,re!==null&&re.tag===6?(x(ue,re.sibling),re=M(re,ge),re.return=ue,ue=re):(x(ue,re),re=AA(ge,ue.mode,Ke),re.return=ue,ue=re),G(ue)):x(ue,re)}return vs}var ju=dI(!0),pI=dI(!1),gd={},ps=yr(gd),yd=yr(gd),Wu=yr(gd);function go(h){if(h===gd)throw Error(o(174));return h}function VS(h,d){et(Wu,d),et(yd,h),et(ps,gd),h=ae(d),gt(ps),et(ps,h)}function Xu(){gt(ps),gt(yd),gt(Wu)}function mI(h){var d=go(Wu.current),x=go(ps.current);d=O(x,h.type,d),x!==d&&(et(yd,h),et(ps,d))}function zS(h){yd.current===h&&(gt(ps),gt(yd))}var Pn=yr(0);function fy(h){for(var d=h;d!==null;){if(d.tag===13){var x=d.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||cd(x)||ud(x)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if(d.flags&128)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===h)break;for(;d.sibling===null;){if(d.return===null||d.return===h)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var HS=[];function GS(){for(var h=0;h<HS.length;h++){var d=HS[h];ce?d._workInProgressVersionPrimary=null:d._workInProgressVersionSecondary=null}HS.length=0}var dy=a.ReactCurrentDispatcher,ms=a.ReactCurrentBatchConfig,Ku=0,kn=null,jr=null,xr=null,py=!1,vd=!1,_d=0,qG=0;function Wr(){throw Error(o(321))}function jS(h,d){if(d===null)return!1;for(var x=0;x<d.length&&x<h.length;x++)if(!fo(h[x],d[x]))return!1;return!0}function WS(h,d,x,w,M,I){if(Ku=I,kn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,dy.current=h===null||h.memoizedState===null?e7:t7,h=x(w,M),vd){I=0;do{if(vd=!1,_d=0,25<=I)throw Error(o(301));I+=1,xr=jr=null,d.updateQueue=null,dy.current=n7,h=x(w,M)}while(vd)}if(dy.current=_y,d=jr!==null&&jr.next!==null,Ku=0,xr=jr=kn=null,py=!1,d)throw Error(o(300));return h}function XS(){var h=_d!==0;return _d=0,h}function Yo(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xr===null?kn.memoizedState=xr=h:xr=xr.next=h,xr}function yo(){if(jr===null){var h=kn.alternate;h=h!==null?h.memoizedState:null}else h=jr.next;var d=xr===null?kn.memoizedState:xr.next;if(d!==null)xr=d,jr=h;else{if(h===null)throw Error(o(310));jr=h,h={memoizedState:jr.memoizedState,baseState:jr.baseState,baseQueue:jr.baseQueue,queue:jr.queue,next:null},xr===null?kn.memoizedState=xr=h:xr=xr.next=h}return xr}function sc(h,d){return typeof d=="function"?d(h):d}function my(h){var d=yo(),x=d.queue;if(x===null)throw Error(o(311));x.lastRenderedReducer=h;var w=jr,M=w.baseQueue,I=x.pending;if(I!==null){if(M!==null){var G=M.next;M.next=I.next,I.next=G}w.baseQueue=M=I,x.pending=null}if(M!==null){I=M.next,w=w.baseState;var ee=G=null,ve=null,De=I;do{var tt=De.lane;if((Ku&tt)===tt)ve!==null&&(ve=ve.next={lane:0,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null}),w=De.hasEagerState?De.eagerState:h(w,De.action);else{var bt={lane:tt,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null};ve===null?(ee=ve=bt,G=w):ve=ve.next=bt,kn.lanes|=tt,Ju|=tt}De=De.next}while(De!==null&&De!==I);ve===null?G=w:ve.next=ee,fo(w,d.memoizedState)||(Hi=!0),d.memoizedState=w,d.baseState=G,d.baseQueue=ve,x.lastRenderedState=w}if(h=x.interleaved,h!==null){M=h;do I=M.lane,kn.lanes|=I,Ju|=I,M=M.next;while(M!==h)}else M===null&&(x.lanes=0);return[d.memoizedState,x.dispatch]}function gy(h){var d=yo(),x=d.queue;if(x===null)throw Error(o(311));x.lastRenderedReducer=h;var w=x.dispatch,M=x.pending,I=d.memoizedState;if(M!==null){x.pending=null;var G=M=M.next;do I=h(I,G.action),G=G.next;while(G!==M);fo(I,d.memoizedState)||(Hi=!0),d.memoizedState=I,d.baseQueue===null&&(d.baseState=I),x.lastRenderedState=I}return[I,w]}function gI(){}function yI(h,d){var x=kn,w=yo(),M=d(),I=!fo(w.memoizedState,M);if(I&&(w.memoizedState=M,Hi=!0),w=w.queue,Sd(xI.bind(null,x,w,h),[h]),w.getSnapshot!==d||I||xr!==null&&xr.memoizedState.tag&1){if(x.flags|=2048,xd(9,_I.bind(null,x,w,M,d),void 0,null),Zn===null)throw Error(o(349));Ku&30||vI(x,d,M)}return M}function vI(h,d,x){h.flags|=16384,h={getSnapshot:d,value:x},d=kn.updateQueue,d===null?(d={lastEffect:null,stores:null},kn.updateQueue=d,d.stores=[h]):(x=d.stores,x===null?d.stores=[h]:x.push(h))}function _I(h,d,x,w){d.value=x,d.getSnapshot=w,SI(d)&&gs(h,1,-1)}function xI(h,d,x){return x(function(){SI(d)&&gs(h,1,-1)})}function SI(h){var d=h.getSnapshot;h=h.value;try{var x=d();return!fo(h,x)}catch{return!0}}function KS(h){var d=Yo();return typeof h=="function"&&(h=h()),d.memoizedState=d.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sc,lastRenderedState:h},d.queue=h,h=h.dispatch=ZG.bind(null,kn,h),[d.memoizedState,h]}function xd(h,d,x,w){return h={tag:h,create:d,destroy:x,deps:w,next:null},d=kn.updateQueue,d===null?(d={lastEffect:null,stores:null},kn.updateQueue=d,d.lastEffect=h.next=h):(x=d.lastEffect,x===null?d.lastEffect=h.next=h:(w=x.next,x.next=h,h.next=w,d.lastEffect=h)),h}function AI(){return yo().memoizedState}function yy(h,d,x,w){var M=Yo();kn.flags|=h,M.memoizedState=xd(1|d,x,void 0,w===void 0?null:w)}function vy(h,d,x,w){var M=yo();w=w===void 0?null:w;var I=void 0;if(jr!==null){var G=jr.memoizedState;if(I=G.destroy,w!==null&&jS(w,G.deps)){M.memoizedState=xd(d,x,I,w);return}}kn.flags|=h,M.memoizedState=xd(1|d,x,I,w)}function $S(h,d){return yy(8390656,8,h,d)}function Sd(h,d){return vy(2048,8,h,d)}function wI(h,d){return vy(4,2,h,d)}function EI(h,d){return vy(4,4,h,d)}function MI(h,d){if(typeof d=="function")return h=h(),d(h),function(){d(null)};if(d!=null)return h=h(),d.current=h,function(){d.current=null}}function TI(h,d,x){return x=x!=null?x.concat([h]):null,vy(4,4,MI.bind(null,d,h),x)}function JS(){}function CI(h,d){var x=yo();d=d===void 0?null:d;var w=x.memoizedState;return w!==null&&d!==null&&jS(d,w[1])?w[0]:(x.memoizedState=[h,d],h)}function bI(h,d){var x=yo();d=d===void 0?null:d;var w=x.memoizedState;return w!==null&&d!==null&&jS(d,w[1])?w[0]:(h=h(),x.memoizedState=[h,d],h)}function YG(h,d){var x=tn;tn=x!==0&&4>x?x:4,h(!0);var w=ms.transition;ms.transition={};try{h(!1),d()}finally{tn=x,ms.transition=w}}function RI(){return yo().memoizedState}function QG(h,d,x){var w=Ua(h);x={lane:w,action:x,hasEagerState:!1,eagerState:null,next:null},PI(h)?II(d,x):(LI(h,d,x),x=hi(),h=gs(h,w,x),h!==null&&DI(h,d,w))}function ZG(h,d,x){var w=Ua(h),M={lane:w,action:x,hasEagerState:!1,eagerState:null,next:null};if(PI(h))II(d,M);else{LI(h,d,M);var I=h.alternate;if(h.lanes===0&&(I===null||I.lanes===0)&&(I=d.lastRenderedReducer,I!==null))try{var G=d.lastRenderedState,ee=I(G,x);if(M.hasEagerState=!0,M.eagerState=ee,fo(ee,G))return}catch{}finally{}x=hi(),h=gs(h,w,x),h!==null&&DI(h,d,w)}}function PI(h){var d=h.alternate;return h===kn||d!==null&&d===kn}function II(h,d){vd=py=!0;var x=h.pending;x===null?d.next=d:(d.next=x.next,x.next=d),h.pending=d}function LI(h,d,x){Zn!==null&&h.mode&1&&!(Vt&2)?(h=d.interleaved,h===null?(x.next=x,mo===null?mo=[d]:mo.push(d)):(x.next=h.next,h.next=x),d.interleaved=x):(h=d.pending,h===null?x.next=x:(x.next=h.next,h.next=x),d.pending=x)}function DI(h,d,x){if(x&4194240){var w=d.lanes;w&=h.pendingLanes,x|=w,d.lanes=x,wS(h,x)}}var _y={readContext:hs,useCallback:Wr,useContext:Wr,useEffect:Wr,useImperativeHandle:Wr,useInsertionEffect:Wr,useLayoutEffect:Wr,useMemo:Wr,useReducer:Wr,useRef:Wr,useState:Wr,useDebugValue:Wr,useDeferredValue:Wr,useTransition:Wr,useMutableSource:Wr,useSyncExternalStore:Wr,useId:Wr,unstable_isNewReconciler:!1},e7={readContext:hs,useCallback:function(h,d){return Yo().memoizedState=[h,d===void 0?null:d],h},useContext:hs,useEffect:$S,useImperativeHandle:function(h,d,x){return x=x!=null?x.concat([h]):null,yy(4194308,4,MI.bind(null,d,h),x)},useLayoutEffect:function(h,d){return yy(4194308,4,h,d)},useInsertionEffect:function(h,d){return yy(4,2,h,d)},useMemo:function(h,d){var x=Yo();return d=d===void 0?null:d,h=h(),x.memoizedState=[h,d],h},useReducer:function(h,d,x){var w=Yo();return d=x!==void 0?x(d):d,w.memoizedState=w.baseState=d,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:d},w.queue=h,h=h.dispatch=QG.bind(null,kn,h),[w.memoizedState,h]},useRef:function(h){var d=Yo();return h={current:h},d.memoizedState=h},useState:KS,useDebugValue:JS,useDeferredValue:function(h){var d=KS(h),x=d[0],w=d[1];return $S(function(){var M=ms.transition;ms.transition={};try{w(h)}finally{ms.transition=M}},[h]),x},useTransition:function(){var h=KS(!1),d=h[0];return h=YG.bind(null,h[1]),Yo().memoizedState=h,[d,h]},useMutableSource:function(){},useSyncExternalStore:function(h,d,x){var w=kn,M=Yo();if(Tn){if(x===void 0)throw Error(o(407));x=x()}else{if(x=d(),Zn===null)throw Error(o(349));Ku&30||vI(w,d,x)}M.memoizedState=x;var I={value:x,getSnapshot:d};return M.queue=I,$S(xI.bind(null,w,I,h),[h]),w.flags|=2048,xd(9,_I.bind(null,w,I,x,d),void 0,null),x},useId:function(){var h=Yo(),d=Zn.identifierPrefix;if(Tn){var x=qo,w=Jo;x=(w&~(1<<32-Ui(w)-1)).toString(32)+x,d=":"+d+"R"+x,x=_d++,0<x&&(d+="H"+x.toString(32)),d+=":"}else x=qG++,d=":"+d+"r"+x.toString(32)+":";return h.memoizedState=d},unstable_isNewReconciler:!1},t7={readContext:hs,useCallback:CI,useContext:hs,useEffect:Sd,useImperativeHandle:TI,useInsertionEffect:wI,useLayoutEffect:EI,useMemo:bI,useReducer:my,useRef:AI,useState:function(){return my(sc)},useDebugValue:JS,useDeferredValue:function(h){var d=my(sc),x=d[0],w=d[1];return Sd(function(){var M=ms.transition;ms.transition={};try{w(h)}finally{ms.transition=M}},[h]),x},useTransition:function(){var h=my(sc)[0],d=yo().memoizedState;return[h,d]},useMutableSource:gI,useSyncExternalStore:yI,useId:RI,unstable_isNewReconciler:!1},n7={readContext:hs,useCallback:CI,useContext:hs,useEffect:Sd,useImperativeHandle:TI,useInsertionEffect:wI,useLayoutEffect:EI,useMemo:bI,useReducer:gy,useRef:AI,useState:function(){return gy(sc)},useDebugValue:JS,useDeferredValue:function(h){var d=gy(sc),x=d[0],w=d[1];return Sd(function(){var M=ms.transition;ms.transition={};try{w(h)}finally{ms.transition=M}},[h]),x},useTransition:function(){var h=gy(sc)[0],d=yo().memoizedState;return[h,d]},useMutableSource:gI,useSyncExternalStore:yI,useId:RI,unstable_isNewReconciler:!1};function qS(h,d){try{var x="",w=d;do x+=JG(w),w=w.return;while(w);var M=x}catch(I){M=`
Error generating stack: `+I.message+`
`+I.stack}return{value:h,source:d,stack:M}}function YS(h,d){try{console.error(d.value)}catch(x){setTimeout(function(){throw x})}}var r7=typeof WeakMap=="function"?WeakMap:Map;function BI(h,d,x){x=$o(-1,x),x.tag=3,x.payload={element:null};var w=d.value;return x.callback=function(){Ny||(Ny=!0,mA=w),YS(h,d)},x}function NI(h,d,x){x=$o(-1,x),x.tag=3;var w=h.type.getDerivedStateFromError;if(typeof w=="function"){var M=d.value;x.payload=function(){return w(M)},x.callback=function(){YS(h,d)}}var I=h.stateNode;return I!==null&&typeof I.componentDidCatch=="function"&&(x.callback=function(){YS(h,d),typeof w!="function"&&(Fa===null?Fa=new Set([this]):Fa.add(this));var G=d.stack;this.componentDidCatch(d.value,{componentStack:G!==null?G:""})}),x}function OI(h,d,x){var w=h.pingCache;if(w===null){w=h.pingCache=new r7;var M=new Set;w.set(d,M)}else M=w.get(d),M===void 0&&(M=new Set,w.set(d,M));M.has(x)||(M.add(x),h=y7.bind(null,h,d,x),d.then(h,h))}function FI(h){do{var d;if((d=h.tag===13)&&(d=h.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return h;h=h.return}while(h!==null);return null}function kI(h,d,x,w,M){return h.mode&1?(h.flags|=65536,h.lanes=M,h):(h===d?h.flags|=65536:(h.flags|=128,x.flags|=131072,x.flags&=-52805,x.tag===1&&(x.alternate===null?x.tag=17:(d=$o(-1,1),d.tag=2,Oa(x,d))),x.lanes|=1),h)}function vo(h){h.flags|=4}function UI(h,d){if(h!==null&&h.child===d.child)return!0;if(d.flags&16)return!1;for(h=d.child;h!==null;){if(h.flags&12854||h.subtreeFlags&12854)return!1;h=h.sibling}return!0}var Ad,wd,xy,Sy;if(oe)Ad=function(h,d){for(var x=d.child;x!==null;){if(x.tag===5||x.tag===6)te(h,x.stateNode);else if(x.tag!==4&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===d)break;for(;x.sibling===null;){if(x.return===null||x.return===d)return;x=x.return}x.sibling.return=x.return,x=x.sibling}},wd=function(){},xy=function(h,d,x,w,M){if(h=h.memoizedProps,h!==w){var I=d.stateNode,G=go(ps.current);x=ne(I,x,h,w,M,G),(d.updateQueue=x)&&vo(d)}},Sy=function(h,d,x,w){x!==w&&vo(d)};else if(V){Ad=function(h,d,x,w){for(var M=d.child;M!==null;){if(M.tag===5){var I=M.stateNode;x&&w&&(I=mn(I,M.type,M.memoizedProps,M)),te(h,I)}else if(M.tag===6)I=M.stateNode,x&&w&&(I=Xn(I,M.memoizedProps,M)),te(h,I);else if(M.tag!==4){if(M.tag===22&&M.memoizedState!==null)I=M.child,I!==null&&(I.return=M),Ad(h,M,!0,!0);else if(M.child!==null){M.child.return=M,M=M.child;continue}}if(M===d)break;for(;M.sibling===null;){if(M.return===null||M.return===d)return;M=M.return}M.sibling.return=M.return,M=M.sibling}};var VI=function(h,d,x,w){for(var M=d.child;M!==null;){if(M.tag===5){var I=M.stateNode;x&&w&&(I=mn(I,M.type,M.memoizedProps,M)),rt(h,I)}else if(M.tag===6)I=M.stateNode,x&&w&&(I=Xn(I,M.memoizedProps,M)),rt(h,I);else if(M.tag!==4){if(M.tag===22&&M.memoizedState!==null)I=M.child,I!==null&&(I.return=M),VI(h,M,!0,!0);else if(M.child!==null){M.child.return=M,M=M.child;continue}}if(M===d)break;for(;M.sibling===null;){if(M.return===null||M.return===d)return;M=M.return}M.sibling.return=M.return,M=M.sibling}};wd=function(h,d){var x=d.stateNode;if(!UI(h,d)){h=x.containerInfo;var w=nt(h);VI(w,d,!1,!1),x.pendingChildren=w,vo(d),Bt(h,w)}},xy=function(h,d,x,w,M){var I=h.stateNode,G=h.memoizedProps;if((h=UI(h,d))&&G===w)d.stateNode=I;else{var ee=d.stateNode,ve=go(ps.current),De=null;G!==w&&(De=ne(ee,x,G,w,M,ve)),h&&De===null?d.stateNode=I:(I=Be(I,De,x,G,w,d,h,ee),Te(I,x,w,M,ve)&&vo(d),d.stateNode=I,h?vo(d):Ad(I,d,!1,!1))}},Sy=function(h,d,x,w){x!==w?(h=go(Wu.current),x=go(ps.current),d.stateNode=Ae(w,h,x,d),vo(d)):d.stateNode=h.stateNode}}else wd=function(){},xy=function(){},Sy=function(){};function Ed(h,d){if(!Tn)switch(h.tailMode){case"hidden":d=h.tail;for(var x=null;d!==null;)d.alternate!==null&&(x=d),d=d.sibling;x===null?h.tail=null:x.sibling=null;break;case"collapsed":x=h.tail;for(var w=null;x!==null;)x.alternate!==null&&(w=x),x=x.sibling;w===null?d||h.tail===null?h.tail=null:h.tail.sibling=null:w.sibling=null}}function Xr(h){var d=h.alternate!==null&&h.alternate.child===h.child,x=0,w=0;if(d)for(var M=h.child;M!==null;)x|=M.lanes|M.childLanes,w|=M.subtreeFlags&14680064,w|=M.flags&14680064,M.return=h,M=M.sibling;else for(M=h.child;M!==null;)x|=M.lanes|M.childLanes,w|=M.subtreeFlags,w|=M.flags,M.return=h,M=M.sibling;return h.subtreeFlags|=w,h.childLanes=x,d}function i7(h,d,x){var w=d.pendingProps;switch(OS(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xr(d),null;case 1:return vr(d.type)&&Kn(),Xr(d),null;case 3:return w=d.stateNode,Xu(),gt(Fn),gt(Ut),GS(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(h===null||h.child===null)&&(pd(d)?vo(d):h===null||h.memoizedState.isDehydrated&&!(d.flags&256)||(d.flags|=1024,ks!==null&&(vA(ks),ks=null))),wd(h,d),Xr(d),null;case 5:zS(d),x=go(Wu.current);var M=d.type;if(h!==null&&d.stateNode!=null)xy(h,d,M,w,x),h.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!w){if(d.stateNode===null)throw Error(o(166));return Xr(d),null}if(h=go(ps.current),pd(d)){if(!he)throw Error(o(175));h=vS(d.stateNode,d.type,d.memoizedProps,x,h,d,!dd),d.updateQueue=h,h!==null&&vo(d)}else{var I=Y(M,w,x,h,d);Ad(I,d,!1,!1),d.stateNode=I,Te(I,M,w,x,h)&&vo(d)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return Xr(d),null;case 6:if(h&&d.stateNode!=null)Sy(h,d,h.memoizedProps,w);else{if(typeof w!="string"&&d.stateNode===null)throw Error(o(166));if(h=go(Wu.current),x=go(ps.current),pd(d)){if(!he)throw Error(o(176));if(h=d.stateNode,w=d.memoizedProps,(x=_S(h,w,d,!dd))&&(M=Vi,M!==null))switch(I=(M.mode&1)!==0,M.tag){case 3:ot(M.stateNode.containerInfo,h,w,I);break;case 5:dt(M.type,M.memoizedProps,M.stateNode,h,w,I)}x&&vo(d)}else d.stateNode=Ae(w,h,x,d)}return Xr(d),null;case 13:if(gt(Pn),w=d.memoizedState,Tn&&zi!==null&&d.mode&1&&!(d.flags&128)){for(h=zi;h;)h=Ba(h);return Gu(),d.flags|=98560,d}if(w!==null&&w.dehydrated!==null){if(w=pd(d),h===null){if(!w)throw Error(o(318));if(!he)throw Error(o(344));if(h=d.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(o(317));xS(h,d)}else Gu(),!(d.flags&128)&&(d.memoizedState=null),d.flags|=4;return Xr(d),null}return ks!==null&&(vA(ks),ks=null),d.flags&128?(d.lanes=x,d):(w=w!==null,x=!1,h===null?pd(d):x=h.memoizedState!==null,w&&!x&&(d.child.flags|=8192,d.mode&1&&(h===null||Pn.current&1?cr===0&&(cr=3):xA())),d.updateQueue!==null&&(d.flags|=4),Xr(d),null);case 4:return Xu(),wd(h,d),h===null&&ye(d.stateNode.containerInfo),Xr(d),null;case 10:return PS(d.type._context),Xr(d),null;case 17:return vr(d.type)&&Kn(),Xr(d),null;case 19:if(gt(Pn),M=d.memoizedState,M===null)return Xr(d),null;if(w=(d.flags&128)!==0,I=M.rendering,I===null)if(w)Ed(M,!1);else{if(cr!==0||h!==null&&h.flags&128)for(h=d.child;h!==null;){if(I=fy(h),I!==null){for(d.flags|=128,Ed(M,!1),h=I.updateQueue,h!==null&&(d.updateQueue=h,d.flags|=4),d.subtreeFlags=0,h=x,w=d.child;w!==null;)x=w,M=h,x.flags&=14680066,I=x.alternate,I===null?(x.childLanes=0,x.lanes=M,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=I.childLanes,x.lanes=I.lanes,x.child=I.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=I.memoizedProps,x.memoizedState=I.memoizedState,x.updateQueue=I.updateQueue,x.type=I.type,M=I.dependencies,x.dependencies=M===null?null:{lanes:M.lanes,firstContext:M.firstContext}),w=w.sibling;return et(Pn,Pn.current&1|2),d.child}h=h.sibling}M.tail!==null&&_r()>pA&&(d.flags|=128,w=!0,Ed(M,!1),d.lanes=4194304)}else{if(!w)if(h=fy(I),h!==null){if(d.flags|=128,w=!0,h=h.updateQueue,h!==null&&(d.updateQueue=h,d.flags|=4),Ed(M,!0),M.tail===null&&M.tailMode==="hidden"&&!I.alternate&&!Tn)return Xr(d),null}else 2*_r()-M.renderingStartTime>pA&&x!==1073741824&&(d.flags|=128,w=!0,Ed(M,!1),d.lanes=4194304);M.isBackwards?(I.sibling=d.child,d.child=I):(h=M.last,h!==null?h.sibling=I:d.child=I,M.last=I)}return M.tail!==null?(d=M.tail,M.rendering=d,M.tail=d.sibling,M.renderingStartTime=_r(),d.sibling=null,h=Pn.current,et(Pn,w?h&1|2:h&1),d):(Xr(d),null);case 22:case 23:return _A(),w=d.memoizedState!==null,h!==null&&h.memoizedState!==null!==w&&(d.flags|=8192),w&&d.mode&1?Gi&1073741824&&(Xr(d),oe&&d.subtreeFlags&6&&(d.flags|=8192)):Xr(d),null;case 24:return null;case 25:return null}throw Error(o(156,d.tag))}var s7=a.ReactCurrentOwner,Hi=!1;function ui(h,d,x,w){d.child=h===null?pI(d,null,x,w):ju(d,h.child,x,w)}function zI(h,d,x,w,M){x=x.render;var I=d.ref;return Vu(d,M),w=WS(h,d,x,w,I,M),x=XS(),h!==null&&!Hi?(d.updateQueue=h.updateQueue,d.flags&=-2053,h.lanes&=~M,Qo(h,d,M)):(Tn&&x&&NS(d),d.flags|=1,ui(h,d,w,M),d.child)}function HI(h,d,x,w,M){if(h===null){var I=x.type;return typeof I=="function"&&!SA(I)&&I.defaultProps===void 0&&x.compare===null&&x.defaultProps===void 0?(d.tag=15,d.type=I,GI(h,d,I,w,M)):(h=Hy(x.type,null,w,d,d.mode,M),h.ref=d.ref,h.return=d,d.child=h)}if(I=h.child,!(h.lanes&M)){var G=I.memoizedProps;if(x=x.compare,x=x!==null?x:ry,x(G,w)&&h.ref===d.ref)return Qo(h,d,M)}return d.flags|=1,h=za(I,w),h.ref=d.ref,h.return=d,d.child=h}function GI(h,d,x,w,M){if(h!==null&&ry(h.memoizedProps,w)&&h.ref===d.ref)if(Hi=!1,(h.lanes&M)!==0)h.flags&131072&&(Hi=!0);else return d.lanes=h.lanes,Qo(h,d,M);return QS(h,d,x,w,M)}function jI(h,d,x){var w=d.pendingProps,M=w.children,I=h!==null?h.memoizedState:null;if(w.mode==="hidden")if(!(d.mode&1))d.memoizedState={baseLanes:0,cachePool:null},et($u,Gi),Gi|=x;else if(x&1073741824)d.memoizedState={baseLanes:0,cachePool:null},w=I!==null?I.baseLanes:x,et($u,Gi),Gi|=w;else return h=I!==null?I.baseLanes|x:x,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:h,cachePool:null},d.updateQueue=null,et($u,Gi),Gi|=h,null;else I!==null?(w=I.baseLanes|x,d.memoizedState=null):w=x,et($u,Gi),Gi|=w;return ui(h,d,M,x),d.child}function WI(h,d){var x=d.ref;(h===null&&x!==null||h!==null&&h.ref!==x)&&(d.flags|=512,d.flags|=2097152)}function QS(h,d,x,w,M){var I=vr(x)?co:Ut.current;return I=us(d,I),Vu(d,M),x=WS(h,d,x,w,I,M),w=XS(),h!==null&&!Hi?(d.updateQueue=h.updateQueue,d.flags&=-2053,h.lanes&=~M,Qo(h,d,M)):(Tn&&w&&NS(d),d.flags|=1,ui(h,d,x,M),d.child)}function XI(h,d,x,w,M){if(vr(x)){var I=!0;Ir(d)}else I=!1;if(Vu(d,M),d.stateNode===null)h!==null&&(h.alternate=null,d.alternate=null,d.flags|=2),oI(d,x,w),BS(d,x,w,M),w=!0;else if(h===null){var G=d.stateNode,ee=d.memoizedProps;G.props=ee;var ve=G.context,De=x.contextType;typeof De=="object"&&De!==null?De=hs(De):(De=vr(x)?co:Ut.current,De=us(d,De));var tt=x.getDerivedStateFromProps,bt=typeof tt=="function"||typeof G.getSnapshotBeforeUpdate=="function";bt||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(ee!==w||ve!==De)&&aI(d,G,w,De),Na=!1;var ht=d.memoizedState;G.state=ht,ay(d,w,G,M),ve=d.memoizedState,ee!==w||ht!==ve||Fn.current||Na?(typeof tt=="function"&&(DS(d,x,tt,w),ve=d.memoizedState),(ee=Na||sI(d,x,ee,w,ht,ve,De))?(bt||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount()),typeof G.componentDidMount=="function"&&(d.flags|=4194308)):(typeof G.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=w,d.memoizedState=ve),G.props=w,G.state=ve,G.context=De,w=ee):(typeof G.componentDidMount=="function"&&(d.flags|=4194308),w=!1)}else{G=d.stateNode,tI(h,d),ee=d.memoizedProps,De=d.type===d.elementType?ee:Fs(d.type,ee),G.props=De,bt=d.pendingProps,ht=G.context,ve=x.contextType,typeof ve=="object"&&ve!==null?ve=hs(ve):(ve=vr(x)?co:Ut.current,ve=us(d,ve));var dn=x.getDerivedStateFromProps;(tt=typeof dn=="function"||typeof G.getSnapshotBeforeUpdate=="function")||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(ee!==bt||ht!==ve)&&aI(d,G,w,ve),Na=!1,ht=d.memoizedState,G.state=ht,ay(d,w,G,M);var at=d.memoizedState;ee!==bt||ht!==at||Fn.current||Na?(typeof dn=="function"&&(DS(d,x,dn,w),at=d.memoizedState),(De=Na||sI(d,x,De,w,ht,at,ve)||!1)?(tt||typeof G.UNSAFE_componentWillUpdate!="function"&&typeof G.componentWillUpdate!="function"||(typeof G.componentWillUpdate=="function"&&G.componentWillUpdate(w,at,ve),typeof G.UNSAFE_componentWillUpdate=="function"&&G.UNSAFE_componentWillUpdate(w,at,ve)),typeof G.componentDidUpdate=="function"&&(d.flags|=4),typeof G.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof G.componentDidUpdate!="function"||ee===h.memoizedProps&&ht===h.memoizedState||(d.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||ee===h.memoizedProps&&ht===h.memoizedState||(d.flags|=1024),d.memoizedProps=w,d.memoizedState=at),G.props=w,G.state=at,G.context=ve,w=De):(typeof G.componentDidUpdate!="function"||ee===h.memoizedProps&&ht===h.memoizedState||(d.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||ee===h.memoizedProps&&ht===h.memoizedState||(d.flags|=1024),w=!1)}return ZS(h,d,x,w,I,M)}function ZS(h,d,x,w,M,I){WI(h,d);var G=(d.flags&128)!==0;if(!w&&!G)return M&&ku(d,x,!1),Qo(h,d,I);w=d.stateNode,s7.current=d;var ee=G&&typeof x.getDerivedStateFromError!="function"?null:w.render();return d.flags|=1,h!==null&&G?(d.child=ju(d,h.child,null,I),d.child=ju(d,null,ee,I)):ui(h,d,ee,I),d.memoizedState=w.state,M&&ku(d,x,!0),d.child}function KI(h){var d=h.stateNode;d.pendingContext?uo(h,d.pendingContext,d.pendingContext!==d.context):d.context&&uo(h,d.context,!1),VS(h,d.containerInfo)}function $I(h,d,x,w,M){return Gu(),US(M),d.flags|=256,ui(h,d,x,w),d.child}var Ay={dehydrated:null,treeContext:null,retryLane:0};function wy(h){return{baseLanes:h,cachePool:null}}function JI(h,d,x){var w=d.pendingProps,M=Pn.current,I=!1,G=(d.flags&128)!==0,ee;if((ee=G)||(ee=h!==null&&h.memoizedState===null?!1:(M&2)!==0),ee?(I=!0,d.flags&=-129):(h===null||h.memoizedState!==null)&&(M|=1),et(Pn,M&1),h===null)return kS(d),h=d.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?(d.mode&1?ud(h)?d.lanes=8:d.lanes=1073741824:d.lanes=1,null):(M=w.children,h=w.fallback,I?(w=d.mode,I=d.child,M={mode:"hidden",children:M},!(w&1)&&I!==null?(I.childLanes=0,I.pendingProps=M):I=Gy(M,w,0,null),h=hc(h,w,x,null),I.return=d,h.return=d,I.sibling=h,d.child=I,d.child.memoizedState=wy(x),d.memoizedState=Ay,h):eA(d,M));if(M=h.memoizedState,M!==null){if(ee=M.dehydrated,ee!==null){if(G)return d.flags&256?(d.flags&=-257,Ey(h,d,x,Error(o(422)))):d.memoizedState!==null?(d.child=h.child,d.flags|=128,null):(I=w.fallback,M=d.mode,w=Gy({mode:"visible",children:w.children},M,0,null),I=hc(I,M,x,null),I.flags|=2,w.return=d,I.return=d,w.sibling=I,d.child=w,d.mode&1&&ju(d,h.child,null,x),d.child.memoizedState=wy(x),d.memoizedState=Ay,I);if(!(d.mode&1))d=Ey(h,d,x,null);else if(ud(ee))d=Ey(h,d,x,Error(o(419)));else if(w=(x&h.childLanes)!==0,Hi||w){if(w=Zn,w!==null){switch(x&-x){case 4:I=2;break;case 16:I=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:I=32;break;case 536870912:I=268435456;break;default:I=0}w=I&(w.suspendedLanes|x)?0:I,w!==0&&w!==M.retryLane&&(M.retryLane=w,gs(h,w,-1))}xA(),d=Ey(h,d,x,Error(o(421)))}else cd(ee)?(d.flags|=128,d.child=h.child,d=v7.bind(null,h),Nu(ee,d),d=null):(x=M.treeContext,he&&(zi=qg(ee),Vi=d,Tn=!0,ks=null,dd=!1,x!==null&&(fs[ds++]=Jo,fs[ds++]=qo,fs[ds++]=rc,Jo=x.id,qo=x.overflow,rc=d)),d=eA(d,d.pendingProps.children),d.flags|=4096);return d}return I?(w=YI(h,d,w.children,w.fallback,x),I=d.child,M=h.child.memoizedState,I.memoizedState=M===null?wy(x):{baseLanes:M.baseLanes|x,cachePool:null},I.childLanes=h.childLanes&~x,d.memoizedState=Ay,w):(x=qI(h,d,w.children,x),d.memoizedState=null,x)}return I?(w=YI(h,d,w.children,w.fallback,x),I=d.child,M=h.child.memoizedState,I.memoizedState=M===null?wy(x):{baseLanes:M.baseLanes|x,cachePool:null},I.childLanes=h.childLanes&~x,d.memoizedState=Ay,w):(x=qI(h,d,w.children,x),d.memoizedState=null,x)}function eA(h,d){return d=Gy({mode:"visible",children:d},h.mode,0,null),d.return=h,h.child=d}function qI(h,d,x,w){var M=h.child;return h=M.sibling,x=za(M,{mode:"visible",children:x}),!(d.mode&1)&&(x.lanes=w),x.return=d,x.sibling=null,h!==null&&(w=d.deletions,w===null?(d.deletions=[h],d.flags|=16):w.push(h)),d.child=x}function YI(h,d,x,w,M){var I=d.mode;h=h.child;var G=h.sibling,ee={mode:"hidden",children:x};return!(I&1)&&d.child!==h?(x=d.child,x.childLanes=0,x.pendingProps=ee,d.deletions=null):(x=za(h,ee),x.subtreeFlags=h.subtreeFlags&14680064),G!==null?w=za(G,w):(w=hc(w,I,M,null),w.flags|=2),w.return=d,x.return=d,x.sibling=w,d.child=x,w}function Ey(h,d,x,w){return w!==null&&US(w),ju(d,h.child,null,x),h=eA(d,d.pendingProps.children),h.flags|=2,d.memoizedState=null,h}function QI(h,d,x){h.lanes|=d;var w=h.alternate;w!==null&&(w.lanes|=d),IS(h.return,d,x)}function tA(h,d,x,w,M){var I=h.memoizedState;I===null?h.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:w,tail:x,tailMode:M}:(I.isBackwards=d,I.rendering=null,I.renderingStartTime=0,I.last=w,I.tail=x,I.tailMode=M)}function ZI(h,d,x){var w=d.pendingProps,M=w.revealOrder,I=w.tail;if(ui(h,d,w.children,x),w=Pn.current,w&2)w=w&1|2,d.flags|=128;else{if(h!==null&&h.flags&128)e:for(h=d.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&QI(h,x,d);else if(h.tag===19)QI(h,x,d);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)break e;for(;h.sibling===null;){if(h.return===null||h.return===d)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}w&=1}if(et(Pn,w),!(d.mode&1))d.memoizedState=null;else switch(M){case"forwards":for(x=d.child,M=null;x!==null;)h=x.alternate,h!==null&&fy(h)===null&&(M=x),x=x.sibling;x=M,x===null?(M=d.child,d.child=null):(M=x.sibling,x.sibling=null),tA(d,!1,M,x,I);break;case"backwards":for(x=null,M=d.child,d.child=null;M!==null;){if(h=M.alternate,h!==null&&fy(h)===null){d.child=M;break}h=M.sibling,M.sibling=x,x=M,M=h}tA(d,!0,x,null,I);break;case"together":tA(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function Qo(h,d,x){if(h!==null&&(d.dependencies=h.dependencies),Ju|=d.lanes,!(x&d.childLanes))return null;if(h!==null&&d.child!==h.child)throw Error(o(153));if(d.child!==null){for(h=d.child,x=za(h,h.pendingProps),d.child=x,x.return=d;h.sibling!==null;)h=h.sibling,x=x.sibling=za(h,h.pendingProps),x.return=d;x.sibling=null}return d.child}function o7(h,d,x){switch(d.tag){case 3:KI(d),Gu();break;case 5:mI(d);break;case 1:vr(d.type)&&Ir(d);break;case 4:VS(d,d.stateNode.containerInfo);break;case 10:eI(d,d.type._context,d.memoizedProps.value);break;case 13:var w=d.memoizedState;if(w!==null)return w.dehydrated!==null?(et(Pn,Pn.current&1),d.flags|=128,null):x&d.child.childLanes?JI(h,d,x):(et(Pn,Pn.current&1),h=Qo(h,d,x),h!==null?h.sibling:null);et(Pn,Pn.current&1);break;case 19:if(w=(x&d.childLanes)!==0,h.flags&128){if(w)return ZI(h,d,x);d.flags|=128}var M=d.memoizedState;if(M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),et(Pn,Pn.current),w)break;return null;case 22:case 23:return d.lanes=0,jI(h,d,x)}return Qo(h,d,x)}function a7(h,d){switch(OS(d),d.tag){case 1:return vr(d.type)&&Kn(),h=d.flags,h&65536?(d.flags=h&-65537|128,d):null;case 3:return Xu(),gt(Fn),gt(Ut),GS(),h=d.flags,h&65536&&!(h&128)?(d.flags=h&-65537|128,d):null;case 5:return zS(d),null;case 13:if(gt(Pn),h=d.memoizedState,h!==null&&h.dehydrated!==null){if(d.alternate===null)throw Error(o(340));Gu()}return h=d.flags,h&65536?(d.flags=h&-65537|128,d):null;case 19:return gt(Pn),null;case 4:return Xu(),null;case 10:return PS(d.type._context),null;case 22:case 23:return _A(),null;case 24:return null;default:return null}}var My=!1,oc=!1,l7=typeof WeakSet=="function"?WeakSet:Set,je=null;function Ty(h,d){var x=h.ref;if(x!==null)if(typeof x=="function")try{x(null)}catch(w){bi(h,d,w)}else x.current=null}function nA(h,d,x){try{x()}catch(w){bi(h,d,w)}}var e3=!1;function c7(h,d){for(W(h.containerInfo),je=d;je!==null;)if(h=je,d=h.child,(h.subtreeFlags&1028)!==0&&d!==null)d.return=h,je=d;else for(;je!==null;){h=je;try{var x=h.alternate;if(h.flags&1024)switch(h.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var w=x.memoizedProps,M=x.memoizedState,I=h.stateNode,G=I.getSnapshotBeforeUpdate(h.elementType===h.type?w:Fs(h.type,w),M);I.__reactInternalSnapshotBeforeUpdate=G}break;case 3:oe&&Ie(h.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(ee){bi(h,h.return,ee)}if(d=h.sibling,d!==null){d.return=h.return,je=d;break}je=h.return}return x=e3,e3=!1,x}function ac(h,d,x){var w=d.updateQueue;if(w=w!==null?w.lastEffect:null,w!==null){var M=w=w.next;do{if((M.tag&h)===h){var I=M.destroy;M.destroy=void 0,I!==void 0&&nA(d,x,I)}M=M.next}while(M!==w)}}function Md(h,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var x=d=d.next;do{if((x.tag&h)===h){var w=x.create;x.destroy=w()}x=x.next}while(x!==d)}}function rA(h){var d=h.ref;if(d!==null){var x=h.stateNode;switch(h.tag){case 5:h=Z(x);break;default:h=x}typeof d=="function"?d(h):d.current=h}}function t3(h,d,x){if(ho&&typeof ho.onCommitFiberUnmount=="function")try{ho.onCommitFiberUnmount(ty,d)}catch{}switch(d.tag){case 0:case 11:case 14:case 15:if(h=d.updateQueue,h!==null&&(h=h.lastEffect,h!==null)){var w=h=h.next;do{var M=w,I=M.destroy;M=M.tag,I!==void 0&&(M&2||M&4)&&nA(d,x,I),w=w.next}while(w!==h)}break;case 1:if(Ty(d,x),h=d.stateNode,typeof h.componentWillUnmount=="function")try{h.props=d.memoizedProps,h.state=d.memoizedState,h.componentWillUnmount()}catch(G){bi(d,x,G)}break;case 5:Ty(d,x);break;case 4:oe?a3(h,d,x):V&&V&&(d=d.stateNode.containerInfo,x=nt(d),Wt(d,x))}}function n3(h,d,x){for(var w=d;;)if(t3(h,w,x),w.child===null||oe&&w.tag===4){if(w===d)break;for(;w.sibling===null;){if(w.return===null||w.return===d)return;w=w.return}w.sibling.return=w.return,w=w.sibling}else w.child.return=w,w=w.child}function r3(h){var d=h.alternate;d!==null&&(h.alternate=null,r3(d)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(d=h.stateNode,d!==null&&be(d)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function i3(h){return h.tag===5||h.tag===3||h.tag===4}function s3(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||i3(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function o3(h){if(oe){e:{for(var d=h.return;d!==null;){if(i3(d))break e;d=d.return}throw Error(o(160))}var x=d;switch(x.tag){case 5:d=x.stateNode,x.flags&32&&(Me(d),x.flags&=-33),x=s3(h),sA(h,x,d);break;case 3:case 4:d=x.stateNode.containerInfo,x=s3(h),iA(h,x,d);break;default:throw Error(o(161))}}}function iA(h,d,x){var w=h.tag;if(w===5||w===6)h=h.stateNode,d?lt(x,h,d):wt(x,h);else if(w!==4&&(h=h.child,h!==null))for(iA(h,d,x),h=h.sibling;h!==null;)iA(h,d,x),h=h.sibling}function sA(h,d,x){var w=h.tag;if(w===5||w===6)h=h.stateNode,d?vt(x,h,d):ct(x,h);else if(w!==4&&(h=h.child,h!==null))for(sA(h,d,x),h=h.sibling;h!==null;)sA(h,d,x),h=h.sibling}function a3(h,d,x){for(var w=d,M=!1,I,G;;){if(!M){M=w.return;e:for(;;){if(M===null)throw Error(o(160));switch(I=M.stateNode,M.tag){case 5:G=!1;break e;case 3:I=I.containerInfo,G=!0;break e;case 4:I=I.containerInfo,G=!0;break e}M=M.return}M=!0}if(w.tag===5||w.tag===6)n3(h,w,x),G?Q(I,w.stateNode):Ye(I,w.stateNode);else if(w.tag===18)G?fe(I,w.stateNode):me(I,w.stateNode);else if(w.tag===4){if(w.child!==null){I=w.stateNode.containerInfo,G=!0,w.child.return=w,w=w.child;continue}}else if(t3(h,w,x),w.child!==null){w.child.return=w,w=w.child;continue}if(w===d)break;for(;w.sibling===null;){if(w.return===null||w.return===d)return;w=w.return,w.tag===4&&(M=!1)}w.sibling.return=w.return,w=w.sibling}}function oA(h,d){if(oe){switch(d.tag){case 0:case 11:case 14:case 15:ac(3,d,d.return),Md(3,d),ac(5,d,d.return);return;case 1:return;case 5:var x=d.stateNode;if(x!=null){var w=d.memoizedProps;h=h!==null?h.memoizedProps:w;var M=d.type,I=d.updateQueue;d.updateQueue=null,I!==null&&Dt(x,I,M,h,w,d)}return;case 6:if(d.stateNode===null)throw Error(o(162));x=d.memoizedProps,Re(d.stateNode,h!==null?h.memoizedProps:x,x);return;case 3:he&&h!==null&&h.memoizedState.isDehydrated&&se(d.stateNode.containerInfo);return;case 12:return;case 13:Cy(d);return;case 19:Cy(d);return;case 17:return}throw Error(o(163))}switch(d.tag){case 0:case 11:case 14:case 15:ac(3,d,d.return),Md(3,d),ac(5,d,d.return);return;case 12:return;case 13:Cy(d);return;case 19:Cy(d);return;case 3:he&&h!==null&&h.memoizedState.isDehydrated&&se(d.stateNode.containerInfo);break;case 22:case 23:return}e:if(V){switch(d.tag){case 1:case 5:case 6:break e;case 3:case 4:d=d.stateNode,Wt(d.containerInfo,d.pendingChildren);break e}throw Error(o(163))}}function Cy(h){var d=h.updateQueue;if(d!==null){h.updateQueue=null;var x=h.stateNode;x===null&&(x=h.stateNode=new l7),d.forEach(function(w){var M=_7.bind(null,h,w);x.has(w)||(x.add(w),w.then(M,M))})}}function u7(h,d){for(je=d;je!==null;){d=je;var x=d.deletions;if(x!==null)for(var w=0;w<x.length;w++){var M=x[w];try{var I=h;oe?a3(I,M,d):n3(I,M,d);var G=M.alternate;G!==null&&(G.return=null),M.return=null}catch(st){bi(M,d,st)}}if(x=d.child,d.subtreeFlags&12854&&x!==null)x.return=d,je=x;else for(;je!==null;){d=je;try{var ee=d.flags;if(ee&32&&oe&&Me(d.stateNode),ee&512){var ve=d.alternate;if(ve!==null){var De=ve.ref;De!==null&&(typeof De=="function"?De(null):De.current=null)}}if(ee&8192)switch(d.tag){case 13:if(d.memoizedState!==null){var tt=d.alternate;(tt===null||tt.memoizedState===null)&&(dA=_r())}break;case 22:var bt=d.memoizedState!==null,ht=d.alternate,dn=ht!==null&&ht.memoizedState!==null;if(x=d,oe){e:if(w=x,M=bt,I=null,oe)for(var at=w;;){if(at.tag===5){if(I===null){I=at;var Kr=at.stateNode;M?Ge(Kr):_t(at.stateNode,at.memoizedProps)}}else if(at.tag===6){if(I===null){var vs=at.stateNode;M?Je(vs):X(vs,at.memoizedProps)}}else if((at.tag!==22&&at.tag!==23||at.memoizedState===null||at===w)&&at.child!==null){at.child.return=at,at=at.child;continue}if(at===w)break;for(;at.sibling===null;){if(at.return===null||at.return===w)break e;I===at&&(I=null),at=at.return}I===at&&(I=null),at.sibling.return=at.return,at=at.sibling}}if(bt&&!dn&&x.mode&1){je=x;for(var ue=x.child;ue!==null;){for(x=je=ue;je!==null;){w=je;var re=w.child;switch(w.tag){case 0:case 11:case 14:case 15:ac(4,w,w.return);break;case 1:Ty(w,w.return);var ge=w.stateNode;if(typeof ge.componentWillUnmount=="function"){var Ke=w.return;try{ge.props=w.memoizedProps,ge.state=w.memoizedState,ge.componentWillUnmount()}catch(st){bi(w,Ke,st)}}break;case 5:Ty(w,w.return);break;case 22:if(w.memoizedState!==null){u3(x);continue}}re!==null?(re.return=w,je=re):u3(x)}ue=ue.sibling}}}switch(ee&4102){case 2:o3(d),d.flags&=-3;break;case 6:o3(d),d.flags&=-3,oA(d.alternate,d);break;case 4096:d.flags&=-4097;break;case 4100:d.flags&=-4097,oA(d.alternate,d);break;case 4:oA(d.alternate,d)}}catch(st){bi(d,d.return,st)}if(x=d.sibling,x!==null){x.return=d.return,je=x;break}je=d.return}}}function h7(h,d,x){je=h,l3(h)}function l3(h,d,x){for(var w=(h.mode&1)!==0;je!==null;){var M=je,I=M.child;if(M.tag===22&&w){var G=M.memoizedState!==null||My;if(!G){var ee=M.alternate,ve=ee!==null&&ee.memoizedState!==null||oc;ee=My;var De=oc;if(My=G,(oc=ve)&&!De)for(je=M;je!==null;)G=je,ve=G.child,G.tag===22&&G.memoizedState!==null?h3(M):ve!==null?(ve.return=G,je=ve):h3(M);for(;I!==null;)je=I,l3(I),I=I.sibling;je=M,My=ee,oc=De}c3(h)}else M.subtreeFlags&8772&&I!==null?(I.return=M,je=I):c3(h)}}function c3(h){for(;je!==null;){var d=je;if(d.flags&8772){var x=d.alternate;try{if(d.flags&8772)switch(d.tag){case 0:case 11:case 15:oc||Md(5,d);break;case 1:var w=d.stateNode;if(d.flags&4&&!oc)if(x===null)w.componentDidMount();else{var M=d.elementType===d.type?x.memoizedProps:Fs(d.type,x.memoizedProps);w.componentDidUpdate(M,x.memoizedState,w.__reactInternalSnapshotBeforeUpdate)}var I=d.updateQueue;I!==null&&rI(d,I,w);break;case 3:var G=d.updateQueue;if(G!==null){if(x=null,d.child!==null)switch(d.child.tag){case 5:x=Z(d.child.stateNode);break;case 1:x=d.child.stateNode}rI(d,G,x)}break;case 5:var ee=d.stateNode;x===null&&d.flags&4&&Gt(ee,d.type,d.memoizedProps,d);break;case 6:break;case 4:break;case 12:break;case 13:if(he&&d.memoizedState===null){var ve=d.alternate;if(ve!==null){var De=ve.memoizedState;if(De!==null){var tt=De.dehydrated;tt!==null&&pe(tt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}oc||d.flags&512&&rA(d)}catch(bt){bi(d,d.return,bt)}}if(d===h){je=null;break}if(x=d.sibling,x!==null){x.return=d.return,je=x;break}je=d.return}}function u3(h){for(;je!==null;){var d=je;if(d===h){je=null;break}var x=d.sibling;if(x!==null){x.return=d.return,je=x;break}je=d.return}}function h3(h){for(;je!==null;){var d=je;try{switch(d.tag){case 0:case 11:case 15:var x=d.return;try{Md(4,d)}catch(ve){bi(d,x,ve)}break;case 1:var w=d.stateNode;if(typeof w.componentDidMount=="function"){var M=d.return;try{w.componentDidMount()}catch(ve){bi(d,M,ve)}}var I=d.return;try{rA(d)}catch(ve){bi(d,I,ve)}break;case 5:var G=d.return;try{rA(d)}catch(ve){bi(d,G,ve)}}}catch(ve){bi(d,d.return,ve)}if(d===h){je=null;break}var ee=d.sibling;if(ee!==null){ee.return=d.return,je=ee;break}je=d.return}}var by=0,Ry=1,Py=2,Iy=3,Ly=4;if(typeof Symbol=="function"&&Symbol.for){var Td=Symbol.for;by=Td("selector.component"),Ry=Td("selector.has_pseudo_class"),Py=Td("selector.role"),Iy=Td("selector.test_id"),Ly=Td("selector.text")}function aA(h){var d=ie(h);if(d!=null){if(typeof d.memoizedProps["data-testname"]!="string")throw Error(o(364));return d}if(h=J(h),h===null)throw Error(o(362));return h.stateNode.current}function lA(h,d){switch(d.$$typeof){case by:if(h.type===d.value)return!0;break;case Ry:e:{d=d.value,h=[h,0];for(var x=0;x<h.length;){var w=h[x++],M=h[x++],I=d[M];if(w.tag!==5||!we(w)){for(;I!=null&&lA(w,I);)M++,I=d[M];if(M===d.length){d=!0;break e}else for(w=w.child;w!==null;)h.push(w,M),w=w.sibling}}d=!1}return d;case Py:if(h.tag===5&&Qe(h.stateNode,d.value))return!0;break;case Ly:if((h.tag===5||h.tag===6)&&(h=Se(h),h!==null&&0<=h.indexOf(d.value)))return!0;break;case Iy:if(h.tag===5&&(h=h.memoizedProps["data-testname"],typeof h=="string"&&h.toLowerCase()===d.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function cA(h){switch(h.$$typeof){case by:return"<"+(P(h.value)||"Unknown")+">";case Ry:return":has("+(cA(h)||"")+")";case Py:return'[role="'+h.value+'"]';case Ly:return'"'+h.value+'"';case Iy:return'[data-testname="'+h.value+'"]';default:throw Error(o(365))}}function f3(h,d){var x=[];h=[h,0];for(var w=0;w<h.length;){var M=h[w++],I=h[w++],G=d[I];if(M.tag!==5||!we(M)){for(;G!=null&&lA(M,G);)I++,G=d[I];if(I===d.length)x.push(M);else for(M=M.child;M!==null;)h.push(M,I),M=M.sibling}}return x}function uA(h,d){if(!B)throw Error(o(363));h=aA(h),h=f3(h,d),d=[],h=Array.from(h);for(var x=0;x<h.length;){var w=h[x++];if(w.tag===5)we(w)||d.push(w.stateNode);else for(w=w.child;w!==null;)h.push(w),w=w.sibling}return d}var f7=Math.ceil,Dy=a.ReactCurrentDispatcher,hA=a.ReactCurrentOwner,$n=a.ReactCurrentBatchConfig,Vt=0,Zn=null,er=null,Lr=0,Gi=0,$u=yr(0),cr=0,Cd=null,Ju=0,By=0,fA=0,bd=null,Ti=null,dA=0,pA=1/0;function qu(){pA=_r()+500}var Ny=!1,mA=null,Fa=null,Oy=!1,ka=null,Fy=0,Rd=0,gA=null,ky=-1,Uy=0;function hi(){return Vt&6?_r():ky!==-1?ky:ky=_r()}function Ua(h){return h.mode&1?Vt&2&&Lr!==0?Lr&-Lr:$G.transition!==null?(Uy===0&&(h=Qg,Qg<<=1,!(Qg&4194240)&&(Qg=64),Uy=h),Uy):(h=tn,h!==0?h:le()):1}function gs(h,d,x){if(50<Rd)throw Rd=0,gA=null,Error(o(185));var w=Vy(h,d);return w===null?null:(fd(w,d,x),(!(Vt&2)||w!==Zn)&&(w===Zn&&(!(Vt&2)&&(By|=d),cr===4&&Va(w,Lr)),Ci(w,x),d===1&&Vt===0&&!(h.mode&1)&&(qu(),ny&&po())),w)}function Vy(h,d){h.lanes|=d;var x=h.alternate;for(x!==null&&(x.lanes|=d),x=h,h=h.return;h!==null;)h.childLanes|=d,x=h.alternate,x!==null&&(x.childLanes|=d),x=h,h=h.return;return x.tag===3?x.stateNode:null}function Ci(h,d){var x=h.callbackNode;UG(h,d);var w=ey(h,h===Zn?Lr:0);if(w===0)x!==null&&QP(x),h.callbackNode=null,h.callbackPriority=0;else if(d=w&-w,h.callbackPriority!==d){if(x!=null&&QP(x),d===1)h.tag===0?KG(p3.bind(null,h)):ZP(p3.bind(null,h)),Ee?F(function(){Vt===0&&po()}):ES(MS,po),x=null;else{switch(YP(w)){case 1:x=MS;break;case 4:x=GG;break;case 16:x=TS;break;case 536870912:x=jG;break;default:x=TS}x=w3(x,d3.bind(null,h))}h.callbackPriority=d,h.callbackNode=x}}function d3(h,d){if(ky=-1,Uy=0,Vt&6)throw Error(o(327));var x=h.callbackNode;if(uc()&&h.callbackNode!==x)return null;var w=ey(h,h===Zn?Lr:0);if(w===0)return null;if(w&30||w&h.expiredLanes||d)d=zy(h,w);else{d=w;var M=Vt;Vt|=2;var I=y3();(Zn!==h||Lr!==d)&&(qu(),lc(h,d));do try{m7();break}catch(ee){g3(h,ee)}while(!0);RS(),Dy.current=I,Vt=M,er!==null?d=0:(Zn=null,Lr=0,d=cr)}if(d!==0){if(d===2&&(M=SS(h),M!==0&&(w=M,d=yA(h,M))),d===1)throw x=Cd,lc(h,0),Va(h,w),Ci(h,_r()),x;if(d===6)Va(h,w);else{if(M=h.current.alternate,!(w&30)&&!d7(M)&&(d=zy(h,w),d===2&&(I=SS(h),I!==0&&(w=I,d=yA(h,I))),d===1))throw x=Cd,lc(h,0),Va(h,w),Ci(h,_r()),x;switch(h.finishedWork=M,h.finishedLanes=w,d){case 0:case 1:throw Error(o(345));case 2:cc(h,Ti);break;case 3:if(Va(h,w),(w&130023424)===w&&(d=dA+500-_r(),10<d)){if(ey(h,0)!==0)break;if(M=h.suspendedLanes,(M&w)!==w){hi(),h.pingedLanes|=h.suspendedLanes&M;break}h.timeoutHandle=Pe(cc.bind(null,h,Ti),d);break}cc(h,Ti);break;case 4:if(Va(h,w),(w&4194240)===w)break;for(d=h.eventTimes,M=-1;0<w;){var G=31-Ui(w);I=1<<G,G=d[G],G>M&&(M=G),w&=~I}if(w=M,w=_r()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*f7(w/1960))-w,10<w){h.timeoutHandle=Pe(cc.bind(null,h,Ti),w);break}cc(h,Ti);break;case 5:cc(h,Ti);break;default:throw Error(o(329))}}}return Ci(h,_r()),h.callbackNode===x?d3.bind(null,h):null}function yA(h,d){var x=bd;return h.current.memoizedState.isDehydrated&&(lc(h,d).flags|=256),h=zy(h,d),h!==2&&(d=Ti,Ti=x,d!==null&&vA(d)),h}function vA(h){Ti===null?Ti=h:Ti.push.apply(Ti,h)}function d7(h){for(var d=h;;){if(d.flags&16384){var x=d.updateQueue;if(x!==null&&(x=x.stores,x!==null))for(var w=0;w<x.length;w++){var M=x[w],I=M.getSnapshot;M=M.value;try{if(!fo(I(),M))return!1}catch{return!1}}}if(x=d.child,d.subtreeFlags&16384&&x!==null)x.return=d,d=x;else{if(d===h)break;for(;d.sibling===null;){if(d.return===null||d.return===h)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Va(h,d){for(d&=~fA,d&=~By,h.suspendedLanes|=d,h.pingedLanes&=~d,h=h.expirationTimes;0<d;){var x=31-Ui(d),w=1<<x;h[x]=-1,d&=~w}}function p3(h){if(Vt&6)throw Error(o(327));uc();var d=ey(h,0);if(!(d&1))return Ci(h,_r()),null;var x=zy(h,d);if(h.tag!==0&&x===2){var w=SS(h);w!==0&&(d=w,x=yA(h,w))}if(x===1)throw x=Cd,lc(h,0),Va(h,d),Ci(h,_r()),x;if(x===6)throw Error(o(345));return h.finishedWork=h.current.alternate,h.finishedLanes=d,cc(h,Ti),Ci(h,_r()),null}function m3(h){ka!==null&&ka.tag===0&&!(Vt&6)&&uc();var d=Vt;Vt|=1;var x=$n.transition,w=tn;try{if($n.transition=null,tn=1,h)return h()}finally{tn=w,$n.transition=x,Vt=d,!(Vt&6)&&po()}}function _A(){Gi=$u.current,gt($u)}function lc(h,d){h.finishedWork=null,h.finishedLanes=0;var x=h.timeoutHandle;if(x!==Ue&&(h.timeoutHandle=Ue,$e(x)),er!==null)for(x=er.return;x!==null;){var w=x;switch(OS(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&Kn();break;case 3:Xu(),gt(Fn),gt(Ut),GS();break;case 5:zS(w);break;case 4:Xu();break;case 13:gt(Pn);break;case 19:gt(Pn);break;case 10:PS(w.type._context);break;case 22:case 23:_A()}x=x.return}if(Zn=h,er=h=za(h.current,null),Lr=Gi=d,cr=0,Cd=null,fA=By=Ju=0,Ti=bd=null,mo!==null){for(d=0;d<mo.length;d++)if(x=mo[d],w=x.interleaved,w!==null){x.interleaved=null;var M=w.next,I=x.pending;if(I!==null){var G=I.next;I.next=M,w.next=G}x.pending=w}mo=null}return h}function g3(h,d){do{var x=er;try{if(RS(),dy.current=_y,py){for(var w=kn.memoizedState;w!==null;){var M=w.queue;M!==null&&(M.pending=null),w=w.next}py=!1}if(Ku=0,xr=jr=kn=null,vd=!1,_d=0,hA.current=null,x===null||x.return===null){cr=1,Cd=d,er=null;break}e:{var I=h,G=x.return,ee=x,ve=d;if(d=Lr,ee.flags|=32768,ve!==null&&typeof ve=="object"&&typeof ve.then=="function"){var De=ve,tt=ee,bt=tt.tag;if(!(tt.mode&1)&&(bt===0||bt===11||bt===15)){var ht=tt.alternate;ht?(tt.updateQueue=ht.updateQueue,tt.memoizedState=ht.memoizedState,tt.lanes=ht.lanes):(tt.updateQueue=null,tt.memoizedState=null)}var dn=FI(G);if(dn!==null){dn.flags&=-257,kI(dn,G,ee,I,d),dn.mode&1&&OI(I,De,d),d=dn,ve=De;var at=d.updateQueue;if(at===null){var Kr=new Set;Kr.add(ve),d.updateQueue=Kr}else at.add(ve);break e}else{if(!(d&1)){OI(I,De,d),xA();break e}ve=Error(o(426))}}else if(Tn&&ee.mode&1){var vs=FI(G);if(vs!==null){!(vs.flags&65536)&&(vs.flags|=256),kI(vs,G,ee,I,d),US(ve);break e}}I=ve,cr!==4&&(cr=2),bd===null?bd=[I]:bd.push(I),ve=qS(ve,ee),ee=G;do{switch(ee.tag){case 3:ee.flags|=65536,d&=-d,ee.lanes|=d;var ue=BI(ee,ve,d);nI(ee,ue);break e;case 1:I=ve;var re=ee.type,ge=ee.stateNode;if(!(ee.flags&128)&&(typeof re.getDerivedStateFromError=="function"||ge!==null&&typeof ge.componentDidCatch=="function"&&(Fa===null||!Fa.has(ge)))){ee.flags|=65536,d&=-d,ee.lanes|=d;var Ke=NI(ee,I,d);nI(ee,Ke);break e}}ee=ee.return}while(ee!==null)}_3(x)}catch(st){d=st,er===x&&x!==null&&(er=x=x.return);continue}break}while(!0)}function y3(){var h=Dy.current;return Dy.current=_y,h===null?_y:h}function xA(){(cr===0||cr===3||cr===2)&&(cr=4),Zn===null||!(Ju&268435455)&&!(By&268435455)||Va(Zn,Lr)}function zy(h,d){var x=Vt;Vt|=2;var w=y3();Zn===h&&Lr===d||lc(h,d);do try{p7();break}catch(M){g3(h,M)}while(!0);if(RS(),Vt=x,Dy.current=w,er!==null)throw Error(o(261));return Zn=null,Lr=0,cr}function p7(){for(;er!==null;)v3(er)}function m7(){for(;er!==null&&!zG();)v3(er)}function v3(h){var d=A3(h.alternate,h,Gi);h.memoizedProps=h.pendingProps,d===null?_3(h):er=d,hA.current=null}function _3(h){var d=h;do{var x=d.alternate;if(h=d.return,d.flags&32768){if(x=a7(x,d),x!==null){x.flags&=32767,er=x;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{cr=6,er=null;return}}else if(x=i7(x,d,Gi),x!==null){er=x;return}if(d=d.sibling,d!==null){er=d;return}er=d=h}while(d!==null);cr===0&&(cr=5)}function cc(h,d){var x=tn,w=$n.transition;try{$n.transition=null,tn=1,g7(h,d,x)}finally{$n.transition=w,tn=x}return null}function g7(h,d,x){do uc();while(ka!==null);if(Vt&6)throw Error(o(327));var w=h.finishedWork,M=h.finishedLanes;if(w===null)return null;if(h.finishedWork=null,h.finishedLanes=0,w===h.current)throw Error(o(177));h.callbackNode=null,h.callbackPriority=0;var I=w.lanes|w.childLanes;if(VG(h,I),h===Zn&&(er=Zn=null,Lr=0),!(w.subtreeFlags&2064)&&!(w.flags&2064)||Oy||(Oy=!0,w3(TS,function(){return uc(),null})),I=(w.flags&15990)!==0,w.subtreeFlags&15990||I){I=$n.transition,$n.transition=null;var G=tn;tn=1;var ee=Vt;Vt|=4,hA.current=null,c7(h,w),u7(h,w),K(h.containerInfo),h.current=w,h7(w),HG(),Vt=ee,tn=G,$n.transition=I}else h.current=w;if(Oy&&(Oy=!1,ka=h,Fy=M),I=h.pendingLanes,I===0&&(Fa=null),WG(w.stateNode),Ci(h,_r()),d!==null)for(x=h.onRecoverableError,w=0;w<d.length;w++)x(d[w]);if(Ny)throw Ny=!1,h=mA,mA=null,h;return Fy&1&&h.tag!==0&&uc(),I=h.pendingLanes,I&1?h===gA?Rd++:(Rd=0,gA=h):Rd=0,po(),null}function uc(){if(ka!==null){var h=YP(Fy),d=$n.transition,x=tn;try{if($n.transition=null,tn=16>h?16:h,ka===null)var w=!1;else{if(h=ka,ka=null,Fy=0,Vt&6)throw Error(o(331));var M=Vt;for(Vt|=4,je=h.current;je!==null;){var I=je,G=I.child;if(je.flags&16){var ee=I.deletions;if(ee!==null){for(var ve=0;ve<ee.length;ve++){var De=ee[ve];for(je=De;je!==null;){var tt=je;switch(tt.tag){case 0:case 11:case 15:ac(8,tt,I)}var bt=tt.child;if(bt!==null)bt.return=tt,je=bt;else for(;je!==null;){tt=je;var ht=tt.sibling,dn=tt.return;if(r3(tt),tt===De){je=null;break}if(ht!==null){ht.return=dn,je=ht;break}je=dn}}}var at=I.alternate;if(at!==null){var Kr=at.child;if(Kr!==null){at.child=null;do{var vs=Kr.sibling;Kr.sibling=null,Kr=vs}while(Kr!==null)}}je=I}}if(I.subtreeFlags&2064&&G!==null)G.return=I,je=G;else e:for(;je!==null;){if(I=je,I.flags&2048)switch(I.tag){case 0:case 11:case 15:ac(9,I,I.return)}var ue=I.sibling;if(ue!==null){ue.return=I.return,je=ue;break e}je=I.return}}var re=h.current;for(je=re;je!==null;){G=je;var ge=G.child;if(G.subtreeFlags&2064&&ge!==null)ge.return=G,je=ge;else e:for(G=re;je!==null;){if(ee=je,ee.flags&2048)try{switch(ee.tag){case 0:case 11:case 15:Md(9,ee)}}catch(st){bi(ee,ee.return,st)}if(ee===G){je=null;break e}var Ke=ee.sibling;if(Ke!==null){Ke.return=ee.return,je=Ke;break e}je=ee.return}}if(Vt=M,po(),ho&&typeof ho.onPostCommitFiberRoot=="function")try{ho.onPostCommitFiberRoot(ty,h)}catch{}w=!0}return w}finally{tn=x,$n.transition=d}}return!1}function x3(h,d,x){d=qS(x,d),d=BI(h,d,1),Oa(h,d),d=hi(),h=Vy(h,1),h!==null&&(fd(h,1,d),Ci(h,d))}function bi(h,d,x){if(h.tag===3)x3(h,h,x);else for(;d!==null;){if(d.tag===3){x3(d,h,x);break}else if(d.tag===1){var w=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(Fa===null||!Fa.has(w))){h=qS(x,h),h=NI(d,h,1),Oa(d,h),h=hi(),d=Vy(d,1),d!==null&&(fd(d,1,h),Ci(d,h));break}}d=d.return}}function y7(h,d,x){var w=h.pingCache;w!==null&&w.delete(d),d=hi(),h.pingedLanes|=h.suspendedLanes&x,Zn===h&&(Lr&x)===x&&(cr===4||cr===3&&(Lr&130023424)===Lr&&500>_r()-dA?lc(h,0):fA|=x),Ci(h,d)}function S3(h,d){d===0&&(h.mode&1?(d=Zg,Zg<<=1,!(Zg&130023424)&&(Zg=4194304)):d=1);var x=hi();h=Vy(h,d),h!==null&&(fd(h,d,x),Ci(h,x))}function v7(h){var d=h.memoizedState,x=0;d!==null&&(x=d.retryLane),S3(h,x)}function _7(h,d){var x=0;switch(h.tag){case 13:var w=h.stateNode,M=h.memoizedState;M!==null&&(x=M.retryLane);break;case 19:w=h.stateNode;break;default:throw Error(o(314))}w!==null&&w.delete(d),S3(h,x)}var A3;A3=function(h,d,x){if(h!==null)if(h.memoizedProps!==d.pendingProps||Fn.current)Hi=!0;else{if(!(h.lanes&x)&&!(d.flags&128))return Hi=!1,o7(h,d,x);Hi=!!(h.flags&131072)}else Hi=!1,Tn&&d.flags&1048576&&lI(d,uy,d.index);switch(d.lanes=0,d.tag){case 2:var w=d.type;h!==null&&(h.alternate=null,d.alternate=null,d.flags|=2),h=d.pendingProps;var M=us(d,Ut.current);Vu(d,x),M=WS(null,d,w,h,M,x);var I=XS();return d.flags|=1,typeof M=="object"&&M!==null&&typeof M.render=="function"&&M.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,vr(w)?(I=!0,Ir(d)):I=!1,d.memoizedState=M.state!==null&&M.state!==void 0?M.state:null,LS(d),M.updater=ly,d.stateNode=M,M._reactInternals=d,BS(d,w,h,x),d=ZS(null,d,w,!0,I,x)):(d.tag=0,Tn&&I&&NS(d),ui(null,d,M,x),d=d.child),d;case 16:w=d.elementType;e:{switch(h!==null&&(h.alternate=null,d.alternate=null,d.flags|=2),h=d.pendingProps,M=w._init,w=M(w._payload),d.type=w,M=d.tag=S7(w),h=Fs(w,h),M){case 0:d=QS(null,d,w,h,x);break e;case 1:d=XI(null,d,w,h,x);break e;case 11:d=zI(null,d,w,h,x);break e;case 14:d=HI(null,d,w,Fs(w.type,h),x);break e}throw Error(o(306,w,""))}return d;case 0:return w=d.type,M=d.pendingProps,M=d.elementType===w?M:Fs(w,M),QS(h,d,w,M,x);case 1:return w=d.type,M=d.pendingProps,M=d.elementType===w?M:Fs(w,M),XI(h,d,w,M,x);case 3:e:{if(KI(d),h===null)throw Error(o(387));w=d.pendingProps,I=d.memoizedState,M=I.element,tI(h,d),ay(d,w,null,x);var G=d.memoizedState;if(w=G.element,he&&I.isDehydrated)if(I={element:w,isDehydrated:!1,cache:G.cache,transitions:G.transitions},d.updateQueue.baseState=I,d.memoizedState=I,d.flags&256){M=Error(o(423)),d=$I(h,d,w,x,M);break e}else if(w!==M){M=Error(o(424)),d=$I(h,d,w,x,M);break e}else for(he&&(zi=Jg(d.stateNode.containerInfo),Vi=d,Tn=!0,ks=null,dd=!1),x=pI(d,null,w,x),d.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(Gu(),w===M){d=Qo(h,d,x);break e}ui(h,d,w,x)}d=d.child}return d;case 5:return mI(d),h===null&&kS(d),w=d.type,M=d.pendingProps,I=h!==null?h.memoizedProps:null,G=M.children,de(w,M)?G=null:I!==null&&de(w,I)&&(d.flags|=32),WI(h,d),ui(h,d,G,x),d.child;case 6:return h===null&&kS(d),null;case 13:return JI(h,d,x);case 4:return VS(d,d.stateNode.containerInfo),w=d.pendingProps,h===null?d.child=ju(d,null,w,x):ui(h,d,w,x),d.child;case 11:return w=d.type,M=d.pendingProps,M=d.elementType===w?M:Fs(w,M),zI(h,d,w,M,x);case 7:return ui(h,d,d.pendingProps,x),d.child;case 8:return ui(h,d,d.pendingProps.children,x),d.child;case 12:return ui(h,d,d.pendingProps.children,x),d.child;case 10:e:{if(w=d.type._context,M=d.pendingProps,I=d.memoizedProps,G=M.value,eI(d,w,G),I!==null)if(fo(I.value,G)){if(I.children===M.children&&!Fn.current){d=Qo(h,d,x);break e}}else for(I=d.child,I!==null&&(I.return=d);I!==null;){var ee=I.dependencies;if(ee!==null){G=I.child;for(var ve=ee.firstContext;ve!==null;){if(ve.context===w){if(I.tag===1){ve=$o(-1,x&-x),ve.tag=2;var De=I.updateQueue;if(De!==null){De=De.shared;var tt=De.pending;tt===null?ve.next=ve:(ve.next=tt.next,tt.next=ve),De.pending=ve}}I.lanes|=x,ve=I.alternate,ve!==null&&(ve.lanes|=x),IS(I.return,x,d),ee.lanes|=x;break}ve=ve.next}}else if(I.tag===10)G=I.type===d.type?null:I.child;else if(I.tag===18){if(G=I.return,G===null)throw Error(o(341));G.lanes|=x,ee=G.alternate,ee!==null&&(ee.lanes|=x),IS(G,x,d),G=I.sibling}else G=I.child;if(G!==null)G.return=I;else for(G=I;G!==null;){if(G===d){G=null;break}if(I=G.sibling,I!==null){I.return=G.return,G=I;break}G=G.return}I=G}ui(h,d,M.children,x),d=d.child}return d;case 9:return M=d.type,w=d.pendingProps.children,Vu(d,x),M=hs(M),w=w(M),d.flags|=1,ui(h,d,w,x),d.child;case 14:return w=d.type,M=Fs(w,d.pendingProps),M=Fs(w.type,M),HI(h,d,w,M,x);case 15:return GI(h,d,d.type,d.pendingProps,x);case 17:return w=d.type,M=d.pendingProps,M=d.elementType===w?M:Fs(w,M),h!==null&&(h.alternate=null,d.alternate=null,d.flags|=2),d.tag=1,vr(w)?(h=!0,Ir(d)):h=!1,Vu(d,x),oI(d,w,M),BS(d,w,M,x),ZS(null,d,w,!0,h,x);case 19:return ZI(h,d,x);case 22:return jI(h,d,x)}throw Error(o(156,d.tag))};function w3(h,d){return ES(h,d)}function x7(h,d,x,w){this.tag=h,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ys(h,d,x,w){return new x7(h,d,x,w)}function SA(h){return h=h.prototype,!(!h||!h.isReactComponent)}function S7(h){if(typeof h=="function")return SA(h)?1:0;if(h!=null){if(h=h.$$typeof,h===S)return 11;if(h===_)return 14}return 2}function za(h,d){var x=h.alternate;return x===null?(x=ys(h.tag,d,h.key,h.mode),x.elementType=h.elementType,x.type=h.type,x.stateNode=h.stateNode,x.alternate=h,h.alternate=x):(x.pendingProps=d,x.type=h.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=h.flags&14680064,x.childLanes=h.childLanes,x.lanes=h.lanes,x.child=h.child,x.memoizedProps=h.memoizedProps,x.memoizedState=h.memoizedState,x.updateQueue=h.updateQueue,d=h.dependencies,x.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},x.sibling=h.sibling,x.index=h.index,x.ref=h.ref,x}function Hy(h,d,x,w,M,I){var G=2;if(w=h,typeof h=="function")SA(h)&&(G=1);else if(typeof h=="string")G=5;else e:switch(h){case u:return hc(x.children,M,I,d);case f:G=8,M|=8;break;case p:return h=ys(12,x,d,M|2),h.elementType=p,h.lanes=I,h;case v:return h=ys(13,x,d,M),h.elementType=v,h.lanes=I,h;case g:return h=ys(19,x,d,M),h.elementType=g,h.lanes=I,h;case E:return Gy(x,M,I,d);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case m:G=10;break e;case y:G=9;break e;case S:G=11;break e;case _:G=14;break e;case A:G=16,w=null;break e}throw Error(o(130,h==null?h:typeof h,""))}return d=ys(G,x,d,M),d.elementType=h,d.type=w,d.lanes=I,d}function hc(h,d,x,w){return h=ys(7,h,w,d),h.lanes=x,h}function Gy(h,d,x,w){return h=ys(22,h,w,d),h.elementType=E,h.lanes=x,h.stateNode={},h}function AA(h,d,x){return h=ys(6,h,null,d),h.lanes=x,h}function wA(h,d,x){return d=ys(4,h.children!==null?h.children:[],h.key,d),d.lanes=x,d.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},d}function A7(h,d,x,w,M){this.tag=d,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ue,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=AS(0),this.expirationTimes=AS(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=AS(0),this.identifierPrefix=w,this.onRecoverableError=M,he&&(this.mutableSourceEagerHydrationData=null)}function E3(h,d,x,w,M,I,G,ee,ve){return h=new A7(h,d,x,ee,ve),d===1?(d=1,I===!0&&(d|=8)):d=0,I=ys(3,null,null,d),h.current=I,I.stateNode=h,I.memoizedState={element:w,isDehydrated:x,cache:null,transitions:null},LS(I),h}function M3(h){if(!h)return cs;h=h._reactInternals;e:{if(N(h)!==h||h.tag!==1)throw Error(o(170));var d=h;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(vr(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(o(171))}if(h.tag===1){var x=h.type;if(vr(x))return Fu(h,x,d)}return d}function T3(h){var d=h._reactInternals;if(d===void 0)throw typeof h.render=="function"?Error(o(188)):(h=Object.keys(h).join(","),Error(o(268,h)));return h=z(d),h===null?null:h.stateNode}function C3(h,d){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var x=h.retryLane;h.retryLane=x!==0&&x<d?x:d}}function EA(h,d){C3(h,d),(h=h.alternate)&&C3(h,d)}function w7(h){return h=z(h),h===null?null:h.stateNode}function E7(){return null}return n.attemptContinuousHydration=function(h){if(h.tag===13){var d=hi();gs(h,134217728,d),EA(h,134217728)}},n.attemptHydrationAtCurrentPriority=function(h){if(h.tag===13){var d=hi(),x=Ua(h);gs(h,x,d),EA(h,x)}},n.attemptSynchronousHydration=function(h){switch(h.tag){case 3:var d=h.stateNode;if(d.current.memoizedState.isDehydrated){var x=hd(d.pendingLanes);x!==0&&(wS(d,x|1),Ci(d,_r()),!(Vt&6)&&(qu(),po()))}break;case 13:var w=hi();m3(function(){return gs(h,1,w)}),EA(h,1)}},n.batchedUpdates=function(h,d){var x=Vt;Vt|=1;try{return h(d)}finally{Vt=x,Vt===0&&(qu(),ny&&po())}},n.createComponentSelector=function(h){return{$$typeof:by,value:h}},n.createContainer=function(h,d,x,w,M,I,G){return E3(h,d,!1,null,x,w,M,I,G)},n.createHasPseudoClassSelector=function(h){return{$$typeof:Ry,value:h}},n.createHydrationContainer=function(h,d,x,w,M,I,G,ee,ve){return h=E3(x,w,!0,h,M,I,G,ee,ve),h.context=M3(null),x=h.current,w=hi(),M=Ua(x),I=$o(w,M),I.callback=d??null,Oa(x,I),h.current.lanes=M,fd(h,M,w),Ci(h,w),h},n.createPortal=function(h,d,x){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:w==null?null:""+w,children:h,containerInfo:d,implementation:x}},n.createRoleSelector=function(h){return{$$typeof:Py,value:h}},n.createTestNameSelector=function(h){return{$$typeof:Iy,value:h}},n.createTextSelector=function(h){return{$$typeof:Ly,value:h}},n.deferredUpdates=function(h){var d=tn,x=$n.transition;try{return $n.transition=null,tn=16,h()}finally{tn=d,$n.transition=x}},n.discreteUpdates=function(h,d,x,w,M){var I=tn,G=$n.transition;try{return $n.transition=null,tn=1,h(d,x,w,M)}finally{tn=I,$n.transition=G,Vt===0&&qu()}},n.findAllNodes=uA,n.findBoundingRects=function(h,d){if(!B)throw Error(o(363));d=uA(h,d),h=[];for(var x=0;x<d.length;x++)h.push(xe(d[x]));for(d=h.length-1;0<d;d--){x=h[d];for(var w=x.x,M=w+x.width,I=x.y,G=I+x.height,ee=d-1;0<=ee;ee--)if(d!==ee){var ve=h[ee],De=ve.x,tt=De+ve.width,bt=ve.y,ht=bt+ve.height;if(w>=De&&I>=bt&&M<=tt&&G<=ht){h.splice(d,1);break}else if(w!==De||x.width!==ve.width||ht<I||bt>G){if(!(I!==bt||x.height!==ve.height||tt<w||De>M)){De>w&&(ve.width+=De-w,ve.x=w),tt<M&&(ve.width=M-De),h.splice(d,1);break}}else{bt>I&&(ve.height+=bt-I,ve.y=I),ht<G&&(ve.height=G-bt),h.splice(d,1);break}}}return h},n.findHostInstance=T3,n.findHostInstanceWithNoPortals=function(h){return h=D(h),h=h!==null?H(h):null,h===null?null:h.stateNode},n.findHostInstanceWithWarning=function(h){return T3(h)},n.flushControlled=function(h){var d=Vt;Vt|=1;var x=$n.transition,w=tn;try{$n.transition=null,tn=1,h()}finally{tn=w,$n.transition=x,Vt=d,Vt===0&&(qu(),po())}},n.flushPassiveEffects=uc,n.flushSync=m3,n.focusWithin=function(h,d){if(!B)throw Error(o(363));for(h=aA(h),d=f3(h,d),d=Array.from(d),h=0;h<d.length;){var x=d[h++];if(!we(x)){if(x.tag===5&&Ne(x.stateNode))return!0;for(x=x.child;x!==null;)d.push(x),x=x.sibling}}return!1},n.getCurrentUpdatePriority=function(){return tn},n.getFindAllNodesFailureDescription=function(h,d){if(!B)throw Error(o(363));var x=0,w=[];h=[aA(h),0];for(var M=0;M<h.length;){var I=h[M++],G=h[M++],ee=d[G];if((I.tag!==5||!we(I))&&(lA(I,ee)&&(w.push(cA(ee)),G++,G>x&&(x=G)),G<d.length))for(I=I.child;I!==null;)h.push(I,G),I=I.sibling}if(x<d.length){for(h=[];x<d.length;x++)h.push(cA(d[x]));return`findAllNodes was able to match part of the selector:
  `+(w.join(" > ")+`

No matching component was found for:
  `)+h.join(" > ")}return null},n.getPublicRootInstance=function(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 5:return Z(h.child.stateNode);default:return h.child.stateNode}},n.injectIntoDevTools=function(h){if(h={bundleType:h.bundleType,version:h.version,rendererPackageName:h.rendererPackageName,rendererConfig:h.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:w7,findFiberByHostInstance:h.findFiberByHostInstance||E7,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")h=!1;else{var d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(d.isDisabled||!d.supportsFiber)h=!0;else{try{ty=d.inject(h),ho=d}catch{}h=!!d.checkDCE}}return h},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(h,d,x,w){if(!B)throw Error(o(363));h=uA(h,d);var M=Ve(h,x,w).disconnect;return{disconnect:function(){M()}}},n.registerMutableSourceForHydration=function(h,d){var x=d._getVersion;x=x(d._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[d,x]:h.mutableSourceEagerHydrationData.push(d,x)},n.runWithPriority=function(h,d){var x=tn;try{return tn=h,d()}finally{tn=x}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(h,d,x,w){var M=d.current,I=hi(),G=Ua(M);return x=M3(x),d.context===null?d.context=x:d.pendingContext=x,d=$o(I,G),d.payload={element:h},w=w===void 0?null:w,w!==null&&(d.callback=w),Oa(M,d),h=gs(M,G,I),h!==null&&oy(h,M,G),G},n};hz.exports=Que;var Zue=hz.exports;const ehe=bx(Zue);var fz={exports:{}},dz={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,W){var K=O.length;O.push(W);e:for(;0<K;){var Y=K-1>>>1,te=O[Y];if(0<i(te,W))O[Y]=W,O[K]=te,K=Y;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var W=O[0],K=O.pop();if(K!==W){O[0]=K;e:for(var Y=0,te=O.length,Te=te>>>1;Y<Te;){var ne=2*(Y+1)-1,de=O[ne],Ae=ne+1,Pe=O[Ae];if(0>i(de,K))Ae<te&&0>i(Pe,de)?(O[Y]=Pe,O[Ae]=K,Y=Ae):(O[Y]=de,O[ne]=K,Y=ne);else if(Ae<te&&0>i(Pe,K))O[Y]=Pe,O[Ae]=K,Y=Ae;else break e}}return W}function i(O,W){var K=O.sortIndex-W.sortIndex;return K!==0?K:O.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,p=3,m=!1,y=!1,S=!1,v=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(O){for(var W=n(c);W!==null;){if(W.callback===null)r(c);else if(W.startTime<=O)r(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=n(c)}}function E(O){if(S=!1,A(O),!y)if(n(l)!==null)y=!0,Z(b);else{var W=n(c);W!==null&&ae(E,W.startTime-O)}}function b(O,W){y=!1,S&&(S=!1,g(L),L=-1),m=!0;var K=p;try{for(A(W),f=n(l);f!==null&&(!(f.expirationTime>W)||O&&!D());){var Y=f.callback;if(typeof Y=="function"){f.callback=null,p=f.priorityLevel;var te=Y(f.expirationTime<=W);W=t.unstable_now(),typeof te=="function"?f.callback=te:f===n(l)&&r(l),A(W)}else r(l);f=n(l)}if(f!==null)var Te=!0;else{var ne=n(c);ne!==null&&ae(E,ne.startTime-W),Te=!1}return Te}finally{f=null,p=K,m=!1}}var C=!1,P=null,L=-1,N=5,T=-1;function D(){return!(t.unstable_now()-T<N)}function z(){if(P!==null){var O=t.unstable_now();T=O;var W=!0;try{W=P(!0,O)}finally{W?j():(C=!1,P=null)}}else C=!1}var j;if(typeof _=="function")j=function(){_(z)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,q=H.port2;H.port1.onmessage=z,j=function(){q.postMessage(null)}}else j=function(){v(z,0)};function Z(O){P=O,C||(C=!0,j())}function ae(O,W){L=v(function(){O(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){y||m||(y=!0,Z(b))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(O){switch(p){case 1:case 2:case 3:var W=3;break;default:W=p}var K=p;p=W;try{return O()}finally{p=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,W){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var K=p;p=O;try{return W()}finally{p=K}},t.unstable_scheduleCallback=function(O,W,K){var Y=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?Y+K:Y):K=Y,O){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=K+te,O={id:u++,callback:W,priorityLevel:O,startTime:K,expirationTime:te,sortIndex:-1},K>Y?(O.sortIndex=K,e(c,O),n(l)===null&&O===n(c)&&(S?(g(L),L=-1):S=!0,ae(E,K-Y))):(O.sortIndex=te,e(l,O),y||m||(y=!0,Z(b))),O},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(O){var W=p;return function(){var K=p;p=W;try{return O.apply(this,arguments)}finally{p=K}}}})(dz);fz.exports=dz;var vO=fz.exports;const the=t=>typeof t=="object"&&typeof t.then=="function",Jc=[];function pz(t,e,n=(r,i)=>r===i){if(t===e)return!0;if(!t||!e)return!1;const r=t.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!n(t[i],e[i]))return!1;return!0}function mz(t,e=null,n=!1,r={}){e===null&&(e=[t]);for(const s of Jc)if(pz(e,s.keys,s.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return r.lifespan&&r.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,r.lifespan)),s.response;if(!n)throw s.promise}const i={keys:e,equal:r.equal,remove:()=>{const s=Jc.indexOf(i);s!==-1&&Jc.splice(s,1)},promise:(the(t)?t:t(...e)).then(s=>{i.response=s,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(s=>i.error=s)};if(Jc.push(i),!n)throw i.promise}const nhe=(t,e,n)=>mz(t,e,!1,n),rhe=(t,e,n)=>void mz(t,e,!0,n),ihe=t=>{if(t===void 0||t.length===0)Jc.splice(0,Jc.length);else{const e=Jc.find(n=>pz(t,n.keys,n.equal));e&&e.remove()}},lP={},she=t=>void Object.assign(lP,t);function ohe(t,e){function n(u,{args:f=[],attach:p,...m},y){let S=`${u[0].toUpperCase()}${u.slice(1)}`,v;if(u==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const g=m.object;v=Th(g,{type:u,root:y,attach:p,primitive:!0})}else{const g=lP[S];if(!g)throw new Error(`R3F: ${S} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(f))throw new Error("R3F: The args prop must be an array!");v=Th(new g(...f),{type:u,root:y,attach:p,memoizedProps:{args:f}})}return v.__r3f.attach===void 0&&(v instanceof It?v.__r3f.attach="geometry":v instanceof lr&&(v.__r3f.attach="material")),S!=="inject"&&_E(v,m),v}function r(u,f){let p=!1;if(f){var m,y;(m=f.__r3f)!=null&&m.attach?vE(u,f,f.__r3f.attach):f.isObject3D&&u.isObject3D&&(u.add(f),p=!0),p||(y=u.__r3f)==null||y.objects.push(f),f.__r3f||Th(f,{}),f.__r3f.parent=u,LC(f),Ch(f)}}function i(u,f,p){let m=!1;if(f){var y,S;if((y=f.__r3f)!=null&&y.attach)vE(u,f,f.__r3f.attach);else if(f.isObject3D&&u.isObject3D){f.parent=u,f.dispatchEvent({type:"added"});const v=u.children.filter(_=>_!==f),g=v.indexOf(p);u.children=[...v.slice(0,g),f,...v.slice(g)],m=!0}m||(S=u.__r3f)==null||S.objects.push(f),f.__r3f||Th(f,{}),f.__r3f.parent=u,LC(f),Ch(f)}}function s(u,f,p=!1){u&&[...u].forEach(m=>o(f,m,p))}function o(u,f,p){if(f){var m,y,S;if(f.__r3f&&(f.__r3f.parent=null),(m=u.__r3f)!=null&&m.objects&&(u.__r3f.objects=u.__r3f.objects.filter(E=>E!==f)),(y=f.__r3f)!=null&&y.attach)wO(u,f,f.__r3f.attach);else if(f.isObject3D&&u.isObject3D){var v;u.remove(f),(v=f.__r3f)!=null&&v.root&&mhe($v(f),f)}const _=(S=f.__r3f)==null?void 0:S.primitive,A=!_&&(p===void 0?f.dispose!==null:p);if(!_){var g;s((g=f.__r3f)==null?void 0:g.objects,f,A),s(f.children,f,A)}if(delete f.__r3f,A&&f.dispose&&f.type!=="Scene"){const E=()=>{try{f.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?vO.unstable_scheduleCallback(vO.unstable_IdlePriority,E):E()}Ch(u)}}function a(u,f,p,m){var y;const S=(y=u.__r3f)==null?void 0:y.parent;if(!S)return;const v=n(f,p,u.__r3f.root);if(u.children){for(const g of u.children)g.__r3f&&r(v,g);u.children=u.children.filter(g=>!g.__r3f)}u.__r3f.objects.forEach(g=>r(v,g)),u.__r3f.objects=[],u.__r3f.autoRemovedBeforeAppend||o(S,u),v.parent&&(v.__r3f.autoRemovedBeforeAppend=!0),r(S,v),v.raycast&&v.__r3f.eventCount&&$v(v).getState().internal.interaction.push(v),[m,m.alternate].forEach(g=>{g!==null&&(g.stateNode=v,g.ref&&(typeof g.ref=="function"?g.ref(v):g.ref.current=v))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:ehe({createInstance:n,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(u,f)=>{if(!f)return;const p=u.getState().scene;p.__r3f&&(p.__r3f.root=u,r(p,f))},removeChildFromContainer:(u,f)=>{f&&o(u.getState().scene,f)},insertInContainerBefore:(u,f,p)=>{if(!f||!p)return;const m=u.getState().scene;m.__r3f&&i(m,f,p)},getRootHostContext:()=>null,getChildHostContext:u=>u,finalizeInitialChildren(u){var f;return!!((f=u==null?void 0:u.__r3f)!=null?f:{}).handlers},prepareUpdate(u,f,p,m){var y;if(((y=u==null?void 0:u.__r3f)!=null?y:{}).primitive&&m.object&&m.object!==u)return[!0];{const{args:v=[],children:g,..._}=m,{args:A=[],children:E,...b}=p;if(!Array.isArray(v))throw new Error("R3F: the args prop must be an array!");if(v.some((P,L)=>P!==A[L]))return[!0];const C=Az(u,_,b,!0);return C.changes.length?[!1,C]:null}},commitUpdate(u,[f,p],m,y,S,v){f?a(u,m,S,v):_E(u,p)},commitMount(u,f,p,m){var y;const S=(y=u.__r3f)!=null?y:{};u.raycast&&S.handlers&&S.eventCount&&$v(u).getState().internal.interaction.push(u)},getPublicInstance:u=>u,prepareForCommit:()=>null,preparePortalMount:u=>Th(u.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(u){var f;const{attach:p,parent:m}=(f=u.__r3f)!=null?f:{};p&&m&&wO(m,u,p),u.isObject3D&&(u.visible=!1),Ch(u)},unhideInstance(u,f){var p;const{attach:m,parent:y}=(p=u.__r3f)!=null?p:{};m&&y&&vE(y,u,m),(u.isObject3D&&f.visible==null||f.visible)&&(u.visible=!0),Ch(u)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Xh.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&xn.fun(performance.now)?performance.now:xn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:xn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:xn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:_E}}var _O,xO;const yE=t=>"colorSpace"in t||"outputColorSpace"in t,gz=()=>{var t;return(t=lP.ColorManagement)!=null?t:null},yz=t=>t&&t.isOrthographicCamera,ahe=t=>t&&t.hasOwnProperty("current"),kg=typeof window<"u"&&((_O=window.document)!=null&&_O.createElement||((xO=window.navigator)==null?void 0:xO.product)==="ReactNative")?$.useLayoutEffect:$.useEffect;function vz(t){const e=$.useRef(t);return kg(()=>void(e.current=t),[t]),e}function lhe({set:t}){return kg(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}class _z extends $.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}_z.getDerivedStateFromError=()=>({error:!0});const xz="__default",SO=new Map,che=t=>t&&!!t.memoized&&!!t.changes;function Sz(t){var e;const n=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(t)?Math.min(Math.max(t[0],n),t[1]):t}const Qd=t=>{var e;return(e=t.__r3f)==null?void 0:e.root.getState()};function $v(t){let e=t.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const xn={obj:t=>t===Object(t)&&!xn.arr(t)&&typeof t!="function",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",boo:t=>typeof t=="boolean",und:t=>t===void 0,arr:t=>Array.isArray(t),equ(t,e,{arrays:n="shallow",objects:r="reference",strict:i=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if(xn.str(t)||xn.num(t))return t===e;const s=xn.obj(t);if(s&&r==="reference")return t===e;const o=xn.arr(t);if(o&&n==="reference")return t===e;if((o||s)&&t===e)return!0;let a;for(a in t)if(!(a in e))return!1;if(s&&n==="shallow"&&r==="shallow"){for(a in i?e:t)if(!xn.equ(t[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:t)if(t[a]!==e[a])return!1;if(xn.und(a)){if(o&&t.length===0&&e.length===0||s&&Object.keys(t).length===0&&Object.keys(e).length===0)return!0;if(t!==e)return!1}return!0}};function uhe(t){const e={nodes:{},materials:{}};return t&&t.traverse(n=>{n.name&&(e.nodes[n.name]=n),n.material&&!e.materials[n.material.name]&&(e.materials[n.material.name]=n.material)}),e}function hhe(t){t.dispose&&t.type!=="Scene"&&t.dispose();for(const e in t)e.dispose==null||e.dispose(),delete t[e]}function Th(t,e){const n=t;return n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},t}function IC(t,e){let n=t;if(e.includes("-")){const r=e.split("-"),i=r.pop();return n=r.reduce((s,o)=>s[o],t),{target:n,key:i}}else return{target:n,key:e}}const AO=/-\d+$/;function vE(t,e,n){if(xn.str(n)){if(AO.test(n)){const s=n.replace(AO,""),{target:o,key:a}=IC(t,s);Array.isArray(o[a])||(o[a]=[])}const{target:r,key:i}=IC(t,n);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=n(t,e)}function wO(t,e,n){var r,i;if(xn.str(n)){const{target:s,key:o}=IC(t,n),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(t,e);(i=e.__r3f)==null||delete i.previousAttach}function Az(t,{children:e,key:n,ref:r,...i},{children:s,key:o,ref:a,...l}={},c=!1){var u;const f=(u=t==null?void 0:t.__r3f)!=null?u:{},p=Object.entries(i),m=[];if(c){const S=Object.keys(l);for(let v=0;v<S.length;v++)i.hasOwnProperty(S[v])||p.unshift([S[v],xz+"remove"])}p.forEach(([S,v])=>{var g;if((g=t.__r3f)!=null&&g.primitive&&S==="object"||xn.equ(v,l[S]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(S))return m.push([S,v,!0,[]]);let _=[];S.includes("-")&&(_=S.split("-")),m.push([S,v,!1,_]);for(const A in i){const E=i[A];A.startsWith(`${S}-`)&&m.push([A,E,!1,A.split("-")])}});const y={...i};return f.memoizedProps&&f.memoizedProps.args&&(y.args=f.memoizedProps.args),f.memoizedProps&&f.memoizedProps.attach&&(y.attach=f.memoizedProps.attach),{memoized:y,changes:m}}const fhe=typeof process<"u"&&!1;function _E(t,e){var n,r,i;const s=(n=t.__r3f)!=null?n:{},o=s.root,a=(r=o==null||o.getState==null?void 0:o.getState())!=null?r:{},{memoized:l,changes:c}=che(e)?e:Az(t,e),u=s.eventCount;t.__r3f&&(t.__r3f.memoizedProps=l);for(let p=0;p<c.length;p++){let[m,y,S,v]=c[p];if(yE(t)){const E="srgb",b="srgb-linear";m==="encoding"?(m="colorSpace",y=y===3001?E:b):m==="outputEncoding"&&(m="outputColorSpace",y=y===3001?E:b)}let g=t,_=g[m];if(v.length&&(_=v.reduce((A,E)=>A[E],t),!(_&&_.set))){const[A,...E]=v.reverse();g=E.reverse().reduce((b,C)=>b[C],t),m=A}if(y===xz+"remove")if(g.constructor){let A=SO.get(g.constructor);A||(A=new g.constructor,SO.set(g.constructor,A)),y=A[m]}else y=0;if(S)y?s.handlers[m]=y:delete s.handlers[m],s.eventCount=Object.keys(s.handlers).length;else if(_&&_.set&&(_.copy||_ instanceof su)){if(Array.isArray(y))_.fromArray?_.fromArray(y):_.set(...y);else if(_.copy&&y&&y.constructor&&(fhe?_.constructor.name===y.constructor.name:_.constructor===y.constructor))_.copy(y);else if(y!==void 0){const A=_ instanceof ze;!A&&_.setScalar?_.setScalar(y):_ instanceof su&&y instanceof su?_.mask=y.mask:_.set(y),!gz()&&!a.linear&&A&&_.convertSRGBToLinear()}}else if(g[m]=y,g[m]instanceof Mn&&g[m].format===_i&&g[m].type===No){const A=g[m];yE(A)&&yE(a.gl)?A.colorSpace=a.gl.outputColorSpace:A.encoding=a.gl.outputEncoding}Ch(t)}if(s.parent&&t.raycast&&u!==s.eventCount){const p=$v(t).getState().internal,m=p.interaction.indexOf(t);m>-1&&p.interaction.splice(m,1),s.eventCount&&p.interaction.push(t)}return!(c.length===1&&c[0][0]==="onUpdate")&&c.length&&(i=t.__r3f)!=null&&i.parent&&LC(t),t}function Ch(t){var e,n;const r=(e=t.__r3f)==null||(n=e.root)==null||n.getState==null?void 0:n.getState();r&&r.internal.frames===0&&r.invalidate()}function LC(t){t.onUpdate==null||t.onUpdate(t)}function dhe(t,e){t.manual||(yz(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix(),t.updateMatrixWorld())}function fv(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function phe(){var t;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Xh.DefaultEventPriority;switch((t=e.event)==null?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Xh.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Xh.ContinuousEventPriority;default:return Xh.DefaultEventPriority}}function wz(t,e,n,r){const i=n.get(e);i&&(n.delete(e),n.size===0&&(t.delete(r),i.target.releasePointerCapture(r)))}function mhe(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter(r=>r!==e),n.initialHits=n.initialHits.filter(r=>r!==e),n.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&n.hovered.delete(i)}),n.capturedMap.forEach((r,i)=>{wz(n.capturedMap,e,r,i)})}function ghe(t){function e(l){const{internal:c}=t.getState(),u=l.offsetX-c.initialClick[0],f=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(u*u+f*f))}function n(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(u=>{var f;return(f=c.__r3f)==null?void 0:f.handlers["onPointer"+u]}))}function r(l,c){const u=t.getState(),f=new Set,p=[],m=c?c(u.internal.interaction):u.internal.interaction;for(let g=0;g<m.length;g++){const _=Qd(m[g]);_&&(_.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(l,u);function y(g){const _=Qd(g);if(!_||!_.events.enabled||_.raycaster.camera===null)return[];if(_.raycaster.camera===void 0){var A;_.events.compute==null||_.events.compute(l,_,(A=_.previousRoot)==null?void 0:A.getState()),_.raycaster.camera===void 0&&(_.raycaster.camera=null)}return _.raycaster.camera?_.raycaster.intersectObject(g,!0):[]}let S=m.flatMap(y).sort((g,_)=>{const A=Qd(g.object),E=Qd(_.object);return!A||!E?g.distance-_.distance:E.events.priority-A.events.priority||g.distance-_.distance}).filter(g=>{const _=fv(g);return f.has(_)?!1:(f.add(_),!0)});u.events.filter&&(S=u.events.filter(S,u));for(const g of S){let _=g.object;for(;_;){var v;(v=_.__r3f)!=null&&v.eventCount&&p.push({...g,eventObject:_}),_=_.parent}}if("pointerId"in l&&u.internal.capturedMap.has(l.pointerId))for(let g of u.internal.capturedMap.get(l.pointerId).values())f.has(fv(g.intersection))||p.push(g.intersection);return p}function i(l,c,u,f){const p=t.getState();if(l.length){const m={stopped:!1};for(const y of l){const S=Qd(y.object)||p,{raycaster:v,pointer:g,camera:_,internal:A}=S,E=new k(g.x,g.y,0).unproject(_),b=T=>{var D,z;return(D=(z=A.capturedMap.get(T))==null?void 0:z.has(y.eventObject))!=null?D:!1},C=T=>{const D={intersection:y,target:c.target};A.capturedMap.has(T)?A.capturedMap.get(T).set(y.eventObject,D):A.capturedMap.set(T,new Map([[y.eventObject,D]])),c.target.setPointerCapture(T)},P=T=>{const D=A.capturedMap.get(T);D&&wz(A.capturedMap,y.eventObject,D,T)};let L={};for(let T in c){let D=c[T];typeof D!="function"&&(L[T]=D)}let N={...y,...L,pointer:g,intersections:l,stopped:m.stopped,delta:u,unprojectedPoint:E,ray:v.ray,camera:_,stopPropagation(){const T="pointerId"in c&&A.capturedMap.get(c.pointerId);if((!T||T.has(y.eventObject))&&(N.stopped=m.stopped=!0,A.hovered.size&&Array.from(A.hovered.values()).find(D=>D.eventObject===y.eventObject))){const D=l.slice(0,l.indexOf(y));s([...D,y])}},target:{hasPointerCapture:b,setPointerCapture:C,releasePointerCapture:P},currentTarget:{hasPointerCapture:b,setPointerCapture:C,releasePointerCapture:P},nativeEvent:c};if(f(N),m.stopped===!0)break}}return l}function s(l){const{internal:c}=t.getState();for(const u of c.hovered.values())if(!l.length||!l.find(f=>f.object===u.object&&f.index===u.index&&f.instanceId===u.instanceId)){const p=u.eventObject.__r3f,m=p==null?void 0:p.handlers;if(c.hovered.delete(fv(u)),p!=null&&p.eventCount){const y={...u,intersections:l};m.onPointerOut==null||m.onPointerOut(y),m.onPointerLeave==null||m.onPointerLeave(y)}}}function o(l,c){for(let u=0;u<c.length;u++){const f=c[u].__r3f;f==null||f.handlers.onPointerMissed==null||f.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:u}=t.getState();"pointerId"in c&&u.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{u.capturedMap.has(c.pointerId)&&(u.capturedMap.delete(c.pointerId),s([]))})}}return function(u){const{onPointerMissed:f,internal:p}=t.getState();p.lastEvent.current=u;const m=l==="onPointerMove",y=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",v=r(u,m?n:void 0),g=y?e(u):0;l==="onPointerDown"&&(p.initialClick=[u.offsetX,u.offsetY],p.initialHits=v.map(A=>A.eventObject)),y&&!v.length&&g<=2&&(o(u,p.interaction),f&&f(u)),m&&s(v);function _(A){const E=A.eventObject,b=E.__r3f,C=b==null?void 0:b.handlers;if(b!=null&&b.eventCount)if(m){if(C.onPointerOver||C.onPointerEnter||C.onPointerOut||C.onPointerLeave){const P=fv(A),L=p.hovered.get(P);L?L.stopped&&A.stopPropagation():(p.hovered.set(P,A),C.onPointerOver==null||C.onPointerOver(A),C.onPointerEnter==null||C.onPointerEnter(A))}C.onPointerMove==null||C.onPointerMove(A)}else{const P=C[l];P?(!y||p.initialHits.includes(E))&&(o(u,p.interaction.filter(L=>!p.initialHits.includes(L))),P(A)):y&&p.initialHits.includes(E)&&o(u,p.interaction.filter(L=>!p.initialHits.includes(L)))}}i(v,u,g,_)}}return{handlePointer:a}}const Ez=t=>!!(t!=null&&t.render),Mz=$.createContext(null),yhe=(t,e)=>{const n=uz((a,l)=>{const c=new k,u=new k,f=new k;function p(g=l().camera,_=u,A=l().size){const{width:E,height:b,top:C,left:P}=A,L=E/b;_ instanceof k?f.copy(_):f.set(..._);const N=g.getWorldPosition(c).distanceTo(f);if(yz(g))return{width:E/g.zoom,height:b/g.zoom,top:C,left:P,factor:1,distance:N,aspect:L};{const T=g.fov*Math.PI/180,D=2*Math.tan(T/2)*N,z=D*(E/b);return{width:z,height:D,top:C,left:P,factor:E/z,distance:N,aspect:L}}}let m;const y=g=>a(_=>({performance:{..._.performance,current:g}})),S=new _e;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(g=1)=>t(l(),g),advance:(g,_)=>e(g,_,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new iP,pointer:S,mouse:S,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const g=l();m&&clearTimeout(m),g.performance.current!==g.performance.min&&y(g.performance.min),m=setTimeout(()=>y(l().performance.max),g.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:g=>a(_=>({..._,events:{..._.events,...g}})),setSize:(g,_,A,E,b)=>{const C=l().camera,P={width:g,height:_,top:E||0,left:b||0,updateStyle:A};a(L=>({size:P,viewport:{...L.viewport,...p(C,u,P)}}))},setDpr:g=>a(_=>{const A=Sz(g);return{viewport:{..._.viewport,dpr:A,initialDpr:_.viewport.initialDpr||A}}}),setFrameloop:(g="always")=>{const _=l().clock;_.stop(),_.elapsedTime=0,g!=="never"&&(_.start(),_.elapsedTime=0),a(()=>({frameloop:g}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:$.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(g,_,A)=>{const E=l().internal;return E.priority=E.priority+(_>0?1:0),E.subscribers.push({ref:g,priority:_,store:A}),E.subscribers=E.subscribers.sort((b,C)=>b.priority-C.priority),()=>{const b=l().internal;b!=null&&b.subscribers&&(b.priority=b.priority-(_>0?1:0),b.subscribers=b.subscribers.filter(C=>C.ref!==g))}}}}}),r=n.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return n.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:u,set:f}=n.getState();if(l.width!==i.width||l.height!==i.height||c.dpr!==s){var p;i=l,s=c.dpr,dhe(a,l),u.setPixelRatio(c.dpr);const m=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&u.domElement instanceof HTMLCanvasElement;u.setSize(l.width,l.height,m)}a!==o&&(o=a,f(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),n.subscribe(a=>t(a)),n};function vhe(t,e){const n={callback:t};return e.add(n),()=>void e.delete(n)}let dv,Tz=new Set,_he=new Set,xhe=new Set;const She=t=>vhe(t,Tz);function xE(t,e){if(t.size)for(const{callback:n}of t.values())n(e)}function Zd(t,e){switch(t){case"before":return xE(Tz,e);case"after":return xE(_he,e);case"tail":return xE(xhe,e)}}let SE,AE;function wE(t,e,n){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof t=="number"&&(r=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),SE=e.internal.subscribers,dv=0;dv<SE.length;dv++)AE=SE[dv],AE.ref.current(AE.store.getState(),r,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function Ahe(t){let e=!1,n,r,i;function s(l){r=requestAnimationFrame(s),e=!0,n=0,Zd("before",l);for(const u of t.values()){var c;i=u.store.getState(),i.internal.active&&(i.frameloop==="always"||i.internal.frames>0)&&!((c=i.gl.xr)!=null&&c.isPresenting)&&(n+=wE(l,i))}if(Zd("after",l),n===0)return Zd("tail",l),e=!1,cancelAnimationFrame(r)}function o(l,c=1){var u;if(!l)return t.forEach(f=>o(f.store.getState()),c);(u=l.gl.xr)!=null&&u.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+c),e||(e=!0,requestAnimationFrame(s)))}function a(l,c=!0,u,f){if(c&&Zd("before",l),u)wE(l,u,f);else for(const p of t.values())wE(l,p.store.getState());c&&Zd("after",l)}return{loop:s,invalidate:o,advance:a}}function Cz(){const t=$.useContext(Mz);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function As(t=n=>n,e){return Cz()(t,e)}function bz(t,e=0){const n=Cz(),r=n.getState().internal.subscribe,i=vz(t);return kg(()=>r(i,e,n),[e,r,n]),null}const EO=new WeakMap;function Rz(t,e){return function(n,...r){let i=EO.get(n);return i||(i=new n,EO.set(n,i)),t&&t(i),Promise.all(r.map(s=>new Promise((o,a)=>i.load(s,l=>{l.scene&&Object.assign(l,uhe(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`)))))).finally(()=>i.dispose==null?void 0:i.dispose())}}function Ug(t,e,n,r){const i=Array.isArray(e)?e:[e],s=nhe(Rz(n,r),[t,...i],{equal:xn.equ});return Array.isArray(e)?s:s[0]}Ug.preload=function(t,e,n){const r=Array.isArray(e)?e:[e];return rhe(Rz(n),[t,...r])};Ug.clear=function(t,e){const n=Array.isArray(e)?e:[e];return ihe([t,...n])};const Gf=new Map,{invalidate:MO,advance:TO}=Ahe(Gf),{reconciler:fx,applyProps:Lc}=ohe(Gf,phe),Sh={objects:"shallow",strict:!1},whe=(t,e)=>{const n=typeof t=="function"?t(e):t;return Ez(n)?n:new FR({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...t})};function Ehe(t,e){const n=typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:s,left:o,updateStyle:a=n}=e;return{width:r,height:i,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&t.parentElement){const{width:r,height:i,top:s,left:o}=t.parentElement.getBoundingClientRect();return{width:r,height:i,top:s,left:o,updateStyle:n}}else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)return{width:t.width,height:t.height,top:0,left:0,updateStyle:n};return{width:0,height:0,top:0,left:0}}function Mhe(t){const e=Gf.get(t),n=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||yhe(MO,TO),o=n||fx.createContainer(s,Xh.ConcurrentRoot,null,!1,null,"",i,null);e||Gf.set(t,{fiber:o,store:s});let a,l=!1,c;return{configure(u={}){let{gl:f,size:p,scene:m,events:y,onCreated:S,shadows:v=!1,linear:g=!1,flat:_=!1,legacy:A=!1,orthographic:E=!1,frameloop:b="always",dpr:C=[1,2],performance:P,raycaster:L,camera:N,onPointerMissed:T}=u,D=s.getState(),z=D.gl;D.gl||D.set({gl:z=whe(f,t)});let j=D.raycaster;j||D.set({raycaster:j=new oz});const{params:H,...q}=L||{};if(xn.equ(q,j,Sh)||Lc(j,{...q}),xn.equ(H,j.params,Sh)||Lc(j,{params:{...j.params,...H}}),!D.camera||D.camera===c&&!xn.equ(c,N,Sh)){c=N;const te=N instanceof Rg,Te=te?N:E?new Ls(0,0,0,0,.1,1e3):new wn(75,0,.1,1e3);te||(Te.position.z=5,N&&Lc(Te,N),!D.camera&&!(N!=null&&N.rotation)&&Te.lookAt(0,0,0)),D.set({camera:Te}),j.camera=Te}if(!D.scene){let te;m instanceof ux?te=m:(te=new ux,m&&Lc(te,m)),D.set({scene:Th(te)})}if(!D.xr){var Z;const te=(de,Ae)=>{const Pe=s.getState();Pe.frameloop!=="never"&&TO(de,!0,Pe,Ae)},Te=()=>{const de=s.getState();de.gl.xr.enabled=de.gl.xr.isPresenting,de.gl.xr.setAnimationLoop(de.gl.xr.isPresenting?te:null),de.gl.xr.isPresenting||MO(de)},ne={connect(){const de=s.getState().gl;de.xr.addEventListener("sessionstart",Te),de.xr.addEventListener("sessionend",Te)},disconnect(){const de=s.getState().gl;de.xr.removeEventListener("sessionstart",Te),de.xr.removeEventListener("sessionend",Te)}};typeof((Z=z.xr)==null?void 0:Z.addEventListener)=="function"&&ne.connect(),D.set({xr:ne})}if(z.shadowMap){const te=z.shadowMap.enabled,Te=z.shadowMap.type;if(z.shadowMap.enabled=!!v,xn.boo(v))z.shadowMap.type=Fp;else if(xn.str(v)){var ae;const ne={basic:sV,percentage:R1,soft:Fp,variance:js};z.shadowMap.type=(ae=ne[v])!=null?ae:Fp}else xn.obj(v)&&Object.assign(z.shadowMap,v);(te!==z.shadowMap.enabled||Te!==z.shadowMap.type)&&(z.shadowMap.needsUpdate=!0)}const O=gz();O&&("enabled"in O?O.enabled=!A:"legacyMode"in O&&(O.legacyMode=A)),Lc(z,{outputEncoding:g?3e3:3001,toneMapping:_?Bo:pR}),D.legacy!==A&&D.set(()=>({legacy:A})),D.linear!==g&&D.set(()=>({linear:g})),D.flat!==_&&D.set(()=>({flat:_})),f&&!xn.fun(f)&&!Ez(f)&&!xn.equ(f,z,Sh)&&Lc(z,f),y&&!D.events.handlers&&D.set({events:y(s)});const Y=Ehe(t,p);return xn.equ(Y,D.size,Sh)||D.setSize(Y.width,Y.height,Y.updateStyle,Y.top,Y.left),C&&D.viewport.dpr!==Sz(C)&&D.setDpr(C),D.frameloop!==b&&D.setFrameloop(b),D.onPointerMissed||D.set({onPointerMissed:T}),P&&!xn.equ(P,D.performance,Sh)&&D.set(te=>({performance:{...te.performance,...P}})),a=S,l=!0,this},render(u){return l||this.configure(),fx.updateContainer($.createElement(The,{store:s,children:u,onCreated:a,rootElement:t}),o,null,()=>{}),s},unmount(){Pz(t)}}}function The({store:t,children:e,onCreated:n,rootElement:r}){return kg(()=>{const i=t.getState();i.set(s=>({internal:{...s.internal,active:!0}})),n&&n(i),t.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),$.createElement(Mz.Provider,{value:t},e)}function Pz(t,e){const n=Gf.get(t),r=n==null?void 0:n.fiber;if(r){const i=n==null?void 0:n.store.getState();i&&(i.internal.active=!1),fx.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,a,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),hhe(i),Gf.delete(t),e&&e(t)}catch{}},500)})}}fx.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:$.version});function DC(t,e,n){var r,i,s,o,a;e==null&&(e=100);function l(){var u=Date.now()-o;u<e&&u>=0?r=setTimeout(l,e-u):(r=null,n||(a=t.apply(s,i),s=i=null))}var c=function(){s=this,i=arguments,o=Date.now();var u=n&&!r;return r||(r=setTimeout(l,e)),u&&(a=t.apply(s,i),s=i=null),a};return c.clear=function(){r&&(clearTimeout(r),r=null)},c.flush=function(){r&&(a=t.apply(s,i),s=i=null,clearTimeout(r),r=null)},c}DC.debounce=DC;var Che=DC;const CO=bx(Che);function bhe(t){let{debounce:e,scroll:n,polyfill:r,offsetSize:i}=t===void 0?{debounce:0,scroll:!1,offsetSize:!1}:t;const s=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=$.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=$.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),c=e?typeof e=="number"?e:e.scroll:null,u=e?typeof e=="number"?e:e.resize:null,f=$.useRef(!1);$.useEffect(()=>(f.current=!0,()=>void(f.current=!1)));const[p,m,y]=$.useMemo(()=>{const _=()=>{if(!l.current.element)return;const{left:A,top:E,width:b,height:C,bottom:P,right:L,x:N,y:T}=l.current.element.getBoundingClientRect(),D={left:A,top:E,width:b,height:C,bottom:P,right:L,x:N,y:T};l.current.element instanceof HTMLElement&&i&&(D.height=l.current.element.offsetHeight,D.width=l.current.element.offsetWidth),Object.freeze(D),f.current&&!Lhe(l.current.lastBounds,D)&&a(l.current.lastBounds=D)};return[_,u?CO(_,u):_,c?CO(_,c):_]},[a,i,c,u]);function S(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(_=>_.removeEventListener("scroll",y,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function v(){l.current.element&&(l.current.resizeObserver=new s(y),l.current.resizeObserver.observe(l.current.element),n&&l.current.scrollContainers&&l.current.scrollContainers.forEach(_=>_.addEventListener("scroll",y,{capture:!0,passive:!0})))}const g=_=>{!_||_===l.current.element||(S(),l.current.element=_,l.current.scrollContainers=Iz(_),v())};return Phe(y,!!n),Rhe(m),$.useEffect(()=>{S(),v()},[n,y,m]),$.useEffect(()=>S,[]),[g,o,p]}function Rhe(t){$.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function Phe(t,e){$.useEffect(()=>{if(e){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[t,e])}function Iz(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(t);return[n,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(t),[...e,...Iz(t.parentElement)]}const Ihe=["x","y","top","bottom","left","right","width","height"],Lhe=(t,e)=>Ihe.every(n=>t[n]===e[n]);var Dhe=Object.defineProperty,Bhe=Object.defineProperties,Nhe=Object.getOwnPropertyDescriptors,bO=Object.getOwnPropertySymbols,Ohe=Object.prototype.hasOwnProperty,Fhe=Object.prototype.propertyIsEnumerable,RO=(t,e,n)=>e in t?Dhe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,PO=(t,e)=>{for(var n in e||(e={}))Ohe.call(e,n)&&RO(t,n,e[n]);if(bO)for(var n of bO(e))Fhe.call(e,n)&&RO(t,n,e[n]);return t},khe=(t,e)=>Bhe(t,Nhe(e));function Lz(t,e,n){if(!t)return;if(n(t)===!0)return t;let r=e?t.return:t.child;for(;r;){const i=Lz(r,e,n);if(i)return i;r=e?null:r.sibling}}function Dz(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const cP=Dz($.createContext(null));class Bz extends $.Component{render(){return $.createElement(cP.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:IO,ReactCurrentDispatcher:LO}=$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function Uhe(){const t=$.useContext(cP);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=$.useId();return $.useMemo(()=>{for(const r of[IO==null?void 0:IO.current,t,t==null?void 0:t.alternate]){if(!r)continue;const i=Lz(r,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(i)return i}},[t,e])}function Vhe(){var t,e;const n=Uhe(),[r]=$.useState(()=>new Map);r.clear();let i=n;for(;i;){const s=(t=i.type)==null?void 0:t._context;s&&s!==cP&&!r.has(s)&&r.set(s,(e=LO==null?void 0:LO.current)==null?void 0:e.readContext(Dz(s))),i=i.return}return r}function zhe(){const t=Vhe();return $.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>r=>$.createElement(e,null,$.createElement(n.Provider,khe(PO({},r),{value:t.get(n)}))),e=>$.createElement(Bz,PO({},e))),[t])}const EE={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Hhe(t){const{handlePointer:e}=ghe(t);return{priority:1,enabled:!0,compute(n,r,i){r.pointer.set(n.offsetX/r.size.width*2-1,-(n.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(EE).reduce((n,r)=>({...n,[r]:e(r)}),{}),update:()=>{var n;const{events:r,internal:i}=t.getState();(n=i.lastEvent)!=null&&n.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:n=>{var r;const{set:i,events:s}=t.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:n}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,a])=>{const[l,c]=EE[o];n.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:n,events:r}=t.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[a]=EE[s];r.connected.removeEventListener(a,o)}}),n(s=>({events:{...s.events,connected:void 0}}))}}}}const Ghe=$.forwardRef(function({children:e,fallback:n,resize:r,style:i,gl:s,events:o=Hhe,eventSource:a,eventPrefix:l,shadows:c,linear:u,flat:f,legacy:p,orthographic:m,frameloop:y,dpr:S,performance:v,raycaster:g,camera:_,scene:A,onPointerMissed:E,onCreated:b,...C},P){$.useMemo(()=>she(lz),[]);const L=zhe(),[N,T]=bhe({scroll:!0,debounce:{scroll:50,resize:0},...r}),D=$.useRef(null),z=$.useRef(null);$.useImperativeHandle(P,()=>D.current);const j=vz(E),[H,q]=$.useState(!1),[Z,ae]=$.useState(!1);if(H)throw H;if(Z)throw Z;const O=$.useRef(null);kg(()=>{const K=D.current;T.width>0&&T.height>0&&K&&(O.current||(O.current=Mhe(K)),O.current.configure({gl:s,events:o,shadows:c,linear:u,flat:f,legacy:p,orthographic:m,frameloop:y,dpr:S,performance:v,raycaster:g,camera:_,scene:A,size:T,onPointerMissed:(...Y)=>j.current==null?void 0:j.current(...Y),onCreated:Y=>{Y.events.connect==null||Y.events.connect(a?ahe(a)?a.current:a:z.current),l&&Y.setEvents({compute:(te,Te)=>{const ne=te[l+"X"],de=te[l+"Y"];Te.pointer.set(ne/Te.size.width*2-1,-(de/Te.size.height)*2+1),Te.raycaster.setFromCamera(Te.pointer,Te.camera)}}),b==null||b(Y)}}),O.current.render($.createElement(L,null,$.createElement(_z,{set:ae},$.createElement($.Suspense,{fallback:$.createElement(lhe,{set:q})},e)))))}),$.useEffect(()=>{const K=D.current;if(K)return()=>Pz(K)},[]);const W=a?"none":"auto";return $.createElement("div",Df({ref:z,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:W,...i}},C),$.createElement("div",{ref:N,style:{width:"100%",height:"100%"}},$.createElement("canvas",{ref:D,style:{display:"block"}},n)))}),jhe=$.forwardRef(function(e,n){return $.createElement(Bz,null,$.createElement(Ghe,Df({},e,{ref:n})))}),Vg=new k,uP=new k,Whe=new k;function Xhe(t,e,n){const r=Vg.setFromMatrixPosition(t.matrixWorld);r.project(e);const i=n.width/2,s=n.height/2;return[r.x*i+i,-(r.y*s)+s]}function Khe(t,e){const n=Vg.setFromMatrixPosition(t.matrixWorld),r=uP.setFromMatrixPosition(e.matrixWorld),i=n.sub(r),s=e.getWorldDirection(Whe);return i.angleTo(s)>Math.PI/2}function $he(t,e,n,r){const i=Vg.setFromMatrixPosition(t.matrixWorld),s=i.clone();s.project(e),n.setFromCamera(s,e);const o=n.intersectObjects(r,!0);if(o.length){const a=o[0].distance;return i.distanceTo(n.ray.origin)<a}return!0}function Jhe(t,e){if(e instanceof Ls)return e.zoom;if(e instanceof wn){const n=Vg.setFromMatrixPosition(t.matrixWorld),r=uP.setFromMatrixPosition(e.matrixWorld),i=e.fov*Math.PI/180,s=n.distanceTo(r);return 1/(2*Math.tan(i/2)*s)}else return 1}function qhe(t,e,n){if(e instanceof wn||e instanceof Ls){const r=Vg.setFromMatrixPosition(t.matrixWorld),i=uP.setFromMatrixPosition(e.matrixWorld),s=r.distanceTo(i),o=(n[1]-n[0])/(e.far-e.near),a=n[1]-o*e.far;return Math.round(o*s+a)}}const BC=t=>Math.abs(t)<1e-10?0:t;function Nz(t,e,n=""){let r="matrix3d(";for(let i=0;i!==16;i++)r+=BC(e[i]*t.elements[i])+(i!==15?",":")");return n+r}const Yhe=(t=>e=>Nz(e,t))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),Qhe=(t=>(e,n)=>Nz(e,t(n),"translate(-50%,-50%)"))(t=>[1/t,1/t,1/t,1,-1/t,-1/t,-1/t,-1,1/t,1/t,1/t,1,1,1,1,1]);function Zhe(t){return t&&typeof t=="object"&&"current"in t}const efe=$.forwardRef(({children:t,eps:e=.001,style:n,className:r,prepend:i,center:s,fullscreen:o,portal:a,distanceFactor:l,sprite:c=!1,transform:u=!1,occlude:f,onOcclude:p,castShadow:m,receiveShadow:y,material:S,geometry:v,zIndexRange:g=[16777271,0],calculatePosition:_=Xhe,as:A="div",wrapperClass:E,pointerEvents:b="auto",...C},P)=>{const{gl:L,camera:N,scene:T,size:D,raycaster:z,events:j,viewport:H}=As(),[q]=$.useState(()=>document.createElement(A)),Z=$.useRef(),ae=$.useRef(null),O=$.useRef(0),W=$.useRef([0,0]),K=$.useRef(null),Y=$.useRef(null),te=(a==null?void 0:a.current)||j.connected||L.domElement.parentNode,Te=$.useRef(null),ne=$.useRef(!1),de=$.useMemo(()=>f&&f!=="blending"||Array.isArray(f)&&f.length&&Zhe(f[0]),[f]);$.useLayoutEffect(()=>{const ce=L.domElement;f&&f==="blending"?(ce.style.zIndex=`${Math.floor(g[0]/2)}`,ce.style.position="absolute",ce.style.pointerEvents="none"):(ce.style.zIndex=null,ce.style.position=null,ce.style.pointerEvents=null)},[f]),$.useLayoutEffect(()=>{if(ae.current){const ce=Z.current=IU(q);if(T.updateMatrixWorld(),u)q.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const oe=_(ae.current,N,D);q.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${oe[0]}px,${oe[1]}px,0);transform-origin:0 0;`}return te&&(i?te.prepend(q):te.appendChild(q)),()=>{te&&te.removeChild(q),ce.unmount()}}},[te,u]),$.useLayoutEffect(()=>{E&&(q.className=E)},[E]);const Ae=$.useMemo(()=>u?{position:"absolute",top:0,left:0,width:D.width,height:D.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-D.height/2,left:-D.width/2,width:D.width,height:D.height},...n},[n,s,o,D,u]),Pe=$.useMemo(()=>({position:"absolute",pointerEvents:b}),[b]);$.useLayoutEffect(()=>{if(ne.current=!1,u){var ce;(ce=Z.current)==null||ce.render($.createElement("div",{ref:K,style:Ae},$.createElement("div",{ref:Y,style:Pe},$.createElement("div",{ref:P,className:r,style:n,children:t}))))}else{var oe;(oe=Z.current)==null||oe.render($.createElement("div",{ref:P,style:Ae,className:r,children:t}))}});const $e=$.useRef(!0);bz(ce=>{if(ae.current){N.updateMatrixWorld(),ae.current.updateWorldMatrix(!0,!1);const oe=u?W.current:_(ae.current,N,D);if(u||Math.abs(O.current-N.zoom)>e||Math.abs(W.current[0]-oe[0])>e||Math.abs(W.current[1]-oe[1])>e){const V=Khe(ae.current,N);let he=!1;de&&(Array.isArray(f)?he=f.map(be=>be.current):f!=="blending"&&(he=[T]));const ie=$e.current;if(he){const be=$he(ae.current,N,z,he);$e.current=be&&!V}else $e.current=!V;ie!==$e.current&&(p?p(!$e.current):q.style.display=$e.current?"block":"none");const ye=Math.floor(g[0]/2),le=f?de?[g[0],ye]:[ye-1,0]:g;if(q.style.zIndex=`${qhe(ae.current,N,le)}`,u){const[be,Ee]=[D.width/2,D.height/2],F=N.projectionMatrix.elements[5]*Ee,{isOrthographicCamera:B,top:J,left:xe,bottom:Se,right:we}=N,Qe=Yhe(N.matrixWorldInverse),Ne=B?`scale(${F})translate(${BC(-(we+xe)/2)}px,${BC((J+Se)/2)}px)`:`translateZ(${F}px)`;let Ve=ae.current.matrixWorld;c&&(Ve=N.matrixWorldInverse.clone().transpose().copyPosition(Ve).scale(ae.current.scale),Ve.elements[3]=Ve.elements[7]=Ve.elements[11]=0,Ve.elements[15]=1),q.style.width=D.width+"px",q.style.height=D.height+"px",q.style.perspective=B?"":`${F}px`,K.current&&Y.current&&(K.current.style.transform=`${Ne}${Qe}translate(${be}px,${Ee}px)`,Y.current.style.transform=Qhe(Ve,1/((l||10)/400)))}else{const be=l===void 0?1:Jhe(ae.current,N)*l;q.style.transform=`translate3d(${oe[0]}px,${oe[1]}px,0) scale(${be})`}W.current=oe,O.current=N.zoom}}if(!de&&Te.current&&!ne.current)if(u){if(K.current){const oe=K.current.children[0];if(oe!=null&&oe.clientWidth&&oe!=null&&oe.clientHeight){const{isOrthographicCamera:V}=N;if(V||v)C.scale&&(Array.isArray(C.scale)?C.scale instanceof k?Te.current.scale.copy(C.scale.clone().divideScalar(1)):Te.current.scale.set(1/C.scale[0],1/C.scale[1],1/C.scale[2]):Te.current.scale.setScalar(1/C.scale));else{const he=(l||10)/400,ie=oe.clientWidth*he,ye=oe.clientHeight*he;Te.current.scale.set(ie,ye,1)}ne.current=!0}}}else{const oe=q.children[0];if(oe!=null&&oe.clientWidth&&oe!=null&&oe.clientHeight){const V=1/H.factor,he=oe.clientWidth*V,ie=oe.clientHeight*V;Te.current.scale.set(he,ie,1),ne.current=!0}Te.current.lookAt(ce.camera.position)}});const Ue=$.useMemo(()=>({vertexShader:u?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom" 
            is false. 
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;
            
            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[u]);return $.createElement("group",Df({},C,{ref:ae}),f&&!de&&$.createElement("mesh",{castShadow:m,receiveShadow:y,ref:Te},v||$.createElement("planeGeometry",null),S||$.createElement("shaderMaterial",{side:Cs,vertexShader:Ue.vertexShader,fragmentShader:Ue.fragmentShader})))});let ep=0;const tfe=uz(t=>(Wh.onStart=(e,n,r)=>{t({active:!0,item:e,loaded:n,total:r,progress:(n-ep)/(r-ep)*100})},Wh.onLoad=()=>{t({active:!1})},Wh.onError=e=>t(n=>({errors:[...n.errors,e]})),Wh.onProgress=(e,n,r)=>{n===r&&(ep=r),t({active:!0,item:e,loaded:n,total:r,progress:(n-ep)/(r-ep)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0}));function DO(t,e){if(e===$V)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),t;if(e===ax||e===wR){let n=t.getIndex();if(n===null){const o=[],a=t.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);t.setIndex(o),n=t.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t}const r=n.count-2,i=[];if(n)if(e===ax)for(let o=1;o<=r;o++)i.push(n.getX(0)),i.push(n.getX(o)),i.push(n.getX(o+1));else for(let o=0;o<r;o++)o%2===0?(i.push(n.getX(o)),i.push(n.getX(o+1)),i.push(n.getX(o+2))):(i.push(n.getX(o+2)),i.push(n.getX(o+1)),i.push(n.getX(o)));i.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=t.clone();return s.setIndex(i),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),t}const nfe=parseInt(Mg.replace(/\D+/g,""));var rfe=Object.defineProperty,ife=(t,e,n)=>e in t?rfe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,St=(t,e,n)=>(ife(t,typeof e!="symbol"?e+"":e,n),n);const pv=new bu,BO=new ua,sfe=Math.cos(70*(Math.PI/180)),NO=(t,e)=>(t%e+e)%e;let ofe=class extends Wo{constructor(e,n){super(),St(this,"object"),St(this,"domElement"),St(this,"enabled",!0),St(this,"target",new k),St(this,"minDistance",0),St(this,"maxDistance",1/0),St(this,"minZoom",0),St(this,"maxZoom",1/0),St(this,"minPolarAngle",0),St(this,"maxPolarAngle",Math.PI),St(this,"minAzimuthAngle",-1/0),St(this,"maxAzimuthAngle",1/0),St(this,"enableDamping",!1),St(this,"dampingFactor",.05),St(this,"enableZoom",!0),St(this,"zoomSpeed",1),St(this,"enableRotate",!0),St(this,"rotateSpeed",1),St(this,"enablePan",!0),St(this,"panSpeed",1),St(this,"screenSpacePanning",!0),St(this,"keyPanSpeed",7),St(this,"zoomToCursor",!1),St(this,"autoRotate",!1),St(this,"autoRotateSpeed",2),St(this,"reverseOrbit",!1),St(this,"reverseHorizontalOrbit",!1),St(this,"reverseVerticalOrbit",!1),St(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),St(this,"mouseButtons",{LEFT:bc.ROTATE,MIDDLE:bc.DOLLY,RIGHT:bc.PAN}),St(this,"touches",{ONE:Rc.ROTATE,TWO:Rc.DOLLY_PAN}),St(this,"target0"),St(this,"position0"),St(this,"zoom0"),St(this,"_domElementKeyEvents",null),St(this,"getPolarAngle"),St(this,"getAzimuthalAngle"),St(this,"setPolarAngle"),St(this,"setAzimuthalAngle"),St(this,"getDistance"),St(this,"listenToKeyEvents"),St(this,"stopListenToKeyEvents"),St(this,"saveState"),St(this,"reset"),St(this,"update"),St(this,"connect"),St(this,"dispose"),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=Q=>{let Me=NO(Q,2*Math.PI),Ge=u.phi;Ge<0&&(Ge+=2*Math.PI),Me<0&&(Me+=2*Math.PI);let Je=Math.abs(Me-Ge);2*Math.PI-Je<Je&&(Me<Ge?Me+=2*Math.PI:Ge+=2*Math.PI),f.phi=Me-Ge,r.update()},this.setAzimuthalAngle=Q=>{let Me=NO(Q,2*Math.PI),Ge=u.theta;Ge<0&&(Ge+=2*Math.PI),Me<0&&(Me+=2*Math.PI);let Je=Math.abs(Me-Ge);2*Math.PI-Je<Je&&(Me<Ge?Me+=2*Math.PI:Ge+=2*Math.PI),f.theta=Me-Ge,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=Q=>{Q.addEventListener("keydown",ct),this._domElementKeyEvents=Q},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",ct),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),l=a.NONE},this.update=(()=>{const Q=new k,Me=new k(0,1,0),Ge=new Tr().setFromUnitVectors(e.up,Me),Je=Ge.clone().invert(),_t=new k,X=new Tr,Ie=2*Math.PI;return function(){const nt=r.object.position;Ge.setFromUnitVectors(e.up,Me),Je.copy(Ge).invert(),Q.copy(nt).sub(r.target),Q.applyQuaternion(Ge),u.setFromVector3(Q),r.autoRotate&&l===a.NONE&&H(z()),r.enableDamping?(u.theta+=f.theta*r.dampingFactor,u.phi+=f.phi*r.dampingFactor):(u.theta+=f.theta,u.phi+=f.phi);let rt=r.minAzimuthAngle,Bt=r.maxAzimuthAngle;isFinite(rt)&&isFinite(Bt)&&(rt<-Math.PI?rt+=Ie:rt>Math.PI&&(rt-=Ie),Bt<-Math.PI?Bt+=Ie:Bt>Math.PI&&(Bt-=Ie),rt<=Bt?u.theta=Math.max(rt,Math.min(Bt,u.theta)):u.theta=u.theta>(rt+Bt)/2?Math.max(rt,u.theta):Math.min(Bt,u.theta)),u.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,u.phi)),u.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(m,r.dampingFactor):r.target.add(m),r.zoomToCursor&&N||r.object.isOrthographicCamera?u.radius=te(u.radius):u.radius=te(u.radius*p),Q.setFromSpherical(u),Q.applyQuaternion(Je),nt.copy(r.target).add(Q),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(f.theta*=1-r.dampingFactor,f.phi*=1-r.dampingFactor,m.multiplyScalar(1-r.dampingFactor)):(f.set(0,0,0),m.set(0,0,0));let Wt=!1;if(r.zoomToCursor&&N){let mn=null;if(r.object instanceof wn&&r.object.isPerspectiveCamera){const Xn=Q.length();mn=te(Xn*p);const Yt=Xn-mn;r.object.position.addScaledVector(P,Yt),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const Xn=new k(L.x,L.y,0);Xn.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/p)),r.object.updateProjectionMatrix(),Wt=!0;const Yt=new k(L.x,L.y,0);Yt.unproject(r.object),r.object.position.sub(Yt).add(Xn),r.object.updateMatrixWorld(),mn=Q.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;mn!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(mn).add(r.object.position):(pv.origin.copy(r.object.position),pv.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(pv.direction))<sfe?e.lookAt(r.target):(BO.setFromNormalAndCoplanarPoint(r.object.up,r.target),pv.intersectPlane(BO,r.target))))}else r.object instanceof Ls&&r.object.isOrthographicCamera&&(Wt=p!==1,Wt&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/p)),r.object.updateProjectionMatrix()));return p=1,N=!1,Wt||_t.distanceToSquared(r.object.position)>c||8*(1-X.dot(r.object.quaternion))>c?(r.dispatchEvent(i),_t.copy(r.object.position),X.copy(r.object.quaternion),Wt=!1,!0):!1}})(),this.connect=Q=>{Q===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),r.domElement=Q,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",Gt),r.domElement.addEventListener("pointerdown",J),r.domElement.addEventListener("pointercancel",we),r.domElement.addEventListener("wheel",Ve)},this.dispose=()=>{var Q,Me,Ge,Je,_t,X;(Q=r.domElement)==null||Q.removeEventListener("contextmenu",Gt),(Me=r.domElement)==null||Me.removeEventListener("pointerdown",J),(Ge=r.domElement)==null||Ge.removeEventListener("pointercancel",we),(Je=r.domElement)==null||Je.removeEventListener("wheel",Ve),(_t=r.domElement)==null||_t.ownerDocument.removeEventListener("pointermove",xe),(X=r.domElement)==null||X.ownerDocument.removeEventListener("pointerup",Se),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",ct)};const r=this,i={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const c=1e-6,u=new PC,f=new PC;let p=1;const m=new k,y=new _e,S=new _e,v=new _e,g=new _e,_=new _e,A=new _e,E=new _e,b=new _e,C=new _e,P=new k,L=new _e;let N=!1;const T=[],D={};function z(){return 2*Math.PI/60/60*r.autoRotateSpeed}function j(){return Math.pow(.95,r.zoomSpeed)}function H(Q){r.reverseOrbit||r.reverseHorizontalOrbit?f.theta+=Q:f.theta-=Q}function q(Q){r.reverseOrbit||r.reverseVerticalOrbit?f.phi+=Q:f.phi-=Q}const Z=(()=>{const Q=new k;return function(Ge,Je){Q.setFromMatrixColumn(Je,0),Q.multiplyScalar(-Ge),m.add(Q)}})(),ae=(()=>{const Q=new k;return function(Ge,Je){r.screenSpacePanning===!0?Q.setFromMatrixColumn(Je,1):(Q.setFromMatrixColumn(Je,0),Q.crossVectors(r.object.up,Q)),Q.multiplyScalar(Ge),m.add(Q)}})(),O=(()=>{const Q=new k;return function(Ge,Je){const _t=r.domElement;if(_t&&r.object instanceof wn&&r.object.isPerspectiveCamera){const X=r.object.position;Q.copy(X).sub(r.target);let Ie=Q.length();Ie*=Math.tan(r.object.fov/2*Math.PI/180),Z(2*Ge*Ie/_t.clientHeight,r.object.matrix),ae(2*Je*Ie/_t.clientHeight,r.object.matrix)}else _t&&r.object instanceof Ls&&r.object.isOrthographicCamera?(Z(Ge*(r.object.right-r.object.left)/r.object.zoom/_t.clientWidth,r.object.matrix),ae(Je*(r.object.top-r.object.bottom)/r.object.zoom/_t.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function W(Q){r.object instanceof wn&&r.object.isPerspectiveCamera||r.object instanceof Ls&&r.object.isOrthographicCamera?p/=Q:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function K(Q){r.object instanceof wn&&r.object.isPerspectiveCamera||r.object instanceof Ls&&r.object.isOrthographicCamera?p*=Q:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function Y(Q){if(!r.zoomToCursor||!r.domElement)return;N=!0;const Me=r.domElement.getBoundingClientRect(),Ge=Q.clientX-Me.left,Je=Q.clientY-Me.top,_t=Me.width,X=Me.height;L.x=Ge/_t*2-1,L.y=-(Je/X)*2+1,P.set(L.x,L.y,1).unproject(r.object).sub(r.object.position).normalize()}function te(Q){return Math.max(r.minDistance,Math.min(r.maxDistance,Q))}function Te(Q){y.set(Q.clientX,Q.clientY)}function ne(Q){Y(Q),E.set(Q.clientX,Q.clientY)}function de(Q){g.set(Q.clientX,Q.clientY)}function Ae(Q){S.set(Q.clientX,Q.clientY),v.subVectors(S,y).multiplyScalar(r.rotateSpeed);const Me=r.domElement;Me&&(H(2*Math.PI*v.x/Me.clientHeight),q(2*Math.PI*v.y/Me.clientHeight)),y.copy(S),r.update()}function Pe(Q){b.set(Q.clientX,Q.clientY),C.subVectors(b,E),C.y>0?W(j()):C.y<0&&K(j()),E.copy(b),r.update()}function $e(Q){_.set(Q.clientX,Q.clientY),A.subVectors(_,g).multiplyScalar(r.panSpeed),O(A.x,A.y),g.copy(_),r.update()}function Ue(Q){Y(Q),Q.deltaY<0?K(j()):Q.deltaY>0&&W(j()),r.update()}function ce(Q){let Me=!1;switch(Q.code){case r.keys.UP:O(0,r.keyPanSpeed),Me=!0;break;case r.keys.BOTTOM:O(0,-r.keyPanSpeed),Me=!0;break;case r.keys.LEFT:O(r.keyPanSpeed,0),Me=!0;break;case r.keys.RIGHT:O(-r.keyPanSpeed,0),Me=!0;break}Me&&(Q.preventDefault(),r.update())}function oe(){if(T.length==1)y.set(T[0].pageX,T[0].pageY);else{const Q=.5*(T[0].pageX+T[1].pageX),Me=.5*(T[0].pageY+T[1].pageY);y.set(Q,Me)}}function V(){if(T.length==1)g.set(T[0].pageX,T[0].pageY);else{const Q=.5*(T[0].pageX+T[1].pageX),Me=.5*(T[0].pageY+T[1].pageY);g.set(Q,Me)}}function he(){const Q=T[0].pageX-T[1].pageX,Me=T[0].pageY-T[1].pageY,Ge=Math.sqrt(Q*Q+Me*Me);E.set(0,Ge)}function ie(){r.enableZoom&&he(),r.enablePan&&V()}function ye(){r.enableZoom&&he(),r.enableRotate&&oe()}function le(Q){if(T.length==1)S.set(Q.pageX,Q.pageY);else{const Ge=Ye(Q),Je=.5*(Q.pageX+Ge.x),_t=.5*(Q.pageY+Ge.y);S.set(Je,_t)}v.subVectors(S,y).multiplyScalar(r.rotateSpeed);const Me=r.domElement;Me&&(H(2*Math.PI*v.x/Me.clientHeight),q(2*Math.PI*v.y/Me.clientHeight)),y.copy(S)}function be(Q){if(T.length==1)_.set(Q.pageX,Q.pageY);else{const Me=Ye(Q),Ge=.5*(Q.pageX+Me.x),Je=.5*(Q.pageY+Me.y);_.set(Ge,Je)}A.subVectors(_,g).multiplyScalar(r.panSpeed),O(A.x,A.y),g.copy(_)}function Ee(Q){const Me=Ye(Q),Ge=Q.pageX-Me.x,Je=Q.pageY-Me.y,_t=Math.sqrt(Ge*Ge+Je*Je);b.set(0,_t),C.set(0,Math.pow(b.y/E.y,r.zoomSpeed)),W(C.y),E.copy(b)}function F(Q){r.enableZoom&&Ee(Q),r.enablePan&&be(Q)}function B(Q){r.enableZoom&&Ee(Q),r.enableRotate&&le(Q)}function J(Q){var Me,Ge;r.enabled!==!1&&(T.length===0&&((Me=r.domElement)==null||Me.ownerDocument.addEventListener("pointermove",xe),(Ge=r.domElement)==null||Ge.ownerDocument.addEventListener("pointerup",Se)),Dt(Q),Q.pointerType==="touch"?wt(Q):Qe(Q))}function xe(Q){r.enabled!==!1&&(Q.pointerType==="touch"?Re(Q):Ne(Q))}function Se(Q){var Me,Ge,Je;vt(Q),T.length===0&&((Me=r.domElement)==null||Me.releasePointerCapture(Q.pointerId),(Ge=r.domElement)==null||Ge.ownerDocument.removeEventListener("pointermove",xe),(Je=r.domElement)==null||Je.ownerDocument.removeEventListener("pointerup",Se)),r.dispatchEvent(o),l=a.NONE}function we(Q){vt(Q)}function Qe(Q){let Me;switch(Q.button){case 0:Me=r.mouseButtons.LEFT;break;case 1:Me=r.mouseButtons.MIDDLE;break;case 2:Me=r.mouseButtons.RIGHT;break;default:Me=-1}switch(Me){case bc.DOLLY:if(r.enableZoom===!1)return;ne(Q),l=a.DOLLY;break;case bc.ROTATE:if(Q.ctrlKey||Q.metaKey||Q.shiftKey){if(r.enablePan===!1)return;de(Q),l=a.PAN}else{if(r.enableRotate===!1)return;Te(Q),l=a.ROTATE}break;case bc.PAN:if(Q.ctrlKey||Q.metaKey||Q.shiftKey){if(r.enableRotate===!1)return;Te(Q),l=a.ROTATE}else{if(r.enablePan===!1)return;de(Q),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function Ne(Q){if(r.enabled!==!1)switch(l){case a.ROTATE:if(r.enableRotate===!1)return;Ae(Q);break;case a.DOLLY:if(r.enableZoom===!1)return;Pe(Q);break;case a.PAN:if(r.enablePan===!1)return;$e(Q);break}}function Ve(Q){r.enabled===!1||r.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(Q.preventDefault(),r.dispatchEvent(s),Ue(Q),r.dispatchEvent(o))}function ct(Q){r.enabled===!1||r.enablePan===!1||ce(Q)}function wt(Q){switch(lt(Q),T.length){case 1:switch(r.touches.ONE){case Rc.ROTATE:if(r.enableRotate===!1)return;oe(),l=a.TOUCH_ROTATE;break;case Rc.PAN:if(r.enablePan===!1)return;V(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(r.touches.TWO){case Rc.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;ie(),l=a.TOUCH_DOLLY_PAN;break;case Rc.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;ye(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function Re(Q){switch(lt(Q),l){case a.TOUCH_ROTATE:if(r.enableRotate===!1)return;le(Q),r.update();break;case a.TOUCH_PAN:if(r.enablePan===!1)return;be(Q),r.update();break;case a.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;F(Q),r.update();break;case a.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;B(Q),r.update();break;default:l=a.NONE}}function Gt(Q){r.enabled!==!1&&Q.preventDefault()}function Dt(Q){T.push(Q)}function vt(Q){delete D[Q.pointerId];for(let Me=0;Me<T.length;Me++)if(T[Me].pointerId==Q.pointerId){T.splice(Me,1);return}}function lt(Q){let Me=D[Q.pointerId];Me===void 0&&(Me=new _e,D[Q.pointerId]=Me),Me.set(Q.pageX,Q.pageY)}function Ye(Q){const Me=Q.pointerId===T[0].pointerId?T[1]:T[0];return D[Me.pointerId]}n!==void 0&&this.connect(n),this.update()}};class hP extends ci{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(n){return new hfe(n)}),this.register(function(n){return new _fe(n)}),this.register(function(n){return new xfe(n)}),this.register(function(n){return new Sfe(n)}),this.register(function(n){return new dfe(n)}),this.register(function(n){return new pfe(n)}),this.register(function(n){return new mfe(n)}),this.register(function(n){return new gfe(n)}),this.register(function(n){return new ufe(n)}),this.register(function(n){return new yfe(n)}),this.register(function(n){return new ffe(n)}),this.register(function(n){return new vfe(n)}),this.register(function(n){return new lfe(n)}),this.register(function(n){return new Afe(n)}),this.register(function(n){return new wfe(n)})}load(e,n,r,i){const s=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=Fo.extractUrlBase(e),this.manager.itemStart(e);const a=function(c){i?i(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new is(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(u){n(u),s.manager.itemEnd(e)},a)}catch(u){a(u)}},r,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,n,r,i){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(Fo.decodeText(new Uint8Array(e.slice(0,4)))===Oz){try{o[Xt.KHR_BINARY_GLTF]=new Efe(e)}catch(u){i&&i(u);return}s=JSON.parse(o[Xt.KHR_BINARY_GLTF].content)}else s=JSON.parse(Fo.decodeText(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new Ffe(s,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const u=this.pluginCallbacks[c](l);a[u.name]=u,o[u.name]=!0}if(s.extensionsUsed)for(let c=0;c<s.extensionsUsed.length;++c){const u=s.extensionsUsed[c],f=s.extensionsRequired||[];switch(u){case Xt.KHR_MATERIALS_UNLIT:o[u]=new cfe;break;case Xt.KHR_DRACO_MESH_COMPRESSION:o[u]=new Mfe(s,this.dracoLoader);break;case Xt.KHR_TEXTURE_TRANSFORM:o[u]=new Tfe;break;case Xt.KHR_MESH_QUANTIZATION:o[u]=new Cfe;break;default:f.indexOf(u)>=0&&a[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(r,i)}parseAsync(e,n){const r=this;return new Promise(function(i,s){r.parse(e,n,i,s)})}}function afe(){let t={};return{get:function(e){return t[e]},add:function(e,n){t[e]=n},remove:function(e){delete t[e]},removeAll:function(){t={}}}}const Xt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class lfe{constructor(e){this.parser=e,this.name=Xt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,n=this.parser.json.nodes||[];for(let r=0,i=n.length;r<i;r++){const s=n[r];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const n=this.parser,r="light:"+e;let i=n.cache.get(r);if(i)return i;const s=n.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const u=new ze(16777215);l.color!==void 0&&u.fromArray(l.color);const f=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new nP(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new tP(u),c.distance=f;break;case"spot":c=new eP(u),c.distance=f,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,sl(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=n.createUniqueName(l.name||"light_"+e),i=Promise.resolve(c),n.cache.add(r,i),i}getDependency(e,n){if(e==="light")return this._loadLight(n)}createNodeAttachment(e){const n=this,r=this.parser,s=r.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return r._getNodeRef(n.cache,a,l)})}}class cfe{constructor(){this.name=Xt.KHR_MATERIALS_UNLIT}getMaterialType(){return Yi}extendParams(e,n,r){const i=[];e.color=new ze(1,1,1),e.opacity=1;const s=n.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}s.baseColorTexture!==void 0&&i.push(r.assignTexture(e,"map",s.baseColorTexture,3001))}return Promise.all(i)}}class ufe{constructor(e){this.parser=e,this.name=Xt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,n){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name].emissiveStrength;return s!==void 0&&(n.emissiveIntensity=s),Promise.resolve()}}class hfe{constructor(e){this.parser=e,this.name=Xt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Xo}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];if(o.clearcoatFactor!==void 0&&(n.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(r.assignTexture(n,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(n.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(r.assignTexture(n,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(r.assignTexture(n,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;n.clearcoatNormalScale=new _e(a,a)}return Promise.all(s)}}class ffe{constructor(e){this.parser=e,this.name=Xt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Xo}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.iridescenceFactor!==void 0&&(n.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(r.assignTexture(n,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(n.iridescenceIOR=o.iridescenceIor),n.iridescenceThicknessRange===void 0&&(n.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(n.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(n.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(r.assignTexture(n,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class dfe{constructor(e){this.parser=e,this.name=Xt.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Xo}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];n.sheenColor=new ze(0,0,0),n.sheenRoughness=0,n.sheen=1;const o=i.extensions[this.name];return o.sheenColorFactor!==void 0&&n.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(n.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(r.assignTexture(n,"sheenColorMap",o.sheenColorTexture,3001)),o.sheenRoughnessTexture!==void 0&&s.push(r.assignTexture(n,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class pfe{constructor(e){this.parser=e,this.name=Xt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Xo}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.transmissionFactor!==void 0&&(n.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(r.assignTexture(n,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class mfe{constructor(e){this.parser=e,this.name=Xt.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Xo}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];n.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(r.assignTexture(n,"thicknessMap",o.thicknessTexture)),n.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return n.attenuationColor=new ze(a[0],a[1],a[2]),Promise.all(s)}}class gfe{constructor(e){this.parser=e,this.name=Xt.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Xo}extendMaterialParams(e,n){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return n.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class yfe{constructor(e){this.parser=e,this.name=Xt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Xo}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];n.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(r.assignTexture(n,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return n.specularColor=new ze(a[0],a[1],a[2]),o.specularColorTexture!==void 0&&s.push(r.assignTexture(n,"specularColorMap",o.specularColorTexture,3001)),Promise.all(s)}}class vfe{constructor(e){this.parser=e,this.name=Xt.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Xo}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.anisotropyStrength!==void 0&&(n.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(n.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(r.assignTexture(n,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class _fe{constructor(e){this.parser=e,this.name=Xt.KHR_TEXTURE_BASISU}loadTexture(e){const n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],o=n.options.ktx2Loader;if(!o){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return n.loadTextureImage(e,s.source,o)}}class xfe{constructor(e){this.parser=e,this.name=Xt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const n=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[n])return null;const o=s.extensions[n],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const c=r.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class Sfe{constructor(e){this.parser=e,this.name=Xt.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const n=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[n])return null;const o=s.extensions[n],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const c=r.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class Afe{constructor(e){this.name=Xt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const n=this.parser.json,r=n.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const i=r.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=i.byteOffset||0,c=i.byteLength||0,u=i.count,f=i.byteStride,p=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,f,p,i.mode,i.filter).then(function(m){return m.buffer}):o.ready.then(function(){const m=new ArrayBuffer(u*f);return o.decodeGltfBuffer(new Uint8Array(m),u,f,p,i.mode,i.filter),m})})}else return null}}class wfe{constructor(e){this.name=Xt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const n=this.parser.json,r=n.nodes[e];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const i=n.meshes[r.mesh];for(const c of i.primitives)if(c.mode!==Ss.TRIANGLES&&c.mode!==Ss.TRIANGLE_STRIP&&c.mode!==Ss.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=r.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(u=>(l[c]=u,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const u=c.pop(),f=u.isGroup?u.children:[u],p=c[0].count,m=[];for(const y of f){const S=new ft,v=new k,g=new Tr,_=new k(1,1,1),A=new VR(y.geometry,y.material,p);for(let E=0;E<p;E++)l.TRANSLATION&&v.fromBufferAttribute(l.TRANSLATION,E),l.ROTATION&&g.fromBufferAttribute(l.ROTATION,E),l.SCALE&&_.fromBufferAttribute(l.SCALE,E),A.setMatrixAt(E,S.compose(v,g,_));for(const E in l)E!=="TRANSLATION"&&E!=="ROTATION"&&E!=="SCALE"&&y.geometry.setAttribute(E,l[E]);Jt.prototype.copy.call(A,y),this.parser.assignFinalMaterial(A),m.push(A)}return u.isGroup?(u.clear(),u.add(...m),u):m[0]}))}}const Oz="glTF",tp=12,OO={JSON:1313821514,BIN:5130562};class Efe{constructor(e){this.name=Xt.KHR_BINARY_GLTF,this.content=null,this.body=null;const n=new DataView(e,0,tp);if(this.header={magic:Fo.decodeText(new Uint8Array(e.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==Oz)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-tp,i=new DataView(e,tp);let s=0;for(;s<r;){const o=i.getUint32(s,!0);s+=4;const a=i.getUint32(s,!0);if(s+=4,a===OO.JSON){const l=new Uint8Array(e,tp+s,o);this.content=Fo.decodeText(l)}else if(a===OO.BIN){const l=tp+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Mfe{constructor(e,n){if(!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Xt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=n,this.dracoLoader.preload()}decodePrimitive(e,n){const r=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const u in o){const f=NC[u]||u.toLowerCase();a[f]=o[u]}for(const u in e.attributes){const f=NC[u]||u.toLowerCase();if(o[u]!==void 0){const p=r.accessors[e.attributes[u]],m=df[p.componentType];c[f]=m.name,l[f]=p.normalized===!0}}return n.getDependency("bufferView",s).then(function(u){return new Promise(function(f){i.decodeDracoFile(u,function(p){for(const m in p.attributes){const y=p.attributes[m],S=l[m];S!==void 0&&(y.normalized=S)}f(p)},a,c)})})}}class Tfe{constructor(){this.name=Xt.KHR_TEXTURE_TRANSFORM}extendTexture(e,n){return(n.texCoord===void 0||n.texCoord===e.channel)&&n.offset===void 0&&n.rotation===void 0&&n.scale===void 0||(e=e.clone(),n.texCoord!==void 0&&(e.channel=n.texCoord),n.offset!==void 0&&e.offset.fromArray(n.offset),n.rotation!==void 0&&(e.rotation=n.rotation),n.scale!==void 0&&e.repeat.fromArray(n.scale),e.needsUpdate=!0),e}}class Cfe{constructor(){this.name=Xt.KHR_MESH_QUANTIZATION}}class Fz extends ld{constructor(e,n,r,i){super(e,n,r,i)}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let o=0;o!==i;o++)n[o]=r[s+o];return n}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,u=i-n,f=(r-n)/u,p=f*f,m=p*f,y=e*c,S=y-c,v=-2*m+3*p,g=m-p,_=1-v,A=g-p+f;for(let E=0;E!==a;E++){const b=o[S+E+a],C=o[S+E+l]*u,P=o[y+E+a],L=o[y+E]*u;s[E]=_*b+A*C+v*P+g*L}return s}}const bfe=new Tr;class Rfe extends Fz{interpolate_(e,n,r,i){const s=super.interpolate_(e,n,r,i);return bfe.fromArray(s).normalize().toArray(s),s}}const Ss={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},df={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},FO={9728:zn,9729:Sn,9984:Om,9985:hf,9986:ul,9987:Is},kO={33071:kr,33648:Bf,10497:Gl},ME={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},NC={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...nfe>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Qa={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Pfe={CUBICSPLINE:void 0,LINEAR:xu,STEP:Of},TE={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Ife(t){return t.DefaultMaterial===void 0&&(t.DefaultMaterial=new Fg({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Ho})),t.DefaultMaterial}function Ac(t,e,n){for(const r in n.extensions)t[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=n.extensions[r])}function sl(t,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(t.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Lfe(t,e,n){let r=!1,i=!1,s=!1;for(let c=0,u=e.length;c<u;c++){const f=e[c];if(f.POSITION!==void 0&&(r=!0),f.NORMAL!==void 0&&(i=!0),f.COLOR_0!==void 0&&(s=!0),r&&i&&s)break}if(!r&&!i&&!s)return Promise.resolve(t);const o=[],a=[],l=[];for(let c=0,u=e.length;c<u;c++){const f=e[c];if(r){const p=f.POSITION!==void 0?n.getDependency("accessor",f.POSITION):t.attributes.position;o.push(p)}if(i){const p=f.NORMAL!==void 0?n.getDependency("accessor",f.NORMAL):t.attributes.normal;a.push(p)}if(s){const p=f.COLOR_0!==void 0?n.getDependency("accessor",f.COLOR_0):t.attributes.color;l.push(p)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[0],f=c[1],p=c[2];return r&&(t.morphAttributes.position=u),i&&(t.morphAttributes.normal=f),s&&(t.morphAttributes.color=p),t.morphTargetsRelative=!0,t})}function Dfe(t,e){if(t.updateMorphTargets(),e.weights!==void 0)for(let n=0,r=e.weights.length;n<r;n++)t.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){const n=e.extras.targetNames;if(t.morphTargetInfluences.length===n.length){t.morphTargetDictionary={};for(let r=0,i=n.length;r<i;r++)t.morphTargetDictionary[n[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Bfe(t){let e;const n=t.extensions&&t.extensions[Xt.KHR_DRACO_MESH_COMPRESSION];if(n?e="draco:"+n.bufferView+":"+n.indices+":"+CE(n.attributes):e=t.indices+":"+CE(t.attributes)+":"+t.mode,t.targets!==void 0)for(let r=0,i=t.targets.length;r<i;r++)e+=":"+CE(t.targets[r]);return e}function CE(t){let e="";const n=Object.keys(t).sort();for(let r=0,i=n.length;r<i;r++)e+=n[r]+":"+t[n[r]]+";";return e}function OC(t){switch(t){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Nfe(t){return t.search(/\.jpe?g($|\?)/i)>0||t.search(/^data\:image\/jpeg/)===0?"image/jpeg":t.search(/\.webp($|\?)/i)>0||t.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const Ofe=new ft;class Ffe{constructor(e={},n={}){this.json=e,this.extensions={},this.plugins={},this.options=n,this.cache=new afe,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,i=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,s=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||r||i&&s<98?this.textureLoader=new $8(this.options.manager):this.textureLoader=new nz(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new is(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,n){const r=this,i=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(o){const a={scene:o[0][i.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:i.asset,parser:r,userData:{}};Ac(s,a,i),sl(a,i),Promise.all(r._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(n)}_markDefs(){const e=this.json.nodes||[],n=this.json.skins||[],r=this.json.meshes||[];for(let i=0,s=n.length;i<s;i++){const o=n[i].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const o=e[i];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(r[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,n){n!==void 0&&(e.refs[n]===void 0&&(e.refs[n]=e.uses[n]=0),e.refs[n]++)}_getNodeRef(e,n,r){if(e.refs[n]<=1)return r;const i=r.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,u]of o.children.entries())s(u,a.children[c])};return s(r,i),i.name+="_instance_"+e.uses[n]++,i}_invokeOne(e){const n=Object.values(this.plugins);n.push(this);for(let r=0;r<n.length;r++){const i=e(n[r]);if(i)return i}return null}_invokeAll(e){const n=Object.values(this.plugins);n.unshift(this);const r=[];for(let i=0;i<n.length;i++){const s=e(n[i]);s&&r.push(s)}return r}getDependency(e,n){const r=e+":"+n;let i=this.cache.get(r);if(!i){switch(e){case"scene":i=this.loadScene(n);break;case"node":i=this._invokeOne(function(s){return s.loadNode&&s.loadNode(n)});break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(n)});break;case"accessor":i=this.loadAccessor(n);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(n)});break;case"buffer":i=this.loadBuffer(n);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(n)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(n)});break;case"skin":i=this.loadSkin(n);break;case"animation":i=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(n)});break;case"camera":i=this.loadCamera(n);break;default:if(i=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,n)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(r,i)}return i}getDependencies(e){let n=this.cache.get(e);if(!n){const r=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];n=Promise.all(i.map(function(s,o){return r.getDependency(e,o)})),this.cache.add(e,n)}return n}loadBuffer(e){const n=this.json.buffers[e],r=this.fileLoader;if(n.type&&n.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(n.uri===void 0&&e===0)return Promise.resolve(this.extensions[Xt.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,o){r.load(Fo.resolveURL(n.uri,i.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})}loadBufferView(e){const n=this.json.bufferViews[e];return this.getDependency("buffer",n.buffer).then(function(r){const i=n.byteLength||0,s=n.byteOffset||0;return r.slice(s,s+i)})}loadAccessor(e){const n=this,r=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){const o=ME[i.type],a=df[i.componentType],l=i.normalized===!0,c=new a(i.count*o);return Promise.resolve(new qt(c,o,l))}const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=ME[i.type],c=df[i.componentType],u=c.BYTES_PER_ELEMENT,f=u*l,p=i.byteOffset||0,m=i.bufferView!==void 0?r.bufferViews[i.bufferView].byteStride:void 0,y=i.normalized===!0;let S,v;if(m&&m!==f){const g=Math.floor(p/m),_="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+g+":"+i.count;let A=n.cache.get(_);A||(S=new c(a,g*m,i.count*m/u),A=new Lg(S,m/u),n.cache.add(_,A)),v=new jl(A,l,p%m/u,y)}else a===null?S=new c(i.count*l):S=new c(a,p,i.count*l),v=new qt(S,l,y);if(i.sparse!==void 0){const g=ME.SCALAR,_=df[i.sparse.indices.componentType],A=i.sparse.indices.byteOffset||0,E=i.sparse.values.byteOffset||0,b=new _(o[1],A,i.sparse.count*g),C=new c(o[2],E,i.sparse.count*l);a!==null&&(v=new qt(v.array.slice(),v.itemSize,v.normalized));for(let P=0,L=b.length;P<L;P++){const N=b[P];if(v.setX(N,C[P*l]),l>=2&&v.setY(N,C[P*l+1]),l>=3&&v.setZ(N,C[P*l+2]),l>=4&&v.setW(N,C[P*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return v})}loadTexture(e){const n=this.json,r=this.options,s=n.textures[e].source,o=n.images[s];let a=this.textureLoader;if(o.uri){const l=r.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,n,r){const i=this,s=this.json,o=s.textures[e],a=s.images[n],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(n,r).then(function(u){u.flipY=!1,u.name=o.name||a.name||"",u.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(u.name=a.uri);const p=(s.samplers||{})[o.sampler]||{};return u.magFilter=FO[p.magFilter]||Sn,u.minFilter=FO[p.minFilter]||Is,u.wrapS=kO[p.wrapS]||Gl,u.wrapT=kO[p.wrapT]||Gl,i.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,n){const r=this,i=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(f=>f.clone());const o=i.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=r.getDependency("bufferView",o.bufferView).then(function(f){c=!0;const p=new Blob([f],{type:o.mimeType});return l=a.createObjectURL(p),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(f){return new Promise(function(p,m){let y=p;n.isImageBitmapLoader===!0&&(y=function(S){const v=new Mn(S);v.needsUpdate=!0,p(v)}),n.load(Fo.resolveURL(f,s.path),y,void 0,m)})}).then(function(f){return c===!0&&a.revokeObjectURL(l),f.userData.mimeType=o.mimeType||Nfe(o.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),f});return this.sourceCache[e]=u,u}assignTexture(e,n,r,i){const s=this;return this.getDependency("texture",r.index).then(function(o){if(!o)return null;if(r.texCoord!==void 0&&r.texCoord>0&&(o=o.clone(),o.channel=r.texCoord),s.extensions[Xt.KHR_TEXTURE_TRANSFORM]){const a=r.extensions!==void 0?r.extensions[Xt.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[Xt.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return i!==void 0&&("colorSpace"in o?o.colorSpace=i===3001?"srgb":"srgb-linear":o.encoding=i),e[n]=o,o})}assignFinalMaterial(e){const n=e.geometry;let r=e.material;const i=n.attributes.tangent===void 0,s=n.attributes.color!==void 0,o=n.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new U1,lr.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,l.sizeAttenuation=!1,this.cache.add(a,l)),r=l}else if(e.isLine){const a="LineBasicMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new li,lr.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,this.cache.add(a,l)),r=l}if(i||s||o){let a="ClonedMaterial:"+r.uuid+":";i&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=r.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),i&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(r))),r=l}e.material=r}getMaterialType(){return Fg}loadMaterial(e){const n=this,r=this.json,i=this.extensions,s=r.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[Xt.KHR_MATERIALS_UNLIT]){const f=i[Xt.KHR_MATERIALS_UNLIT];o=f.getMaterialType(),c.push(f.extendParams(a,s,n))}else{const f=s.pbrMetallicRoughness||{};if(a.color=new ze(1,1,1),a.opacity=1,Array.isArray(f.baseColorFactor)){const p=f.baseColorFactor;a.color.fromArray(p),a.opacity=p[3]}f.baseColorTexture!==void 0&&c.push(n.assignTexture(a,"map",f.baseColorTexture,3001)),a.metalness=f.metallicFactor!==void 0?f.metallicFactor:1,a.roughness=f.roughnessFactor!==void 0?f.roughnessFactor:1,f.metallicRoughnessTexture!==void 0&&(c.push(n.assignTexture(a,"metalnessMap",f.metallicRoughnessTexture)),c.push(n.assignTexture(a,"roughnessMap",f.metallicRoughnessTexture))),o=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=Cs);const u=s.alphaMode||TE.OPAQUE;if(u===TE.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,u===TE.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==Yi&&(c.push(n.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new _e(1,1),s.normalTexture.scale!==void 0)){const f=s.normalTexture.scale;a.normalScale.set(f,f)}return s.occlusionTexture!==void 0&&o!==Yi&&(c.push(n.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==Yi&&(a.emissive=new ze().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&o!==Yi&&c.push(n.assignTexture(a,"emissiveMap",s.emissiveTexture,3001)),Promise.all(c).then(function(){const f=new o(a);return s.name&&(f.name=s.name),sl(f,s),n.associations.set(f,{materials:e}),s.extensions&&Ac(i,f,s),f})}createUniqueName(e){const n=$t.sanitizeNodeName(e||"");return n in this.nodeNamesUsed?n+"_"+ ++this.nodeNamesUsed[n]:(this.nodeNamesUsed[n]=0,n)}loadGeometries(e){const n=this,r=this.extensions,i=this.primitiveCache;function s(a){return r[Xt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,n).then(function(l){return UO(l,a,n)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],u=Bfe(c),f=i[u];if(f)o.push(f.promise);else{let p;c.extensions&&c.extensions[Xt.KHR_DRACO_MESH_COMPRESSION]?p=s(c):p=UO(new It,c,n),i[u]={primitive:c,promise:p},o.push(p)}}return Promise.all(o)}loadMesh(e){const n=this,r=this.json,i=this.extensions,s=r.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const u=o[l].material===void 0?Ife(this.cache):this.getDependency("material",o[l].material);a.push(u)}return a.push(n.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],f=[];for(let m=0,y=u.length;m<y;m++){const S=u[m],v=o[m];let g;const _=c[m];if(v.mode===Ss.TRIANGLES||v.mode===Ss.TRIANGLE_STRIP||v.mode===Ss.TRIANGLE_FAN||v.mode===void 0)g=s.isSkinnedMesh===!0?new UR(S,_):new Yn(S,_),g.isSkinnedMesh===!0&&g.normalizeSkinWeights(),v.mode===Ss.TRIANGLE_STRIP?g.geometry=DO(g.geometry,wR):v.mode===Ss.TRIANGLE_FAN&&(g.geometry=DO(g.geometry,ax));else if(v.mode===Ss.LINES)g=new oo(S,_);else if(v.mode===Ss.LINE_STRIP)g=new Ia(S,_);else if(v.mode===Ss.LINE_LOOP)g=new zR(S,_);else if(v.mode===Ss.POINTS)g=new HR(S,_);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+v.mode);Object.keys(g.geometry.morphAttributes).length>0&&Dfe(g,s),g.name=n.createUniqueName(s.name||"mesh_"+e),sl(g,s),v.extensions&&Ac(i,g,v),n.assignFinalMaterial(g),f.push(g)}for(let m=0,y=f.length;m<y;m++)n.associations.set(f[m],{meshes:e,primitives:m});if(f.length===1)return s.extensions&&Ac(i,f[0],s),f[0];const p=new ga;s.extensions&&Ac(i,p,s),n.associations.set(p,{meshes:e});for(let m=0,y=f.length;m<y;m++)p.add(f[m]);return p})}loadCamera(e){let n;const r=this.json.cameras[e],i=r[r.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?n=new wn(s8.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):r.type==="orthographic"&&(n=new Ls(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),r.name&&(n.name=this.createUniqueName(r.name)),sl(n,r),Promise.resolve(n)}loadSkin(e){const n=this.json.skins[e],r=[];for(let i=0,s=n.joints.length;i<s;i++)r.push(this._loadNodeShallow(n.joints[i]));return n.inverseBindMatrices!==void 0?r.push(this.getDependency("accessor",n.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(i){const s=i.pop(),o=i,a=[],l=[];for(let c=0,u=o.length;c<u;c++){const f=o[c];if(f){a.push(f);const p=new ft;s!==null&&p.fromArray(s.array,c*16),l.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',n.joints[c])}return new Dg(a,l)})}loadAnimation(e){const r=this.json.animations[e],i=r.name?r.name:"animation_"+e,s=[],o=[],a=[],l=[],c=[];for(let u=0,f=r.channels.length;u<f;u++){const p=r.channels[u],m=r.samplers[p.sampler],y=p.target,S=y.node,v=r.parameters!==void 0?r.parameters[m.input]:m.input,g=r.parameters!==void 0?r.parameters[m.output]:m.output;y.node!==void 0&&(s.push(this.getDependency("node",S)),o.push(this.getDependency("accessor",v)),a.push(this.getDependency("accessor",g)),l.push(m),c.push(y))}return Promise.all([Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c)]).then(function(u){const f=u[0],p=u[1],m=u[2],y=u[3],S=u[4],v=[];for(let g=0,_=f.length;g<_;g++){const A=f[g],E=p[g],b=m[g],C=y[g],P=S[g];if(A===void 0)continue;A.updateMatrix();let L;switch(Qa[P.path]){case Qa.weights:L=Vf;break;case Qa.rotation:L=Wl;break;case Qa.position:case Qa.scale:default:L=zf;break}const N=A.name?A.name:A.uuid,T=C.interpolation!==void 0?Pfe[C.interpolation]:xu,D=[];Qa[P.path]===Qa.weights?A.traverse(function(j){j.morphTargetInfluences&&D.push(j.name?j.name:j.uuid)}):D.push(N);let z=b.array;if(b.normalized){const j=OC(z.constructor),H=new Float32Array(z.length);for(let q=0,Z=z.length;q<Z;q++)H[q]=z[q]*j;z=H}for(let j=0,H=D.length;j<H;j++){const q=new L(D[j]+"."+Qa[P.path],E.array,z,T);C.interpolation==="CUBICSPLINE"&&(q.createInterpolant=function(ae){const O=this instanceof Wl?Rfe:Fz;return new O(this.times,this.values,this.getValueSize()/3,ae)},q.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),v.push(q)}}return new Hf(i,void 0,v)})}createNodeMesh(e){const n=this.json,r=this,i=n.nodes[e];return i.mesh===void 0?null:r.getDependency("mesh",i.mesh).then(function(s){const o=r._getNodeRef(r.meshCache,i.mesh,s);return i.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=i.weights.length;l<c;l++)a.morphTargetInfluences[l]=i.weights[l]}),o})}loadNode(e){const n=this.json,r=this,i=n.nodes[e],s=r._loadNodeShallow(e),o=[],a=i.children||[];for(let c=0,u=a.length;c<u;c++)o.push(r.getDependency("node",a[c]));const l=i.skin===void 0?Promise.resolve(null):r.getDependency("skin",i.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const u=c[0],f=c[1],p=c[2];p!==null&&u.traverse(function(m){m.isSkinnedMesh&&m.bind(p,Ofe)});for(let m=0,y=f.length;m<y;m++)u.add(f[m]);return u})}_loadNodeShallow(e){const n=this.json,r=this.extensions,i=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=n.nodes[e],o=s.name?i.createUniqueName(s.name):"",a=[],l=i._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(i.getDependency("camera",s.camera).then(function(c){return i._getNodeRef(i.cameraCache,s.camera,c)})),i._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let u;if(s.isBone===!0?u=new k1:c.length>1?u=new ga:c.length===1?u=c[0]:u=new Jt,u!==c[0])for(let f=0,p=c.length;f<p;f++)u.add(c[f]);if(s.name&&(u.userData.name=s.name,u.name=o),sl(u,s),s.extensions&&Ac(r,u,s),s.matrix!==void 0){const f=new ft;f.fromArray(s.matrix),u.applyMatrix4(f)}else s.translation!==void 0&&u.position.fromArray(s.translation),s.rotation!==void 0&&u.quaternion.fromArray(s.rotation),s.scale!==void 0&&u.scale.fromArray(s.scale);return i.associations.has(u)||i.associations.set(u,{}),i.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const n=this.extensions,r=this.json.scenes[e],i=this,s=new ga;r.name&&(s.name=i.createUniqueName(r.name)),sl(s,r),r.extensions&&Ac(n,s,r);const o=r.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(i.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let u=0,f=l.length;u<f;u++)s.add(l[u]);const c=u=>{const f=new Map;for(const[p,m]of i.associations)(p instanceof lr||p instanceof Mn)&&f.set(p,m);return u.traverse(p=>{const m=i.associations.get(p);m!=null&&f.set(p,m)}),f};return i.associations=c(s),s})}}function kfe(t,e,n){const r=e.attributes,i=new si;if(r.POSITION!==void 0){const a=n.json.accessors[r.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(i.set(new k(l[0],l[1],l[2]),new k(c[0],c[1],c[2])),a.normalized){const u=OC(df[a.componentType]);i.min.multiplyScalar(u),i.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new k,l=new k;for(let c=0,u=s.length;c<u;c++){const f=s[c];if(f.POSITION!==void 0){const p=n.json.accessors[f.POSITION],m=p.min,y=p.max;if(m!==void 0&&y!==void 0){if(l.setX(Math.max(Math.abs(m[0]),Math.abs(y[0]))),l.setY(Math.max(Math.abs(m[1]),Math.abs(y[1]))),l.setZ(Math.max(Math.abs(m[2]),Math.abs(y[2]))),p.normalized){const S=OC(df[p.componentType]);l.multiplyScalar(S)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(a)}t.boundingBox=i;const o=new Hr;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,t.boundingSphere=o}function UO(t,e,n){const r=e.attributes,i=[];function s(o,a){return n.getDependency("accessor",o).then(function(l){t.setAttribute(a,l)})}for(const o in r){const a=NC[o]||o.toLowerCase();a in t.attributes||i.push(s(r[o],a))}if(e.indices!==void 0&&!t.index){const o=n.getDependency("accessor",e.indices).then(function(a){t.setIndex(a)});i.push(o)}return sl(t,e),kfe(t,e,n),Promise.all(i).then(function(){return e.targets!==void 0?Lfe(t,e.targets,n):t})}const bE=new WeakMap;class Ufe extends ci{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,n,r,i){const s=new is(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(n).catch(i)},r,i)}decodeDracoFile(e,n,r,i){const s={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,s).then(n)}decodeGeometry(e,n){for(const l in n.attributeTypes){const c=n.attributeTypes[l];c.BYTES_PER_ELEMENT!==void 0&&(n.attributeTypes[l]=c.name)}const r=JSON.stringify(n);if(bE.has(e)){const l=bE.get(e);if(l.key===r)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(i=l,new Promise((c,u)=>{i._callbacks[s]={resolve:c,reject:u},i.postMessage({type:"decode",id:s,taskConfig:n,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{i&&s&&this._releaseTask(i,s)}),bE.set(e,{key:r,promise:a}),a}_createGeometry(e){const n=new It;e.index&&n.setIndex(new qt(e.index.array,1));for(let r=0;r<e.attributes.length;r++){const i=e.attributes[r],s=i.name,o=i.array,a=i.itemSize;n.setAttribute(s,new qt(o,a))}return n}_loadLibrary(e,n){const r=new is(this.manager);return r.setPath(this.decoderPath),r.setResponseType(n),r.setWithCredentials(this.withCredentials),new Promise((i,s)=>{r.load(e,i,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",n=[];return e?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then(r=>{const i=r[0];e||(this.decoderConfig.wasmBinary=r[1]);const s=Vfe.toString(),o=["/* draco decoder */",i,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,n){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(s){const o=s.data;switch(o.type){case"decode":i._callbacks[o.id].resolve(o);break;case"error":i._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,s){return i._taskLoad>s._taskLoad?-1:1});const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=n,r._taskLoad+=n,r})}_releaseTask(e,n){e._taskLoad-=e._taskCosts[n],delete e._callbacks[n],delete e._taskCosts[n]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function Vfe(){let t,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":t=a.decoderConfig,e=new Promise(function(u){t.onModuleLoaded=function(f){u({draco:f})},DracoDecoderModule(t)});break;case"decode":const l=a.buffer,c=a.taskConfig;e.then(u=>{const f=u.draco,p=new f.Decoder,m=new f.DecoderBuffer;m.Init(new Int8Array(l),l.byteLength);try{const y=n(f,p,m,c),S=y.attributes.map(v=>v.array.buffer);y.index&&S.push(y.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:y},S)}catch(y){console.error(y),self.postMessage({type:"error",id:a.id,error:y.message})}finally{f.destroy(m),f.destroy(p)}});break}};function n(o,a,l,c){const u=c.attributeIDs,f=c.attributeTypes;let p,m;const y=a.GetEncodedGeometryType(l);if(y===o.TRIANGULAR_MESH)p=new o.Mesh,m=a.DecodeBufferToMesh(l,p);else if(y===o.POINT_CLOUD)p=new o.PointCloud,m=a.DecodeBufferToPointCloud(l,p);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!m.ok()||p.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+m.error_msg());const S={index:null,attributes:[]};for(const v in u){const g=self[f[v]];let _,A;if(c.useUniqueIDs)A=u[v],_=a.GetAttributeByUniqueId(p,A);else{if(A=a.GetAttributeId(p,o[u[v]]),A===-1)continue;_=a.GetAttribute(p,A)}S.attributes.push(i(o,a,p,v,g,_))}return y===o.TRIANGULAR_MESH&&(S.index=r(o,a,p)),o.destroy(p),S}function r(o,a,l){const u=l.num_faces()*3,f=u*4,p=o._malloc(f);a.GetTrianglesUInt32Array(l,f,p);const m=new Uint32Array(o.HEAPF32.buffer,p,u).slice();return o._free(p),{array:m,itemSize:1}}function i(o,a,l,c,u,f){const p=f.num_components(),y=l.num_points()*p,S=y*u.BYTES_PER_ELEMENT,v=s(o,u),g=o._malloc(S);a.GetAttributeDataArrayForAllPoints(l,f,v,S,g);const _=new u(o.HEAPF32.buffer,g,y).slice();return o._free(g),{name:c,array:_,itemSize:p}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let mv;const RE=()=>{if(mv)return mv;const t="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",n=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),r=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let i=t;WebAssembly.validate(n)&&(i=e);let s;const o=WebAssembly.instantiate(a(i),{}).then(f=>{s=f.instance,s.exports.__wasm_call_ctors()});function a(f){const p=new Uint8Array(f.length);for(let y=0;y<f.length;++y){const S=f.charCodeAt(y);p[y]=S>96?S-71:S>64?S-65:S>47?S+4:S>46?63:62}let m=0;for(let y=0;y<f.length;++y)p[m++]=p[y]<60?r[p[y]]:(p[y]-60)*64+p[++y];return p.buffer.slice(0,m)}function l(f,p,m,y,S,v){const g=s.exports.sbrk,_=m+3&-4,A=g(_*y),E=g(S.length),b=new Uint8Array(s.exports.memory.buffer);b.set(S,E);const C=f(A,m,y,E,S.length);if(C===0&&v&&v(A,_,y),p.set(b.subarray(A,A+m*y)),g(A-g(0)),C!==0)throw new Error(`Malformed buffer data: ${C}`)}const c={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},u={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return mv={ready:o,supported:!0,decodeVertexBuffer(f,p,m,y,S){l(s.exports.meshopt_decodeVertexBuffer,f,p,m,y,s.exports[c[S]])},decodeIndexBuffer(f,p,m,y){l(s.exports.meshopt_decodeIndexBuffer,f,p,m,y)},decodeIndexSequence(f,p,m,y){l(s.exports.meshopt_decodeIndexSequence,f,p,m,y)},decodeGltfBuffer(f,p,m,y,S,v){l(s.exports[u[S]],f,p,m,y,s.exports[c[v]])}},mv};let gv=null,kz="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function Uz(t,e,n){return r=>{n&&n(r),t&&(gv||(gv=new Ufe),gv.setDecoderPath(typeof t=="string"?t:kz),r.setDRACOLoader(gv)),e&&r.setMeshoptDecoder(typeof RE=="function"?RE():RE)}}function nS(t,e=!0,n=!0,r){return Ug(hP,t,Uz(e,n,r))}nS.preload=(t,e=!0,n=!0,r)=>Ug.preload(hP,t,Uz(e,n,r));nS.clear=t=>Ug.clear(hP,t);nS.setDecoderPath=t=>{kz=t};const zfe=$.forwardRef(({makeDefault:t,camera:e,regress:n,domElement:r,enableDamping:i=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...c},u)=>{const f=As(C=>C.invalidate),p=As(C=>C.camera),m=As(C=>C.gl),y=As(C=>C.events),S=As(C=>C.setEvents),v=As(C=>C.set),g=As(C=>C.get),_=As(C=>C.performance),A=e||p,E=r||y.connected||m.domElement,b=$.useMemo(()=>new ofe(A),[A]);return bz(()=>{b.enabled&&b.update()},-1),$.useEffect(()=>(s&&b.connect(s===!0?E:s),b.connect(E),()=>void b.dispose()),[s,E,n,b,f]),$.useEffect(()=>{const C=N=>{f(),n&&_.regress(),o&&o(N)},P=N=>{a&&a(N)},L=N=>{l&&l(N)};return b.addEventListener("change",C),b.addEventListener("start",P),b.addEventListener("end",L),()=>{b.removeEventListener("start",P),b.removeEventListener("end",L),b.removeEventListener("change",C)}},[o,a,l,b,f,S]),$.useEffect(()=>{if(t){const C=g().controls;return v({controls:b}),()=>v({controls:C})}},[t,b]),$.createElement("primitive",Df({ref:u,object:b,enableDamping:i},c))});function Hfe({all:t,scene:e,camera:n}){const r=As(({gl:o})=>o),i=As(({camera:o})=>o),s=As(({scene:o})=>o);return $.useLayoutEffect(()=>{const o=[];t&&(e||s).traverse(c=>{c.visible===!1&&(o.push(c),c.visible=!0)}),r.compile(e||s,n||i);const a=new LR(128);new IR(.01,1e5,a).update(r,e||s),a.dispose(),o.forEach(c=>c.visible=!1)},[]),null}const Gfe=()=>{const{progress:t}=tfe();return R.jsxs(efe,{as:"div",center:!0,style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[R.jsx("span",{className:"canvas-loader"}),R.jsxs("p",{style:{fontSize:14,color:"#F1F1F1",fontWeight:800,marginTop:40},children:[t.toFixed(2),"%"]})]})};var jfe=Object.defineProperty,Wfe=(t,e)=>{for(var n in e)jfe(t,n,{get:e[n],enumerable:!0})},so={};Wfe(so,{assign:()=>$fe,colors:()=>Dl,createStringInterpolator:()=>vP,skipAnimation:()=>Xz,to:()=>Wz,willAdvance:()=>_P});var fP=Hg(),Ct=t=>zg(t,fP),dP=Hg();Ct.write=t=>zg(t,dP);var rS=Hg();Ct.onStart=t=>zg(t,rS);var pP=Hg();Ct.onFrame=t=>zg(t,pP);var mP=Hg();Ct.onFinish=t=>zg(t,mP);var pf=[];Ct.setTimeout=(t,e)=>{const n=Ct.now()+e,r=()=>{const s=pf.findIndex(o=>o.cancel==r);~s&&pf.splice(s,1),yl-=~s?1:0},i={time:n,handler:t,cancel:r};return pf.splice(Vz(n),0,i),yl+=1,zz(),i};var Vz=t=>~(~pf.findIndex(e=>e.time>t)||~pf.length);Ct.cancel=t=>{rS.delete(t),pP.delete(t),mP.delete(t),fP.delete(t),dP.delete(t)};Ct.sync=t=>{FC=!0,Ct.batchedUpdates(t),FC=!1};Ct.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function r(...i){e=i,Ct.onStart(n)}return r.handler=t,r.cancel=()=>{rS.delete(n),e=null},r};var gP=typeof window<"u"?window.requestAnimationFrame:()=>{};Ct.use=t=>gP=t;Ct.now=typeof performance<"u"?()=>performance.now():Date.now;Ct.batchedUpdates=t=>t();Ct.catch=console.error;Ct.frameLoop="always";Ct.advance=()=>{Ct.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):Gz()};var gl=-1,yl=0,FC=!1;function zg(t,e){FC?(e.delete(t),t(0)):(e.add(t),zz())}function zz(){gl<0&&(gl=0,Ct.frameLoop!=="demand"&&gP(Hz))}function Xfe(){gl=-1}function Hz(){~gl&&(gP(Hz),Ct.batchedUpdates(Gz))}function Gz(){const t=gl;gl=Ct.now();const e=Vz(gl);if(e&&(jz(pf.splice(0,e),n=>n.handler()),yl-=e),!yl){Xfe();return}rS.flush(),fP.flush(t?Math.min(64,gl-t):16.667),pP.flush(),dP.flush(),mP.flush()}function Hg(){let t=new Set,e=t;return{add(n){yl+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return yl-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,yl-=e.size,jz(e,r=>r(n)&&t.add(r)),yl+=t.size,e=t)}}}function jz(t,e){t.forEach(n=>{try{e(n)}catch(r){Ct.catch(r)}})}function kC(){}var Kfe=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),Oe={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function la(t,e){if(Oe.arr(t)){if(!Oe.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var an=(t,e)=>t.forEach(e);function La(t,e,n){if(Oe.arr(t)){for(let r=0;r<t.length;r++)e.call(n,t[r],`${r}`);return}for(const r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r)}var Ds=t=>Oe.und(t)?[]:Oe.arr(t)?t:[t];function zp(t,e){if(t.size){const n=Array.from(t);t.clear(),an(n,e)}}var _p=(t,...e)=>zp(t,n=>n(...e)),yP=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),vP,Wz,Dl=null,Xz=!1,_P=kC,$fe=t=>{t.to&&(Wz=t.to),t.now&&(Ct.now=t.now),t.colors!==void 0&&(Dl=t.colors),t.skipAnimation!=null&&(Xz=t.skipAnimation),t.createStringInterpolator&&(vP=t.createStringInterpolator),t.requestAnimationFrame&&Ct.use(t.requestAnimationFrame),t.batchedUpdates&&(Ct.batchedUpdates=t.batchedUpdates),t.willAdvance&&(_P=t.willAdvance),t.frameLoop&&(Ct.frameLoop=t.frameLoop)},Hp=new Set,Rs=[],PE=[],dx=0,iS={get idle(){return!Hp.size&&!Rs.length},start(t){dx>t.priority?(Hp.add(t),Ct.onStart(Jfe)):(Kz(t),Ct(UC))},advance:UC,sort(t){if(dx)Ct.onFrame(()=>iS.sort(t));else{const e=Rs.indexOf(t);~e&&(Rs.splice(e,1),$z(t))}},clear(){Rs=[],Hp.clear()}};function Jfe(){Hp.forEach(Kz),Hp.clear(),Ct(UC)}function Kz(t){Rs.includes(t)||$z(t)}function $z(t){Rs.splice(qfe(Rs,e=>e.priority>t.priority),0,t)}function UC(t){const e=PE;for(let n=0;n<Rs.length;n++){const r=Rs[n];dx=r.priority,r.idle||(_P(r),r.advance(t),r.idle||e.push(r))}return dx=0,PE=Rs,PE.length=0,Rs=e,Rs.length>0}function qfe(t,e){const n=t.findIndex(e);return n<0?t.length:n}var Yfe=(t,e,n)=>Math.min(Math.max(n,t),e),Qfe={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},qs="[-+]?\\d*\\.?\\d+",px=qs+"%";function sS(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var Zfe=new RegExp("rgb"+sS(qs,qs,qs)),ede=new RegExp("rgba"+sS(qs,qs,qs,qs)),tde=new RegExp("hsl"+sS(qs,px,px)),nde=new RegExp("hsla"+sS(qs,px,px,qs)),rde=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,ide=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,sde=/^#([0-9a-fA-F]{6})$/,ode=/^#([0-9a-fA-F]{8})$/;function ade(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=sde.exec(t))?parseInt(e[1]+"ff",16)>>>0:Dl&&Dl[t]!==void 0?Dl[t]:(e=Zfe.exec(t))?(Ah(e[1])<<24|Ah(e[2])<<16|Ah(e[3])<<8|255)>>>0:(e=ede.exec(t))?(Ah(e[1])<<24|Ah(e[2])<<16|Ah(e[3])<<8|HO(e[4]))>>>0:(e=rde.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=ode.exec(t))?parseInt(e[1],16)>>>0:(e=ide.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=tde.exec(t))?(VO(zO(e[1]),yv(e[2]),yv(e[3]))|255)>>>0:(e=nde.exec(t))?(VO(zO(e[1]),yv(e[2]),yv(e[3]))|HO(e[4]))>>>0:null}function IE(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function VO(t,e,n){const r=n<.5?n*(1+e):n+e-n*e,i=2*n-r,s=IE(i,r,t+1/3),o=IE(i,r,t),a=IE(i,r,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function Ah(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function zO(t){return(parseFloat(t)%360+360)%360/360}function HO(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function yv(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function GO(t){let e=ade(t);if(e===null)return t;e=e||0;const n=(e&4278190080)>>>24,r=(e&16711680)>>>16,i=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${r}, ${i}, ${s})`}var Jm=(t,e,n)=>{if(Oe.fun(t))return t;if(Oe.arr(t))return Jm({range:t,output:e,extrapolate:n});if(Oe.str(t.output[0]))return vP(t);const r=t,i=r.output,s=r.range||[0,1],o=r.extrapolateLeft||r.extrapolate||"extend",a=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(c=>c);return c=>{const u=cde(c,s);return lde(c,s[u],s[u+1],i[u],i[u+1],l,o,a,r.map)}};function lde(t,e,n,r,i,s,o,a,l){let c=l?l(t):t;if(c<e){if(o==="identity")return c;o==="clamp"&&(c=e)}if(c>n){if(a==="identity")return c;a==="clamp"&&(c=n)}return r===i?r:e===n?t<=e?r:i:(e===-1/0?c=-c:n===1/0?c=c-e:c=(c-e)/(n-e),c=s(c),r===-1/0?c=-c:i===1/0?c=c+r:c=c*(i-r)+r,c)}function cde(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var ude=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);const r=n*t,i=e==="end"?Math.floor(r):Math.ceil(r);return Yfe(0,1,i/t)},mx=1.70158,vv=mx*1.525,jO=mx+1,WO=2*Math.PI/3,XO=2*Math.PI/4.5,_v=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,hde={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>jO*t*t*t-mx*t*t,easeOutBack:t=>1+jO*Math.pow(t-1,3)+mx*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((vv+1)*2*t-vv)/2:(Math.pow(2*t-2,2)*((vv+1)*(t*2-2)+vv)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*WO),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*WO)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*XO))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*XO)/2+1,easeInBounce:t=>1-_v(1-t),easeOutBounce:_v,easeInOutBounce:t=>t<.5?(1-_v(1-2*t))/2:(1+_v(2*t-1))/2,steps:ude},qm=Symbol.for("FluidValue.get"),jf=Symbol.for("FluidValue.observers"),wo=t=>!!(t&&t[qm]),ws=t=>t&&t[qm]?t[qm]():t,KO=t=>t[jf]||null;function fde(t,e){t.eventObserved?t.eventObserved(e):t(e)}function gx(t,e){const n=t[jf];n&&n.forEach(r=>{fde(r,e)})}var dde=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");pde(this,t)}},pde=(t,e)=>Jz(t,qm,e);function Gg(t,e){if(t[qm]){let n=t[jf];n||Jz(t,jf,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function yx(t,e){const n=t[jf];if(n&&n.has(e)){const r=n.size-1;r?n.delete(e):t[jf]=null,t.observerRemoved&&t.observerRemoved(r,e)}}var Jz=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),Jv=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,mde=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,$O=new RegExp(`(${Jv.source})(%|[a-z]+)`,"i"),gde=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,oS=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,qz=t=>{const[e,n]=yde(t);if(!e||yP())return t;const r=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(r)return r.trim();if(n&&n.startsWith("--")){const i=window.getComputedStyle(document.documentElement).getPropertyValue(n);return i||t}else{if(n&&oS.test(n))return qz(n);if(n)return n}return t},yde=t=>{const e=oS.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]},LE,vde=(t,e,n,r,i)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(r)}, ${i})`,Yz=t=>{LE||(LE=Dl?new RegExp(`(${Object.keys(Dl).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>ws(s).replace(oS,qz).replace(mde,GO).replace(LE,GO)),n=e.map(s=>s.match(Jv).map(Number)),i=n[0].map((s,o)=>n.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>Jm({...t,output:s}));return s=>{var l;const o=!$O.test(e[0])&&((l=e.find(c=>$O.test(c)))==null?void 0:l.replace(Jv,""));let a=0;return e[0].replace(Jv,()=>`${i[a++](s)}${o||""}`).replace(gde,vde)}},xP="react-spring: ",Qz=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${xP}once requires a function parameter`);return(...r)=>{n||(e(...r),n=!0)}},_de=Qz(console.warn);function xde(){_de(`${xP}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var Sde=Qz(console.warn);function Ade(){Sde(`${xP}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function aS(t){return Oe.str(t)&&(t[0]=="#"||/\d/.test(t)||!yP()&&oS.test(t)||t in(Dl||{}))}var SP=yP()?$.useEffect:$.useLayoutEffect,wde=()=>{const t=$.useRef(!1);return SP(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function Zz(){const t=$.useState()[1],e=wde();return()=>{e.current&&t(Math.random())}}function Ede(t,e){const[n]=$.useState(()=>({inputs:e,result:t()})),r=$.useRef(),i=r.current;let s=i;return s?e&&s.inputs&&Mde(e,s.inputs)||(s={inputs:e,result:t()}):s=n,$.useEffect(()=>{r.current=s,i==n&&(n.inputs=n.result=void 0)},[s]),s.result}function Mde(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var eH=t=>$.useEffect(t,Tde),Tde=[];function JO(t){const e=$.useRef();return $.useEffect(()=>{e.current=t}),e.current}var Ym=Symbol.for("Animated:node"),Cde=t=>!!t&&t[Ym]===t,Ao=t=>t&&t[Ym],AP=(t,e)=>Kfe(t,Ym,e),lS=t=>t&&t[Ym]&&t[Ym].getPayload(),tH=class{constructor(){AP(this,this)}getPayload(){return this.payload||[]}},jg=class extends tH{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,Oe.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new jg(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return Oe.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,Oe.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},Qm=class extends jg{constructor(t){super(0),this._string=null,this._toString=Jm({output:[t,t]})}static create(t){return new Qm(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(Oe.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=Jm({output:[this.getValue(),t]})),this._value=0,super.reset()}},vx={dependencies:null},wP=class extends tH{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return La(this.source,(n,r)=>{Cde(n)?e[r]=n.getValue(t):wo(n)?e[r]=ws(n):t||(e[r]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&an(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return La(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){vx.dependencies&&wo(t)&&vx.dependencies.add(t);const e=lS(t);e&&an(e,n=>this.add(n))}},nH=class extends wP{constructor(t){super(t)}static create(t){return new nH(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((n,r)=>n.setValue(t[r])).some(Boolean):(super.setValue(t.map(bde)),!0)}};function bde(t){return(aS(t)?Qm:jg).create(t)}function VC(t){const e=Ao(t);return e?e.constructor:Oe.arr(t)?nH:aS(t)?Qm:jg}var qO=(t,e)=>{const n=!Oe.fun(t)||t.prototype&&t.prototype.isReactComponent;return $.forwardRef((r,i)=>{const s=$.useRef(null),o=n&&$.useCallback(y=>{s.current=Ide(i,y)},[i]),[a,l]=Pde(r,e),c=Zz(),u=()=>{const y=s.current;if(n&&!y)return;(y?e.applyAnimatedValues(y,a.getValue(!0)):!1)===!1&&c()},f=new Rde(u,l),p=$.useRef();SP(()=>(p.current=f,an(l,y=>Gg(y,f)),()=>{p.current&&(an(p.current.deps,y=>yx(y,p.current)),Ct.cancel(p.current.update))})),$.useEffect(u,[]),eH(()=>()=>{const y=p.current;an(y.deps,S=>yx(S,y))});const m=e.getComponentProps(a.getValue());return $.createElement(t,{...m,ref:o})})},Rde=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&Ct.write(this.update)}};function Pde(t,e){const n=new Set;return vx.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new wP(t),vx.dependencies=null,[t,n]}function Ide(t,e){return t&&(Oe.fun(t)?t(e):t.current=e),e}var YO=Symbol.for("AnimatedComponent"),Lde=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=i=>new wP(i),getComponentProps:r=i=>i}={})=>{const i={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:r},s=o=>{const a=QO(o)||"Anonymous";return Oe.str(o)?o=s[o]||(s[o]=qO(o,i)):o=o[YO]||(o[YO]=qO(o,i)),o.displayName=`Animated(${a})`,o};return La(t,(o,a)=>{Oe.arr(t)&&(a=QO(o)),s[a]=s(o)}),{animated:s}},QO=t=>Oe.str(t)?t:t&&Oe.str(t.displayName)?t.displayName:Oe.fun(t)&&t.name||null;function Fc(t,...e){return Oe.fun(t)?t(...e):t}var Gp=(t,e)=>t===!0||!!(e&&t&&(Oe.fun(t)?t(e):Ds(t).includes(e))),rH=(t,e)=>Oe.obj(t)?e&&t[e]:t,iH=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,Dde=t=>t,EP=(t,e=Dde)=>{let n=Bde;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const r={};for(const i of n){const s=e(t[i],i);Oe.und(s)||(r[i]=s)}return r},Bde=["config","onProps","onStart","onChange","onPause","onResume","onRest"],Nde={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function Ode(t){const e={};let n=0;if(La(t,(r,i)=>{Nde[i]||(e[i]=r,n++)}),n)return e}function sH(t){const e=Ode(t);if(e){const n={to:e};return La(t,(r,i)=>i in e||(n[i]=r)),n}return{...t}}function Zm(t){return t=ws(t),Oe.arr(t)?t.map(Zm):aS(t)?so.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function Fde(t){for(const e in t)return!0;return!1}function zC(t){return Oe.fun(t)||Oe.arr(t)&&Oe.obj(t[0])}function kde(t,e){var n;(n=t.ref)==null||n.delete(t),e==null||e.delete(t)}function Ude(t,e){var n;e&&t.ref!==e&&((n=t.ref)==null||n.delete(t),e.add(t),t.ref=e)}var Vde={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},HC={...Vde.default,mass:1,damping:1,easing:hde.linear,clamp:!1},zde=class{constructor(){this.velocity=0,Object.assign(this,HC)}};function Hde(t,e,n){n&&(n={...n},ZO(n,e),e={...n,...e}),ZO(t,e),Object.assign(t,e);for(const o in HC)t[o]==null&&(t[o]=HC[o]);let{frequency:r,damping:i}=t;const{mass:s}=t;return Oe.und(r)||(r<.01&&(r=.01),i<0&&(i=0),t.tension=Math.pow(2*Math.PI/r,2)*s,t.friction=4*Math.PI*i*s/r),t}function ZO(t,e){if(!Oe.und(e.decay))t.duration=void 0;else{const n=!Oe.und(e.tension)||!Oe.und(e.friction);(n||!Oe.und(e.frequency)||!Oe.und(e.damping)||!Oe.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var eF=[],Gde=class{constructor(){this.changed=!1,this.values=eF,this.toValues=null,this.fromValues=eF,this.config=new zde,this.immediate=!1}};function oH(t,{key:e,props:n,defaultProps:r,state:i,actions:s}){return new Promise((o,a)=>{let l,c,u=Gp(n.cancel??(r==null?void 0:r.cancel),e);if(u)m();else{Oe.und(n.pause)||(i.paused=Gp(n.pause,e));let y=r==null?void 0:r.pause;y!==!0&&(y=i.paused||Gp(y,e)),l=Fc(n.delay||0,e),y?(i.resumeQueue.add(p),s.pause()):(s.resume(),p())}function f(){i.resumeQueue.add(p),i.timeouts.delete(c),c.cancel(),l=c.time-Ct.now()}function p(){l>0&&!so.skipAnimation?(i.delayed=!0,c=Ct.setTimeout(m,l),i.pauseQueue.add(f),i.timeouts.add(c)):m()}function m(){i.delayed&&(i.delayed=!1),i.pauseQueue.delete(f),i.timeouts.delete(c),t<=(i.cancelId||0)&&(u=!0);try{s.start({...n,callId:t,cancel:u},o)}catch(y){a(y)}}})}var MP=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?mf(t.get()):e.every(n=>n.noop)?aH(t.get()):$s(t.get(),e.every(n=>n.finished)),aH=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),$s=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),mf=t=>({value:t,cancelled:!0,finished:!1});function lH(t,e,n,r){const{callId:i,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=n;return!s&&t===a&&!e.reset?l:n.promise=(async()=>{n.asyncId=i,n.asyncTo=t;const c=EP(e,(v,g)=>g==="onRest"?void 0:v);let u,f;const p=new Promise((v,g)=>(u=v,f=g)),m=v=>{const g=i<=(n.cancelId||0)&&mf(r)||i!==n.asyncId&&$s(r,!1);if(g)throw v.result=g,f(v),v},y=(v,g)=>{const _=new tF,A=new nF;return(async()=>{if(so.skipAnimation)throw eg(n),A.result=$s(r,!1),f(A),A;m(_);const E=Oe.obj(v)?{...v}:{...g,to:v};E.parentId=i,La(c,(C,P)=>{Oe.und(E[P])&&(E[P]=C)});const b=await r.start(E);return m(_),n.paused&&await new Promise(C=>{n.resumeQueue.add(C)}),b})()};let S;if(so.skipAnimation)return eg(n),$s(r,!1);try{let v;Oe.arr(t)?v=(async g=>{for(const _ of g)await y(_)})(t):v=Promise.resolve(t(y,r.stop.bind(r))),await Promise.all([v.then(u),p]),S=$s(r.get(),!0,!1)}catch(v){if(v instanceof tF)S=v.result;else if(v instanceof nF)S=v.result;else throw v}finally{i==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return Oe.fun(o)&&Ct.batchedUpdates(()=>{o(S,r,r.item)}),S})()}function eg(t,e){zp(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var tF=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},nF=class extends Error{constructor(){super("SkipAnimationSignal")}},GC=t=>t instanceof TP,jde=1,TP=class extends dde{constructor(){super(...arguments),this.id=jde++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=Ao(this);return t&&t.getValue()}to(...t){return so.to(this,t)}interpolate(...t){return xde(),so.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){gx(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||iS.sort(this),gx(this,{type:"priority",parent:this,priority:t})}},Au=Symbol.for("SpringPhase"),cH=1,jC=2,WC=4,DE=t=>(t[Au]&cH)>0,Za=t=>(t[Au]&jC)>0,np=t=>(t[Au]&WC)>0,rF=(t,e)=>e?t[Au]|=jC|cH:t[Au]&=~jC,iF=(t,e)=>e?t[Au]|=WC:t[Au]&=~WC,Wde=class extends TP{constructor(t,e){if(super(),this.animation=new Gde,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!Oe.und(t)||!Oe.und(e)){const n=Oe.obj(t)?{...t}:{...e,from:t};Oe.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(Za(this)||this._state.asyncTo)||np(this)}get goal(){return ws(this.animation.to)}get velocity(){const t=Ao(this);return t instanceof jg?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return DE(this)}get isAnimating(){return Za(this)}get isPaused(){return np(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const r=this.animation;let{toValues:i}=r;const{config:s}=r,o=lS(r.to);!o&&wo(r.to)&&(i=Ds(ws(r.to))),r.values.forEach((c,u)=>{if(c.done)return;const f=c.constructor==Qm?1:o?o[u].lastPosition:i[u];let p=r.immediate,m=f;if(!p){if(m=c.lastPosition,s.tension<=0){c.done=!0;return}let y=c.elapsedTime+=t;const S=r.fromValues[u],v=c.v0!=null?c.v0:c.v0=Oe.arr(s.velocity)?s.velocity[u]:s.velocity;let g;const _=s.precision||(S==f?.005:Math.min(1,Math.abs(f-S)*.001));if(Oe.und(s.duration))if(s.decay){const A=s.decay===!0?.998:s.decay,E=Math.exp(-(1-A)*y);m=S+v/(1-A)*(1-E),p=Math.abs(c.lastPosition-m)<=_,g=v*E}else{g=c.lastVelocity==null?v:c.lastVelocity;const A=s.restVelocity||_/10,E=s.clamp?0:s.bounce,b=!Oe.und(E),C=S==f?c.v0>0:S<f;let P,L=!1;const N=1,T=Math.ceil(t/N);for(let D=0;D<T&&(P=Math.abs(g)>A,!(!P&&(p=Math.abs(f-m)<=_,p)));++D){b&&(L=m==f||m>f==C,L&&(g=-g*E,m=f));const z=-s.tension*1e-6*(m-f),j=-s.friction*.001*g,H=(z+j)/s.mass;g=g+H*N,m=m+g*N}}else{let A=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,c.durationProgress>0&&(c.elapsedTime=s.duration*c.durationProgress,y=c.elapsedTime+=t)),A=(s.progress||0)+y/this._memoizedDuration,A=A>1?1:A<0?0:A,c.durationProgress=A),m=S+s.easing(A)*(f-S),g=(m-c.lastPosition)/t,p=A==1}c.lastVelocity=g,Number.isNaN(m)&&(console.warn("Got NaN while animating:",this),p=!0)}o&&!o[u].done&&(p=!1),p?c.done=!0:e=!1,c.setValue(m,s.round)&&(n=!0)});const a=Ao(this),l=a.getValue();if(e){const c=ws(r.to);(l!==c||n)&&!s.decay?(a.setValue(c),this._onChange(c)):n&&s.decay&&this._onChange(l),this._stop()}else n&&this._onChange(l)}set(t){return Ct.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Za(this)){const{to:t,config:e}=this.animation;Ct.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return Oe.und(t)?(n=this.queue||[],this.queue=[]):n=[Oe.obj(t)?t:{...e,to:t}],Promise.all(n.map(r=>this._update(r))).then(r=>MP(this,r))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),eg(this._state,t&&this._lastCallId),Ct.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:r}=t;n=Oe.obj(n)?n[e]:n,(n==null||zC(n))&&(n=void 0),r=Oe.obj(r)?r[e]:r,r==null&&(r=void 0);const i={to:n,from:r};return DE(this)||(t.reverse&&([n,r]=[r,n]),r=ws(r),Oe.und(r)?Ao(this)||this._set(n):this._set(r)),i}_update({...t},e){const{key:n,defaultProps:r}=this;t.default&&Object.assign(r,EP(t,(o,a)=>/^on/.test(a)?rH(o,n):o)),oF(this,t,"onProps"),ip(this,"onProps",t,this);const i=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return oH(++this._lastCallId,{key:n,props:t,defaultProps:r,state:s,actions:{pause:()=>{np(this)||(iF(this,!0),_p(s.pauseQueue),ip(this,"onPause",$s(this,rp(this,this.animation.to)),this))},resume:()=>{np(this)&&(iF(this,!1),Za(this)&&this._resume(),_p(s.resumeQueue),ip(this,"onResume",$s(this,rp(this,this.animation.to)),this))},start:this._merge.bind(this,i)}}).then(o=>{if(t.loop&&o.finished&&!(e&&o.noop)){const a=uH(t);if(a)return this._update(a,!0)}return o})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(mf(this));const r=!Oe.und(t.to),i=!Oe.und(t.from);if(r||i)if(e.callId>this._lastToId)this._lastToId=e.callId;else return n(mf(this));const{key:s,defaultProps:o,animation:a}=this,{to:l,from:c}=a;let{to:u=l,from:f=c}=t;i&&!r&&(!e.default||Oe.und(u))&&(u=f),e.reverse&&([u,f]=[f,u]);const p=!la(f,c);p&&(a.from=f),f=ws(f);const m=!la(u,l);m&&this._focus(u);const y=zC(e.to),{config:S}=a,{decay:v,velocity:g}=S;(r||i)&&(S.velocity=0),e.config&&!y&&Hde(S,Fc(e.config,s),e.config!==o.config?Fc(o.config,s):void 0);let _=Ao(this);if(!_||Oe.und(u))return n($s(this,!0));const A=Oe.und(e.reset)?i&&!e.default:!Oe.und(f)&&Gp(e.reset,s),E=A?f:this.get(),b=Zm(u),C=Oe.num(b)||Oe.arr(b)||aS(b),P=!y&&(!C||Gp(o.immediate||e.immediate,s));if(m){const D=VC(u);if(D!==_.constructor)if(P)_=this._set(b);else throw Error(`Cannot animate between ${_.constructor.name} and ${D.name}, as the "to" prop suggests`)}const L=_.constructor;let N=wo(u),T=!1;if(!N){const D=A||!DE(this)&&p;(m||D)&&(T=la(Zm(E),b),N=!T),(!la(a.immediate,P)&&!P||!la(S.decay,v)||!la(S.velocity,g))&&(N=!0)}if(T&&Za(this)&&(a.changed&&!A?N=!0:N||this._stop(l)),!y&&((N||wo(l))&&(a.values=_.getPayload(),a.toValues=wo(u)?null:L==Qm?[1]:Ds(b)),a.immediate!=P&&(a.immediate=P,!P&&!A&&this._set(l)),N)){const{onRest:D}=a;an(Kde,j=>oF(this,e,j));const z=$s(this,rp(this,l));_p(this._pendingCalls,z),this._pendingCalls.add(n),a.changed&&Ct.batchedUpdates(()=>{var j;a.changed=!A,D==null||D(z,this),A?Fc(o.onRest,z):(j=a.onStart)==null||j.call(a,z,this)})}A&&this._set(E),y?n(lH(e.to,e,this._state,this)):N?this._start():Za(this)&&!m?this._pendingCalls.add(n):n(aH(E))}_focus(t){const e=this.animation;t!==e.to&&(KO(this)&&this._detach(),e.to=t,KO(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;wo(e)&&(Gg(e,this),GC(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;wo(t)&&yx(t,this)}_set(t,e=!0){const n=ws(t);if(!Oe.und(n)){const r=Ao(this);if(!r||!la(n,r.getValue())){const i=VC(n);!r||r.constructor!=i?AP(this,i.create(n)):r.setValue(n),r&&Ct.batchedUpdates(()=>{this._onChange(n,e)})}}return Ao(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,ip(this,"onStart",$s(this,rp(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),Fc(this.animation.onChange,t,this)),Fc(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;Ao(this).reset(ws(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),Za(this)||(rF(this,!0),np(this)||this._resume())}_resume(){so.skipAnimation?this.finish():iS.start(this)}_stop(t,e){if(Za(this)){rF(this,!1);const n=this.animation;an(n.values,i=>{i.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),gx(this,{type:"idle",parent:this});const r=e?mf(this.get()):$s(this.get(),rp(this,t??n.to));_p(this._pendingCalls,r),n.changed&&(n.changed=!1,ip(this,"onRest",r,this))}}};function rp(t,e){const n=Zm(e),r=Zm(t.get());return la(r,n)}function uH(t,e=t.loop,n=t.to){const r=Fc(e);if(r){const i=r!==!0&&sH(r),s=(i||t).reverse,o=!i||i.reset;return tg({...t,loop:e,default:!1,pause:void 0,to:!s||zC(n)?n:void 0,from:o?t.from:void 0,reset:o,...i})}}function tg(t){const{to:e,from:n}=t=sH(t),r=new Set;return Oe.obj(e)&&sF(e,r),Oe.obj(n)&&sF(n,r),t.keys=r.size?Array.from(r):null,t}function Xde(t){const e=tg(t);return Oe.und(e.default)&&(e.default=EP(e)),e}function sF(t,e){La(t,(n,r)=>n!=null&&e.add(r))}var Kde=["onStart","onRest","onChange","onPause","onResume"];function oF(t,e,n){t.animation[n]=e[n]!==iH(e,n)?rH(e[n],t.key):void 0}function ip(t,e,...n){var r,i,s,o;(i=(r=t.animation)[e])==null||i.call(r,...n),(o=(s=t.defaultProps)[e])==null||o.call(s,...n)}var $de=["onStart","onChange","onRest"],Jde=1,qde=class{constructor(t,e){this.id=Jde++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),t&&this.start({default:!0,...t})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each((e,n)=>t[n]=e.get()),t}set(t){for(const e in t){const n=t[e];Oe.und(n)||this.springs[e].set(n)}}update(t){return t&&this.queue.push(tg(t)),this}start(t){let{queue:e}=this;return t?e=Ds(t).map(tg):this.queue=[],this._flush?this._flush(this,e):(mH(this,e),XC(this,e))}stop(t,e){if(t!==!!t&&(e=t),e){const n=this.springs;an(Ds(e),r=>n[r].stop(!!t))}else eg(this._state,this._lastAsyncId),this.each(n=>n.stop(!!t));return this}pause(t){if(Oe.und(t))this.start({pause:!0});else{const e=this.springs;an(Ds(t),n=>e[n].pause())}return this}resume(t){if(Oe.und(t))this.start({pause:!1});else{const e=this.springs;an(Ds(t),n=>e[n].resume())}return this}each(t){La(this.springs,t)}_onFrame(){const{onStart:t,onChange:e,onRest:n}=this._events,r=this._active.size>0,i=this._changed.size>0;(r&&!this._started||i&&!this._started)&&(this._started=!0,zp(t,([a,l])=>{l.value=this.get(),a(l,this,this._item)}));const s=!r&&this._started,o=i||s&&n.size?this.get():null;i&&e.size&&zp(e,([a,l])=>{l.value=o,a(l,this,this._item)}),s&&(this._started=!1,zp(n,([a,l])=>{l.value=o,a(l,this,this._item)}))}eventObserved(t){if(t.type=="change")this._changed.add(t.parent),t.idle||this._active.add(t.parent);else if(t.type=="idle")this._active.delete(t.parent);else return;Ct.onFrame(this._onFrame)}};function XC(t,e){return Promise.all(e.map(n=>hH(t,n))).then(n=>MP(t,n))}async function hH(t,e,n){const{keys:r,to:i,from:s,loop:o,onRest:a,onResolve:l}=e,c=Oe.obj(e.default)&&e.default;o&&(e.loop=!1),i===!1&&(e.to=null),s===!1&&(e.from=null);const u=Oe.arr(i)||Oe.fun(i)?i:void 0;u?(e.to=void 0,e.onRest=void 0,c&&(c.onRest=void 0)):an($de,S=>{const v=e[S];if(Oe.fun(v)){const g=t._events[S];e[S]=({finished:_,cancelled:A})=>{const E=g.get(v);E?(_||(E.finished=!1),A&&(E.cancelled=!0)):g.set(v,{value:null,finished:_||!1,cancelled:A||!1})},c&&(c[S]=e[S])}});const f=t._state;e.pause===!f.paused?(f.paused=e.pause,_p(e.pause?f.pauseQueue:f.resumeQueue)):f.paused&&(e.pause=!0);const p=(r||Object.keys(t.springs)).map(S=>t.springs[S].start(e)),m=e.cancel===!0||iH(e,"cancel")===!0;(u||m&&f.asyncId)&&p.push(oH(++t._lastAsyncId,{props:e,state:f,actions:{pause:kC,resume:kC,start(S,v){m?(eg(f,t._lastAsyncId),v(mf(t))):(S.onRest=a,v(lH(u,S,f,t)))}}})),f.paused&&await new Promise(S=>{f.resumeQueue.add(S)});const y=MP(t,await Promise.all(p));if(o&&y.finished&&!(n&&y.noop)){const S=uH(e,o,i);if(S)return mH(t,[S]),hH(t,S,!0)}return l&&Ct.batchedUpdates(()=>l(y,t,t.item)),y}function aF(t,e){const n={...t.springs};return e&&an(Ds(e),r=>{Oe.und(r.keys)&&(r=tg(r)),Oe.obj(r.to)||(r={...r,to:void 0}),pH(n,r,i=>dH(i))}),fH(t,n),n}function fH(t,e){La(e,(n,r)=>{t.springs[r]||(t.springs[r]=n,Gg(n,t))})}function dH(t,e){const n=new Wde;return n.key=t,e&&Gg(n,e),n}function pH(t,e,n){e.keys&&an(e.keys,r=>{(t[r]||(t[r]=n(r)))._prepareNode(e)})}function mH(t,e){an(e,n=>{pH(t.springs,n,r=>dH(r,t))})}var cS=({children:t,...e})=>{const n=$.useContext(_x),r=e.pause||!!n.pause,i=e.immediate||!!n.immediate;e=Ede(()=>({pause:r,immediate:i}),[r,i]);const{Provider:s}=_x;return $.createElement(s,{value:e},t)},_x=Yde(cS,{});cS.Provider=_x.Provider;cS.Consumer=_x.Consumer;function Yde(t,e){return Object.assign(t,$.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var Qde=()=>{const t=[],e=function(r){Ade();const i=[];return an(t,(s,o)=>{if(Oe.und(r))i.push(s.start());else{const a=n(r,s,o);a&&i.push(s.start(a))}}),i};e.current=t,e.add=function(r){t.includes(r)||t.push(r)},e.delete=function(r){const i=t.indexOf(r);~i&&t.splice(i,1)},e.pause=function(){return an(t,r=>r.pause(...arguments)),this},e.resume=function(){return an(t,r=>r.resume(...arguments)),this},e.set=function(r){an(t,(i,s)=>{const o=Oe.fun(r)?r(s,i):r;o&&i.set(o)})},e.start=function(r){const i=[];return an(t,(s,o)=>{if(Oe.und(r))i.push(s.start());else{const a=this._getProps(r,s,o);a&&i.push(s.start(a))}}),i},e.stop=function(){return an(t,r=>r.stop(...arguments)),this},e.update=function(r){return an(t,(i,s)=>i.update(this._getProps(r,i,s))),this};const n=function(r,i,s){return Oe.fun(r)?r(s,i):r};return e._getProps=n,e};function Zde(t,e,n){const r=Oe.fun(e)&&e;r&&!n&&(n=[]);const i=$.useMemo(()=>r||arguments.length==3?Qde():void 0,[]),s=$.useRef(0),o=Zz(),a=$.useMemo(()=>({ctrls:[],queue:[],flush(g,_){const A=aF(g,_);return s.current>0&&!a.queue.length&&!Object.keys(A).some(b=>!g.springs[b])?XC(g,_):new Promise(b=>{fH(g,A),a.queue.push(()=>{b(XC(g,_))}),o()})}}),[]),l=$.useRef([...a.ctrls]),c=[],u=JO(t)||0;$.useMemo(()=>{an(l.current.slice(t,u),g=>{kde(g,i),g.stop(!0)}),l.current.length=t,f(u,t)},[t]),$.useMemo(()=>{f(0,Math.min(u,t))},n);function f(g,_){for(let A=g;A<_;A++){const E=l.current[A]||(l.current[A]=new qde(null,a.flush)),b=r?r(A,E):e[A];b&&(c[A]=Xde(b))}}const p=l.current.map((g,_)=>aF(g,c[_])),m=$.useContext(cS),y=JO(m),S=m!==y&&Fde(m);SP(()=>{s.current++,a.ctrls=l.current;const{queue:g}=a;g.length&&(a.queue=[],an(g,_=>_())),an(l.current,(_,A)=>{i==null||i.add(_),S&&_.start({default:m});const E=c[A];E&&(Ude(_,E.ref),_.ref?_.queue.push(E):_.start(E))})}),eH(()=>()=>{an(a.ctrls,g=>g.stop(!0))});const v=p.map(g=>({...g}));return i?[v,i]:v}function epe(t,e){const n=Oe.fun(t),[[r],i]=Zde(1,n?t:[t],n?e||[]:e);return n||arguments.length==2?[r,i]:r}var tpe=class extends TP{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=Jm(...e);const n=this._get(),r=VC(n);AP(this,r.create(n))}advance(t){const e=this._get(),n=this.get();la(e,n)||(Ao(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&lF(this._active)&&BE(this)}_get(){const t=Oe.arr(this.source)?this.source.map(ws):Ds(ws(this.source));return this.calc(...t)}_start(){this.idle&&!lF(this._active)&&(this.idle=!1,an(lS(this),t=>{t.done=!1}),so.skipAnimation?(Ct.batchedUpdates(()=>this.advance()),BE(this)):iS.start(this))}_attach(){let t=1;an(Ds(this.source),e=>{wo(e)&&Gg(e,this),GC(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){an(Ds(this.source),t=>{wo(t)&&yx(t,this)}),this._active.clear(),BE(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=Ds(this.source).reduce((e,n)=>Math.max(e,(GC(n)?n.priority:0)+1),0))}};function npe(t){return t.idle!==!1}function lF(t){return!t.size||Array.from(t).every(npe)}function BE(t){t.idle||(t.idle=!0,an(lS(t),e=>{e.done=!0}),gx(t,{type:"idle",parent:t}))}so.assign({createStringInterpolator:Yz,to:(t,e)=>new tpe(t,e)});var rpe=["primitive"].concat(Object.keys(lz).filter(t=>/^[A-Z]/.test(t)).map(t=>t[0].toLowerCase()+t.slice(1)));so.assign({createStringInterpolator:Yz,colors:Qfe,frameLoop:"demand"});She(()=>{Ct.advance()});var ipe=Lde(rpe,{applyAnimatedValues:Lc}),spe=ipe.animated;const ope=({isMobile:t,animateRole:e})=>{const n=nS("./3d models/Nike Air Max/scene.gltf"),[r,i]=$.useState(!1),{rotate:s}=epe({rotate:r?[5,7.5,0]:[0,7.5,0]});return $.useEffect(()=>{i(()=>e==="fade")},[e]),console.log(s),R.jsx(spe.mesh,{rotation:s,children:R.jsx("primitive",{object:n.scene,scale:t?15:23,position:t?[0,0,0]:[0,-1.5,0],rotation:[0,7.5,0]})})},ape=({animateRole:t})=>{const e=b6.useMediaQuery({maxWidth:425});return R.jsxs(jhe,{frameloop:"demand",shadows:!0,dpr:[10,2],camera:{position:[18,3,5],fov:25},gl:{preserveDrawingBuffer:!0},children:[R.jsxs($.Suspense,{fallback:R.jsx(Gfe,{}),children:[R.jsx(zfe,{enableZoom:!1,maxPolarAngle:Math.PI/2,minPolarAngle:Math.PI/2}),R.jsx(ope,{isMobile:e,animateRole:t})]}),R.jsx(Hfe,{all:!0})]})},gH=$.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),uS=$.createContext({}),CP=$.createContext(null),hS=typeof document<"u",bP=hS?$.useLayoutEffect:$.useEffect,yH=$.createContext({strict:!1});function lpe(t,e,n,r){const{visualElement:i}=$.useContext(uS),s=$.useContext(yH),o=$.useContext(CP),a=$.useContext(gH).reducedMotion,l=$.useRef();r=r||s.renderer,!l.current&&r&&(l.current=r(t,{visualState:e,parent:i,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const c=l.current;$.useInsertionEffect(()=>{c&&c.update(n,o)});const u=$.useRef(!!window.HandoffAppearAnimations);return bP(()=>{c&&(c.render(),u.current&&c.animationState&&c.animationState.animateChanges())}),$.useEffect(()=>{c&&(c.updateFeatures(),!u.current&&c.animationState&&c.animationState.animateChanges(),window.HandoffAppearAnimations=void 0,u.current=!1)}),c}function Kh(t){return typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function cpe(t,e,n){return $.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Kh(n)&&(n.current=r))},[e])}function ng(t){return typeof t=="string"||Array.isArray(t)}function fS(t){return typeof t=="object"&&typeof t.start=="function"}const RP=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],PP=["initial",...RP];function dS(t){return fS(t.animate)||PP.some(e=>ng(t[e]))}function vH(t){return!!(dS(t)||t.variants)}function upe(t,e){if(dS(t)){const{initial:n,animate:r}=t;return{initial:n===!1||ng(n)?n:void 0,animate:ng(r)?r:void 0}}return t.inherit!==!1?e:{}}function hpe(t){const{initial:e,animate:n}=upe(t,$.useContext(uS));return $.useMemo(()=>({initial:e,animate:n}),[cF(e),cF(n)])}function cF(t){return Array.isArray(t)?t.join(" "):t}const uF={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},rg={};for(const t in uF)rg[t]={isEnabled:e=>uF[t].some(n=>!!e[n])};function fpe(t){for(const e in t)rg[e]={...rg[e],...t[e]}}const _H=$.createContext({}),xH=$.createContext({}),dpe=Symbol.for("motionComponentSymbol");function ppe({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&fpe(t);function s(a,l){let c;const u={...$.useContext(gH),...a,layoutId:mpe(a)},{isStatic:f}=u,p=hpe(a),m=r(a,f);if(!f&&hS){p.visualElement=lpe(i,m,u,e);const y=$.useContext(xH),S=$.useContext(yH).strict;p.visualElement&&(c=p.visualElement.loadFeatures(u,S,t,y))}return $.createElement(uS.Provider,{value:p},c&&p.visualElement?$.createElement(c,{visualElement:p.visualElement,...u}):null,n(i,a,cpe(m,p.visualElement,l),m,f,p.visualElement))}const o=$.forwardRef(s);return o[dpe]=i,o}function mpe({layoutId:t}){const e=$.useContext(_H).id;return e&&t!==void 0?e+"-"+t:t}function gpe(t){function e(r,i={}){return ppe(t(r,i))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,i)=>(n.has(i)||n.set(i,e(i)),n.get(i))})}const ype=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function IP(t){return typeof t!="string"||t.includes("-")?!1:!!(ype.indexOf(t)>-1||/[A-Z]/.test(t))}const xx={};function vpe(t){Object.assign(xx,t)}const Wg=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Du=new Set(Wg);function SH(t,{layout:e,layoutId:n}){return Du.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!xx[t]||t==="opacity")}const ki=t=>!!(t&&t.getVelocity),_pe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},xpe=Wg.length;function Spe(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,i){let s="";for(let o=0;o<xpe;o++){const a=Wg[o];if(t[a]!==void 0){const l=_pe[a]||a;s+=`${l}(${t[a]}) `}}return e&&!t.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(t,r?"":s):n&&r&&(s="none"),s}const AH=t=>e=>typeof e=="string"&&e.startsWith(t),wH=AH("--"),KC=AH("var(--"),Ape=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,wpe=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Xl=(t,e,n)=>Math.min(Math.max(n,t),e),Bu={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},jp={...Bu,transform:t=>Xl(0,1,t)},xv={...Bu,default:1},Wp=t=>Math.round(t*1e5)/1e5,pS=/(-)?([\d]*\.?[\d])+/g,EH=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Epe=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Xg(t){return typeof t=="string"}const Kg=t=>({test:e=>Xg(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),el=Kg("deg"),ko=Kg("%"),yt=Kg("px"),Mpe=Kg("vh"),Tpe=Kg("vw"),hF={...ko,parse:t=>ko.parse(t)/100,transform:t=>ko.transform(t*100)},fF={...Bu,transform:Math.round},MH={borderWidth:yt,borderTopWidth:yt,borderRightWidth:yt,borderBottomWidth:yt,borderLeftWidth:yt,borderRadius:yt,radius:yt,borderTopLeftRadius:yt,borderTopRightRadius:yt,borderBottomRightRadius:yt,borderBottomLeftRadius:yt,width:yt,maxWidth:yt,height:yt,maxHeight:yt,size:yt,top:yt,right:yt,bottom:yt,left:yt,padding:yt,paddingTop:yt,paddingRight:yt,paddingBottom:yt,paddingLeft:yt,margin:yt,marginTop:yt,marginRight:yt,marginBottom:yt,marginLeft:yt,rotate:el,rotateX:el,rotateY:el,rotateZ:el,scale:xv,scaleX:xv,scaleY:xv,scaleZ:xv,skew:el,skewX:el,skewY:el,distance:yt,translateX:yt,translateY:yt,translateZ:yt,x:yt,y:yt,z:yt,perspective:yt,transformPerspective:yt,opacity:jp,originX:hF,originY:hF,originZ:yt,zIndex:fF,fillOpacity:jp,strokeOpacity:jp,numOctaves:fF};function LP(t,e,n,r){const{style:i,vars:s,transform:o,transformOrigin:a}=t;let l=!1,c=!1,u=!0;for(const f in e){const p=e[f];if(wH(f)){s[f]=p;continue}const m=MH[f],y=wpe(p,m);if(Du.has(f)){if(l=!0,o[f]=y,!u)continue;p!==(m.default||0)&&(u=!1)}else f.startsWith("origin")?(c=!0,a[f]=y):i[f]=y}if(e.transform||(l||r?i.transform=Spe(t.transform,n,u,r):i.transform&&(i.transform="none")),c){const{originX:f="50%",originY:p="50%",originZ:m=0}=a;i.transformOrigin=`${f} ${p} ${m}`}}const DP=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function TH(t,e,n){for(const r in e)!ki(e[r])&&!SH(r,n)&&(t[r]=e[r])}function Cpe({transformTemplate:t},e,n){return $.useMemo(()=>{const r=DP();return LP(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function bpe(t,e,n){const r=t.style||{},i={};return TH(i,r,t),Object.assign(i,Cpe(t,e,n)),t.transformValues?t.transformValues(i):i}function Rpe(t,e,n){const r={},i=bpe(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=i,r}const Ppe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function Sx(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||Ppe.has(t)}let CH=t=>!Sx(t);function Ipe(t){t&&(CH=e=>e.startsWith("on")?!Sx(e):t(e))}try{Ipe(require("@emotion/is-prop-valid").default)}catch{}function Lpe(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(CH(i)||n===!0&&Sx(i)||!e&&!Sx(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function dF(t,e,n){return typeof t=="string"?t:yt.transform(e+n*t)}function Dpe(t,e,n){const r=dF(e,t.x,t.width),i=dF(n,t.y,t.height);return`${r} ${i}`}const Bpe={offset:"stroke-dashoffset",array:"stroke-dasharray"},Npe={offset:"strokeDashoffset",array:"strokeDasharray"};function Ope(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?Bpe:Npe;t[s.offset]=yt.transform(-r);const o=yt.transform(e),a=yt.transform(n);t[s.array]=`${o} ${a}`}function BP(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,f,p){if(LP(t,c,u,p),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:y,dimensions:S}=t;m.transform&&(S&&(y.transform=m.transform),delete m.transform),S&&(i!==void 0||s!==void 0||y.transform)&&(y.transformOrigin=Dpe(S,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(m.x=e),n!==void 0&&(m.y=n),r!==void 0&&(m.scale=r),o!==void 0&&Ope(m,o,a,l,!1)}const bH=()=>({...DP(),attrs:{}}),NP=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Fpe(t,e,n,r){const i=$.useMemo(()=>{const s=bH();return BP(s,e,{enableHardwareAcceleration:!1},NP(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};TH(s,t.style,t),i.style={...s,...i.style}}return i}function kpe(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(IP(n)?Fpe:Rpe)(r,s,o,n),u={...Lpe(r,typeof n=="string",t),...l,ref:i},{children:f}=r,p=$.useMemo(()=>ki(f)?f.get():f,[f]);return $.createElement(n,{...u,children:p})}}const OP=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();function RH(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const PH=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function IH(t,e,n,r){RH(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(PH.has(i)?i:OP(i),e.attrs[i])}function FP(t,e){const{style:n}=t,r={};for(const i in n)(ki(n[i])||e.style&&ki(e.style[i])||SH(i,t))&&(r[i]=n[i]);return r}function LH(t,e){const n=FP(t,e);for(const r in t)if(ki(t[r])||ki(e[r])){const i=Wg.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[i]=t[r]}return n}function kP(t,e,n,r={},i={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),e}function UP(t){const e=$.useRef(null);return e.current===null&&(e.current=t()),e.current}const Ax=t=>Array.isArray(t),Upe=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),Vpe=t=>Ax(t)?t[t.length-1]||0:t;function qv(t){const e=ki(t)?t.get():t;return Upe(e)?e.toValue():e}function zpe({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,i,s){const o={latestValues:Hpe(r,i,s,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const DH=t=>(e,n)=>{const r=$.useContext(uS),i=$.useContext(CP),s=()=>zpe(t,e,r,i);return n?s():UP(s)};function Hpe(t,e,n,r){const i={},s=r(t,{});for(const p in s)i[p]=qv(s[p]);let{initial:o,animate:a}=t;const l=dS(t),c=vH(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const f=u?a:o;return f&&typeof f!="boolean"&&!fS(f)&&(Array.isArray(f)?f:[f]).forEach(m=>{const y=kP(t,m);if(!y)return;const{transitionEnd:S,transition:v,...g}=y;for(const _ in g){let A=g[_];if(Array.isArray(A)){const E=u?A.length-1:0;A=A[E]}A!==null&&(i[_]=A)}for(const _ in S)i[_]=S[_]}),i}const jn=t=>t;class pF{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function Gpe(t){let e=new pF,n=new pF,r=0,i=!1,s=!1;const o=new WeakSet,a={schedule:(l,c=!1,u=!1)=>{const f=u&&i,p=f?e:n;return c&&o.add(l),p.add(l)&&f&&i&&(r=e.order.length),l},cancel:l=>{n.remove(l),o.delete(l)},process:l=>{if(i){s=!0;return}if(i=!0,[e,n]=[n,e],n.clear(),r=e.order.length,r)for(let c=0;c<r;c++){const u=e.order[c];u(l),o.has(u)&&(a.schedule(u),t())}i=!1,s&&(s=!1,a.process(l))}};return a}const Sv=["prepare","read","update","preRender","render","postRender"],jpe=40;function Wpe(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=Sv.reduce((f,p)=>(f[p]=Gpe(()=>n=!0),f),{}),o=f=>s[f].process(i),a=()=>{const f=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(f-i.timestamp,jpe),1),i.timestamp=f,i.isProcessing=!0,Sv.forEach(o),i.isProcessing=!1,n&&e&&(r=!1,t(a))},l=()=>{n=!0,r=!0,i.isProcessing||t(a)};return{schedule:Sv.reduce((f,p)=>{const m=s[p];return f[p]=(y,S=!1,v=!1)=>(n||l(),m.schedule(y,S,v)),f},{}),cancel:f=>Sv.forEach(p=>s[p].cancel(f)),state:i,steps:s}}const{schedule:un,cancel:jo,state:ur,steps:NE}=Wpe(typeof requestAnimationFrame<"u"?requestAnimationFrame:jn,!0),Xpe={useVisualState:DH({scrapeMotionValuesFromProps:LH,createRenderState:bH,onMount:(t,e,{renderState:n,latestValues:r})=>{un.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),un.render(()=>{BP(n,r,{enableHardwareAcceleration:!1},NP(e.tagName),t.transformTemplate),IH(e,n)})}})},Kpe={useVisualState:DH({scrapeMotionValuesFromProps:FP,createRenderState:DP})};function $pe(t,{forwardMotionProps:e=!1},n,r){return{...IP(t)?Xpe:Kpe,preloadedFeatures:n,useRender:kpe(e),createVisualElement:r,Component:t}}function va(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const BH=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function mS(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const Jpe=t=>e=>BH(e)&&t(e,mS(e));function Aa(t,e,n,r){return va(t,e,Jpe(n),r)}const qpe=(t,e)=>n=>e(t(n)),Bl=(...t)=>t.reduce(qpe);function NH(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const mF=NH("dragHorizontal"),gF=NH("dragVertical");function OH(t){let e=!1;if(t==="y")e=gF();else if(t==="x")e=mF();else{const n=mF(),r=gF();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function FH(){const t=OH(!0);return t?(t(),!1):!0}class nc{constructor(e){this.isMounted=!1,this.node=e}update(){}}function yF(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),i=(s,o)=>{if(s.type==="touch"||FH())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[r]&&un.update(()=>a[r](s,o))};return Aa(t.current,n,i,{passive:!t.getProps()[r]})}class Ype extends nc{mount(){this.unmount=Bl(yF(this.node,!0),yF(this.node,!1))}unmount(){}}class Qpe extends nc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Bl(va(this.node.current,"focus",()=>this.onFocus()),va(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const kH=(t,e)=>e?t===e?!0:kH(t,e.parentElement):!1;function OE(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,mS(n))}class Zpe extends nc{constructor(){super(...arguments),this.removeStartListeners=jn,this.removeEndListeners=jn,this.removeAccessibleListeners=jn,this.startPointerPress=(e,n)=>{if(this.removeEndListeners(),this.isPressing)return;const r=this.node.getProps(),s=Aa(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:u}=this.node.getProps();un.update(()=>{kH(this.node.current,a.target)?c&&c(a,l):u&&u(a,l)})},{passive:!(r.onTap||r.onPointerUp)}),o=Aa(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Bl(s,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||OE("up",(l,c)=>{const{onTap:u}=this.node.getProps();u&&un.update(()=>u(l,c))})};this.removeEndListeners(),this.removeEndListeners=va(this.node.current,"keyup",o),OE("down",(a,l)=>{this.startPress(a,l)})},n=va(this.node.current,"keydown",e),r=()=>{this.isPressing&&OE("cancel",(s,o)=>this.cancelPress(s,o))},i=va(this.node.current,"blur",r);this.removeAccessibleListeners=Bl(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&un.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!FH()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&un.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=Aa(this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=va(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Bl(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const $C=new WeakMap,FE=new WeakMap,eme=t=>{const e=$C.get(t.target);e&&e(t)},tme=t=>{t.forEach(eme)};function nme({root:t,...e}){const n=t||document;FE.has(n)||FE.set(n,{});const r=FE.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(tme,{root:t,...e})),r[i]}function rme(t,e,n){const r=nme(e);return $C.set(t,n),r.observe(t),()=>{$C.delete(t),r.unobserve(t)}}const ime={some:0,all:1};class sme extends nc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:ime[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:f}=this.node.getProps(),p=c?u:f;p&&p(l)};return rme(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(ome(e,n))&&this.startObserver()}unmount(){}}function ome({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const ame={inView:{Feature:sme},tap:{Feature:Zpe},focus:{Feature:Qpe},hover:{Feature:Ype}};function UH(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function lme(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function cme(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function gS(t,e,n){const r=t.getProps();return kP(r,e,n!==void 0?n:r.custom,lme(t),cme(t))}const ume="framerAppearId",hme="data-"+OP(ume);let fme=jn,yS=jn;const lu=t=>t*1e3,wa=t=>t/1e3,dme={current:!1},VH=t=>Array.isArray(t)&&typeof t[0]=="number";function zH(t){return!!(!t||typeof t=="string"&&HH[t]||VH(t)||Array.isArray(t)&&t.every(zH))}const xp=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,HH={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:xp([0,.65,.55,1]),circOut:xp([.55,0,1,.45]),backIn:xp([.31,.01,.66,-.59]),backOut:xp([.33,1.53,.69,.99])};function GH(t){if(t)return VH(t)?xp(t):Array.isArray(t)?t.map(GH):HH[t]}function pme(t,e,n,{delay:r=0,duration:i,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const c={[e]:n};l&&(c.offset=l);const u=GH(a);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function mme(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const jH=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,gme=1e-7,yme=12;function vme(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=jH(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>gme&&++a<yme);return o}function $g(t,e,n,r){if(t===e&&n===r)return jn;const i=s=>vme(s,0,1,t,n);return s=>s===0||s===1?s:jH(i(s),e,r)}const _me=$g(.42,0,1,1),xme=$g(0,0,.58,1),WH=$g(.42,0,.58,1),Sme=t=>Array.isArray(t)&&typeof t[0]!="number",XH=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,KH=t=>e=>1-t(1-e),$H=t=>1-Math.sin(Math.acos(t)),VP=KH($H),Ame=XH(VP),JH=$g(.33,1.53,.69,.99),zP=KH(JH),wme=XH(zP),Eme=t=>(t*=2)<1?.5*zP(t):.5*(2-Math.pow(2,-10*(t-1))),Mme={linear:jn,easeIn:_me,easeInOut:WH,easeOut:xme,circIn:$H,circInOut:Ame,circOut:VP,backIn:zP,backInOut:wme,backOut:JH,anticipate:Eme},vF=t=>{if(Array.isArray(t)){yS(t.length===4);const[e,n,r,i]=t;return $g(e,n,r,i)}else if(typeof t=="string")return Mme[t];return t},HP=(t,e)=>n=>!!(Xg(n)&&Epe.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),qH=(t,e,n)=>r=>{if(!Xg(r))return r;const[i,s,o,a]=r.match(pS);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Tme=t=>Xl(0,255,t),kE={...Bu,transform:t=>Math.round(Tme(t))},qc={test:HP("rgb","red"),parse:qH("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+kE.transform(t)+", "+kE.transform(e)+", "+kE.transform(n)+", "+Wp(jp.transform(r))+")"};function Cme(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const JC={test:HP("#"),parse:Cme,transform:qc.transform},$h={test:HP("hsl","hue"),parse:qH("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+ko.transform(Wp(e))+", "+ko.transform(Wp(n))+", "+Wp(jp.transform(r))+")"},gi={test:t=>qc.test(t)||JC.test(t)||$h.test(t),parse:t=>qc.test(t)?qc.parse(t):$h.test(t)?$h.parse(t):JC.parse(t),transform:t=>Xg(t)?t:t.hasOwnProperty("red")?qc.transform(t):$h.transform(t)},Bn=(t,e,n)=>-n*t+n*e+t;function UE(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function bme({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=UE(l,a,t+1/3),s=UE(l,a,t),o=UE(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}const VE=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},Rme=[JC,qc,$h],Pme=t=>Rme.find(e=>e.test(t));function _F(t){const e=Pme(t);let n=e.parse(t);return e===$h&&(n=bme(n)),n}const YH=(t,e)=>{const n=_F(t),r=_F(e),i={...n};return s=>(i.red=VE(n.red,r.red,s),i.green=VE(n.green,r.green,s),i.blue=VE(n.blue,r.blue,s),i.alpha=Bn(n.alpha,r.alpha,s),qc.transform(i))};function Ime(t){var e,n;return isNaN(t)&&Xg(t)&&(((e=t.match(pS))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(EH))===null||n===void 0?void 0:n.length)||0)>0}const QH={regex:Ape,countKey:"Vars",token:"${v}",parse:jn},ZH={regex:EH,countKey:"Colors",token:"${c}",parse:gi.parse},eG={regex:pS,countKey:"Numbers",token:"${n}",parse:Bu.parse};function zE(t,{regex:e,countKey:n,token:r,parse:i}){const s=t.tokenised.match(e);s&&(t["num"+n]=s.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...s.map(i)))}function wx(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&zE(n,QH),zE(n,ZH),zE(n,eG),n}function tG(t){return wx(t).values}function nG(t){const{values:e,numColors:n,numVars:r,tokenised:i}=wx(t),s=e.length;return o=>{let a=i;for(let l=0;l<s;l++)l<r?a=a.replace(QH.token,o[l]):l<r+n?a=a.replace(ZH.token,gi.transform(o[l])):a=a.replace(eG.token,Wp(o[l]));return a}}const Lme=t=>typeof t=="number"?0:t;function Dme(t){const e=tG(t);return nG(t)(e.map(Lme))}const Kl={test:Ime,parse:tG,createTransformer:nG,getAnimatableNone:Dme},rG=(t,e)=>n=>`${n>0?e:t}`;function iG(t,e){return typeof t=="number"?n=>Bn(t,e,n):gi.test(t)?YH(t,e):t.startsWith("var(")?rG(t,e):oG(t,e)}const sG=(t,e)=>{const n=[...t],r=n.length,i=t.map((s,o)=>iG(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}},Bme=(t,e)=>{const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=iG(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}},oG=(t,e)=>{const n=Kl.createTransformer(e),r=wx(t),i=wx(e);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?Bl(sG(r.values,i.values),n):rG(t,e)},Wf=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},xF=(t,e)=>n=>Bn(t,e,n);function Nme(t){return typeof t=="number"?xF:typeof t=="string"?gi.test(t)?YH:oG:Array.isArray(t)?sG:typeof t=="object"?Bme:xF}function Ome(t,e,n){const r=[],i=n||Nme(t[0]),s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||jn:e;a=Bl(l,a)}r.push(a)}return r}function GP(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(yS(s===e.length),s===1)return()=>e[0];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=Ome(e,r,i),a=o.length,l=c=>{let u=0;if(a>1)for(;u<t.length-2&&!(c<t[u+1]);u++);const f=Wf(t[u],t[u+1],c);return o[u](f)};return n?c=>l(Xl(t[0],t[s-1],c)):l}function Fme(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Wf(0,e,r);t.push(Bn(n,1,i))}}function aG(t){const e=[0];return Fme(e,t.length-1),e}function kme(t,e){return t.map(n=>n*e)}function Ume(t,e){return t.map(()=>e||WH).splice(0,t.length-1)}function Ex({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=Sme(r)?r.map(vF):vF(r),s={done:!1,value:e[0]},o=kme(n&&n.length===e.length?n:aG(e),t),a=GP(o,e,{ease:Array.isArray(i)?i:Ume(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}function jP(t,e){return e?t*(1e3/e):0}const Vme=5;function lG(t,e,n){const r=Math.max(e-Vme,0);return jP(n-t(r),e-r)}const HE=.001,zme=.01,Hme=10,Gme=.05,jme=1;function Wme({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let i,s,o=1-e;o=Xl(Gme,jme,o),t=Xl(zme,Hme,wa(t)),o<1?(i=c=>{const u=c*o,f=u*t,p=u-n,m=qC(c,o),y=Math.exp(-f);return HE-p/m*y},s=c=>{const f=c*o*t,p=f*n+n,m=Math.pow(o,2)*Math.pow(c,2)*t,y=Math.exp(-f),S=qC(Math.pow(c,2),o);return(-i(c)+HE>0?-1:1)*((p-m)*y)/S}):(i=c=>{const u=Math.exp(-c*t),f=(c-n)*t+1;return-HE+u*f},s=c=>{const u=Math.exp(-c*t),f=(n-c)*(t*t);return u*f});const a=5/t,l=Kme(i,s,a);if(t=lu(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const Xme=12;function Kme(t,e,n){let r=n;for(let i=1;i<Xme;i++)r=r-t(r)/e(r);return r}function qC(t,e){return t*Math.sqrt(1-e*e)}const $me=["duration","bounce"],Jme=["stiffness","damping","mass"];function SF(t,e){return e.some(n=>t[n]!==void 0)}function qme(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!SF(t,Jme)&&SF(t,$me)){const n=Wme(t);e={...e,...n,velocity:0,mass:1},e.isResolvedFromDuration=!0}return e}function cG({keyframes:t,restDelta:e,restSpeed:n,...r}){const i=t[0],s=t[t.length-1],o={done:!1,value:i},{stiffness:a,damping:l,mass:c,velocity:u,duration:f,isResolvedFromDuration:p}=qme(r),m=u?-wa(u):0,y=l/(2*Math.sqrt(a*c)),S=s-i,v=wa(Math.sqrt(a/c)),g=Math.abs(S)<5;n||(n=g?.01:2),e||(e=g?.005:.5);let _;if(y<1){const A=qC(v,y);_=E=>{const b=Math.exp(-y*v*E);return s-b*((m+y*v*S)/A*Math.sin(A*E)+S*Math.cos(A*E))}}else if(y===1)_=A=>s-Math.exp(-v*A)*(S+(m+v*S)*A);else{const A=v*Math.sqrt(y*y-1);_=E=>{const b=Math.exp(-y*v*E),C=Math.min(A*E,300);return s-b*((m+y*v*S)*Math.sinh(C)+A*S*Math.cosh(C))/A}}return{calculatedDuration:p&&f||null,next:A=>{const E=_(A);if(p)o.done=A>=f;else{let b=m;A!==0&&(y<1?b=lG(_,A,E):b=0);const C=Math.abs(b)<=n,P=Math.abs(s-E)<=e;o.done=C&&P}return o.value=o.done?s:E,o}}}function AF({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const f=t[0],p={done:!1,value:f},m=L=>a!==void 0&&L<a||l!==void 0&&L>l,y=L=>a===void 0?l:l===void 0||Math.abs(a-L)<Math.abs(l-L)?a:l;let S=n*e;const v=f+S,g=o===void 0?v:o(v);g!==v&&(S=g-f);const _=L=>-S*Math.exp(-L/r),A=L=>g+_(L),E=L=>{const N=_(L),T=A(L);p.done=Math.abs(N)<=c,p.value=p.done?g:T};let b,C;const P=L=>{m(p.value)&&(b=L,C=cG({keyframes:[p.value,y(p.value)],velocity:lG(A,L,p.value),damping:i,stiffness:s,restDelta:c,restSpeed:u}))};return P(0),{calculatedDuration:null,next:L=>{let N=!1;return!C&&b===void 0&&(N=!0,E(L),P(L)),b!==void 0&&L>b?C.next(L-b):(!N&&E(L),p)}}}const Yme=t=>{const e=({timestamp:n})=>t(n);return{start:()=>un.update(e,!0),stop:()=>jo(e),now:()=>ur.isProcessing?ur.timestamp:performance.now()}},wF=2e4;function EF(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<wF;)e+=n,r=t.next(e);return e>=wF?1/0:e}const Qme={decay:AF,inertia:AF,tween:Ex,keyframes:Ex,spring:cG};function Mx({autoplay:t=!0,delay:e=0,driver:n=Yme,keyframes:r,type:i="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:c,onComplete:u,onUpdate:f,...p}){let m=1,y=!1,S,v;const g=()=>{v=new Promise(Y=>{S=Y})};g();let _;const A=Qme[i]||Ex;let E;A!==Ex&&typeof r[0]!="number"&&(E=GP([0,100],r,{clamp:!1}),r=[0,100]);const b=A({...p,keyframes:r});let C;a==="mirror"&&(C=A({...p,keyframes:[...r].reverse(),velocity:-(p.velocity||0)}));let P="idle",L=null,N=null,T=null;b.calculatedDuration===null&&s&&(b.calculatedDuration=EF(b));const{calculatedDuration:D}=b;let z=1/0,j=1/0;D!==null&&(z=D+o,j=z*(s+1)-o);let H=0;const q=Y=>{if(N===null)return;m>0&&(N=Math.min(N,Y)),m<0&&(N=Math.min(Y-j/m,N)),L!==null?H=L:H=Math.round(Y-N)*m;const te=H-e*(m>=0?1:-1),Te=m>=0?te<0:te>j;H=Math.max(te,0),P==="finished"&&L===null&&(H=j);let ne=H,de=b;if(s){const Ue=H/z;let ce=Math.floor(Ue),oe=Ue%1;!oe&&Ue>=1&&(oe=1),oe===1&&ce--,ce=Math.min(ce,s+1);const V=!!(ce%2);V&&(a==="reverse"?(oe=1-oe,o&&(oe-=o/z)):a==="mirror"&&(de=C));let he=Xl(0,1,oe);H>j&&(he=a==="reverse"&&V?1:0),ne=he*z}const Ae=Te?{done:!1,value:r[0]}:de.next(ne);E&&(Ae.value=E(Ae.value));let{done:Pe}=Ae;!Te&&D!==null&&(Pe=m>=0?H>=j:H<=0);const $e=L===null&&(P==="finished"||P==="running"&&Pe);return f&&f(Ae.value),$e&&O(),Ae},Z=()=>{_&&_.stop(),_=void 0},ae=()=>{P="idle",Z(),S(),g(),N=T=null},O=()=>{P="finished",u&&u(),Z(),S()},W=()=>{if(y)return;_||(_=n(q));const Y=_.now();l&&l(),L!==null?N=Y-L:(!N||P==="finished")&&(N=Y),P==="finished"&&g(),T=N,L=null,P="running",_.start()};t&&W();const K={then(Y,te){return v.then(Y,te)},get time(){return wa(H)},set time(Y){Y=lu(Y),H=Y,L!==null||!_||m===0?L=Y:N=_.now()-Y/m},get duration(){const Y=b.calculatedDuration===null?EF(b):b.calculatedDuration;return wa(Y)},get speed(){return m},set speed(Y){Y===m||!_||(m=Y,K.time=wa(H))},get state(){return P},play:W,pause:()=>{P="paused",L=H},stop:()=>{y=!0,P!=="idle"&&(P="idle",c&&c(),ae())},cancel:()=>{T!==null&&q(T),ae()},complete:()=>{P="finished"},sample:Y=>(N=0,q(Y))};return K}function Zme(t){let e;return()=>(e===void 0&&(e=t()),e)}const ege=Zme(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),tge=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Av=10,nge=2e4,rge=(t,e)=>e.type==="spring"||t==="backgroundColor"||!zH(e.ease);function ige(t,e,{onUpdate:n,onComplete:r,...i}){if(!(ege()&&tge.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let o=!1,a,l;const c=()=>{l=new Promise(_=>{a=_})};c();let{keyframes:u,duration:f=300,ease:p,times:m}=i;if(rge(e,i)){const _=Mx({...i,repeat:0,delay:0});let A={done:!1,value:u[0]};const E=[];let b=0;for(;!A.done&&b<nge;)A=_.sample(b),E.push(A.value),b+=Av;m=void 0,u=E,f=b-Av,p="linear"}const y=pme(t.owner.current,e,u,{...i,duration:f,ease:p,times:m});i.syncStart&&(y.startTime=ur.isProcessing?ur.timestamp:document.timeline?document.timeline.currentTime:performance.now());const S=()=>y.cancel(),v=()=>{un.update(S),a(),c()};return y.onfinish=()=>{t.set(mme(u,i)),r&&r(),v()},{then(_,A){return l.then(_,A)},attachTimeline(_){return y.timeline=_,y.onfinish=null,jn},get time(){return wa(y.currentTime||0)},set time(_){y.currentTime=lu(_)},get speed(){return y.playbackRate},set speed(_){y.playbackRate=_},get duration(){return wa(f)},play:()=>{o||(y.play(),jo(S))},pause:()=>y.pause(),stop:()=>{if(o=!0,y.playState==="idle")return;const{currentTime:_}=y;if(_){const A=Mx({...i,autoplay:!1});t.setWithVelocity(A.sample(_-Av).value,A.sample(_).value,Av)}v()},complete:()=>y.finish(),cancel:v}}function sge({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const i=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:jn,pause:jn,stop:jn,then:s=>(s(),Promise.resolve()),cancel:jn,complete:jn});return e?Mx({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const oge={type:"spring",stiffness:500,damping:25,restSpeed:10},age=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),lge={type:"keyframes",duration:.8},cge={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},uge=(t,{keyframes:e})=>e.length>2?lge:Du.has(t)?t.startsWith("scale")?age(e[1]):oge:cge,YC=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Kl.test(e)||e==="0")&&!e.startsWith("url(")),hge=new Set(["brightness","contrast","saturate","opacity"]);function fge(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(pS)||[];if(!r)return t;const i=n.replace(r,"");let s=hge.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const dge=/([a-z-]*)\(.*?\)/g,QC={...Kl,getAnimatableNone:t=>{const e=t.match(dge);return e?e.map(fge).join(" "):t}},pge={...MH,color:gi,backgroundColor:gi,outlineColor:gi,fill:gi,stroke:gi,borderColor:gi,borderTopColor:gi,borderRightColor:gi,borderBottomColor:gi,borderLeftColor:gi,filter:QC,WebkitFilter:QC},WP=t=>pge[t];function uG(t,e){let n=WP(t);return n!==QC&&(n=Kl),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const hG=t=>/^0[^.\s]+$/.test(t);function mge(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||hG(t)}function gge(t,e,n,r){const i=YC(e,n);let s;Array.isArray(n)?s=[...n]:s=[null,n];const o=r.from!==void 0?r.from:t.get();let a;const l=[];for(let c=0;c<s.length;c++)s[c]===null&&(s[c]=c===0?o:s[c-1]),mge(s[c])&&l.push(c),typeof s[c]=="string"&&s[c]!=="none"&&s[c]!=="0"&&(a=s[c]);if(i&&l.length&&a)for(let c=0;c<l.length;c++){const u=l[c];s[u]=uG(e,a)}return s}function yge({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}function fG(t,e){return t[e]||t.default||t}const XP=(t,e,n,r={})=>i=>{const s=fG(r,t)||{},o=s.delay||r.delay||0;let{elapsed:a=0}=r;a=a-lu(o);const l=gge(e,t,n,s),c=l[0],u=l[l.length-1],f=YC(t,c),p=YC(t,u);let m={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-a,onUpdate:y=>{e.set(y),s.onUpdate&&s.onUpdate(y)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if(yge(s)||(m={...m,...uge(t,m)}),m.duration&&(m.duration=lu(m.duration)),m.repeatDelay&&(m.repeatDelay=lu(m.repeatDelay)),!f||!p||dme.current||s.type===!1)return sge(m);if(e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const y=ige(e,t,m);if(y)return y}return Mx(m)};function Tx(t){return!!(ki(t)&&t.add)}const dG=t=>/^\-?\d*\.?\d+$/.test(t);function KP(t,e){t.indexOf(e)===-1&&t.push(e)}function $P(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class JP{constructor(){this.subscriptions=[]}add(e){return KP(this.subscriptions,e),()=>$P(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const vge=t=>!isNaN(parseFloat(t));class _ge{constructor(e,n={}){this.version="10.16.4",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:s,timestamp:o}=ur;this.lastUpdated!==o&&(this.timeDelta=s,this.lastUpdated=o,un.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>un.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=vge(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new JP);const r=this.events[e].add(n);return e==="change"?()=>{r(),un.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?jP(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Po(t,e){return new _ge(t,e)}const pG=t=>e=>e.test(t),xge={test:t=>t==="auto",parse:t=>t},mG=[Bu,yt,ko,el,Tpe,Mpe,xge],sp=t=>mG.find(pG(t)),Sge=[...mG,gi,Kl],Age=t=>Sge.find(pG(t));function wge(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Po(n))}function qP(t,e){const n=gS(t,e);let{transitionEnd:r={},transition:i={},...s}=n?t.makeTargetAnimatable(n,!1):{};s={...s,...r};for(const o in s){const a=Vpe(s[o]);wge(t,o,a)}}function ZC(t,e){[...e].reverse().forEach(r=>{const i=t.getVariant(r);i&&qP(t,i),t.variantChildren&&t.variantChildren.forEach(s=>{ZC(s,e)})})}function Ege(t,e){if(Array.isArray(e))return ZC(t,e);if(typeof e=="string")return ZC(t,[e]);qP(t,e)}function Mge(t,e,n){var r,i;const s=Object.keys(e).filter(a=>!t.hasValue(a)),o=s.length;if(o)for(let a=0;a<o;a++){const l=s[a],c=e[l];let u=null;Array.isArray(c)&&(u=c[0]),u===null&&(u=(i=(r=n[l])!==null&&r!==void 0?r:t.readValue(l))!==null&&i!==void 0?i:e[l]),u!=null&&(typeof u=="string"&&(dG(u)||hG(u))?u=parseFloat(u):!Age(u)&&Kl.test(c)&&(u=uG(l,c)),t.addValue(l,Po(u,{owner:t})),n[l]===void 0&&(n[l]=u),u!==null&&t.setBaseTarget(l,u))}}function Tge(t,e){return e?(e[t]||e.default||e).from:void 0}function Cge(t,e,n){const r={};for(const i in t){const s=Tge(i,e);if(s!==void 0)r[i]=s;else{const o=n.getValue(i);o&&(r[i]=o.get())}}return r}function bge({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function gG(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const l=t.getValue("willChange");r&&(s=r);const c=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const f in a){const p=t.getValue(f),m=a[f];if(!p||m===void 0||u&&bge(u,f))continue;const y={delay:n,elapsed:0,...s};if(window.HandoffAppearAnimations&&!p.hasAnimated){const v=t.getProps()[hme];v&&(y.elapsed=window.HandoffAppearAnimations(v,f,p,un),y.syncStart=!0)}p.start(XP(f,p,m,t.shouldReduceMotion&&Du.has(f)?{type:!1}:y));const S=p.animation;Tx(l)&&(l.add(f),S.then(()=>l.remove(f))),c.push(S)}return o&&Promise.all(c).then(()=>{o&&qP(t,o)}),c}function eb(t,e,n={}){const r=gS(t,e,n.custom);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(gG(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:u,staggerDirection:f}=i;return Rge(t,e,c+l,u,f,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[l,c]=a==="beforeChildren"?[s,o]:[o,s];return l().then(()=>c())}else return Promise.all([s(),o(n.delay)])}function Rge(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(Pge).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(eb(c,e,{...s,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function Pge(t,e){return t.sortNodePosition(e)}function yG(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>eb(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=eb(t,e,n);else{const i=typeof e=="function"?gS(t,e,n.custom):e;r=Promise.all(gG(t,i,n))}return r.then(()=>t.notify("AnimationComplete",e))}const Ige=[...RP].reverse(),Lge=RP.length;function Dge(t){return e=>Promise.all(e.map(({animation:n,options:r})=>yG(t,n,r)))}function Bge(t){let e=Dge(t);const n=Oge();let r=!0;const i=(l,c)=>{const u=gS(t,c);if(u){const{transition:f,transitionEnd:p,...m}=u;l={...l,...m,...p}}return l};function s(l){e=l(t)}function o(l,c){const u=t.getProps(),f=t.getVariantContext(!0)||{},p=[],m=new Set;let y={},S=1/0;for(let g=0;g<Lge;g++){const _=Ige[g],A=n[_],E=u[_]!==void 0?u[_]:f[_],b=ng(E),C=_===c?A.isActive:null;C===!1&&(S=g);let P=E===f[_]&&E!==u[_]&&b;if(P&&r&&t.manuallyAnimateOnMount&&(P=!1),A.protectedKeys={...y},!A.isActive&&C===null||!E&&!A.prevProp||fS(E)||typeof E=="boolean")continue;const L=Nge(A.prevProp,E);let N=L||_===c&&A.isActive&&!P&&b||g>S&&b;const T=Array.isArray(E)?E:[E];let D=T.reduce(i,{});C===!1&&(D={});const{prevResolvedValues:z={}}=A,j={...z,...D},H=q=>{N=!0,m.delete(q),A.needsAnimating[q]=!0};for(const q in j){const Z=D[q],ae=z[q];y.hasOwnProperty(q)||(Z!==ae?Ax(Z)&&Ax(ae)?!UH(Z,ae)||L?H(q):A.protectedKeys[q]=!0:Z!==void 0?H(q):m.add(q):Z!==void 0&&m.has(q)?H(q):A.protectedKeys[q]=!0)}A.prevProp=E,A.prevResolvedValues=D,A.isActive&&(y={...y,...D}),r&&t.blockInitialAnimation&&(N=!1),N&&!P&&p.push(...T.map(q=>({animation:q,options:{type:_,...l}})))}if(m.size){const g={};m.forEach(_=>{const A=t.getBaseTarget(_);A!==void 0&&(g[_]=A)}),p.push({animation:g})}let v=!!p.length;return r&&u.initial===!1&&!t.manuallyAnimateOnMount&&(v=!1),r=!1,v?e(p):Promise.resolve()}function a(l,c,u){var f;if(n[l].isActive===c)return Promise.resolve();(f=t.variantChildren)===null||f===void 0||f.forEach(m=>{var y;return(y=m.animationState)===null||y===void 0?void 0:y.setActive(l,c)}),n[l].isActive=c;const p=o(u,l);for(const m in n)n[m].protectedKeys={};return p}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n}}function Nge(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!UH(e,t):!1}function wc(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Oge(){return{animate:wc(!0),whileInView:wc(),whileHover:wc(),whileTap:wc(),whileDrag:wc(),whileFocus:wc(),exit:wc()}}class Fge extends nc{constructor(e){super(e),e.animationState||(e.animationState=Bge(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),fS(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let kge=0;class Uge extends nc{constructor(){super(...arguments),this.id=kge++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Vge={animation:{Feature:Fge},exit:{Feature:Uge}},MF=(t,e)=>Math.abs(t-e);function zge(t,e){const n=MF(t.x,e.x),r=MF(t.y,e.y);return Math.sqrt(n**2+r**2)}class vG{constructor(e,n,{transformPagePoint:r}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const c=jE(this.lastMoveEventInfo,this.history),u=this.startEvent!==null,f=zge(c.offset,{x:0,y:0})>=3;if(!u&&!f)return;const{point:p}=c,{timestamp:m}=ur;this.history.push({...p,timestamp:m});const{onStart:y,onMove:S}=this.handlers;u||(y&&y(this.lastMoveEvent,c),this.startEvent=this.lastMoveEvent),S&&S(this.lastMoveEvent,c)},this.handlePointerMove=(c,u)=>{this.lastMoveEvent=c,this.lastMoveEventInfo=GE(u,this.transformPagePoint),un.update(this.updatePoint,!0)},this.handlePointerUp=(c,u)=>{if(this.end(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const{onEnd:f,onSessionEnd:p}=this.handlers,m=jE(c.type==="pointercancel"?this.lastMoveEventInfo:GE(u,this.transformPagePoint),this.history);this.startEvent&&f&&f(c,m),p&&p(c,m)},!BH(e))return;this.handlers=n,this.transformPagePoint=r;const i=mS(e),s=GE(i,this.transformPagePoint),{point:o}=s,{timestamp:a}=ur;this.history=[{...o,timestamp:a}];const{onSessionStart:l}=n;l&&l(e,jE(s,this.history)),this.removeListeners=Bl(Aa(window,"pointermove",this.handlePointerMove),Aa(window,"pointerup",this.handlePointerUp),Aa(window,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),jo(this.updatePoint)}}function GE(t,e){return e?{point:e(t.point)}:t}function TF(t,e){return{x:t.x-e.x,y:t.y-e.y}}function jE({point:t},e){return{point:t,delta:TF(t,_G(e)),offset:TF(t,Hge(e)),velocity:Gge(e,.1)}}function Hge(t){return t[0]}function _G(t){return t[t.length-1]}function Gge(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=_G(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>lu(e)));)n--;if(!r)return{x:0,y:0};const s=wa(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function ss(t){return t.max-t.min}function tb(t,e=0,n=.01){return Math.abs(t-e)<=n}function CF(t,e,n,r=.5){t.origin=r,t.originPoint=Bn(e.min,e.max,t.origin),t.scale=ss(n)/ss(e),(tb(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=Bn(n.min,n.max,t.origin)-t.originPoint,(tb(t.translate)||isNaN(t.translate))&&(t.translate=0)}function Xp(t,e,n,r){CF(t.x,e.x,n.x,r?r.originX:void 0),CF(t.y,e.y,n.y,r?r.originY:void 0)}function bF(t,e,n){t.min=n.min+e.min,t.max=t.min+ss(e)}function jge(t,e,n){bF(t.x,e.x,n.x),bF(t.y,e.y,n.y)}function RF(t,e,n){t.min=e.min-n.min,t.max=t.min+ss(e)}function Kp(t,e,n){RF(t.x,e.x,n.x),RF(t.y,e.y,n.y)}function Wge(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Bn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Bn(n,t,r.max):Math.min(t,n)),t}function PF(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Xge(t,{top:e,left:n,bottom:r,right:i}){return{x:PF(t.x,n,i),y:PF(t.y,e,r)}}function IF(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function Kge(t,e){return{x:IF(t.x,e.x),y:IF(t.y,e.y)}}function $ge(t,e){let n=.5;const r=ss(t),i=ss(e);return i>r?n=Wf(e.min,e.max-r,t.min):r>i&&(n=Wf(t.min,t.max-i,e.min)),Xl(0,1,n)}function Jge(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const nb=.35;function qge(t=nb){return t===!1?t=0:t===!0&&(t=nb),{x:LF(t,"left","right"),y:LF(t,"top","bottom")}}function LF(t,e,n){return{min:DF(t,e),max:DF(t,n)}}function DF(t,e){return typeof t=="number"?t:t[e]||0}const BF=()=>({translate:0,scale:1,origin:0,originPoint:0}),Jh=()=>({x:BF(),y:BF()}),NF=()=>({min:0,max:0}),rr=()=>({x:NF(),y:NF()});function So(t){return[t("x"),t("y")]}function xG({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Yge({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Qge(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function WE(t){return t===void 0||t===1}function rb({scale:t,scaleX:e,scaleY:n}){return!WE(t)||!WE(e)||!WE(n)}function Dc(t){return rb(t)||SG(t)||t.z||t.rotate||t.rotateX||t.rotateY}function SG(t){return OF(t.x)||OF(t.y)}function OF(t){return t&&t!=="0%"}function Cx(t,e,n){const r=t-n,i=e*r;return n+i}function FF(t,e,n,r,i){return i!==void 0&&(t=Cx(t,i,r)),Cx(t,n,r)+e}function ib(t,e=0,n=1,r,i){t.min=FF(t.min,e,n,r,i),t.max=FF(t.max,e,n,r,i)}function AG(t,{x:e,y:n}){ib(t.x,e.translate,e.scale,e.originPoint),ib(t.y,n.translate,n.scale,n.originPoint)}function Zge(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const l=s.instance;l&&l.style&&l.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&qh(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,AG(t,o)),r&&Dc(s.latestValues)&&qh(t,s.latestValues))}e.x=kF(e.x),e.y=kF(e.y)}function kF(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function ol(t,e){t.min=t.min+e,t.max=t.max+e}function UF(t,e,[n,r,i]){const s=e[i]!==void 0?e[i]:.5,o=Bn(t.min,t.max,s);ib(t,e[n],e[r],o,e.scale)}const eye=["x","scaleX","originX"],tye=["y","scaleY","originY"];function qh(t,e){UF(t.x,e,eye),UF(t.y,e,tye)}function wG(t,e){return xG(Qge(t.getBoundingClientRect(),e))}function nye(t,e,n){const r=wG(t,n),{scroll:i}=e;return i&&(ol(r.x,i.offset.x),ol(r.y,i.offset.y)),r}const rye=new WeakMap;class iye{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=rr(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=l=>{this.stopAnimation(),n&&this.snapToCursor(mS(l,"page").point)},s=(l,c)=>{const{drag:u,dragPropagation:f,onDragStart:p}=this.getProps();if(u&&!f&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=OH(u),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),So(y=>{let S=this.getAxisMotionValue(y).get()||0;if(ko.test(S)){const{projection:v}=this.visualElement;if(v&&v.layout){const g=v.layout.layoutBox[y];g&&(S=ss(g)*(parseFloat(S)/100))}}this.originPoint[y]=S}),p&&un.update(()=>p(l,c),!1,!0);const{animationState:m}=this.visualElement;m&&m.setActive("whileDrag",!0)},o=(l,c)=>{const{dragPropagation:u,dragDirectionLock:f,onDirectionLock:p,onDrag:m}=this.getProps();if(!u&&!this.openGlobalLock)return;const{offset:y}=c;if(f&&this.currentDirection===null){this.currentDirection=sye(y),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",c.point,y),this.updateAxis("y",c.point,y),this.visualElement.render(),m&&m(l,c)},a=(l,c)=>this.stop(l,c);this.panSession=new vG(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a},{transformPagePoint:this.visualElement.getTransformPagePoint()})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&un.update(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!wv(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=Wge(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),{layout:r}=this.visualElement.projection||{},i=this.constraints;e&&Kh(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=Xge(r.layoutBox,e):this.constraints=!1,this.elastic=qge(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&So(s=>{this.getAxisMotionValue(s)&&(this.constraints[s]=Jge(r.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Kh(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=nye(r,i.root,this.visualElement.getTransformPagePoint());let o=Kge(i.layout.layoutBox,s);if(n){const a=n(Yge(o));this.hasMutatedConstraints=!!a,a&&(o=xG(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=So(u=>{if(!wv(u,n,this.currentDirection))return;let f=l&&l[u]||{};o&&(f={min:0,max:0});const p=i?200:1e6,m=i?40:1e7,y={type:"inertia",velocity:r?e[u]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(u,y)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(XP(e,r,0,n))}stopAnimation(){So(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){So(n=>{const{drag:r}=this.getProps();if(!wv(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-Bn(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Kh(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};So(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();i[o]=$ge({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),So(o=>{if(!wv(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Bn(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;rye.set(this.visualElement,this);const e=this.visualElement.current,n=Aa(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Kh(l)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const o=va(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(So(u=>{const f=this.getAxisMotionValue(u);f&&(this.originPoint[u]+=l[u].translate,f.set(f.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=nb,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function wv(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function sye(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class oye extends nc{constructor(e){super(e),this.removeGroupControls=jn,this.removeListeners=jn,this.controls=new iye(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||jn}unmount(){this.removeGroupControls(),this.removeListeners()}}const VF=t=>(e,n)=>{t&&un.update(()=>t(e,n))};class aye extends nc{constructor(){super(...arguments),this.removePointerDownListener=jn}onPointerDown(e){this.session=new vG(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:VF(e),onStart:VF(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&un.update(()=>i(s,o))}}}mount(){this.removePointerDownListener=Aa(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function lye(){const t=$.useContext(CP);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=$.useId();return $.useEffect(()=>r(i),[]),!e&&n?[!1,()=>n&&n(i)]:[!0]}const Yv={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function zF(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const op={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(yt.test(t))t=parseFloat(t);else return t;const n=zF(t,e.target.x),r=zF(t,e.target.y);return`${n}% ${r}%`}},cye={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Kl.parse(t);if(i.length>5)return r;const s=Kl.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=Bn(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};class uye extends Ys.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;vpe(hye),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Yv.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||un.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function EG(t){const[e,n]=lye(),r=$.useContext(_H);return Ys.createElement(uye,{...t,layoutGroup:r,switchLayoutGroup:$.useContext(xH),isPresent:e,safeToRemove:n})}const hye={borderRadius:{...op,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:op,borderTopRightRadius:op,borderBottomLeftRadius:op,borderBottomRightRadius:op,boxShadow:cye},MG=["TopLeft","TopRight","BottomLeft","BottomRight"],fye=MG.length,HF=t=>typeof t=="string"?parseFloat(t):t,GF=t=>typeof t=="number"||yt.test(t);function dye(t,e,n,r,i,s){i?(t.opacity=Bn(0,n.opacity!==void 0?n.opacity:1,pye(r)),t.opacityExit=Bn(e.opacity!==void 0?e.opacity:1,0,mye(r))):s&&(t.opacity=Bn(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<fye;o++){const a=`border${MG[o]}Radius`;let l=jF(e,a),c=jF(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||GF(l)===GF(c)?(t[a]=Math.max(Bn(HF(l),HF(c),r),0),(ko.test(c)||ko.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Bn(e.rotate||0,n.rotate||0,r))}function jF(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const pye=TG(0,.5,VP),mye=TG(.5,.95,jn);function TG(t,e,n){return r=>r<t?0:r>e?1:n(Wf(t,e,r))}function WF(t,e){t.min=e.min,t.max=e.max}function xs(t,e){WF(t.x,e.x),WF(t.y,e.y)}function XF(t,e,n,r,i){return t-=e,t=Cx(t,1/n,r),i!==void 0&&(t=Cx(t,1/i,r)),t}function gye(t,e=0,n=1,r=.5,i,s=t,o=t){if(ko.test(e)&&(e=parseFloat(e),e=Bn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Bn(s.min,s.max,r);t===s&&(a-=e),t.min=XF(t.min,e,n,a,i),t.max=XF(t.max,e,n,a,i)}function KF(t,e,[n,r,i],s,o){gye(t,e[n],e[r],e[i],e.scale,s,o)}const yye=["x","scaleX","originX"],vye=["y","scaleY","originY"];function $F(t,e,n,r){KF(t.x,e,yye,n?n.x:void 0,r?r.x:void 0),KF(t.y,e,vye,n?n.y:void 0,r?r.y:void 0)}function JF(t){return t.translate===0&&t.scale===1}function CG(t){return JF(t.x)&&JF(t.y)}function _ye(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function bG(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function qF(t){return ss(t.x)/ss(t.y)}class xye{constructor(){this.members=[]}add(e){KP(this.members,e),e.scheduleRender()}remove(e){if($P(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function YF(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y;if((i||s)&&(r=`translate3d(${i}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:l,rotateX:c,rotateY:u}=n;l&&(r+=`rotate(${l}deg) `),c&&(r+=`rotateX(${c}deg) `),u&&(r+=`rotateY(${u}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const Sye=(t,e)=>t.depth-e.depth;class Aye{constructor(){this.children=[],this.isDirty=!1}add(e){KP(this.children,e),this.isDirty=!0}remove(e){$P(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Sye),this.isDirty=!1,this.children.forEach(e)}}function wye(t,e){const n=performance.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(jo(r),t(s-e))};return un.read(r,!0),()=>jo(r)}function Eye(t){window.MotionDebug&&window.MotionDebug.record(t)}function Mye(t){return t instanceof SVGElement&&t.tagName!=="svg"}function Tye(t,e,n){const r=ki(t)?t:Po(t);return r.start(XP("",r,e,n)),r.animation}const QF=["","X","Y","Z"],ZF=1e3;let Cye=0;const Bc={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function RG({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=Cye++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{Bc.totalNodes=Bc.resolvedTargetDeltas=Bc.recalculatedProjection=0,this.nodes.forEach(Pye),this.nodes.forEach(Nye),this.nodes.forEach(Oye),this.nodes.forEach(Iye),Eye(Bc)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Aye)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new JP),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Mye(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let f;const p=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=wye(p,250),Yv.hasAnimatedSinceResize&&(Yv.hasAnimatedSinceResize=!1,this.nodes.forEach(t4))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p,hasRelativeTargetChanged:m,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const S=this.options.transition||u.getDefaultTransition()||zye,{onLayoutAnimationStart:v,onLayoutAnimationComplete:g}=u.getProps(),_=!this.targetLayout||!bG(this.targetLayout,y)||m,A=!p&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||A||p&&(_||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,A);const E={...fG(S,"layout"),onPlay:v,onComplete:g};(u.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E)}else p||t4(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,jo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Fye),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const f=this.path[u];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(e4);return}this.isUpdating||this.nodes.forEach(Dye),this.isUpdating=!1,this.nodes.forEach(Bye),this.nodes.forEach(bye),this.nodes.forEach(Rye),this.clearAllSnapshots();const a=performance.now();ur.delta=Xl(0,1e3/60,a-ur.timestamp),ur.timestamp=a,ur.isProcessing=!0,NE.update.process(ur),NE.preRender.process(ur),NE.render.process(ur),ur.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(Lye),this.sharedNodes.forEach(kye)}scheduleUpdateProjection(){un.preRender(this.updateProjection,!1,!0)}scheduleCheckAfterUnmount(){un.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=rr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!CG(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||Dc(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),Hye(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return rr();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(ol(a.x,l.offset.x),ol(a.y,l.offset.y)),a}removeElementScroll(o){const a=rr();xs(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:u,options:f}=c;if(c!==this.root&&u&&f.layoutScroll){if(u.isRoot){xs(a,o);const{scroll:p}=this.root;p&&(ol(a.x,-p.offset.x),ol(a.y,-p.offset.y))}ol(a.x,u.offset.x),ol(a.y,u.offset.y)}}return a}applyTransform(o,a=!1){const l=rr();xs(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&qh(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Dc(u.latestValues)&&qh(l,u.latestValues)}return Dc(this.latestValues)&&qh(l,this.latestValues),l}removeTransform(o){const a=rr();xs(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Dc(c.latestValues))continue;rb(c.latestValues)&&c.updateSnapshot();const u=rr(),f=c.measurePageBox();xs(u,f),$F(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Dc(this.latestValues)&&$F(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ur.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:f,layoutId:p}=this.options;if(!(!this.layout||!(f||p))){if(this.resolvedRelativeTargetAt=ur.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=rr(),this.relativeTargetOrigin=rr(),Kp(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),xs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=rr(),this.targetWithTransforms=rr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),jge(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):xs(this.target,this.layout.layoutBox),AG(this.target,this.targetDelta)):xs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=rr(),this.relativeTargetOrigin=rr(),Kp(this.relativeTargetOrigin,this.target,m.target),xs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Bc.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||rb(this.parent.latestValues)||SG(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===ur.timestamp&&(c=!1),c)return;const{layout:u,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||f))return;xs(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;Zge(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:y}=a;if(!y){this.projectionTransform&&(this.projectionDelta=Jh(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Jh(),this.projectionDeltaWithTransform=Jh());const S=this.projectionTransform;Xp(this.projectionDelta,this.layoutCorrected,y,this.latestValues),this.projectionTransform=YF(this.projectionDelta,this.treeScale),(this.projectionTransform!==S||this.treeScale.x!==p||this.treeScale.y!==m)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y)),Bc.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},f=Jh();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=rr(),m=l?l.source:void 0,y=this.layout?this.layout.source:void 0,S=m!==y,v=this.getStack(),g=!v||v.members.length<=1,_=!!(S&&!g&&this.options.crossfade===!0&&!this.path.some(Vye));this.animationProgress=0;let A;this.mixTargetDelta=E=>{const b=E/1e3;n4(f.x,o.x,b),n4(f.y,o.y,b),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Kp(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Uye(this.relativeTarget,this.relativeTargetOrigin,p,b),A&&_ye(this.relativeTarget,A)&&(this.isProjectionDirty=!1),A||(A=rr()),xs(A,this.relativeTarget)),S&&(this.animationValues=u,dye(u,c,this.latestValues,b,_,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=b},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(jo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=un.update(()=>{Yv.hasAnimatedSinceResize=!0,this.currentAnimation=Tye(0,ZF,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(ZF),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&PG(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||rr();const f=ss(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const p=ss(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}xs(a,l),qh(a,u),Xp(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new xye),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const c={};for(let u=0;u<QF.length;u++){const f="rotate"+QF[u];l[f]&&(c[f]=l[f],o.setStaticValue(f,0))}o.render();for(const u in c)o.setStaticValue(u,c[u]);o.scheduleRender()}getProjectionStyles(o={}){var a,l;const c={};if(!this.instance||this.isSVG)return c;if(this.isVisible)c.visibility="";else return{visibility:"hidden"};const u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=qv(o.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const S={};return this.options.layoutId&&(S.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,S.pointerEvents=qv(o.pointerEvents)||""),this.hasProjected&&!Dc(this.latestValues)&&(S.transform=u?u({},""):"none",this.hasProjected=!1),S}const p=f.animationValues||f.latestValues;this.applyTransformsToTarget(),c.transform=YF(this.projectionDeltaWithTransform,this.treeScale,p),u&&(c.transform=u(p,c.transform));const{x:m,y}=this.projectionDelta;c.transformOrigin=`${m.origin*100}% ${y.origin*100}% 0`,f.animationValues?c.opacity=f===this?(l=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const S in xx){if(p[S]===void 0)continue;const{correct:v,applyTo:g}=xx[S],_=c.transform==="none"?p[S]:v(p[S],f);if(g){const A=g.length;for(let E=0;E<A;E++)c[g[E]]=_}else c[S]=_}return this.options.layoutId&&(c.pointerEvents=f===this?qv(o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(e4),this.root.sharedNodes.clear()}}}function bye(t){t.updateLayout()}function Rye(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?So(f=>{const p=o?n.measuredBox[f]:n.layoutBox[f],m=ss(p);p.min=r[f].min,p.max=p.min+m}):PG(s,n.layoutBox,r)&&So(f=>{const p=o?n.measuredBox[f]:n.layoutBox[f],m=ss(r[f]);p.max=p.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+m)});const a=Jh();Xp(a,r,n.layoutBox);const l=Jh();o?Xp(l,t.applyTransform(i,!0),n.measuredBox):Xp(l,r,n.layoutBox);const c=!CG(a);let u=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:m}=f;if(p&&m){const y=rr();Kp(y,n.layoutBox,p.layoutBox);const S=rr();Kp(S,r,m.layoutBox),bG(y,S)||(u=!0),f.options.layoutRoot&&(t.relativeTarget=S,t.relativeTargetOrigin=y,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function Pye(t){Bc.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Iye(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Lye(t){t.clearSnapshot()}function e4(t){t.clearMeasurements()}function Dye(t){t.isLayoutDirty=!1}function Bye(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function t4(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Nye(t){t.resolveTargetDelta()}function Oye(t){t.calcProjection()}function Fye(t){t.resetRotation()}function kye(t){t.removeLeadSnapshot()}function n4(t,e,n){t.translate=Bn(e.translate,0,n),t.scale=Bn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function r4(t,e,n,r){t.min=Bn(e.min,n.min,r),t.max=Bn(e.max,n.max,r)}function Uye(t,e,n,r){r4(t.x,e.x,n.x,r),r4(t.y,e.y,n.y,r)}function Vye(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const zye={duration:.45,ease:[.4,0,.1,1]},i4=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),s4=i4("applewebkit/")&&!i4("chrome/")?Math.round:jn;function o4(t){t.min=s4(t.min),t.max=s4(t.max)}function Hye(t){o4(t.x),o4(t.y)}function PG(t,e,n){return t==="position"||t==="preserve-aspect"&&!tb(qF(e),qF(n),.2)}const Gye=RG({attachResizeListener:(t,e)=>va(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),XE={current:void 0},IG=RG({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!XE.current){const t=new Gye({});t.mount(window),t.setOptions({layoutScroll:!0}),XE.current=t}return XE.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),jye={pan:{Feature:aye},drag:{Feature:oye,ProjectionNode:IG,MeasureLayout:EG}},Wye=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function Xye(t){const e=Wye.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function sb(t,e,n=1){const[r,i]=Xye(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return dG(o)?parseFloat(o):o}else return KC(i)?sb(i,e,n+1):i}function Kye(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(i=>{const s=i.get();if(!KC(s))return;const o=sb(s,r);o&&i.set(o)});for(const i in e){const s=e[i];if(!KC(s))continue;const o=sb(s,r);o&&(e[i]=o,n||(n={}),n[i]===void 0&&(n[i]=s))}return{target:e,transitionEnd:n}}const $ye=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),LG=t=>$ye.has(t),Jye=t=>Object.keys(t).some(LG),a4=t=>t===Bu||t===yt,l4=(t,e)=>parseFloat(t.split(", ")[e]),c4=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return l4(i[1],e);{const s=r.match(/^matrix\((.+)\)$/);return s?l4(s[1],t):0}},qye=new Set(["x","y","z"]),Yye=Wg.filter(t=>!qye.has(t));function Qye(t){const e=[];return Yye.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Xf={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:c4(4,13),y:c4(5,14)};Xf.translateX=Xf.x;Xf.translateY=Xf.y;const Zye=(t,e,n)=>{const r=e.measureViewportBox(),i=e.current,s=getComputedStyle(i),{display:o}=s,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(c=>{a[c]=Xf[c](r,s)}),e.render();const l=e.measureViewportBox();return n.forEach(c=>{const u=e.getValue(c);u&&u.jump(a[c]),t[c]=Xf[c](l,s)}),t},e0e=(t,e,n={},r={})=>{e={...e},r={...r};const i=Object.keys(e).filter(LG);let s=[],o=!1;const a=[];if(i.forEach(l=>{const c=t.getValue(l);if(!t.hasValue(l))return;let u=n[l],f=sp(u);const p=e[l];let m;if(Ax(p)){const y=p.length,S=p[0]===null?1:0;u=p[S],f=sp(u);for(let v=S;v<y&&p[v]!==null;v++)m?yS(sp(p[v])===m):m=sp(p[v])}else m=sp(p);if(f!==m)if(a4(f)&&a4(m)){const y=c.get();typeof y=="string"&&c.set(parseFloat(y)),typeof p=="string"?e[l]=parseFloat(p):Array.isArray(p)&&m===yt&&(e[l]=p.map(parseFloat))}else f!=null&&f.transform&&(m!=null&&m.transform)&&(u===0||p===0)?u===0?c.set(m.transform(u)):e[l]=f.transform(p):(o||(s=Qye(t),o=!0),a.push(l),r[l]=r[l]!==void 0?r[l]:e[l],c.jump(p))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,c=Zye(e,t,a);return s.length&&s.forEach(([u,f])=>{t.getValue(u).set(f)}),t.render(),hS&&l!==null&&window.scrollTo({top:l}),{target:c,transitionEnd:r}}else return{target:e,transitionEnd:r}};function t0e(t,e,n,r){return Jye(e)?e0e(t,e,n,r):{target:e,transitionEnd:r}}const n0e=(t,e,n,r)=>{const i=Kye(t,e,r);return e=i.target,r=i.transitionEnd,t0e(t,e,n,r)},ob={current:null},DG={current:!1};function r0e(){if(DG.current=!0,!!hS)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>ob.current=t.matches;t.addListener(e),e()}else ob.current=!1}function i0e(t,e,n){const{willChange:r}=e;for(const i in e){const s=e[i],o=n[i];if(ki(s))t.addValue(i,s),Tx(r)&&r.add(i);else if(ki(o))t.addValue(i,Po(s,{owner:t})),Tx(r)&&r.remove(i);else if(o!==s)if(t.hasValue(i)){const a=t.getValue(i);!a.hasAnimated&&a.set(s)}else{const a=t.getStaticValue(i);t.addValue(i,Po(a!==void 0?a:s,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const u4=new WeakMap,BG=Object.keys(rg),s0e=BG.length,h4=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],o0e=PP.length;class a0e{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>un.render(this.render,!1,!0);const{latestValues:a,renderState:l}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.isControllingVariants=dS(n),this.isVariantNode=vH(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...u}=this.scrapeMotionValuesFromProps(n,{});for(const f in u){const p=u[f];a[f]!==void 0&&ki(p)&&(p.set(a[f],!1),Tx(c)&&c.add(f))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,u4.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),DG.current||r0e(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:ob.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){u4.delete(this.current),this.projection&&this.projection.unmount(),jo(this.notifyUpdate),jo(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=Du.has(e),i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&un.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,i,s){let o,a;for(let l=0;l<s0e;l++){const c=BG[l],{isEnabled:u,Feature:f,ProjectionNode:p,MeasureLayout:m}=rg[c];p&&(o=p),u(n)&&(!this.features[c]&&f&&(this.features[c]=new f(this)),m&&(a=m))}if(!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:c,drag:u,dragConstraints:f,layoutScroll:p,layoutRoot:m}=n;this.projection.setOptions({layoutId:l,layout:c,alwaysMeasureLayout:!!u||f&&Kh(f),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:s,layoutScroll:p,layoutRoot:m})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):rr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<h4.length;r++){const i=h4[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s=e["on"+i];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=i0e(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<o0e;r++){const i=PP[r],s=this.props[i];(ng(s)||s===!1)&&(n[i]=s)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Po(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(n=kP(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!ki(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new JP),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class NG extends a0e{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:i},s){let o=Cge(r,e||{},this);if(i&&(n&&(n=i(n)),r&&(r=i(r)),o&&(o=i(o))),s){Mge(this,r,o);const a=n0e(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:n,...r}}}function l0e(t){return window.getComputedStyle(t)}class c0e extends NG{readValueFromInstance(e,n){if(Du.has(n)){const r=WP(n);return r&&r.default||0}else{const r=l0e(e),i=(wH(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return wG(e,n)}build(e,n,r,i){LP(e,n,r,i.transformTemplate)}scrapeMotionValuesFromProps(e,n){return FP(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ki(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,i){RH(e,n,r,i)}}class u0e extends NG{constructor(){super(...arguments),this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Du.has(n)){const r=WP(n);return r&&r.default||0}return n=PH.has(n)?n:OP(n),e.getAttribute(n)}measureInstanceViewportBox(){return rr()}scrapeMotionValuesFromProps(e,n){return LH(e,n)}build(e,n,r,i){BP(e,n,r,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,r,i){IH(e,n,r,i)}mount(e){this.isSVGTag=NP(e.tagName),super.mount(e)}}const h0e=(t,e)=>IP(t)?new u0e(e,{enableHardwareAcceleration:!1}):new c0e(e,{enableHardwareAcceleration:!0}),f0e={layout:{ProjectionNode:IG,MeasureLayout:EG}},d0e={...Vge,...ame,...jye,...f0e},p0e=gpe((t,e)=>$pe(t,e,d0e,h0e));function m0e(t,e,n){var r;if(typeof t=="string"){let i=document;e&&(yS(!!e.current),i=e.current),n?((r=n[t])!==null&&r!==void 0||(n[t]=i.querySelectorAll(t)),t=n[t]):t=i.querySelectorAll(t)}else t instanceof Element&&(t=[t]);return Array.from(t||[])}const Qv=new WeakMap;let tl;function g0e(t,e){if(e){const{inlineSize:n,blockSize:r}=e[0];return{width:n,height:r}}else return t instanceof SVGElement&&"getBBox"in t?t.getBBox():{width:t.offsetWidth,height:t.offsetHeight}}function y0e({target:t,contentRect:e,borderBoxSize:n}){var r;(r=Qv.get(t))===null||r===void 0||r.forEach(i=>{i({target:t,contentSize:e,get size(){return g0e(t,n)}})})}function v0e(t){t.forEach(y0e)}function _0e(){typeof ResizeObserver>"u"||(tl=new ResizeObserver(v0e))}function x0e(t,e){tl||_0e();const n=m0e(t);return n.forEach(r=>{let i=Qv.get(r);i||(i=new Set,Qv.set(r,i)),i.add(e),tl==null||tl.observe(r)}),()=>{n.forEach(r=>{const i=Qv.get(r);i==null||i.delete(e),i!=null&&i.size||tl==null||tl.unobserve(r)})}}const Zv=new Set;let $p;function S0e(){$p=()=>{const t={width:window.innerWidth,height:window.innerHeight},e={target:window,size:t,contentSize:t};Zv.forEach(n=>n(e))},window.addEventListener("resize",$p)}function A0e(t){return Zv.add(t),$p||S0e(),()=>{Zv.delete(t),!Zv.size&&$p&&($p=void 0)}}function w0e(t,e){return typeof t=="function"?A0e(t):x0e(t,e)}const E0e=50,f4=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),M0e=()=>({time:0,x:f4(),y:f4()}),T0e={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function d4(t,e,n,r){const i=n[e],{length:s,position:o}=T0e[e],a=i.current,l=n.time;i.current=t["scroll"+o],i.scrollLength=t["scroll"+s]-t["client"+s],i.offset.length=0,i.offset[0]=0,i.offset[1]=i.scrollLength,i.progress=Wf(0,i.scrollLength,i.current);const c=r-l;i.velocity=c>E0e?0:jP(i.current-a,c)}function C0e(t,e,n){d4(t,"x",e,n),d4(t,"y",e,n),e.time=n}function b0e(t,e){const n={x:0,y:0};let r=t;for(;r&&r!==e;)if(r instanceof HTMLElement)n.x+=r.offsetLeft,n.y+=r.offsetTop,r=r.offsetParent;else if(r.tagName==="svg"){const i=r.getBoundingClientRect();r=r.parentElement;const s=r.getBoundingClientRect();n.x+=i.left-s.left,n.y+=i.top-s.top}else if(r instanceof SVGGraphicsElement){const{x:i,y:s}=r.getBBox();n.x+=i,n.y+=s;let o=null,a=r.parentNode;for(;!o;)a.tagName==="svg"&&(o=a),a=r.parentNode;r=o}else break;return n}const R0e={Enter:[[0,1],[1,1]],Exit:[[0,0],[1,0]],Any:[[1,0],[0,1]],All:[[0,0],[1,1]]},ab={start:0,center:.5,end:1};function p4(t,e,n=0){let r=0;if(ab[t]!==void 0&&(t=ab[t]),typeof t=="string"){const i=parseFloat(t);t.endsWith("px")?r=i:t.endsWith("%")?t=i/100:t.endsWith("vw")?r=i/100*document.documentElement.clientWidth:t.endsWith("vh")?r=i/100*document.documentElement.clientHeight:t=i}return typeof t=="number"&&(r=e*t),n+r}const P0e=[0,0];function I0e(t,e,n,r){let i=Array.isArray(t)?t:P0e,s=0,o=0;return typeof t=="number"?i=[t,t]:typeof t=="string"&&(t=t.trim(),t.includes(" ")?i=t.split(" "):i=[t,ab[t]?t:"0"]),s=p4(i[0],n,r),o=p4(i[1],e),s-o}const L0e={x:0,y:0};function D0e(t){return"getBBox"in t&&t.tagName!=="svg"?t.getBBox():{width:t.clientWidth,height:t.clientHeight}}function B0e(t,e,n){let{offset:r=R0e.All}=n;const{target:i=t,axis:s="y"}=n,o=s==="y"?"height":"width",a=i!==t?b0e(i,t):L0e,l=i===t?{width:t.scrollWidth,height:t.scrollHeight}:D0e(i),c={width:t.clientWidth,height:t.clientHeight};e[s].offset.length=0;let u=!e[s].interpolate;const f=r.length;for(let p=0;p<f;p++){const m=I0e(r[p],c[o],l[o],a[s]);!u&&m!==e[s].interpolatorOffsets[p]&&(u=!0),e[s].offset[p]=m}u&&(e[s].interpolate=GP(e[s].offset,aG(r)),e[s].interpolatorOffsets=[...e[s].offset]),e[s].progress=e[s].interpolate(e[s].current)}function N0e(t,e=t,n){if(n.x.targetOffset=0,n.y.targetOffset=0,e!==t){let r=e;for(;r&&r!==t;)n.x.targetOffset+=r.offsetLeft,n.y.targetOffset+=r.offsetTop,r=r.offsetParent}n.x.targetLength=e===t?e.scrollWidth:e.clientWidth,n.y.targetLength=e===t?e.scrollHeight:e.clientHeight,n.x.containerLength=t.clientWidth,n.y.containerLength=t.clientHeight}function O0e(t,e,n,r={}){return{measure:()=>N0e(t,r.target,n),update:i=>{C0e(t,n,i),(r.offset||r.target)&&B0e(t,n,r)},notify:()=>e(n)}}const ap=new WeakMap,m4=new WeakMap,KE=new WeakMap,g4=t=>t===document.documentElement?window:t;function F0e(t,{container:e=document.documentElement,...n}={}){let r=KE.get(e);r||(r=new Set,KE.set(e,r));const i=M0e(),s=O0e(e,t,i,n);if(r.add(s),!ap.has(e)){const a=()=>{for(const p of r)p.measure()},l=()=>{for(const p of r)p.update(ur.timestamp)},c=()=>{for(const p of r)p.notify()},u=()=>{un.read(a,!1,!0),un.update(l,!1,!0),un.update(c,!1,!0)};ap.set(e,u);const f=g4(e);window.addEventListener("resize",u,{passive:!0}),e!==document.documentElement&&m4.set(e,w0e(e,u)),f.addEventListener("scroll",u,{passive:!0})}const o=ap.get(e);return un.read(o,!1,!0),()=>{var a;jo(o);const l=KE.get(e);if(!l||(l.delete(s),l.size))return;const c=ap.get(e);ap.delete(e),c&&(g4(e).removeEventListener("scroll",c),(a=m4.get(e))===null||a===void 0||a(),window.removeEventListener("resize",c))}}function y4(t,e){fme(!!(!e||e.current))}const k0e=()=>({scrollX:Po(0),scrollY:Po(0),scrollXProgress:Po(0),scrollYProgress:Po(0)});function U0e({container:t,target:e,layoutEffect:n=!0,...r}={}){const i=UP(k0e);return(n?bP:$.useEffect)(()=>(y4("target",e),y4("container",t),F0e(({x:o,y:a})=>{i.scrollX.set(o.current),i.scrollXProgress.set(o.progress),i.scrollY.set(a.current),i.scrollYProgress.set(a.progress)},{...r,container:(t==null?void 0:t.current)||void 0,target:(e==null?void 0:e.current)||void 0})),[t,e,JSON.stringify(r.offset)]),i}function V0e(t){t.values.forEach(e=>e.stop())}function z0e(){const t=new Set,e={subscribe(n){return t.add(n),()=>void t.delete(n)},start(n,r){const i=[];return t.forEach(s=>{i.push(yG(s,n,{transitionOverride:r}))}),Promise.all(i)},set(n){return t.forEach(r=>{Ege(r,n)})},stop(){t.forEach(n=>{V0e(n)})},mount(){return()=>{e.stop()}}};return e}function H0e(){const t=UP(z0e);return bP(t.mount,[]),t}const G0e=H0e;function j0e(){const t=$.useRef(),e=U0e({container:t}),n=G0e(),[r,i]=$.useState([0,7.5,0]);return $.useEffect(()=>{const s=()=>{const o=Math.round(e.scrollYProgress.get());o<1&&n.start({y:0,width:"100%"}),o===1&&n.start({y:"100%",width:"50%"})};return t.current.addEventListener("scroll",s),()=>{t.current.removeEventListener("scroll",s)}},[n]),R.jsx("div",{className:"mx-auto 2xl:max-w-screen-2xl",children:R.jsxs("div",{id:"wrapper",ref:t,className:"w-full h-[38rem] snap-both snap-mandatory overflow-auto styled-scroll-bar",children:[R.jsxs("div",{className:"bg-red-300 h-[38rem] flex flex-col md:flex-row items-center justify-between",children:[R.jsxs("div",{className:"w-full md:w-1/5 md:h-full h-1/6 flex md:flex-col justify-evenly bg-blue-600",children:[R.jsx("button",{onClick:()=>i("fade"),className:"px-4 py-2 bg-red-400",children:"fade"}),R.jsx("button",{onClick:()=>i(""),className:"px-4 py-2 bg-red-400",children:"reset"})]}),R.jsx(p0e.div,{className:"w-full md:w-5/6 h-4/5 md:h-full bg-yellow-400",initial:{y:"0%"},transition:{duration:.6},animate:n,children:R.jsx(ape,{animateRole:r})})]}),R.jsx("div",{className:"bg-amber-500 h-[38rem] flex flex-col md:justify-center md:items-start items-center justify-end",children:R.jsx("div",{className:"h-1/2 w-full md:w-2/6 md:h-full bg-blue-50",children:R.jsx("p",{className:"text-center",children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Ad expedita perferendis, eius qui ut aliquam commodi quaerat labore similique possimus totam iusto modi reprehenderit culpa aut voluptatem nulla corrupti praesentium!"})})})]})})}function W0e(){const{loading:t,data:e}=mK(r=>r.products),n=MK();return $.useEffect(()=>{n(Vv())},[]),R.jsxs(R.Fragment,{children:[R.jsx(Bee,{}),R.jsx(Zee,{isLoading:t,products:e,filterObject:{tags:["Trend"]}}),R.jsxs("aside",{className:"sm:hidden h-24 mx-auto w-11/12 shadow-md shadow-black/15 bg-gray-50 flex items-center justify-start gap-x-3 px-4 py-2 rounded-lg",children:[R.jsx("img",{src:Mee,alt:"banner icon"}),R.jsxs("div",{className:"",children:[R.jsxs("p",{className:"text-base font-bold",children:["Special Offers"," ",R.jsx("span",{className:"p-1 mx-2 border border-gray-300 rounded-full",children:""})]}),R.jsxs("span",{className:"text-xs",children:["We make sure you get the ",R.jsx("br",{})," offer you need at best prices"]})]})]}),R.jsx(tte,{isLoading:t,products:e}),R.jsx(nte,{}),R.jsx(ere,{}),R.jsx(nre,{}),R.jsx(rre,{}),R.jsx(ore,{}),R.jsx(j0e,{})]})}function X0e(t){return pn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M133.3 33.41L77.89 47.25 34.6 148.3l33.29 22.2 27.46-54.9 17.05 4.9-15.07 150.1H245.2l9.2-87.9.9-8.1h4.5l-5.4-54.1 17.1-4.9 27.4 54.9 33.3-22.2-43.3-101.05-55.4-13.84c-5.5 3.87-12.2 6.21-19.5 7.95-9.4 2.21-20 3.24-30.6 3.24-10.6 0-21.2-1.03-30.6-3.24-7.3-1.74-14-4.07-19.5-7.95zM271.5 192.6l-1.5 14h178.8l-1.5-14zm-3.4 32l-26.7 254h62.7l46.5-216.9h17.6l46.5 216.9h62.7l-26.7-254z"},child:[]}]})(t)}function K0e(t){return pn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(t)}function $0e(t){return pn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M1 11v10h5v-6h4v6h5V11L8 6z"},child:[]},{tag:"path",attr:{d:"M10 3v1.97l7 5V11h2v2h-2v2h2v2h-2v4h6V3H10zm9 6h-2V7h2v2z"},child:[]}]})(t)}function J0e(t){return pn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"},child:[]}]})(t)}function q0e(t){return pn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10.5 13H8v-3h2.5V7.5h3V10H16v3h-2.5v2.5h-3V13zM12 2 4 5v6.09c0 5.05 3.41 9.76 8 10.91 4.59-1.15 8-5.86 8-10.91V5l-8-3z"},child:[]}]})(t)}function Y0e(t){return pn({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M15.825.12a.5.5 0 0 1 .132.584c-1.53 3.43-4.743 8.17-7.095 10.64a6.067 6.067 0 0 1-2.373 1.534c-.018.227-.06.538-.16.868-.201.659-.667 1.479-1.708 1.74a8.118 8.118 0 0 1-3.078.132 3.659 3.659 0 0 1-.562-.135 1.382 1.382 0 0 1-.466-.247.714.714 0 0 1-.204-.288.622.622 0 0 1 .004-.443c.095-.245.316-.38.461-.452.394-.197.625-.453.867-.826.095-.144.184-.297.287-.472l.117-.198c.151-.255.326-.54.546-.848.528-.739 1.201-.925 1.746-.896.126.007.243.025.348.048.062-.172.142-.38.238-.608.261-.619.658-1.419 1.187-2.069 2.176-2.67 6.18-6.206 9.117-8.104a.5.5 0 0 1 .596.04zM4.705 11.912a1.23 1.23 0 0 0-.419-.1c-.246-.013-.573.05-.879.479-.197.275-.355.532-.5.777l-.105.177c-.106.181-.213.362-.32.528a3.39 3.39 0 0 1-.76.861c.69.112 1.736.111 2.657-.12.559-.139.843-.569.993-1.06a3.122 3.122 0 0 0 .126-.75l-.793-.792zm1.44.026c.12-.04.277-.1.458-.183a5.068 5.068 0 0 0 1.535-1.1c1.9-1.996 4.412-5.57 6.052-8.631-2.59 1.927-5.566 4.66-7.302 6.792-.442.543-.795 1.243-1.042 1.826-.121.288-.214.54-.275.72v.001l.575.575zm-4.973 3.04.007-.005a.031.031 0 0 1-.007.004zm3.582-3.043.002.001h-.002z"},child:[]}]})(t)}function Q0e(t){return pn({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M216,40H40A16,16,0,0,0,24,56V200a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40ZM128,160a48.05,48.05,0,0,1-48-48,8,8,0,0,1,16,0,32,32,0,0,0,64,0,8,8,0,0,1,16,0A48.05,48.05,0,0,1,128,160ZM40,72V56H216V72Z"},child:[]}]})(t)}function Z0e(){const t=ug(),[e,n]=$.useState(!1);return R.jsxs(R.Fragment,{children:[R.jsxs("div",{className:"hidden md:flex flex-col mx-auto 2xl:max-w-screen-2xl",children:[R.jsxs("div",{className:`${t.pathname==="/EcoVibe/"?"flex":"hidden"} w-full border-b border-gray-200 items-center justify-between px-8 py-2`,children:[R.jsx("div",{className:"flex items-center gap-x-2",children:wee.map(({title:r},i)=>R.jsx(Zo,{className:"text-gray-600 hover:text-primary-500 transition-all duration-300",children:r},i))}),R.jsxs("div",{className:"flex gap-x-4",children:[R.jsx("div",{className:"text-gray-600",children:"USD"}),R.jsx("div",{className:"text-gray-600",children:"Englsih"})]})]}),R.jsxs("div",{className:"w-full flex items-center justify-between px-8 py-4 border-b border-gray-200",children:[R.jsxs("div",{className:"flex items-center justify-center gap-x-0.5 cursor-pointer",children:[R.jsx("span",{className:"text-xl lg:text-4xl text-primary-600",children:R.jsx(Q0e,{})}),R.jsx("span",{className:"lg:text-xl whitespace-nowrap font-bold",children:"Eco Vibe"})]}),R.jsxs("div",{className:"flex items-center flex-1 px-4 lg:px-16 h-12",children:[R.jsxs("select",{name:"",id:"",className:"bg-gray-100 px-4 py-3 w-40 rounded-l-md border border-r-0 border-gray-300 h-full",children:[R.jsx("option",{value:"",className:"px-2 py-1",children:"All Categories"}),fB.map((r,i)=>R.jsx("option",{children:r.title},i))]}),R.jsx("input",{type:"text",className:"bg-gray-100 px-4 py-2.5 border border-gray-300 h-full focus:outline-none xl:w-2/3",placeholder:"Im Shopping For..."}),R.jsx("span",{className:"bg-primary-400 text-white text-2xl rounded-r-md h-full flex items-center px-4",children:R.jsx(pB,{})})]}),R.jsxs("div",{className:"flex items-center justify-center gap-x-2 xl:gap-x-4",children:[R.jsxs("div",{className:" hidden xl:flex flex-col items-start px-4 text-gray-600",children:[R.jsx("span",{children:"Need Help ?"}),R.jsx("span",{children:"+123456789"})]}),R.jsx("div",{className:"p-3 hover:bg-gray-300 transition-all rounded-full bg-gray-200 text-gray-800 text-2xl",children:R.jsx(hB,{})}),R.jsx("div",{className:"p-3 hover:bg-gray-300 transition-all rounded-full bg-gray-200 text-gray-800 text-2xl",children:R.jsx(sR,{})}),R.jsx("div",{className:"p-3 hover:bg-gray-300 transition-all rounded-full bg-gray-200 text-gray-800 text-2xl",children:R.jsx(dB,{})})]})]}),R.jsxs("div",{className:`${t.pathname==="/EcoVibe/"?"flex":"hidden"} items-center justify-between px-8 py-4 relative`,children:[R.jsxs("div",{className:"px-4 py-3 group bg-secondary-500 text-white hover:bg-primary-700 transition-all rounded-md cursor-pointer flex items-center gap-x-2",children:[R.jsx("span",{className:"text-2xl",children:R.jsx(J0e,{})}),R.jsx("span",{children:"All Categories"}),R.jsx("span",{className:"text-2xl",children:R.jsx(Nee,{})}),R.jsx("div",{className:"absolute w-40 top-16 bg-slate-100 rounded-md hidden z-20 group-hover:block",children:R.jsx("div",{className:"flex flex-col gap-y-2 px-4 py-2",children:fB.map((r,i)=>R.jsxs("span",{className:"text-lg relative text-slate-950 group hover:text-primary-300 transition-all",children:[r.title,R.jsx("div",{className:"a"})]},i))})})]}),R.jsxs("div",{className:"flex items-center justify-center gap-x-3",children:[R.jsx(Zo,{children:"Mens"}),R.jsx(Zo,{children:"Womens"}),R.jsx(Zo,{children:"Kids"}),R.jsx(Zo,{children:"Electronics"}),R.jsx(Zo,{children:"Kitchen"}),R.jsx(Zo,{children:"News"}),R.jsx(Zo,{children:"Contact Us"})]})]})]}),R.jsxs("div",{className:"md:hidden",children:[R.jsxs("div",{className:"flex flex-col gap-y-3 w-full",children:[R.jsxs("div",{className:"flex items-center bg-white justify-between shadow-lg px-2 py-4",children:[R.jsxs("h2",{onClick:()=>n(!0),className:"flex items-center justify-center gap-x-1 cursor-pointer",children:[R.jsx("span",{children:R.jsx(Oee,{className:"text-2xl"})}),R.jsx("span",{className:"text-xl font-bold",children:"Home"})]}),R.jsxs("div",{className:"flex items-center justify-center gap-x-2",children:[R.jsx(dB,{className:"text-2xl"}),R.jsx(Aee,{className:"text-2xl"})]})]}),R.jsxs("div",{className:"flex items-center rounded-xl w-11/12 mx-auto bg-slate-50 border border-slate-300 justify-between px-3 py-2 gap-x-2",children:[R.jsx(pB,{className:"text-2xl"}),R.jsx("input",{type:"text",className:"focus:outline-none w-full bg-inherit",placeholder:"Search something"})]}),R.jsxs("div",{className:"",children:[R.jsxs("div",{className:"flex items-center justify-between px-3 py-1",children:[R.jsx("h2",{className:"font-bold",children:"Categories"}),R.jsx(Zo,{children:R.jsxs("span",{className:"text-sm flex text-gray-700 items-center justify-center gap-x-1",children:["Show More ",R.jsx(eo,{className:"text-xs font-thin"})]})})]}),R.jsxs("div",{className:"flex items-center sm:justify-center gap-x-4 overflow-auto px-6 py-2",children:[R.jsxs("div",{className:"flex flex-col items-center justify-between gap-y-2",children:[R.jsx("span",{className:"bg-primary-100 p-3 rounded-full",children:R.jsx(X0e,{className:"text-3xl text-primary-500"})}),R.jsx("p",{className:"text-sm line-clamp-1",children:"Fashion"})]}),R.jsxs("div",{className:"flex flex-col items-center justify-between gap-y-2",children:[R.jsx("span",{className:"bg-primary-100 p-3 rounded-full",children:R.jsx(See,{className:"text-3xl text-primary-500"})}),R.jsx("p",{className:"text-sm line-clamp-1",children:"Electronics"})]}),R.jsxs("div",{className:"flex flex-col items-center justify-between gap-y-2",children:[R.jsx("span",{className:"bg-primary-100 p-3 rounded-full",children:R.jsx($0e,{className:"text-3xl text-primary-500"})}),R.jsx("p",{className:"text-sm line-clamp-1",children:"Home Decor"})]}),R.jsxs("div",{className:"flex flex-col items-center justify-between gap-y-2",children:[R.jsx("span",{className:"bg-primary-100 p-3 rounded-full",children:R.jsx(q0e,{className:"text-3xl text-primary-500"})}),R.jsx("p",{className:"text-sm line-clamp-1",children:"Health"})]}),R.jsxs("div",{className:"flex flex-col items-center justify-between gap-y-2",children:[R.jsx("span",{className:"bg-primary-100 p-3 rounded-full",children:R.jsx(Y0e,{className:"text-3xl text-primary-500"})}),R.jsx("p",{className:"text-sm line-clamp-1",children:"Beauty"})]})]})]})]}),R.jsxs("div",{className:`${e?"opacity-100 visible":"opacity-0 invisible"} fixed inset-0 z-30 transition-all duration-500`,children:[R.jsxs("div",{className:`${e?"translate-x-0":"-translate-x-96"} w-3/4 h-full bg-gray-100 z-10 transition-all duration-500 flex flex-col items-center`,children:[R.jsxs("div",{className:"w-full h-20 bg-gray-200 flex items-center justify-between px-4",children:[R.jsxs("div",{className:"flex items-center justify-center gap-x-3",children:[R.jsx("div",{className:"w-10 h-10 bg-gray-400 rounded-full flex items-center justify-center",children:R.jsx(hB,{className:"text-2xl"})}),R.jsxs("div",{className:"flex flex-col justify-between items-start",children:[R.jsx("h2",{children:"Guest User"}),R.jsx("p",{className:"text-sm",children:"+12394595"})]})]}),R.jsx("div",{className:"",children:R.jsx("button",{onClick:()=>n(!1),className:"text-2xl",children:R.jsx(K0e,{})})})]}),R.jsxs("div",{className:"max-h-full overflow-auto w-full gap-y-1 mt-1 flex flex-col items-start",children:[R.jsxs("div",{className:"flex items-center justify-start gap-x-2 px-4 py-4 w-full",children:[R.jsx("span",{className:"text-3xl",children:R.jsx(Cee,{})}),R.jsx("h3",{className:"text-base",children:"Shop By Category"})]}),R.jsxs("div",{className:"flex items-center justify-start gap-x-2 px-4 py-4 w-full",children:[R.jsx("span",{className:"text-3xl",children:R.jsx(v6,{})}),R.jsx("h3",{className:"text-base",children:"My Orders"})]}),R.jsxs("div",{className:"flex items-center justify-start gap-x-2 px-4 py-4 w-full",children:[R.jsx("span",{className:"text-3xl",children:R.jsx(Pee,{})}),R.jsx("h3",{className:"text-base",children:"Favorites"})]}),R.jsxs("div",{className:"flex items-center justify-start gap-x-2 px-4 py-4 w-full",children:[R.jsx("span",{className:"text-3xl",children:R.jsx(Ree,{})}),R.jsx("h3",{className:"text-base",children:"FAQs"})]}),R.jsxs("div",{className:"flex items-center justify-start gap-x-2 px-4 py-4 w-full",children:[R.jsx("span",{className:"text-3xl",children:R.jsx(Iee,{})}),R.jsx("h3",{className:"text-base",children:"Addresses"})]}),R.jsxs("div",{className:"flex items-center justify-start gap-x-2 px-4 py-4 w-full",children:[R.jsx("span",{className:"text-3xl",children:R.jsx(bee,{})}),R.jsx("h3",{className:"text-base",children:"Terms & Conditions"})]}),R.jsxs("div",{className:"flex items-center justify-start gap-x-2 px-4 py-4 w-full",children:[R.jsx("span",{className:"text-3xl",children:R.jsx(Tee,{})}),R.jsx("h3",{className:"text-base",children:"Terms & Conditions"})]}),R.jsxs("div",{className:"flex items-center justify-start gap-x-2 px-4 py-4 w-full",children:[R.jsx("span",{className:"text-3xl",children:R.jsx(Lee,{})}),R.jsx("h3",{className:"text-base",children:"Privacy Policy"})]}),R.jsxs("div",{className:"flex items-center justify-start gap-x-2 px-4 py-4 w-full",children:[R.jsx("span",{className:"text-3xl",children:R.jsx(Dee,{})}),R.jsx("h3",{className:"text-base",children:"Sign In"})]})]})]}),R.jsx("div",{onClick:()=>n(!1),className:"w-full h-full bg-black bg-opacity-30 -z-10 absolute inset-0"})]})]})]})}function eve({children:t}){return R.jsxs("div",{children:[R.jsx(Z0e,{}),t]})}function tve(){return R.jsx("div",{className:"bg-orange-500 h-screen",children:"ProductsPage"})}function nve(){return R.jsx("div",{className:"bg-slate-400 h-screen",children:"ProductsFilterPage"})}const rve=c$({reducer:{products:dee}});function ive(){return R.jsx(AK,{store:rve,children:R.jsx(eve,{children:R.jsxs(WX,{children:[R.jsx(Ov,{path:"/EcoVibe/",element:R.jsx(W0e,{})}),R.jsx(Ov,{path:"/EcoVibe/Products",element:R.jsx(tve,{})}),R.jsx(Ov,{path:"/EcoVibe/Filtered-Products",element:R.jsx(nve,{})})]})})})}JE.createRoot(document.getElementById("root")).render(R.jsx(QX,{children:R.jsx(ive,{})}));
