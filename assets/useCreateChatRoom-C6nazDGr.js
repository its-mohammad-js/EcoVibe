import{r as I,a as g,I as h,ac as b,K as l,W as R,_ as y}from"./index-BGjCLYIN.js";const x=()=>{const[c,t]=I.useState(!1),[f,n]=I.useState(null),s=g(e=>e.userData);return{createRoom:async(e,u)=>{t(!0),n(null);try{const r=h(),a=`FROM:${s.userId}&TO:${e.userId}`,p=(await b(l(r,"rooms"))).val()||{},m=Object.entries(p).find(([,o])=>{var d,i;return((d=o.members)==null?void 0:d.includes(s.userId))&&((i=o.members)==null?void 0:i.includes(e.userId))});if(m)u(m[1]);else{const o={roomId:a,[s.userId]:{...s.personalInformation,...s.businessInformation,userId:s.userId},[e.userId]:{...e,userType:e.userType,userId:e.userId},members:[s.userId,e.userId]};await R(l(r,`rooms/${a}`),o),u(o)}}catch(r){console.error(r),n(r.message),y.error("There was an error creating the chat room.")}finally{t(!1)}},isLoading:c,error:f}};export{x as u};
