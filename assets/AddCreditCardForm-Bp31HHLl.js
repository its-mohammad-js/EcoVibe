import{b as f,u as N,c as j,j as a,al as y,T as x,S as C,A as w,f as A}from"./index-4OvukmlY.js";const b=[{validation:{minLength:{value:19,message:"Code Card Must Be 19 Character At Least."},pattern:{value:/^[0-9-]+$/,message:"Invalid Card Code Format"}}},{name:"name",placeholder:"John Doe",validation:{minLength:{value:4,message:"min length is 4 character"}}},{name:"ex_date",type:"date",cols:2},{name:"cvv",placeholder:"NN-NN",cols:2}],I=[{label:"PayPal",value:{name:"payPal",bgUrl:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2Fpaypal%20card.jpg?alt=media&token=c64bb846-38b9-4ecc-abaf-86f5236a5c0c"}},{label:"visa card",value:{name:"visa card",bgUrl:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2Fvisa%20card.jpg?alt=media&token=4c4d17b7-00c0-4c2d-b845-c0c7583030b0"}}];function D({onModalClose:r}){var g,p;const{register:l,formState:{errors:s},setValue:n,handleSubmit:i}=f(),{personalInformation:d}=N(e=>e.userData),m=j(),{creditCards:t}=d;function v(e){const c={...e,cardId:w()},o={...d,creditCards:t!=null&&t.length?[...t,c]:[c]};m(A({data:o,field:"personalInformation"})),r()}return a.jsxs("div",{className:"fixed inset-0 z-10 flex items-center justify-center lg:py-8 max-h-[45rem]",children:[a.jsx("div",{onClick:r,className:"fixed inset-0 bg-gray-800/80 backdrop-blur-sm -z-10"}),a.jsxs("div",{className:"bg-gray-50 rounded-md px-4 py-2 w-full h-full flex flex-col gap-y-4 lg:w-1/3 max-w-[40rem]",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h4",{className:"text-2xl font-bold",children:["Add Card",a.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Add your debit/credit card"})]}),a.jsx("button",{type:"button",onClick:r,className:"p-2.5 bg-gray-300 rounded-full text-xl hover:bg-gray-800 hover:text-gray-50 transition-all",children:a.jsx(y,{})})]}),a.jsxs("form",{onSubmit:i(e=>v(e)),className:"flex flex-col justify-stretch w-full flex-1 relative",children:[a.jsxs("div",{className:"grid grid-cols-4 grid-rows-4 gap-14 -mb-8 xl:-mb-12 [&>div>p]:text-sm",children:[a.jsx(x,{label:"card code",register:l("code_number",{...b[0].validation,required:"code number Is Required"}),placeholder:"NNNN-NNNN-NNNN-NNNN",style:"col-span-4",error:(g=s.code_number)==null?void 0:g.message,onChange:e=>h(e,4,"-",20)}),b.map((e,c)=>{var o;return c>0&&a.jsx(x,{label:e.name.replace("_"," "),register:l(e.name,{...e.validation,required:`${e.name.replace("_"," ")} Is Required`}),onChange:u=>(e==null?void 0:e.name)==="cvv"&&h(u,2,"/",4),placeholder:e.placeholder,type:e.name==="ex_date"?e.type:"text",style:`${e.cols===2?"col-span-2":"col-span-4"}`,error:(o=s[e.name])==null?void 0:o.message},c)})]}),a.jsxs("div",{className:"",children:[a.jsx("h6",{className:"text-lg font-medium mb-1",children:"Provider :"}),a.jsx(C,{...l("provider",{required:"please select a provider"}),className:"[&>div]:bg-transparent",options:I,isSearchable:!1,placeholder:"Select a Provider",onChange:({value:e})=>n("provider",e)}),a.jsx("p",{className:"text-sm mt-1 text-red-500 font-semibold",children:(p=s==null?void 0:s.provider)==null?void 0:p.message})]}),a.jsx("button",{className:"px-4 py-2 bg-primary-600 text-white rounded-lg bottom-0 absolute w-full",children:"Add Card"})]})]})]})}function h(r,l=4,s="-",n=19){var t;const i=r.target.value.replace(new RegExp(`\\${s}`,"g"),"").slice(0,n),d=new RegExp(`.{1,${l}}`,"g"),m=((t=i.match(d))==null?void 0:t.join(s))||"";r.target.value=m}export{D as A};
