import{cN as D,cO as H,cP as L}from"./index-DhoupMZV.js";var c={},_;function W(){if(_)return c;_=1,Object.defineProperty(c,"__esModule",{value:!0});var g=Object.assign||function(n){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])}return n},p=function(){function n(a,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}}return function(a,t,e){return t&&n(a.prototype,t),e&&n(a,e),a}}(),m=D(),h=y(m),k=H(),u=y(k);function y(n){return n&&n.__esModule?n:{default:n}}function O(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}function M(n,a){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:n}function R(n,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);n.prototype=Object.create(a&&a.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(n,a):n.__proto__=a)}var w={overflow:"hidden",position:"relative"},x={position:"relative",overflow:"hidden",cursor:"pointer",display:"block",float:"left"},E=function(a,t){return`
    .react-stars-`+t+`:before {
      position: absolute;
      overflow: hidden;
      display: block;
      z-index: 1;
      top: 0; left: 0;
      width: 50%;
      content: attr(data-forhalf);
      color: `+a+`;
  }`},v=function(n){R(a,n);function a(t){O(this,a);var e=M(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t));return t=g({},t),e.state={uniqueness:(Math.random()+"").replace(".",""),value:t.value||0,stars:[],halfStar:{at:Math.floor(t.value),hidden:t.half&&t.value%1<.5}},e.state.config={count:t.count,size:t.size,char:t.char,color1:t.color1,color2:t.color2,half:t.half,edit:t.edit},e}return p(a,[{key:"componentDidMount",value:function(){this.setState({stars:this.getStars(this.state.value)})}},{key:"componentWillReceiveProps",value:function(e){this.setState({stars:this.getStars(e.value),value:e.value,halfStar:{at:Math.floor(e.value),hidden:this.state.config.half&&e.value%1<.5}})}},{key:"isDecimal",value:function(e){return e%1!==0}},{key:"getRate",value:function(){var e=void 0;return this.state.config.half?e=Math.floor(this.state.value):e=Math.round(this.state.value),e}},{key:"getStars",value:function(e){typeof e>"u"&&(e=this.getRate());for(var r=[],i=0;i<this.state.config.count;i++)r.push({active:i<=e-1});return r}},{key:"mouseOver",value:function(e){var r=this.state,i=r.config,l=r.halfStar;if(i.edit){var o=Number(e.target.getAttribute("data-index"));if(i.half){var s=this.moreThanHalf(e,i.size);l.hidden=s,s&&(o=o+1),l.at=o}else o=o+1;this.setState({stars:this.getStars(o)})}}},{key:"moreThanHalf",value:function(e,r){var i=e.target,l=e.clientX-i.getBoundingClientRect().left;return l=Math.round(Math.abs(l)),l>r/2}},{key:"mouseLeave",value:function(){var e=this.state,r=e.value,i=e.halfStar,l=e.config;l.edit&&(l.half&&(i.hidden=!this.isDecimal(r),i.at=Math.floor(this.state.value)),this.setState({stars:this.getStars()}))}},{key:"clicked",value:function(e){var r=this.state,i=r.config,l=r.halfStar;if(i.edit){var o=Number(e.target.getAttribute("data-index")),s=void 0;if(i.half){var f=this.moreThanHalf(e,i.size);l.hidden=f,f&&(o=o+1),s=f?o:o+.5,l.at=o}else s=o=o+1;this.setState({value:s,stars:this.getStars(o)}),this.props.onChange(s)}}},{key:"renderHalfStarStyleElement",value:function(){var e=this.state,r=e.config,i=e.uniqueness;return h.default.createElement("style",{dangerouslySetInnerHTML:{__html:E(r.color2,i)}})}},{key:"renderStars",value:function(){var e=this,r=this.state,i=r.halfStar,l=r.stars,o=r.uniqueness,s=r.config,f=s.color1,T=s.color2,q=s.size,S=s.char,z=s.half,P=s.edit;return l.map(function(N,d){var b="";z&&!i.hidden&&i.at===d&&(b="react-stars-"+o);var j=g({},x,{color:N.active?T:f,cursor:P?"pointer":"default",fontSize:q+"px"});return h.default.createElement("span",{className:b,style:j,key:d,"data-index":d,"data-forhalf":S,onMouseOver:e.mouseOver.bind(e),onMouseMove:e.mouseOver.bind(e),onMouseLeave:e.mouseLeave.bind(e),onClick:e.clicked.bind(e)},S)})}},{key:"render",value:function(){var e=this.props.className;return h.default.createElement("div",{className:e,style:w},this.state.config.half?this.renderHalfStarStyleElement():"",this.renderStars())}}]),a}(m.Component);return v.propTypes={className:u.default.string,edit:u.default.bool,half:u.default.bool,value:u.default.number,count:u.default.number,char:u.default.string,size:u.default.number,color1:u.default.string,color2:u.default.string},v.defaultProps={edit:!0,half:!0,value:0,count:5,char:"â˜…",size:15,color1:"gray",color2:"#ffd700",onChange:function(){}},c.default=v,c}var B=W();const I=L(B);export{I as R};
