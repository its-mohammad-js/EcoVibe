var K9=Object.defineProperty;var $9=(n,e,t)=>e in n?K9(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Qx=(n,e,t)=>($9(n,typeof e!="symbol"?e+"":e,t),t);function Y9(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var Yf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gy(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function q9(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var UL={exports:{}},vy={},zL={exports:{}},Ht={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cp=Symbol.for("react.element"),Q9=Symbol.for("react.portal"),Z9=Symbol.for("react.fragment"),e5=Symbol.for("react.strict_mode"),t5=Symbol.for("react.profiler"),n5=Symbol.for("react.provider"),r5=Symbol.for("react.context"),i5=Symbol.for("react.forward_ref"),s5=Symbol.for("react.suspense"),o5=Symbol.for("react.memo"),a5=Symbol.for("react.lazy"),Cb=Symbol.iterator;function l5(n){return n===null||typeof n!="object"?null:(n=Cb&&n[Cb]||n["@@iterator"],typeof n=="function"?n:null)}var HL={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},VL=Object.assign,GL={};function zh(n,e,t){this.props=n,this.context=e,this.refs=GL,this.updater=t||HL}zh.prototype.isReactComponent={};zh.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};zh.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function jL(){}jL.prototype=zh.prototype;function Xw(n,e,t){this.props=n,this.context=e,this.refs=GL,this.updater=t||HL}var Jw=Xw.prototype=new jL;Jw.constructor=Xw;VL(Jw,zh.prototype);Jw.isPureReactComponent=!0;var bb=Array.isArray,WL=Object.prototype.hasOwnProperty,Kw={current:null},XL={key:!0,ref:!0,__self:!0,__source:!0};function JL(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)WL.call(e,r)&&!XL.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Cp,type:n,key:s,ref:o,props:i,_owner:Kw.current}}function c5(n,e){return{$$typeof:Cp,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function $w(n){return typeof n=="object"&&n!==null&&n.$$typeof===Cp}function u5(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var Rb=/\/+/g;function Zx(n,e){return typeof n=="object"&&n!==null&&n.key!=null?u5(""+n.key):e.toString(36)}function L0(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Cp:case Q9:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+Zx(o,0):r,bb(i)?(t="",n!=null&&(t=n.replace(Rb,"$&/")+"/"),L0(i,e,t,"",function(c){return c})):i!=null&&($w(i)&&(i=c5(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Rb,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",bb(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+Zx(s,a);o+=L0(s,e,t,l,i)}else if(l=l5(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+Zx(s,a++),o+=L0(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function sg(n,e,t){if(n==null)return n;var r=[],i=0;return L0(n,r,"","",function(s){return e.call(t,s,i++)}),r}function h5(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var pi={current:null},D0={transition:null},f5={ReactCurrentDispatcher:pi,ReactCurrentBatchConfig:D0,ReactCurrentOwner:Kw};Ht.Children={map:sg,forEach:function(n,e,t){sg(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return sg(n,function(){e++}),e},toArray:function(n){return sg(n,function(e){return e})||[]},only:function(n){if(!$w(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Ht.Component=zh;Ht.Fragment=Z9;Ht.Profiler=t5;Ht.PureComponent=Xw;Ht.StrictMode=e5;Ht.Suspense=s5;Ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=f5;Ht.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=VL({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Kw.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)WL.call(e,l)&&!XL.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Cp,type:n.type,key:i,ref:s,props:r,_owner:o}};Ht.createContext=function(n){return n={$$typeof:r5,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:n5,_context:n},n.Consumer=n};Ht.createElement=JL;Ht.createFactory=function(n){var e=JL.bind(null,n);return e.type=n,e};Ht.createRef=function(){return{current:null}};Ht.forwardRef=function(n){return{$$typeof:i5,render:n}};Ht.isValidElement=$w;Ht.lazy=function(n){return{$$typeof:a5,_payload:{_status:-1,_result:n},_init:h5}};Ht.memo=function(n,e){return{$$typeof:o5,type:n,compare:e===void 0?null:e}};Ht.startTransition=function(n){var e=D0.transition;D0.transition={};try{n()}finally{D0.transition=e}};Ht.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ht.useCallback=function(n,e){return pi.current.useCallback(n,e)};Ht.useContext=function(n){return pi.current.useContext(n)};Ht.useDebugValue=function(){};Ht.useDeferredValue=function(n){return pi.current.useDeferredValue(n)};Ht.useEffect=function(n,e){return pi.current.useEffect(n,e)};Ht.useId=function(){return pi.current.useId()};Ht.useImperativeHandle=function(n,e,t){return pi.current.useImperativeHandle(n,e,t)};Ht.useInsertionEffect=function(n,e){return pi.current.useInsertionEffect(n,e)};Ht.useLayoutEffect=function(n,e){return pi.current.useLayoutEffect(n,e)};Ht.useMemo=function(n,e){return pi.current.useMemo(n,e)};Ht.useReducer=function(n,e,t){return pi.current.useReducer(n,e,t)};Ht.useRef=function(n){return pi.current.useRef(n)};Ht.useState=function(n){return pi.current.useState(n)};Ht.useSyncExternalStore=function(n,e,t){return pi.current.useSyncExternalStore(n,e,t)};Ht.useTransition=function(){return pi.current.useTransition()};Ht.version="18.2.0";zL.exports=Ht;var re=zL.exports;const Wo=gy(re),rS=Y9({__proto__:null,default:Wo},[re]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d5=re,p5=Symbol.for("react.element"),m5=Symbol.for("react.fragment"),g5=Object.prototype.hasOwnProperty,v5=d5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,y5={key:!0,ref:!0,__self:!0,__source:!0};function KL(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)g5.call(e,r)&&!y5.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:p5,type:n,key:s,ref:o,props:i,_owner:v5.current}}vy.Fragment=m5;vy.jsx=KL;vy.jsxs=KL;UL.exports=vy;var b=UL.exports,iS={},$L={exports:{}},Ki={},YL={exports:{}},qL={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(O,G){var X=O.length;O.push(G);e:for(;0<X;){var Q=X-1>>>1,te=O[Q];if(0<i(te,G))O[Q]=G,O[X]=te,X=Q;else break e}}function t(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var G=O[0],X=O.pop();if(X!==G){O[0]=X;e:for(var Q=0,te=O.length,be=te>>>1;Q<be;){var ee=2*(Q+1)-1,pe=O[ee],Me=ee+1,Ie=O[Me];if(0>i(pe,X))Me<te&&0>i(Ie,pe)?(O[Q]=Ie,O[Me]=X,Q=Me):(O[Q]=pe,O[ee]=X,Q=ee);else if(Me<te&&0>i(Ie,X))O[Q]=Ie,O[Me]=X,Q=Me;else break e}}return G}function i(O,G){var X=O.sortIndex-G.sortIndex;return X!==0?X:O.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,p=3,m=!1,v=!1,A=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(O){for(var G=t(c);G!==null;){if(G.callback===null)r(c);else if(G.startTime<=O)r(c),G.sortIndex=G.expirationTime,e(l,G);else break;G=t(c)}}function w(O){if(A=!1,S(O),!v)if(t(l)!==null)v=!0,q(R);else{var G=t(c);G!==null&&ce(w,G.startTime-O)}}function R(O,G){v=!1,A&&(A=!1,g(D),D=-1),m=!0;var X=p;try{for(S(G),d=t(l);d!==null&&(!(d.expirationTime>G)||O&&!L());){var Q=d.callback;if(typeof Q=="function"){d.callback=null,p=d.priorityLevel;var te=Q(d.expirationTime<=G);G=n.unstable_now(),typeof te=="function"?d.callback=te:d===t(l)&&r(l),S(G)}else r(l);d=t(l)}if(d!==null)var be=!0;else{var ee=t(c);ee!==null&&ce(w,ee.startTime-G),be=!1}return be}finally{d=null,p=X,m=!1}}var C=!1,I=null,D=-1,N=5,T=-1;function L(){return!(n.unstable_now()-T<N)}function H(){if(I!==null){var O=n.unstable_now();T=O;var G=!0;try{G=I(!0,O)}finally{G?J():(C=!1,I=null)}}else C=!1}var J;if(typeof x=="function")J=function(){x(H)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,$=W.port2;W.port1.onmessage=H,J=function(){$.postMessage(null)}}else J=function(){_(H,0)};function q(O){I=O,C||(C=!0,J())}function ce(O,G){D=_(function(){O(n.unstable_now())},G)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(O){O.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,q(R))},n.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<O?Math.floor(1e3/O):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(O){switch(p){case 1:case 2:case 3:var G=3;break;default:G=p}var X=p;p=G;try{return O()}finally{p=X}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(O,G){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var X=p;p=O;try{return G()}finally{p=X}},n.unstable_scheduleCallback=function(O,G,X){var Q=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?Q+X:Q):X=Q,O){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=X+te,O={id:h++,callback:G,priorityLevel:O,startTime:X,expirationTime:te,sortIndex:-1},X>Q?(O.sortIndex=X,e(c,O),t(l)===null&&O===t(c)&&(A?(g(D),D=-1):A=!0,ce(w,X-Q))):(O.sortIndex=te,e(l,O),v||m||(v=!0,q(R))),O},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(O){var G=p;return function(){var X=p;p=G;try{return O.apply(this,arguments)}finally{p=X}}}})(qL);YL.exports=qL;var _5=YL.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QL=re,Gi=_5;function Le(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ZL=new Set,Cd={};function bc(n,e){fh(n,e),fh(n+"Capture",e)}function fh(n,e){for(Cd[n]=e,n=0;n<e.length;n++)ZL.add(e[n])}var $o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sS=Object.prototype.hasOwnProperty,x5=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Pb={},Ib={};function A5(n){return sS.call(Ib,n)?!0:sS.call(Pb,n)?!1:x5.test(n)?Ib[n]=!0:(Pb[n]=!0,!1)}function S5(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function E5(n,e,t,r){if(e===null||typeof e>"u"||S5(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function mi(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Br={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Br[n]=new mi(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Br[e]=new mi(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Br[n]=new mi(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Br[n]=new mi(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Br[n]=new mi(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Br[n]=new mi(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Br[n]=new mi(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Br[n]=new mi(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Br[n]=new mi(n,5,!1,n.toLowerCase(),null,!1,!1)});var Yw=/[\-:]([a-z])/g;function qw(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(Yw,qw);Br[e]=new mi(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(Yw,qw);Br[e]=new mi(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(Yw,qw);Br[e]=new mi(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Br[n]=new mi(n,1,!1,n.toLowerCase(),null,!1,!1)});Br.xlinkHref=new mi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Br[n]=new mi(n,1,!1,n.toLowerCase(),null,!0,!0)});function Qw(n,e,t,r){var i=Br.hasOwnProperty(e)?Br[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(E5(e,t,i,r)&&(t=null),r||i===null?A5(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var ra=QL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,og=Symbol.for("react.element"),Iu=Symbol.for("react.portal"),Lu=Symbol.for("react.fragment"),Zw=Symbol.for("react.strict_mode"),oS=Symbol.for("react.profiler"),eD=Symbol.for("react.provider"),tD=Symbol.for("react.context"),eM=Symbol.for("react.forward_ref"),aS=Symbol.for("react.suspense"),lS=Symbol.for("react.suspense_list"),tM=Symbol.for("react.memo"),Ea=Symbol.for("react.lazy"),nD=Symbol.for("react.offscreen"),Lb=Symbol.iterator;function wf(n){return n===null||typeof n!="object"?null:(n=Lb&&n[Lb]||n["@@iterator"],typeof n=="function"?n:null)}var Pn=Object.assign,e1;function qf(n){if(e1===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);e1=e&&e[1]||""}return`
`+e1+n}var t1=!1;function n1(n,e){if(!n||t1)return"";t1=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{t1=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?qf(n):""}function w5(n){switch(n.tag){case 5:return qf(n.type);case 16:return qf("Lazy");case 13:return qf("Suspense");case 19:return qf("SuspenseList");case 0:case 2:case 15:return n=n1(n.type,!1),n;case 11:return n=n1(n.type.render,!1),n;case 1:return n=n1(n.type,!0),n;default:return""}}function cS(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Lu:return"Fragment";case Iu:return"Portal";case oS:return"Profiler";case Zw:return"StrictMode";case aS:return"Suspense";case lS:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case tD:return(n.displayName||"Context")+".Consumer";case eD:return(n._context.displayName||"Context")+".Provider";case eM:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case tM:return e=n.displayName||null,e!==null?e:cS(n.type)||"Memo";case Ea:e=n._payload,n=n._init;try{return cS(n(e))}catch{}}return null}function M5(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return cS(e);case 8:return e===Zw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function qa(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function rD(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function T5(n){var e=rD(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function ag(n){n._valueTracker||(n._valueTracker=T5(n))}function iD(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=rD(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function rv(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function uS(n,e){var t=e.checked;return Pn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function Db(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=qa(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function sD(n,e){e=e.checked,e!=null&&Qw(n,"checked",e,!1)}function hS(n,e){sD(n,e);var t=qa(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?fS(n,e.type,t):e.hasOwnProperty("defaultValue")&&fS(n,e.type,qa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function Bb(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function fS(n,e,t){(e!=="number"||rv(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Qf=Array.isArray;function Yu(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+qa(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function dS(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Le(91));return Pn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Nb(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Le(92));if(Qf(t)){if(1<t.length)throw Error(Le(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:qa(t)}}function oD(n,e){var t=qa(e.value),r=qa(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function Ob(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function aD(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pS(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?aD(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var lg,lD=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(lg=lg||document.createElement("div"),lg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=lg.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function bd(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var ad={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},C5=["Webkit","ms","Moz","O"];Object.keys(ad).forEach(function(n){C5.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),ad[e]=ad[n]})});function cD(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||ad.hasOwnProperty(n)&&ad[n]?(""+e).trim():e+"px"}function uD(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=cD(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var b5=Pn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mS(n,e){if(e){if(b5[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Le(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Le(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Le(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Le(62))}}function gS(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vS=null;function nM(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var yS=null,qu=null,Qu=null;function Fb(n){if(n=Pp(n)){if(typeof yS!="function")throw Error(Le(280));var e=n.stateNode;e&&(e=Sy(e),yS(n.stateNode,n.type,e))}}function hD(n){qu?Qu?Qu.push(n):Qu=[n]:qu=n}function fD(){if(qu){var n=qu,e=Qu;if(Qu=qu=null,Fb(n),e)for(n=0;n<e.length;n++)Fb(e[n])}}function dD(n,e){return n(e)}function pD(){}var r1=!1;function mD(n,e,t){if(r1)return n(e,t);r1=!0;try{return dD(n,e,t)}finally{r1=!1,(qu!==null||Qu!==null)&&(pD(),fD())}}function Rd(n,e){var t=n.stateNode;if(t===null)return null;var r=Sy(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Le(231,e,typeof t));return t}var _S=!1;if($o)try{var Mf={};Object.defineProperty(Mf,"passive",{get:function(){_S=!0}}),window.addEventListener("test",Mf,Mf),window.removeEventListener("test",Mf,Mf)}catch{_S=!1}function R5(n,e,t,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(h){this.onError(h)}}var ld=!1,iv=null,sv=!1,xS=null,P5={onError:function(n){ld=!0,iv=n}};function I5(n,e,t,r,i,s,o,a,l){ld=!1,iv=null,R5.apply(P5,arguments)}function L5(n,e,t,r,i,s,o,a,l){if(I5.apply(this,arguments),ld){if(ld){var c=iv;ld=!1,iv=null}else throw Error(Le(198));sv||(sv=!0,xS=c)}}function Rc(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function gD(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function kb(n){if(Rc(n)!==n)throw Error(Le(188))}function D5(n){var e=n.alternate;if(!e){if(e=Rc(n),e===null)throw Error(Le(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return kb(i),n;if(s===r)return kb(i),e;s=s.sibling}throw Error(Le(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(Le(189))}}if(t.alternate!==r)throw Error(Le(190))}if(t.tag!==3)throw Error(Le(188));return t.stateNode.current===t?n:e}function vD(n){return n=D5(n),n!==null?yD(n):null}function yD(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=yD(n);if(e!==null)return e;n=n.sibling}return null}var _D=Gi.unstable_scheduleCallback,Ub=Gi.unstable_cancelCallback,B5=Gi.unstable_shouldYield,N5=Gi.unstable_requestPaint,Gn=Gi.unstable_now,O5=Gi.unstable_getCurrentPriorityLevel,rM=Gi.unstable_ImmediatePriority,xD=Gi.unstable_UserBlockingPriority,ov=Gi.unstable_NormalPriority,F5=Gi.unstable_LowPriority,AD=Gi.unstable_IdlePriority,yy=null,oo=null;function k5(n){if(oo&&typeof oo.onCommitFiberRoot=="function")try{oo.onCommitFiberRoot(yy,n,void 0,(n.current.flags&128)===128)}catch{}}var Ds=Math.clz32?Math.clz32:H5,U5=Math.log,z5=Math.LN2;function H5(n){return n>>>=0,n===0?32:31-(U5(n)/z5|0)|0}var cg=64,ug=4194304;function Zf(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function av(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=Zf(a):(s&=o,s!==0&&(r=Zf(s)))}else o=t&~i,o!==0?r=Zf(o):s!==0&&(r=Zf(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Ds(e),i=1<<t,r|=n[t],e&=~i;return r}function V5(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function G5(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Ds(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=V5(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function AS(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function SD(){var n=cg;return cg<<=1,!(cg&4194240)&&(cg=64),n}function i1(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function bp(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Ds(e),n[e]=t}function j5(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Ds(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function iM(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Ds(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var on=0;function ED(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var wD,sM,MD,TD,CD,SS=!1,hg=[],Oa=null,Fa=null,ka=null,Pd=new Map,Id=new Map,Ca=[],W5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zb(n,e){switch(n){case"focusin":case"focusout":Oa=null;break;case"dragenter":case"dragleave":Fa=null;break;case"mouseover":case"mouseout":ka=null;break;case"pointerover":case"pointerout":Pd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Id.delete(e.pointerId)}}function Tf(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Pp(e),e!==null&&sM(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function X5(n,e,t,r,i){switch(e){case"focusin":return Oa=Tf(Oa,n,e,t,r,i),!0;case"dragenter":return Fa=Tf(Fa,n,e,t,r,i),!0;case"mouseover":return ka=Tf(ka,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return Pd.set(s,Tf(Pd.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Id.set(s,Tf(Id.get(s)||null,n,e,t,r,i)),!0}return!1}function bD(n){var e=Xl(n.target);if(e!==null){var t=Rc(e);if(t!==null){if(e=t.tag,e===13){if(e=gD(t),e!==null){n.blockedOn=e,CD(n.priority,function(){MD(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function B0(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=ES(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);vS=r,t.target.dispatchEvent(r),vS=null}else return e=Pp(t),e!==null&&sM(e),n.blockedOn=t,!1;e.shift()}return!0}function Hb(n,e,t){B0(n)&&t.delete(e)}function J5(){SS=!1,Oa!==null&&B0(Oa)&&(Oa=null),Fa!==null&&B0(Fa)&&(Fa=null),ka!==null&&B0(ka)&&(ka=null),Pd.forEach(Hb),Id.forEach(Hb)}function Cf(n,e){n.blockedOn===e&&(n.blockedOn=null,SS||(SS=!0,Gi.unstable_scheduleCallback(Gi.unstable_NormalPriority,J5)))}function Ld(n){function e(i){return Cf(i,n)}if(0<hg.length){Cf(hg[0],n);for(var t=1;t<hg.length;t++){var r=hg[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Oa!==null&&Cf(Oa,n),Fa!==null&&Cf(Fa,n),ka!==null&&Cf(ka,n),Pd.forEach(e),Id.forEach(e),t=0;t<Ca.length;t++)r=Ca[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Ca.length&&(t=Ca[0],t.blockedOn===null);)bD(t),t.blockedOn===null&&Ca.shift()}var Zu=ra.ReactCurrentBatchConfig,lv=!0;function K5(n,e,t,r){var i=on,s=Zu.transition;Zu.transition=null;try{on=1,oM(n,e,t,r)}finally{on=i,Zu.transition=s}}function $5(n,e,t,r){var i=on,s=Zu.transition;Zu.transition=null;try{on=4,oM(n,e,t,r)}finally{on=i,Zu.transition=s}}function oM(n,e,t,r){if(lv){var i=ES(n,e,t,r);if(i===null)p1(n,e,r,cv,t),zb(n,r);else if(X5(i,n,e,t,r))r.stopPropagation();else if(zb(n,r),e&4&&-1<W5.indexOf(n)){for(;i!==null;){var s=Pp(i);if(s!==null&&wD(s),s=ES(n,e,t,r),s===null&&p1(n,e,r,cv,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else p1(n,e,r,null,t)}}var cv=null;function ES(n,e,t,r){if(cv=null,n=nM(r),n=Xl(n),n!==null)if(e=Rc(n),e===null)n=null;else if(t=e.tag,t===13){if(n=gD(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return cv=n,null}function RD(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(O5()){case rM:return 1;case xD:return 4;case ov:case F5:return 16;case AD:return 536870912;default:return 16}default:return 16}}var Ia=null,aM=null,N0=null;function PD(){if(N0)return N0;var n,e=aM,t=e.length,r,i="value"in Ia?Ia.value:Ia.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return N0=i.slice(n,1<r?1-r:void 0)}function O0(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function fg(){return!0}function Vb(){return!1}function $i(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?fg:Vb,this.isPropagationStopped=Vb,this}return Pn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=fg)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=fg)},persist:function(){},isPersistent:fg}),e}var Hh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lM=$i(Hh),Rp=Pn({},Hh,{view:0,detail:0}),Y5=$i(Rp),s1,o1,bf,_y=Pn({},Rp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cM,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==bf&&(bf&&n.type==="mousemove"?(s1=n.screenX-bf.screenX,o1=n.screenY-bf.screenY):o1=s1=0,bf=n),s1)},movementY:function(n){return"movementY"in n?n.movementY:o1}}),Gb=$i(_y),q5=Pn({},_y,{dataTransfer:0}),Q5=$i(q5),Z5=Pn({},Rp,{relatedTarget:0}),a1=$i(Z5),e6=Pn({},Hh,{animationName:0,elapsedTime:0,pseudoElement:0}),t6=$i(e6),n6=Pn({},Hh,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),r6=$i(n6),i6=Pn({},Hh,{data:0}),jb=$i(i6),s6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},o6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},a6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function l6(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=a6[n])?!!e[n]:!1}function cM(){return l6}var c6=Pn({},Rp,{key:function(n){if(n.key){var e=s6[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=O0(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?o6[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cM,charCode:function(n){return n.type==="keypress"?O0(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?O0(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),u6=$i(c6),h6=Pn({},_y,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wb=$i(h6),f6=Pn({},Rp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cM}),d6=$i(f6),p6=Pn({},Hh,{propertyName:0,elapsedTime:0,pseudoElement:0}),m6=$i(p6),g6=Pn({},_y,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),v6=$i(g6),y6=[9,13,27,32],uM=$o&&"CompositionEvent"in window,cd=null;$o&&"documentMode"in document&&(cd=document.documentMode);var _6=$o&&"TextEvent"in window&&!cd,ID=$o&&(!uM||cd&&8<cd&&11>=cd),Xb=" ",Jb=!1;function LD(n,e){switch(n){case"keyup":return y6.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function DD(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Du=!1;function x6(n,e){switch(n){case"compositionend":return DD(e);case"keypress":return e.which!==32?null:(Jb=!0,Xb);case"textInput":return n=e.data,n===Xb&&Jb?null:n;default:return null}}function A6(n,e){if(Du)return n==="compositionend"||!uM&&LD(n,e)?(n=PD(),N0=aM=Ia=null,Du=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ID&&e.locale!=="ko"?null:e.data;default:return null}}var S6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kb(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!S6[n.type]:e==="textarea"}function BD(n,e,t,r){hD(r),e=uv(e,"onChange"),0<e.length&&(t=new lM("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var ud=null,Dd=null;function E6(n){WD(n,0)}function xy(n){var e=Ou(n);if(iD(e))return n}function w6(n,e){if(n==="change")return e}var ND=!1;if($o){var l1;if($o){var c1="oninput"in document;if(!c1){var $b=document.createElement("div");$b.setAttribute("oninput","return;"),c1=typeof $b.oninput=="function"}l1=c1}else l1=!1;ND=l1&&(!document.documentMode||9<document.documentMode)}function Yb(){ud&&(ud.detachEvent("onpropertychange",OD),Dd=ud=null)}function OD(n){if(n.propertyName==="value"&&xy(Dd)){var e=[];BD(e,Dd,n,nM(n)),mD(E6,e)}}function M6(n,e,t){n==="focusin"?(Yb(),ud=e,Dd=t,ud.attachEvent("onpropertychange",OD)):n==="focusout"&&Yb()}function T6(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return xy(Dd)}function C6(n,e){if(n==="click")return xy(e)}function b6(n,e){if(n==="input"||n==="change")return xy(e)}function R6(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Os=typeof Object.is=="function"?Object.is:R6;function Bd(n,e){if(Os(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!sS.call(e,i)||!Os(n[i],e[i]))return!1}return!0}function qb(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Qb(n,e){var t=qb(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=qb(t)}}function FD(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?FD(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function kD(){for(var n=window,e=rv();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=rv(n.document)}return e}function hM(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function P6(n){var e=kD(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&FD(t.ownerDocument.documentElement,t)){if(r!==null&&hM(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=Qb(t,s);var o=Qb(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var I6=$o&&"documentMode"in document&&11>=document.documentMode,Bu=null,wS=null,hd=null,MS=!1;function Zb(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;MS||Bu==null||Bu!==rv(r)||(r=Bu,"selectionStart"in r&&hM(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),hd&&Bd(hd,r)||(hd=r,r=uv(wS,"onSelect"),0<r.length&&(e=new lM("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Bu)))}function dg(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Nu={animationend:dg("Animation","AnimationEnd"),animationiteration:dg("Animation","AnimationIteration"),animationstart:dg("Animation","AnimationStart"),transitionend:dg("Transition","TransitionEnd")},u1={},UD={};$o&&(UD=document.createElement("div").style,"AnimationEvent"in window||(delete Nu.animationend.animation,delete Nu.animationiteration.animation,delete Nu.animationstart.animation),"TransitionEvent"in window||delete Nu.transitionend.transition);function Ay(n){if(u1[n])return u1[n];if(!Nu[n])return n;var e=Nu[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in UD)return u1[n]=e[t];return n}var zD=Ay("animationend"),HD=Ay("animationiteration"),VD=Ay("animationstart"),GD=Ay("transitionend"),jD=new Map,eR="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ll(n,e){jD.set(n,e),bc(e,[n])}for(var h1=0;h1<eR.length;h1++){var f1=eR[h1],L6=f1.toLowerCase(),D6=f1[0].toUpperCase()+f1.slice(1);ll(L6,"on"+D6)}ll(zD,"onAnimationEnd");ll(HD,"onAnimationIteration");ll(VD,"onAnimationStart");ll("dblclick","onDoubleClick");ll("focusin","onFocus");ll("focusout","onBlur");ll(GD,"onTransitionEnd");fh("onMouseEnter",["mouseout","mouseover"]);fh("onMouseLeave",["mouseout","mouseover"]);fh("onPointerEnter",["pointerout","pointerover"]);fh("onPointerLeave",["pointerout","pointerover"]);bc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bc("onBeforeInput",["compositionend","keypress","textInput","paste"]);bc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ed="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),B6=new Set("cancel close invalid load scroll toggle".split(" ").concat(ed));function tR(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,L5(r,e,void 0,n),n.currentTarget=null}function WD(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;tR(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;tR(i,a,c),s=l}}}if(sv)throw n=xS,sv=!1,xS=null,n}function pn(n,e){var t=e[PS];t===void 0&&(t=e[PS]=new Set);var r=n+"__bubble";t.has(r)||(XD(e,n,2,!1),t.add(r))}function d1(n,e,t){var r=0;e&&(r|=4),XD(t,n,r,e)}var pg="_reactListening"+Math.random().toString(36).slice(2);function Nd(n){if(!n[pg]){n[pg]=!0,ZL.forEach(function(t){t!=="selectionchange"&&(B6.has(t)||d1(t,!1,n),d1(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[pg]||(e[pg]=!0,d1("selectionchange",!1,e))}}function XD(n,e,t,r){switch(RD(e)){case 1:var i=K5;break;case 4:i=$5;break;default:i=oM}t=i.bind(null,e,t,n),i=void 0,!_S||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function p1(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Xl(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}mD(function(){var c=s,h=nM(t),d=[];e:{var p=jD.get(n);if(p!==void 0){var m=lM,v=n;switch(n){case"keypress":if(O0(t)===0)break e;case"keydown":case"keyup":m=u6;break;case"focusin":v="focus",m=a1;break;case"focusout":v="blur",m=a1;break;case"beforeblur":case"afterblur":m=a1;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Gb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Q5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=d6;break;case zD:case HD:case VD:m=t6;break;case GD:m=m6;break;case"scroll":m=Y5;break;case"wheel":m=v6;break;case"copy":case"cut":case"paste":m=r6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Wb}var A=(e&4)!==0,_=!A&&n==="scroll",g=A?p!==null?p+"Capture":null:p;A=[];for(var x=c,S;x!==null;){S=x;var w=S.stateNode;if(S.tag===5&&w!==null&&(S=w,g!==null&&(w=Rd(x,g),w!=null&&A.push(Od(x,w,S)))),_)break;x=x.return}0<A.length&&(p=new m(p,v,null,t,h),d.push({event:p,listeners:A}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==vS&&(v=t.relatedTarget||t.fromElement)&&(Xl(v)||v[Yo]))break e;if((m||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,m?(v=t.relatedTarget||t.toElement,m=c,v=v?Xl(v):null,v!==null&&(_=Rc(v),v!==_||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=c),m!==v)){if(A=Gb,w="onMouseLeave",g="onMouseEnter",x="mouse",(n==="pointerout"||n==="pointerover")&&(A=Wb,w="onPointerLeave",g="onPointerEnter",x="pointer"),_=m==null?p:Ou(m),S=v==null?p:Ou(v),p=new A(w,x+"leave",m,t,h),p.target=_,p.relatedTarget=S,w=null,Xl(h)===c&&(A=new A(g,x+"enter",v,t,h),A.target=S,A.relatedTarget=_,w=A),_=w,m&&v)t:{for(A=m,g=v,x=0,S=A;S;S=eu(S))x++;for(S=0,w=g;w;w=eu(w))S++;for(;0<x-S;)A=eu(A),x--;for(;0<S-x;)g=eu(g),S--;for(;x--;){if(A===g||g!==null&&A===g.alternate)break t;A=eu(A),g=eu(g)}A=null}else A=null;m!==null&&nR(d,p,m,A,!1),v!==null&&_!==null&&nR(d,_,v,A,!0)}}e:{if(p=c?Ou(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var R=w6;else if(Kb(p))if(ND)R=b6;else{R=T6;var C=M6}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(R=C6);if(R&&(R=R(n,c))){BD(d,R,t,h);break e}C&&C(n,p,c),n==="focusout"&&(C=p._wrapperState)&&C.controlled&&p.type==="number"&&fS(p,"number",p.value)}switch(C=c?Ou(c):window,n){case"focusin":(Kb(C)||C.contentEditable==="true")&&(Bu=C,wS=c,hd=null);break;case"focusout":hd=wS=Bu=null;break;case"mousedown":MS=!0;break;case"contextmenu":case"mouseup":case"dragend":MS=!1,Zb(d,t,h);break;case"selectionchange":if(I6)break;case"keydown":case"keyup":Zb(d,t,h)}var I;if(uM)e:{switch(n){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else Du?LD(n,t)&&(D="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(D="onCompositionStart");D&&(ID&&t.locale!=="ko"&&(Du||D!=="onCompositionStart"?D==="onCompositionEnd"&&Du&&(I=PD()):(Ia=h,aM="value"in Ia?Ia.value:Ia.textContent,Du=!0)),C=uv(c,D),0<C.length&&(D=new jb(D,n,null,t,h),d.push({event:D,listeners:C}),I?D.data=I:(I=DD(t),I!==null&&(D.data=I)))),(I=_6?x6(n,t):A6(n,t))&&(c=uv(c,"onBeforeInput"),0<c.length&&(h=new jb("onBeforeInput","beforeinput",null,t,h),d.push({event:h,listeners:c}),h.data=I))}WD(d,e)})}function Od(n,e,t){return{instance:n,listener:e,currentTarget:t}}function uv(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Rd(n,t),s!=null&&r.unshift(Od(n,s,i)),s=Rd(n,e),s!=null&&r.push(Od(n,s,i))),n=n.return}return r}function eu(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function nR(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Rd(t,s),l!=null&&o.unshift(Od(t,l,a))):i||(l=Rd(t,s),l!=null&&o.push(Od(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var N6=/\r\n?/g,O6=/\u0000|\uFFFD/g;function rR(n){return(typeof n=="string"?n:""+n).replace(N6,`
`).replace(O6,"")}function mg(n,e,t){if(e=rR(e),rR(n)!==e&&t)throw Error(Le(425))}function hv(){}var TS=null,CS=null;function bS(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var RS=typeof setTimeout=="function"?setTimeout:void 0,F6=typeof clearTimeout=="function"?clearTimeout:void 0,iR=typeof Promise=="function"?Promise:void 0,k6=typeof queueMicrotask=="function"?queueMicrotask:typeof iR<"u"?function(n){return iR.resolve(null).then(n).catch(U6)}:RS;function U6(n){setTimeout(function(){throw n})}function m1(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),Ld(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);Ld(e)}function Ua(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function sR(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Vh=Math.random().toString(36).slice(2),eo="__reactFiber$"+Vh,Fd="__reactProps$"+Vh,Yo="__reactContainer$"+Vh,PS="__reactEvents$"+Vh,z6="__reactListeners$"+Vh,H6="__reactHandles$"+Vh;function Xl(n){var e=n[eo];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Yo]||t[eo]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=sR(n);n!==null;){if(t=n[eo])return t;n=sR(n)}return e}n=t,t=n.parentNode}return null}function Pp(n){return n=n[eo]||n[Yo],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ou(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Le(33))}function Sy(n){return n[Fd]||null}var IS=[],Fu=-1;function cl(n){return{current:n}}function _n(n){0>Fu||(n.current=IS[Fu],IS[Fu]=null,Fu--)}function fn(n,e){Fu++,IS[Fu]=n.current,n.current=e}var Qa={},qr=cl(Qa),Ei=cl(!1),mc=Qa;function dh(n,e){var t=n.type.contextTypes;if(!t)return Qa;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function wi(n){return n=n.childContextTypes,n!=null}function fv(){_n(Ei),_n(qr)}function oR(n,e,t){if(qr.current!==Qa)throw Error(Le(168));fn(qr,e),fn(Ei,t)}function JD(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Le(108,M5(n)||"Unknown",i));return Pn({},t,r)}function dv(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Qa,mc=qr.current,fn(qr,n),fn(Ei,Ei.current),!0}function aR(n,e,t){var r=n.stateNode;if(!r)throw Error(Le(169));t?(n=JD(n,e,mc),r.__reactInternalMemoizedMergedChildContext=n,_n(Ei),_n(qr),fn(qr,n)):_n(Ei),fn(Ei,t)}var Oo=null,Ey=!1,g1=!1;function KD(n){Oo===null?Oo=[n]:Oo.push(n)}function V6(n){Ey=!0,KD(n)}function ul(){if(!g1&&Oo!==null){g1=!0;var n=0,e=on;try{var t=Oo;for(on=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}Oo=null,Ey=!1}catch(i){throw Oo!==null&&(Oo=Oo.slice(n+1)),_D(rM,ul),i}finally{on=e,g1=!1}}return null}var ku=[],Uu=0,pv=null,mv=0,us=[],hs=0,gc=null,Uo=1,zo="";function Ol(n,e){ku[Uu++]=mv,ku[Uu++]=pv,pv=n,mv=e}function $D(n,e,t){us[hs++]=Uo,us[hs++]=zo,us[hs++]=gc,gc=n;var r=Uo;n=zo;var i=32-Ds(r)-1;r&=~(1<<i),t+=1;var s=32-Ds(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Uo=1<<32-Ds(e)+i|t<<i|r,zo=s+n}else Uo=1<<s|t<<i|r,zo=n}function fM(n){n.return!==null&&(Ol(n,1),$D(n,1,0))}function dM(n){for(;n===pv;)pv=ku[--Uu],ku[Uu]=null,mv=ku[--Uu],ku[Uu]=null;for(;n===gc;)gc=us[--hs],us[hs]=null,zo=us[--hs],us[hs]=null,Uo=us[--hs],us[hs]=null}var Hi=null,ki=null,En=!1,Ps=null;function YD(n,e){var t=ms(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function lR(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Hi=n,ki=Ua(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Hi=n,ki=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=gc!==null?{id:Uo,overflow:zo}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=ms(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Hi=n,ki=null,!0):!1;default:return!1}}function LS(n){return(n.mode&1)!==0&&(n.flags&128)===0}function DS(n){if(En){var e=ki;if(e){var t=e;if(!lR(n,e)){if(LS(n))throw Error(Le(418));e=Ua(t.nextSibling);var r=Hi;e&&lR(n,e)?YD(r,t):(n.flags=n.flags&-4097|2,En=!1,Hi=n)}}else{if(LS(n))throw Error(Le(418));n.flags=n.flags&-4097|2,En=!1,Hi=n}}}function cR(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Hi=n}function gg(n){if(n!==Hi)return!1;if(!En)return cR(n),En=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!bS(n.type,n.memoizedProps)),e&&(e=ki)){if(LS(n))throw qD(),Error(Le(418));for(;e;)YD(n,e),e=Ua(e.nextSibling)}if(cR(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Le(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){ki=Ua(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}ki=null}}else ki=Hi?Ua(n.stateNode.nextSibling):null;return!0}function qD(){for(var n=ki;n;)n=Ua(n.nextSibling)}function ph(){ki=Hi=null,En=!1}function pM(n){Ps===null?Ps=[n]:Ps.push(n)}var G6=ra.ReactCurrentBatchConfig;function Cs(n,e){if(n&&n.defaultProps){e=Pn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var gv=cl(null),vv=null,zu=null,mM=null;function gM(){mM=zu=vv=null}function vM(n){var e=gv.current;_n(gv),n._currentValue=e}function BS(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function eh(n,e){vv=n,mM=zu=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Si=!0),n.firstContext=null)}function _s(n){var e=n._currentValue;if(mM!==n)if(n={context:n,memoizedValue:e,next:null},zu===null){if(vv===null)throw Error(Le(308));zu=n,vv.dependencies={lanes:0,firstContext:n}}else zu=zu.next=n;return e}var Jl=null;function yM(n){Jl===null?Jl=[n]:Jl.push(n)}function QD(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,yM(e)):(t.next=i.next,i.next=t),e.interleaved=t,qo(n,r)}function qo(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var wa=!1;function _M(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ZD(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Xo(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function za(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,qt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,qo(n,t)}return i=r.interleaved,i===null?(e.next=e,yM(r)):(e.next=i.next,i.next=e),r.interleaved=e,qo(n,t)}function F0(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,iM(n,t)}}function uR(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function yv(n,e,t,r){var i=n.updateQueue;wa=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=n.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,h=c=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=n,A=a;switch(p=e,m=t,A.tag){case 1:if(v=A.payload,typeof v=="function"){d=v.call(m,d,p);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=A.payload,p=typeof v=="function"?v.call(m,d,p):v,p==null)break e;d=Pn({},d,p);break e;case 2:wa=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=m,l=d):h=h.next=m,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(h===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);yc|=o,n.lanes=o,n.memoizedState=d}}function hR(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(Le(191,i));i.call(r)}}}var eB=new QL.Component().refs;function NS(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:Pn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var wy={isMounted:function(n){return(n=n._reactInternals)?Rc(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=fi(),i=Va(n),s=Xo(r,i);s.payload=e,t!=null&&(s.callback=t),e=za(n,s,i),e!==null&&(Bs(e,n,i,r),F0(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=fi(),i=Va(n),s=Xo(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=za(n,s,i),e!==null&&(Bs(e,n,i,r),F0(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=fi(),r=Va(n),i=Xo(t,r);i.tag=2,e!=null&&(i.callback=e),e=za(n,i,r),e!==null&&(Bs(e,n,r,t),F0(e,n,r))}};function fR(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Bd(t,r)||!Bd(i,s):!0}function tB(n,e,t){var r=!1,i=Qa,s=e.contextType;return typeof s=="object"&&s!==null?s=_s(s):(i=wi(e)?mc:qr.current,r=e.contextTypes,s=(r=r!=null)?dh(n,i):Qa),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=wy,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function dR(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&wy.enqueueReplaceState(e,e.state,null)}function OS(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs=eB,_M(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=_s(s):(s=wi(e)?mc:qr.current,i.context=dh(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(NS(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&wy.enqueueReplaceState(i,i.state,null),yv(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function Rf(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Le(309));var r=t.stateNode}if(!r)throw Error(Le(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===eB&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Le(284));if(!t._owner)throw Error(Le(290,n))}return n}function vg(n,e){throw n=Object.prototype.toString.call(e),Error(Le(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function pR(n){var e=n._init;return e(n._payload)}function nB(n){function e(g,x){if(n){var S=g.deletions;S===null?(g.deletions=[x],g.flags|=16):S.push(x)}}function t(g,x){if(!n)return null;for(;x!==null;)e(g,x),x=x.sibling;return null}function r(g,x){for(g=new Map;x!==null;)x.key!==null?g.set(x.key,x):g.set(x.index,x),x=x.sibling;return g}function i(g,x){return g=Ga(g,x),g.index=0,g.sibling=null,g}function s(g,x,S){return g.index=S,n?(S=g.alternate,S!==null?(S=S.index,S<x?(g.flags|=2,x):S):(g.flags|=2,x)):(g.flags|=1048576,x)}function o(g){return n&&g.alternate===null&&(g.flags|=2),g}function a(g,x,S,w){return x===null||x.tag!==6?(x=E1(S,g.mode,w),x.return=g,x):(x=i(x,S),x.return=g,x)}function l(g,x,S,w){var R=S.type;return R===Lu?h(g,x,S.props.children,w,S.key):x!==null&&(x.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Ea&&pR(R)===x.type)?(w=i(x,S.props),w.ref=Rf(g,x,S),w.return=g,w):(w=G0(S.type,S.key,S.props,null,g.mode,w),w.ref=Rf(g,x,S),w.return=g,w)}function c(g,x,S,w){return x===null||x.tag!==4||x.stateNode.containerInfo!==S.containerInfo||x.stateNode.implementation!==S.implementation?(x=w1(S,g.mode,w),x.return=g,x):(x=i(x,S.children||[]),x.return=g,x)}function h(g,x,S,w,R){return x===null||x.tag!==7?(x=sc(S,g.mode,w,R),x.return=g,x):(x=i(x,S),x.return=g,x)}function d(g,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return x=E1(""+x,g.mode,S),x.return=g,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case og:return S=G0(x.type,x.key,x.props,null,g.mode,S),S.ref=Rf(g,null,x),S.return=g,S;case Iu:return x=w1(x,g.mode,S),x.return=g,x;case Ea:var w=x._init;return d(g,w(x._payload),S)}if(Qf(x)||wf(x))return x=sc(x,g.mode,S,null),x.return=g,x;vg(g,x)}return null}function p(g,x,S,w){var R=x!==null?x.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return R!==null?null:a(g,x,""+S,w);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case og:return S.key===R?l(g,x,S,w):null;case Iu:return S.key===R?c(g,x,S,w):null;case Ea:return R=S._init,p(g,x,R(S._payload),w)}if(Qf(S)||wf(S))return R!==null?null:h(g,x,S,w,null);vg(g,S)}return null}function m(g,x,S,w,R){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(S)||null,a(x,g,""+w,R);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case og:return g=g.get(w.key===null?S:w.key)||null,l(x,g,w,R);case Iu:return g=g.get(w.key===null?S:w.key)||null,c(x,g,w,R);case Ea:var C=w._init;return m(g,x,S,C(w._payload),R)}if(Qf(w)||wf(w))return g=g.get(S)||null,h(x,g,w,R,null);vg(x,w)}return null}function v(g,x,S,w){for(var R=null,C=null,I=x,D=x=0,N=null;I!==null&&D<S.length;D++){I.index>D?(N=I,I=null):N=I.sibling;var T=p(g,I,S[D],w);if(T===null){I===null&&(I=N);break}n&&I&&T.alternate===null&&e(g,I),x=s(T,x,D),C===null?R=T:C.sibling=T,C=T,I=N}if(D===S.length)return t(g,I),En&&Ol(g,D),R;if(I===null){for(;D<S.length;D++)I=d(g,S[D],w),I!==null&&(x=s(I,x,D),C===null?R=I:C.sibling=I,C=I);return En&&Ol(g,D),R}for(I=r(g,I);D<S.length;D++)N=m(I,g,D,S[D],w),N!==null&&(n&&N.alternate!==null&&I.delete(N.key===null?D:N.key),x=s(N,x,D),C===null?R=N:C.sibling=N,C=N);return n&&I.forEach(function(L){return e(g,L)}),En&&Ol(g,D),R}function A(g,x,S,w){var R=wf(S);if(typeof R!="function")throw Error(Le(150));if(S=R.call(S),S==null)throw Error(Le(151));for(var C=R=null,I=x,D=x=0,N=null,T=S.next();I!==null&&!T.done;D++,T=S.next()){I.index>D?(N=I,I=null):N=I.sibling;var L=p(g,I,T.value,w);if(L===null){I===null&&(I=N);break}n&&I&&L.alternate===null&&e(g,I),x=s(L,x,D),C===null?R=L:C.sibling=L,C=L,I=N}if(T.done)return t(g,I),En&&Ol(g,D),R;if(I===null){for(;!T.done;D++,T=S.next())T=d(g,T.value,w),T!==null&&(x=s(T,x,D),C===null?R=T:C.sibling=T,C=T);return En&&Ol(g,D),R}for(I=r(g,I);!T.done;D++,T=S.next())T=m(I,g,D,T.value,w),T!==null&&(n&&T.alternate!==null&&I.delete(T.key===null?D:T.key),x=s(T,x,D),C===null?R=T:C.sibling=T,C=T);return n&&I.forEach(function(H){return e(g,H)}),En&&Ol(g,D),R}function _(g,x,S,w){if(typeof S=="object"&&S!==null&&S.type===Lu&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case og:e:{for(var R=S.key,C=x;C!==null;){if(C.key===R){if(R=S.type,R===Lu){if(C.tag===7){t(g,C.sibling),x=i(C,S.props.children),x.return=g,g=x;break e}}else if(C.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Ea&&pR(R)===C.type){t(g,C.sibling),x=i(C,S.props),x.ref=Rf(g,C,S),x.return=g,g=x;break e}t(g,C);break}else e(g,C);C=C.sibling}S.type===Lu?(x=sc(S.props.children,g.mode,w,S.key),x.return=g,g=x):(w=G0(S.type,S.key,S.props,null,g.mode,w),w.ref=Rf(g,x,S),w.return=g,g=w)}return o(g);case Iu:e:{for(C=S.key;x!==null;){if(x.key===C)if(x.tag===4&&x.stateNode.containerInfo===S.containerInfo&&x.stateNode.implementation===S.implementation){t(g,x.sibling),x=i(x,S.children||[]),x.return=g,g=x;break e}else{t(g,x);break}else e(g,x);x=x.sibling}x=w1(S,g.mode,w),x.return=g,g=x}return o(g);case Ea:return C=S._init,_(g,x,C(S._payload),w)}if(Qf(S))return v(g,x,S,w);if(wf(S))return A(g,x,S,w);vg(g,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,x!==null&&x.tag===6?(t(g,x.sibling),x=i(x,S),x.return=g,g=x):(t(g,x),x=E1(S,g.mode,w),x.return=g,g=x),o(g)):t(g,x)}return _}var mh=nB(!0),rB=nB(!1),Ip={},ao=cl(Ip),kd=cl(Ip),Ud=cl(Ip);function Kl(n){if(n===Ip)throw Error(Le(174));return n}function xM(n,e){switch(fn(Ud,e),fn(kd,n),fn(ao,Ip),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:pS(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=pS(e,n)}_n(ao),fn(ao,e)}function gh(){_n(ao),_n(kd),_n(Ud)}function iB(n){Kl(Ud.current);var e=Kl(ao.current),t=pS(e,n.type);e!==t&&(fn(kd,n),fn(ao,t))}function AM(n){kd.current===n&&(_n(ao),_n(kd))}var Cn=cl(0);function _v(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var v1=[];function SM(){for(var n=0;n<v1.length;n++)v1[n]._workInProgressVersionPrimary=null;v1.length=0}var k0=ra.ReactCurrentDispatcher,y1=ra.ReactCurrentBatchConfig,vc=0,Rn=null,nr=null,mr=null,xv=!1,fd=!1,zd=0,j6=0;function Ur(){throw Error(Le(321))}function EM(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Os(n[t],e[t]))return!1;return!0}function wM(n,e,t,r,i,s){if(vc=s,Rn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,k0.current=n===null||n.memoizedState===null?K6:$6,n=t(r,i),fd){s=0;do{if(fd=!1,zd=0,25<=s)throw Error(Le(301));s+=1,mr=nr=null,e.updateQueue=null,k0.current=Y6,n=t(r,i)}while(fd)}if(k0.current=Av,e=nr!==null&&nr.next!==null,vc=0,mr=nr=Rn=null,xv=!1,e)throw Error(Le(300));return n}function MM(){var n=zd!==0;return zd=0,n}function Zs(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mr===null?Rn.memoizedState=mr=n:mr=mr.next=n,mr}function xs(){if(nr===null){var n=Rn.alternate;n=n!==null?n.memoizedState:null}else n=nr.next;var e=mr===null?Rn.memoizedState:mr.next;if(e!==null)mr=e,nr=n;else{if(n===null)throw Error(Le(310));nr=n,n={memoizedState:nr.memoizedState,baseState:nr.baseState,baseQueue:nr.baseQueue,queue:nr.queue,next:null},mr===null?Rn.memoizedState=mr=n:mr=mr.next=n}return mr}function Hd(n,e){return typeof e=="function"?e(n):e}function _1(n){var e=xs(),t=e.queue;if(t===null)throw Error(Le(311));t.lastRenderedReducer=n;var r=nr,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((vc&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Rn.lanes|=h,yc|=h}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Os(r,e.memoizedState)||(Si=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,Rn.lanes|=s,yc|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function x1(n){var e=xs(),t=e.queue;if(t===null)throw Error(Le(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);Os(s,e.memoizedState)||(Si=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function sB(){}function oB(n,e){var t=Rn,r=xs(),i=e(),s=!Os(r.memoizedState,i);if(s&&(r.memoizedState=i,Si=!0),r=r.queue,TM(cB.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||mr!==null&&mr.memoizedState.tag&1){if(t.flags|=2048,Vd(9,lB.bind(null,t,r,i,e),void 0,null),gr===null)throw Error(Le(349));vc&30||aB(t,e,i)}return i}function aB(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Rn.updateQueue,e===null?(e={lastEffect:null,stores:null},Rn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function lB(n,e,t,r){e.value=t,e.getSnapshot=r,uB(e)&&hB(n)}function cB(n,e,t){return t(function(){uB(e)&&hB(n)})}function uB(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Os(n,t)}catch{return!0}}function hB(n){var e=qo(n,1);e!==null&&Bs(e,n,1,-1)}function mR(n){var e=Zs();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hd,lastRenderedState:n},e.queue=n,n=n.dispatch=J6.bind(null,Rn,n),[e.memoizedState,n]}function Vd(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=Rn.updateQueue,e===null?(e={lastEffect:null,stores:null},Rn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function fB(){return xs().memoizedState}function U0(n,e,t,r){var i=Zs();Rn.flags|=n,i.memoizedState=Vd(1|e,t,void 0,r===void 0?null:r)}function My(n,e,t,r){var i=xs();r=r===void 0?null:r;var s=void 0;if(nr!==null){var o=nr.memoizedState;if(s=o.destroy,r!==null&&EM(r,o.deps)){i.memoizedState=Vd(e,t,s,r);return}}Rn.flags|=n,i.memoizedState=Vd(1|e,t,s,r)}function gR(n,e){return U0(8390656,8,n,e)}function TM(n,e){return My(2048,8,n,e)}function dB(n,e){return My(4,2,n,e)}function pB(n,e){return My(4,4,n,e)}function mB(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function gB(n,e,t){return t=t!=null?t.concat([n]):null,My(4,4,mB.bind(null,e,n),t)}function CM(){}function vB(n,e){var t=xs();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&EM(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function yB(n,e){var t=xs();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&EM(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function _B(n,e,t){return vc&21?(Os(t,e)||(t=SD(),Rn.lanes|=t,yc|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Si=!0),n.memoizedState=t)}function W6(n,e){var t=on;on=t!==0&&4>t?t:4,n(!0);var r=y1.transition;y1.transition={};try{n(!1),e()}finally{on=t,y1.transition=r}}function xB(){return xs().memoizedState}function X6(n,e,t){var r=Va(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},AB(n))SB(e,t);else if(t=QD(n,e,t,r),t!==null){var i=fi();Bs(t,n,r,i),EB(t,e,r)}}function J6(n,e,t){var r=Va(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(AB(n))SB(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,Os(a,o)){var l=e.interleaved;l===null?(i.next=i,yM(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=QD(n,e,i,r),t!==null&&(i=fi(),Bs(t,n,r,i),EB(t,e,r))}}function AB(n){var e=n.alternate;return n===Rn||e!==null&&e===Rn}function SB(n,e){fd=xv=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function EB(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,iM(n,t)}}var Av={readContext:_s,useCallback:Ur,useContext:Ur,useEffect:Ur,useImperativeHandle:Ur,useInsertionEffect:Ur,useLayoutEffect:Ur,useMemo:Ur,useReducer:Ur,useRef:Ur,useState:Ur,useDebugValue:Ur,useDeferredValue:Ur,useTransition:Ur,useMutableSource:Ur,useSyncExternalStore:Ur,useId:Ur,unstable_isNewReconciler:!1},K6={readContext:_s,useCallback:function(n,e){return Zs().memoizedState=[n,e===void 0?null:e],n},useContext:_s,useEffect:gR,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,U0(4194308,4,mB.bind(null,e,n),t)},useLayoutEffect:function(n,e){return U0(4194308,4,n,e)},useInsertionEffect:function(n,e){return U0(4,2,n,e)},useMemo:function(n,e){var t=Zs();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=Zs();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=X6.bind(null,Rn,n),[r.memoizedState,n]},useRef:function(n){var e=Zs();return n={current:n},e.memoizedState=n},useState:mR,useDebugValue:CM,useDeferredValue:function(n){return Zs().memoizedState=n},useTransition:function(){var n=mR(!1),e=n[0];return n=W6.bind(null,n[1]),Zs().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=Rn,i=Zs();if(En){if(t===void 0)throw Error(Le(407));t=t()}else{if(t=e(),gr===null)throw Error(Le(349));vc&30||aB(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,gR(cB.bind(null,r,s,n),[n]),r.flags|=2048,Vd(9,lB.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=Zs(),e=gr.identifierPrefix;if(En){var t=zo,r=Uo;t=(r&~(1<<32-Ds(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=zd++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=j6++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},$6={readContext:_s,useCallback:vB,useContext:_s,useEffect:TM,useImperativeHandle:gB,useInsertionEffect:dB,useLayoutEffect:pB,useMemo:yB,useReducer:_1,useRef:fB,useState:function(){return _1(Hd)},useDebugValue:CM,useDeferredValue:function(n){var e=xs();return _B(e,nr.memoizedState,n)},useTransition:function(){var n=_1(Hd)[0],e=xs().memoizedState;return[n,e]},useMutableSource:sB,useSyncExternalStore:oB,useId:xB,unstable_isNewReconciler:!1},Y6={readContext:_s,useCallback:vB,useContext:_s,useEffect:TM,useImperativeHandle:gB,useInsertionEffect:dB,useLayoutEffect:pB,useMemo:yB,useReducer:x1,useRef:fB,useState:function(){return x1(Hd)},useDebugValue:CM,useDeferredValue:function(n){var e=xs();return nr===null?e.memoizedState=n:_B(e,nr.memoizedState,n)},useTransition:function(){var n=x1(Hd)[0],e=xs().memoizedState;return[n,e]},useMutableSource:sB,useSyncExternalStore:oB,useId:xB,unstable_isNewReconciler:!1};function vh(n,e){try{var t="",r=e;do t+=w5(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function A1(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function FS(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var q6=typeof WeakMap=="function"?WeakMap:Map;function wB(n,e,t){t=Xo(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){Ev||(Ev=!0,JS=r),FS(n,e)},t}function MB(n,e,t){t=Xo(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){FS(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){FS(n,e),typeof r!="function"&&(Ha===null?Ha=new Set([this]):Ha.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function vR(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new q6;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=hz.bind(null,n,e,t),e.then(n,n))}function yR(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function _R(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Xo(-1,1),e.tag=2,za(t,e,1))),t.lanes|=1),n)}var Q6=ra.ReactCurrentOwner,Si=!1;function ai(n,e,t,r){e.child=n===null?rB(e,null,t,r):mh(e,n.child,t,r)}function xR(n,e,t,r,i){t=t.render;var s=e.ref;return eh(e,i),r=wM(n,e,t,r,s,i),t=MM(),n!==null&&!Si?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Qo(n,e,i)):(En&&t&&fM(e),e.flags|=1,ai(n,e,r,i),e.child)}function AR(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!NM(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,TB(n,e,s,r,i)):(n=G0(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Bd,t(o,r)&&n.ref===e.ref)return Qo(n,e,i)}return e.flags|=1,n=Ga(s,r),n.ref=e.ref,n.return=e,e.child=n}function TB(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(Bd(s,r)&&n.ref===e.ref)if(Si=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(Si=!0);else return e.lanes=n.lanes,Qo(n,e,i)}return kS(n,e,t,r,i)}function CB(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},fn(Vu,Ni),Ni|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,fn(Vu,Ni),Ni|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,fn(Vu,Ni),Ni|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,fn(Vu,Ni),Ni|=r;return ai(n,e,i,t),e.child}function bB(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function kS(n,e,t,r,i){var s=wi(t)?mc:qr.current;return s=dh(e,s),eh(e,i),t=wM(n,e,t,r,s,i),r=MM(),n!==null&&!Si?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Qo(n,e,i)):(En&&r&&fM(e),e.flags|=1,ai(n,e,t,i),e.child)}function SR(n,e,t,r,i){if(wi(t)){var s=!0;dv(e)}else s=!1;if(eh(e,i),e.stateNode===null)z0(n,e),tB(e,t,r),OS(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=_s(c):(c=wi(t)?mc:qr.current,c=dh(e,c));var h=t.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&dR(e,o,r,c),wa=!1;var p=e.memoizedState;o.state=p,yv(e,r,o,i),l=e.memoizedState,a!==r||p!==l||Ei.current||wa?(typeof h=="function"&&(NS(e,t,h,r),l=e.memoizedState),(a=wa||fR(e,t,a,r,p,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,ZD(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:Cs(e.type,a),o.props=c,d=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=_s(l):(l=wi(t)?mc:qr.current,l=dh(e,l));var m=t.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&dR(e,o,r,l),wa=!1,p=e.memoizedState,o.state=p,yv(e,r,o,i);var v=e.memoizedState;a!==d||p!==v||Ei.current||wa?(typeof m=="function"&&(NS(e,t,m,r),v=e.memoizedState),(c=wa||fR(e,t,c,r,p,v,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),r=!1)}return US(n,e,t,r,s,i)}function US(n,e,t,r,i,s){bB(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&aR(e,t,!1),Qo(n,e,s);r=e.stateNode,Q6.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=mh(e,n.child,null,s),e.child=mh(e,null,a,s)):ai(n,e,a,s),e.memoizedState=r.state,i&&aR(e,t,!0),e.child}function RB(n){var e=n.stateNode;e.pendingContext?oR(n,e.pendingContext,e.pendingContext!==e.context):e.context&&oR(n,e.context,!1),xM(n,e.containerInfo)}function ER(n,e,t,r,i){return ph(),pM(i),e.flags|=256,ai(n,e,t,r),e.child}var zS={dehydrated:null,treeContext:null,retryLane:0};function HS(n){return{baseLanes:n,cachePool:null,transitions:null}}function PB(n,e,t){var r=e.pendingProps,i=Cn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),fn(Cn,i&1),n===null)return DS(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=by(o,r,0,null),n=sc(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=HS(t),e.memoizedState=zS,n):bM(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Z6(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ga(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Ga(a,s):(s=sc(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?HS(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=zS,r}return s=n.child,n=s.sibling,r=Ga(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function bM(n,e){return e=by({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function yg(n,e,t,r){return r!==null&&pM(r),mh(e,n.child,null,t),n=bM(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function Z6(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=A1(Error(Le(422))),yg(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=by({mode:"visible",children:r.children},i,0,null),s=sc(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&mh(e,n.child,null,o),e.child.memoizedState=HS(o),e.memoizedState=zS,s);if(!(e.mode&1))return yg(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Le(419)),r=A1(s,r,void 0),yg(n,e,o,r)}if(a=(o&n.childLanes)!==0,Si||a){if(r=gr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,qo(n,i),Bs(r,n,i,-1))}return BM(),r=A1(Error(Le(421))),yg(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=fz.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,ki=Ua(i.nextSibling),Hi=e,En=!0,Ps=null,n!==null&&(us[hs++]=Uo,us[hs++]=zo,us[hs++]=gc,Uo=n.id,zo=n.overflow,gc=e),e=bM(e,r.children),e.flags|=4096,e)}function wR(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),BS(n.return,e,t)}function S1(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function IB(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(ai(n,e,r.children,t),r=Cn.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&wR(n,t,e);else if(n.tag===19)wR(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(fn(Cn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&_v(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),S1(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&_v(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}S1(e,!0,t,null,s);break;case"together":S1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function z0(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Qo(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),yc|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Le(153));if(e.child!==null){for(n=e.child,t=Ga(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Ga(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function ez(n,e,t){switch(e.tag){case 3:RB(e),ph();break;case 5:iB(e);break;case 1:wi(e.type)&&dv(e);break;case 4:xM(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;fn(gv,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(fn(Cn,Cn.current&1),e.flags|=128,null):t&e.child.childLanes?PB(n,e,t):(fn(Cn,Cn.current&1),n=Qo(n,e,t),n!==null?n.sibling:null);fn(Cn,Cn.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return IB(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),fn(Cn,Cn.current),r)break;return null;case 22:case 23:return e.lanes=0,CB(n,e,t)}return Qo(n,e,t)}var LB,VS,DB,BB;LB=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};VS=function(){};DB=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,Kl(ao.current);var s=null;switch(t){case"input":i=uS(n,i),r=uS(n,r),s=[];break;case"select":i=Pn({},i,{value:void 0}),r=Pn({},r,{value:void 0}),s=[];break;case"textarea":i=dS(n,i),r=dS(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=hv)}mS(t,r);var o;t=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Cd.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Cd.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&pn("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};BB=function(n,e,t,r){t!==r&&(e.flags|=4)};function Pf(n,e){if(!En)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function zr(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function tz(n,e,t){var r=e.pendingProps;switch(dM(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zr(e),null;case 1:return wi(e.type)&&fv(),zr(e),null;case 3:return r=e.stateNode,gh(),_n(Ei),_n(qr),SM(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(gg(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ps!==null&&(YS(Ps),Ps=null))),VS(n,e),zr(e),null;case 5:AM(e);var i=Kl(Ud.current);if(t=e.type,n!==null&&e.stateNode!=null)DB(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Le(166));return zr(e),null}if(n=Kl(ao.current),gg(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[eo]=e,r[Fd]=s,n=(e.mode&1)!==0,t){case"dialog":pn("cancel",r),pn("close",r);break;case"iframe":case"object":case"embed":pn("load",r);break;case"video":case"audio":for(i=0;i<ed.length;i++)pn(ed[i],r);break;case"source":pn("error",r);break;case"img":case"image":case"link":pn("error",r),pn("load",r);break;case"details":pn("toggle",r);break;case"input":Db(r,s),pn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},pn("invalid",r);break;case"textarea":Nb(r,s),pn("invalid",r)}mS(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&mg(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&mg(r.textContent,a,n),i=["children",""+a]):Cd.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&pn("scroll",r)}switch(t){case"input":ag(r),Bb(r,s,!0);break;case"textarea":ag(r),Ob(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=hv)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=aD(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[eo]=e,n[Fd]=r,LB(n,e,!1,!1),e.stateNode=n;e:{switch(o=gS(t,r),t){case"dialog":pn("cancel",n),pn("close",n),i=r;break;case"iframe":case"object":case"embed":pn("load",n),i=r;break;case"video":case"audio":for(i=0;i<ed.length;i++)pn(ed[i],n);i=r;break;case"source":pn("error",n),i=r;break;case"img":case"image":case"link":pn("error",n),pn("load",n),i=r;break;case"details":pn("toggle",n),i=r;break;case"input":Db(n,r),i=uS(n,r),pn("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=Pn({},r,{value:void 0}),pn("invalid",n);break;case"textarea":Nb(n,r),i=dS(n,r),pn("invalid",n);break;default:i=r}mS(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?uD(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&lD(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&bd(n,l):typeof l=="number"&&bd(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Cd.hasOwnProperty(s)?l!=null&&s==="onScroll"&&pn("scroll",n):l!=null&&Qw(n,s,l,o))}switch(t){case"input":ag(n),Bb(n,r,!1);break;case"textarea":ag(n),Ob(n);break;case"option":r.value!=null&&n.setAttribute("value",""+qa(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?Yu(n,!!r.multiple,s,!1):r.defaultValue!=null&&Yu(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=hv)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return zr(e),null;case 6:if(n&&e.stateNode!=null)BB(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Le(166));if(t=Kl(Ud.current),Kl(ao.current),gg(e)){if(r=e.stateNode,t=e.memoizedProps,r[eo]=e,(s=r.nodeValue!==t)&&(n=Hi,n!==null))switch(n.tag){case 3:mg(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&mg(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[eo]=e,e.stateNode=r}return zr(e),null;case 13:if(_n(Cn),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(En&&ki!==null&&e.mode&1&&!(e.flags&128))qD(),ph(),e.flags|=98560,s=!1;else if(s=gg(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(Le(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Le(317));s[eo]=e}else ph(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;zr(e),s=!1}else Ps!==null&&(YS(Ps),Ps=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||Cn.current&1?sr===0&&(sr=3):BM())),e.updateQueue!==null&&(e.flags|=4),zr(e),null);case 4:return gh(),VS(n,e),n===null&&Nd(e.stateNode.containerInfo),zr(e),null;case 10:return vM(e.type._context),zr(e),null;case 17:return wi(e.type)&&fv(),zr(e),null;case 19:if(_n(Cn),s=e.memoizedState,s===null)return zr(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Pf(s,!1);else{if(sr!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=_v(n),o!==null){for(e.flags|=128,Pf(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return fn(Cn,Cn.current&1|2),e.child}n=n.sibling}s.tail!==null&&Gn()>yh&&(e.flags|=128,r=!0,Pf(s,!1),e.lanes=4194304)}else{if(!r)if(n=_v(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Pf(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!En)return zr(e),null}else 2*Gn()-s.renderingStartTime>yh&&t!==1073741824&&(e.flags|=128,r=!0,Pf(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Gn(),e.sibling=null,t=Cn.current,fn(Cn,r?t&1|2:t&1),e):(zr(e),null);case 22:case 23:return DM(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ni&1073741824&&(zr(e),e.subtreeFlags&6&&(e.flags|=8192)):zr(e),null;case 24:return null;case 25:return null}throw Error(Le(156,e.tag))}function nz(n,e){switch(dM(e),e.tag){case 1:return wi(e.type)&&fv(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return gh(),_n(Ei),_n(qr),SM(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return AM(e),null;case 13:if(_n(Cn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Le(340));ph()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return _n(Cn),null;case 4:return gh(),null;case 10:return vM(e.type._context),null;case 22:case 23:return DM(),null;case 24:return null;default:return null}}var _g=!1,Xr=!1,rz=typeof WeakSet=="function"?WeakSet:Set,Qe=null;function Hu(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Bn(n,e,r)}else t.current=null}function GS(n,e,t){try{t()}catch(r){Bn(n,e,r)}}var MR=!1;function iz(n,e){if(TS=lv,n=kD(),hM(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=n,p=null;t:for(;;){for(var m;d!==t||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)p=d,d=m;for(;;){if(d===n)break t;if(p===t&&++c===i&&(a=o),p===s&&++h===r&&(l=o),(m=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(CS={focusedElem:n,selectionRange:t},lv=!1,Qe=e;Qe!==null;)if(e=Qe,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Qe=n;else for(;Qe!==null;){e=Qe;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var A=v.memoizedProps,_=v.memoizedState,g=e.stateNode,x=g.getSnapshotBeforeUpdate(e.elementType===e.type?A:Cs(e.type,A),_);g.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Le(163))}}catch(w){Bn(e,e.return,w)}if(n=e.sibling,n!==null){n.return=e.return,Qe=n;break}Qe=e.return}return v=MR,MR=!1,v}function dd(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&GS(e,t,s)}i=i.next}while(i!==r)}}function Ty(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function jS(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function NB(n){var e=n.alternate;e!==null&&(n.alternate=null,NB(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[eo],delete e[Fd],delete e[PS],delete e[z6],delete e[H6])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function OB(n){return n.tag===5||n.tag===3||n.tag===4}function TR(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||OB(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function WS(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=hv));else if(r!==4&&(n=n.child,n!==null))for(WS(n,e,t),n=n.sibling;n!==null;)WS(n,e,t),n=n.sibling}function XS(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(XS(n,e,t),n=n.sibling;n!==null;)XS(n,e,t),n=n.sibling}var Tr=null,Rs=!1;function da(n,e,t){for(t=t.child;t!==null;)FB(n,e,t),t=t.sibling}function FB(n,e,t){if(oo&&typeof oo.onCommitFiberUnmount=="function")try{oo.onCommitFiberUnmount(yy,t)}catch{}switch(t.tag){case 5:Xr||Hu(t,e);case 6:var r=Tr,i=Rs;Tr=null,da(n,e,t),Tr=r,Rs=i,Tr!==null&&(Rs?(n=Tr,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Tr.removeChild(t.stateNode));break;case 18:Tr!==null&&(Rs?(n=Tr,t=t.stateNode,n.nodeType===8?m1(n.parentNode,t):n.nodeType===1&&m1(n,t),Ld(n)):m1(Tr,t.stateNode));break;case 4:r=Tr,i=Rs,Tr=t.stateNode.containerInfo,Rs=!0,da(n,e,t),Tr=r,Rs=i;break;case 0:case 11:case 14:case 15:if(!Xr&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&GS(t,e,o),i=i.next}while(i!==r)}da(n,e,t);break;case 1:if(!Xr&&(Hu(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){Bn(t,e,a)}da(n,e,t);break;case 21:da(n,e,t);break;case 22:t.mode&1?(Xr=(r=Xr)||t.memoizedState!==null,da(n,e,t),Xr=r):da(n,e,t);break;default:da(n,e,t)}}function CR(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new rz),e.forEach(function(r){var i=dz.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function Es(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Tr=a.stateNode,Rs=!1;break e;case 3:Tr=a.stateNode.containerInfo,Rs=!0;break e;case 4:Tr=a.stateNode.containerInfo,Rs=!0;break e}a=a.return}if(Tr===null)throw Error(Le(160));FB(s,o,i),Tr=null,Rs=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Bn(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)kB(e,n),e=e.sibling}function kB(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Es(e,n),Qs(n),r&4){try{dd(3,n,n.return),Ty(3,n)}catch(A){Bn(n,n.return,A)}try{dd(5,n,n.return)}catch(A){Bn(n,n.return,A)}}break;case 1:Es(e,n),Qs(n),r&512&&t!==null&&Hu(t,t.return);break;case 5:if(Es(e,n),Qs(n),r&512&&t!==null&&Hu(t,t.return),n.flags&32){var i=n.stateNode;try{bd(i,"")}catch(A){Bn(n,n.return,A)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&sD(i,s),gS(a,o);var c=gS(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?uD(i,d):h==="dangerouslySetInnerHTML"?lD(i,d):h==="children"?bd(i,d):Qw(i,h,d,c)}switch(a){case"input":hS(i,s);break;case"textarea":oD(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Yu(i,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?Yu(i,!!s.multiple,s.defaultValue,!0):Yu(i,!!s.multiple,s.multiple?[]:"",!1))}i[Fd]=s}catch(A){Bn(n,n.return,A)}}break;case 6:if(Es(e,n),Qs(n),r&4){if(n.stateNode===null)throw Error(Le(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(A){Bn(n,n.return,A)}}break;case 3:if(Es(e,n),Qs(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{Ld(e.containerInfo)}catch(A){Bn(n,n.return,A)}break;case 4:Es(e,n),Qs(n);break;case 13:Es(e,n),Qs(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(IM=Gn())),r&4&&CR(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(Xr=(c=Xr)||h,Es(e,n),Xr=c):Es(e,n),Qs(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!h&&n.mode&1)for(Qe=n,h=n.child;h!==null;){for(d=Qe=h;Qe!==null;){switch(p=Qe,m=p.child,p.tag){case 0:case 11:case 14:case 15:dd(4,p,p.return);break;case 1:Hu(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){r=p,t=p.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(A){Bn(r,t,A)}}break;case 5:Hu(p,p.return);break;case 22:if(p.memoizedState!==null){RR(d);continue}}m!==null?(m.return=p,Qe=m):RR(d)}h=h.sibling}e:for(h=null,d=n;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=cD("display",o))}catch(A){Bn(n,n.return,A)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(A){Bn(n,n.return,A)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Es(e,n),Qs(n),r&4&&CR(n);break;case 21:break;default:Es(e,n),Qs(n)}}function Qs(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(OB(t)){var r=t;break e}t=t.return}throw Error(Le(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(bd(i,""),r.flags&=-33);var s=TR(n);XS(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=TR(n);WS(n,a,o);break;default:throw Error(Le(161))}}catch(l){Bn(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function sz(n,e,t){Qe=n,UB(n)}function UB(n,e,t){for(var r=(n.mode&1)!==0;Qe!==null;){var i=Qe,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||_g;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Xr;a=_g;var c=Xr;if(_g=o,(Xr=l)&&!c)for(Qe=i;Qe!==null;)o=Qe,l=o.child,o.tag===22&&o.memoizedState!==null?PR(i):l!==null?(l.return=o,Qe=l):PR(i);for(;s!==null;)Qe=s,UB(s),s=s.sibling;Qe=i,_g=a,Xr=c}bR(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Qe=s):bR(n)}}function bR(n){for(;Qe!==null;){var e=Qe;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Xr||Ty(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Xr)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Cs(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&hR(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}hR(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Ld(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Le(163))}Xr||e.flags&512&&jS(e)}catch(p){Bn(e,e.return,p)}}if(e===n){Qe=null;break}if(t=e.sibling,t!==null){t.return=e.return,Qe=t;break}Qe=e.return}}function RR(n){for(;Qe!==null;){var e=Qe;if(e===n){Qe=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Qe=t;break}Qe=e.return}}function PR(n){for(;Qe!==null;){var e=Qe;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Ty(4,e)}catch(l){Bn(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Bn(e,i,l)}}var s=e.return;try{jS(e)}catch(l){Bn(e,s,l)}break;case 5:var o=e.return;try{jS(e)}catch(l){Bn(e,o,l)}}}catch(l){Bn(e,e.return,l)}if(e===n){Qe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Qe=a;break}Qe=e.return}}var oz=Math.ceil,Sv=ra.ReactCurrentDispatcher,RM=ra.ReactCurrentOwner,ys=ra.ReactCurrentBatchConfig,qt=0,gr=null,qn=null,Pr=0,Ni=0,Vu=cl(0),sr=0,Gd=null,yc=0,Cy=0,PM=0,pd=null,Ai=null,IM=0,yh=1/0,No=null,Ev=!1,JS=null,Ha=null,xg=!1,La=null,wv=0,md=0,KS=null,H0=-1,V0=0;function fi(){return qt&6?Gn():H0!==-1?H0:H0=Gn()}function Va(n){return n.mode&1?qt&2&&Pr!==0?Pr&-Pr:G6.transition!==null?(V0===0&&(V0=SD()),V0):(n=on,n!==0||(n=window.event,n=n===void 0?16:RD(n.type)),n):1}function Bs(n,e,t,r){if(50<md)throw md=0,KS=null,Error(Le(185));bp(n,t,r),(!(qt&2)||n!==gr)&&(n===gr&&(!(qt&2)&&(Cy|=t),sr===4&&ba(n,Pr)),Mi(n,r),t===1&&qt===0&&!(e.mode&1)&&(yh=Gn()+500,Ey&&ul()))}function Mi(n,e){var t=n.callbackNode;G5(n,e);var r=av(n,n===gr?Pr:0);if(r===0)t!==null&&Ub(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&Ub(t),e===1)n.tag===0?V6(IR.bind(null,n)):KD(IR.bind(null,n)),k6(function(){!(qt&6)&&ul()}),t=null;else{switch(ED(r)){case 1:t=rM;break;case 4:t=xD;break;case 16:t=ov;break;case 536870912:t=AD;break;default:t=ov}t=JB(t,zB.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function zB(n,e){if(H0=-1,V0=0,qt&6)throw Error(Le(327));var t=n.callbackNode;if(th()&&n.callbackNode!==t)return null;var r=av(n,n===gr?Pr:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Mv(n,r);else{e=r;var i=qt;qt|=2;var s=VB();(gr!==n||Pr!==e)&&(No=null,yh=Gn()+500,ic(n,e));do try{cz();break}catch(a){HB(n,a)}while(!0);gM(),Sv.current=s,qt=i,qn!==null?e=0:(gr=null,Pr=0,e=sr)}if(e!==0){if(e===2&&(i=AS(n),i!==0&&(r=i,e=$S(n,i))),e===1)throw t=Gd,ic(n,0),ba(n,r),Mi(n,Gn()),t;if(e===6)ba(n,r);else{if(i=n.current.alternate,!(r&30)&&!az(i)&&(e=Mv(n,r),e===2&&(s=AS(n),s!==0&&(r=s,e=$S(n,s))),e===1))throw t=Gd,ic(n,0),ba(n,r),Mi(n,Gn()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(Le(345));case 2:Fl(n,Ai,No);break;case 3:if(ba(n,r),(r&130023424)===r&&(e=IM+500-Gn(),10<e)){if(av(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){fi(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=RS(Fl.bind(null,n,Ai,No),e);break}Fl(n,Ai,No);break;case 4:if(ba(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-Ds(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Gn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*oz(r/1960))-r,10<r){n.timeoutHandle=RS(Fl.bind(null,n,Ai,No),r);break}Fl(n,Ai,No);break;case 5:Fl(n,Ai,No);break;default:throw Error(Le(329))}}}return Mi(n,Gn()),n.callbackNode===t?zB.bind(null,n):null}function $S(n,e){var t=pd;return n.current.memoizedState.isDehydrated&&(ic(n,e).flags|=256),n=Mv(n,e),n!==2&&(e=Ai,Ai=t,e!==null&&YS(e)),n}function YS(n){Ai===null?Ai=n:Ai.push.apply(Ai,n)}function az(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!Os(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ba(n,e){for(e&=~PM,e&=~Cy,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Ds(e),r=1<<t;n[t]=-1,e&=~r}}function IR(n){if(qt&6)throw Error(Le(327));th();var e=av(n,0);if(!(e&1))return Mi(n,Gn()),null;var t=Mv(n,e);if(n.tag!==0&&t===2){var r=AS(n);r!==0&&(e=r,t=$S(n,r))}if(t===1)throw t=Gd,ic(n,0),ba(n,e),Mi(n,Gn()),t;if(t===6)throw Error(Le(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Fl(n,Ai,No),Mi(n,Gn()),null}function LM(n,e){var t=qt;qt|=1;try{return n(e)}finally{qt=t,qt===0&&(yh=Gn()+500,Ey&&ul())}}function _c(n){La!==null&&La.tag===0&&!(qt&6)&&th();var e=qt;qt|=1;var t=ys.transition,r=on;try{if(ys.transition=null,on=1,n)return n()}finally{on=r,ys.transition=t,qt=e,!(qt&6)&&ul()}}function DM(){Ni=Vu.current,_n(Vu)}function ic(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,F6(t)),qn!==null)for(t=qn.return;t!==null;){var r=t;switch(dM(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&fv();break;case 3:gh(),_n(Ei),_n(qr),SM();break;case 5:AM(r);break;case 4:gh();break;case 13:_n(Cn);break;case 19:_n(Cn);break;case 10:vM(r.type._context);break;case 22:case 23:DM()}t=t.return}if(gr=n,qn=n=Ga(n.current,null),Pr=Ni=e,sr=0,Gd=null,PM=Cy=yc=0,Ai=pd=null,Jl!==null){for(e=0;e<Jl.length;e++)if(t=Jl[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}Jl=null}return n}function HB(n,e){do{var t=qn;try{if(gM(),k0.current=Av,xv){for(var r=Rn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}xv=!1}if(vc=0,mr=nr=Rn=null,fd=!1,zd=0,RM.current=null,t===null||t.return===null){sr=1,Gd=e,qn=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=Pr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=yR(o);if(m!==null){m.flags&=-257,_R(m,o,a,s,e),m.mode&1&&vR(s,c,e),e=m,l=c;var v=e.updateQueue;if(v===null){var A=new Set;A.add(l),e.updateQueue=A}else v.add(l);break e}else{if(!(e&1)){vR(s,c,e),BM();break e}l=Error(Le(426))}}else if(En&&a.mode&1){var _=yR(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),_R(_,o,a,s,e),pM(vh(l,a));break e}}s=l=vh(l,a),sr!==4&&(sr=2),pd===null?pd=[s]:pd.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=wB(s,l,e);uR(s,g);break e;case 1:a=l;var x=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Ha===null||!Ha.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=MB(s,a,e);uR(s,w);break e}}s=s.return}while(s!==null)}jB(t)}catch(R){e=R,qn===t&&t!==null&&(qn=t=t.return);continue}break}while(!0)}function VB(){var n=Sv.current;return Sv.current=Av,n===null?Av:n}function BM(){(sr===0||sr===3||sr===2)&&(sr=4),gr===null||!(yc&268435455)&&!(Cy&268435455)||ba(gr,Pr)}function Mv(n,e){var t=qt;qt|=2;var r=VB();(gr!==n||Pr!==e)&&(No=null,ic(n,e));do try{lz();break}catch(i){HB(n,i)}while(!0);if(gM(),qt=t,Sv.current=r,qn!==null)throw Error(Le(261));return gr=null,Pr=0,sr}function lz(){for(;qn!==null;)GB(qn)}function cz(){for(;qn!==null&&!B5();)GB(qn)}function GB(n){var e=XB(n.alternate,n,Ni);n.memoizedProps=n.pendingProps,e===null?jB(n):qn=e,RM.current=null}function jB(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=nz(t,e),t!==null){t.flags&=32767,qn=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{sr=6,qn=null;return}}else if(t=tz(t,e,Ni),t!==null){qn=t;return}if(e=e.sibling,e!==null){qn=e;return}qn=e=n}while(e!==null);sr===0&&(sr=5)}function Fl(n,e,t){var r=on,i=ys.transition;try{ys.transition=null,on=1,uz(n,e,t,r)}finally{ys.transition=i,on=r}return null}function uz(n,e,t,r){do th();while(La!==null);if(qt&6)throw Error(Le(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Le(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(j5(n,s),n===gr&&(qn=gr=null,Pr=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||xg||(xg=!0,JB(ov,function(){return th(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=ys.transition,ys.transition=null;var o=on;on=1;var a=qt;qt|=4,RM.current=null,iz(n,t),kB(t,n),P6(CS),lv=!!TS,CS=TS=null,n.current=t,sz(t),N5(),qt=a,on=o,ys.transition=s}else n.current=t;if(xg&&(xg=!1,La=n,wv=i),s=n.pendingLanes,s===0&&(Ha=null),k5(t.stateNode),Mi(n,Gn()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ev)throw Ev=!1,n=JS,JS=null,n;return wv&1&&n.tag!==0&&th(),s=n.pendingLanes,s&1?n===KS?md++:(md=0,KS=n):md=0,ul(),null}function th(){if(La!==null){var n=ED(wv),e=ys.transition,t=on;try{if(ys.transition=null,on=16>n?16:n,La===null)var r=!1;else{if(n=La,La=null,wv=0,qt&6)throw Error(Le(331));var i=qt;for(qt|=4,Qe=n.current;Qe!==null;){var s=Qe,o=s.child;if(Qe.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Qe=c;Qe!==null;){var h=Qe;switch(h.tag){case 0:case 11:case 15:dd(8,h,s)}var d=h.child;if(d!==null)d.return=h,Qe=d;else for(;Qe!==null;){h=Qe;var p=h.sibling,m=h.return;if(NB(h),h===c){Qe=null;break}if(p!==null){p.return=m,Qe=p;break}Qe=m}}}var v=s.alternate;if(v!==null){var A=v.child;if(A!==null){v.child=null;do{var _=A.sibling;A.sibling=null,A=_}while(A!==null)}}Qe=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Qe=o;else e:for(;Qe!==null;){if(s=Qe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:dd(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,Qe=g;break e}Qe=s.return}}var x=n.current;for(Qe=x;Qe!==null;){o=Qe;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,Qe=S;else e:for(o=x;Qe!==null;){if(a=Qe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ty(9,a)}}catch(R){Bn(a,a.return,R)}if(a===o){Qe=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,Qe=w;break e}Qe=a.return}}if(qt=i,ul(),oo&&typeof oo.onPostCommitFiberRoot=="function")try{oo.onPostCommitFiberRoot(yy,n)}catch{}r=!0}return r}finally{on=t,ys.transition=e}}return!1}function LR(n,e,t){e=vh(t,e),e=wB(n,e,1),n=za(n,e,1),e=fi(),n!==null&&(bp(n,1,e),Mi(n,e))}function Bn(n,e,t){if(n.tag===3)LR(n,n,t);else for(;e!==null;){if(e.tag===3){LR(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ha===null||!Ha.has(r))){n=vh(t,n),n=MB(e,n,1),e=za(e,n,1),n=fi(),e!==null&&(bp(e,1,n),Mi(e,n));break}}e=e.return}}function hz(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=fi(),n.pingedLanes|=n.suspendedLanes&t,gr===n&&(Pr&t)===t&&(sr===4||sr===3&&(Pr&130023424)===Pr&&500>Gn()-IM?ic(n,0):PM|=t),Mi(n,e)}function WB(n,e){e===0&&(n.mode&1?(e=ug,ug<<=1,!(ug&130023424)&&(ug=4194304)):e=1);var t=fi();n=qo(n,e),n!==null&&(bp(n,e,t),Mi(n,t))}function fz(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),WB(n,t)}function dz(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(Le(314))}r!==null&&r.delete(e),WB(n,t)}var XB;XB=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Ei.current)Si=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Si=!1,ez(n,e,t);Si=!!(n.flags&131072)}else Si=!1,En&&e.flags&1048576&&$D(e,mv,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;z0(n,e),n=e.pendingProps;var i=dh(e,qr.current);eh(e,t),i=wM(null,e,r,n,i,t);var s=MM();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,wi(r)?(s=!0,dv(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,_M(e),i.updater=wy,e.stateNode=i,i._reactInternals=e,OS(e,r,n,t),e=US(null,e,r,!0,s,t)):(e.tag=0,En&&s&&fM(e),ai(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(z0(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=mz(r),n=Cs(r,n),i){case 0:e=kS(null,e,r,n,t);break e;case 1:e=SR(null,e,r,n,t);break e;case 11:e=xR(null,e,r,n,t);break e;case 14:e=AR(null,e,r,Cs(r.type,n),t);break e}throw Error(Le(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Cs(r,i),kS(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Cs(r,i),SR(n,e,r,i,t);case 3:e:{if(RB(e),n===null)throw Error(Le(387));r=e.pendingProps,s=e.memoizedState,i=s.element,ZD(n,e),yv(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=vh(Error(Le(423)),e),e=ER(n,e,r,t,i);break e}else if(r!==i){i=vh(Error(Le(424)),e),e=ER(n,e,r,t,i);break e}else for(ki=Ua(e.stateNode.containerInfo.firstChild),Hi=e,En=!0,Ps=null,t=rB(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(ph(),r===i){e=Qo(n,e,t);break e}ai(n,e,r,t)}e=e.child}return e;case 5:return iB(e),n===null&&DS(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,bS(r,i)?o=null:s!==null&&bS(r,s)&&(e.flags|=32),bB(n,e),ai(n,e,o,t),e.child;case 6:return n===null&&DS(e),null;case 13:return PB(n,e,t);case 4:return xM(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=mh(e,null,r,t):ai(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Cs(r,i),xR(n,e,r,i,t);case 7:return ai(n,e,e.pendingProps,t),e.child;case 8:return ai(n,e,e.pendingProps.children,t),e.child;case 12:return ai(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,fn(gv,r._currentValue),r._currentValue=o,s!==null)if(Os(s.value,o)){if(s.children===i.children&&!Ei.current){e=Qo(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Xo(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),BS(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Le(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),BS(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ai(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,eh(e,t),i=_s(i),r=r(i),e.flags|=1,ai(n,e,r,t),e.child;case 14:return r=e.type,i=Cs(r,e.pendingProps),i=Cs(r.type,i),AR(n,e,r,i,t);case 15:return TB(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Cs(r,i),z0(n,e),e.tag=1,wi(r)?(n=!0,dv(e)):n=!1,eh(e,t),tB(e,r,i),OS(e,r,i,t),US(null,e,r,!0,n,t);case 19:return IB(n,e,t);case 22:return CB(n,e,t)}throw Error(Le(156,e.tag))};function JB(n,e){return _D(n,e)}function pz(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ms(n,e,t,r){return new pz(n,e,t,r)}function NM(n){return n=n.prototype,!(!n||!n.isReactComponent)}function mz(n){if(typeof n=="function")return NM(n)?1:0;if(n!=null){if(n=n.$$typeof,n===eM)return 11;if(n===tM)return 14}return 2}function Ga(n,e){var t=n.alternate;return t===null?(t=ms(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function G0(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")NM(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Lu:return sc(t.children,i,s,e);case Zw:o=8,i|=8;break;case oS:return n=ms(12,t,e,i|2),n.elementType=oS,n.lanes=s,n;case aS:return n=ms(13,t,e,i),n.elementType=aS,n.lanes=s,n;case lS:return n=ms(19,t,e,i),n.elementType=lS,n.lanes=s,n;case nD:return by(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case eD:o=10;break e;case tD:o=9;break e;case eM:o=11;break e;case tM:o=14;break e;case Ea:o=16,r=null;break e}throw Error(Le(130,n==null?n:typeof n,""))}return e=ms(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function sc(n,e,t,r){return n=ms(7,n,r,e),n.lanes=t,n}function by(n,e,t,r){return n=ms(22,n,r,e),n.elementType=nD,n.lanes=t,n.stateNode={isHidden:!1},n}function E1(n,e,t){return n=ms(6,n,null,e),n.lanes=t,n}function w1(n,e,t){return e=ms(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function gz(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=i1(0),this.expirationTimes=i1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=i1(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function OM(n,e,t,r,i,s,o,a,l){return n=new gz(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ms(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},_M(s),n}function vz(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Iu,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function KB(n){if(!n)return Qa;n=n._reactInternals;e:{if(Rc(n)!==n||n.tag!==1)throw Error(Le(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(wi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Le(171))}if(n.tag===1){var t=n.type;if(wi(t))return JD(n,t,e)}return e}function $B(n,e,t,r,i,s,o,a,l){return n=OM(t,r,!0,n,i,s,o,a,l),n.context=KB(null),t=n.current,r=fi(),i=Va(t),s=Xo(r,i),s.callback=e??null,za(t,s,i),n.current.lanes=i,bp(n,i,r),Mi(n,r),n}function Ry(n,e,t,r){var i=e.current,s=fi(),o=Va(i);return t=KB(t),e.context===null?e.context=t:e.pendingContext=t,e=Xo(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=za(i,e,o),n!==null&&(Bs(n,i,o,s),F0(n,i,o)),o}function Tv(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function DR(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function FM(n,e){DR(n,e),(n=n.alternate)&&DR(n,e)}function yz(){return null}var YB=typeof reportError=="function"?reportError:function(n){console.error(n)};function kM(n){this._internalRoot=n}Py.prototype.render=kM.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Le(409));Ry(n,e,null,null)};Py.prototype.unmount=kM.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;_c(function(){Ry(null,n,null,null)}),e[Yo]=null}};function Py(n){this._internalRoot=n}Py.prototype.unstable_scheduleHydration=function(n){if(n){var e=TD();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Ca.length&&e!==0&&e<Ca[t].priority;t++);Ca.splice(t,0,n),t===0&&bD(n)}};function UM(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Iy(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function BR(){}function _z(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Tv(o);s.call(c)}}var o=$B(e,r,n,0,null,!1,!1,"",BR);return n._reactRootContainer=o,n[Yo]=o.current,Nd(n.nodeType===8?n.parentNode:n),_c(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Tv(l);a.call(c)}}var l=OM(n,0,!1,null,null,!1,!1,"",BR);return n._reactRootContainer=l,n[Yo]=l.current,Nd(n.nodeType===8?n.parentNode:n),_c(function(){Ry(e,l,t,r)}),l}function Ly(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Tv(o);a.call(l)}}Ry(e,o,n,i)}else o=_z(t,e,n,i,r);return Tv(o)}wD=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Zf(e.pendingLanes);t!==0&&(iM(e,t|1),Mi(e,Gn()),!(qt&6)&&(yh=Gn()+500,ul()))}break;case 13:_c(function(){var r=qo(n,1);if(r!==null){var i=fi();Bs(r,n,1,i)}}),FM(n,1)}};sM=function(n){if(n.tag===13){var e=qo(n,134217728);if(e!==null){var t=fi();Bs(e,n,134217728,t)}FM(n,134217728)}};MD=function(n){if(n.tag===13){var e=Va(n),t=qo(n,e);if(t!==null){var r=fi();Bs(t,n,e,r)}FM(n,e)}};TD=function(){return on};CD=function(n,e){var t=on;try{return on=n,e()}finally{on=t}};yS=function(n,e,t){switch(e){case"input":if(hS(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=Sy(r);if(!i)throw Error(Le(90));iD(r),hS(r,i)}}}break;case"textarea":oD(n,t);break;case"select":e=t.value,e!=null&&Yu(n,!!t.multiple,e,!1)}};dD=LM;pD=_c;var xz={usingClientEntryPoint:!1,Events:[Pp,Ou,Sy,hD,fD,LM]},If={findFiberByHostInstance:Xl,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Az={bundleType:If.bundleType,version:If.version,rendererPackageName:If.rendererPackageName,rendererConfig:If.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ra.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=vD(n),n===null?null:n.stateNode},findFiberByHostInstance:If.findFiberByHostInstance||yz,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ag=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ag.isDisabled&&Ag.supportsFiber)try{yy=Ag.inject(Az),oo=Ag}catch{}}Ki.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xz;Ki.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!UM(e))throw Error(Le(200));return vz(n,e,null,t)};Ki.createRoot=function(n,e){if(!UM(n))throw Error(Le(299));var t=!1,r="",i=YB;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=OM(n,1,!1,null,null,t,!1,r,i),n[Yo]=e.current,Nd(n.nodeType===8?n.parentNode:n),new kM(e)};Ki.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Le(188)):(n=Object.keys(n).join(","),Error(Le(268,n)));return n=vD(e),n=n===null?null:n.stateNode,n};Ki.flushSync=function(n){return _c(n)};Ki.hydrate=function(n,e,t){if(!Iy(e))throw Error(Le(200));return Ly(null,n,e,!0,t)};Ki.hydrateRoot=function(n,e,t){if(!UM(n))throw Error(Le(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=YB;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=$B(e,null,n,1,t??null,i,!1,s,o),n[Yo]=e.current,Nd(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new Py(e)};Ki.render=function(n,e,t){if(!Iy(e))throw Error(Le(200));return Ly(null,n,e,!1,t)};Ki.unmountComponentAtNode=function(n){if(!Iy(n))throw Error(Le(40));return n._reactRootContainer?(_c(function(){Ly(null,null,n,!1,function(){n._reactRootContainer=null,n[Yo]=null})}),!0):!1};Ki.unstable_batchedUpdates=LM;Ki.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!Iy(t))throw Error(Le(200));if(n==null||n._reactInternals===void 0)throw Error(Le(38));return Ly(n,e,t,!1,r)};Ki.version="18.2.0-next-9e3b772b8-20220608";function qB(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(qB)}catch(n){console.error(n)}}qB(),$L.exports=Ki;var Sz=$L.exports,QB,NR=Sz;QB=iS.createRoot=NR.createRoot,iS.hydrateRoot=NR.hydrateRoot;/**
 * @remix-run/router v1.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jd(){return jd=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},jd.apply(this,arguments)}var Da;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Da||(Da={}));const OR="popstate";function Ez(n){n===void 0&&(n={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return qS("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:Cv(i)}return Mz(e,t,null,n)}function Qn(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function zM(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function wz(){return Math.random().toString(36).substr(2,8)}function FR(n,e){return{usr:n.state,key:n.key,idx:e}}function qS(n,e,t,r){return t===void 0&&(t=null),jd({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Gh(e):e,{state:t,key:e&&e.key||r||wz()})}function Cv(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Gh(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function Mz(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Da.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(jd({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=Da.Pop;let _=h(),g=_==null?null:_-c;c=_,l&&l({action:a,location:A.location,delta:g})}function p(_,g){a=Da.Push;let x=qS(A.location,_,g);t&&t(x,_),c=h()+1;let S=FR(x,c),w=A.createHref(x);try{o.pushState(S,"",w)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;i.location.assign(w)}s&&l&&l({action:a,location:A.location,delta:1})}function m(_,g){a=Da.Replace;let x=qS(A.location,_,g);t&&t(x,_),c=h();let S=FR(x,c),w=A.createHref(x);o.replaceState(S,"",w),s&&l&&l({action:a,location:A.location,delta:0})}function v(_){let g=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof _=="string"?_:Cv(_);return Qn(g,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,g)}let A={get action(){return a},get location(){return n(i,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(OR,d),l=_,()=>{i.removeEventListener(OR,d),l=null}},createHref(_){return e(i,_)},createURL:v,encodeLocation(_){let g=v(_);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:p,replace:m,go(_){return o.go(_)}};return A}var kR;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(kR||(kR={}));function Tz(n,e,t){t===void 0&&(t="/");let r=typeof e=="string"?Gh(e):e,i=HM(r.pathname||"/",t);if(i==null)return null;let s=ZB(n);Cz(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=Oz(s[a],Uz(i));return o}function ZB(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Qn(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=ja([r,l.relativePath]),h=t.concat(l);s.children&&s.children.length>0&&(Qn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),ZB(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:Bz(c,s.index),routesMeta:h})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of eN(s.path))i(s,o,l)}),e}function eN(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=eN(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function Cz(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Nz(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const bz=/^:[\w-]+$/,Rz=3,Pz=2,Iz=1,Lz=10,Dz=-2,UR=n=>n==="*";function Bz(n,e){let t=n.split("/"),r=t.length;return t.some(UR)&&(r+=Dz),e&&(r+=Pz),t.filter(i=>!UR(i)).reduce((i,s)=>i+(bz.test(s)?Rz:s===""?Iz:Lz),r)}function Nz(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function Oz(n,e){let{routesMeta:t}=n,r={},i="/",s=[];for(let o=0;o<t.length;++o){let a=t[o],l=o===t.length-1,c=i==="/"?e:e.slice(i.length)||"/",h=Fz({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!h)return null;Object.assign(r,h.params);let d=a.route;s.push({params:r,pathname:ja([i,h.pathname]),pathnameBase:jz(ja([i,h.pathnameBase])),route:d}),h.pathnameBase!=="/"&&(i=ja([i,h.pathnameBase]))}return s}function Fz(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=kz(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,h,d)=>{let{paramName:p,isOptional:m}=h;if(p==="*"){let A=a[d]||"";o=s.slice(0,s.length-A.length).replace(/(.)\/+$/,"$1")}const v=a[d];return m&&!v?c[p]=void 0:c[p]=zz(v||"",p),c},{}),pathname:s,pathnameBase:o,pattern:n}}function kz(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),zM(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Uz(n){try{return decodeURI(n)}catch(e){return zM(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function zz(n,e){try{return decodeURIComponent(n)}catch(t){return zM(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+n+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+t+").")),n}}function HM(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function Hz(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Gh(n):n;return{pathname:t?t.startsWith("/")?t:Vz(t,e):e,search:Wz(r),hash:Xz(i)}}function Vz(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function M1(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Gz(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function tN(n,e){let t=Gz(n);return e?t.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function nN(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=Gh(n):(i=jd({},n),Qn(!i.pathname||!i.pathname.includes("?"),M1("?","pathname","search",i)),Qn(!i.pathname||!i.pathname.includes("#"),M1("#","pathname","hash",i)),Qn(!i.search||!i.search.includes("#"),M1("#","search","hash",i)));let s=n===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=t;else{let d=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),d-=1;i.pathname=p.join("/")}a=d>=0?e[d]:"/"}let l=Hz(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const ja=n=>n.join("/").replace(/\/\/+/g,"/"),jz=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Wz=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Xz=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Jz(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const rN=["post","put","patch","delete"];new Set(rN);const Kz=["get",...rN];new Set(Kz);/**
 * React Router v6.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wd(){return Wd=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Wd.apply(this,arguments)}const VM=re.createContext(null),$z=re.createContext(null),Pc=re.createContext(null),Dy=re.createContext(null),Ic=re.createContext({outlet:null,matches:[],isDataRoute:!1}),iN=re.createContext(null);function Yz(n,e){let{relative:t}=e===void 0?{}:e;Lp()||Qn(!1);let{basename:r,navigator:i}=re.useContext(Pc),{hash:s,pathname:o,search:a}=oN(n,{relative:t}),l=o;return r!=="/"&&(l=o==="/"?r:ja([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Lp(){return re.useContext(Dy)!=null}function Dp(){return Lp()||Qn(!1),re.useContext(Dy).location}function sN(n){re.useContext(Pc).static||re.useLayoutEffect(n)}function qz(){let{isDataRoute:n}=re.useContext(Ic);return n?u8():Qz()}function Qz(){Lp()||Qn(!1);let n=re.useContext(VM),{basename:e,future:t,navigator:r}=re.useContext(Pc),{matches:i}=re.useContext(Ic),{pathname:s}=Dp(),o=JSON.stringify(tN(i,t.v7_relativeSplatPath)),a=re.useRef(!1);return sN(()=>{a.current=!0}),re.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=nN(c,JSON.parse(o),s,h.relative==="path");n==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:ja([e,d.pathname])),(h.replace?r.replace:r.push)(d,h.state,h)},[e,r,o,s,n])}function oN(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=re.useContext(Pc),{matches:i}=re.useContext(Ic),{pathname:s}=Dp(),o=JSON.stringify(tN(i,r.v7_relativeSplatPath));return re.useMemo(()=>nN(n,JSON.parse(o),s,t==="path"),[n,o,s,t])}function Zz(n,e){return e8(n,e)}function e8(n,e,t,r){Lp()||Qn(!1);let{navigator:i}=re.useContext(Pc),{matches:s}=re.useContext(Ic),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Dp(),h;if(e){var d;let _=typeof e=="string"?Gh(e):e;l==="/"||(d=_.pathname)!=null&&d.startsWith(l)||Qn(!1),h=_}else h=c;let p=h.pathname||"/",m=l==="/"?p:p.slice(l.length)||"/",v=Tz(n,{pathname:m}),A=s8(v&&v.map(_=>Object.assign({},_,{params:Object.assign({},a,_.params),pathname:ja([l,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?l:ja([l,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),s,t,r);return e&&A?re.createElement(Dy.Provider,{value:{location:Wd({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Da.Pop}},A):A}function t8(){let n=c8(),e=Jz(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return re.createElement(re.Fragment,null,re.createElement("h2",null,"Unexpected Application Error!"),re.createElement("h3",{style:{fontStyle:"italic"}},e),t?re.createElement("pre",{style:i},t):null,null)}const n8=re.createElement(t8,null);class r8 extends re.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?re.createElement(Ic.Provider,{value:this.props.routeContext},re.createElement(iN.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function i8(n){let{routeContext:e,match:t,children:r}=n,i=re.useContext(VM);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),re.createElement(Ic.Provider,{value:e},r)}function s8(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var s;if((s=t)!=null&&s.errors)n=t.matches;else return null}let o=n,a=(i=t)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id]));h>=0||Qn(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(t&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:p,errors:m}=t,v=d.route.loader&&p[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||v){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,d,p)=>{let m,v=!1,A=null,_=null;t&&(m=a&&d.route.id?a[d.route.id]:void 0,A=d.route.errorElement||n8,l&&(c<0&&p===0?(h8("route-fallback",!1),v=!0,_=null):c===p&&(v=!0,_=d.route.hydrateFallbackElement||null)));let g=e.concat(o.slice(0,p+1)),x=()=>{let S;return m?S=A:v?S=_:d.route.Component?S=re.createElement(d.route.Component,null):d.route.element?S=d.route.element:S=h,re.createElement(i8,{match:d,routeContext:{outlet:h,matches:g,isDataRoute:t!=null},children:S})};return t&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?re.createElement(r8,{location:t.location,revalidation:t.revalidation,component:A,error:m,children:x(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):x()},null)}var aN=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(aN||{}),bv=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(bv||{});function o8(n){let e=re.useContext(VM);return e||Qn(!1),e}function a8(n){let e=re.useContext($z);return e||Qn(!1),e}function l8(n){let e=re.useContext(Ic);return e||Qn(!1),e}function lN(n){let e=l8(),t=e.matches[e.matches.length-1];return t.route.id||Qn(!1),t.route.id}function c8(){var n;let e=re.useContext(iN),t=a8(bv.UseRouteError),r=lN(bv.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function u8(){let{router:n}=o8(aN.UseNavigateStable),e=lN(bv.UseNavigateStable),t=re.useRef(!1);return sN(()=>{t.current=!0}),re.useCallback(function(i,s){s===void 0&&(s={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,Wd({fromRouteId:e},s)))},[n,e])}const zR={};function h8(n,e,t){!e&&!zR[n]&&(zR[n]=!0)}function j0(n){Qn(!1)}function f8(n){let{basename:e="/",children:t=null,location:r,navigationType:i=Da.Pop,navigator:s,static:o=!1,future:a}=n;Lp()&&Qn(!1);let l=e.replace(/^\/*/,"/"),c=re.useMemo(()=>({basename:l,navigator:s,static:o,future:Wd({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Gh(r));let{pathname:h="/",search:d="",hash:p="",state:m=null,key:v="default"}=r,A=re.useMemo(()=>{let _=HM(h,l);return _==null?null:{location:{pathname:_,search:d,hash:p,state:m,key:v},navigationType:i}},[l,h,d,p,m,v,i]);return A==null?null:re.createElement(Pc.Provider,{value:c},re.createElement(Dy.Provider,{children:t,value:A}))}function d8(n){let{children:e,location:t}=n;return Zz(QS(e),t)}new Promise(()=>{});function QS(n,e){e===void 0&&(e=[]);let t=[];return re.Children.forEach(n,(r,i)=>{if(!re.isValidElement(r))return;let s=[...e,i];if(r.type===re.Fragment){t.push.apply(t,QS(r.props.children,s));return}r.type!==j0&&Qn(!1),!r.props.index||!r.props.children||Qn(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=QS(r.props.children,s)),t.push(o)}),t}/**
 * React Router DOM v6.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ZS(){return ZS=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ZS.apply(this,arguments)}function p8(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function m8(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function g8(n,e){return n.button===0&&(!e||e==="_self")&&!m8(n)}const v8=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],y8="6";try{window.__reactRouterVersion=y8}catch{}const _8="startTransition",HR=rS[_8];function x8(n){let{basename:e,children:t,future:r,window:i}=n,s=re.useRef();s.current==null&&(s.current=Ez({window:i,v5Compat:!0}));let o=s.current,[a,l]=re.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},h=re.useCallback(d=>{c&&HR?HR(()=>l(d)):l(d)},[l,c]);return re.useLayoutEffect(()=>o.listen(h),[o,h]),re.createElement(f8,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:r})}const A8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",S8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Co=re.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,unstable_viewTransition:d}=e,p=p8(e,v8),{basename:m}=re.useContext(Pc),v,A=!1;if(typeof c=="string"&&S8.test(c)&&(v=c,A8))try{let S=new URL(window.location.href),w=c.startsWith("//")?new URL(S.protocol+c):new URL(c),R=HM(w.pathname,m);w.origin===S.origin&&R!=null?c=R+w.search+w.hash:A=!0}catch{}let _=Yz(c,{relative:i}),g=E8(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:i,unstable_viewTransition:d});function x(S){r&&r(S),S.defaultPrevented||g(S)}return re.createElement("a",ZS({},p,{href:v||_,onClick:A||s?r:x,ref:t,target:l}))});var VR;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(VR||(VR={}));var GR;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(GR||(GR={}));function E8(n,e){let{target:t,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=qz(),c=Dp(),h=oN(n,{relative:o});return re.useCallback(d=>{if(g8(d,t)){d.preventDefault();let p=r!==void 0?r:Cv(c)===Cv(h);l(n,{replace:p,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[c,l,h,r,i,t,n,s,o,a])}var cN={exports:{}},uN={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bp=re;function w8(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var M8=typeof Object.is=="function"?Object.is:w8,T8=Bp.useSyncExternalStore,C8=Bp.useRef,b8=Bp.useEffect,R8=Bp.useMemo,P8=Bp.useDebugValue;uN.useSyncExternalStoreWithSelector=function(n,e,t,r,i){var s=C8(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=R8(function(){function l(m){if(!c){if(c=!0,h=m,m=r(m),i!==void 0&&o.hasValue){var v=o.value;if(i(v,m))return d=v}return d=m}if(v=d,M8(h,m))return v;var A=r(m);return i!==void 0&&i(v,A)?v:(h=m,d=A)}var c=!1,h,d,p=t===void 0?null:t;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,t,r,i]);var a=T8(n,s[0],s[1]);return b8(function(){o.hasValue=!0,o.value=a},[a]),P8(a),a};cN.exports=uN;var I8=cN.exports,Ui="default"in rS?Wo:rS,jR=Symbol.for("react-redux-context"),WR=typeof globalThis<"u"?globalThis:{};function L8(){if(!Ui.createContext)return{};const n=WR[jR]??(WR[jR]=new Map);let e=n.get(Ui.createContext);return e||(e=Ui.createContext(null),n.set(Ui.createContext,e)),e}var Za=L8(),D8=()=>{throw new Error("uSES not initialized!")};function GM(n=Za){return function(){return Ui.useContext(n)}}var hN=GM(),fN=D8,B8=n=>{fN=n},N8=(n,e)=>n===e;function O8(n=Za){const e=n===Za?hN:GM(n),t=(r,i={})=>{const{equalityFn:s=N8,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:l,getServerState:c,stabilityCheck:h,identityFunctionCheck:d}=e();Ui.useRef(!0);const p=Ui.useCallback({[r.name](v){return r(v)}}[r.name],[r,h,o.stabilityCheck]),m=fN(l.addNestedSub,a.getState,c||a.getState,p,s);return Ui.useDebugValue(m),m};return Object.assign(t,{withTypes:()=>t}),t}var F8=O8();function k8(n){n()}function U8(){let n=null,e=null;return{clear(){n=null,e=null},notify(){k8(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let r=n;for(;r;)t.push(r),r=r.next;return t},subscribe(t){let r=!0;const i=e={callback:t,next:null,prev:e};return i.prev?i.prev.next=i:n=i,function(){!r||n===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:n=i.next)}}}}var XR={notify(){},get:()=>[]};function z8(n,e){let t,r=XR,i=0,s=!1;function o(A){h();const _=r.subscribe(A);let g=!1;return()=>{g||(g=!0,_(),d())}}function a(){r.notify()}function l(){v.onStateChange&&v.onStateChange()}function c(){return s}function h(){i++,t||(t=e?e.addNestedSub(l):n.subscribe(l),r=U8())}function d(){i--,t&&i===0&&(t(),t=void 0,r.clear(),r=XR)}function p(){s||(s=!0,h())}function m(){s&&(s=!1,d())}const v={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:c,trySubscribe:p,tryUnsubscribe:m,getListeners:()=>r};return v}var H8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",V8=H8?Ui.useLayoutEffect:Ui.useEffect;function G8({store:n,context:e,children:t,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=Ui.useMemo(()=>{const c=z8(n);return{store:n,subscription:c,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}},[n,r,i,s]),a=Ui.useMemo(()=>n.getState(),[n]);V8(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==n.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,a]);const l=e||Za;return Ui.createElement(l.Provider,{value:o},t)}var j8=G8;function dN(n=Za){const e=n===Za?hN:GM(n),t=()=>{const{store:r}=e();return r};return Object.assign(t,{withTypes:()=>t}),t}var W8=dN();function X8(n=Za){const e=n===Za?W8:dN(n),t=()=>e().dispatch;return Object.assign(t,{withTypes:()=>t}),t}var J8=X8();B8(I8.useSyncExternalStoreWithSelector);function Mr(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var K8=typeof Symbol=="function"&&Symbol.observable||"@@observable",JR=K8,T1=()=>Math.random().toString(36).substring(7).split("").join("."),$8={INIT:`@@redux/INIT${T1()}`,REPLACE:`@@redux/REPLACE${T1()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${T1()}`},Rv=$8;function jM(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function pN(n,e,t){if(typeof n!="function")throw new Error(Mr(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(Mr(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(Mr(1));return t(pN)(n,e)}let r=n,i=e,s=new Map,o=s,a=0,l=!1;function c(){o===s&&(o=new Map,s.forEach((_,g)=>{o.set(g,_)}))}function h(){if(l)throw new Error(Mr(3));return i}function d(_){if(typeof _!="function")throw new Error(Mr(4));if(l)throw new Error(Mr(5));let g=!0;c();const x=a++;return o.set(x,_),function(){if(g){if(l)throw new Error(Mr(6));g=!1,c(),o.delete(x),s=null}}}function p(_){if(!jM(_))throw new Error(Mr(7));if(typeof _.type>"u")throw new Error(Mr(8));if(typeof _.type!="string")throw new Error(Mr(17));if(l)throw new Error(Mr(9));try{l=!0,i=r(i,_)}finally{l=!1}return(s=o).forEach(x=>{x()}),_}function m(_){if(typeof _!="function")throw new Error(Mr(10));r=_,p({type:Rv.REPLACE})}function v(){const _=d;return{subscribe(g){if(typeof g!="object"||g===null)throw new Error(Mr(11));function x(){const w=g;w.next&&w.next(h())}return x(),{unsubscribe:_(x)}},[JR](){return this}}}return p({type:Rv.INIT}),{dispatch:p,subscribe:d,getState:h,replaceReducer:m,[JR]:v}}function Y8(n){Object.keys(n).forEach(e=>{const t=n[e];if(typeof t(void 0,{type:Rv.INIT})>"u")throw new Error(Mr(12));if(typeof t(void 0,{type:Rv.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Mr(13))})}function q8(n){const e=Object.keys(n),t={};for(let s=0;s<e.length;s++){const o=e[s];typeof n[o]=="function"&&(t[o]=n[o])}const r=Object.keys(t);let i;try{Y8(t)}catch(s){i=s}return function(o={},a){if(i)throw i;let l=!1;const c={};for(let h=0;h<r.length;h++){const d=r[h],p=t[d],m=o[d],v=p(m,a);if(typeof v>"u")throw a&&a.type,new Error(Mr(14));c[d]=v,l=l||v!==m}return l=l||r.length!==Object.keys(o).length,l?c:o}}function Pv(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...r)=>e(t(...r)))}function Q8(...n){return e=>(t,r)=>{const i=e(t,r);let s=()=>{throw new Error(Mr(15))};const o={getState:i.getState,dispatch:(l,...c)=>s(l,...c)},a=n.map(l=>l(o));return s=Pv(...a)(i.dispatch),{...i,dispatch:s}}}function Z8(n){return jM(n)&&"type"in n&&typeof n.type=="string"}var mN=Symbol.for("immer-nothing"),KR=Symbol.for("immer-draftable"),ji=Symbol.for("immer-state");function Ls(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var _h=Object.getPrototypeOf;function el(n){return!!n&&!!n[ji]}function Zo(n){var e;return n?gN(n)||Array.isArray(n)||!!n[KR]||!!((e=n.constructor)!=null&&e[KR])||Ny(n)||Oy(n):!1}var eH=Object.prototype.constructor.toString();function gN(n){if(!n||typeof n!="object")return!1;const e=_h(n);if(e===null)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return t===Object?!0:typeof t=="function"&&Function.toString.call(t)===eH}function Xd(n,e){By(n)===0?Object.entries(n).forEach(([t,r])=>{e(t,r,n)}):n.forEach((t,r)=>e(r,t,n))}function By(n){const e=n[ji];return e?e.type_:Array.isArray(n)?1:Ny(n)?2:Oy(n)?3:0}function eE(n,e){return By(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function vN(n,e,t){const r=By(n);r===2?n.set(e,t):r===3?n.add(t):n[e]=t}function tH(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}function Ny(n){return n instanceof Map}function Oy(n){return n instanceof Set}function kl(n){return n.copy_||n.base_}function tE(n,e){if(Ny(n))return new Map(n);if(Oy(n))return new Set(n);if(Array.isArray(n))return Array.prototype.slice.call(n);if(!e&&gN(n))return _h(n)?{...n}:Object.assign(Object.create(null),n);const t=Object.getOwnPropertyDescriptors(n);delete t[ji];let r=Reflect.ownKeys(t);for(let i=0;i<r.length;i++){const s=r[i],o=t[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:n[s]})}return Object.create(_h(n),t)}function WM(n,e=!1){return Fy(n)||el(n)||!Zo(n)||(By(n)>1&&(n.set=n.add=n.clear=n.delete=nH),Object.freeze(n),e&&Xd(n,(t,r)=>WM(r,!0))),n}function nH(){Ls(2)}function Fy(n){return Object.isFrozen(n)}var rH={};function xc(n){const e=rH[n];return e||Ls(0,n),e}var Jd;function yN(){return Jd}function iH(n,e){return{drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function $R(n,e){e&&(xc("Patches"),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function nE(n){rE(n),n.drafts_.forEach(sH),n.drafts_=null}function rE(n){n===Jd&&(Jd=n.parent_)}function YR(n){return Jd=iH(Jd,n)}function sH(n){const e=n[ji];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function qR(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return n!==void 0&&n!==t?(t[ji].modified_&&(nE(e),Ls(4)),Zo(n)&&(n=Iv(e,n),e.parent_||Lv(e,n)),e.patches_&&xc("Patches").generateReplacementPatches_(t[ji].base_,n,e.patches_,e.inversePatches_)):n=Iv(e,t,[]),nE(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==mN?n:void 0}function Iv(n,e,t){if(Fy(e))return e;const r=e[ji];if(!r)return Xd(e,(i,s)=>QR(n,r,e,i,s,t)),e;if(r.scope_!==n)return e;if(!r.modified_)return Lv(n,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),Xd(s,(a,l)=>QR(n,r,i,a,l,t,o)),Lv(n,i,!1),t&&n.patches_&&xc("Patches").generatePatches_(r,t,n.patches_,n.inversePatches_)}return r.copy_}function QR(n,e,t,r,i,s,o){if(el(i)){const a=s&&e&&e.type_!==3&&!eE(e.assigned_,r)?s.concat(r):void 0,l=Iv(n,i,a);if(vN(t,r,l),el(l))n.canAutoFreeze_=!1;else return}else o&&t.add(i);if(Zo(i)&&!Fy(i)){if(!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1)return;Iv(n,i),(!e||!e.scope_.parent_)&&Lv(n,i)}}function Lv(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&WM(e,t)}function oH(n,e){const t=Array.isArray(n),r={type_:t?1:0,scope_:e?e.scope_:yN(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=XM;t&&(i=[r],s=Kd);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var XM={get(n,e){if(e===ji)return n;const t=kl(n);if(!eE(t,e))return aH(n,t,e);const r=t[e];return n.finalized_||!Zo(r)?r:r===C1(n.base_,e)?(b1(n),n.copy_[e]=sE(r,n)):r},has(n,e){return e in kl(n)},ownKeys(n){return Reflect.ownKeys(kl(n))},set(n,e,t){const r=_N(kl(n),e);if(r!=null&&r.set)return r.set.call(n.draft_,t),!0;if(!n.modified_){const i=C1(kl(n),e),s=i==null?void 0:i[ji];if(s&&s.base_===t)return n.copy_[e]=t,n.assigned_[e]=!1,!0;if(tH(t,i)&&(t!==void 0||eE(n.base_,e)))return!0;b1(n),iE(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_[e]=!0),!0},deleteProperty(n,e){return C1(n.base_,e)!==void 0||e in n.base_?(n.assigned_[e]=!1,b1(n),iE(n)):delete n.assigned_[e],n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=kl(n),r=Reflect.getOwnPropertyDescriptor(t,e);return r&&{writable:!0,configurable:n.type_!==1||e!=="length",enumerable:r.enumerable,value:t[e]}},defineProperty(){Ls(11)},getPrototypeOf(n){return _h(n.base_)},setPrototypeOf(){Ls(12)}},Kd={};Xd(XM,(n,e)=>{Kd[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Kd.deleteProperty=function(n,e){return Kd.set.call(this,n,e,void 0)};Kd.set=function(n,e,t){return XM.set.call(this,n[0],e,t,n[0])};function C1(n,e){const t=n[ji];return(t?kl(t):n)[e]}function aH(n,e,t){var i;const r=_N(e,t);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(n.draft_):void 0}function _N(n,e){if(!(e in n))return;let t=_h(n);for(;t;){const r=Object.getOwnPropertyDescriptor(t,e);if(r)return r;t=_h(t)}}function iE(n){n.modified_||(n.modified_=!0,n.parent_&&iE(n.parent_))}function b1(n){n.copy_||(n.copy_=tE(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var lH=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,r)=>{if(typeof e=="function"&&typeof t!="function"){const s=t;t=e;const o=this;return function(l=s,...c){return o.produce(l,h=>t.call(this,h,...c))}}typeof t!="function"&&Ls(6),r!==void 0&&typeof r!="function"&&Ls(7);let i;if(Zo(e)){const s=YR(this),o=sE(e,void 0);let a=!0;try{i=t(o),a=!1}finally{a?nE(s):rE(s)}return $R(s,r),qR(i,s)}else if(!e||typeof e!="object"){if(i=t(e),i===void 0&&(i=e),i===mN&&(i=void 0),this.autoFreeze_&&WM(i,!0),r){const s=[],o=[];xc("Patches").generateReplacementPatches_(e,i,s,o),r(s,o)}return i}else Ls(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(o,...a)=>this.produceWithPatches(o,l=>e(l,...a));let r,i;return[this.produce(e,t,(o,a)=>{r=o,i=a}),r,i]},typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze),typeof(n==null?void 0:n.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(n.useStrictShallowCopy)}createDraft(n){Zo(n)||Ls(8),el(n)&&(n=xN(n));const e=YR(this),t=sE(n,void 0);return t[ji].isManual_=!0,rE(e),t}finishDraft(n,e){const t=n&&n[ji];(!t||!t.isManual_)&&Ls(9);const{scope_:r}=t;return $R(r,e),qR(void 0,r)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const i=e[t];if(i.path.length===0&&i.op==="replace"){n=i.value;break}}t>-1&&(e=e.slice(t+1));const r=xc("Patches").applyPatches_;return el(n)?r(n,e):this.produce(n,i=>r(i,e))}};function sE(n,e){const t=Ny(n)?xc("MapSet").proxyMap_(n,e):Oy(n)?xc("MapSet").proxySet_(n,e):oH(n,e);return(e?e.scope_:yN()).drafts_.push(t),t}function xN(n){return el(n)||Ls(10,n),AN(n)}function AN(n){if(!Zo(n)||Fy(n))return n;const e=n[ji];let t;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=tE(n,e.scope_.immer_.useStrictShallowCopy_)}else t=tE(n,!0);return Xd(t,(r,i)=>{vN(t,r,AN(i))}),e&&(e.finalized_=!1),t}var Wi=new lH,SN=Wi.produce;Wi.produceWithPatches.bind(Wi);Wi.setAutoFreeze.bind(Wi);Wi.setUseStrictShallowCopy.bind(Wi);Wi.applyPatches.bind(Wi);Wi.createDraft.bind(Wi);Wi.finishDraft.bind(Wi);function cH(n,e=`expected a function, instead received ${typeof n}`){if(typeof n!="function")throw new TypeError(e)}function uH(n,e=`expected an object, instead received ${typeof n}`){if(typeof n!="object")throw new TypeError(e)}function hH(n,e="expected all items to be functions, instead received the following types: "){if(!n.every(t=>typeof t=="function")){const t=n.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${t}]`)}}var ZR=n=>Array.isArray(n)?n:[n];function fH(n){const e=Array.isArray(n[0])?n[0]:n;return hH(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function dH(n,e){const t=[],{length:r}=n;for(let i=0;i<r;i++)t.push(n[i].apply(null,e));return t}var pH=class{constructor(n){this.value=n}deref(){return this.value}},mH=typeof WeakRef<"u"?WeakRef:pH,gH=0,eP=1;function Sg(){return{s:gH,v:void 0,o:null,p:null}}function JM(n,e={}){let t=Sg();const{resultEqualityCheck:r}=e;let i,s=0;function o(){var d;let a=t;const{length:l}=arguments;for(let p=0,m=l;p<m;p++){const v=arguments[p];if(typeof v=="function"||typeof v=="object"&&v!==null){let A=a.o;A===null&&(a.o=A=new WeakMap);const _=A.get(v);_===void 0?(a=Sg(),A.set(v,a)):a=_}else{let A=a.p;A===null&&(a.p=A=new Map);const _=A.get(v);_===void 0?(a=Sg(),A.set(v,a)):a=_}}const c=a;let h;if(a.s===eP?h=a.v:(h=n.apply(null,arguments),s++),c.s=eP,r){const p=((d=i==null?void 0:i.deref)==null?void 0:d.call(i))??i;p!=null&&r(p,h)&&(h=p,s!==0&&s--),i=typeof h=="object"&&h!==null||typeof h=="function"?new mH(h):h}return c.v=h,h}return o.clearCache=()=>{t=Sg(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function EN(n,...e){const t=typeof n=="function"?{memoize:n,memoizeOptions:e}:n,r=(...i)=>{let s=0,o=0,a,l={},c=i.pop();typeof c=="object"&&(l=c,c=i.pop()),cH(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const h={...t,...l},{memoize:d,memoizeOptions:p=[],argsMemoize:m=JM,argsMemoizeOptions:v=[],devModeChecks:A={}}=h,_=ZR(p),g=ZR(v),x=fH(i),S=d(function(){return s++,c.apply(null,arguments)},..._),w=m(function(){o++;const C=dH(x,arguments);return a=S.apply(null,C),a},...g);return Object.assign(w,{resultFunc:c,memoizedResultFunc:S,dependencies:x,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:d,argsMemoize:m})};return Object.assign(r,{withTypes:()=>r}),r}var vH=EN(JM),yH=Object.assign((n,e=vH)=>{uH(n,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof n}`);const t=Object.keys(n),r=t.map(s=>n[s]);return e(r,(...s)=>s.reduce((o,a,l)=>(o[t[l]]=a,o),{}))},{withTypes:()=>yH});function wN(n){return({dispatch:t,getState:r})=>i=>s=>typeof s=="function"?s(t,r,n):i(s)}var _H=wN(),xH=wN,AH=(...n)=>{const e=EN(...n),t=Object.assign((...r)=>{const i=e(...r),s=(o,...a)=>i(el(o)?xN(o):o,...a);return Object.assign(s,i),s},{withTypes:()=>t});return t};AH(JM);var SH=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Pv:Pv.apply(null,arguments)},EH=n=>n&&typeof n.match=="function";function Jo(n,e){function t(...r){if(e){let i=e(...r);if(!i)throw new Error(Ti(0));return{type:n,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:n,payload:r[0]}}return t.toString=()=>`${n}`,t.type=n,t.match=r=>Z8(r)&&r.type===n,t}var MN=class td extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,td.prototype)}static get[Symbol.species](){return td}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new td(...e[0].concat(this)):new td(...e.concat(this))}};function tP(n){return Zo(n)?SN(n,()=>{}):n}function nP(n,e,t){if(n.has(e)){let i=n.get(e);return t.update&&(i=t.update(i,e,n),n.set(e,i)),i}if(!t.insert)throw new Error(Ti(10));const r=t.insert(e,n);return n.set(e,r),r}function wH(n){return typeof n=="boolean"}var MH=()=>function(e){const{thunk:t=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=e??{};let o=new MN;return t&&(wH(t)?o.push(_H):o.push(xH(t.extraArgument))),o},TH="RTK_autoBatch",TN=n=>e=>{setTimeout(e,n)},CH=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:TN(10),bH=(n={type:"raf"})=>e=>(...t)=>{const r=e(...t);let i=!0,s=!1,o=!1;const a=new Set,l=n.type==="tick"?queueMicrotask:n.type==="raf"?CH:n.type==="callback"?n.queueNotification:TN(n.timeout),c=()=>{o=!1,s&&(s=!1,a.forEach(h=>h()))};return Object.assign({},r,{subscribe(h){const d=()=>i&&h(),p=r.subscribe(d);return a.add(h),()=>{p(),a.delete(h)}},dispatch(h){var d;try{return i=!((d=h==null?void 0:h.meta)!=null&&d[TH]),s=!i,s&&(o||(o=!0,l(c))),r.dispatch(h)}finally{i=!0}}})},RH=n=>function(t){const{autoBatch:r=!0}=t??{};let i=new MN(n);return r&&i.push(bH(typeof r=="object"?r:void 0)),i},PH=!0;function IH(n){const e=MH(),{reducer:t=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=n||{};let a;if(typeof t=="function")a=t;else if(jM(t))a=q8(t);else throw new Error(Ti(1));let l;typeof r=="function"?l=r(e):l=e();let c=Pv;i&&(c=SH({trace:!PH,...typeof i=="object"&&i}));const h=Q8(...l),d=RH(h);let p=typeof o=="function"?o(d):d();const m=c(...p);return pN(a,s,m)}function CN(n){const e={},t=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(Ti(28));if(a in e)throw new Error(Ti(29));return e[a]=o,i},addMatcher(s,o){return t.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return n(i),[e,t,r]}function LH(n){return typeof n=="function"}function DH(n,e){let[t,r,i]=CN(e),s;if(LH(n))s=()=>tP(n());else{const a=tP(n);s=()=>a}function o(a=s(),l){let c=[t[l.type],...r.filter(({matcher:h})=>h(l)).map(({reducer:h})=>h)];return c.filter(h=>!!h).length===0&&(c=[i]),c.reduce((h,d)=>{if(d)if(el(h)){const m=d(h,l);return m===void 0?h:m}else{if(Zo(h))return SN(h,p=>d(p,l));{const p=d(h,l);if(p===void 0){if(h===null)return h;throw new Error(Ti(9))}return p}}return h},a)}return o.getInitialState=s,o}var BH="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",bN=(n=21)=>{let e="",t=n;for(;t--;)e+=BH[Math.random()*64|0];return e},NH=(n,e)=>EH(n)?n.match(e):n(e);function OH(...n){return e=>n.some(t=>NH(t,e))}var FH=["name","message","stack","code"],R1=class{constructor(n,e){Qx(this,"_type");this.payload=n,this.meta=e}},rP=class{constructor(n,e){Qx(this,"_type");this.payload=n,this.meta=e}},kH=n=>{if(typeof n=="object"&&n!==null){const e={};for(const t of FH)typeof n[t]=="string"&&(e[t]=n[t]);return e}return{message:String(n)}},UH=(()=>{function n(e,t,r){const i=Jo(e+"/fulfilled",(l,c,h,d)=>({payload:l,meta:{...d||{},arg:h,requestId:c,requestStatus:"fulfilled"}})),s=Jo(e+"/pending",(l,c,h)=>({payload:void 0,meta:{...h||{},arg:c,requestId:l,requestStatus:"pending"}})),o=Jo(e+"/rejected",(l,c,h,d,p)=>({payload:d,error:(r&&r.serializeError||kH)(l||"Rejected"),meta:{...p||{},arg:h,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"}}));function a(l){return(c,h,d)=>{const p=r!=null&&r.idGenerator?r.idGenerator(l):bN(),m=new AbortController;let v,A;function _(x){A=x,m.abort()}const g=async function(){var w,R;let x;try{let C=(w=r==null?void 0:r.condition)==null?void 0:w.call(r,l,{getState:h,extra:d});if(HH(C)&&(C=await C),C===!1||m.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const I=new Promise((D,N)=>{v=()=>{N({name:"AbortError",message:A||"Aborted"})},m.signal.addEventListener("abort",v)});c(s(p,l,(R=r==null?void 0:r.getPendingMeta)==null?void 0:R.call(r,{requestId:p,arg:l},{getState:h,extra:d}))),x=await Promise.race([I,Promise.resolve(t(l,{dispatch:c,getState:h,extra:d,requestId:p,signal:m.signal,abort:_,rejectWithValue:(D,N)=>new R1(D,N),fulfillWithValue:(D,N)=>new rP(D,N)})).then(D=>{if(D instanceof R1)throw D;return D instanceof rP?i(D.payload,p,l,D.meta):i(D,p,l)})])}catch(C){x=C instanceof R1?o(null,p,l,C.payload,C.meta):o(C,p,l)}finally{v&&m.signal.removeEventListener("abort",v)}return r&&!r.dispatchConditionRejection&&o.match(x)&&x.meta.condition||c(x),x}();return Object.assign(g,{abort:_,requestId:p,arg:l,unwrap(){return g.then(zH)}})}}return Object.assign(a,{pending:s,rejected:o,fulfilled:i,settled:OH(o,i),typePrefix:e})}return n.withTypes=()=>n,n})();function zH(n){if(n.meta&&n.meta.rejectedWithValue)throw n.payload;if(n.error)throw n.error;return n.payload}function HH(n){return n!==null&&typeof n=="object"&&typeof n.then=="function"}var VH=Symbol.for("rtk-slice-createasyncthunk");function GH(n,e){return`${n}/${e}`}function jH({creators:n}={}){var t;const e=(t=n==null?void 0:n.asyncThunk)==null?void 0:t[VH];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(Ti(11));typeof process<"u";const a=(typeof i.reducers=="function"?i.reducers(JH()):i.reducers)||{},l=Object.keys(a),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(S,w){const R=typeof S=="string"?S:S.type;if(!R)throw new Error(Ti(12));if(R in c.sliceCaseReducersByType)throw new Error(Ti(13));return c.sliceCaseReducersByType[R]=w,h},addMatcher(S,w){return c.sliceMatchers.push({matcher:S,reducer:w}),h},exposeAction(S,w){return c.actionCreators[S]=w,h},exposeCaseReducer(S,w){return c.sliceCaseReducersByName[S]=w,h}};l.forEach(S=>{const w=a[S],R={reducerName:S,type:GH(s,S),createNotation:typeof i.reducers=="function"};$H(w)?qH(R,w,h,e):KH(R,w,h)});function d(){const[S={},w=[],R=void 0]=typeof i.extraReducers=="function"?CN(i.extraReducers):[i.extraReducers],C={...S,...c.sliceCaseReducersByType};return DH(i.initialState,I=>{for(let D in C)I.addCase(D,C[D]);for(let D of c.sliceMatchers)I.addMatcher(D.matcher,D.reducer);for(let D of w)I.addMatcher(D.matcher,D.reducer);R&&I.addDefaultCase(R)})}const p=S=>S,m=new Map;let v;function A(S,w){return v||(v=d()),v(S,w)}function _(){return v||(v=d()),v.getInitialState()}function g(S,w=!1){function R(I){let D=I[S];return typeof D>"u"&&w&&(D=_()),D}function C(I=p){const D=nP(m,w,{insert:()=>new WeakMap});return nP(D,I,{insert:()=>{const N={};for(const[T,L]of Object.entries(i.selectors??{}))N[T]=WH(L,I,_,w);return N}})}return{reducerPath:S,getSelectors:C,get selectors(){return C(R)},selectSlice:R}}const x={name:s,reducer:A,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:_,...g(o),injectInto(S,{reducerPath:w,...R}={}){const C=w??o;return S.inject({reducerPath:C,reducer:A},R),{...x,...g(C,!0)}}};return x}}function WH(n,e,t,r){function i(s,...o){let a=e(s);return typeof a>"u"&&r&&(a=t()),n(a,...o)}return i.unwrapped=n,i}var XH=jH();function JH(){function n(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return n.withTypes=()=>n,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:n}}function KH({type:n,reducerName:e,createNotation:t},r,i){let s,o;if("reducer"in r){if(t&&!YH(r))throw new Error(Ti(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(n,s).exposeCaseReducer(e,s).exposeAction(e,o?Jo(n,o):Jo(n))}function $H(n){return n._reducerDefinitionType==="asyncThunk"}function YH(n){return n._reducerDefinitionType==="reducerWithPrepare"}function qH({type:n,reducerName:e},t,r,i){if(!i)throw new Error(Ti(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:l,settled:c,options:h}=t,d=i(n,s,h);r.exposeAction(e,d),o&&r.addCase(d.fulfilled,o),a&&r.addCase(d.pending,a),l&&r.addCase(d.rejected,l),c&&r.addMatcher(d.settled,c),r.exposeCaseReducer(e,{fulfilled:o||Eg,pending:a||Eg,rejected:l||Eg,settled:c||Eg})}function Eg(){}var QH=(n,e)=>{if(typeof n!="function")throw new Error(Ti(32))},KM="listenerMiddleware",ZH=n=>{let{type:e,actionCreator:t,matcher:r,predicate:i,effect:s}=n;if(e)i=Jo(e).match;else if(t)e=t.type,i=t.match;else if(r)i=r;else if(!i)throw new Error(Ti(21));return QH(s),{predicate:i,type:e,effect:s}},eV=Object.assign(n=>{const{type:e,predicate:t,effect:r}=ZH(n);return{id:bN(),effect:r,type:e,predicate:t,pending:new Set,unsubscribe:()=>{throw new Error(Ti(22))}}},{withTypes:()=>eV}),tV=Object.assign(Jo(`${KM}/add`),{withTypes:()=>tV});Jo(`${KM}/removeAll`);var nV=Object.assign(Jo(`${KM}/remove`),{withTypes:()=>nV});function Ti(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var iP={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},rV=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],o=n[t++],a=n[t++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},PN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,l=i+2<n.length,c=l?n[i+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),r.push(t[h],t[d],t[p],t[m])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(RN(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):rV(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const c=i<n.length?t[n.charAt(i)]:64;++i;const d=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new iV;const p=s<<2|a>>4;if(r.push(p),c!==64){const m=a<<4&240|c>>2;if(r.push(m),d!==64){const v=c<<6&192|d;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class iV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sV=function(n){const e=RN(n);return PN.encodeByteArray(e,!0)},Dv=function(n){return sV(n).replace(/\./g,"")},oV=function(n){try{return PN.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lV=()=>aV().__FIREBASE_DEFAULTS__,cV=()=>{if(typeof process>"u"||typeof iP>"u")return;const n=iP.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},uV=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&oV(n[1]);return e&&JSON.parse(e)},$M=()=>{try{return lV()||cV()||uV()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},hV=n=>{var e,t;return(t=(e=$M())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},fV=n=>{const e=hV(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},IN=()=>{var n;return(n=$M())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pV(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Dv(JSON.stringify(t)),Dv(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bv(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mV(){var n;const e=(n=$M())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gV(){return!mV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function LN(){try{return typeof indexedDB=="object"}catch{return!1}}function vV(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yV="FirebaseError";class jh extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=yV,Object.setPrototypeOf(this,jh.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,DN.prototype.create)}}class DN{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?_V(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new jh(i,a,r)}}function _V(n,e){return n.replace(xV,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const xV=/\{\$([^}]+)}/g;function oE(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(sP(s)&&sP(o)){if(!oE(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function sP(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AV(n){return n&&n._delegate?n._delegate:n}class $d{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ul="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let SV=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new dV;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wV(e))try{this.getOrInitializeService({instanceIdentifier:Ul})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ul){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ul){return this.instances.has(e)}getOptions(e=Ul){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:EV(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ul){return this.component?this.component.multipleInstances?e:Ul:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function EV(n){return n===Ul?void 0:n}function wV(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new SV(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $t;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})($t||($t={}));const TV={debug:$t.DEBUG,verbose:$t.VERBOSE,info:$t.INFO,warn:$t.WARN,error:$t.ERROR,silent:$t.SILENT},CV=$t.INFO,bV={[$t.DEBUG]:"log",[$t.VERBOSE]:"log",[$t.INFO]:"info",[$t.WARN]:"warn",[$t.ERROR]:"error"},RV=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=bV[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class BN{constructor(e){this.name=e,this._logLevel=CV,this._logHandler=RV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $t))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?TV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$t.DEBUG,...e),this._logHandler(this,$t.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$t.VERBOSE,...e),this._logHandler(this,$t.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$t.INFO,...e),this._logHandler(this,$t.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$t.WARN,...e),this._logHandler(this,$t.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$t.ERROR,...e),this._logHandler(this,$t.ERROR,...e)}}const PV=(n,e)=>e.some(t=>n instanceof t);let oP,aP;function IV(){return oP||(oP=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LV(){return aP||(aP=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const NN=new WeakMap,aE=new WeakMap,ON=new WeakMap,P1=new WeakMap,YM=new WeakMap;function DV(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Wa(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&NN.set(t,n)}).catch(()=>{}),YM.set(e,n),e}function BV(n){if(aE.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});aE.set(n,e)}let lE={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return aE.get(n);if(e==="objectStoreNames")return n.objectStoreNames||ON.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Wa(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function NV(n){lE=n(lE)}function OV(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(I1(this),e,...t);return ON.set(r,e.sort?e.sort():[e]),Wa(r)}:LV().includes(n)?function(...e){return n.apply(I1(this),e),Wa(NN.get(this))}:function(...e){return Wa(n.apply(I1(this),e))}}function FV(n){return typeof n=="function"?OV(n):(n instanceof IDBTransaction&&BV(n),PV(n,IV())?new Proxy(n,lE):n)}function Wa(n){if(n instanceof IDBRequest)return DV(n);if(P1.has(n))return P1.get(n);const e=FV(n);return e!==n&&(P1.set(n,e),YM.set(e,n)),e}const I1=n=>YM.get(n);function kV(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=Wa(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Wa(o.result),l.oldVersion,l.newVersion,Wa(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const UV=["get","getKey","getAll","getAllKeys","count"],zV=["put","add","delete","clear"],L1=new Map;function lP(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(L1.get(e))return L1.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=zV.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||UV.includes(t)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),i&&l.done]))[0]};return L1.set(e,s),s}NV(n=>({...n,get:(e,t,r)=>lP(e,t)||n.get(e,t,r),has:(e,t)=>!!lP(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(VV(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function VV(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const cE="@firebase/app",cP="0.9.27";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ac=new BN("@firebase/app"),GV="@firebase/app-compat",jV="@firebase/analytics-compat",WV="@firebase/analytics",XV="@firebase/app-check-compat",JV="@firebase/app-check",KV="@firebase/auth",$V="@firebase/auth-compat",YV="@firebase/database",qV="@firebase/database-compat",QV="@firebase/functions",ZV="@firebase/functions-compat",eG="@firebase/installations",tG="@firebase/installations-compat",nG="@firebase/messaging",rG="@firebase/messaging-compat",iG="@firebase/performance",sG="@firebase/performance-compat",oG="@firebase/remote-config",aG="@firebase/remote-config-compat",lG="@firebase/storage",cG="@firebase/storage-compat",uG="@firebase/firestore",hG="@firebase/firestore-compat",fG="firebase",dG="10.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE="[DEFAULT]",pG={[cE]:"fire-core",[GV]:"fire-core-compat",[WV]:"fire-analytics",[jV]:"fire-analytics-compat",[JV]:"fire-app-check",[XV]:"fire-app-check-compat",[KV]:"fire-auth",[$V]:"fire-auth-compat",[YV]:"fire-rtdb",[qV]:"fire-rtdb-compat",[QV]:"fire-fn",[ZV]:"fire-fn-compat",[eG]:"fire-iid",[tG]:"fire-iid-compat",[nG]:"fire-fcm",[rG]:"fire-fcm-compat",[iG]:"fire-perf",[sG]:"fire-perf-compat",[oG]:"fire-rc",[aG]:"fire-rc-compat",[lG]:"fire-gcs",[cG]:"fire-gcs-compat",[uG]:"fire-fst",[hG]:"fire-fst-compat","fire-js":"fire-js",[fG]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv=new Map,hE=new Map;function mG(n,e){try{n.container.addComponent(e)}catch(t){Ac.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ov(n){const e=n.name;if(hE.has(e))return Ac.debug(`There were multiple attempts to register component ${e}.`),!1;hE.set(e,n);for(const t of Nv.values())mG(t,n);return!0}function gG(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vG={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Xa=new DN("app","Firebase",vG);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yG{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $d("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xa.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _G=dG;function FN(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:uE,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Xa.create("bad-app-name",{appName:String(i)});if(t||(t=IN()),!t)throw Xa.create("no-options");const s=Nv.get(i);if(s){if(oE(t,s.options)&&oE(r,s.config))return s;throw Xa.create("duplicate-app",{appName:i})}const o=new MV(i);for(const l of hE.values())o.addComponent(l);const a=new yG(t,r,o);return Nv.set(i,a),a}function xG(n=uE){const e=Nv.get(n);if(!e&&n===uE&&IN())return FN();if(!e)throw Xa.create("no-app",{appName:n});return e}function nh(n,e,t){var r;let i=(r=pG[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ac.warn(a.join(" "));return}Ov(new $d(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AG="firebase-heartbeat-database",SG=1,Yd="firebase-heartbeat-store";let D1=null;function kN(){return D1||(D1=kV(AG,SG,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Yd)}catch(t){console.warn(t)}}}}).catch(n=>{throw Xa.create("idb-open",{originalErrorMessage:n.message})})),D1}async function EG(n){try{const t=(await kN()).transaction(Yd),r=await t.objectStore(Yd).get(UN(n));return await t.done,r}catch(e){if(e instanceof jh)Ac.warn(e.message);else{const t=Xa.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ac.warn(t.message)}}}async function uP(n,e){try{const r=(await kN()).transaction(Yd,"readwrite");await r.objectStore(Yd).put(e,UN(n)),await r.done}catch(t){if(t instanceof jh)Ac.warn(t.message);else{const r=Xa.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ac.warn(r.message)}}}function UN(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wG=1024,MG=30*24*60*60*1e3;class TG{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new bG(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=hP();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=MG}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=hP(),{heartbeatsToSend:r,unsentEntries:i}=CG(this._heartbeatsCache.heartbeats),s=Dv(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function hP(){return new Date().toISOString().substring(0,10)}function CG(n,e=wG){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),fP(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),fP(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class bG{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return LN()?vV().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await EG(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return uP(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return uP(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function fP(n){return Dv(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RG(n){Ov(new $d("platform-logger",e=>new HV(e),"PRIVATE")),Ov(new $d("heartbeat",e=>new TG(e),"PRIVATE")),nh(cE,cP,n),nh(cE,cP,"esm2017"),nh("fire-js","")}RG("");var PG=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ze,qM=qM||{},wt=PG||self;function ky(n){var e=typeof n;return e=e!="object"?e:n?Array.isArray(n)?"array":e:"null",e=="array"||e=="object"&&typeof n.length=="number"}function Np(n){var e=typeof n;return e=="object"&&n!=null||e=="function"}function IG(n){return Object.prototype.hasOwnProperty.call(n,B1)&&n[B1]||(n[B1]=++LG)}var B1="closure_uid_"+(1e9*Math.random()>>>0),LG=0;function DG(n,e,t){return n.call.apply(n.bind,arguments)}function BG(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Kr(n,e,t){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Kr=DG:Kr=BG,Kr.apply(null,arguments)}function wg(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function _r(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function hl(){this.s=this.s,this.o=this.o}var NG=0;hl.prototype.s=!1;hl.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),NG!=0)&&IG(this)};hl.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const zN=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if(typeof n=="string")return typeof e!="string"||e.length!=1?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function QM(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function dP(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(ky(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let o=0;o<s;o++)n[i+o]=r[o]}else n.push(r)}}function $r(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}$r.prototype.h=function(){this.defaultPrevented=!0};var OG=function(){if(!wt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{const t=()=>{};wt.addEventListener("test",t,e),wt.removeEventListener("test",t,e)}catch{}return n}();function qd(n){return/^[\s\xa0]*$/.test(n)}function Uy(){var n=wt.navigator;return n&&(n=n.userAgent)?n:""}function to(n){return Uy().indexOf(n)!=-1}function ZM(n){return ZM[" "](n),n}ZM[" "]=function(){};function FG(n,e){var t=R7;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}var kG=to("Opera"),xh=to("Trident")||to("MSIE"),HN=to("Edge"),fE=HN||xh,VN=to("Gecko")&&!(Uy().toLowerCase().indexOf("webkit")!=-1&&!to("Edge"))&&!(to("Trident")||to("MSIE"))&&!to("Edge"),UG=Uy().toLowerCase().indexOf("webkit")!=-1&&!to("Edge");function GN(){var n=wt.document;return n?n.documentMode:void 0}var dE;e:{var N1="",O1=function(){var n=Uy();if(VN)return/rv:([^\);]+)(\)|;)/.exec(n);if(HN)return/Edge\/([\d\.]+)/.exec(n);if(xh)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n);if(UG)return/WebKit\/(\S+)/.exec(n);if(kG)return/(?:Version)[ \/]?(\S+)/.exec(n)}();if(O1&&(N1=O1?O1[1]:""),xh){var F1=GN();if(F1!=null&&F1>parseFloat(N1)){dE=String(F1);break e}}dE=N1}var pE;if(wt.document&&xh){var pP=GN();pE=pP||parseInt(dE,10)||void 0}else pE=void 0;var zG=pE;function Qd(n,e){if($r.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(VN){e:{try{ZM(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else t=="mouseover"?e=n.fromElement:t=="mouseout"&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=n.clientX!==void 0?n.clientX:n.pageX,this.clientY=n.clientY!==void 0?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType=typeof n.pointerType=="string"?n.pointerType:HG[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Qd.$.h.call(this)}}_r(Qd,$r);var HG={2:"touch",3:"pen",4:"mouse"};Qd.prototype.h=function(){Qd.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Op="closure_listenable_"+(1e6*Math.random()|0),VG=0;function GG(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++VG,this.fa=this.ia=!1}function zy(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function eT(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function jG(n,e){for(const t in n)e.call(void 0,n[t],t,n)}function jN(n){const e={};for(const t in n)e[t]=n[t];return e}const mP="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function WN(n,e){let t,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(t in r)n[t]=r[t];for(let s=0;s<mP.length;s++)t=mP[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Hy(n){this.src=n,this.g={},this.h=0}Hy.prototype.add=function(n,e,t,r,i){var s=n.toString();n=this.g[s],n||(n=this.g[s]=[],this.h++);var o=gE(n,e,r,i);return-1<o?(e=n[o],t||(e.ia=!1)):(e=new GG(e,this.src,s,!!r,i),e.ia=t,n.push(e)),e};function mE(n,e){var t=e.type;if(t in n.g){var r=n.g[t],i=zN(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(zy(e),n.g[t].length==0&&(delete n.g[t],n.h--))}}function gE(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==r)return i}return-1}var tT="closure_lm_"+(1e6*Math.random()|0),k1={};function XN(n,e,t,r,i){if(r&&r.once)return KN(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)XN(n,e[s],t,r,i);return null}return t=iT(t),n&&n[Op]?n.O(e,t,Np(r)?!!r.capture:!!r,i):JN(n,e,t,!1,r,i)}function JN(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var o=Np(i)?!!i.capture:!!i,a=rT(n);if(a||(n[tT]=a=new Hy(n)),t=a.add(e,t,r,o,s),t.proxy)return t;if(r=WG(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)OG||(i=o),i===void 0&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(YN(e.toString()),r);else if(n.addListener&&n.removeListener)n.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return t}function WG(){function n(t){return e.call(n.src,n.listener,t)}const e=XG;return n}function KN(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)KN(n,e[s],t,r,i);return null}return t=iT(t),n&&n[Op]?n.P(e,t,Np(r)?!!r.capture:!!r,i):JN(n,e,t,!0,r,i)}function $N(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)$N(n,e[s],t,r,i);else r=Np(r)?!!r.capture:!!r,t=iT(t),n&&n[Op]?(n=n.i,e=String(e).toString(),e in n.g&&(s=n.g[e],t=gE(s,t,r,i),-1<t&&(zy(s[t]),Array.prototype.splice.call(s,t,1),s.length==0&&(delete n.g[e],n.h--)))):n&&(n=rT(n))&&(e=n.g[e.toString()],n=-1,e&&(n=gE(e,t,r,i)),(t=-1<n?e[n]:null)&&nT(t))}function nT(n){if(typeof n!="number"&&n&&!n.fa){var e=n.src;if(e&&e[Op])mE(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(YN(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=rT(e))?(mE(t,n),t.h==0&&(t.src=null,e[tT]=null)):zy(n)}}}function YN(n){return n in k1?k1[n]:k1[n]="on"+n}function XG(n,e){if(n.fa)n=!0;else{e=new Qd(e,this);var t=n.listener,r=n.la||n.src;n.ia&&nT(n),n=t.call(r,e)}return n}function rT(n){return n=n[tT],n instanceof Hy?n:null}var U1="__closure_events_fn_"+(1e9*Math.random()>>>0);function iT(n){return typeof n=="function"?n:(n[U1]||(n[U1]=function(e){return n.handleEvent(e)}),n[U1])}function yr(){hl.call(this),this.i=new Hy(this),this.S=this,this.J=null}_r(yr,hl);yr.prototype[Op]=!0;yr.prototype.removeEventListener=function(n,e,t,r){$N(this,n,e,t,r)};function Ir(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,typeof e=="string")e=new $r(e,n);else if(e instanceof $r)e.target=e.target||n;else{var i=e;e=new $r(r,n),WN(e,i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var o=e.g=t[s];i=Mg(o,r,!0,e)&&i}if(o=e.g=n,i=Mg(o,r,!0,e)&&i,i=Mg(o,r,!1,e)&&i,t)for(s=0;s<t.length;s++)o=e.g=t[s],i=Mg(o,r,!1,e)&&i}yr.prototype.N=function(){if(yr.$.N.call(this),this.i){var n=this.i,e;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)zy(t[r]);delete n.g[e],n.h--}}this.J=null};yr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)};yr.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};function Mg(n,e,t,r){if(e=n.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==t){var a=o.listener,l=o.la||o.src;o.ia&&mE(n.i,o),i=a.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var sT=wt.JSON.stringify;class JG{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function KG(){var n=oT;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}class $G{constructor(){this.h=this.g=null}add(e,t){const r=qN.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}}var qN=new JG(()=>new YG,n=>n.reset());class YG{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function qG(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function QG(n){wt.setTimeout(()=>{throw n},0)}let Zd,ep=!1,oT=new $G,QN=()=>{const n=wt.Promise.resolve(void 0);Zd=()=>{n.then(ZG)}};var ZG=()=>{for(var n;n=KG();){try{n.h.call(n.g)}catch(t){QG(t)}var e=qN;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}ep=!1};function Vy(n,e){yr.call(this),this.h=n||1,this.g=e||wt,this.j=Kr(this.qb,this),this.l=Date.now()}_r(Vy,yr);ze=Vy.prototype;ze.ga=!1;ze.T=null;ze.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ir(this,"tick"),this.ga&&(aT(this),this.start()))}};ze.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function aT(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}ze.N=function(){Vy.$.N.call(this),aT(this),delete this.g};function lT(n,e,t){if(typeof n=="function")t&&(n=Kr(n,t));else if(n&&typeof n.handleEvent=="function")n=Kr(n.handleEvent,n);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:wt.setTimeout(n,e||0)}function ZN(n){n.g=lT(()=>{n.g=null,n.i&&(n.i=!1,ZN(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}class e7 extends hl{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ZN(this)}N(){super.N(),this.g&&(wt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function tp(n){hl.call(this),this.h=n,this.g={}}_r(tp,hl);var gP=[];function eO(n,e,t,r){Array.isArray(t)||(t&&(gP[0]=t.toString()),t=gP);for(var i=0;i<t.length;i++){var s=XN(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function tO(n){eT(n.g,function(e,t){this.g.hasOwnProperty(t)&&nT(e)},n),n.g={}}tp.prototype.N=function(){tp.$.N.call(this),tO(this)};tp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Gy(){this.g=!0}Gy.prototype.Ea=function(){this.g=!1};function t7(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var h=c[0];c=c[1];var d=h.split("_");o=2<=d.length&&d[1]=="type"?o+(h+"="+c+"&"):o+(h+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+t+`
`+o})}function n7(n,e,t,r,i,s,o){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+t+`
`+s+" "+o})}function Gu(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+i7(n,t)+(r?" "+r:"")})}function r7(n,e){n.info(function(){return"TIMEOUT: "+e})}Gy.prototype.info=function(){};function i7(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t){for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return sT(t)}catch{return e}}var Lc={},vP=null;function jy(){return vP=vP||new yr}Lc.Ta="serverreachability";function nO(n){$r.call(this,Lc.Ta,n)}_r(nO,$r);function np(n){const e=jy();Ir(e,new nO(e))}Lc.STAT_EVENT="statevent";function rO(n,e){$r.call(this,Lc.STAT_EVENT,n),this.stat=e}_r(rO,$r);function hi(n){const e=jy();Ir(e,new rO(e,n))}Lc.Ua="timingevent";function iO(n,e){$r.call(this,Lc.Ua,n),this.size=e}_r(iO,$r);function Fp(n,e){if(typeof n!="function")throw Error("Fn must not be null and must be a function");return wt.setTimeout(function(){n()},e)}var Wy={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},sO={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function cT(){}cT.prototype.h=null;function yP(n){return n.h||(n.h=n.i())}function oO(){}var kp={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function uT(){$r.call(this,"d")}_r(uT,$r);function hT(){$r.call(this,"c")}_r(hT,$r);var vE;function Xy(){}_r(Xy,cT);Xy.prototype.g=function(){return new XMLHttpRequest};Xy.prototype.i=function(){return{}};vE=new Xy;function Up(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new tp(this),this.P=s7,n=fE?125:void 0,this.V=new Vy(n),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new aO}function aO(){this.i=null,this.g="",this.h=!1}var s7=45e3,lO={},yE={};ze=Up.prototype;ze.setTimeout=function(n){this.P=n};function _E(n,e,t){n.L=1,n.A=Ky(ea(e)),n.u=t,n.S=!0,cO(n,null)}function cO(n,e){n.G=Date.now(),zp(n),n.B=ea(n.A);var t=n.B,r=n.W;Array.isArray(r)||(r=[String(r)]),vO(t.i,"t",r),n.o=0,t=n.l.J,n.h=new aO,n.g=kO(n.l,t?e:null,!n.u),0<n.O&&(n.M=new e7(Kr(n.Pa,n,n.g),n.O)),eO(n.U,n.g,"readystatechange",n.nb),e=n.I?jN(n.I):{},n.u?(n.v||(n.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.B,n.v,n.u,e)):(n.v="GET",n.g.ha(n.B,n.v,null,e)),np(),t7(n.j,n.v,n.B,n.m,n.W,n.u)}ze.nb=function(n){n=n.target;const e=this.M;e&&ro(n)==3?e.l():this.Pa(n)};ze.Pa=function(n){try{if(n==this.g)e:{const h=ro(this.g);var e=this.g.Ia();const d=this.g.da();if(!(3>h)&&(h!=3||fE||this.g&&(this.h.h||this.g.ja()||SP(this.g)))){this.J||h!=4||e==7||(e==8||0>=d?np(3):np(2)),Jy(this);var t=this.g.da();this.ca=t;t:if(uO(this)){var r=SP(this.g);n="";var i=r.length,s=ro(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$l(this),gd(this);var o="";break t}this.h.i=new wt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=n,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=t==200,n7(this.j,this.v,this.B,this.m,this.W,h,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!qd(a)){var c=a;break t}}c=null}if(t=c)Gu(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xE(this,t);else{this.i=!1,this.s=3,hi(12),$l(this),gd(this);break e}}this.S?(hO(this,h,o),fE&&this.i&&h==3&&(eO(this.U,this.V,"tick",this.mb),this.V.start())):(Gu(this.j,this.m,o,null),xE(this,o)),h==4&&$l(this),this.i&&!this.J&&(h==4?BO(this.l,this):(this.i=!1,zp(this)))}else T7(this.g),t==400&&0<o.indexOf("Unknown SID")?(this.s=3,hi(12)):(this.s=0,hi(13)),$l(this),gd(this)}}}catch{}finally{}};function uO(n){return n.g?n.v=="GET"&&n.L!=2&&n.l.Ha:!1}function hO(n,e,t){let r=!0,i;for(;!n.J&&n.o<t.length;)if(i=o7(n,t),i==yE){e==4&&(n.s=4,hi(14),r=!1),Gu(n.j,n.m,null,"[Incomplete Response]");break}else if(i==lO){n.s=4,hi(15),Gu(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}else Gu(n.j,n.m,i,null),xE(n,i);uO(n)&&n.o!=0&&(n.h.g=n.h.g.slice(n.o),n.o=0),e!=4||t.length!=0||n.h.h||(n.s=1,hi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,e=n.l,e.g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),vT(e),e.M=!0,hi(11))):(Gu(n.j,n.m,t,"[Invalid Chunked Response]"),$l(n),gd(n))}ze.mb=function(){if(this.g){var n=ro(this.g),e=this.g.ja();this.o<e.length&&(Jy(this),hO(this,n,e),this.i&&n!=4&&zp(this))}};function o7(n,e){var t=n.o,r=e.indexOf(`
`,t);return r==-1?yE:(t=Number(e.substring(t,r)),isNaN(t)?lO:(r+=1,r+t>e.length?yE:(e=e.slice(r,r+t),n.o=r+t,e)))}ze.cancel=function(){this.J=!0,$l(this)};function zp(n){n.Y=Date.now()+n.P,fO(n,n.P)}function fO(n,e){if(n.C!=null)throw Error("WatchDog timer not null");n.C=Fp(Kr(n.lb,n),e)}function Jy(n){n.C&&(wt.clearTimeout(n.C),n.C=null)}ze.lb=function(){this.C=null;const n=Date.now();0<=n-this.Y?(r7(this.j,this.B),this.L!=2&&(np(),hi(17)),$l(this),this.s=2,gd(this)):fO(this,this.Y-n)};function gd(n){n.l.H==0||n.J||BO(n.l,n)}function $l(n){Jy(n);var e=n.M;e&&typeof e.sa=="function"&&e.sa(),n.M=null,aT(n.V),tO(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function xE(n,e){try{var t=n.l;if(t.H!=0&&(t.g==n||AE(t.i,n))){if(!n.K&&AE(t.i,n)&&t.H==3){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!t.u){if(t.g)if(t.g.G+3e3<n.G)Uv(t),Qy(t);else break e;gT(t),hi(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&t.A==0&&!t.v&&(t.v=Fp(Kr(t.ib,t),6e3));if(1>=xO(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Yl(t,11)}else if((n.K||t.g==n)&&Uv(t),!qd(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(t.V=c[0],c=c[1],t.H==2)if(c[0]=="c"){t.K=c[1],t.pa=c[2];const h=c[3];h!=null&&(t.ra=h,t.l.info("VER="+t.ra));const d=c[4];d!=null&&(t.Ga=d,t.l.info("SVER="+t.Ga));const p=c[5];p!=null&&typeof p=="number"&&0<p&&(r=1.5*p,t.L=r,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const m=n.g;if(m){const v=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(v){var s=r.i;s.g||v.indexOf("spdy")==-1&&v.indexOf("quic")==-1&&v.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(fT(s,s.h),s.h=null))}if(r.F){const A=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;A&&(r.Da=A,vn(r.I,r.F,A))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms")),r=t;var o=n;if(r.wa=FO(r,r.J?r.pa:null,r.Y),o.K){AO(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(Jy(a),zp(a)),r.g=o}else LO(r);0<t.j.length&&Zy(t)}else c[0]!="stop"&&c[0]!="close"||Yl(t,7);else t.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Yl(t,7):mT(t):c[0]!="noop"&&t.h&&t.h.Aa(c),t.A=0)}}np(4)}catch{}}function a7(n){if(n.Z&&typeof n.Z=="function")return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if(typeof n=="string")return n.split("");if(ky(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}e=[],t=0;for(r in n)e[t++]=n[r];return e}function l7(n){if(n.ta&&typeof n.ta=="function")return n.ta();if(!n.Z||typeof n.Z!="function"){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(ky(n)||typeof n=="string"){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}function dO(n,e){if(n.forEach&&typeof n.forEach=="function")n.forEach(e,void 0);else if(ky(n)||typeof n=="string")Array.prototype.forEach.call(n,e,void 0);else for(var t=l7(n),r=a7(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}var pO=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function c7(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function oc(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof oc){this.h=n.h,Fv(this,n.j),this.s=n.s,this.g=n.g,kv(this,n.m),this.l=n.l;var e=n.i,t=new rp;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),_P(this,t),this.o=n.o}else n&&(e=String(n).match(pO))?(this.h=!1,Fv(this,e[1]||"",!0),this.s=nd(e[2]||""),this.g=nd(e[3]||"",!0),kv(this,e[4]),this.l=nd(e[5]||"",!0),_P(this,e[6]||"",!0),this.o=nd(e[7]||"")):(this.h=!1,this.i=new rp(null,this.h))}oc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(rd(e,xP,!0),":");var t=this.g;return(t||e=="file")&&(n.push("//"),(e=this.s)&&n.push(rd(e,xP,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.m,t!=null&&n.push(":",String(t))),(t=this.l)&&(this.g&&t.charAt(0)!="/"&&n.push("/"),n.push(rd(t,t.charAt(0)=="/"?f7:h7,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",rd(t,p7)),n.join("")};function ea(n){return new oc(n)}function Fv(n,e,t){n.j=t?nd(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function kv(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function _P(n,e,t){e instanceof rp?(n.i=e,m7(n.i,n.h)):(t||(e=rd(e,d7)),n.i=new rp(e,n.h))}function vn(n,e,t){n.i.set(e,t)}function Ky(n){return vn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function nd(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function rd(n,e,t){return typeof n=="string"?(n=encodeURI(n).replace(e,u7),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function u7(n){return n=n.charCodeAt(0),"%"+(n>>4&15).toString(16)+(n&15).toString(16)}var xP=/[#\/\?@]/g,h7=/[#\?:]/g,f7=/[#\?]/g,d7=/[#\?@]/g,p7=/#/g;function rp(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function fl(n){n.g||(n.g=new Map,n.h=0,n.i&&c7(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}ze=rp.prototype;ze.add=function(n,e){fl(this),this.i=null,n=Wh(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this};function mO(n,e){fl(n),e=Wh(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function gO(n,e){return fl(n),e=Wh(n,e),n.g.has(e)}ze.forEach=function(n,e){fl(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)};ze.ta=function(){fl(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t};ze.Z=function(n){fl(this);let e=[];if(typeof n=="string")gO(this,n)&&(e=e.concat(this.g.get(Wh(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e};ze.set=function(n,e){return fl(this),this.i=null,n=Wh(this,n),gO(this,n)&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this};ze.get=function(n,e){return n?(n=this.Z(n),0<n.length?String(n[0]):e):e};function vO(n,e,t){mO(n,e),0<t.length&&(n.i=null,n.g.set(Wh(n,e),QM(t)),n.h+=t.length)}ze.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),n.push(i)}}return this.i=n.join("&")};function Wh(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function m7(n,e){e&&!n.j&&(fl(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(mO(this,r),vO(this,i,t))},n)),n.j=e}var g7=class{constructor(n,e){this.g=n,this.map=e}};function yO(n){this.l=n||v7,wt.PerformanceNavigationTiming?(n=wt.performance.getEntriesByType("navigation"),n=0<n.length&&(n[0].nextHopProtocol=="hq"||n[0].nextHopProtocol=="h2")):n=!!(wt.g&&wt.g.Ka&&wt.g.Ka()&&wt.g.Ka().dc),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var v7=10;function _O(n){return n.h?!0:n.g?n.g.size>=n.j:!1}function xO(n){return n.h?1:n.g?n.g.size:0}function AE(n,e){return n.h?n.h==e:n.g?n.g.has(e):!1}function fT(n,e){n.g?n.g.add(e):n.h=e}function AO(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}yO.prototype.cancel=function(){if(this.i=SO(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const n of this.g.values())n.cancel();this.g.clear()}};function SO(n){if(n.h!=null)return n.i.concat(n.h.F);if(n.g!=null&&n.g.size!==0){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return QM(n.i)}var y7=class{stringify(n){return wt.JSON.stringify(n,void 0)}parse(n){return wt.JSON.parse(n,void 0)}};function _7(){this.g=new y7}function x7(n,e,t){const r=t||"";try{dO(n,function(i,s){let o=i;Np(i)&&(o=sT(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function A7(n,e){const t=new Gy;if(wt.Image){const r=new Image;r.onload=wg(Tg,t,r,"TestLoadImage: loaded",!0,e),r.onerror=wg(Tg,t,r,"TestLoadImage: error",!1,e),r.onabort=wg(Tg,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=wg(Tg,t,r,"TestLoadImage: timeout",!1,e),wt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}function Tg(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function $y(n){this.l=n.ec||null,this.j=n.ob||!1}_r($y,cT);$y.prototype.g=function(){return new Yy(this.l,this.j)};$y.prototype.i=function(n){return function(){return n}}({});function Yy(n,e){yr.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=dT,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}_r(Yy,yr);var dT=0;ze=Yy.prototype;ze.open=function(n,e){if(this.readyState!=dT)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,ip(this)};ze.send=function(n){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||wt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};ze.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Hp(this)),this.readyState=dT};ze.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,ip(this)),this.g&&(this.readyState=3,ip(this),this.g)))if(this.responseType==="arraybuffer")n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof wt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;EO(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))};function EO(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}ze.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Hp(this):ip(this),this.readyState==3&&EO(this)}};ze.Za=function(n){this.g&&(this.response=this.responseText=n,Hp(this))};ze.Ya=function(n){this.g&&(this.response=n,Hp(this))};ze.ka=function(){this.g&&Hp(this)};function Hp(n){n.readyState=4,n.l=null,n.j=null,n.A=null,ip(n)}ze.setRequestHeader=function(n,e){this.v.append(n,e)};ze.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""};ze.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)t=t.value,n.push(t[0]+": "+t[1]),t=e.next();return n.join(`\r
`)};function ip(n){n.onreadystatechange&&n.onreadystatechange.call(n)}Object.defineProperty(Yy.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(n){this.m=n?"include":"same-origin"}});var S7=wt.JSON.parse;function kn(n){yr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=wO,this.L=this.M=!1}_r(kn,yr);var wO="",E7=/^https?$/i,w7=["POST","PUT"];ze=kn.prototype;ze.Oa=function(n){this.M=n};ze.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():vE.g(),this.C=this.u?yP(this.u):yP(vE),this.g.onreadystatechange=Kr(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){AP(this,s);return}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())t.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(t.keys()).find(s=>s.toLowerCase()=="content-type"),i=wt.FormData&&n instanceof wt.FormData,!(0<=zN(w7,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of t)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{CO(this),0<this.B&&((this.L=M7(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Kr(this.ua,this)):this.A=lT(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){AP(this,s)}};function M7(n){return xh&&typeof n.timeout=="number"&&n.ontimeout!==void 0}ze.ua=function(){typeof qM<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ir(this,"timeout"),this.abort(8))};function AP(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,MO(n),qy(n)}function MO(n){n.F||(n.F=!0,Ir(n,"complete"),Ir(n,"error"))}ze.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ir(this,"complete"),Ir(this,"abort"),qy(this))};ze.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),qy(this,!0)),kn.$.N.call(this)};ze.La=function(){this.s||(this.G||this.v||this.l?TO(this):this.kb())};ze.kb=function(){TO(this)};function TO(n){if(n.h&&typeof qM<"u"&&(!n.C[1]||ro(n)!=4||n.da()!=2)){if(n.v&&ro(n)==4)lT(n.La,0,n);else if(Ir(n,"readystatechange"),ro(n)==4){n.h=!1;try{const o=n.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=o===0){var i=String(n.I).match(pO)[1]||null;!i&&wt.self&&wt.self.location&&(i=wt.self.location.protocol.slice(0,-1)),r=!E7.test(i?i.toLowerCase():"")}t=r}if(t)Ir(n,"complete"),Ir(n,"success");else{n.m=6;try{var s=2<ro(n)?n.g.statusText:""}catch{s=""}n.j=s+" ["+n.da()+"]",MO(n)}}finally{qy(n)}}}}function qy(n,e){if(n.g){CO(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Ir(n,"ready");try{t.onreadystatechange=r}catch{}}}function CO(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(wt.clearTimeout(n.A),n.A=null)}ze.isActive=function(){return!!this.g};function ro(n){return n.g?n.g.readyState:0}ze.da=function(){try{return 2<ro(this)?this.g.status:-1}catch{return-1}};ze.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};ze.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&e.indexOf(n)==0&&(e=e.substring(n.length)),S7(e)}};function SP(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case wO:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function T7(n){const e={};n=(n.g&&2<=ro(n)&&n.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<n.length;r++){if(qd(n[r]))continue;var t=qG(n[r]);const i=t[0];if(t=t[1],typeof t!="string")continue;t=t.trim();const s=e[i]||[];e[i]=s,s.push(t)}jG(e,function(r){return r.join(", ")})}ze.Ia=function(){return this.m};ze.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function bO(n){let e="";return eT(n,function(t,r){e+=r,e+=":",e+=t,e+=`\r
`}),e}function pT(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=bO(t),typeof n=="string"?t!=null&&encodeURIComponent(String(t)):vn(n,e,t))}function Lf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function RO(n){this.Ga=0,this.j=[],this.l=new Gy,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Lf("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Lf("baseRetryDelayMs",5e3,n),this.hb=Lf("retryDelaySeedMs",1e4,n),this.eb=Lf("forwardChannelMaxRetries",2,n),this.xa=Lf("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.useFetchStreams||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new yO(n&&n.concurrentRequestLimit),this.Ja=new _7,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}ze=RO.prototype;ze.ra=8;ze.H=1;function mT(n){if(PO(n),n.H==3){var e=n.W++,t=ea(n.I);if(vn(t,"SID",n.K),vn(t,"RID",e),vn(t,"TYPE","terminate"),Vp(n,t),e=new Up(n,n.l,e),e.L=2,e.A=Ky(ea(t)),t=!1,wt.navigator&&wt.navigator.sendBeacon)try{t=wt.navigator.sendBeacon(e.A.toString(),"")}catch{}!t&&wt.Image&&(new Image().src=e.A,t=!0),t||(e.g=kO(e.l,null),e.g.ha(e.A)),e.G=Date.now(),zp(e)}OO(n)}function Qy(n){n.g&&(vT(n),n.g.cancel(),n.g=null)}function PO(n){Qy(n),n.u&&(wt.clearTimeout(n.u),n.u=null),Uv(n),n.i.cancel(),n.m&&(typeof n.m=="number"&&wt.clearTimeout(n.m),n.m=null)}function Zy(n){if(!_O(n.i)&&!n.m){n.m=!0;var e=n.Na;Zd||QN(),ep||(Zd(),ep=!0),oT.add(e,n),n.C=0}}function C7(n,e){return xO(n.i)>=n.i.j-(n.m?1:0)?!1:n.m?(n.j=e.F.concat(n.j),!0):n.H==1||n.H==2||n.C>=(n.cb?0:n.eb)?!1:(n.m=Fp(Kr(n.Na,n,e),NO(n,n.C)),n.C++,!0)}ze.Na=function(n){if(this.m)if(this.m=null,this.H==1){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new Up(this,this.l,n);let s=this.s;if(this.U&&(s?(s=jN(s),WN(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){t:{var r=this.j[t];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=t;break e}if(e===4096||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=IO(this,i,e),t=ea(this.I),vn(t,"RID",n),vn(t,"CVER",22),this.F&&vn(t,"X-HTTP-Session-Id",this.F),Vp(this,t),s&&(this.O?e="headers="+encodeURIComponent(String(bO(s)))+"&"+e:this.o&&pT(t,this.o,s)),fT(this.i,i),this.bb&&vn(t,"TYPE","init"),this.P?(vn(t,"$req",e),vn(t,"SID","null"),i.aa=!0,_E(i,t,null)):_E(i,t,e),this.H=2}}else this.H==3&&(n?EP(this,n):this.j.length==0||_O(this.i)||EP(this))};function EP(n,e){var t;e?t=e.m:t=n.W++;const r=ea(n.I);vn(r,"SID",n.K),vn(r,"RID",t),vn(r,"AID",n.V),Vp(n,r),n.o&&n.s&&pT(r,n.o,n.s),t=new Up(n,n.l,t,n.C+1),n.o===null&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=IO(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),fT(n.i,t),_E(t,r,e)}function Vp(n,e){n.na&&eT(n.na,function(t,r){vn(e,r,t)}),n.h&&dO({},function(t,r){vn(e,r,t)})}function IO(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Kr(n.h.Va,n.h,n):null;e:{var i=n.j;let s=-1;for(;;){const o=["count="+t];s==-1?0<t?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<t;l++){let c=i[l].g;const h=i[l].map;if(c-=s,0>c)s=Math.max(0,i[l].g-100),a=!1;else try{x7(h,o,"req"+c+"_")}catch{r&&r(h)}}if(a){r=o.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function LO(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Zd||QN(),ep||(Zd(),ep=!0),oT.add(e,n),n.A=0}}function gT(n){return n.g||n.u||3<=n.A?!1:(n.ba++,n.u=Fp(Kr(n.Ma,n),NO(n,n.A)),n.A++,!0)}ze.Ma=function(){if(this.u=null,DO(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Fp(Kr(this.jb,this),n)}};ze.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,hi(10),Qy(this),DO(this))};function vT(n){n.B!=null&&(wt.clearTimeout(n.B),n.B=null)}function DO(n){n.g=new Up(n,n.l,"rpc",n.ba),n.o===null&&(n.g.I=n.s),n.g.O=0;var e=ea(n.wa);vn(e,"RID","rpc"),vn(e,"SID",n.K),vn(e,"AID",n.V),vn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&vn(e,"TO",n.qa),vn(e,"TYPE","xmlhttp"),Vp(n,e),n.o&&n.s&&pT(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.A=Ky(ea(e)),t.u=null,t.S=!0,cO(t,n)}ze.ib=function(){this.v!=null&&(this.v=null,Qy(this),gT(this),hi(19))};function Uv(n){n.v!=null&&(wt.clearTimeout(n.v),n.v=null)}function BO(n,e){var t=null;if(n.g==e){Uv(n),vT(n),n.g=null;var r=2}else if(AE(n.i,e))t=e.F,AO(n.i,e),r=1;else return;if(n.H!=0){if(e.i)if(r==1){t=e.u?e.u.length:0,e=Date.now()-e.G;var i=n.C;r=jy(),Ir(r,new iO(r,t)),Zy(n)}else LO(n);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&C7(n,e)||r==2&&gT(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Yl(n,5);break;case 4:Yl(n,10);break;case 3:Yl(n,6);break;default:Yl(n,2)}}}function NO(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Yl(n,e){if(n.l.info("Error code "+e),e==2){var t=null;n.h&&(t=null);var r=Kr(n.pb,n);t||(t=new oc("//www.google.com/images/cleardot.gif"),wt.location&&wt.location.protocol=="http"||Fv(t,"https"),Ky(t)),A7(t.toString(),r)}else hi(2);n.H=0,n.h&&n.h.za(e),OO(n),PO(n)}ze.pb=function(n){n?(this.l.info("Successfully pinged google.com"),hi(2)):(this.l.info("Failed to ping google.com"),hi(1))};function OO(n){if(n.H=0,n.ma=[],n.h){const e=SO(n.i);(e.length!=0||n.j.length!=0)&&(dP(n.ma,e),dP(n.ma,n.j),n.i.i.length=0,QM(n.j),n.j.length=0),n.h.ya()}}function FO(n,e,t){var r=t instanceof oc?ea(t):new oc(t);if(r.g!="")e&&(r.g=e+"."+r.g),kv(r,r.m);else{var i=wt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new oc(null);r&&Fv(s,r),e&&(s.g=e),i&&kv(s,i),t&&(s.l=t),r=s}return t=n.F,e=n.Da,t&&e&&vn(r,t,e),vn(r,"VER",n.ra),Vp(n,r),r}function kO(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n.Ha&&!n.va?new kn(new $y({ob:t})):new kn(n.va),e.Oa(n.J),e}ze.isActive=function(){return!!this.h&&this.h.isActive(this)};function UO(){}ze=UO.prototype;ze.Ba=function(){};ze.Aa=function(){};ze.za=function(){};ze.ya=function(){};ze.isActive=function(){return!0};ze.Va=function(){};function zv(){if(xh&&!(10<=Number(zG)))throw Error("Environmental error: no available transport.")}zv.prototype.g=function(n,e){return new Xi(n,e)};function Xi(n,e){yr.call(this),this.g=new RO(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!qd(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!qd(e)&&(this.g.F=e,n=this.h,n!==null&&e in n&&(n=this.h,e in n&&delete n[e])),this.j=new Xh(this)}_r(Xi,yr);Xi.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;hi(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=FO(n,null,n.Y),Zy(n)};Xi.prototype.close=function(){mT(this.g)};Xi.prototype.u=function(n){var e=this.g;if(typeof n=="string"){var t={};t.__data__=n,n=t}else this.v&&(t={},t.__data__=sT(n),n=t);e.j.push(new g7(e.fb++,n)),e.H==3&&Zy(e)};Xi.prototype.N=function(){this.g.h=null,delete this.j,mT(this.g),delete this.g,Xi.$.N.call(this)};function zO(n){uT.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=e!==null&&n in e?e[n]:void 0),this.data=e}else this.data=n}_r(zO,uT);function HO(){hT.call(this),this.status=1}_r(HO,hT);function Xh(n){this.g=n}_r(Xh,UO);Xh.prototype.Ba=function(){Ir(this.g,"a")};Xh.prototype.Aa=function(n){Ir(this.g,new zO(n))};Xh.prototype.za=function(n){Ir(this.g,new HO)};Xh.prototype.ya=function(){Ir(this.g,"b")};function b7(){this.blockSize=-1}function Fs(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}_r(Fs,b7);Fs.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function z1(n,e,t){t||(t=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;e=n.g[0],t=n.g[1],i=n.g[2];var s=n.g[3],o=e+(s^t&(i^s))+r[0]+3614090360&4294967295;e=t+(o<<7&4294967295|o>>>25),o=s+(i^e&(t^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(t^s&(e^t))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=t+(e^i&(s^e))+r[3]+3250441966&4294967295,t=i+(o<<22&4294967295|o>>>10),o=e+(s^t&(i^s))+r[4]+4118548399&4294967295,e=t+(o<<7&4294967295|o>>>25),o=s+(i^e&(t^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(t^s&(e^t))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=t+(e^i&(s^e))+r[7]+4249261313&4294967295,t=i+(o<<22&4294967295|o>>>10),o=e+(s^t&(i^s))+r[8]+1770035416&4294967295,e=t+(o<<7&4294967295|o>>>25),o=s+(i^e&(t^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(t^s&(e^t))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=t+(e^i&(s^e))+r[11]+2304563134&4294967295,t=i+(o<<22&4294967295|o>>>10),o=e+(s^t&(i^s))+r[12]+1804603682&4294967295,e=t+(o<<7&4294967295|o>>>25),o=s+(i^e&(t^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(t^s&(e^t))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=t+(e^i&(s^e))+r[15]+1236535329&4294967295,t=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(t^i))+r[1]+4129170786&4294967295,e=t+(o<<5&4294967295|o>>>27),o=s+(t^i&(e^t))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^t&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=t+(s^e&(i^s))+r[0]+3921069994&4294967295,t=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(t^i))+r[5]+3593408605&4294967295,e=t+(o<<5&4294967295|o>>>27),o=s+(t^i&(e^t))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^t&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=t+(s^e&(i^s))+r[4]+3889429448&4294967295,t=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(t^i))+r[9]+568446438&4294967295,e=t+(o<<5&4294967295|o>>>27),o=s+(t^i&(e^t))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^t&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=t+(s^e&(i^s))+r[8]+1163531501&4294967295,t=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(t^i))+r[13]+2850285829&4294967295,e=t+(o<<5&4294967295|o>>>27),o=s+(t^i&(e^t))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^t&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=t+(s^e&(i^s))+r[12]+2368359562&4294967295,t=i+(o<<20&4294967295|o>>>12),o=e+(t^i^s)+r[5]+4294588738&4294967295,e=t+(o<<4&4294967295|o>>>28),o=s+(e^t^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^t)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=t+(i^s^e)+r[14]+4259657740&4294967295,t=i+(o<<23&4294967295|o>>>9),o=e+(t^i^s)+r[1]+2763975236&4294967295,e=t+(o<<4&4294967295|o>>>28),o=s+(e^t^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^t)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=t+(i^s^e)+r[10]+3200236656&4294967295,t=i+(o<<23&4294967295|o>>>9),o=e+(t^i^s)+r[13]+681279174&4294967295,e=t+(o<<4&4294967295|o>>>28),o=s+(e^t^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^t)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=t+(i^s^e)+r[6]+76029189&4294967295,t=i+(o<<23&4294967295|o>>>9),o=e+(t^i^s)+r[9]+3654602809&4294967295,e=t+(o<<4&4294967295|o>>>28),o=s+(e^t^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^t)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=t+(i^s^e)+r[2]+3299628645&4294967295,t=i+(o<<23&4294967295|o>>>9),o=e+(i^(t|~s))+r[0]+4096336452&4294967295,e=t+(o<<6&4294967295|o>>>26),o=s+(t^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~t))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=t+(s^(i|~e))+r[5]+4237533241&4294967295,t=i+(o<<21&4294967295|o>>>11),o=e+(i^(t|~s))+r[12]+1700485571&4294967295,e=t+(o<<6&4294967295|o>>>26),o=s+(t^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~t))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=t+(s^(i|~e))+r[1]+2240044497&4294967295,t=i+(o<<21&4294967295|o>>>11),o=e+(i^(t|~s))+r[8]+1873313359&4294967295,e=t+(o<<6&4294967295|o>>>26),o=s+(t^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~t))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=t+(s^(i|~e))+r[13]+1309151649&4294967295,t=i+(o<<21&4294967295|o>>>11),o=e+(i^(t|~s))+r[4]+4149444226&4294967295,e=t+(o<<6&4294967295|o>>>26),o=s+(t^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~t))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=t+(s^(i|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+s&4294967295}Fs.prototype.j=function(n,e){e===void 0&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=t;)z1(this,n,s),s+=this.blockSize;if(typeof n=="string"){for(;s<e;)if(r[i++]=n.charCodeAt(s++),i==this.blockSize){z1(this,r),i=0;break}}else for(;s<e;)if(r[i++]=n[s++],i==this.blockSize){z1(this,r),i=0;break}}this.h=i,this.i+=e};Fs.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=t&255,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};function an(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var s=n[i]|0;r&&s==e||(t[i]=s,r=!1)}this.g=t}var R7={};function yT(n){return-128<=n&&128>n?FG(n,function(e){return new an([e|0],0>e?-1:0)}):new an([n|0],0>n?-1:0)}function io(n){if(isNaN(n)||!isFinite(n))return rh;if(0>n)return br(io(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=SE;return new an(e,0)}function VO(n,e){if(n.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(n.charAt(0)=="-")return br(VO(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=io(Math.pow(e,8)),r=rh,i=0;i<n.length;i+=8){var s=Math.min(8,n.length-i),o=parseInt(n.substring(i,i+s),e);8>s?(s=io(Math.pow(e,s)),r=r.R(s).add(io(o))):(r=r.R(t),r=r.add(io(o)))}return r}var SE=4294967296,rh=yT(0),EE=yT(1),wP=yT(16777216);ze=an.prototype;ze.ea=function(){if(fs(this))return-br(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:SE+r)*e,e*=SE}return n};ze.toString=function(n){if(n=n||10,2>n||36<n)throw Error("radix out of range: "+n);if(Ho(this))return"0";if(fs(this))return"-"+br(this).toString(n);for(var e=io(Math.pow(n,6)),t=this,r="";;){var i=Vv(t,e).g;t=Hv(t,i.R(e));var s=((0<t.g.length?t.g[0]:t.h)>>>0).toString(n);if(t=i,Ho(t))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};ze.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h};function Ho(n){if(n.h!=0)return!1;for(var e=0;e<n.g.length;e++)if(n.g[e]!=0)return!1;return!0}function fs(n){return n.h==-1}ze.X=function(n){return n=Hv(this,n),fs(n)?-1:Ho(n)?0:1};function br(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new an(t,~n.h).add(EE)}ze.abs=function(){return fs(this)?br(this):this};ze.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(n.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,t[i]=o<<16|s}return new an(t,t[t.length-1]&-2147483648?-1:0)};function Hv(n,e){return n.add(br(e))}ze.R=function(n){if(Ho(this)||Ho(n))return rh;if(fs(this))return fs(n)?br(this).R(br(n)):br(br(this).R(n));if(fs(n))return br(this.R(br(n)));if(0>this.X(wP)&&0>n.X(wP))return io(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=n.D(i)>>>16,l=n.D(i)&65535;t[2*r+2*i]+=o*l,Cg(t,2*r+2*i),t[2*r+2*i+1]+=s*l,Cg(t,2*r+2*i+1),t[2*r+2*i+1]+=o*a,Cg(t,2*r+2*i+1),t[2*r+2*i+2]+=s*a,Cg(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new an(t,0)};function Cg(n,e){for(;(n[e]&65535)!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Df(n,e){this.g=n,this.h=e}function Vv(n,e){if(Ho(e))throw Error("division by zero");if(Ho(n))return new Df(rh,rh);if(fs(n))return e=Vv(br(n),e),new Df(br(e.g),br(e.h));if(fs(e))return e=Vv(n,br(e)),new Df(br(e.g),e.h);if(30<n.g.length){if(fs(n)||fs(e))throw Error("slowDivide_ only works with positive integers.");for(var t=EE,r=e;0>=r.X(n);)t=MP(t),r=MP(r);var i=tu(t,1),s=tu(r,1);for(r=tu(r,2),t=tu(t,2);!Ho(r);){var o=s.add(r);0>=o.X(n)&&(i=i.add(t),s=o),r=tu(r,1),t=tu(t,1)}return e=Hv(n,i.R(e)),new Df(i,e)}for(i=rh;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=Math.ceil(Math.log(t)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=io(t),o=s.R(e);fs(o)||0<o.X(n);)t-=r,s=io(t),o=s.R(e);Ho(s)&&(s=EE),i=i.add(s),n=Hv(n,o)}return new Df(i,n)}ze.gb=function(n){return Vv(this,n).h};ze.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new an(t,this.h&n.h)};ze.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new an(t,this.h|n.h)};ze.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new an(t,this.h^n.h)};function MP(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new an(t,n.h)}function tu(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],s=0;s<r;s++)i[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new an(i,n.h)}zv.prototype.createWebChannel=zv.prototype.g;Xi.prototype.send=Xi.prototype.u;Xi.prototype.open=Xi.prototype.m;Xi.prototype.close=Xi.prototype.close;Wy.NO_ERROR=0;Wy.TIMEOUT=8;Wy.HTTP_ERROR=6;sO.COMPLETE="complete";oO.EventType=kp;kp.OPEN="a";kp.CLOSE="b";kp.ERROR="c";kp.MESSAGE="d";yr.prototype.listen=yr.prototype.O;kn.prototype.listenOnce=kn.prototype.P;kn.prototype.getLastError=kn.prototype.Sa;kn.prototype.getLastErrorCode=kn.prototype.Ia;kn.prototype.getStatus=kn.prototype.da;kn.prototype.getResponseJson=kn.prototype.Wa;kn.prototype.getResponseText=kn.prototype.ja;kn.prototype.send=kn.prototype.ha;kn.prototype.setWithCredentials=kn.prototype.Oa;Fs.prototype.digest=Fs.prototype.l;Fs.prototype.reset=Fs.prototype.reset;Fs.prototype.update=Fs.prototype.j;an.prototype.add=an.prototype.add;an.prototype.multiply=an.prototype.R;an.prototype.modulo=an.prototype.gb;an.prototype.compare=an.prototype.X;an.prototype.toNumber=an.prototype.ea;an.prototype.toString=an.prototype.toString;an.prototype.getBits=an.prototype.D;an.fromNumber=io;an.fromString=VO;var P7=function(){return new zv},I7=function(){return jy()},H1=Wy,L7=sO,D7=Lc,TP={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},bg=oO,B7=kn,N7=Fs,ih=an;const CP="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wr.UNAUTHENTICATED=new Wr(null),Wr.GOOGLE_CREDENTIALS=new Wr("google-credentials-uid"),Wr.FIRST_PARTY=new Wr("first-party-uid"),Wr.MOCK_USER=new Wr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jh="10.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sc=new BN("@firebase/firestore");function Bf(){return Sc.logLevel}function Ge(n,...e){if(Sc.logLevel<=$t.DEBUG){const t=e.map(_T);Sc.debug(`Firestore (${Jh}): ${n}`,...t)}}function po(n,...e){if(Sc.logLevel<=$t.ERROR){const t=e.map(_T);Sc.error(`Firestore (${Jh}): ${n}`,...t)}}function Ah(n,...e){if(Sc.logLevel<=$t.WARN){const t=e.map(_T);Sc.warn(`Firestore (${Jh}): ${n}`,...t)}}function _T(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(n="Unexpected state"){const e=`FIRESTORE (${Jh}) INTERNAL ASSERTION FAILED: `+n;throw po(e),new Error(e)}function Zn(n,e){n||Dt()}function tn(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ct extends jh{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class O7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Wr.UNAUTHENTICATED))}shutdown(){}}class F7{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class k7{constructor(e){this.t=e,this.currentUser=Wr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let r=this.i;const i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let s=new Ja;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ja,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{Ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ja)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Zn(typeof r.accessToken=="string"),new GO(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Zn(e===null||typeof e=="string"),new Wr(e)}}class U7{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Wr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class z7{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new U7(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Wr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class H7{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class V7{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=s=>{s.error!=null&&Ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Ge("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Zn(typeof t.token=="string"),this.R=t.token,new H7(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G7(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j7{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=G7(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function nn(n,e){return n<e?-1:n>e?1:0}function Sh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ct(Fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ct(Fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ct(Fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ct(Fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ci.fromMillis(Date.now())}static fromDate(e){return Ci.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Ci(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?nn(this.nanoseconds,e.nanoseconds):nn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ct(e)}static min(){return new Ct(new Ci(0,0))}static max(){return new Ct(new Ci(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e,t,r){t===void 0?t=0:t>e.length&&Dt(),r===void 0?r=e.length-t:r>e.length-t&&Dt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return sp.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof sp?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class On extends sp{construct(e,t,r){return new On(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ct(Fe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new On(t)}static emptyPath(){return new On([])}}const W7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class li extends sp{construct(e,t,r){return new li(e,t,r)}static isValidIdentifier(e){return W7.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),li.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new li(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ct(Fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ct(Fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ct(Fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ct(Fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new li(t)}static emptyPath(){return new li([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.path=e}static fromPath(e){return new yt(On.fromString(e))}static fromName(e){return new yt(On.fromString(e).popFirst(5))}static empty(){return new yt(On.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&On.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return On.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new yt(new On(e.slice()))}}function X7(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ct.fromTimestamp(r===1e9?new Ci(t+1,0):new Ci(t,r));return new tl(i,yt.empty(),e)}function J7(n){return new tl(n.readTime,n.key,-1)}class tl{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new tl(Ct.min(),yt.empty(),-1)}static max(){return new tl(Ct.max(),yt.empty(),-1)}}function K7(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=yt.comparator(n.documentKey,e.documentKey),t!==0?t:nn(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $7="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Y7{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xT(n){if(n.code!==Fe.FAILED_PRECONDITION||n.message!==$7)throw n;Ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Dt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Te((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Te?t:Te.resolve(t)}catch(t){return Te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Te.reject(t)}static resolve(e){return new Te((t,r)=>{t(e)})}static reject(e){return new Te((t,r)=>{r(e)})}static waitFor(e){return new Te((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=Te.resolve(!1);for(const r of e)t=t.next(i=>i?Te.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new Te((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new Te((r,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Ja,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new vd(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=ST(r.target.error);this.V.reject(new vd(e,i))}}static open(e,t,r,i){try{return new AT(t,e.transaction(i,r))}catch(s){throw new vd(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Ge("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Q7(t)}}class ql{constructor(e,t,r){this.name=e,this.version=t,this.p=r,ql.S(Bv())===12.2&&po("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ge("SimpleDb","Removing database:",e),jl(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!LN())return!1;if(ql.C())return!0;const e=Bv(),t=ql.S(e),r=0<t&&t<10,i=ql.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async O(e){return this.db||(Ge("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;t(o)},i.onblocked=()=>{r(new vd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new ct(Fe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new ct(Fe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new vd(e,o))},i.onupgradeneeded=s=>{Ge("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.N(o,i.transaction,s.oldVersion,this.version).next(()=>{Ge("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=t=>this.B(t)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const s=t==="readonly";let o=0;for(;;){++o;try{this.db=await this.O(e);const a=AT.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),Te.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(Ge("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class q7{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return jl(this.k.delete())}}class vd extends ct{constructor(e,t){super(Fe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Gp(n){return n.name==="IndexedDbTransactionError"}class Q7{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(Ge("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ge("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),jl(r)}add(e){return Ge("SimpleDb","ADD",this.store.name,e,e),jl(this.store.add(e))}get(e){return jl(this.store.get(e)).next(t=>(t===void 0&&(t=null),Ge("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ge("SimpleDb","DELETE",this.store.name,e),jl(this.store.delete(e))}count(){return Ge("SimpleDb","COUNT",this.store.name),jl(this.store.count())}W(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new Te((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.G(s,(a,l)=>{o.push(l)}).next(()=>o)}}j(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new Te((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,t){Ge("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.J=!1;const i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.G(i,t)}Z(e){const t=this.cursor({});return new Te((r,i)=>{t.onerror=s=>{const o=ST(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,t){const r=[];return new Te((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new q7(a),c=t(a.primaryKey,a.value,l);if(c instanceof Te){const h=c.catch(d=>(l.done(),Te.reject(d)));r.push(h)}l.isDone?i():l.$===null?a.continue():a.continue(l.$)}}).next(()=>Te.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function jl(n){return new Te((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=ST(r.target.error);t(i)}})}let bP=!1;function ST(n){const e=ql.S(Bv());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ct("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return bP||(bP=!0,setTimeout(()=>{throw r},0)),r}}return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.se(r),this.oe=r=>t.writeSequenceNumber(r))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}ET._e=-1;function e_(n){return n==null}function wE(n){return n===0&&1/n==-1/0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RP(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function t_(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Z7(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e,t){this.comparator=e,this.root=t||Cr.EMPTY}insert(e,t){return new Wn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Cr.BLACK,null,null))}remove(e){return new Wn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Cr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rg(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rg(this.root,e,this.comparator,!0)}}class Rg{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Cr{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Cr.RED,this.left=i??Cr.EMPTY,this.right=s??Cr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Cr(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Cr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Cr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Cr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Cr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Dt();const e=this.left.check();if(e!==this.right.check())throw Dt();return e+(this.isRed()?0:1)}}Cr.EMPTY=null,Cr.RED=!0,Cr.BLACK=!1;Cr.EMPTY=new class{constructor(){this.size=0}get key(){throw Dt()}get value(){throw Dt()}get color(){throw Dt()}get left(){throw Dt()}get right(){throw Dt()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Cr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e){this.comparator=e,this.data=new Wn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new PP(this.data.getIterator())}getIteratorFrom(e){return new PP(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Lr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Lr(this.comparator);return t.data=e,t}}class PP{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e){this.fields=e,e.sort(li.comparator)}static empty(){return new Ba([])}unionWith(e){let t=new Lr(li.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ba(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Sh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new jO("Invalid base64 string: "+s):s}}(e);return new Qr(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Qr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return nn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qr.EMPTY_BYTE_STRING=new Qr("");const ej=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nl(n){if(Zn(!!n),typeof n=="string"){let e=0;const t=ej.exec(n);if(Zn(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Yn(n.seconds),nanos:Yn(n.nanos)}}function Yn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ec(n){return typeof n=="string"?Qr.fromBase64String(n):Qr.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wT(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function MT(n){const e=n.mapValue.fields.__previous_value__;return wT(e)?MT(e):e}function op(n){const e=nl(n.mapValue.fields.__local_write_time__.timestampValue);return new Ci(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(e,t,r,i,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class ap{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ap("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ap&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pg={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function wc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?wT(n)?4:nj(n)?9007199254740991:10:Dt()}function mo(n,e){if(n===e)return!0;const t=wc(n);if(t!==wc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return op(n).isEqual(op(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=nl(i.timestampValue),a=nl(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return Ec(i.bytesValue).isEqual(Ec(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Yn(i.geoPointValue.latitude)===Yn(s.geoPointValue.latitude)&&Yn(i.geoPointValue.longitude)===Yn(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Yn(i.integerValue)===Yn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Yn(i.doubleValue),a=Yn(s.doubleValue);return o===a?wE(o)===wE(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Sh(n.arrayValue.values||[],e.arrayValue.values||[],mo);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(RP(o)!==RP(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!mo(o[l],a[l])))return!1;return!0}(n,e);default:return Dt()}}function lp(n,e){return(n.values||[]).find(t=>mo(t,e))!==void 0}function Eh(n,e){if(n===e)return 0;const t=wc(n),r=wc(e);if(t!==r)return nn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return nn(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Yn(s.integerValue||s.doubleValue),l=Yn(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return IP(n.timestampValue,e.timestampValue);case 4:return IP(op(n),op(e));case 5:return nn(n.stringValue,e.stringValue);case 6:return function(s,o){const a=Ec(s),l=Ec(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=nn(a[c],l[c]);if(h!==0)return h}return nn(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=nn(Yn(s.latitude),Yn(o.latitude));return a!==0?a:nn(Yn(s.longitude),Yn(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const h=Eh(a[c],l[c]);if(h)return h}return nn(a.length,l.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Pg.mapValue&&o===Pg.mapValue)return 0;if(s===Pg.mapValue)return 1;if(o===Pg.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const p=nn(l[d],h[d]);if(p!==0)return p;const m=Eh(a[l[d]],c[h[d]]);if(m!==0)return m}return nn(l.length,h.length)}(n.mapValue,e.mapValue);default:throw Dt()}}function IP(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return nn(n,e);const t=nl(n),r=nl(e),i=nn(t.seconds,r.seconds);return i!==0?i:nn(t.nanos,r.nanos)}function wh(n){return ME(n)}function ME(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=nl(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ec(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return yt.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=ME(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${ME(t.fields[o])}`;return i+"}"}(n.mapValue):Dt()}function TE(n){return!!n&&"integerValue"in n}function TT(n){return!!n&&"arrayValue"in n}function LP(n){return!!n&&"nullValue"in n}function DP(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function V1(n){return!!n&&"mapValue"in n}function yd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return t_(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=yd(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=yd(n.arrayValue.values[t]);return e}return Object.assign({},n)}function nj(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e){this.value=e}static empty(){return new no({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!V1(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=yd(t)}setAll(e){let t=li.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=yd(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());V1(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return mo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];V1(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){t_(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new no(yd(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Jr(e,0,Ct.min(),Ct.min(),Ct.min(),no.empty(),0)}static newFoundDocument(e,t,r,i){return new Jr(e,1,t,Ct.min(),r,i,0)}static newNoDocument(e,t){return new Jr(e,2,t,Ct.min(),Ct.min(),no.empty(),0)}static newUnknownDocument(e,t){return new Jr(e,3,t,Ct.min(),Ct.min(),no.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ct.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=no.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=no.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ct.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Jr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Jr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e,t){this.position=e,this.inclusive=t}}function BP(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(s.field.isKeyField()?r=yt.comparator(yt.fromName(o.referenceValue),t.key):r=Eh(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function NP(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!mo(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e,t="asc"){this.field=e,this.dir=t}}function rj(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{}class ir extends WO{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new sj(e,t,r):t==="array-contains"?new lj(e,r):t==="in"?new cj(e,r):t==="not-in"?new uj(e,r):t==="array-contains-any"?new hj(e,r):new ir(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new oj(e,r):new aj(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Eh(t,this.value)):t!==null&&wc(this.value)===wc(t)&&this.matchesComparison(Eh(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Dt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class go extends WO{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new go(e,t)}matches(e){return XO(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function XO(n){return n.op==="and"}function JO(n){return ij(n)&&XO(n)}function ij(n){for(const e of n.filters)if(e instanceof go)return!1;return!0}function CE(n){if(n instanceof ir)return n.field.canonicalString()+n.op.toString()+wh(n.value);if(JO(n))return n.filters.map(e=>CE(e)).join(",");{const e=n.filters.map(t=>CE(t)).join(",");return`${n.op}(${e})`}}function KO(n,e){return n instanceof ir?function(r,i){return i instanceof ir&&r.op===i.op&&r.field.isEqual(i.field)&&mo(r.value,i.value)}(n,e):n instanceof go?function(r,i){return i instanceof go&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&KO(o,i.filters[a]),!0):!1}(n,e):void Dt()}function $O(n){return n instanceof ir?function(t){return`${t.field.canonicalString()} ${t.op} ${wh(t.value)}`}(n):n instanceof go?function(t){return t.op.toString()+" {"+t.getFilters().map($O).join(" ,")+"}"}(n):"Filter"}class sj extends ir{constructor(e,t,r){super(e,t,r),this.key=yt.fromName(r.referenceValue)}matches(e){const t=yt.comparator(e.key,this.key);return this.matchesComparison(t)}}class oj extends ir{constructor(e,t){super(e,"in",t),this.keys=YO("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class aj extends ir{constructor(e,t){super(e,"not-in",t),this.keys=YO("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function YO(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>yt.fromName(r.referenceValue))}class lj extends ir{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return TT(t)&&lp(t.arrayValue,this.value)}}class cj extends ir{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&lp(this.value.arrayValue,t)}}class uj extends ir{constructor(e,t){super(e,"not-in",t)}matches(e){if(lp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!lp(this.value.arrayValue,t)}}class hj extends ir{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!TT(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>lp(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function OP(n,e=null,t=[],r=[],i=null,s=null,o=null){return new fj(n,e,t,r,i,s,o)}function CT(n){const e=tn(n);if(e.ce===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>CE(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),e_(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>wh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>wh(r)).join(",")),e.ce=t}return e.ce}function bT(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!rj(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!KO(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!NP(n.startAt,e.startAt)&&NP(n.endAt,e.endAt)}function bE(n){return yt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function dj(n,e,t,r,i,s,o,a){return new n_(n,e,t,r,i,s,o,a)}function qO(n){return new n_(n)}function FP(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function pj(n){return n.collectionGroup!==null}function _d(n){const e=tn(n);if(e.le===null){e.le=[];const t=new Set;for(const s of e.explicitOrderBy)e.le.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Lr(li.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.le.push(new jv(s,r))}),t.has(li.keyField().canonicalString())||e.le.push(new jv(li.keyField(),r))}return e.le}function lo(n){const e=tn(n);return e.he||(e.he=mj(e,_d(n))),e.he}function mj(n,e){if(n.limitType==="F")return OP(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new jv(i.field,s)});const t=n.endAt?new Gv(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Gv(n.startAt.position,n.startAt.inclusive):null;return OP(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function RE(n,e,t){return new n_(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function r_(n,e){return bT(lo(n),lo(e))&&n.limitType===e.limitType}function QO(n){return`${CT(lo(n))}|lt:${n.limitType}`}function Tu(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>$O(i)).join(", ")}]`),e_(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>wh(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>wh(i)).join(",")),`Target(${r})`}(lo(n))}; limitType=${n.limitType})`}function i_(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):yt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of _d(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=BP(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,_d(r),i)||r.endAt&&!function(o,a,l){const c=BP(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,_d(r),i))}(n,e)}function gj(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function ZO(n){return(e,t)=>{let r=!1;for(const i of _d(n)){const s=vj(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function vj(n,e,t){const r=n.field.isKeyField()?yt.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Eh(l,c):Dt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Dt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){t_(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Z7(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yj=new Wn(yt.comparator);function rl(){return yj}const eF=new Wn(yt.comparator);function id(...n){let e=eF;for(const t of n)e=e.insert(t.key,t);return e}function _j(n){let e=eF;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ql(){return xd()}function tF(){return xd()}function xd(){return new Kh(n=>n.toString(),(n,e)=>n.isEqual(e))}const xj=new Lr(yt.comparator);function Yt(...n){let e=xj;for(const t of n)e=e.add(t);return e}const Aj=new Lr(nn);function Sj(){return Aj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ej(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wE(e)?"-0":e}}function wj(n){return{integerValue:""+n}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(){this._=void 0}}function Mj(n,e,t){return n instanceof PE?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&wT(s)&&(s=MT(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Wv?nF(n,e):n instanceof Xv?rF(n,e):function(i,s){const o=Cj(i,s),a=kP(o)+kP(i.Ie);return TE(o)&&TE(i.Ie)?wj(a):Ej(i.serializer,a)}(n,e)}function Tj(n,e,t){return n instanceof Wv?nF(n,e):n instanceof Xv?rF(n,e):t}function Cj(n,e){return n instanceof IE?function(r){return TE(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class PE extends s_{}class Wv extends s_{constructor(e){super(),this.elements=e}}function nF(n,e){const t=iF(e);for(const r of n.elements)t.some(i=>mo(i,r))||t.push(r);return{arrayValue:{values:t}}}class Xv extends s_{constructor(e){super(),this.elements=e}}function rF(n,e){let t=iF(e);for(const r of n.elements)t=t.filter(i=>!mo(i,r));return{arrayValue:{values:t}}}class IE extends s_{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function kP(n){return Yn(n.integerValue||n.doubleValue)}function iF(n){return TT(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function bj(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Wv&&i instanceof Wv||r instanceof Xv&&i instanceof Xv?Sh(r.elements,i.elements,mo):r instanceof IE&&i instanceof IE?mo(r.Ie,i.Ie):r instanceof PE&&i instanceof PE}(n.transform,e.transform)}class ac{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ac}static exists(e){return new ac(void 0,e)}static updateTime(e){return new ac(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function W0(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class RT{}function sF(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Pj(n.key,ac.none()):new PT(n.key,n.data,ac.none());{const t=n.data,r=no.empty();let i=new Lr(li.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new o_(n.key,r,new Ba(i.toArray()),ac.none())}}function Rj(n,e,t){n instanceof PT?function(i,s,o){const a=i.value.clone(),l=zP(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof o_?function(i,s,o){if(!W0(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=zP(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(oF(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Ad(n,e,t,r){return n instanceof PT?function(s,o,a,l){if(!W0(s.precondition,o))return a;const c=s.value.clone(),h=HP(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof o_?function(s,o,a,l){if(!W0(s.precondition,o))return a;const c=HP(s.fieldTransforms,l,o),h=o.data;return h.setAll(oF(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(n,e,t,r):function(s,o,a){return W0(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function UP(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Sh(r,i,(s,o)=>bj(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class PT extends RT{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class o_ extends RT{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function oF(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function zP(n,e,t){const r=new Map;Zn(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Tj(o,a,t[i]))}return r}function HP(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,Mj(s,o,e))}return r}class Pj extends RT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Rj(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ad(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ad(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=tF();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const l=sF(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Ct.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Yt())}isEqual(e){return this.batchId===e.batchId&&Sh(this.mutations,e.mutations,(t,r)=>UP(t,r))&&Sh(this.baseMutations,e.baseMutations,(t,r)=>UP(t,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $n,jt;function aF(n){if(n===void 0)return po("GRPC error has no .code"),Fe.UNKNOWN;switch(n){case $n.OK:return Fe.OK;case $n.CANCELLED:return Fe.CANCELLED;case $n.UNKNOWN:return Fe.UNKNOWN;case $n.DEADLINE_EXCEEDED:return Fe.DEADLINE_EXCEEDED;case $n.RESOURCE_EXHAUSTED:return Fe.RESOURCE_EXHAUSTED;case $n.INTERNAL:return Fe.INTERNAL;case $n.UNAVAILABLE:return Fe.UNAVAILABLE;case $n.UNAUTHENTICATED:return Fe.UNAUTHENTICATED;case $n.INVALID_ARGUMENT:return Fe.INVALID_ARGUMENT;case $n.NOT_FOUND:return Fe.NOT_FOUND;case $n.ALREADY_EXISTS:return Fe.ALREADY_EXISTS;case $n.PERMISSION_DENIED:return Fe.PERMISSION_DENIED;case $n.FAILED_PRECONDITION:return Fe.FAILED_PRECONDITION;case $n.ABORTED:return Fe.ABORTED;case $n.OUT_OF_RANGE:return Fe.OUT_OF_RANGE;case $n.UNIMPLEMENTED:return Fe.UNIMPLEMENTED;case $n.DATA_LOSS:return Fe.DATA_LOSS;default:return Dt()}}(jt=$n||($n={}))[jt.OK=0]="OK",jt[jt.CANCELLED=1]="CANCELLED",jt[jt.UNKNOWN=2]="UNKNOWN",jt[jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jt[jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jt[jt.NOT_FOUND=5]="NOT_FOUND",jt[jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",jt[jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",jt[jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",jt[jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jt[jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jt[jt.ABORTED=10]="ABORTED",jt[jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",jt[jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",jt[jt.INTERNAL=13]="INTERNAL",jt[jt.UNAVAILABLE=14]="UNAVAILABLE",jt[jt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nj=new ih([4294967295,4294967295],0);function VP(n){const e=Bj().encode(n),t=new N7;return t.update(e),new Uint8Array(t.digest())}function GP(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ih([t,r],0),new ih([i,s],0)]}class IT{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new sd(`Invalid padding: ${t}`);if(r<0)throw new sd(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new sd(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new sd(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ee=ih.fromNumber(this.Te)}de(e,t,r){let i=e.add(t.multiply(ih.fromNumber(r)));return i.compare(Nj)===1&&(i=new ih([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=VP(e),[r,i]=GP(t);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new IT(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const t=VP(e),[r,i]=GP(t);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Re(o)}}Re(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class sd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,jp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new a_(Ct.min(),i,new Wn(nn),rl(),Yt())}}class jp{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new jp(r,t,Yt(),Yt(),Yt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(e,t,r,i){this.Ve=e,this.removedTargetIds=t,this.key=r,this.me=i}}class lF{constructor(e,t){this.targetId=e,this.fe=t}}class cF{constructor(e,t,r=Qr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class jP{constructor(){this.ge=0,this.pe=XP(),this.ye=Qr.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Yt(),t=Yt(),r=Yt();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Dt()}}),new jp(this.ye,this.we,e,t,r)}Fe(){this.Se=!1,this.pe=XP()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Zn(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class Oj{constructor(e){this.Le=e,this.ke=new Map,this.qe=rl(),this.Qe=WP(),this.Ke=new Wn(nn)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,t=>{const r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(t);break;case 3:this.je(t)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.Ce(e.resumeToken));break;default:Dt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach((r,i)=>{this.je(i)&&t(i)})}Je(e){const t=e.targetId,r=e.fe.count,i=this.Ye(t);if(i){const s=i.target;if(bE(s))if(r===0){const o=new yt(s.path);this.We(t,o,Jr.newNoDocument(o,Ct.min()))}else Zn(r===1);else{const o=this.Ze(t);if(o!==r){const a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(t);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,c)}}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=Ec(r).toUint8Array()}catch(l){if(l instanceof jO)return Ah("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new IT(o,i,s)}catch(l){return Ah(l instanceof sd?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,t,r){return t.fe.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(t,s,null),i++)}),i}it(e){const t=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&bE(a.target)){const l=new yt(a.target.path);this.qe.get(l)!==null||this.st(o,l)||this.We(o,l,Jr.newNoDocument(l,e))}s.De&&(t.set(o,s.ve()),s.Fe())}});let r=Yt();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));const i=new a_(e,t,this.Ke,this.qe,r);return this.qe=rl(),this.Qe=WP(),this.Ke=new Wn(nn),i}Ue(e,t){if(!this.je(e))return;const r=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,r),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,t)?i.Me(t,1):i.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),r&&(this.qe=this.qe.insert(t,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new jP,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new Lr(nn),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||Ge("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new jP),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function WP(){return new Wn(yt.comparator)}function XP(){return new Wn(yt.comparator)}const Fj={asc:"ASCENDING",desc:"DESCENDING"},kj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Uj={and:"AND",or:"OR"};class zj{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function LE(n,e){return n.useProto3Json||e_(e)?e:{value:e}}function Hj(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Vj(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function sh(n){return Zn(!!n),Ct.fromTimestamp(function(t){const r=nl(t);return new Ci(r.seconds,r.nanos)}(n))}function Gj(n,e){return DE(n,e).canonicalString()}function DE(n,e){const t=function(i){return new On(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function uF(n){const e=On.fromString(n);return Zn(mF(e)),e}function G1(n,e){const t=uF(e);if(t.get(1)!==n.databaseId.projectId)throw new ct(Fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ct(Fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new yt(fF(t))}function hF(n,e){return Gj(n.databaseId,e)}function jj(n){const e=uF(n);return e.length===4?On.emptyPath():fF(e)}function JP(n){return new On(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function fF(n){return Zn(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Wj(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Dt()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(Zn(h===void 0||typeof h=="string"),Qr.fromBase64String(h||"")):(Zn(h===void 0||h instanceof Uint8Array),Qr.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?Fe.UNKNOWN:aF(c.code);return new ct(h,c.message||"")}(o);t=new cF(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=G1(n,r.document.name),s=sh(r.document.updateTime),o=r.document.createTime?sh(r.document.createTime):Ct.min(),a=new no({mapValue:{fields:r.document.fields}}),l=Jr.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];t=new X0(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=G1(n,r.document),s=r.readTime?sh(r.readTime):Ct.min(),o=Jr.newNoDocument(i,s),a=r.removedTargetIds||[];t=new X0([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=G1(n,r.document),s=r.removedTargetIds||[];t=new X0([],s,i,null)}else{if(!("filter"in e))return Dt();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new Dj(i,s),a=r.targetId;t=new lF(a,o)}}return t}function Xj(n,e){return{documents:[hF(n,e.path)]}}function Jj(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=hF(n,i);const s=function(c){if(c.length!==0)return pF(go.create(c,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:Cu(p.field),direction:Yj(p.dir)}}(h))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=LE(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ut:t,parent:i}}function Kj(n){let e=jj(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Zn(r===1);const h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(d){const p=dF(d);return p instanceof go&&JO(p)?p.getFilters():[p]}(t.where));let o=[];t.orderBy&&(o=function(d){return d.map(p=>function(v){return new jv(bu(v.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(p))}(t.orderBy));let a=null;t.limit&&(a=function(d){let p;return p=typeof d=="object"?d.value:d,e_(p)?null:p}(t.limit));let l=null;t.startAt&&(l=function(d){const p=!!d.before,m=d.values||[];return new Gv(m,p)}(t.startAt));let c=null;return t.endAt&&(c=function(d){const p=!d.before,m=d.values||[];return new Gv(m,p)}(t.endAt)),dj(e,i,o,s,a,"F",l,c)}function $j(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Dt()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function dF(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=bu(t.unaryFilter.field);return ir.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=bu(t.unaryFilter.field);return ir.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=bu(t.unaryFilter.field);return ir.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=bu(t.unaryFilter.field);return ir.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Dt()}}(n):n.fieldFilter!==void 0?function(t){return ir.create(bu(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Dt()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return go.create(t.compositeFilter.filters.map(r=>dF(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Dt()}}(t.compositeFilter.op))}(n):Dt()}function Yj(n){return Fj[n]}function qj(n){return kj[n]}function Qj(n){return Uj[n]}function Cu(n){return{fieldPath:n.canonicalString()}}function bu(n){return li.fromServerFormat(n.fieldPath)}function pF(n){return n instanceof ir?function(t){if(t.op==="=="){if(DP(t.value))return{unaryFilter:{field:Cu(t.field),op:"IS_NAN"}};if(LP(t.value))return{unaryFilter:{field:Cu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(DP(t.value))return{unaryFilter:{field:Cu(t.field),op:"IS_NOT_NAN"}};if(LP(t.value))return{unaryFilter:{field:Cu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cu(t.field),op:qj(t.op),value:t.value}}}(n):n instanceof go?function(t){const r=t.getFilters().map(i=>pF(i));return r.length===1?r[0]:{compositeFilter:{op:Qj(t.op),filters:r}}}(n):Dt()}function mF(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,t,r,i,s=Ct.min(),o=Ct.min(),a=Qr.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Na(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Na(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Na(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Na(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(e){this.ct=e}}function eW(n){const e=Kj({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?RE(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tW{constructor(){this._n=new nW}addToCollectionParentIndex(e,t){return this._n.add(t),Te.resolve()}getCollectionParents(e,t){return Te.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return Te.resolve()}deleteFieldIndex(e,t){return Te.resolve()}deleteAllFieldIndexes(e){return Te.resolve()}createTargetIndexes(e,t){return Te.resolve()}getDocumentsMatchingTarget(e,t){return Te.resolve(null)}getIndexType(e,t){return Te.resolve(0)}getFieldIndexes(e,t){return Te.resolve([])}getNextCollectionGroupToUpdate(e){return Te.resolve(null)}getMinOffset(e,t){return Te.resolve(tl.min())}getMinOffsetFromCollectionGroup(e,t){return Te.resolve(tl.min())}updateCollectionGroup(e,t,r){return Te.resolve()}updateIndexEntries(e,t){return Te.resolve()}}class nW{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Lr(On.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Lr(On.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Mh(0)}static Bn(){return new Mh(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rW{constructor(){this.changes=new Kh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Jr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?Te.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iW{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sW{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Ad(r.mutation,i,Ba.empty(),Ci.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Yt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Yt()){const i=Ql();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=id();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Ql();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Yt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=rl();const o=xd(),a=function(){return xd()}();return t.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof o_)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Ad(h.mutation,c,h.mutation.getFieldMask(),Ci.now())):o.set(c.key,Ba.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),t.forEach((c,h)=>{var d;return a.set(c,new iW(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,t){const r=xd();let i=new Wn((o,a)=>o-a),s=Yt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(c===null)return;let h=r.get(l)||Ba.empty();h=a.applyToLocalView(c,h),r.set(l,h);const d=(i.get(a.batchId)||Yt()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=tF();h.forEach(p=>{if(!s.has(p)){const m=sF(t.get(p),r.get(p));m!==null&&d.set(p,m),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return Te.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return yt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):pj(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):Te.resolve(Ql());let a=-1,l=s;return o.next(c=>Te.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?Te.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Yt())).next(h=>({batchId:a,changes:_j(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new yt(t)).next(r=>{let i=id();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=id();return this.indexManager.getCollectionParents(e,s).next(a=>Te.forEach(a,l=>{const c=function(d,p){return new n_(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,Jr.newInvalidDocument(h)))});let a=id();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&Ad(h.mutation,c,Ba.empty(),Ci.now()),i_(t,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oW{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return Te.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:sh(i.createTime)}}(t)),Te.resolve()}getNamedQuery(e,t){return Te.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(i){return{name:i.name,query:eW(i.bundledQuery),readTime:sh(i.readTime)}}(t)),Te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aW{constructor(){this.overlays=new Wn(yt.comparator),this.hr=new Map}getOverlay(e,t){return Te.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ql();return Te.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),Te.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),Te.resolve()}getOverlaysForCollection(e,t,r){const i=Ql(),s=t.length+1,o=new yt(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return Te.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Wn((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=Ql(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Ql(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return Te.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Lj(t,r));let s=this.hr.get(t);s===void 0&&(s=Yt(),this.hr.set(t,s)),this.hr.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(){this.Pr=new Lr(pr.Ir),this.Tr=new Lr(pr.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const r=new pr(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ar(new pr(e,t))}Rr(e,t){e.forEach(r=>this.removeReference(r,t))}Vr(e){const t=new yt(new On([])),r=new pr(t,e),i=new pr(t,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new yt(new On([])),r=new pr(t,e),i=new pr(t,e+1);let s=Yt();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new pr(e,0),r=this.Pr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class pr{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return yt.comparator(e.key,t.key)||nn(e.pr,t.pr)}static Er(e,t){return nn(e.pr,t.pr)||yt.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lW{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Lr(pr.Ir)}checkEmpty(e){return Te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Ij(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new pr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Te.resolve(o)}lookupMutationBatch(e,t){return Te.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.br(r),s=i<0?0:i;return Te.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Te.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return Te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new pr(t,0),i=new pr(t,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),Te.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Lr(nn);return t.forEach(i=>{const s=new pr(i,0),o=new pr(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),Te.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;yt.isDocumentKey(s)||(s=s.child(""));const o=new pr(new yt(s),0);let a=new Lr(nn);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.pr)),!0)},o),Te.resolve(this.Dr(a))}Dr(e){const t=[];return e.forEach(r=>{const i=this.Sr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Zn(this.Cr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return Te.forEach(t.mutations,i=>{const s=new pr(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,t){const r=new pr(t,0),i=this.wr.firstAfterOrEqual(r);return Te.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Te.resolve()}Cr(e,t){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cW{constructor(e){this.vr=e,this.docs=function(){return new Wn(yt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Te.resolve(r?r.document.mutableCopy():Jr.newInvalidDocument(t))}getEntries(e,t){let r=rl();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Jr.newInvalidDocument(i))}),Te.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=rl();const o=t.path,a=new yt(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||K7(J7(h),r)<=0||(i.has(h.key)||i_(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return Te.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Dt()}Fr(e,t){return Te.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new uW(this)}getSize(e){return Te.resolve(this.size)}}class uW extends rW{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),Te.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hW{constructor(e){this.persistence=e,this.Mr=new Kh(t=>CT(t),bT),this.lastRemoteSnapshotVersion=Ct.min(),this.highestTargetId=0,this.Or=0,this.Nr=new LT,this.targetCount=0,this.Br=Mh.Nn()}forEachTarget(e,t){return this.Mr.forEach((r,i)=>t(i)),Te.resolve()}getLastRemoteSnapshotVersion(e){return Te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Te.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),Te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),Te.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Br=new Mh(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,Te.resolve()}updateTargetData(e,t){return this.qn(t),Te.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,Te.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Te.waitFor(s).next(()=>i)}getTargetCount(e){return Te.resolve(this.targetCount)}getTargetData(e,t){const r=this.Mr.get(t)||null;return Te.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),Te.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),Te.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),Te.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Nr.gr(t);return Te.resolve(r)}containsKey(e,t){return Te.resolve(this.Nr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fW{constructor(e,t){this.Lr={},this.overlays={},this.kr=new ET(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new hW(this),this.indexManager=new tW,this.remoteDocumentCache=function(i){return new cW(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new Zj(t),this.$r=new oW(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new aW,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Lr[e.toKey()];return r||(r=new lW(t,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){Ge("MemoryPersistence","Starting transaction:",e);const i=new dW(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,t){return Te.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,t)))}}class dW extends Y7{constructor(e){super(),this.currentSequenceNumber=e}}class DT{constructor(e){this.persistence=e,this.zr=new LT,this.jr=null}static Hr(e){return new DT(e)}get Jr(){if(this.jr)return this.jr;throw Dt()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),Te.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),Te.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),Te.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Te.forEach(this.Jr,r=>{const i=yt.fromPath(r);return this.Yr(e,i).next(s=>{s||t.removeEntry(i,Ct.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(r=>{r?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return Te.or([()=>Te.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=i}static Ki(e,t){let r=Yt(),i=Yt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new BT(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pW{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mW{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return gV()?8:ql.v(Bv())>0?6:4}()}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ji(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new pW;return this.Ji(e,t,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,t,o,a.size)})}).next(()=>s.result)}Yi(e,t,r,i){return r.documentReadCount<this.Wi?(Bf()<=$t.DEBUG&&Ge("QueryEngine","SDK will not create cache indexes for query:",Tu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Te.resolve()):(Bf()<=$t.DEBUG&&Ge("QueryEngine","Query:",Tu(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Bf()<=$t.DEBUG&&Ge("QueryEngine","The SDK decides to create cache indexes for query:",Tu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,lo(t))):Te.resolve())}ji(e,t){if(FP(t))return Te.resolve(null);let r=lo(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=RE(t,null,"F"),r=lo(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Yt(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Zi(t,a);return this.Xi(t,c,o,l.readTime)?this.ji(e,RE(t,null,"F")):this.es(e,c,t,l)}))})))}Hi(e,t,r,i){return FP(t)||i.isEqual(Ct.min())?Te.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(t,s);return this.Xi(t,o,r,i)?Te.resolve(null):(Bf()<=$t.DEBUG&&Ge("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Tu(t)),this.es(e,o,t,X7(i,-1)).next(a=>a))})}Zi(e,t){let r=new Lr(ZO(e));return t.forEach((i,s)=>{i_(e,s)&&(r=r.add(s))}),r}Xi(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,t,r){return Bf()<=$t.DEBUG&&Ge("QueryEngine","Using full collection scan to execute query:",Tu(t)),this.zi.getDocumentsMatchingQuery(e,t,tl.min(),r)}es(e,t,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gW{constructor(e,t,r,i){this.persistence=e,this.ts=t,this.serializer=i,this.ns=new Wn(nn),this.rs=new Kh(s=>CT(s),bT),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sW(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}}function vW(n,e,t,r){return new gW(n,e,t,r)}async function gF(n,e){const t=tn(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t._s(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Yt();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return t.localDocuments.getDocuments(r,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})}function vF(n){const e=tn(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function yW(n,e){const t=tn(n),r=e.snapshotVersion;let i=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.os.newChangeBuffer({trackRemovals:!0});i=t.ns;const a=[];e.targetChanges.forEach((h,d)=>{const p=i.get(d);if(!p)return;a.push(t.Qr.removeMatchingKeys(s,h.removedDocuments,d).next(()=>t.Qr.addMatchingKeys(s,h.addedDocuments,d)));let m=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(Qr.EMPTY_BYTE_STRING,Ct.min()).withLastLimboFreeSnapshotVersion(Ct.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,r)),i=i.insert(d,m),function(A,_,g){return A.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:g.addedDocuments.size+g.modifiedDocuments.size+g.removedDocuments.size>0}(p,m,h)&&a.push(t.Qr.updateTargetData(s,m))});let l=rl(),c=Yt();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(_W(s,o,e.documentUpdates).next(h=>{l=h.cs,c=h.ls})),!r.isEqual(Ct.min())){const h=t.Qr.getLastRemoteSnapshotVersion(s).next(d=>t.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return Te.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.ns=i,s))}function _W(n,e,t){let r=Yt(),i=Yt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=rl();return t.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Ct.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Ge("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:i}})}function xW(n,e){const t=tn(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Qr.getTargetData(r,e).next(s=>s?(i=s,Te.resolve(i)):t.Qr.allocateTargetId(r).next(o=>(i=new Na(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ns=t.ns.insert(r.targetId,r),t.rs.set(e,r.targetId)),r})}async function BE(n,e,t){const r=tn(n),i=r.ns.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Gp(o))throw o;Ge("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}function KP(n,e,t){const r=tn(n);let i=Ct.min(),s=Yt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=tn(l),p=d.rs.get(h);return p!==void 0?Te.resolve(d.ns.get(p)):d.Qr.getTargetData(c,h)}(r,o,lo(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,t?i:Ct.min(),t?s:Yt())).next(a=>(AW(r,gj(e),a),{documents:a,hs:s})))}function AW(n,e,t){let r=n.ss.get(e)||Ct.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.ss.set(e,r)}class $P{constructor(){this.activeTargetIds=Sj()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class SW{constructor(){this.no=new $P,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new $P,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EW{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Ge("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Ge("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ig=null;function j1(){return Ig===null?Ig=function(){return 268435456+Math.round(2147483648*Math.random())}():Ig++,"0x"+Ig.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MW{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr="WebChannelConnection";class TW extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+t.host,this.po=`projects/${i}/databases/${s}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get wo(){return!1}So(t,r,i,s,o){const a=j1(),l=this.bo(t,r.toUriEncodedString());Ge("RestConnection",`Sending RPC '${t}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,s,o),this.Co(t,l,c,i).then(h=>(Ge("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw Ah("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}vo(t,r,i,s,o,a){return this.So(t,r,i,s,o)}Do(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Jh}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}bo(t,r){const i=wW[t];return`${this.fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,r,i){const s=j1();return new Promise((o,a)=>{const l=new B7;l.setWithCredentials(!0),l.listenOnce(L7.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case H1.NO_ERROR:const h=l.getResponseJson();Ge(Hr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case H1.TIMEOUT:Ge(Hr,`RPC '${e}' ${s} timed out`),a(new ct(Fe.DEADLINE_EXCEEDED,"Request time out"));break;case H1.HTTP_ERROR:const d=l.getStatus();if(Ge(Hr,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const v=function(_){const g=_.toLowerCase().replace(/_/g,"-");return Object.values(Fe).indexOf(g)>=0?g:Fe.UNKNOWN}(m.status);a(new ct(v,m.message))}else a(new ct(Fe.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ct(Fe.UNAVAILABLE,"Connection failed."));break;default:Dt()}}finally{Ge(Hr,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);Ge(Hr,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",c,r,15)})}Fo(e,t,r){const i=j1(),s=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=P7(),a=I7(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const h=s.join("");Ge(Hr,`Creating RPC '${e}' stream ${i}: ${h}`,l);const d=o.createWebChannel(h,l);let p=!1,m=!1;const v=new MW({lo:_=>{m?Ge(Hr,`Not sending because RPC '${e}' stream ${i} is closed:`,_):(p||(Ge(Hr,`Opening RPC '${e}' stream ${i} transport.`),d.open(),p=!0),Ge(Hr,`RPC '${e}' stream ${i} sending:`,_),d.send(_))},ho:()=>d.close()}),A=(_,g,x)=>{_.listen(g,S=>{try{x(S)}catch(w){setTimeout(()=>{throw w},0)}})};return A(d,bg.EventType.OPEN,()=>{m||Ge(Hr,`RPC '${e}' stream ${i} transport opened.`)}),A(d,bg.EventType.CLOSE,()=>{m||(m=!0,Ge(Hr,`RPC '${e}' stream ${i} transport closed`),v.Vo())}),A(d,bg.EventType.ERROR,_=>{m||(m=!0,Ah(Hr,`RPC '${e}' stream ${i} transport errored:`,_),v.Vo(new ct(Fe.UNAVAILABLE,"The operation could not be completed")))}),A(d,bg.EventType.MESSAGE,_=>{var g;if(!m){const x=_.data[0];Zn(!!x);const S=x,w=S.error||((g=S[0])===null||g===void 0?void 0:g.error);if(w){Ge(Hr,`RPC '${e}' stream ${i} received error:`,w);const R=w.status;let C=function(N){const T=$n[N];if(T!==void 0)return aF(T)}(R),I=w.message;C===void 0&&(C=Fe.INTERNAL,I="Unknown error status: "+R+" with message "+w.message),m=!0,v.Vo(new ct(C,I)),d.close()}else Ge(Hr,`RPC '${e}' stream ${i} received:`,x),v.mo(x)}}),A(a,D7.STAT_EVENT,_=>{_.stat===TP.PROXY?Ge(Hr,`RPC '${e}' stream ${i} detected buffering proxy`):_.stat===TP.NOPROXY&&Ge(Hr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.Ro()},0),v}}function W1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yF(n){return new zj(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _F{constructor(e,t,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=t,this.Mo=r,this.xo=i,this.Oo=s,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),i=Math.max(0,t-r);i>0&&Ge("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CW{constructor(e,t,r,i,s,o,a,l){this.oi=e,this.$o=r,this.Uo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new _F(e,t)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,t){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():t&&t.code===Fe.RESOURCE_EXHAUSTED?(po(t.toString()),po("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):t&&t.code===Fe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(t)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===t&&this.o_(r,i)},r=>{e(()=>{const i=new ct(Fe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,t){const r=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(e){return Ge("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget(()=>this.Wo===e?t():(Ge("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class bW extends CW{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=Wj(this.serializer,e),r=function(s){if(!("targetChange"in s))return Ct.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Ct.min():o.readTime?sh(o.readTime):Ct.min()}(e);return this.listener.u_(t,r)}c_(e){const t={};t.database=JP(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=bE(l)?{documents:Xj(s,l)}:{query:Jj(s,l).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Vj(s,o.resumeToken);const c=LE(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Ct.min())>0){a.readTime=Hj(s,o.snapshotVersion.toTimestamp());const c=LE(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=$j(this.serializer,e);r&&(t.labels=r),this.t_(t)}l_(e){const t={};t.database=JP(this.serializer),t.removeTarget=e,this.t_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RW extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new ct(Fe.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,DE(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ct(Fe.UNKNOWN,s.toString())})}vo(e,t,r,i,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,DE(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ct(Fe.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class PW{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(po(t),this.g_=!1):Ge("OnlineStateTracker",t)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IW{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=s,this.M_.io(o=>{r.enqueueAndForget(async()=>{Xp(this)&&(Ge("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=tn(l);c.v_.add(4),await Wp(c),c.x_.set("Unknown"),c.v_.delete(4),await l_(c)}(this))})}),this.x_=new PW(r,i)}}async function l_(n){if(Xp(n))for(const e of n.F_)await e(!0)}async function Wp(n){for(const e of n.F_)await e(!1)}function xF(n,e){const t=tn(n);t.C_.has(e.targetId)||(t.C_.set(e.targetId,e),FT(t)?OT(t):$h(t).Jo()&&NT(t,e))}function AF(n,e){const t=tn(n),r=$h(t);t.C_.delete(e),r.Jo()&&SF(t,e),t.C_.size===0&&(r.Jo()?r.Xo():Xp(t)&&t.x_.set("Unknown"))}function NT(n,e){if(n.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ct.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}$h(n).c_(e)}function SF(n,e){n.O_.Oe(e),$h(n).l_(e)}function OT(n){n.O_=new Oj({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>n.C_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),$h(n).start(),n.x_.p_()}function FT(n){return Xp(n)&&!$h(n).Ho()&&n.C_.size>0}function Xp(n){return tn(n).v_.size===0}function EF(n){n.O_=void 0}async function LW(n){n.C_.forEach((e,t)=>{NT(n,e)})}async function DW(n,e){EF(n),FT(n)?(n.x_.S_(e),OT(n)):n.x_.set("Unknown")}async function BW(n,e,t){if(n.x_.set("Online"),e instanceof cF&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.C_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.C_.delete(a),i.O_.removeTarget(a))}(n,e)}catch(r){Ge("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await qP(n,r)}else if(e instanceof X0?n.O_.$e(e):e instanceof lF?n.O_.Je(e):n.O_.Ge(e),!t.isEqual(Ct.min()))try{const r=await vF(n.localStore);t.compareTo(r)>=0&&await function(s,o){const a=s.O_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.C_.get(c);h&&s.C_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.C_.get(l);if(!h)return;s.C_.set(l,h.withResumeToken(Qr.EMPTY_BYTE_STRING,h.snapshotVersion)),SF(s,l);const d=new Na(h.target,l,c,h.sequenceNumber);NT(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(r){Ge("RemoteStore","Failed to raise snapshot:",r),await qP(n,r)}}async function qP(n,e,t){if(!Gp(e))throw e;n.v_.add(1),await Wp(n),n.x_.set("Offline"),t||(t=()=>vF(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Ge("RemoteStore","Retrying IndexedDB access"),await t(),n.v_.delete(1),await l_(n)})}async function QP(n,e){const t=tn(n);t.asyncQueue.verifyOperationInProgress(),Ge("RemoteStore","RemoteStore received new credentials");const r=Xp(t);t.v_.add(3),await Wp(t),r&&t.x_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.v_.delete(3),await l_(t)}async function NW(n,e){const t=tn(n);e?(t.v_.delete(2),await l_(t)):e||(t.v_.add(2),await Wp(t),t.x_.set("Unknown"))}function $h(n){return n.N_||(n.N_=function(t,r,i){const s=tn(t);return s.R_(),new bW(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:LW.bind(null,n),To:DW.bind(null,n),u_:BW.bind(null,n)}),n.F_.push(async e=>{e?(n.N_.Zo(),FT(n)?OT(n):n.x_.set("Unknown")):(await n.N_.stop(),EF(n))})),n.N_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ja,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new kT(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ct(Fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wF(n,e){if(po("AsyncQueue",`${e}: ${n}`),Gp(n))return new ct(Fe.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(e){this.comparator=e?(t,r)=>e(t,r)||yt.comparator(t.key,r.key):(t,r)=>yt.comparator(t.key,r.key),this.keyedMap=id(),this.sortedSet=new Wn(this.comparator)}static emptySet(e){return new oh(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof oh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new oh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(){this.L_=new Wn(yt.comparator)}track(e){const t=e.doc.key,r=this.L_.get(t);r?e.type!==0&&r.type===3?this.L_=this.L_.insert(t,e):e.type===3&&r.type!==1?this.L_=this.L_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.L_=this.L_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.L_=this.L_.remove(t):e.type===1&&r.type===2?this.L_=this.L_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):Dt():this.L_=this.L_.insert(t,e)}k_(){const e=[];return this.L_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Th{constructor(e,t,r,i,s,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new Th(e,t,oh.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&r_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OW{constructor(){this.q_=void 0,this.Q_=[]}}class FW{constructor(){this.queries=new Kh(e=>QO(e),r_),this.onlineState="Unknown",this.K_=new Set}}async function kW(n,e){const t=tn(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new OW),i)try{s.q_=await t.onListen(r)}catch(o){const a=wF(o,`Initialization of query '${Tu(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,s),s.Q_.push(e),e.U_(t.onlineState),s.q_&&e.W_(s.q_)&&UT(t)}async function UW(n,e){const t=tn(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const o=s.Q_.indexOf(e);o>=0&&(s.Q_.splice(o,1),i=s.Q_.length===0)}if(i)return t.queries.delete(r),t.onUnlisten(r)}function zW(n,e){const t=tn(n);let r=!1;for(const i of e){const s=i.query,o=t.queries.get(s);if(o){for(const a of o.Q_)a.W_(i)&&(r=!0);o.q_=i}}r&&UT(t)}function HW(n,e,t){const r=tn(n),i=r.queries.get(e);if(i)for(const s of i.Q_)s.onError(t);r.queries.delete(e)}function UT(n){n.K_.forEach(e=>{e.next()})}class VW{constructor(e,t,r){this.query=e,this.G_=t,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Th(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.z_?this.H_(e)&&(this.G_.next(e),t=!0):this.J_(e,this.onlineState)&&(this.Y_(e),t=!0),this.j_=e,t}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}J_(e,t){if(!e.fromCache)return!0;const r=t!=="Offline";return(!this.options.Z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}H_(e){if(e.docChanges.length>0)return!0;const t=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Y_(e){e=Th.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{constructor(e){this.key=e}}class TF{constructor(e){this.key=e}}class GW{constructor(e,t){this.query=e,this.oa=t,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=Yt(),this.mutatedKeys=Yt(),this.ua=ZO(e),this.ca=new oh(this.ua)}get la(){return this.oa}ha(e,t){const r=t?t.Pa:new ZP,i=t?t.ca:this.ca;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,d)=>{const p=i.get(h),m=i_(this.query,d)?d:null,v=!!p&&this.mutatedKeys.has(p.key),A=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let _=!1;p&&m?p.data.isEqual(m.data)?v!==A&&(r.track({type:3,doc:m}),_=!0):this.Ia(p,m)||(r.track({type:2,doc:m}),_=!0,(l&&this.ua(m,l)>0||c&&this.ua(m,c)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),_=!0):p&&!m&&(r.track({type:1,doc:p}),_=!0,(l||c)&&(a=!0)),_&&(m?(o=o.add(m),s=A?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{ca:o,Pa:r,Xi:a,mutatedKeys:s}}Ia(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const o=e.Pa.k_();o.sort((h,d)=>function(m,v){const A=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Dt()}};return A(m)-A(v)}(h.type,d.type)||this.ua(h.doc,d.doc)),this.Ta(r),i=i!=null&&i;const a=t&&!i?this.Ea():[],l=this.aa.size===0&&this.current&&!i?1:0,c=l!==this._a;return this._a=l,o.length!==0||c?{snapshot:new Th(this.query,e.ca,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new ZP,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(t=>this.oa=this.oa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.oa=this.oa.delete(t)),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=Yt(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});const t=[];return e.forEach(r=>{this.aa.has(r)||t.push(new TF(r))}),this.aa.forEach(r=>{e.has(r)||t.push(new MF(r))}),t}Ra(e){this.oa=e.hs,this.aa=Yt();const t=this.ha(e.documents);return this.applyChanges(t,!0)}Va(){return Th.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}}class jW{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class WW{constructor(e){this.key=e,this.ma=!1}}class XW{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new Kh(a=>QO(a),r_),this.pa=new Map,this.ya=new Set,this.wa=new Wn(yt.comparator),this.Sa=new Map,this.ba=new LT,this.Da={},this.Ca=new Map,this.va=Mh.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}}async function JW(n,e){const t=eX(n);let r,i;const s=t.ga.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.Va();else{const o=await xW(t.localStore,lo(e)),a=t.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await KW(t,e,r,a==="current",o.resumeToken),t.isPrimaryClient&&xF(t.remoteStore,o)}return i}async function KW(n,e,t,r,i){n.Ma=(d,p,m)=>async function(A,_,g,x){let S=_.view.ha(g);S.Xi&&(S=await KP(A.localStore,_.query,!1).then(({documents:I})=>_.view.ha(I,S)));const w=x&&x.targetChanges.get(_.targetId),R=x&&x.targetMismatches.get(_.targetId)!=null,C=_.view.applyChanges(S,A.isPrimaryClient,w,R);return tI(A,_.targetId,C.da),C.snapshot}(n,d,p,m);const s=await KP(n.localStore,e,!0),o=new GW(e,s.hs),a=o.ha(s.documents),l=jp.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),c=o.applyChanges(a,n.isPrimaryClient,l);tI(n,t,c.da);const h=new jW(e,t,o);return n.ga.set(e,h),n.pa.has(t)?n.pa.get(t).push(e):n.pa.set(t,[e]),c.snapshot}async function $W(n,e){const t=tn(n),r=t.ga.get(e),i=t.pa.get(r.targetId);if(i.length>1)return t.pa.set(r.targetId,i.filter(s=>!r_(s,e))),void t.ga.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||await BE(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),AF(t.remoteStore,r.targetId),NE(t,r.targetId)}).catch(xT)):(NE(t,r.targetId),await BE(t.localStore,r.targetId,!0))}async function CF(n,e){const t=tn(n);try{const r=await yW(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Sa.get(s);o&&(Zn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.ma=!0:i.modifiedDocuments.size>0?Zn(o.ma):i.removedDocuments.size>0&&(Zn(o.ma),o.ma=!1))}),await RF(t,r,e)}catch(r){await xT(r)}}function eI(n,e,t){const r=tn(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.ga.forEach((s,o)=>{const a=o.view.U_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=tn(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const p of d.Q_)p.U_(a)&&(c=!0)}),c&&UT(l)}(r.eventManager,e),i.length&&r.fa.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function YW(n,e,t){const r=tn(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Sa.get(e),s=i&&i.key;if(s){let o=new Wn(yt.comparator);o=o.insert(s,Jr.newNoDocument(s,Ct.min()));const a=Yt().add(s),l=new a_(Ct.min(),new Map,new Wn(nn),o,a);await CF(r,l),r.wa=r.wa.remove(s),r.Sa.delete(e),zT(r)}else await BE(r.localStore,e,!1).then(()=>NE(r,e,t)).catch(xT)}function NE(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.pa.get(e))n.ga.delete(r),t&&n.fa.xa(r,t);n.pa.delete(e),n.isPrimaryClient&&n.ba.Vr(e).forEach(r=>{n.ba.containsKey(r)||bF(n,r)})}function bF(n,e){n.ya.delete(e.path.canonicalString());const t=n.wa.get(e);t!==null&&(AF(n.remoteStore,t),n.wa=n.wa.remove(e),n.Sa.delete(t),zT(n))}function tI(n,e,t){for(const r of t)r instanceof MF?(n.ba.addReference(r.key,e),qW(n,r)):r instanceof TF?(Ge("SyncEngine","Document no longer in limbo: "+r.key),n.ba.removeReference(r.key,e),n.ba.containsKey(r.key)||bF(n,r.key)):Dt()}function qW(n,e){const t=e.key,r=t.path.canonicalString();n.wa.get(t)||n.ya.has(r)||(Ge("SyncEngine","New document in limbo: "+t),n.ya.add(r),zT(n))}function zT(n){for(;n.ya.size>0&&n.wa.size<n.maxConcurrentLimboResolutions;){const e=n.ya.values().next().value;n.ya.delete(e);const t=new yt(On.fromString(e)),r=n.va.next();n.Sa.set(r,new WW(t)),n.wa=n.wa.insert(t,r),xF(n.remoteStore,new Na(lo(qO(t.path)),r,"TargetPurposeLimboResolution",ET._e))}}async function RF(n,e,t){const r=tn(n),i=[],s=[],o=[];r.ga.isEmpty()||(r.ga.forEach((a,l)=>{o.push(r.Ma(l,e,t).then(c=>{if((c||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){i.push(c);const h=BT.Ki(l.targetId,c);s.push(h)}}))}),await Promise.all(o),r.fa.u_(i),await async function(l,c){const h=tn(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>Te.forEach(c,p=>Te.forEach(p.qi,m=>h.persistence.referenceDelegate.addReference(d,p.targetId,m)).next(()=>Te.forEach(p.Qi,m=>h.persistence.referenceDelegate.removeReference(d,p.targetId,m)))))}catch(d){if(!Gp(d))throw d;Ge("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const p=d.targetId;if(!d.fromCache){const m=h.ns.get(p),v=m.snapshotVersion,A=m.withLastLimboFreeSnapshotVersion(v);h.ns=h.ns.insert(p,A)}}}(r.localStore,s))}async function QW(n,e){const t=tn(n);if(!t.currentUser.isEqual(e)){Ge("SyncEngine","User change. New user:",e.toKey());const r=await gF(t.localStore,e);t.currentUser=e,function(s,o){s.Ca.forEach(a=>{a.forEach(l=>{l.reject(new ct(Fe.CANCELLED,o))})}),s.Ca.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await RF(t,r.us)}}function ZW(n,e){const t=tn(n),r=t.Sa.get(e);if(r&&r.ma)return Yt().add(r.key);{let i=Yt();const s=t.pa.get(e);if(!s)return i;for(const o of s){const a=t.ga.get(o);i=i.unionWith(a.view.la)}return i}}function eX(n){const e=tn(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=CF.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ZW.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=YW.bind(null,e),e.fa.u_=zW.bind(null,e.eventManager),e.fa.xa=HW.bind(null,e.eventManager),e}class nI{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=yF(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return vW(this.persistence,new mW,e.initialUser,this.serializer)}createPersistence(e){return new fW(DT.Hr,this.serializer)}createSharedClientState(e){return new SW}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class tX{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>eI(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=QW.bind(null,this.syncEngine),await NW(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new FW}()}createDatastore(e){const t=yF(e.databaseInfo.databaseId),r=function(s){return new TW(s)}(e.databaseInfo);return function(s,o,a,l){return new RW(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,o,a){return new IW(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>eI(this.syncEngine,t,0),function(){return YP.D()?new YP:new EW}())}createSyncEngine(e,t){return function(i,s,o,a,l,c,h){const d=new XW(i,s,o,a,l,c);return h&&(d.Fa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(r){const i=tn(r);Ge("RemoteStore","RemoteStore shutting down."),i.v_.add(5),await Wp(i),i.M_.shutdown(),i.x_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nX{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):po("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rX{constructor(e,t,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Wr.UNAUTHENTICATED,this.clientId=j7.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{Ge("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(Ge("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ct(Fe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ja;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=wF(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function X1(n,e){n.asyncQueue.verifyOperationInProgress(),Ge("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await gF(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function rI(n,e){n.asyncQueue.verifyOperationInProgress();const t=await sX(n);Ge("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>QP(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>QP(e.remoteStore,i)),n._onlineComponents=e}function iX(n){return n.name==="FirebaseError"?n.code===Fe.FAILED_PRECONDITION||n.code===Fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}async function sX(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ge("FirestoreClient","Using user provided OfflineComponentProvider");try{await X1(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!iX(t))throw t;Ah("Error using user provided cache. Falling back to memory cache: "+t),await X1(n,new nI)}}else Ge("FirestoreClient","Using default OfflineComponentProvider"),await X1(n,new nI);return n._offlineComponents}async function oX(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ge("FirestoreClient","Using user provided OnlineComponentProvider"),await rI(n,n._uninitializedComponentsProvider._online)):(Ge("FirestoreClient","Using default OnlineComponentProvider"),await rI(n,new tX))),n._onlineComponents}async function aX(n){const e=await oX(n),t=e.eventManager;return t.onListen=JW.bind(null,e.syncEngine),t.onUnlisten=$W.bind(null,e.syncEngine),t}function lX(n,e,t={}){const r=new Ja;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new nX({next:p=>{o.enqueueAndForget(()=>UW(s,d)),p.fromCache&&l.source==="server"?c.reject(new ct(Fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new VW(a,h,{includeMetadataChanges:!0,Z_:!0});return kW(s,d)}(await aX(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PF(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cX(n,e,t){if(!t)throw new ct(Fe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function uX(n,e,t,r){if(e===!0&&r===!0)throw new ct(Fe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function sI(n){if(yt.isDocumentKey(n))throw new ct(Fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function hX(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Dt()}function OE(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ct(Fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=hX(n);throw new ct(Fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ct(Fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ct(Fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}uX("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=PF((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ct(Fe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ct(Fe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ct(Fe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class HT{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oI({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ct(Fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new ct(Fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oI(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new O7;switch(r.type){case"firstParty":return new z7(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ct(Fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=iI.get(t);r&&(Ge("ComponentProvider","Removing Datastore"),iI.delete(t),r.terminate())}(this),Promise.resolve()}}function fX(n,e,t,r={}){var i;const s=(n=OE(n,HT))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Ah("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Wr.MOCK_USER;else{a=pV(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new ct(Fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Wr(c)}n._authCredentials=new F7(new GO(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new c_(this.firestore,e,this._query)}}class Yh{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ah(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Yh(this.firestore,e,this._key)}}class ah extends c_{constructor(e,t,r){super(e,t,qO(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Yh(this.firestore,null,new yt(e))}withConverter(e){return new ah(this.firestore,e,this._path)}}function dX(n,e,...t){if(n=AV(n),cX("collection","path",e),n instanceof HT){const r=On.fromString(e,...t);return sI(r),new ah(n,null,r)}{if(!(n instanceof Yh||n instanceof ah))throw new ct(Fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(On.fromString(e,...t));return sI(r),new ah(n.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pX{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new _F(this,"async_queue_retry"),this._u=()=>{const t=W1();t&&Ge("AsyncQueue","Visibility state changed to "+t.visibilityState),this.jo.Ko()};const e=W1();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const t=W1();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});const t=new Ja;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}async cu(){if(this.eu.length!==0){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!Gp(e))throw e;Ge("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo(()=>this.cu())}}uu(e){const t=this.Xa.then(()=>(this.iu=!0,e().catch(r=>{this.ru=r,this.iu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw po("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.iu=!1,r))));return this.Xa=t,t}enqueueAfterDelay(e,t,r){this.au(),this.ou.indexOf(e)>-1&&(t=0);const i=kT.createAndSchedule(this,e,t,r,s=>this.lu(s));return this.nu.push(i),i}au(){this.ru&&Dt()}verifyOperationInProgress(){}async hu(){let e;do e=this.Xa,await e;while(e!==this.Xa)}Pu(e){for(const t of this.nu)if(t.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.nu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){const t=this.nu.indexOf(e);this.nu.splice(t,1)}}class IF extends HT{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=function(){return new pX}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||LF(this),this._firestoreClient.terminate()}}function mX(n,e){const t=typeof n=="object"?n:xG(),r=typeof n=="string"?n:e||"(default)",i=gG(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=fV("firestore");s&&fX(i,...s)}return i}function gX(n){return n._firestoreClient||LF(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function LF(n){var e,t,r;const i=n._freezeSettings(),s=function(a,l,c,h){return new tj(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,PF(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._firestoreClient=new rX(n._authCredentials,n._appCheckCredentials,n._queue,s),!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Jv(Qr.fromBase64String(e))}catch(t){throw new ct(Fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Jv(Qr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DF{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ct(Fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new li(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vX{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ct(Fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ct(Fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return nn(this._lat,e._lat)||nn(this._long,e._long)}}const yX=new RegExp("[~\\*/\\[\\]]");function _X(n,e,t){if(e.search(yX)>=0)throw aI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new DF(...e.split("."))._internalPath}catch{throw aI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function aI(n,e,t,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new ct(Fe.INVALID_ARGUMENT,a+n+l)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BF{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Yh(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new xX(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(NF("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class xX extends BF{data(){return super.data()}}function NF(n,e){return typeof e=="string"?_X(n,e):e instanceof DF?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AX(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ct(Fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class SX{convertValue(e,t="none"){switch(wc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ec(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Dt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return t_(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new vX(Yn(e.latitude),Yn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=MT(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(op(e));default:return null}}convertTimestamp(e){const t=nl(e);return new Ci(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=On.fromString(e);Zn(mF(r));const i=new ap(r.get(1),r.get(3)),s=new yt(r.popFirst(5));return i.isEqual(t)||po(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class EX extends BF{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new J0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(NF("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class J0 extends EX{data(e={}){return super.data(e)}}class wX{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Lg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new J0(this._firestore,this._userDataWriter,r.key,r,new Lg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ct(Fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new J0(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Lg(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new J0(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Lg(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:MX(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function MX(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Dt()}}class TX extends SX{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jv(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Yh(this.firestore,null,t)}}function CX(n){n=OE(n,c_);const e=OE(n.firestore,IF),t=gX(e),r=new TX(e);return AX(n._query),lX(t,n._query).then(i=>new wX(e,r,n,i))}(function(e,t=!0){(function(i){Jh=i})(_G),Ov(new $d("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new IF(new k7(r.getProvider("auth-internal")),new V7(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ct(Fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ap(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),nh(CP,"4.4.2",e),nh(CP,"4.4.2","esm2017")})();var bX="firebase",RX="10.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nh(bX,RX,"app");const PX={apiKey:"AIzaSyCdnuxel4imeAOVQVogRiHvqvrXb5qVRQw",authDomain:"ecovibe-c6720.firebaseapp.com",projectId:"ecovibe-c6720",storageBucket:"ecovibe-c6720.appspot.com",messagingSenderId:"944059551615",appId:"1:944059551615:web:2f96d7e9a67d0065e9544a"},IX=FN(PX),LX=mX(IX);function VT(n,e){if(!e)return n;const{category:t="",tags:r=[],searchQuery:i="",collections:s=[],productTypes:o=[],priceRange:a={min:0,max:0},seller:l="",selectedOptions:c=[]}=e;let h=[];for(let d of n){let p=!0;r.length>0&&!d.Tags.some(m=>e.tags.includes(m))&&(p=!1),t!==""&&d.Category!==t&&(p=!1),i!==""&&!d.Name.toLowerCase().includes(i.toLowerCase())&&(p=!1),s.length>0&&!s.includes(d.Collection)&&(p=!1),o.length>0&&!o.includes(d.Type)&&(p=!1),a.min>-1&&a.max>0&&(d.Price<a.min||d.Price>a.max)&&(p=!1),l!=""&&d.Seller!==l&&(p=!1),c.length>0&&d.Options&&(d.Options.some(({title:v,options:A})=>c.some(_=>_.title===v&&A.some(g=>g===_.selectedOption)))||(p=!1)),p&&h.push(d)}return e.sortBy!==""&&h.sort((d,p)=>e.sortBy==="high to low"?p.Price-d.Price:e.sortBy==="low to high"?d.Price-p.Price:d.Tags.includes(e.sortBy)&&!p.Tags.includes(e.sortBy)?-1:!d.Tags.includes(e.sortBy)&&p.Tags.includes(e.sortBy)?1:0),h}const K0=UH("products/getAsyncProducts",async(n,{rejectWithValue:e,fulfillWithValue:t})=>{try{const r=dX(LX,"Products"),s=(await CX(r)).docs.map(a=>({...a.data(),id:a.id}));return VT(s,n)}catch(r){return console.log(r),e(r.message)}}),DX={loading:!1,data:[],error:""},BX=XH({name:"products",initialState:DX,extraReducers:n=>{n.addCase(K0.pending,(e,t)=>{e.loading=!0,e.data=[],e.error=""}),n.addCase(K0.fulfilled,(e,t)=>{e.loading=!1,e.data=t.payload,e.error=""}),n.addCase(K0.rejected,(e,t)=>{e.loading=!1,e.data=[],e.error=t.payload})}}),NX=BX.reducer;var OF={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},lI=Wo.createContext&&Wo.createContext(OF),OX=["attr","size","title"];function FX(n,e){if(n==null)return{};var t=kX(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function kX(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function Kv(){return Kv=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Kv.apply(this,arguments)}function cI(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function $v(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?cI(Object(t),!0).forEach(function(r){UX(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):cI(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function UX(n,e,t){return e=zX(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function zX(n){var e=HX(n,"string");return typeof e=="symbol"?e:String(e)}function HX(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function FF(n){return n&&n.map((e,t)=>Wo.createElement(e.tag,$v({key:t},e.attr),FF(e.child)))}function cn(n){return e=>Wo.createElement(VX,Kv({attr:$v({},n.attr)},e),FF(n.child))}function VX(n){var e=t=>{var{attr:r,size:i,title:s}=n,o=FX(n,OX),a=i||t.size||"1em",l;return t.className&&(l=t.className),n.className&&(l=(l?l+" ":"")+n.className),Wo.createElement("svg",Kv({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,o,{className:l,style:$v($v({color:n.color||t.color},t.style),n.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&Wo.createElement("title",null,s),n.children)};return lI!==void 0?Wo.createElement(lI.Consumer,null,t=>e(t)):e(OF)}function Yv(n){return cn({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(n)}function Ns(n){return cn({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"},child:[]}]})(n)}function GT(n){return cn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"},child:[]}]})(n)}function GX(n){return cn({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 416H381.54c-.74 19.81-14.71 32-32.74 32H288c-18.69 0-33.02-17.47-32.77-32H16c-8.8 0-16 7.2-16 16v16c0 35.2 28.8 64 64 64h512c35.2 0 64-28.8 64-64v-16c0-8.8-7.2-16-16-16zM576 48c0-26.4-21.6-48-48-48H112C85.6 0 64 21.6 64 48v336h512V48zm-64 272H128V64h384v256z"},child:[]}]})(n)}function jX(n){return cn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"},child:[]}]})(n)}function uI(n){return cn({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(n)}const hI=[{title:"Fashion"},{title:"Electronics"},{title:"Home Decor"},{title:"Health and Wellness"},{title:"Beauty and Personal Care"}],WX=[{title:"Home"},{title:"Products"},{title:"Contact Us"},{title:"FAQs"}],J1={homePage:{img01:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2Ffreestocks-_3Q3tsJ01nc-unsplash.jpg?alt=media&token=55706bbb-c885-44c2-9db2-a594a053329a",img02:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2Fbrooke-cagle-8jp-6SjVibM-unsplash.jpg?alt=media&token=00462705-2985-4e3d-813a-ae537817ac46",img03:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2Flauren-richmond-490uCO8h7ZA-unsplash.jpg?alt=media&token=4c8d59f0-a015-4f42-a916-12b17bf2c553"}};function kF(n){const e=n.reduce((i,s)=>Number(i)+Number(s),0),t=n.length;return Math.round(e/t)}const XX=n=>{for(var e=[],t=0;t<n;t++)e.push(t);return e},JX="https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2Ficon.svg?alt=media&token=927bf580-49b0-4e03-9118-0a11258c817e";function KX(n){return cn({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},child:[]},{tag:"path",attr:{d:"M3.604 7.197l7.138 -3.109a.96 .96 0 0 1 1.27 .527l4.924 11.902a1 1 0 0 1 -.514 1.304l-7.137 3.109a.96 .96 0 0 1 -1.271 -.527l-4.924 -11.903a1 1 0 0 1 .514 -1.304z"},child:[]},{tag:"path",attr:{d:"M15 4h1a1 1 0 0 1 1 1v3.5"},child:[]},{tag:"path",attr:{d:"M20 6c.264 .112 .52 .217 .768 .315a1 1 0 0 1 .53 1.311l-2.298 5.374"},child:[]}]})(n)}function $X(n){return cn({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},child:[]},{tag:"path",attr:{d:"M4 4h6v6h-6z"},child:[]},{tag:"path",attr:{d:"M14 4h6v6h-6z"},child:[]},{tag:"path",attr:{d:"M4 14h6v6h-6z"},child:[]},{tag:"path",attr:{d:"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"},child:[]}]})(n)}function UF(n){return cn({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},child:[]},{tag:"path",attr:{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0"},child:[]},{tag:"path",attr:{d:"M12 7v5l3 3"},child:[]}]})(n)}function YX(n){return cn({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},child:[]},{tag:"path",attr:{d:"M3 5m0 3a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3z"},child:[]},{tag:"path",attr:{d:"M3 10l18 0"},child:[]},{tag:"path",attr:{d:"M7 15l.01 0"},child:[]},{tag:"path",attr:{d:"M11 15l2 0"},child:[]}]})(n)}function qX(n){return cn({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},child:[]},{tag:"path",attr:{d:"M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"},child:[]},{tag:"path",attr:{d:"M14.071 17.764a8.989 8.989 0 0 1 -2.071 .236c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.346 0 6.173 1.727 8.482 5.182"},child:[]},{tag:"path",attr:{d:"M19 22v.01"},child:[]},{tag:"path",attr:{d:"M19 19a2.003 2.003 0 0 0 .914 -3.782a1.98 1.98 0 0 0 -2.414 .483"},child:[]}]})(n)}function QX(n){return cn({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},child:[]},{tag:"path",attr:{d:"M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572"},child:[]}]})(n)}function ZX(n){return cn({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},child:[]},{tag:"path",attr:{d:"M21 3l-6.5 18a.55 .55 0 0 1 -1 0l-3.5 -7l-7 -3.5a.55 .55 0 0 1 0 -1l18 -6.5"},child:[]}]})(n)}function eJ(n){return cn({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},child:[]},{tag:"path",attr:{d:"M13.5 21h-6.5a2 2 0 0 1 -2 -2v-6a2 2 0 0 1 2 -2h10a2 2 0 0 1 1.74 1.012"},child:[]},{tag:"path",attr:{d:"M11 16a1 1 0 1 0 2 0a1 1 0 0 0 -2 0"},child:[]},{tag:"path",attr:{d:"M8 11v-4a4 4 0 1 1 8 0v4"},child:[]},{tag:"path",attr:{d:"M19 16l-2 3h4l-2 3"},child:[]}]})(n)}function tJ(n){return cn({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"},child:[]},{tag:"path",attr:{d:"M15 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2"},child:[]},{tag:"path",attr:{d:"M21 12h-13l3 -3"},child:[]},{tag:"path",attr:{d:"M11 15l-3 -3"},child:[]}]})(n)}function zF({title:n}){return b.jsxs("aside",{className:"md:hidden flex h-20 mx-auto w-[95%] px-4 py-2 bg-primary-900/90 rounded-lg items-center justify-between",children:[b.jsxs("div",{className:"flex flex-col justify-evenly h-full",children:[b.jsx("h2",{className:"text-lg text-white",children:n}),b.jsxs("p",{className:"flex items-center justify-center gap-x-1 py-1 text-gray-300",children:[b.jsx(UF,{className:"text-2xl"}),b.jsx("span",{className:"text-xs",children:"22h 55m 20s remaining "})]})]}),b.jsxs("button",{className:"flex items-center justify-center hover:bg-white transition-all hover:text-primary-500 hover:font-semibold text-white border border-gray-100 px-2 py-1 rounded-md text-sm gap-x-1.5",children:[b.jsx("span",{children:"View All"}),b.jsx("span",{children:b.jsx(Ns,{})})]})]})}const nJ=()=>b.jsxs("div",{className:"mx-auto 2xl:max-w-screen-2xl",children:[b.jsxs("div",{className:"flex flex-col md:flex-row gap-y-2 gap-x-2 items-center justify-between px-2 py-1 md:px-4 md:h-[500px] h-96",children:[b.jsxs("div",{className:"h-3/4 md:h-full md:w-2/3 w-full justify-center items-center bg-blue-400 rounded-md relative cursor-pointer",children:[b.jsx("div",{className:"absolute inset-0 w-full h-full z-0",children:b.jsx("img",{src:J1.homePage.img03,alt:"hero-image",className:"w-full h-full object-cover object-center rounded-md"})}),b.jsxs("div",{className:"bg-black bg-opacity-25 backdrop-blur-sm hover:backdrop-blur-md transition-all duration-700 absolute w-full h-full z-10 flex flex-col items-start justify-center px-6 py-2 rounded-md",children:[b.jsxs("h1",{className:"text-white text-3xl md:text-5xl font-bold",children:["Fresh & Healthy ",b.jsx("br",{}),b.jsx("span",{className:"text-primary-500",children:"Organic "}),"Food"]}),b.jsxs("div",{className:"flex flex-col items-start justify-between md:gap-y-4 gap-y-2 md:px-4 mf:py-2 px-2 py-1 border-l-4 mt-2 border-primary-600",children:[b.jsxs("p",{className:"text-white text-lg md:text-xl cursor-pointer",children:["Sale up to",b.jsx("span",{className:"bg-primary-500 text-white px-2 py-1 rounded-md mx-2 hover:px-3 hover:py-1.5 transition-all duration-300",children:"30% OFF"})]}),b.jsx("span",{className:"text-primary-800 text-sm md:text-xl bg-white bg-opacity-10 cursor-pointer",children:"Free shipping on all your order."})]}),b.jsx("button",{className:"md:px-10 px-4 font-semibold hover:bg-primary-700 hover:text-white transition-all duration-500 py-2 bg-white text-primary-600 ml-2 mt-4 rounded-lg text-sm md:text-lg",children:"Shop Now"})]})]}),b.jsxs("div",{className:"flex w-full h-1/4 md:h-full md:w-1/3 items-center md:flex-col justify-between gap-x-2 cursor-pointer",children:[b.jsxs("div",{className:"relative w-1/2 md:w-full md:h-[240px] h-24 rounded-md bg-amber-300",children:[b.jsx("div",{className:"absolute inset-0 w-full h-full z-0",children:b.jsx("img",{src:J1.homePage.img01,alt:"hero-image",className:"w-full h-full object-cover object-c rounded-md"})}),b.jsxs("div",{className:"bg-black bg-opacity-30 backdrop-blur-sm hover:backdrop-blur-md transition-all duration-700 absolute w-full h-full z-10 flex flex-col gap-y-1 items-center md:items-start justify-center px-6 py-2 rounded-md",children:[b.jsx("p",{className:"text-white text-xs md:text-lg font-semibold",children:"Summer Sale"}),b.jsx("p",{className:"text-white text-sm md:text-3xl font-bold border-b-4 border-b-primary-500",children:"75% OFF"}),b.jsx("span",{className:"md:text-sm text-gray-300 text-xs md:block hidden",children:"Only Fashion & clothes"}),b.jsxs("button",{className:"md:px-3 md:py-1.5 text-xs px-2 py-1 md:text-base bg-primary-400 rounded-lg text-white flex items-center justify-center gap-x-2 hover:scale-110 transition-all duration-300",children:[b.jsx("span",{children:"Shop Now"}),b.jsx(Yv,{className:"rotate-180"})]})]})]}),b.jsxs("div",{className:"md:w-full w-1/2 md:h-[240px] h-24 rounded-md bg-accent-400 relative",children:[b.jsx("div",{className:"absolute inset-0 w-full h-full z-0",children:b.jsx("img",{src:J1.homePage.img02,alt:"hero-image",className:"w-full h-full object-cover object-c rounded-md"})}),b.jsxs("div",{className:"bg-black bg-opacity-30 backdrop-blur-sm hover:backdrop-blur-md transition-all duration-700 absolute w-full h-full z-10 flex flex-col gap-y-0.5 md:gap-y-1 items-center justify-center px-6 py-2 rounded-md",children:[b.jsx("p",{className:"text-white md:text-lg text-xs font-semibold",children:"Best Deal"}),b.jsxs("p",{className:"text-white text-xs md:text-2xl lg:text-3xl font-bold border-b md:border-b-4 border-b-primary-500",children:["Special Products ",b.jsx("br",{})," Deal of the Month"]}),b.jsxs("button",{className:"md:px-3 md:py-1.5 px-2 py-1 text-xs md:text-lg rounded-lg text-white flex items-center justify-center gap-x-2 hover:scale-110 transition-all duration-300",children:[b.jsx("span",{children:"Shop Now"}),b.jsx(Yv,{className:"rotate-180"})]})]})]})]})]}),b.jsxs("div",{className:"",children:[b.jsxs("div",{className:"hidden md:flex items-center mx-auto w-[99%] px-2 py-1 my-4 rounded-lg bg-gray-50 shadow-xl xl:justify-around justify-between",children:[b.jsxs("div",{className:"flex items-center gap-x-3 lg:gap-x-4 justify-center h-20 px-2 py-1 group",children:[b.jsx("span",{className:"group-hover:scale-125 transition-all duration-500",children:b.jsx("svg",{width:"40",height:"28",viewBox:"0 0 40 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("path",{d:"M32.7021 20.3042C31.7247 20.3042 30.7962 20.687 30.0957 21.3793C29.3952 22.0798 29.0043 22.992 29.0043 23.9694C29.0043 24.9468 29.3871 25.8591 30.0957 26.5595C30.8043 27.2519 31.7247 27.6347 32.7021 27.6347C34.7058 27.6347 36.3348 25.9894 36.3348 23.9694C36.3348 21.9495 34.7058 20.3042 32.7021 20.3042ZM32.7021 26.0057C31.5781 26.0057 30.6333 25.0772 30.6333 23.9694C30.6333 22.8617 31.5781 21.9332 32.7021 21.9332C33.8098 21.9332 34.7058 22.8454 34.7058 23.9694C34.7058 25.0935 33.8098 26.0057 32.7021 26.0057ZM33.6469 8.09488C33.5003 7.95641 33.3048 7.88311 33.1012 7.88311H28.9228C28.4749 7.88311 28.1083 8.24964 28.1083 8.69761V15.3765C28.1083 15.8245 28.4749 16.191 28.9228 16.191H35.5528C36.0008 16.191 36.3673 15.8245 36.3673 15.3765V10.9049C36.3673 10.6768 36.2696 10.4569 36.0986 10.3022L33.6469 8.09488ZM34.7383 14.562H29.7373V9.50396H32.7835L34.7383 11.2633V14.562ZM12.8121 20.3042C11.8347 20.3042 10.9061 20.687 10.2057 21.3793C9.50519 22.0798 9.11423 22.992 9.11423 23.9694C9.11423 24.9468 9.49705 25.8591 10.2057 26.5595C10.9143 27.2519 11.8347 27.6347 12.8121 27.6347C14.8157 27.6347 16.4447 25.9894 16.4447 23.9694C16.4447 21.9495 14.8157 20.3042 12.8121 20.3042ZM12.8121 26.0057C11.688 26.0057 10.7432 25.0772 10.7432 23.9694C10.7432 22.8617 11.688 21.9332 12.8121 21.9332C13.9198 21.9332 14.8157 22.8454 14.8157 23.9694C14.8157 25.0935 13.9198 26.0057 12.8121 26.0057ZM7.37935 21.306H5.74221V19.1395C5.74221 18.6915 5.37569 18.325 4.92771 18.325C4.47974 18.325 4.11322 18.6915 4.11322 19.1395V22.1205C4.11322 22.5685 4.47974 22.935 4.92771 22.935H7.37935C7.82733 22.935 8.19385 22.5685 8.19385 22.1205C8.19385 21.6726 7.82733 21.306 7.37935 21.306ZM11.5089 16.867C11.5089 16.4191 11.1423 16.0525 10.6944 16.0525H0.814498C0.366524 16.0525 0 16.4191 0 16.867C0 17.315 0.366524 17.6815 0.814498 17.6815H10.6944C11.1423 17.6815 11.5089 17.3231 11.5089 16.867ZM2.46793 13.9267L12.3478 13.9837C12.7958 13.9837 13.1623 13.6253 13.1704 13.1773C13.1786 12.7212 12.8121 12.3547 12.3641 12.3547L2.48422 12.2977C2.47607 12.2977 2.47607 12.2977 2.47607 12.2977C2.0281 12.2977 1.66158 12.6561 1.66158 13.104C1.65343 13.5602 2.01996 13.9267 2.46793 13.9267ZM4.12951 10.2289H14.0094C14.4573 10.2289 14.8239 9.86234 14.8239 9.41437C14.8239 8.96639 14.4573 8.59987 14.0094 8.59987H4.12951C3.68153 8.59987 3.31501 8.96639 3.31501 9.41437C3.31501 9.86234 3.68153 10.2289 4.12951 10.2289ZM39.6986 9.12929L33.8668 4.29932C33.7202 4.17715 33.541 4.11199 33.3456 4.11199H26.4875V1.17979C26.4875 0.73182 26.121 0.365295 25.673 0.365295H4.92771C4.47974 0.365295 4.11322 0.73182 4.11322 1.17979V7.14192C4.11322 7.58989 4.47974 7.95642 4.92771 7.95642C5.37569 7.95642 5.74221 7.58989 5.74221 7.14192V1.99429H24.8666V21.306H18.1877C17.7398 21.306 17.3732 21.6726 17.3732 22.1205C17.3732 22.5685 17.7398 22.935 18.1877 22.935H28.1328C28.5807 22.935 28.9473 22.5685 28.9473 22.1205C28.9473 21.6726 28.5807 21.306 28.1328 21.306H26.4956V5.74098H33.0605L38.371 10.1393L38.314 21.2897H37.4669C37.0189 21.2897 36.6524 21.6563 36.6524 22.1042C36.6524 22.5522 37.0189 22.9187 37.4669 22.9187H39.1203C39.5683 22.9187 39.9348 22.5604 39.9348 22.1124L40 9.7646C39.9919 9.52025 39.886 9.28405 39.6986 9.12929Z",fill:"#445bee"})})}),b.jsxs("h3",{className:"flex flex-col justify-center gap-y-2 h-full",children:[b.jsx("span",{className:"font-bold",children:"Free Shipping"}),b.jsx("span",{className:"text-xs line-clamp-1",children:"Free shipping on all your order"})]})]}),b.jsxs("div",{className:"flex items-center gap-x-3 lg:gap-x-4 justify-center h-20 px-2 py-1 group",children:[b.jsx("span",{className:"group-hover:scale-125 transition-all duration-500",children:b.jsxs("svg",{width:"41",height:"40",viewBox:"0 0 41 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[b.jsx("g",{clipPath:"url(#clip0_44_853)",children:b.jsx("path",{d:"M34.0182 15.2101V13.6723C34.0182 9.9916 32.7157 6.57143 30.3543 4.03361C27.9342 1.42857 24.6064 0 20.9762 0H19.7073C16.077 0 12.7493 1.42857 10.3291 4.03361C7.96778 6.57143 6.66526 9.9916 6.66526 13.6723V15.2101C3.79971 15.4034 1.5224 17.7899 1.5224 20.7059V23.1092C1.5224 26.1429 3.99299 28.6134 7.0266 28.6134H10.1274C10.6821 28.6134 11.1358 28.1597 11.1358 27.605V16.2017C11.1358 15.6471 10.6821 15.1933 10.1274 15.1933H8.68206V13.6723C8.68206 7.02521 13.4216 2.01681 19.6989 2.01681H20.9678C27.2535 2.01681 31.9846 7.02521 31.9846 13.6723V15.1933H30.5392C29.9846 15.1933 29.5308 15.6471 29.5308 16.2017V27.5966C29.5308 28.1513 29.9846 28.605 30.5392 28.605H31.951C31.5392 33.8655 27.9174 35.084 26.2367 35.3613C25.7745 33.9412 24.4384 32.916 22.8669 32.916H20.3459C18.3964 32.916 16.8081 34.5042 16.8081 36.4538C16.8081 38.4034 18.3964 40 20.3459 40H22.8753C24.5056 40 25.8753 38.8908 26.2871 37.395C27.1106 37.2773 28.4132 36.9832 29.7073 36.2269C31.5308 35.1597 33.6905 32.9832 33.9762 28.5966C36.8585 28.4202 39.1443 26.0252 39.1443 23.1008V20.6975C39.1527 17.7899 36.8838 15.395 34.0182 15.2101ZM9.13585 26.5882H7.04341C5.11904 26.5882 3.55601 25.0252 3.55601 23.1008V20.6975C3.55601 18.7731 5.11904 17.2101 7.04341 17.2101H9.13585V26.5882ZM22.8753 37.9832H20.3459C19.5056 37.9832 18.8249 37.3025 18.8249 36.4622C18.8249 35.6218 19.5056 34.9412 20.3459 34.9412H22.8753C23.7157 34.9412 24.3964 35.6218 24.3964 36.4622C24.3964 37.3025 23.7157 37.9832 22.8753 37.9832ZM37.1359 23.1008C37.1359 25.0252 35.5728 26.5882 33.6485 26.5882H31.556V17.2101H33.6485C35.5728 17.2101 37.1359 18.7731 37.1359 20.6975V23.1008Z",fill:"#445bee"})}),b.jsx("defs",{children:b.jsx("clipPath",{id:"clip0_44_853",children:b.jsx("rect",{width:"40",height:"40",fill:"white",transform:"translate(0.333344)"})})})]})}),b.jsxs("h3",{className:"flex flex-col justify-center gap-y-2 h-full",children:[b.jsx("span",{className:"font-bold",children:"Free Shipping"}),b.jsx("span",{className:"text-xs line-clamp-1",children:"Free shipping on all your order"})]})]}),b.jsxs("div",{className:"flex items-center gap-x-3 lg:gap-x-4 justify-center h-20 px-2 py-1 group",children:[b.jsx("span",{className:"group-hover:scale-125 transition-all duration-500",children:b.jsxs("svg",{width:"41",height:"40",viewBox:"0 0 41 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[b.jsxs("g",{clipPath:"url(#clip0_44_884)",children:[b.jsx("path",{d:"M36.6468 34.6678L34.345 8.72697C34.3036 8.21362 33.873 7.82447 33.3514 7.82447H28.4994C28.4911 3.51066 24.9805 0 20.6666 0C16.3528 0 12.8422 3.51066 12.8339 7.82447H7.9819C7.46855 7.82447 7.03799 8.21362 6.98831 8.72697L4.68651 34.6678C4.68651 34.7009 4.68651 34.7257 4.68651 34.7589C4.68651 37.6485 7.34435 40 10.6066 40H30.7267C33.9889 40 36.6468 37.6485 36.6468 34.7589C36.6468 34.7257 36.6468 34.7009 36.6468 34.6678ZM20.6666 1.98717C23.8875 1.98717 26.5039 4.6036 26.5122 7.82447H14.8211C14.8293 4.6036 17.4458 1.98717 20.6666 1.98717ZM30.7267 38.0046H10.6066C8.45385 38.0046 6.69852 36.5721 6.67368 34.792L8.89268 9.81163H12.8339V13.2975C12.8339 13.8439 13.281 14.291 13.8275 14.291C14.3739 14.291 14.8211 13.8439 14.8211 13.2975V9.81163H26.5122V13.2975C26.5122 13.8439 26.9593 14.291 27.5058 14.291C28.0523 14.291 28.4994 13.8439 28.4994 13.2975V9.81163H32.4406L34.6596 34.8002C34.6348 36.5721 32.8794 38.0046 30.7267 38.0046Z",fill:"#445bee"}),b.jsx("path",{d:"M24.7982 20.6831L18.9361 26.5452L16.5432 24.1524C16.1541 23.7632 15.5248 23.7632 15.1357 24.1524C14.7465 24.5415 14.7465 25.1708 15.1357 25.5599L18.2323 28.6566C18.4228 28.8471 18.6794 28.9464 18.9361 28.9464C19.1928 28.9464 19.4412 28.8471 19.6399 28.6566L26.2058 22.0907C26.595 21.7015 26.595 21.0723 26.2058 20.6831C25.8167 20.3022 25.1874 20.3022 24.7982 20.6831Z",fill:"#445bee"})]}),b.jsx("defs",{children:b.jsx("clipPath",{id:"clip0_44_884",children:b.jsx("rect",{width:"40",height:"40",fill:"white",transform:"translate(0.666687)"})})})]})}),b.jsxs("h3",{className:"flex flex-col justify-center gap-y-2 h-full",children:[b.jsx("span",{className:"font-bold",children:"Free Shipping"}),b.jsx("span",{className:"text-xs line-clamp-1",children:"Free shipping on all your order"})]})]}),b.jsxs("div",{className:"flex items-center gap-x-3 lg:gap-x-4 justify-center h-20 px-2 py-1 group",children:[b.jsx("span",{className:"group-hover:scale-125 transition-all duration-500",children:b.jsx("svg",{width:"38",height:"40",viewBox:"0 0 38 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("path",{d:"M37.3959 9.43014C37.3959 9.27818 37.3621 9.12621 37.2946 8.98269C37.1595 8.69565 36.8978 8.50148 36.6108 8.44238L19.4136 0.101309C19.135 -0.0337695 18.8058 -0.0337695 18.5272 0.101309L1.16121 8.51836C0.823514 8.67877 0.604012 9.01646 0.587128 9.39637V9.40481C0.587128 9.41325 0.587128 9.4217 0.587128 9.43858V30.5614C0.587128 30.9498 0.80663 31.3043 1.16121 31.4732L18.5272 39.8903C18.5356 39.8903 18.5356 39.8903 18.5441 39.8987C18.5694 39.9071 18.5947 39.9156 18.6201 39.9325C18.6285 39.9325 18.6369 39.9409 18.6538 39.9409C18.6791 39.9493 18.7045 39.9578 18.7298 39.9662C18.7382 39.9662 18.7467 39.9747 18.7551 39.9747C18.7805 39.9831 18.8142 39.9831 18.8396 39.9916C18.848 39.9916 18.8564 39.9916 18.8649 39.9916C18.8987 39.9916 18.9409 40 18.9746 40C19.0084 40 19.0506 40 19.0844 39.9916C19.0928 39.9916 19.1013 39.9916 19.1097 39.9916C19.135 39.9916 19.1688 39.9831 19.1941 39.9747C19.2026 39.9747 19.211 39.9662 19.2195 39.9662C19.2448 39.9578 19.2701 39.9493 19.2954 39.9409C19.3039 39.9409 19.3123 39.9325 19.3292 39.9325C19.3545 39.924 19.3799 39.9156 19.4052 39.8987C19.4136 39.8987 19.4136 39.8987 19.4221 39.8903L36.8387 31.4479C37.1848 31.279 37.4128 30.9244 37.4128 30.5361V9.45547C37.3959 9.44702 37.3959 9.43858 37.3959 9.43014ZM18.9662 2.13592L34.0274 9.43858L28.4808 12.1317L13.4195 4.82904L18.9662 2.13592ZM18.9662 16.7412L3.90498 9.43858L11.0979 5.95188L26.1591 13.2545L18.9662 16.7412ZM2.6133 11.068L17.9531 18.5057V37.3575L2.6133 29.9198V11.068ZM19.9793 37.3575V18.5057L27.1806 15.0106V19.9409C27.1806 20.4981 27.6365 20.954 28.1937 20.954C28.7509 20.954 29.2068 20.4981 29.2068 19.9409V14.0228L35.3697 11.0342V29.886L19.9793 37.3575Z",fill:"#445bee"})})}),b.jsxs("h3",{className:"flex flex-col justify-center gap-y-2 h-full",children:[b.jsx("span",{className:"font-bold",children:"Free Shipping"}),b.jsx("span",{className:"text-xs line-clamp-1",children:"Free shipping on all your order"})]})]})]}),b.jsx(zF,{title:"Deal Of The Day"})]})]});function fI(n){return cn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M21.822 7.431A1 1 0 0 0 21 7H7.333L6.179 4.23A1.994 1.994 0 0 0 4.333 3H2v2h2.333l4.744 11.385A1 1 0 0 0 10 17h8c.417 0 .79-.259.937-.648l3-8a1 1 0 0 0-.115-.921zM17.307 15h-6.64l-2.5-6h11.39l-2.25 6z"},child:[]},{tag:"circle",attr:{cx:"10.5",cy:"19.5",r:"1.5"},child:[]},{tag:"circle",attr:{cx:"17.5",cy:"19.5",r:"1.5"},child:[]}]})(n)}function rJ(n){return cn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M16.293 9.293 12 13.586 7.707 9.293l-1.414 1.414L12 16.414l5.707-5.707z"},child:[]}]})(n)}function HF(n){return cn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 4.595a5.904 5.904 0 0 0-3.996-1.558 5.942 5.942 0 0 0-4.213 1.758c-2.353 2.363-2.352 6.059.002 8.412l7.332 7.332c.17.299.498.492.875.492a.99.99 0 0 0 .792-.409l7.415-7.415c2.354-2.354 2.354-6.049-.002-8.416a5.938 5.938 0 0 0-4.209-1.754A5.906 5.906 0 0 0 12 4.595zm6.791 1.61c1.563 1.571 1.564 4.025.002 5.588L12 18.586l-6.793-6.793c-1.562-1.563-1.561-4.017-.002-5.584.76-.756 1.754-1.172 2.799-1.172s2.035.416 2.789 1.17l.5.5a.999.999 0 0 0 1.414 0l.5-.5c1.512-1.509 4.074-1.505 5.584-.002z"},child:[]}]})(n)}function iJ(n){return cn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M4 6h16v2H4zm0 5h16v2H4zm0 5h16v2H4z"},child:[]}]})(n)}function dI(n){return cn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M10 18a7.952 7.952 0 0 0 4.897-1.688l4.396 4.396 1.414-1.414-4.396-4.396A7.952 7.952 0 0 0 18 10c0-4.411-3.589-8-8-8s-8 3.589-8 8 3.589 8 8 8zm0-14c3.309 0 6 2.691 6 6s-2.691 6-6 6-6-2.691-6-6 2.691-6 6-6z"},child:[]}]})(n)}var VF={},GF={exports:{}},sJ="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",oJ=sJ,aJ=oJ;function jF(){}function WF(){}WF.resetWarningCache=jF;var lJ=function(){function n(r,i,s,o,a,l){if(l!==aJ){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:WF,resetWarningCache:jF};return t.PropTypes=t,t};GF.exports=lJ();var cJ=GF.exports;Object.defineProperty(VF,"__esModule",{value:!0});var pI=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},uJ=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),XF=re,K1=JF(XF),hJ=cJ,bo=JF(hJ);function JF(n){return n&&n.__esModule?n:{default:n}}function fJ(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function dJ(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function pJ(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var mJ={overflow:"hidden",position:"relative"},gJ={position:"relative",overflow:"hidden",cursor:"pointer",display:"block",float:"left"},vJ=function(e,t){return`
    .react-stars-`+t+`:before {
      position: absolute;
      overflow: hidden;
      display: block;
      z-index: 1;
      top: 0; left: 0;
      width: 50%;
      content: attr(data-forhalf);
      color: `+e+`;
  }`},jT=function(n){pJ(e,n);function e(t){fJ(this,e);var r=dJ(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return t=pI({},t),r.state={uniqueness:(Math.random()+"").replace(".",""),value:t.value||0,stars:[],halfStar:{at:Math.floor(t.value),hidden:t.half&&t.value%1<.5}},r.state.config={count:t.count,size:t.size,char:t.char,color1:t.color1,color2:t.color2,half:t.half,edit:t.edit},r}return uJ(e,[{key:"componentDidMount",value:function(){this.setState({stars:this.getStars(this.state.value)})}},{key:"componentWillReceiveProps",value:function(r){this.setState({stars:this.getStars(r.value),value:r.value,halfStar:{at:Math.floor(r.value),hidden:this.state.config.half&&r.value%1<.5}})}},{key:"isDecimal",value:function(r){return r%1!==0}},{key:"getRate",value:function(){var r=void 0;return this.state.config.half?r=Math.floor(this.state.value):r=Math.round(this.state.value),r}},{key:"getStars",value:function(r){typeof r>"u"&&(r=this.getRate());for(var i=[],s=0;s<this.state.config.count;s++)i.push({active:s<=r-1});return i}},{key:"mouseOver",value:function(r){var i=this.state,s=i.config,o=i.halfStar;if(s.edit){var a=Number(r.target.getAttribute("data-index"));if(s.half){var l=this.moreThanHalf(r,s.size);o.hidden=l,l&&(a=a+1),o.at=a}else a=a+1;this.setState({stars:this.getStars(a)})}}},{key:"moreThanHalf",value:function(r,i){var s=r.target,o=r.clientX-s.getBoundingClientRect().left;return o=Math.round(Math.abs(o)),o>i/2}},{key:"mouseLeave",value:function(){var r=this.state,i=r.value,s=r.halfStar,o=r.config;o.edit&&(o.half&&(s.hidden=!this.isDecimal(i),s.at=Math.floor(this.state.value)),this.setState({stars:this.getStars()}))}},{key:"clicked",value:function(r){var i=this.state,s=i.config,o=i.halfStar;if(s.edit){var a=Number(r.target.getAttribute("data-index")),l=void 0;if(s.half){var c=this.moreThanHalf(r,s.size);o.hidden=c,c&&(a=a+1),l=c?a:a+.5,o.at=a}else l=a=a+1;this.setState({value:l,stars:this.getStars(a)}),this.props.onChange(l)}}},{key:"renderHalfStarStyleElement",value:function(){var r=this.state,i=r.config,s=r.uniqueness;return K1.default.createElement("style",{dangerouslySetInnerHTML:{__html:vJ(i.color2,s)}})}},{key:"renderStars",value:function(){var r=this,i=this.state,s=i.halfStar,o=i.stars,a=i.uniqueness,l=i.config,c=l.color1,h=l.color2,d=l.size,p=l.char,m=l.half,v=l.edit;return o.map(function(A,_){var g="";m&&!s.hidden&&s.at===_&&(g="react-stars-"+a);var x=pI({},gJ,{color:A.active?h:c,cursor:v?"pointer":"default",fontSize:d+"px"});return K1.default.createElement("span",{className:g,style:x,key:_,"data-index":_,"data-forhalf":p,onMouseOver:r.mouseOver.bind(r),onMouseMove:r.mouseOver.bind(r),onMouseLeave:r.mouseLeave.bind(r),onClick:r.clicked.bind(r)},p)})}},{key:"render",value:function(){var r=this.props.className;return K1.default.createElement("div",{className:r,style:mJ},this.state.config.half?this.renderHalfStarStyleElement():"",this.renderStars())}}]),e}(XF.Component);jT.propTypes={className:bo.default.string,edit:bo.default.bool,half:bo.default.bool,value:bo.default.number,count:bo.default.number,char:bo.default.string,size:bo.default.number,color1:bo.default.string,color2:bo.default.string};jT.defaultProps={edit:!0,half:!0,value:0,count:5,char:"★",size:15,color1:"gray",color2:"#ffd700",onChange:function(){}};var u_=VF.default=jT;function yJ(n){const{Thumbnail:e,Name:t,Price:r,Stars:i}=n;return b.jsxs("div",{className:"flex flex-col items-center justify-between hover:-translate-y-0.5 duration-500 h-72 md:h-80 md:w-56 w-44 bg-gray-50 rounded-lg hover:shadow-md transition-all",children:[b.jsxs("div",{className:"w-full h-3/5 relative",children:[b.jsx("img",{src:e,alt:t,className:"rounded-lg h-full w-full object-cover"}),b.jsxs("button",{className:"absolute top-2 right-2 text-xl md:text-2xl bg-gray-50/60 p-1.5 hover:scale-110 transition-all duration-300 rounded-full group",children:[b.jsx(HF,{className:"group-hover:hidden"}),b.jsx(GT,{className:"hidden group-hover:block group-hover:text-red-600 transition-all"})]})]}),b.jsxs("div",{className:"flex flex-col justify-between px-3 py-1.5 md:px-4 md:py-2 h-2/5 w-full",children:[b.jsx("h2",{className:"font-bold line-clamp-2 md:mt-1",children:t}),b.jsxs("div",{className:"w-full flex items-center justify-between py-1",children:[b.jsx("div",{className:"",children:b.jsx(u_,{count:5,value:kF(i),size:18,color2:"#ffd700",edit:!1})}),b.jsx("p",{className:"font-semibold ",children:b.jsxs("span",{children:["$",r]})})]})]})]})}function _J(){return b.jsxs("div",{className:"flex flex-col items-center justify-between hover:-translate-y-0.5 duration-500 h-72 md:h-80 md:w-56 w-44 bg-gray-50 rounded-lg hover:shadow-md transition-all",children:[b.jsx("div",{className:"w-full h-3/5 relative",children:b.jsx("div",{className:"rounded-lg h-full w-full object-cover bg-gray-300"})}),b.jsxs("div",{className:"flex flex-col justify-between px-3 py-1.5 md:px-4 md:py-2 h-2/5 w-full",children:[b.jsx("h2",{className:"font-bold line-clamp-2 bg-gray-300 mt-2.5 w-3/5 h-4 rounded-full",children:" "}),b.jsxs("div",{className:"w-full flex items-center justify-between py-1",children:[b.jsx("div",{className:"",children:b.jsx(u_,{count:5,size:18,color2:"gray",edit:!1})}),b.jsx("p",{className:"font-semibold bg-gray-300 w-11 h-4 rounded-full",children:b.jsx("span",{children:" "})})]})]})]})}function xJ(){return b.jsxs("div",{className:"mx-auto 2xl:max-w-screen-2xl my-4 md:my-6 relative animate-pulse",children:[b.jsx("h2",{className:"px-2 text-2xl font-bold my-1 md:my-2 md:text-3xl",children:"Trend Products"}),b.jsxs("div",{className:"w-full overflow-auto scroll-smooth styled-scroll-bar",children:[b.jsx("div",{className:"h-72 bg-gradient-to-l from-gray-50/0 transition-all duration-500 to-gray-50 w-16 md:w-24 absolute z-10 left-0 top-9 flex items-center justify-start opacity-50",children:b.jsx("button",{className:"text-lg md:text-2xl p-2 bg-gray-100 shadow-2xl rounded-md mx-2",children:b.jsx(Yv,{})})}),b.jsx("div",{className:"inline-flex items-center gap-x-8 px-4 py-2",children:XX(10).map((n,e)=>b.jsx(_J,{},e))}),b.jsx("div",{className:"h-72 bg-gradient-to-r from-gray-50/0 transition-all duration-500 to-gray-50 w-16 md:w-24 absolute z-10 right-0 top-8 flex items-center justify-end opacity-50",children:b.jsx("button",{className:"text-lg md:text-2xl p-2 bg-gray-100 shadow-2xl rounded-md mx-2",children:b.jsx(Ns,{})})})]})]})}function AJ({isLoading:n,products:e,filterObject:t}){const r=VT(e,t),i=re.useRef();if(n)return b.jsx(xJ,{});if(!n&&e.length)return b.jsxs("div",{className:"mx-auto 2xl:max-w-screen-2xl my-4 md:my-10 relative",children:[b.jsxs("div",{className:"w-full px-2 my-1 md:px-4 flex items-center justify-between",children:[b.jsx("h2",{className:"text-2xl font-bold  md:text-3xl",children:"Trend Products"}),b.jsxs("span",{className:"flex items-center gap-x-1 md:gap-x-1.5 md:text-lg text-sm text-gray-500 hover:text-accent-300 transition-all cursor-pointer",children:["View All ",b.jsx(Ns,{className:"text-xs md:text-base"})]})]}),b.jsxs("div",{ref:i,className:"w-full overflow-auto scroll-smooth styled-scroll-bar md:px-4",children:[b.jsx("div",{className:"h-72 bg-gradient-to-l from-gray-50/0 transition-all duration-500 to-gray-50 w-16 md:w-24 absolute z-10 left-0 top-9 flex items-center justify-start opacity-50 hover:opacity-100",children:b.jsx("button",{onClick:()=>{i.current.scrollLeft-=200},className:"text-lg md:text-2xl p-2 bg-gray-100 shadow-2xl rounded-md mx-2",children:b.jsx(Yv,{})})}),b.jsx("div",{className:"inline-flex items-center gap-x-8 px-4 py-2",children:r.map(s=>b.jsx(yJ,{...s},s.id))}),b.jsx("div",{className:"h-72 bg-gradient-to-r from-gray-50/0 transition-all duration-500 to-gray-50 w-16 md:w-24 absolute z-10 right-0 top-8 flex items-center justify-end opacity-50 hover:opacity-100",children:b.jsx("button",{onClick:()=>{i.current.scrollLeft+=200},className:"text-lg md:text-2xl p-2 bg-gray-100 shadow-2xl rounded-md mx-2",children:b.jsx(Ns,{})})})]})]})}function SJ(){return b.jsxs("div",{className:"mx-auto 2xl:max-w-screen-2xl mt-6 bg-gray-50 py-4 lg:py-6 lg:px-4",children:[b.jsx("h2",{className:"px-2 text-2xl font-bold my-1 md:my-2 md:text-3xl",children:"SPRING/SUMMER 2024"}),b.jsxs("div",{id:"wrapper",className:"flex flex-col gap-y-3 lg:flex-row lg:gap-x-3 items-center px-1 py-0.5 lg:px-4 lg:py-2",children:[b.jsx(Dg,{}),b.jsxs("div",{className:"flex items-center gap-x-3 w-full",children:[b.jsx(Dg,{}),b.jsx(Dg,{})]}),b.jsx(Dg,{})]})]})}const Dg=()=>b.jsxs("div",{className:"w-full h-72 bg-gray-300/35 rounded-xl animate-pulse",children:[b.jsx("div",{className:"w-full h-3/5 relative",children:b.jsx("div",{className:"w-full h-full rounded-t-md object-cover bg-gray-400"})}),b.jsxs("div",{className:"flex flex-col items-start justify-evenly h-2/5 px-4 py-2",children:[b.jsx("span",{className:"my-0.5 w-1/4 p-0.5 rounded-full bg-gray-400"}),b.jsx("h2",{className:"w-3/4 p-0.5 rounded-full bg-gray-400"}),b.jsxs("p",{className:"mt-1 font-bold flex items-center w-full justify-between",children:[b.jsx("span",{className:"w-1/4 rounded-full h-2 bg-gray-400"}),b.jsx("div",{children:b.jsx(u_,{count:5,size:18,color2:"red",edit:!1})})]})]})]});function EJ({products:n,isLoading:e}){const t=VT(n,{collections:["Summer"]});if(e)return b.jsx(SJ,{});if(t.length&&!e)return b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"mx-auto 2xl:max-w-screen-2xl mt-6 bg-gray-100 py-4 lg:py-6",children:[b.jsx("h2",{className:"px-2 md:px-3 text-2xl font-bold my-1 md:text-3xl cursor-pointer hover:text-accent-300 w-fit transition-all",children:"SPRING/SUMMER 2024"}),b.jsxs("div",{id:"wrapper",className:"flex flex-col gap-y-3 lg:flex-row lg:gap-x-3 items-center px-2 py-1 lg:px-4 lg:py-2 lg:h-[450px]",children:[b.jsx(Bg,{product:t[0]}),b.jsxs("div",{className:"flex items-center gap-x-3 w-full",children:[b.jsx(Bg,{product:t[1],minimal:!0}),b.jsx(Bg,{product:t[2],minimal:!0})]}),b.jsx(Bg,{product:t[3]})]})]}),b.jsx(zF,{title:"Trending Products"})]})}const Bg=({product:n,minimal:e})=>b.jsxs("div",{className:"w-full h-80 lg:h-96 bg-gray-300/35 rounded-xl cursor-pointer",children:[b.jsxs("div",{className:"w-full h-3/5 relative",children:[b.jsx("img",{src:n.Thumbnail,alt:n.Name,className:"w-full h-full rounded-t-md object-cover"}),b.jsxs("button",{className:"absolute top-2 right-2 text-xl md:text-2xl bg-gray-50/60 p-1.5 hover:scale-110 transition-all duration-300 rounded-full group",children:[b.jsx(HF,{className:"group-hover:hidden"}),b.jsx(GT,{className:"hidden group-hover:block group-hover:text-red-600 transition-all"})]})]}),b.jsxs("div",{className:"flex flex-col items-start h-2/5 justify-between px-4 py-2",children:[b.jsxs("div",{children:[b.jsx("span",{className:"text-xs my-0.5",children:n.Tags[0]}),b.jsx("h2",{className:"font-bold",children:n.Name}),b.jsxs("p",{className:`${e&&"hidden"} flex items-center justify-center gap-x-2 mt-2`,children:[n.Options.Color.map((t,r)=>b.jsx("span",{style:{backgroundColor:t},className:"p-2 rounded-full border border-gray-400"},r)),b.jsx("span",{className:"text-sm ml-0.5",children:"+5 more ..."})]})]}),b.jsxs("p",{className:"mt-1 font-bold flex items-center w-full justify-between",children:[b.jsxs("span",{children:["$",n.Price]}),b.jsx("div",{children:b.jsx(u_,{count:5,value:kF(n.Stars),size:e?12:18,color2:"#ffd700",edit:!1})})]})]})]}),ri={menTshirts:{imgUrl:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2Fproduct%20gallery%20banner%20(1).jpg?alt=media&token=99be3f20-a87c-4023-9c78-6ed0767cd21e",title:"T-Shirt for men's",offer:"30%"},menConverse:{imgUrl:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2Fproduct%20gallery%20banner%20(5).jpg?alt=media&token=90803c66-3bef-4059-ad6e-e67923837011",title:"Men's Converse sneakers",offer:"40%"},sweaterWomen:{imgUrl:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2Fproduct%20gallery%20banner%20(4).jpg?alt=media&token=92d2cf69-e1b8-4f0c-86f3-3241d4083e40",title:"Sweater For Women",offer:"30-60%"},womenTshirts:{imgUrl:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2Fproduct%20gallery%20banner%20(3).jpg?alt=media&token=92fb3974-60c9-4cf2-a81d-770e9137d24f",title:"T-shirt For Womens",offer:"40-50%"},fashionBags:{imgUrl:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2Fproduct%20gallery%20banner%20(2).jpg?alt=media&token=e6298847-e5b3-445d-8052-c710dfbd8407",title:"Fashoinable Bag Women",offer:"20%"}};function wJ(){return b.jsxs("div",{className:"mx-auto 2xl:max-w-screen-2xl mt-4 md:mt-10",children:[b.jsxs("div",{className:"w-full px-2 my-1 md:my-4 md:px-4 flex items-center justify-between",children:[b.jsx("h2",{className:"text-2xl font-bold md:text-3xl",children:"Top Products"}),b.jsxs("span",{className:"flex items-center gap-x-1 md:gap-x-1.5 md:text-lg text-sm text-gray-500 hover:text-accent-300 transition-all cursor-pointer",children:["View All ",b.jsx(Ns,{className:"text-xs md:text-base"})]})]}),b.jsxs("div",{id:"wrapper",className:"flex flex-col md:flex-row w-full items-center gap-y-3 px-2 py-1 gap-x-4 md:h-[600px] lg:h-[700px]",children:[b.jsxs("div",{className:"flex md:flex-col w-full md:h-full items-center justify-between gap-x-2",children:[b.jsxs("div",{className:"w-1/2 md:w-full h-48 md:h-1/2 rounded-md group",children:[b.jsxs("div",{className:"h-3/4 relative",children:[b.jsx("img",{src:ri.menTshirts.imgUrl,alt:"men t-shirt pic",className:"w-full h-full object-cover rounded-md"}),b.jsx("div",{className:"inset-0 bg-gray-300/70 absolute rounded invisible h-0 group-hover:h-full group-hover:visible ease-linear duration-500 flex items-center justify-center",children:b.jsx("button",{className:"px-2 py-1 bg-white/65 text-black font-bold border-2 border-gray-300 rounded-md text-sm hidden group-hover:block md:text-lg hover:scale-110 transition-all",children:"view more ..."})})]}),b.jsxs("p",{className:"flex flex-col items-center px-2 py-1 ",children:[b.jsx("span",{className:"font-bold text-sm line-clamp-1 text-center md:text-lg",children:ri.menTshirts.title}),b.jsxs("span",{className:"px-2 py-1 bg-red-400 rounded-md text-white text-xs md:text-base",children:["Up to ",ri.menTshirts.offer," OFF"]})]})]}),b.jsxs("div",{className:"w-1/2 md:w-full h-48 md:h-1/2  group",children:[b.jsxs("div",{className:"h-3/4 relative",children:[b.jsx("img",{src:ri.menConverse.imgUrl,alt:"men t-shirt pic",className:"w-full h-full object-cover rounded-md"}),b.jsx("div",{className:"inset-0 bg-gray-300/70 absolute rounded invisible h-0 group-hover:h-full group-hover:visible ease-linear duration-500 flex items-center justify-center",children:b.jsx("button",{className:"px-2 py-1 bg-white/65 text-black font-bold border-2 border-gray-300 rounded-md text-sm hidden group-hover:block md:text-lg hover:scale-110 transition-all",children:"view more ..."})})]}),b.jsxs("p",{className:"flex flex-col items-center px-2 py-1 ",children:[b.jsx("span",{className:"font-bold text-sm line-clamp-1 text-center md:text-lg",children:ri.menConverse.title}),b.jsxs("span",{className:"px-2 py-1 bg-red-400 rounded-md text-white text-xs md:text-base",children:["Up to ",ri.menConverse.offer," OFF"]})]})]})]}),b.jsxs("div",{className:"w-full h-72 md:h-full group",children:[b.jsxs("div",{className:"h-3/4 md:h-5/6 relative",children:[b.jsx("img",{src:ri.sweaterWomen.imgUrl,alt:"men t-shirt pic",className:"w-full h-full object-cover rounded-md"}),b.jsx("div",{className:"inset-0 bg-gray-300/70 absolute rounded invisible h-0 group-hover:h-full group-hover:visible ease-linear duration-500 flex items-center justify-center",children:b.jsx("button",{className:"px-2 py-1 bg-white/65 text-black font-bold border-2 border-gray-300 rounded-md text-sm hidden group-hover:block md:text-lg hover:scale-110 transition-all",children:"view more ..."})})]}),b.jsxs("p",{className:"flex flex-col h-1/4 md:h-1/6 items-center justify-center px-2 py-1 md:px-4 md:py-2",children:[b.jsx("span",{className:"font-bold text-sm line-clamp-1 text-center md:text-lg",children:ri.sweaterWomen.title}),b.jsxs("span",{className:"px-2 py-1 bg-red-400 rounded-md text-white text-xs md:text-base",children:["Up to ",ri.sweaterWomen.offer," OFF"]})]})]}),b.jsxs("div",{className:"flex md:flex-col w-full md:h-full items-center justify-between gap-x-2",children:[b.jsxs("div",{className:"w-1/2 md:w-full h-48 md:h-1/2 group",children:[b.jsxs("div",{className:"h-3/4 relative",children:[b.jsx("img",{src:ri.womenTshirts.imgUrl,alt:"men t-shirt pic",className:"w-full h-full object-cover rounded-md"}),b.jsx("div",{className:"inset-0 bg-gray-300/70 absolute rounded invisible h-0 group-hover:h-full group-hover:visible ease-linear duration-500 flex items-center justify-center",children:b.jsx("button",{className:"px-2 py-1 bg-white/65 text-black font-bold border-2 border-gray-300 rounded-md text-sm hidden group-hover:block md:text-lg hover:scale-110 transition-all",children:"view more ..."})})]}),b.jsxs("p",{className:"flex flex-col items-center px-2 py-1 ",children:[b.jsx("span",{className:"font-bold text-sm line-clamp-1 text-center md:text-lg",children:ri.womenTshirts.title}),b.jsxs("span",{className:"px-2 py-1 bg-red-400 rounded-md text-white text-xs md:text-base",children:["Up to ",ri.womenTshirts.offer," OFF"]})]})]}),b.jsxs("div",{className:"w-1/2 md:w-full h-48 md:h-1/2 group",children:[b.jsxs("div",{className:"h-3/4 relative",children:[b.jsx("img",{src:ri.fashionBags.imgUrl,alt:"men t-shirt pic",className:"w-full h-full object-cover rounded-md"}),b.jsx("div",{className:"inset-0 bg-gray-300/70 absolute rounded invisible h-0 group-hover:h-full group-hover:visible ease-linear duration-500 flex items-center justify-center",children:b.jsx("button",{className:"px-2 py-1 bg-white/65 text-black font-bold border-2 border-gray-300 rounded-md text-sm hidden group-hover:block md:text-lg hover:scale-110 transition-all",children:"view more ..."})})]}),b.jsxs("p",{className:"flex flex-col items-center px-2 py-1 ",children:[b.jsx("span",{className:"font-bold text-sm line-clamp-1 text-center md:text-lg",children:ri.fashionBags.title}),b.jsxs("span",{className:"px-2 py-1 bg-red-400 rounded-md text-white text-xs md:text-base",children:["Up to ",ri.fashionBags.offer," OFF"]})]})]})]})]})]})}var KF={exports:{}};(function(n,e){(function(r,i){n.exports=i(re)})(Yf,t=>(()=>{var r={"./node_modules/css-mediaquery/index.js":(a,l)=>{l.match=v,l.parse=A;var c=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,h=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,d=/^(?:(min|max)-)?(.+)/,p=/(em|rem|px|cm|mm|in|pt|pc)?$/,m=/(dpi|dpcm|dppx)?$/;function v(S,w){return A(S).some(function(R){var C=R.inverse,I=R.type==="all"||w.type===R.type;if(I&&C||!(I||C))return!1;var D=R.expressions.every(function(N){var T=N.feature,L=N.modifier,H=N.value,J=w[T];if(!J)return!1;switch(T){case"orientation":case"scan":return J.toLowerCase()===H.toLowerCase();case"width":case"height":case"device-width":case"device-height":H=x(H),J=x(J);break;case"resolution":H=g(H),J=g(J);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":H=_(H),J=_(J);break;case"grid":case"color":case"color-index":case"monochrome":H=parseInt(H,10)||1,J=parseInt(J,10)||0;break}switch(L){case"min":return J>=H;case"max":return J<=H;default:return J===H}});return D&&!C||!D&&C})}function A(S){return S.split(",").map(function(w){w=w.trim();var R=w.match(c),C=R[1],I=R[2],D=R[3]||"",N={};return N.inverse=!!C&&C.toLowerCase()==="not",N.type=I?I.toLowerCase():"all",D=D.match(/\([^\)]+\)/g)||[],N.expressions=D.map(function(T){var L=T.match(h),H=L[1].toLowerCase().match(d);return{modifier:H[1],feature:H[2],value:L[2]}}),N})}function _(S){var w=Number(S),R;return w||(R=S.match(/^(\d+)\s*\/\s*(\d+)$/),w=R[1]/R[2]),w}function g(S){var w=parseFloat(S),R=String(S).match(m)[1];switch(R){case"dpcm":return w/2.54;case"dppx":return w*96;default:return w}}function x(S){var w=parseFloat(S),R=String(S).match(p)[1];switch(R){case"em":return w*16;case"rem":return w*16;case"cm":return w*96/2.54;case"mm":return w*96/2.54/10;case"in":return w*96;case"pt":return w*72;case"pc":return w*72/12;default:return w}}},"./node_modules/hyphenate-style-name/index.js":(a,l,c)=>{c.r(l),c.d(l,{default:()=>A});var h=/[A-Z]/g,d=/^ms-/,p={};function m(_){return"-"+_.toLowerCase()}function v(_){if(p.hasOwnProperty(_))return p[_];var g=_.replace(h,m);return p[_]=d.test(g)?"-"+g:g}const A=v},"./node_modules/matchmediaquery/index.js":(a,l,c)=>{var h=c("./node_modules/css-mediaquery/index.js").match,d=typeof window<"u"?window.matchMedia:null;function p(v,A,_){var g=this;if(d&&!_){var x=d.call(window,v);this.matches=x.matches,this.media=x.media,x.addListener(R)}else this.matches=h(v,A),this.media=v;this.addListener=S,this.removeListener=w,this.dispose=C;function S(I){x&&x.addListener(I)}function w(I){x&&x.removeListener(I)}function R(I){g.matches=I.matches,g.media=I.media}function C(){x&&x.removeListener(R)}}function m(v,A,_){return new p(v,A,_)}a.exports=m},"./node_modules/object-assign/index.js":a=>{/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable;function d(m){if(m==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(m)}function p(){try{if(!Object.assign)return!1;var m=new String("abc");if(m[5]="de",Object.getOwnPropertyNames(m)[0]==="5")return!1;for(var v={},A=0;A<10;A++)v["_"+String.fromCharCode(A)]=A;var _=Object.getOwnPropertyNames(v).map(function(x){return v[x]});if(_.join("")!=="0123456789")return!1;var g={};return"abcdefghijklmnopqrst".split("").forEach(function(x){g[x]=x}),Object.keys(Object.assign({},g)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}a.exports=p()?Object.assign:function(m,v){for(var A,_=d(m),g,x=1;x<arguments.length;x++){A=Object(arguments[x]);for(var S in A)c.call(A,S)&&(_[S]=A[S]);if(l){g=l(A);for(var w=0;w<g.length;w++)h.call(A,g[w])&&(_[g[w]]=A[g[w]])}}return _}},"./node_modules/prop-types/checkPropTypes.js":(a,l,c)=>{var h=function(){};{var d=c("./node_modules/prop-types/lib/ReactPropTypesSecret.js"),p={},m=c("./node_modules/prop-types/lib/has.js");h=function(A){var _="Warning: "+A;typeof console<"u"&&console.error(_);try{throw new Error(_)}catch{}}}function v(A,_,g,x,S){for(var w in A)if(m(A,w)){var R;try{if(typeof A[w]!="function"){var C=Error((x||"React class")+": "+g+" type `"+w+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof A[w]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw C.name="Invariant Violation",C}R=A[w](_,w,x,g,null,d)}catch(D){R=D}if(R&&!(R instanceof Error)&&h((x||"React class")+": type specification of "+g+" `"+w+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof R+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),R instanceof Error&&!(R.message in p)){p[R.message]=!0;var I=S?S():"";h("Failed "+g+" type: "+R.message+(I??""))}}}v.resetWarningCache=function(){p={}},a.exports=v},"./node_modules/prop-types/factoryWithTypeCheckers.js":(a,l,c)=>{var h=c("./node_modules/react-is/index.js"),d=c("./node_modules/object-assign/index.js"),p=c("./node_modules/prop-types/lib/ReactPropTypesSecret.js"),m=c("./node_modules/prop-types/lib/has.js"),v=c("./node_modules/prop-types/checkPropTypes.js"),A=function(){};A=function(g){var x="Warning: "+g;typeof console<"u"&&console.error(x);try{throw new Error(x)}catch{}};function _(){return null}a.exports=function(g,x){var S=typeof Symbol=="function"&&Symbol.iterator,w="@@iterator";function R(ue){var ae=ue&&(S&&ue[S]||ue[w]);if(typeof ae=="function")return ae}var C="<<anonymous>>",I={array:L("array"),bigint:L("bigint"),bool:L("boolean"),func:L("function"),number:L("number"),object:L("object"),string:L("string"),symbol:L("symbol"),any:H(),arrayOf:J,element:W(),elementType:$(),instanceOf:q,node:X(),objectOf:O,oneOf:ce,oneOfType:G,shape:te,exact:be};function D(ue,ae){return ue===ae?ue!==0||1/ue===1/ae:ue!==ue&&ae!==ae}function N(ue,ae){this.message=ue,this.data=ae&&typeof ae=="object"?ae:{},this.stack=""}N.prototype=Error.prototype;function T(ue){var ae={},z=0;function he(ve,oe,Ce,Ee,F,B,K){if(Ee=Ee||C,B=B||Ce,K!==p){if(x){var xe=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw xe.name="Invariant Violation",xe}else if(typeof console<"u"){var Ae=Ee+":"+Ce;!ae[Ae]&&z<3&&(A("You are manually calling a React.PropTypes validation function for the `"+B+"` prop on `"+Ee+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),ae[Ae]=!0,z++)}}return oe[Ce]==null?ve?oe[Ce]===null?new N("The "+F+" `"+B+"` is marked as required "+("in `"+Ee+"`, but its value is `null`.")):new N("The "+F+" `"+B+"` is marked as required in "+("`"+Ee+"`, but its value is `undefined`.")):null:ue(oe,Ce,Ee,F,B)}var ie=he.bind(null,!1);return ie.isRequired=he.bind(null,!0),ie}function L(ue){function ae(z,he,ie,ve,oe,Ce){var Ee=z[he],F=Me(Ee);if(F!==ue){var B=Ie(Ee);return new N("Invalid "+ve+" `"+oe+"` of type "+("`"+B+"` supplied to `"+ie+"`, expected ")+("`"+ue+"`."),{expectedType:ue})}return null}return T(ae)}function H(){return T(_)}function J(ue){function ae(z,he,ie,ve,oe){if(typeof ue!="function")return new N("Property `"+oe+"` of component `"+ie+"` has invalid PropType notation inside arrayOf.");var Ce=z[he];if(!Array.isArray(Ce)){var Ee=Me(Ce);return new N("Invalid "+ve+" `"+oe+"` of type "+("`"+Ee+"` supplied to `"+ie+"`, expected an array."))}for(var F=0;F<Ce.length;F++){var B=ue(Ce,F,ie,ve,oe+"["+F+"]",p);if(B instanceof Error)return B}return null}return T(ae)}function W(){function ue(ae,z,he,ie,ve){var oe=ae[z];if(!g(oe)){var Ce=Me(oe);return new N("Invalid "+ie+" `"+ve+"` of type "+("`"+Ce+"` supplied to `"+he+"`, expected a single ReactElement."))}return null}return T(ue)}function $(){function ue(ae,z,he,ie,ve){var oe=ae[z];if(!h.isValidElementType(oe)){var Ce=Me(oe);return new N("Invalid "+ie+" `"+ve+"` of type "+("`"+Ce+"` supplied to `"+he+"`, expected a single ReactElement type."))}return null}return T(ue)}function q(ue){function ae(z,he,ie,ve,oe){if(!(z[he]instanceof ue)){var Ce=ue.name||C,Ee=je(z[he]);return new N("Invalid "+ve+" `"+oe+"` of type "+("`"+Ee+"` supplied to `"+ie+"`, expected ")+("instance of `"+Ce+"`."))}return null}return T(ae)}function ce(ue){if(!Array.isArray(ue))return arguments.length>1?A("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):A("Invalid argument supplied to oneOf, expected an array."),_;function ae(z,he,ie,ve,oe){for(var Ce=z[he],Ee=0;Ee<ue.length;Ee++)if(D(Ce,ue[Ee]))return null;var F=JSON.stringify(ue,function(K,xe){var Ae=Ie(xe);return Ae==="symbol"?String(xe):xe});return new N("Invalid "+ve+" `"+oe+"` of value `"+String(Ce)+"` "+("supplied to `"+ie+"`, expected one of "+F+"."))}return T(ae)}function O(ue){function ae(z,he,ie,ve,oe){if(typeof ue!="function")return new N("Property `"+oe+"` of component `"+ie+"` has invalid PropType notation inside objectOf.");var Ce=z[he],Ee=Me(Ce);if(Ee!=="object")return new N("Invalid "+ve+" `"+oe+"` of type "+("`"+Ee+"` supplied to `"+ie+"`, expected an object."));for(var F in Ce)if(m(Ce,F)){var B=ue(Ce,F,ie,ve,oe+"."+F,p);if(B instanceof Error)return B}return null}return T(ae)}function G(ue){if(!Array.isArray(ue))return A("Invalid argument supplied to oneOfType, expected an instance of array."),_;for(var ae=0;ae<ue.length;ae++){var z=ue[ae];if(typeof z!="function")return A("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+$e(z)+" at index "+ae+"."),_}function he(ie,ve,oe,Ce,Ee){for(var F=[],B=0;B<ue.length;B++){var K=ue[B],xe=K(ie,ve,oe,Ce,Ee,p);if(xe==null)return null;xe.data&&m(xe.data,"expectedType")&&F.push(xe.data.expectedType)}var Ae=F.length>0?", expected one of type ["+F.join(", ")+"]":"";return new N("Invalid "+Ce+" `"+Ee+"` supplied to "+("`"+oe+"`"+Ae+"."))}return T(he)}function X(){function ue(ae,z,he,ie,ve){return ee(ae[z])?null:new N("Invalid "+ie+" `"+ve+"` supplied to "+("`"+he+"`, expected a ReactNode."))}return T(ue)}function Q(ue,ae,z,he,ie){return new N((ue||"React class")+": "+ae+" type `"+z+"."+he+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+ie+"`.")}function te(ue){function ae(z,he,ie,ve,oe){var Ce=z[he],Ee=Me(Ce);if(Ee!=="object")return new N("Invalid "+ve+" `"+oe+"` of type `"+Ee+"` "+("supplied to `"+ie+"`, expected `object`."));for(var F in ue){var B=ue[F];if(typeof B!="function")return Q(ie,ve,oe,F,Ie(B));var K=B(Ce,F,ie,ve,oe+"."+F,p);if(K)return K}return null}return T(ae)}function be(ue){function ae(z,he,ie,ve,oe){var Ce=z[he],Ee=Me(Ce);if(Ee!=="object")return new N("Invalid "+ve+" `"+oe+"` of type `"+Ee+"` "+("supplied to `"+ie+"`, expected `object`."));var F=d({},z[he],ue);for(var B in F){var K=ue[B];if(m(ue,B)&&typeof K!="function")return Q(ie,ve,oe,B,Ie(K));if(!K)return new N("Invalid "+ve+" `"+oe+"` key `"+B+"` supplied to `"+ie+"`.\nBad object: "+JSON.stringify(z[he],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(ue),null,"  "));var xe=K(Ce,B,ie,ve,oe+"."+B,p);if(xe)return xe}return null}return T(ae)}function ee(ue){switch(typeof ue){case"number":case"string":case"undefined":return!0;case"boolean":return!ue;case"object":if(Array.isArray(ue))return ue.every(ee);if(ue===null||g(ue))return!0;var ae=R(ue);if(ae){var z=ae.call(ue),he;if(ae!==ue.entries){for(;!(he=z.next()).done;)if(!ee(he.value))return!1}else for(;!(he=z.next()).done;){var ie=he.value;if(ie&&!ee(ie[1]))return!1}}else return!1;return!0;default:return!1}}function pe(ue,ae){return ue==="symbol"?!0:ae?ae["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&ae instanceof Symbol:!1}function Me(ue){var ae=typeof ue;return Array.isArray(ue)?"array":ue instanceof RegExp?"object":pe(ae,ue)?"symbol":ae}function Ie(ue){if(typeof ue>"u"||ue===null)return""+ue;var ae=Me(ue);if(ae==="object"){if(ue instanceof Date)return"date";if(ue instanceof RegExp)return"regexp"}return ae}function $e(ue){var ae=Ie(ue);switch(ae){case"array":case"object":return"an "+ae;case"boolean":case"date":case"regexp":return"a "+ae;default:return ae}}function je(ue){return!ue.constructor||!ue.constructor.name?C:ue.constructor.name}return I.checkPropTypes=v,I.resetWarningCache=v.resetWarningCache,I.PropTypes=I,I}},"./node_modules/prop-types/index.js":(a,l,c)=>{{var h=c("./node_modules/react-is/index.js"),d=!0;a.exports=c("./node_modules/prop-types/factoryWithTypeCheckers.js")(h.isElement,d)}},"./node_modules/prop-types/lib/ReactPropTypesSecret.js":a=>{var l="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";a.exports=l},"./node_modules/prop-types/lib/has.js":a=>{a.exports=Function.call.bind(Object.prototype.hasOwnProperty)},"./node_modules/react-is/cjs/react-is.development.js":(a,l)=>{/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var c=typeof Symbol=="function"&&Symbol.for,h=c?Symbol.for("react.element"):60103,d=c?Symbol.for("react.portal"):60106,p=c?Symbol.for("react.fragment"):60107,m=c?Symbol.for("react.strict_mode"):60108,v=c?Symbol.for("react.profiler"):60114,A=c?Symbol.for("react.provider"):60109,_=c?Symbol.for("react.context"):60110,g=c?Symbol.for("react.async_mode"):60111,x=c?Symbol.for("react.concurrent_mode"):60111,S=c?Symbol.for("react.forward_ref"):60112,w=c?Symbol.for("react.suspense"):60113,R=c?Symbol.for("react.suspense_list"):60120,C=c?Symbol.for("react.memo"):60115,I=c?Symbol.for("react.lazy"):60116,D=c?Symbol.for("react.block"):60121,N=c?Symbol.for("react.fundamental"):60117,T=c?Symbol.for("react.responder"):60118,L=c?Symbol.for("react.scope"):60119;function H(K){return typeof K=="string"||typeof K=="function"||K===p||K===x||K===v||K===m||K===w||K===R||typeof K=="object"&&K!==null&&(K.$$typeof===I||K.$$typeof===C||K.$$typeof===A||K.$$typeof===_||K.$$typeof===S||K.$$typeof===N||K.$$typeof===T||K.$$typeof===L||K.$$typeof===D)}function J(K){if(typeof K=="object"&&K!==null){var xe=K.$$typeof;switch(xe){case h:var Ae=K.type;switch(Ae){case g:case x:case p:case v:case m:case w:return Ae;default:var Se=Ae&&Ae.$$typeof;switch(Se){case _:case S:case I:case C:case A:return Se;default:return xe}}case d:return xe}}}var W=g,$=x,q=_,ce=A,O=h,G=S,X=p,Q=I,te=C,be=d,ee=v,pe=m,Me=w,Ie=!1;function $e(K){return Ie||(Ie=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),je(K)||J(K)===g}function je(K){return J(K)===x}function ue(K){return J(K)===_}function ae(K){return J(K)===A}function z(K){return typeof K=="object"&&K!==null&&K.$$typeof===h}function he(K){return J(K)===S}function ie(K){return J(K)===p}function ve(K){return J(K)===I}function oe(K){return J(K)===C}function Ce(K){return J(K)===d}function Ee(K){return J(K)===v}function F(K){return J(K)===m}function B(K){return J(K)===w}l.AsyncMode=W,l.ConcurrentMode=$,l.ContextConsumer=q,l.ContextProvider=ce,l.Element=O,l.ForwardRef=G,l.Fragment=X,l.Lazy=Q,l.Memo=te,l.Portal=be,l.Profiler=ee,l.StrictMode=pe,l.Suspense=Me,l.isAsyncMode=$e,l.isConcurrentMode=je,l.isContextConsumer=ue,l.isContextProvider=ae,l.isElement=z,l.isForwardRef=he,l.isFragment=ie,l.isLazy=ve,l.isMemo=oe,l.isPortal=Ce,l.isProfiler=Ee,l.isStrictMode=F,l.isSuspense=B,l.isValidElementType=H,l.typeOf=J})()},"./node_modules/react-is/index.js":(a,l,c)=>{a.exports=c("./node_modules/react-is/cjs/react-is.development.js")},"./node_modules/shallow-equal/dist/index.esm.js":(a,l,c)=>{c.r(l),c.d(l,{shallowEqualArrays:()=>d,shallowEqualObjects:()=>h});function h(p,m){if(p===m)return!0;if(!p||!m)return!1;var v=Object.keys(p),A=Object.keys(m),_=v.length;if(A.length!==_)return!1;for(var g=0;g<_;g++){var x=v[g];if(p[x]!==m[x]||!Object.prototype.hasOwnProperty.call(m,x))return!1}return!0}function d(p,m){if(p===m)return!0;if(!p||!m)return!1;var v=p.length;if(m.length!==v)return!1;for(var A=0;A<v;A++)if(p[A]!==m[A])return!1;return!0}},"./src/Component.ts":function(a,l,c){var h=this&&this.__rest||function(v,A){var _={};for(var g in v)Object.prototype.hasOwnProperty.call(v,g)&&A.indexOf(g)<0&&(_[g]=v[g]);if(v!=null&&typeof Object.getOwnPropertySymbols=="function")for(var x=0,g=Object.getOwnPropertySymbols(v);x<g.length;x++)A.indexOf(g[x])<0&&Object.prototype.propertyIsEnumerable.call(v,g[x])&&(_[g[x]]=v[g[x]]);return _},d=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(l,"__esModule",{value:!0});var p=d(c("./src/useMediaQuery.ts")),m=function(v){var A=v.children,_=v.device,g=v.onChange,x=h(v,["children","device","onChange"]),S=(0,p.default)(x,_,g);return typeof A=="function"?A(S):S?A:null};l.default=m},"./src/Context.ts":(a,l,c)=>{Object.defineProperty(l,"__esModule",{value:!0});var h=c("react"),d=(0,h.createContext)(void 0);l.default=d},"./src/index.ts":function(a,l,c){var h=this&&this.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(l,"__esModule",{value:!0}),l.Context=l.toQuery=l.useMediaQuery=l.default=void 0;var d=h(c("./src/useMediaQuery.ts"));l.useMediaQuery=d.default;var p=h(c("./src/Component.ts"));l.default=p.default;var m=h(c("./src/toQuery.ts"));l.toQuery=m.default;var v=h(c("./src/Context.ts"));l.Context=v.default},"./src/mediaQuery.ts":function(a,l,c){var h=this&&this.__assign||function(){return h=Object.assign||function(w){for(var R,C=1,I=arguments.length;C<I;C++){R=arguments[C];for(var D in R)Object.prototype.hasOwnProperty.call(R,D)&&(w[D]=R[D])}return w},h.apply(this,arguments)},d=this&&this.__rest||function(w,R){var C={};for(var I in w)Object.prototype.hasOwnProperty.call(w,I)&&R.indexOf(I)<0&&(C[I]=w[I]);if(w!=null&&typeof Object.getOwnPropertySymbols=="function")for(var D=0,I=Object.getOwnPropertySymbols(w);D<I.length;D++)R.indexOf(I[D])<0&&Object.prototype.propertyIsEnumerable.call(w,I[D])&&(C[I[D]]=w[I[D]]);return C},p=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(l,"__esModule",{value:!0});var m=p(c("./node_modules/prop-types/index.js")),v=m.default.oneOfType([m.default.string,m.default.number]),A={all:m.default.bool,grid:m.default.bool,aural:m.default.bool,braille:m.default.bool,handheld:m.default.bool,print:m.default.bool,projection:m.default.bool,screen:m.default.bool,tty:m.default.bool,tv:m.default.bool,embossed:m.default.bool},_={orientation:m.default.oneOf(["portrait","landscape"]),scan:m.default.oneOf(["progressive","interlace"]),aspectRatio:m.default.string,deviceAspectRatio:m.default.string,height:v,deviceHeight:v,width:v,deviceWidth:v,color:m.default.bool,colorIndex:m.default.bool,monochrome:m.default.bool,resolution:v,type:Object.keys(A)};_.type;var g=d(_,["type"]),x=h({minAspectRatio:m.default.string,maxAspectRatio:m.default.string,minDeviceAspectRatio:m.default.string,maxDeviceAspectRatio:m.default.string,minHeight:v,maxHeight:v,minDeviceHeight:v,maxDeviceHeight:v,minWidth:v,maxWidth:v,minDeviceWidth:v,maxDeviceWidth:v,minColor:m.default.number,maxColor:m.default.number,minColorIndex:m.default.number,maxColorIndex:m.default.number,minMonochrome:m.default.number,maxMonochrome:m.default.number,minResolution:v,maxResolution:v},g),S=h(h({},A),x);l.default={all:S,types:A,matchers:_,features:x}},"./src/toQuery.ts":function(a,l,c){var h=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});var d=h(c("./node_modules/hyphenate-style-name/index.js")),p=h(c("./src/mediaQuery.ts")),m=function(g){return"not ".concat(g)},v=function(g,x){var S=(0,d.default)(g);return typeof x=="number"&&(x="".concat(x,"px")),x===!0?S:x===!1?m(S):"(".concat(S,": ").concat(x,")")},A=function(g){return g.join(" and ")},_=function(g){var x=[];return Object.keys(p.default.all).forEach(function(S){var w=g[S];w!=null&&x.push(v(S,w))}),A(x)};l.default=_},"./src/useMediaQuery.ts":function(a,l,c){var h=this&&this.__importDefault||function(N){return N&&N.__esModule?N:{default:N}};Object.defineProperty(l,"__esModule",{value:!0});var d=c("react"),p=h(c("./node_modules/matchmediaquery/index.js")),m=h(c("./node_modules/hyphenate-style-name/index.js")),v=c("./node_modules/shallow-equal/dist/index.esm.js"),A=h(c("./src/toQuery.ts")),_=h(c("./src/Context.ts")),g=function(N){return N.query||(0,A.default)(N)},x=function(N){if(N){var T=Object.keys(N);return T.reduce(function(L,H){return L[(0,m.default)(H)]=N[H],L},{})}},S=function(){var N=(0,d.useRef)(!1);return(0,d.useEffect)(function(){N.current=!0},[]),N.current},w=function(N){var T=(0,d.useContext)(_.default),L=function(){return x(N)||x(T)},H=(0,d.useState)(L),J=H[0],W=H[1];return(0,d.useEffect)(function(){var $=L();(0,v.shallowEqualObjects)(J,$)||W($)},[N,T]),J},R=function(N){var T=function(){return g(N)},L=(0,d.useState)(T),H=L[0],J=L[1];return(0,d.useEffect)(function(){var W=T();H!==W&&J(W)},[N]),H},C=function(N,T){var L=function(){return(0,p.default)(N,T||{},!!T)},H=(0,d.useState)(L),J=H[0],W=H[1],$=S();return(0,d.useEffect)(function(){if($){var q=L();return W(q),function(){q&&q.dispose()}}},[N,T]),J},I=function(N){var T=(0,d.useState)(N.matches),L=T[0],H=T[1];return(0,d.useEffect)(function(){var J=function(W){H(W.matches)};return N.addListener(J),H(N.matches),function(){N.removeListener(J)}},[N]),L},D=function(N,T,L){var H=w(T),J=R(N);if(!J)throw new Error("Invalid or missing MediaQuery!");var W=C(J,H),$=I(W),q=S();return(0,d.useEffect)(function(){q&&L&&L($)},[$]),(0,d.useEffect)(function(){return function(){W&&W.dispose()}},[]),$};l.default=D},react:a=>{a.exports=t}},i={};function s(a){var l=i[a];if(l!==void 0)return l.exports;var c=i[a]={exports:{}};return r[a].call(c.exports,c,c.exports,s),c.exports}s.d=(a,l)=>{for(var c in l)s.o(l,c)&&!s.o(a,c)&&Object.defineProperty(a,c,{enumerable:!0,get:l[c]})},s.o=(a,l)=>Object.prototype.hasOwnProperty.call(a,l),s.r=a=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var o=s("./src/index.ts");return o})())})(KF);var MJ=KF.exports,$F={},YF={},h_={},qF={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e={animating:!1,autoplaying:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,dragging:!1,edgeDragged:!1,initialized:!1,lazyLoadedList:[],listHeight:null,listWidth:null,scrolling:!1,slideCount:null,slideHeight:null,slideWidth:null,swipeLeft:null,swiped:!1,swiping:!1,touchObject:{startX:0,startY:0,curX:0,curY:0},trackStyle:{},trackWidth:0,targetSlide:0},t=e;n.default=t})(qF);var TJ="Expected a function",mI=NaN,CJ="[object Symbol]",bJ=/^\s+|\s+$/g,RJ=/^[-+]0x[0-9a-f]+$/i,PJ=/^0b[01]+$/i,IJ=/^0o[0-7]+$/i,LJ=parseInt,DJ=typeof Yf=="object"&&Yf&&Yf.Object===Object&&Yf,BJ=typeof self=="object"&&self&&self.Object===Object&&self,NJ=DJ||BJ||Function("return this")(),OJ=Object.prototype,FJ=OJ.toString,kJ=Math.max,UJ=Math.min,$1=function(){return NJ.Date.now()};function zJ(n,e,t){var r,i,s,o,a,l,c=0,h=!1,d=!1,p=!0;if(typeof n!="function")throw new TypeError(TJ);e=gI(e)||0,FE(t)&&(h=!!t.leading,d="maxWait"in t,s=d?kJ(gI(t.maxWait)||0,e):s,p="trailing"in t?!!t.trailing:p);function m(C){var I=r,D=i;return r=i=void 0,c=C,o=n.apply(D,I),o}function v(C){return c=C,a=setTimeout(g,e),h?m(C):o}function A(C){var I=C-l,D=C-c,N=e-I;return d?UJ(N,s-D):N}function _(C){var I=C-l,D=C-c;return l===void 0||I>=e||I<0||d&&D>=s}function g(){var C=$1();if(_(C))return x(C);a=setTimeout(g,A(C))}function x(C){return a=void 0,p&&r?m(C):(r=i=void 0,o)}function S(){a!==void 0&&clearTimeout(a),c=0,r=l=i=a=void 0}function w(){return a===void 0?o:x($1())}function R(){var C=$1(),I=_(C);if(r=arguments,i=this,l=C,I){if(a===void 0)return v(l);if(d)return a=setTimeout(g,e),m(l)}return a===void 0&&(a=setTimeout(g,e)),o}return R.cancel=S,R.flush=w,R}function FE(n){var e=typeof n;return!!n&&(e=="object"||e=="function")}function HJ(n){return!!n&&typeof n=="object"}function VJ(n){return typeof n=="symbol"||HJ(n)&&FJ.call(n)==CJ}function gI(n){if(typeof n=="number")return n;if(VJ(n))return mI;if(FE(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=FE(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=n.replace(bJ,"");var t=PJ.test(n);return t||IJ.test(n)?LJ(n.slice(2),t?2:8):RJ.test(n)?mI:+n}var GJ=zJ,QF={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var s="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(s=i(s,r(a)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return t.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var a in s)e.call(s,a)&&s[a]&&(o=i(o,a));return o}function i(s,o){return o?s?s+" "+o:s+o:s}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(QF);var f_=QF.exports,We={};Object.defineProperty(We,"__esModule",{value:!0});We.checkSpecKeys=We.checkNavigable=We.changeSlide=We.canUseDOM=We.canGoNext=void 0;We.clamp=ZF;We.swipeStart=We.swipeMove=We.swipeEnd=We.slidesOnRight=We.slidesOnLeft=We.slideHandler=We.siblingDirection=We.safePreventDefault=We.lazyStartIndex=We.lazySlidesOnRight=We.lazySlidesOnLeft=We.lazyEndIndex=We.keyHandler=We.initializedState=We.getWidth=We.getTrackLeft=We.getTrackCSS=We.getTrackAnimateCSS=We.getTotalSlides=We.getSwipeDirection=We.getSlideCount=We.getRequiredLazySlides=We.getPreClones=We.getPostClones=We.getOnDemandLazySlides=We.getNavigableIndexes=We.getHeight=We.extractObject=void 0;var jJ=WJ(re);function WJ(n){return n&&n.__esModule?n:{default:n}}function vI(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Sn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?vI(Object(t),!0).forEach(function(r){XJ(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):vI(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function XJ(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ZF(n,e,t){return Math.max(e,Math.min(n,t))}var lc=function(e){var t=["onTouchStart","onTouchMove","onWheel"];t.includes(e._reactName)||e.preventDefault()};We.safePreventDefault=lc;var WT=function(e){for(var t=[],r=XT(e),i=JT(e),s=r;s<i;s++)e.lazyLoadedList.indexOf(s)<0&&t.push(s);return t};We.getOnDemandLazySlides=WT;var JJ=function(e){for(var t=[],r=XT(e),i=JT(e),s=r;s<i;s++)t.push(s);return t};We.getRequiredLazySlides=JJ;var XT=function(e){return e.currentSlide-e4(e)};We.lazyStartIndex=XT;var JT=function(e){return e.currentSlide+t4(e)};We.lazyEndIndex=JT;var e4=function(e){return e.centerMode?Math.floor(e.slidesToShow/2)+(parseInt(e.centerPadding)>0?1:0):0};We.lazySlidesOnLeft=e4;var t4=function(e){return e.centerMode?Math.floor((e.slidesToShow-1)/2)+1+(parseInt(e.centerPadding)>0?1:0):e.slidesToShow};We.lazySlidesOnRight=t4;var qv=function(e){return e&&e.offsetWidth||0};We.getWidth=qv;var KT=function(e){return e&&e.offsetHeight||0};We.getHeight=KT;var $T=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r,i,s,o;return r=e.startX-e.curX,i=e.startY-e.curY,s=Math.atan2(i,r),o=Math.round(s*180/Math.PI),o<0&&(o=360-Math.abs(o)),o<=45&&o>=0||o<=360&&o>=315?"left":o>=135&&o<=225?"right":t===!0?o>=35&&o<=135?"up":"down":"vertical"};We.getSwipeDirection=$T;var YT=function(e){var t=!0;return e.infinite||(e.centerMode&&e.currentSlide>=e.slideCount-1||e.slideCount<=e.slidesToShow||e.currentSlide>=e.slideCount-e.slidesToShow)&&(t=!1),t};We.canGoNext=YT;var KJ=function(e,t){var r={};return t.forEach(function(i){return r[i]=e[i]}),r};We.extractObject=KJ;var $J=function(e){var t=jJ.default.Children.count(e.children),r=e.listRef,i=Math.ceil(qv(r)),s=e.trackRef&&e.trackRef.node,o=Math.ceil(qv(s)),a;if(e.vertical)a=i;else{var l=e.centerMode&&parseInt(e.centerPadding)*2;typeof e.centerPadding=="string"&&e.centerPadding.slice(-1)==="%"&&(l*=i/100),a=Math.ceil((i-l)/e.slidesToShow)}var c=r&&KT(r.querySelector('[data-index="0"]')),h=c*e.slidesToShow,d=e.currentSlide===void 0?e.initialSlide:e.currentSlide;e.rtl&&e.currentSlide===void 0&&(d=t-1-e.initialSlide);var p=e.lazyLoadedList||[],m=WT(Sn(Sn({},e),{},{currentSlide:d,lazyLoadedList:p}));p=p.concat(m);var v={slideCount:t,slideWidth:a,listWidth:i,trackWidth:o,currentSlide:d,slideHeight:c,listHeight:h,lazyLoadedList:p};return e.autoplaying===null&&e.autoplay&&(v.autoplaying="playing"),v};We.initializedState=$J;var YJ=function(e){var t=e.waitForAnimate,r=e.animating,i=e.fade,s=e.infinite,o=e.index,a=e.slideCount,l=e.lazyLoad,c=e.currentSlide,h=e.centerMode,d=e.slidesToScroll,p=e.slidesToShow,m=e.useCSS,v=e.lazyLoadedList;if(t&&r)return{};var A=o,_,g,x,S={},w={},R=s?o:ZF(o,0,a-1);if(i){if(!s&&(o<0||o>=a))return{};o<0?A=o+a:o>=a&&(A=o-a),l&&v.indexOf(A)<0&&(v=v.concat(A)),S={animating:!0,currentSlide:A,lazyLoadedList:v,targetSlide:A},w={animating:!1,targetSlide:A}}else _=A,A<0?(_=A+a,s?a%d!==0&&(_=a-a%d):_=0):!YT(e)&&A>c?A=_=c:h&&A>=a?(A=s?a:a-1,_=s?0:a-1):A>=a&&(_=A-a,s?a%d!==0&&(_=0):_=a-p),!s&&A+p>=a&&(_=a-p),g=up(Sn(Sn({},e),{},{slideIndex:A})),x=up(Sn(Sn({},e),{},{slideIndex:_})),s||(g===x&&(A=_),g=x),l&&(v=v.concat(WT(Sn(Sn({},e),{},{currentSlide:A})))),m?(S={animating:!0,currentSlide:_,trackStyle:qT(Sn(Sn({},e),{},{left:g})),lazyLoadedList:v,targetSlide:R},w={animating:!1,currentSlide:_,trackStyle:cp(Sn(Sn({},e),{},{left:x})),swipeLeft:null,targetSlide:R}):S={currentSlide:_,trackStyle:cp(Sn(Sn({},e),{},{left:x})),lazyLoadedList:v,targetSlide:R};return{state:S,nextState:w}};We.slideHandler=YJ;var qJ=function(e,t){var r,i,s,o,a,l=e.slidesToScroll,c=e.slidesToShow,h=e.slideCount,d=e.currentSlide,p=e.targetSlide,m=e.lazyLoad,v=e.infinite;if(o=h%l!==0,r=o?0:(h-d)%l,t.message==="previous")s=r===0?l:c-r,a=d-s,m&&!v&&(i=d-s,a=i===-1?h-1:i),v||(a=p-l);else if(t.message==="next")s=r===0?l:r,a=d+s,m&&!v&&(a=(d+l)%h+r),v||(a=p+l);else if(t.message==="dots")a=t.index*t.slidesToScroll;else if(t.message==="children"){if(a=t.index,v){var A=s4(Sn(Sn({},e),{},{targetSlide:a}));a>t.currentSlide&&A==="left"?a=a-h:a<t.currentSlide&&A==="right"&&(a=a+h)}}else t.message==="index"&&(a=Number(t.index));return a};We.changeSlide=qJ;var QJ=function(e,t,r){return e.target.tagName.match("TEXTAREA|INPUT|SELECT")||!t?"":e.keyCode===37?r?"next":"previous":e.keyCode===39?r?"previous":"next":""};We.keyHandler=QJ;var ZJ=function(e,t,r){return e.target.tagName==="IMG"&&lc(e),!t||!r&&e.type.indexOf("mouse")!==-1?"":{dragging:!0,touchObject:{startX:e.touches?e.touches[0].pageX:e.clientX,startY:e.touches?e.touches[0].pageY:e.clientY,curX:e.touches?e.touches[0].pageX:e.clientX,curY:e.touches?e.touches[0].pageY:e.clientY}}};We.swipeStart=ZJ;var eK=function(e,t){var r=t.scrolling,i=t.animating,s=t.vertical,o=t.swipeToSlide,a=t.verticalSwiping,l=t.rtl,c=t.currentSlide,h=t.edgeFriction,d=t.edgeDragged,p=t.onEdge,m=t.swiped,v=t.swiping,A=t.slideCount,_=t.slidesToScroll,g=t.infinite,x=t.touchObject,S=t.swipeEvent,w=t.listHeight,R=t.listWidth;if(!r){if(i)return lc(e);s&&o&&a&&lc(e);var C,I={},D=up(t);x.curX=e.touches?e.touches[0].pageX:e.clientX,x.curY=e.touches?e.touches[0].pageY:e.clientY,x.swipeLength=Math.round(Math.sqrt(Math.pow(x.curX-x.startX,2)));var N=Math.round(Math.sqrt(Math.pow(x.curY-x.startY,2)));if(!a&&!v&&N>10)return{scrolling:!0};a&&(x.swipeLength=N);var T=(l?-1:1)*(x.curX>x.startX?1:-1);a&&(T=x.curY>x.startY?1:-1);var L=Math.ceil(A/_),H=$T(t.touchObject,a),J=x.swipeLength;return g||(c===0&&(H==="right"||H==="down")||c+1>=L&&(H==="left"||H==="up")||!YT(t)&&(H==="left"||H==="up"))&&(J=x.swipeLength*h,d===!1&&p&&(p(H),I.edgeDragged=!0)),!m&&S&&(S(H),I.swiped=!0),s?C=D+J*(w/R)*T:l?C=D-J*T:C=D+J*T,a&&(C=D+J*T),I=Sn(Sn({},I),{},{touchObject:x,swipeLeft:C,trackStyle:cp(Sn(Sn({},t),{},{left:C}))}),Math.abs(x.curX-x.startX)<Math.abs(x.curY-x.startY)*.8||x.swipeLength>10&&(I.swiping=!0,lc(e)),I}};We.swipeMove=eK;var tK=function(e,t){var r=t.dragging,i=t.swipe,s=t.touchObject,o=t.listWidth,a=t.touchThreshold,l=t.verticalSwiping,c=t.listHeight,h=t.swipeToSlide,d=t.scrolling,p=t.onSwipe,m=t.targetSlide,v=t.currentSlide,A=t.infinite;if(!r)return i&&lc(e),{};var _=l?c/a:o/a,g=$T(s,l),x={dragging:!1,edgeDragged:!1,scrolling:!1,swiping:!1,swiped:!1,swipeLeft:null,touchObject:{}};if(d||!s.swipeLength)return x;if(s.swipeLength>_){lc(e),p&&p(g);var S,w,R=A?v:m;switch(g){case"left":case"up":w=R+UE(t),S=h?kE(t,w):w,x.currentDirection=0;break;case"right":case"down":w=R-UE(t),S=h?kE(t,w):w,x.currentDirection=1;break;default:S=R}x.triggerSlideHandler=S}else{var C=up(t);x.trackStyle=qT(Sn(Sn({},t),{},{left:C}))}return x};We.swipeEnd=tK;var n4=function(e){for(var t=e.infinite?e.slideCount*2:e.slideCount,r=e.infinite?e.slidesToShow*-1:0,i=e.infinite?e.slidesToShow*-1:0,s=[];r<t;)s.push(r),r=i+e.slidesToScroll,i+=Math.min(e.slidesToScroll,e.slidesToShow);return s};We.getNavigableIndexes=n4;var kE=function(e,t){var r=n4(e),i=0;if(t>r[r.length-1])t=r[r.length-1];else for(var s in r){if(t<r[s]){t=i;break}i=r[s]}return t};We.checkNavigable=kE;var UE=function(e){var t=e.centerMode?e.slideWidth*Math.floor(e.slidesToShow/2):0;if(e.swipeToSlide){var r,i=e.listRef,s=i.querySelectorAll&&i.querySelectorAll(".slick-slide")||[];if(Array.from(s).every(function(l){if(e.vertical){if(l.offsetTop+KT(l)/2>e.swipeLeft*-1)return r=l,!1}else if(l.offsetLeft-t+qv(l)/2>e.swipeLeft*-1)return r=l,!1;return!0}),!r)return 0;var o=e.rtl===!0?e.slideCount-e.currentSlide:e.currentSlide,a=Math.abs(r.dataset.index-o)||1;return a}else return e.slidesToScroll};We.getSlideCount=UE;var d_=function(e,t){return t.reduce(function(r,i){return r&&e.hasOwnProperty(i)},!0)?null:console.error("Keys Missing:",e)};We.checkSpecKeys=d_;var cp=function(e){d_(e,["left","variableWidth","slideCount","slidesToShow","slideWidth"]);var t,r,i=e.slideCount+2*e.slidesToShow;e.vertical?r=i*e.slideHeight:t=i4(e)*e.slideWidth;var s={opacity:1,transition:"",WebkitTransition:""};if(e.useTransform){var o=e.vertical?"translate3d(0px, "+e.left+"px, 0px)":"translate3d("+e.left+"px, 0px, 0px)",a=e.vertical?"translate3d(0px, "+e.left+"px, 0px)":"translate3d("+e.left+"px, 0px, 0px)",l=e.vertical?"translateY("+e.left+"px)":"translateX("+e.left+"px)";s=Sn(Sn({},s),{},{WebkitTransform:o,transform:a,msTransform:l})}else e.vertical?s.top=e.left:s.left=e.left;return e.fade&&(s={opacity:1}),t&&(s.width=t),r&&(s.height=r),window&&!window.addEventListener&&window.attachEvent&&(e.vertical?s.marginTop=e.left+"px":s.marginLeft=e.left+"px"),s};We.getTrackCSS=cp;var qT=function(e){d_(e,["left","variableWidth","slideCount","slidesToShow","slideWidth","speed","cssEase"]);var t=cp(e);return e.useTransform?(t.WebkitTransition="-webkit-transform "+e.speed+"ms "+e.cssEase,t.transition="transform "+e.speed+"ms "+e.cssEase):e.vertical?t.transition="top "+e.speed+"ms "+e.cssEase:t.transition="left "+e.speed+"ms "+e.cssEase,t};We.getTrackAnimateCSS=qT;var up=function(e){if(e.unslick)return 0;d_(e,["slideIndex","trackRef","infinite","centerMode","slideCount","slidesToShow","slidesToScroll","slideWidth","listWidth","variableWidth","slideHeight"]);var t=e.slideIndex,r=e.trackRef,i=e.infinite,s=e.centerMode,o=e.slideCount,a=e.slidesToShow,l=e.slidesToScroll,c=e.slideWidth,h=e.listWidth,d=e.variableWidth,p=e.slideHeight,m=e.fade,v=e.vertical,A=0,_,g,x=0;if(m||e.slideCount===1)return 0;var S=0;if(i?(S=-Sd(e),o%l!==0&&t+l>o&&(S=-(t>o?a-(t-o):o%l)),s&&(S+=parseInt(a/2))):(o%l!==0&&t+l>o&&(S=a-o%l),s&&(S=parseInt(a/2))),A=S*c,x=S*p,v?_=t*p*-1+x:_=t*c*-1+A,d===!0){var w,R=r&&r.node;if(w=t+Sd(e),g=R&&R.childNodes[w],_=g?g.offsetLeft*-1:0,s===!0){w=i?t+Sd(e):t,g=R&&R.children[w],_=0;for(var C=0;C<w;C++)_-=R&&R.children[C]&&R.children[C].offsetWidth;_-=parseInt(e.centerPadding),_+=g&&(h-g.offsetWidth)/2}}return _};We.getTrackLeft=up;var Sd=function(e){return e.unslick||!e.infinite?0:e.variableWidth?e.slideCount:e.slidesToShow+(e.centerMode?1:0)};We.getPreClones=Sd;var r4=function(e){return e.unslick||!e.infinite?0:e.slideCount};We.getPostClones=r4;var i4=function(e){return e.slideCount===1?1:Sd(e)+e.slideCount+r4(e)};We.getTotalSlides=i4;var s4=function(e){return e.targetSlide>e.currentSlide?e.targetSlide>e.currentSlide+o4(e)?"left":"right":e.targetSlide<e.currentSlide-a4(e)?"right":"left"};We.siblingDirection=s4;var o4=function(e){var t=e.slidesToShow,r=e.centerMode,i=e.rtl,s=e.centerPadding;if(r){var o=(t-1)/2+1;return parseInt(s)>0&&(o+=1),i&&t%2===0&&(o+=1),o}return i?0:t-1};We.slidesOnRight=o4;var a4=function(e){var t=e.slidesToShow,r=e.centerMode,i=e.rtl,s=e.centerPadding;if(r){var o=(t-1)/2+1;return parseInt(s)>0&&(o+=1),!i&&t%2===0&&(o+=1),o}return i?t-1:0};We.slidesOnLeft=a4;var nK=function(){return!!(typeof window<"u"&&window.document&&window.document.createElement)};We.canUseDOM=nK;var p_={};function zE(n){"@babel/helpers - typeof";return zE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zE(n)}Object.defineProperty(p_,"__esModule",{value:!0});p_.Track=void 0;var Ma=l4(re),Y1=l4(f_),q1=We;function l4(n){return n&&n.__esModule?n:{default:n}}function HE(){return HE=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},HE.apply(this,arguments)}function rK(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function yI(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function iK(n,e,t){return e&&yI(n.prototype,e),t&&yI(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function sK(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&VE(n,e)}function VE(n,e){return VE=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},VE(n,e)}function oK(n){var e=lK();return function(){var r=Qv(n),i;if(e){var s=Qv(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return aK(this,i)}}function aK(n,e){if(e&&(zE(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return GE(n)}function GE(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function lK(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Qv(n){return Qv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Qv(n)}function _I(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function _i(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_I(Object(t),!0).forEach(function(r){jE(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):_I(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function jE(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var Q1=function(e){var t,r,i,s,o;e.rtl?o=e.slideCount-1-e.index:o=e.index,i=o<0||o>=e.slideCount,e.centerMode?(s=Math.floor(e.slidesToShow/2),r=(o-e.currentSlide)%e.slideCount===0,o>e.currentSlide-s-1&&o<=e.currentSlide+s&&(t=!0)):t=e.currentSlide<=o&&o<e.currentSlide+e.slidesToShow;var a;e.targetSlide<0?a=e.targetSlide+e.slideCount:e.targetSlide>=e.slideCount?a=e.targetSlide-e.slideCount:a=e.targetSlide;var l=o===a;return{"slick-slide":!0,"slick-active":t,"slick-center":r,"slick-cloned":i,"slick-current":l}},cK=function(e){var t={};return(e.variableWidth===void 0||e.variableWidth===!1)&&(t.width=e.slideWidth),e.fade&&(t.position="relative",e.vertical?t.top=-e.index*parseInt(e.slideHeight):t.left=-e.index*parseInt(e.slideWidth),t.opacity=e.currentSlide===e.index?1:0,e.useCSS&&(t.transition="opacity "+e.speed+"ms "+e.cssEase+", visibility "+e.speed+"ms "+e.cssEase)),t},Z1=function(e,t){return e.key||t},uK=function(e){var t,r=[],i=[],s=[],o=Ma.default.Children.count(e.children),a=(0,q1.lazyStartIndex)(e),l=(0,q1.lazyEndIndex)(e);return Ma.default.Children.forEach(e.children,function(c,h){var d,p={message:"children",index:h,slidesToScroll:e.slidesToScroll,currentSlide:e.currentSlide};!e.lazyLoad||e.lazyLoad&&e.lazyLoadedList.indexOf(h)>=0?d=c:d=Ma.default.createElement("div",null);var m=cK(_i(_i({},e),{},{index:h})),v=d.props.className||"",A=Q1(_i(_i({},e),{},{index:h}));if(r.push(Ma.default.cloneElement(d,{key:"original"+Z1(d,h),"data-index":h,className:(0,Y1.default)(A,v),tabIndex:"-1","aria-hidden":!A["slick-active"],style:_i(_i({outline:"none"},d.props.style||{}),m),onClick:function(x){d.props&&d.props.onClick&&d.props.onClick(x),e.focusOnSelect&&e.focusOnSelect(p)}})),e.infinite&&e.fade===!1){var _=o-h;_<=(0,q1.getPreClones)(e)&&o!==e.slidesToShow&&(t=-_,t>=a&&(d=c),A=Q1(_i(_i({},e),{},{index:t})),i.push(Ma.default.cloneElement(d,{key:"precloned"+Z1(d,t),"data-index":t,tabIndex:"-1",className:(0,Y1.default)(A,v),"aria-hidden":!A["slick-active"],style:_i(_i({},d.props.style||{}),m),onClick:function(x){d.props&&d.props.onClick&&d.props.onClick(x),e.focusOnSelect&&e.focusOnSelect(p)}}))),o!==e.slidesToShow&&(t=o+h,t<l&&(d=c),A=Q1(_i(_i({},e),{},{index:t})),s.push(Ma.default.cloneElement(d,{key:"postcloned"+Z1(d,t),"data-index":t,tabIndex:"-1",className:(0,Y1.default)(A,v),"aria-hidden":!A["slick-active"],style:_i(_i({},d.props.style||{}),m),onClick:function(x){d.props&&d.props.onClick&&d.props.onClick(x),e.focusOnSelect&&e.focusOnSelect(p)}})))}}),e.rtl?i.concat(r,s).reverse():i.concat(r,s)},hK=function(n){sK(t,n);var e=oK(t);function t(){var r;rK(this,t);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,[this].concat(s)),jE(GE(r),"node",null),jE(GE(r),"handleRef",function(a){r.node=a}),r}return iK(t,[{key:"render",value:function(){var i=uK(this.props),s=this.props,o=s.onMouseEnter,a=s.onMouseOver,l=s.onMouseLeave,c={onMouseEnter:o,onMouseOver:a,onMouseLeave:l};return Ma.default.createElement("div",HE({ref:this.handleRef,className:"slick-track",style:this.props.trackStyle},c),i)}}]),t}(Ma.default.PureComponent);p_.Track=hK;var m_={};function WE(n){"@babel/helpers - typeof";return WE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},WE(n)}Object.defineProperty(m_,"__esModule",{value:!0});m_.Dots=void 0;var Ng=c4(re),fK=c4(f_),xI=We;function c4(n){return n&&n.__esModule?n:{default:n}}function AI(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function dK(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?AI(Object(t),!0).forEach(function(r){pK(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):AI(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function pK(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function mK(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function SI(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function gK(n,e,t){return e&&SI(n.prototype,e),t&&SI(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function vK(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&XE(n,e)}function XE(n,e){return XE=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},XE(n,e)}function yK(n){var e=AK();return function(){var r=Zv(n),i;if(e){var s=Zv(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return _K(this,i)}}function _K(n,e){if(e&&(WE(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xK(n)}function xK(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function AK(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Zv(n){return Zv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Zv(n)}var SK=function(e){var t;return e.infinite?t=Math.ceil(e.slideCount/e.slidesToScroll):t=Math.ceil((e.slideCount-e.slidesToShow)/e.slidesToScroll)+1,t},EK=function(n){vK(t,n);var e=yK(t);function t(){return mK(this,t),e.apply(this,arguments)}return gK(t,[{key:"clickHandler",value:function(i,s){s.preventDefault(),this.props.clickHandler(i)}},{key:"render",value:function(){for(var i=this.props,s=i.onMouseEnter,o=i.onMouseOver,a=i.onMouseLeave,l=i.infinite,c=i.slidesToScroll,h=i.slidesToShow,d=i.slideCount,p=i.currentSlide,m=SK({slideCount:d,slidesToScroll:c,slidesToShow:h,infinite:l}),v={onMouseEnter:s,onMouseOver:o,onMouseLeave:a},A=[],_=0;_<m;_++){var g=(_+1)*c-1,x=l?g:(0,xI.clamp)(g,0,d-1),S=x-(c-1),w=l?S:(0,xI.clamp)(S,0,d-1),R=(0,fK.default)({"slick-active":l?p>=w&&p<=x:p===w}),C={message:"dots",index:_,slidesToScroll:c,currentSlide:p},I=this.clickHandler.bind(this,C);A=A.concat(Ng.default.createElement("li",{key:_,className:R},Ng.default.cloneElement(this.props.customPaging(_),{onClick:I})))}return Ng.default.cloneElement(this.props.appendDots(A),dK({className:this.props.dotsClass},v))}}]),t}(Ng.default.PureComponent);m_.Dots=EK;var Ch={};function JE(n){"@babel/helpers - typeof";return JE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},JE(n)}Object.defineProperty(Ch,"__esModule",{value:!0});Ch.PrevArrow=Ch.NextArrow=void 0;var lh=h4(re),u4=h4(f_),wK=We;function h4(n){return n&&n.__esModule?n:{default:n}}function ey(){return ey=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ey.apply(this,arguments)}function EI(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function ty(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?EI(Object(t),!0).forEach(function(r){MK(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):EI(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function MK(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function f4(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function wI(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function d4(n,e,t){return e&&wI(n.prototype,e),t&&wI(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function p4(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&KE(n,e)}function KE(n,e){return KE=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},KE(n,e)}function m4(n){var e=bK();return function(){var r=ny(n),i;if(e){var s=ny(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return TK(this,i)}}function TK(n,e){if(e&&(JE(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CK(n)}function CK(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function bK(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ny(n){return ny=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ny(n)}var RK=function(n){p4(t,n);var e=m4(t);function t(){return f4(this,t),e.apply(this,arguments)}return d4(t,[{key:"clickHandler",value:function(i,s){s&&s.preventDefault(),this.props.clickHandler(i,s)}},{key:"render",value:function(){var i={"slick-arrow":!0,"slick-prev":!0},s=this.clickHandler.bind(this,{message:"previous"});!this.props.infinite&&(this.props.currentSlide===0||this.props.slideCount<=this.props.slidesToShow)&&(i["slick-disabled"]=!0,s=null);var o={key:"0","data-role":"none",className:(0,u4.default)(i),style:{display:"block"},onClick:s},a={currentSlide:this.props.currentSlide,slideCount:this.props.slideCount},l;return this.props.prevArrow?l=lh.default.cloneElement(this.props.prevArrow,ty(ty({},o),a)):l=lh.default.createElement("button",ey({key:"0",type:"button"},o)," ","Previous"),l}}]),t}(lh.default.PureComponent);Ch.PrevArrow=RK;var PK=function(n){p4(t,n);var e=m4(t);function t(){return f4(this,t),e.apply(this,arguments)}return d4(t,[{key:"clickHandler",value:function(i,s){s&&s.preventDefault(),this.props.clickHandler(i,s)}},{key:"render",value:function(){var i={"slick-arrow":!0,"slick-next":!0},s=this.clickHandler.bind(this,{message:"next"});(0,wK.canGoNext)(this.props)||(i["slick-disabled"]=!0,s=null);var o={key:"1","data-role":"none",className:(0,u4.default)(i),style:{display:"block"},onClick:s},a={currentSlide:this.props.currentSlide,slideCount:this.props.slideCount},l;return this.props.nextArrow?l=lh.default.cloneElement(this.props.nextArrow,ty(ty({},o),a)):l=lh.default.createElement("button",ey({key:"1",type:"button"},o)," ","Next"),l}}]),t}(lh.default.PureComponent);Ch.NextArrow=PK;var g4=function(){if(typeof Map<"u")return Map;function n(e,t){var r=-1;return e.some(function(i,s){return i[0]===t?(r=s,!0):!1}),r}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(t){var r=n(this.__entries__,t),i=this.__entries__[r];return i&&i[1]},e.prototype.set=function(t,r){var i=n(this.__entries__,t);~i?this.__entries__[i][1]=r:this.__entries__.push([t,r])},e.prototype.delete=function(t){var r=this.__entries__,i=n(r,t);~i&&r.splice(i,1)},e.prototype.has=function(t){return!!~n(this.__entries__,t)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,r){r===void 0&&(r=null);for(var i=0,s=this.__entries__;i<s.length;i++){var o=s[i];t.call(r,o[1],o[0])}},e}()}(),$E=typeof window<"u"&&typeof document<"u"&&window.document===document,ry=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),IK=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(ry):function(n){return setTimeout(function(){return n(Date.now())},1e3/60)}}(),LK=2;function DK(n,e){var t=!1,r=!1,i=0;function s(){t&&(t=!1,n()),r&&a()}function o(){IK(s)}function a(){var l=Date.now();if(t){if(l-i<LK)return;r=!0}else t=!0,r=!1,setTimeout(o,e);i=l}return a}var BK=20,NK=["top","right","bottom","left","width","height","size","weight"],OK=typeof MutationObserver<"u",FK=function(){function n(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=DK(this.refresh.bind(this),BK)}return n.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},n.prototype.removeObserver=function(e){var t=this.observers_,r=t.indexOf(e);~r&&t.splice(r,1),!t.length&&this.connected_&&this.disconnect_()},n.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},n.prototype.updateObservers_=function(){var e=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return e.forEach(function(t){return t.broadcastActive()}),e.length>0},n.prototype.connect_=function(){!$E||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),OK?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},n.prototype.disconnect_=function(){!$E||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},n.prototype.onTransitionEnd_=function(e){var t=e.propertyName,r=t===void 0?"":t,i=NK.some(function(s){return!!~r.indexOf(s)});i&&this.refresh()},n.getInstance=function(){return this.instance_||(this.instance_=new n),this.instance_},n.instance_=null,n}(),v4=function(n,e){for(var t=0,r=Object.keys(e);t<r.length;t++){var i=r[t];Object.defineProperty(n,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return n},bh=function(n){var e=n&&n.ownerDocument&&n.ownerDocument.defaultView;return e||ry},y4=g_(0,0,0,0);function iy(n){return parseFloat(n)||0}function MI(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.reduce(function(r,i){var s=n["border-"+i+"-width"];return r+iy(s)},0)}function kK(n){for(var e=["top","right","bottom","left"],t={},r=0,i=e;r<i.length;r++){var s=i[r],o=n["padding-"+s];t[s]=iy(o)}return t}function UK(n){var e=n.getBBox();return g_(0,0,e.width,e.height)}function zK(n){var e=n.clientWidth,t=n.clientHeight;if(!e&&!t)return y4;var r=bh(n).getComputedStyle(n),i=kK(r),s=i.left+i.right,o=i.top+i.bottom,a=iy(r.width),l=iy(r.height);if(r.boxSizing==="border-box"&&(Math.round(a+s)!==e&&(a-=MI(r,"left","right")+s),Math.round(l+o)!==t&&(l-=MI(r,"top","bottom")+o)),!VK(n)){var c=Math.round(a+s)-e,h=Math.round(l+o)-t;Math.abs(c)!==1&&(a-=c),Math.abs(h)!==1&&(l-=h)}return g_(i.left,i.top,a,l)}var HK=function(){return typeof SVGGraphicsElement<"u"?function(n){return n instanceof bh(n).SVGGraphicsElement}:function(n){return n instanceof bh(n).SVGElement&&typeof n.getBBox=="function"}}();function VK(n){return n===bh(n).document.documentElement}function GK(n){return $E?HK(n)?UK(n):zK(n):y4}function jK(n){var e=n.x,t=n.y,r=n.width,i=n.height,s=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,o=Object.create(s.prototype);return v4(o,{x:e,y:t,width:r,height:i,top:t,right:e+r,bottom:i+t,left:e}),o}function g_(n,e,t,r){return{x:n,y:e,width:t,height:r}}var WK=function(){function n(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=g_(0,0,0,0),this.target=e}return n.prototype.isActive=function(){var e=GK(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},n.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},n}(),XK=function(){function n(e,t){var r=jK(t);v4(this,{target:e,contentRect:r})}return n}(),JK=function(){function n(e,t,r){if(this.activeObservations_=[],this.observations_=new g4,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=r}return n.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof bh(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new WK(e)),this.controller_.addObserver(this),this.controller_.refresh())}},n.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof bh(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},n.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},n.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},n.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(r){return new XK(r.target,r.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},n.prototype.clearActive=function(){this.activeObservations_.splice(0)},n.prototype.hasActive=function(){return this.activeObservations_.length>0},n}(),_4=typeof WeakMap<"u"?new WeakMap:new g4,x4=function(){function n(e){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var t=FK.getInstance(),r=new JK(e,t,this);_4.set(this,r)}return n}();["observe","unobserve","disconnect"].forEach(function(n){x4.prototype[n]=function(){var e;return(e=_4.get(this))[n].apply(e,arguments)}});var KK=function(){return typeof ry.ResizeObserver<"u"?ry.ResizeObserver:x4}();const $K=Object.freeze(Object.defineProperty({__proto__:null,default:KK},Symbol.toStringTag,{value:"Module"})),YK=q9($K);Object.defineProperty(h_,"__esModule",{value:!0});h_.InnerSlider=void 0;var ii=Jp(re),qK=Jp(qF),QK=Jp(GJ),ZK=Jp(f_),Tn=We,e$=p_,t$=m_,TI=Ch,n$=Jp(YK);function Jp(n){return n&&n.__esModule?n:{default:n}}function sy(n){"@babel/helpers - typeof";return sy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sy(n)}function oy(){return oy=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},oy.apply(this,arguments)}function r$(n,e){if(n==null)return{};var t=i$(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function i$(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function CI(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function dt(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?CI(Object(t),!0).forEach(function(r){Ut(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):CI(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function s$(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function bI(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function o$(n,e,t){return e&&bI(n.prototype,e),t&&bI(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function a$(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&YE(n,e)}function YE(n,e){return YE=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},YE(n,e)}function l$(n){var e=u$();return function(){var r=ay(n),i;if(e){var s=ay(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return c$(this,i)}}function c$(n,e){if(e&&(sy(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kt(n)}function kt(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function u$(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ay(n){return ay=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ay(n)}function Ut(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var h$=function(n){a$(t,n);var e=l$(t);function t(r){var i;s$(this,t),i=e.call(this,r),Ut(kt(i),"listRefHandler",function(o){return i.list=o}),Ut(kt(i),"trackRefHandler",function(o){return i.track=o}),Ut(kt(i),"adaptHeight",function(){if(i.props.adaptiveHeight&&i.list){var o=i.list.querySelector('[data-index="'.concat(i.state.currentSlide,'"]'));i.list.style.height=(0,Tn.getHeight)(o)+"px"}}),Ut(kt(i),"componentDidMount",function(){if(i.props.onInit&&i.props.onInit(),i.props.lazyLoad){var o=(0,Tn.getOnDemandLazySlides)(dt(dt({},i.props),i.state));o.length>0&&(i.setState(function(l){return{lazyLoadedList:l.lazyLoadedList.concat(o)}}),i.props.onLazyLoad&&i.props.onLazyLoad(o))}var a=dt({listRef:i.list,trackRef:i.track},i.props);i.updateState(a,!0,function(){i.adaptHeight(),i.props.autoplay&&i.autoPlay("update")}),i.props.lazyLoad==="progressive"&&(i.lazyLoadTimer=setInterval(i.progressiveLazyLoad,1e3)),i.ro=new n$.default(function(){i.state.animating?(i.onWindowResized(!1),i.callbackTimers.push(setTimeout(function(){return i.onWindowResized()},i.props.speed))):i.onWindowResized()}),i.ro.observe(i.list),document.querySelectorAll&&Array.prototype.forEach.call(document.querySelectorAll(".slick-slide"),function(l){l.onfocus=i.props.pauseOnFocus?i.onSlideFocus:null,l.onblur=i.props.pauseOnFocus?i.onSlideBlur:null}),window.addEventListener?window.addEventListener("resize",i.onWindowResized):window.attachEvent("onresize",i.onWindowResized)}),Ut(kt(i),"componentWillUnmount",function(){i.animationEndCallback&&clearTimeout(i.animationEndCallback),i.lazyLoadTimer&&clearInterval(i.lazyLoadTimer),i.callbackTimers.length&&(i.callbackTimers.forEach(function(o){return clearTimeout(o)}),i.callbackTimers=[]),window.addEventListener?window.removeEventListener("resize",i.onWindowResized):window.detachEvent("onresize",i.onWindowResized),i.autoplayTimer&&clearInterval(i.autoplayTimer),i.ro.disconnect()}),Ut(kt(i),"componentDidUpdate",function(o){if(i.checkImagesLoad(),i.props.onReInit&&i.props.onReInit(),i.props.lazyLoad){var a=(0,Tn.getOnDemandLazySlides)(dt(dt({},i.props),i.state));a.length>0&&(i.setState(function(h){return{lazyLoadedList:h.lazyLoadedList.concat(a)}}),i.props.onLazyLoad&&i.props.onLazyLoad(a))}i.adaptHeight();var l=dt(dt({listRef:i.list,trackRef:i.track},i.props),i.state),c=i.didPropsChange(o);c&&i.updateState(l,c,function(){i.state.currentSlide>=ii.default.Children.count(i.props.children)&&i.changeSlide({message:"index",index:ii.default.Children.count(i.props.children)-i.props.slidesToShow,currentSlide:i.state.currentSlide}),i.props.autoplay?i.autoPlay("update"):i.pause("paused")})}),Ut(kt(i),"onWindowResized",function(o){i.debouncedResize&&i.debouncedResize.cancel(),i.debouncedResize=(0,QK.default)(function(){return i.resizeWindow(o)},50),i.debouncedResize()}),Ut(kt(i),"resizeWindow",function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,a=!!(i.track&&i.track.node);if(a){var l=dt(dt({listRef:i.list,trackRef:i.track},i.props),i.state);i.updateState(l,o,function(){i.props.autoplay?i.autoPlay("update"):i.pause("paused")}),i.setState({animating:!1}),clearTimeout(i.animationEndCallback),delete i.animationEndCallback}}),Ut(kt(i),"updateState",function(o,a,l){var c=(0,Tn.initializedState)(o);o=dt(dt(dt({},o),c),{},{slideIndex:c.currentSlide});var h=(0,Tn.getTrackLeft)(o);o=dt(dt({},o),{},{left:h});var d=(0,Tn.getTrackCSS)(o);(a||ii.default.Children.count(i.props.children)!==ii.default.Children.count(o.children))&&(c.trackStyle=d),i.setState(c,l)}),Ut(kt(i),"ssrInit",function(){if(i.props.variableWidth){var o=0,a=0,l=[],c=(0,Tn.getPreClones)(dt(dt(dt({},i.props),i.state),{},{slideCount:i.props.children.length})),h=(0,Tn.getPostClones)(dt(dt(dt({},i.props),i.state),{},{slideCount:i.props.children.length}));i.props.children.forEach(function(I){l.push(I.props.style.width),o+=I.props.style.width});for(var d=0;d<c;d++)a+=l[l.length-1-d],o+=l[l.length-1-d];for(var p=0;p<h;p++)o+=l[p];for(var m=0;m<i.state.currentSlide;m++)a+=l[m];var v={width:o+"px",left:-a+"px"};if(i.props.centerMode){var A="".concat(l[i.state.currentSlide],"px");v.left="calc(".concat(v.left," + (100% - ").concat(A,") / 2 ) ")}return{trackStyle:v}}var _=ii.default.Children.count(i.props.children),g=dt(dt(dt({},i.props),i.state),{},{slideCount:_}),x=(0,Tn.getPreClones)(g)+(0,Tn.getPostClones)(g)+_,S=100/i.props.slidesToShow*x,w=100/x,R=-w*((0,Tn.getPreClones)(g)+i.state.currentSlide)*S/100;i.props.centerMode&&(R+=(100-w*S/100)/2);var C={width:S+"%",left:R+"%"};return{slideWidth:w+"%",trackStyle:C}}),Ut(kt(i),"checkImagesLoad",function(){var o=i.list&&i.list.querySelectorAll&&i.list.querySelectorAll(".slick-slide img")||[],a=o.length,l=0;Array.prototype.forEach.call(o,function(c){var h=function(){return++l&&l>=a&&i.onWindowResized()};if(!c.onclick)c.onclick=function(){return c.parentNode.focus()};else{var d=c.onclick;c.onclick=function(){d(),c.parentNode.focus()}}c.onload||(i.props.lazyLoad?c.onload=function(){i.adaptHeight(),i.callbackTimers.push(setTimeout(i.onWindowResized,i.props.speed))}:(c.onload=h,c.onerror=function(){h(),i.props.onLazyLoadError&&i.props.onLazyLoadError()}))})}),Ut(kt(i),"progressiveLazyLoad",function(){for(var o=[],a=dt(dt({},i.props),i.state),l=i.state.currentSlide;l<i.state.slideCount+(0,Tn.getPostClones)(a);l++)if(i.state.lazyLoadedList.indexOf(l)<0){o.push(l);break}for(var c=i.state.currentSlide-1;c>=-(0,Tn.getPreClones)(a);c--)if(i.state.lazyLoadedList.indexOf(c)<0){o.push(c);break}o.length>0?(i.setState(function(h){return{lazyLoadedList:h.lazyLoadedList.concat(o)}}),i.props.onLazyLoad&&i.props.onLazyLoad(o)):i.lazyLoadTimer&&(clearInterval(i.lazyLoadTimer),delete i.lazyLoadTimer)}),Ut(kt(i),"slideHandler",function(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,l=i.props,c=l.asNavFor,h=l.beforeChange,d=l.onLazyLoad,p=l.speed,m=l.afterChange,v=i.state.currentSlide,A=(0,Tn.slideHandler)(dt(dt(dt({index:o},i.props),i.state),{},{trackRef:i.track,useCSS:i.props.useCSS&&!a})),_=A.state,g=A.nextState;if(_){h&&h(v,_.currentSlide);var x=_.lazyLoadedList.filter(function(S){return i.state.lazyLoadedList.indexOf(S)<0});d&&x.length>0&&d(x),!i.props.waitForAnimate&&i.animationEndCallback&&(clearTimeout(i.animationEndCallback),m&&m(v),delete i.animationEndCallback),i.setState(_,function(){c&&i.asNavForIndex!==o&&(i.asNavForIndex=o,c.innerSlider.slideHandler(o)),g&&(i.animationEndCallback=setTimeout(function(){var S=g.animating,w=r$(g,["animating"]);i.setState(w,function(){i.callbackTimers.push(setTimeout(function(){return i.setState({animating:S})},10)),m&&m(_.currentSlide),delete i.animationEndCallback})},p))})}}),Ut(kt(i),"changeSlide",function(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,l=dt(dt({},i.props),i.state),c=(0,Tn.changeSlide)(l,o);if(!(c!==0&&!c)&&(a===!0?i.slideHandler(c,a):i.slideHandler(c),i.props.autoplay&&i.autoPlay("update"),i.props.focusOnSelect)){var h=i.list.querySelectorAll(".slick-current");h[0]&&h[0].focus()}}),Ut(kt(i),"clickHandler",function(o){i.clickable===!1&&(o.stopPropagation(),o.preventDefault()),i.clickable=!0}),Ut(kt(i),"keyHandler",function(o){var a=(0,Tn.keyHandler)(o,i.props.accessibility,i.props.rtl);a!==""&&i.changeSlide({message:a})}),Ut(kt(i),"selectHandler",function(o){i.changeSlide(o)}),Ut(kt(i),"disableBodyScroll",function(){var o=function(l){l=l||window.event,l.preventDefault&&l.preventDefault(),l.returnValue=!1};window.ontouchmove=o}),Ut(kt(i),"enableBodyScroll",function(){window.ontouchmove=null}),Ut(kt(i),"swipeStart",function(o){i.props.verticalSwiping&&i.disableBodyScroll();var a=(0,Tn.swipeStart)(o,i.props.swipe,i.props.draggable);a!==""&&i.setState(a)}),Ut(kt(i),"swipeMove",function(o){var a=(0,Tn.swipeMove)(o,dt(dt(dt({},i.props),i.state),{},{trackRef:i.track,listRef:i.list,slideIndex:i.state.currentSlide}));a&&(a.swiping&&(i.clickable=!1),i.setState(a))}),Ut(kt(i),"swipeEnd",function(o){var a=(0,Tn.swipeEnd)(o,dt(dt(dt({},i.props),i.state),{},{trackRef:i.track,listRef:i.list,slideIndex:i.state.currentSlide}));if(a){var l=a.triggerSlideHandler;delete a.triggerSlideHandler,i.setState(a),l!==void 0&&(i.slideHandler(l),i.props.verticalSwiping&&i.enableBodyScroll())}}),Ut(kt(i),"touchEnd",function(o){i.swipeEnd(o),i.clickable=!0}),Ut(kt(i),"slickPrev",function(){i.callbackTimers.push(setTimeout(function(){return i.changeSlide({message:"previous"})},0))}),Ut(kt(i),"slickNext",function(){i.callbackTimers.push(setTimeout(function(){return i.changeSlide({message:"next"})},0))}),Ut(kt(i),"slickGoTo",function(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(o=Number(o),isNaN(o))return"";i.callbackTimers.push(setTimeout(function(){return i.changeSlide({message:"index",index:o,currentSlide:i.state.currentSlide},a)},0))}),Ut(kt(i),"play",function(){var o;if(i.props.rtl)o=i.state.currentSlide-i.props.slidesToScroll;else if((0,Tn.canGoNext)(dt(dt({},i.props),i.state)))o=i.state.currentSlide+i.props.slidesToScroll;else return!1;i.slideHandler(o)}),Ut(kt(i),"autoPlay",function(o){i.autoplayTimer&&clearInterval(i.autoplayTimer);var a=i.state.autoplaying;if(o==="update"){if(a==="hovered"||a==="focused"||a==="paused")return}else if(o==="leave"){if(a==="paused"||a==="focused")return}else if(o==="blur"&&(a==="paused"||a==="hovered"))return;i.autoplayTimer=setInterval(i.play,i.props.autoplaySpeed+50),i.setState({autoplaying:"playing"})}),Ut(kt(i),"pause",function(o){i.autoplayTimer&&(clearInterval(i.autoplayTimer),i.autoplayTimer=null);var a=i.state.autoplaying;o==="paused"?i.setState({autoplaying:"paused"}):o==="focused"?(a==="hovered"||a==="playing")&&i.setState({autoplaying:"focused"}):a==="playing"&&i.setState({autoplaying:"hovered"})}),Ut(kt(i),"onDotsOver",function(){return i.props.autoplay&&i.pause("hovered")}),Ut(kt(i),"onDotsLeave",function(){return i.props.autoplay&&i.state.autoplaying==="hovered"&&i.autoPlay("leave")}),Ut(kt(i),"onTrackOver",function(){return i.props.autoplay&&i.pause("hovered")}),Ut(kt(i),"onTrackLeave",function(){return i.props.autoplay&&i.state.autoplaying==="hovered"&&i.autoPlay("leave")}),Ut(kt(i),"onSlideFocus",function(){return i.props.autoplay&&i.pause("focused")}),Ut(kt(i),"onSlideBlur",function(){return i.props.autoplay&&i.state.autoplaying==="focused"&&i.autoPlay("blur")}),Ut(kt(i),"render",function(){var o=(0,ZK.default)("slick-slider",i.props.className,{"slick-vertical":i.props.vertical,"slick-initialized":!0}),a=dt(dt({},i.props),i.state),l=(0,Tn.extractObject)(a,["fade","cssEase","speed","infinite","centerMode","focusOnSelect","currentSlide","lazyLoad","lazyLoadedList","rtl","slideWidth","slideHeight","listHeight","vertical","slidesToShow","slidesToScroll","slideCount","trackStyle","variableWidth","unslick","centerPadding","targetSlide","useCSS"]),c=i.props.pauseOnHover;l=dt(dt({},l),{},{onMouseEnter:c?i.onTrackOver:null,onMouseLeave:c?i.onTrackLeave:null,onMouseOver:c?i.onTrackOver:null,focusOnSelect:i.props.focusOnSelect&&i.clickable?i.selectHandler:null});var h;if(i.props.dots===!0&&i.state.slideCount>=i.props.slidesToShow){var d=(0,Tn.extractObject)(a,["dotsClass","slideCount","slidesToShow","currentSlide","slidesToScroll","clickHandler","children","customPaging","infinite","appendDots"]),p=i.props.pauseOnDotsHover;d=dt(dt({},d),{},{clickHandler:i.changeSlide,onMouseEnter:p?i.onDotsLeave:null,onMouseOver:p?i.onDotsOver:null,onMouseLeave:p?i.onDotsLeave:null}),h=ii.default.createElement(t$.Dots,d)}var m,v,A=(0,Tn.extractObject)(a,["infinite","centerMode","currentSlide","slideCount","slidesToShow","prevArrow","nextArrow"]);A.clickHandler=i.changeSlide,i.props.arrows&&(m=ii.default.createElement(TI.PrevArrow,A),v=ii.default.createElement(TI.NextArrow,A));var _=null;i.props.vertical&&(_={height:i.state.listHeight});var g=null;i.props.vertical===!1?i.props.centerMode===!0&&(g={padding:"0px "+i.props.centerPadding}):i.props.centerMode===!0&&(g={padding:i.props.centerPadding+" 0px"});var x=dt(dt({},_),g),S=i.props.touchMove,w={className:"slick-list",style:x,onClick:i.clickHandler,onMouseDown:S?i.swipeStart:null,onMouseMove:i.state.dragging&&S?i.swipeMove:null,onMouseUp:S?i.swipeEnd:null,onMouseLeave:i.state.dragging&&S?i.swipeEnd:null,onTouchStart:S?i.swipeStart:null,onTouchMove:i.state.dragging&&S?i.swipeMove:null,onTouchEnd:S?i.touchEnd:null,onTouchCancel:i.state.dragging&&S?i.swipeEnd:null,onKeyDown:i.props.accessibility?i.keyHandler:null},R={className:o,dir:"ltr",style:i.props.style};return i.props.unslick&&(w={className:"slick-list"},R={className:o}),ii.default.createElement("div",R,i.props.unslick?"":m,ii.default.createElement("div",oy({ref:i.listRefHandler},w),ii.default.createElement(e$.Track,oy({ref:i.trackRefHandler},l),i.props.children)),i.props.unslick?"":v,i.props.unslick?"":h)}),i.list=null,i.track=null,i.state=dt(dt({},qK.default),{},{currentSlide:i.props.initialSlide,slideCount:ii.default.Children.count(i.props.children)}),i.callbackTimers=[],i.clickable=!0,i.debouncedResize=null;var s=i.ssrInit();return i.state=dt(dt({},i.state),s),i}return o$(t,[{key:"didPropsChange",value:function(i){for(var s=!1,o=0,a=Object.keys(this.props);o<a.length;o++){var l=a[o];if(!i.hasOwnProperty(l)){s=!0;break}if(!(sy(i[l])==="object"||typeof i[l]=="function")&&i[l]!==this.props[l]){s=!0;break}}return s||ii.default.Children.count(this.props.children)!==ii.default.Children.count(i.children)}}]),t}(ii.default.Component);h_.InnerSlider=h$;var f$=function(n){return n.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}).toLowerCase()},d$=f$,p$=d$,m$=function(n){var e=/[height|width]$/;return e.test(n)},RI=function(n){var e="",t=Object.keys(n);return t.forEach(function(r,i){var s=n[r];r=p$(r),m$(r)&&typeof s=="number"&&(s=s+"px"),s===!0?e+=r:s===!1?e+="not "+r:e+="("+r+": "+s+")",i<t.length-1&&(e+=" and ")}),e},g$=function(n){var e="";return typeof n=="string"?n:n instanceof Array?(n.forEach(function(t,r){e+=RI(t),r<n.length-1&&(e+=", ")}),e):RI(n)},v$=g$,A4={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e=t(re);function t(s){return s&&s.__esModule?s:{default:s}}var r={accessibility:!0,adaptiveHeight:!1,afterChange:null,appendDots:function(o){return e.default.createElement("ul",{style:{display:"block"}},o)},arrows:!0,autoplay:!1,autoplaySpeed:3e3,beforeChange:null,centerMode:!1,centerPadding:"50px",className:"",cssEase:"ease",customPaging:function(o){return e.default.createElement("button",null,o+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:null,nextArrow:null,onEdge:null,onInit:null,onLazyLoadError:null,onReInit:null,pauseOnDotsHover:!1,pauseOnFocus:!1,pauseOnHover:!0,prevArrow:null,responsive:null,rows:1,rtl:!1,slide:"div",slidesPerRow:1,slidesToScroll:1,slidesToShow:1,speed:500,swipe:!0,swipeEvent:null,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,waitForAnimate:!0},i=r;n.default=i})(A4);var eA,PI;function y$(){if(PI)return eA;PI=1;function n(e){this.options=e,!e.deferSetup&&this.setup()}return n.prototype={constructor:n,setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){!this.initialised&&this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(e){return this.options===e||this.options.match===e}},eA=n,eA}var tA,II;function S4(){if(II)return tA;II=1;function n(r,i){var s=0,o=r.length,a;for(s;s<o&&(a=i(r[s],s),a!==!1);s++);}function e(r){return Object.prototype.toString.apply(r)==="[object Array]"}function t(r){return typeof r=="function"}return tA={isFunction:t,isArray:e,each:n},tA}var nA,LI;function _$(){if(LI)return nA;LI=1;var n=y$(),e=S4().each;function t(r,i){this.query=r,this.isUnconditional=i,this.handlers=[],this.mql=window.matchMedia(r);var s=this;this.listener=function(o){s.mql=o.currentTarget||o,s.assess()},this.mql.addListener(this.listener)}return t.prototype={constuctor:t,addHandler:function(r){var i=new n(r);this.handlers.push(i),this.matches()&&i.on()},removeHandler:function(r){var i=this.handlers;e(i,function(s,o){if(s.equals(r))return s.destroy(),!i.splice(o,1)})},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){e(this.handlers,function(r){r.destroy()}),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var r=this.matches()?"on":"off";e(this.handlers,function(i){i[r]()})}},nA=t,nA}var rA,DI;function x$(){if(DI)return rA;DI=1;var n=_$(),e=S4(),t=e.each,r=e.isFunction,i=e.isArray;function s(){if(!window.matchMedia)throw new Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!window.matchMedia("only all").matches}return s.prototype={constructor:s,register:function(o,a,l){var c=this.queries,h=l&&this.browserIsIncapable;return c[o]||(c[o]=new n(o,h)),r(a)&&(a={match:a}),i(a)||(a=[a]),t(a,function(d){r(d)&&(d={match:d}),c[o].addHandler(d)}),this},unregister:function(o,a){var l=this.queries[o];return l&&(a?l.removeHandler(a):(l.clear(),delete this.queries[o])),this}},rA=s,rA}var iA,BI;function A$(){if(BI)return iA;BI=1;var n=x$();return iA=new n,iA}(function(n){function e(D){"@babel/helpers - typeof";return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},e(D)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t=a(re),r=h_,i=a(v$),s=a(A4),o=We;function a(D){return D&&D.__esModule?D:{default:D}}function l(){return l=Object.assign||function(D){for(var N=1;N<arguments.length;N++){var T=arguments[N];for(var L in T)Object.prototype.hasOwnProperty.call(T,L)&&(D[L]=T[L])}return D},l.apply(this,arguments)}function c(D,N){var T=Object.keys(D);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(D);N&&(L=L.filter(function(H){return Object.getOwnPropertyDescriptor(D,H).enumerable})),T.push.apply(T,L)}return T}function h(D){for(var N=1;N<arguments.length;N++){var T=arguments[N]!=null?arguments[N]:{};N%2?c(Object(T),!0).forEach(function(L){R(D,L,T[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(T)):c(Object(T)).forEach(function(L){Object.defineProperty(D,L,Object.getOwnPropertyDescriptor(T,L))})}return D}function d(D,N){if(!(D instanceof N))throw new TypeError("Cannot call a class as a function")}function p(D,N){for(var T=0;T<N.length;T++){var L=N[T];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(D,L.key,L)}}function m(D,N,T){return N&&p(D.prototype,N),T&&p(D,T),Object.defineProperty(D,"prototype",{writable:!1}),D}function v(D,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function");D.prototype=Object.create(N&&N.prototype,{constructor:{value:D,writable:!0,configurable:!0}}),Object.defineProperty(D,"prototype",{writable:!1}),N&&A(D,N)}function A(D,N){return A=Object.setPrototypeOf||function(L,H){return L.__proto__=H,L},A(D,N)}function _(D){var N=S();return function(){var L=w(D),H;if(N){var J=w(this).constructor;H=Reflect.construct(L,arguments,J)}else H=L.apply(this,arguments);return g(this,H)}}function g(D,N){if(N&&(e(N)==="object"||typeof N=="function"))return N;if(N!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return x(D)}function x(D){if(D===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D}function S(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function w(D){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},w(D)}function R(D,N,T){return N in D?Object.defineProperty(D,N,{value:T,enumerable:!0,configurable:!0,writable:!0}):D[N]=T,D}var C=(0,o.canUseDOM)()&&A$(),I=function(D){v(T,D);var N=_(T);function T(L){var H;return d(this,T),H=N.call(this,L),R(x(H),"innerSliderRefHandler",function(J){return H.innerSlider=J}),R(x(H),"slickPrev",function(){return H.innerSlider.slickPrev()}),R(x(H),"slickNext",function(){return H.innerSlider.slickNext()}),R(x(H),"slickGoTo",function(J){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return H.innerSlider.slickGoTo(J,W)}),R(x(H),"slickPause",function(){return H.innerSlider.pause("paused")}),R(x(H),"slickPlay",function(){return H.innerSlider.autoPlay("play")}),H.state={breakpoint:null},H._responsiveMediaHandlers=[],H}return m(T,[{key:"media",value:function(H,J){C.register(H,J),this._responsiveMediaHandlers.push({query:H,handler:J})}},{key:"componentDidMount",value:function(){var H=this;if(this.props.responsive){var J=this.props.responsive.map(function($){return $.breakpoint});J.sort(function($,q){return $-q}),J.forEach(function($,q){var ce;q===0?ce=(0,i.default)({minWidth:0,maxWidth:$}):ce=(0,i.default)({minWidth:J[q-1]+1,maxWidth:$}),(0,o.canUseDOM)()&&H.media(ce,function(){H.setState({breakpoint:$})})});var W=(0,i.default)({minWidth:J.slice(-1)[0]});(0,o.canUseDOM)()&&this.media(W,function(){H.setState({breakpoint:null})})}}},{key:"componentWillUnmount",value:function(){this._responsiveMediaHandlers.forEach(function(H){C.unregister(H.query,H.handler)})}},{key:"render",value:function(){var H=this,J,W;this.state.breakpoint?(W=this.props.responsive.filter(function(ee){return ee.breakpoint===H.state.breakpoint}),J=W[0].settings==="unslick"?"unslick":h(h(h({},s.default),this.props),W[0].settings)):J=h(h({},s.default),this.props),J.centerMode&&(J.slidesToScroll>1,J.slidesToScroll=1),J.fade&&(J.slidesToShow>1,J.slidesToScroll>1,J.slidesToShow=1,J.slidesToScroll=1);var $=t.default.Children.toArray(this.props.children);$=$.filter(function(ee){return typeof ee=="string"?!!ee.trim():!!ee}),J.variableWidth&&(J.rows>1||J.slidesPerRow>1)&&(console.warn("variableWidth is not supported in case of rows > 1 or slidesPerRow > 1"),J.variableWidth=!1);for(var q=[],ce=null,O=0;O<$.length;O+=J.rows*J.slidesPerRow){for(var G=[],X=O;X<O+J.rows*J.slidesPerRow;X+=J.slidesPerRow){for(var Q=[],te=X;te<X+J.slidesPerRow&&(J.variableWidth&&$[te].props.style&&(ce=$[te].props.style.width),!(te>=$.length));te+=1)Q.push(t.default.cloneElement($[te],{key:100*O+10*X+te,tabIndex:-1,style:{width:"".concat(100/J.slidesPerRow,"%"),display:"inline-block"}}));G.push(t.default.createElement("div",{key:10*O+X},Q))}J.variableWidth?q.push(t.default.createElement("div",{key:O,style:{width:ce}},G)):q.push(t.default.createElement("div",{key:O},G))}if(J==="unslick"){var be="regular slider "+(this.props.className||"");return t.default.createElement("div",{className:be},$)}else q.length<=J.slidesToShow&&(J.unslick=!0);return t.default.createElement(r.InnerSlider,l({style:this.props.style,ref:this.innerSliderRefHandler},J),q)}}]),T}(t.default.Component);n.default=I})(YF);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e=t(YF);function t(i){return i&&i.__esModule?i:{default:i}}var r=e.default;n.default=r})($F);const S$=gy($F),NI=[{title:"Sale of the Month",subTitle:"Best Deals",offer:40,bgUrl:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2FRectangle%2054.svg?alt=media&token=c38cea1f-61d2-4541-b566-b54bed5f4c9d"},{title:"100% Fresh Fruit",subTitle:"Summer Sale",offer:25,bgUrl:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2Fmae-mu-9002s2VnOAY-unsplash.jpg?alt=media&token=0efd9de9-21b1-4fa0-98f7-b22ca47616e4"},{title:"85% Fat Free",subTitle:"Low-Fat Meat",offer:10,bgUrl:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2FRectangle%2054%20(1).svg?alt=media&token=653bc353-2038-44c8-97f0-8aa13f752bdd"}];function E$(){const n=MJ.useMediaQuery({maxWidth:425}),e={dots:!0,infinite:!0,arrows:!1,speed:1200,slidesToShow:1,slidesToScroll:1,fade:n,appendDots:t};function t(r){return b.jsx(b.Fragment,{children:b.jsx("div",{className:"flex justify-center sm:justify-between items-end mt-2 gap-x-2 absolute bottom-0 w-full py-2 md:hidden",children:b.jsx("div",{className:"flex items-center justify-center gap-x-1.5",children:r.map(i=>b.jsx("p",{className:`${i.props.className===""?"bg-gray-950":"bg-gray-100"} w-2.5 h-2.5 rounded-full transition-all`},i.key))})})})}return b.jsx("div",{className:"mx-auto 2xl:max-w-screen-2xl my-4 px-2 md:px-6",children:n?b.jsx(S$,{...e,children:NI.map((r,i)=>b.jsx(OI,{...r},i))}):b.jsx("div",{className:"flex items-center justify-evenly gap-x-8 lg:gap-x-8 w-full px-4 py-2 group",children:NI.map((r,i)=>b.jsx(OI,{...r},i))})})}const OI=({bgUrl:n,title:e,subTitle:t,offer:r})=>b.jsxs("div",{className:"w-full md:w-1/3 h-[500px] md:h-[550px] relative md:hover:-translate-y-6 transition-all duration-500 md:group-hover:scale-95 md:hover:!scale-105",children:[b.jsx("div",{className:"absolute w-full top-0 h-full -z-10",children:b.jsx("img",{src:n,alt:"slide pic",className:"h-full w-full object-cover rounded-md"})}),b.jsxs("div",{className:"h-full w-full z-10 flex flex-col items-center py-6 lg:py-8 rounded-md",children:[b.jsxs("div",{className:"flex flex-col items-center gap-y-4",children:[b.jsx("p",{className:"text-gray-200 text-lg",children:t}),b.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-100 cursor-pointer",children:e}),b.jsxs("p",{className:"text-gray-200 text-xl",children:["Up To ",r,"%  ",b.jsx("span",{className:"bg-white text-accent-700 text-base px-3 py-1 rounded-xl",children:"OFF"})]})]}),b.jsxs("button",{className:"flex items-center my-4 md:my-6 gap-x-2 text-xl text-accent-800 hover:bg-accent-50/60 transition-all duration-500 bg-white px-4 py-2 md:px-6 md:py-3 rounded-xl",children:[b.jsx("span",{children:"Shop Now"}),b.jsx(Ns,{})]})]})]}),w$=[{sellerName:"John",img:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2FRectangle%204338.svg?alt=media&token=1f7ab351-dcc5-46df-a479-eda4d0f4dfe0",sellerShogaln:"ABC Store"},{sellerName:"Alice",img:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2FRectangle%204338%20(3).svg?alt=media&token=8889bc8b-42c2-47e0-965c-cae8836dfc1a",sellerShogaln:"XYZ Market"},{sellerName:"Bob",img:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2FRectangle%204338%20(2).svg?alt=media&token=f74a301e-5871-45e7-bca3-b992ddcd1f7f",sellerShogaln:"123 Shop"},{sellerName:"Emily",img:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2FRectangle%204338%20(1).svg?alt=media&token=9dd41abb-7c79-477a-bce2-585a5937e858",sellerShogaln:"Best Deals Co."}];function M$(){return b.jsxs("div",{className:"mx-auto 2xl:max-w-screen-2xl mt-6 md:mt-8",children:[b.jsxs("div",{className:"w-full flex flex-col items-center justify-center md:gap-y-3",children:[b.jsx("span",{className:"text-sm md:text-lg text-accent-600 font-semibold",children:"Our Best Seller's"}),b.jsx("h2",{className:"text-2xl md:text-5xl text-center font-bold",children:"Meet Awesome Seller's !"}),b.jsx("span",{className:"text-center w-3/5 text-lg hidden md:inline",children:"Discover a wide range of products from various sellers. 💼 Join our community and become a seller to showcase your unique items. 🌟 Share your creations and reach a global audience. 🌍 Start your selling journey today and turn your passion into profits! 💰"})]}),b.jsx("div",{id:"wrapper",className:"px-4 py-3 md:py-6 flex items-center flex-wrap justify-evenly gap-x-8 gap-y-12 w-full",children:w$.map((n,e)=>b.jsxs("div",{className:"w-24 h-32 md:w-1/5 md:h-96 flex flex-col relative md:cursor-pointer",children:[b.jsx("div",{className:"w-full h-3/4 md:h-full",children:b.jsx("img",{src:n.img,alt:n.sellerName,className:"w-full h-full rounded-full md:rounded-lg object-cover"})}),b.jsx("div",{className:"w-full h-1/4 md:absolute md:bottom-0 md:flex items-center justify-center px-2 py-1 mt-4 md:mt-0 md:px-4 md:py-2",children:b.jsxs("div",{className:"w-11/12 flex flex-col items-center justify-center md:rounded-md md:bg-gray-50 md:hover:scale-105 transition-all h-full relative",children:[b.jsx("span",{className:"hidden md:block absolute z-0 bottom-0 left-0",children:b.jsx("svg",{width:"61",height:"30",viewBox:"0 0 61 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("circle",{cx:"16",cy:"45",r:"45",fill:"#13C296",fillOpacity:"0.11"})})}),b.jsxs("div",{children:[b.jsx("h2",{className:"my-1 text-center md:text-2xl font-bold text-lg",children:n.sellerName}),b.jsx("span",{className:"text-center text-xs font-semibold line-clamp-1",children:n.sellerShogaln})]}),b.jsx("span",{className:"hidden md:block absolute z-0 top-0 right-0",children:b.jsx("span",{children:b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"25",fill:"none",viewBox:"0 0 20 25",children:[b.jsx("circle",{cx:".706257",cy:"24.3533",r:".646687",fill:"#3758F9",transform:"rotate(-90 .706257 24.3533)"}),b.jsx("circle",{cx:"6.39687",cy:"24.3533",r:".646687",fill:"#3758F9",transform:"rotate(-90 6.39687 24.3533)"}),b.jsx("circle",{cx:"12.0881",cy:"24.3533",r:".646687",fill:"#3758F9",transform:"rotate(-90 12.0881 24.3533)"}),b.jsx("circle",{cx:"17.7787",cy:"24.3533",r:".646687",fill:"#3758F9",transform:"rotate(-90 17.7787 24.3533)"}),b.jsx("circle",{cx:".706257",cy:"18.6624",r:".646687",fill:"#3758F9",transform:"rotate(-90 .706257 18.6624)"}),b.jsx("circle",{cx:"6.39687",cy:"18.6624",r:".646687",fill:"#3758F9",transform:"rotate(-90 6.39687 18.6624)"}),b.jsx("circle",{cx:"12.0881",cy:"18.6624",r:".646687",fill:"#3758F9",transform:"rotate(-90 12.0881 18.6624)"}),b.jsx("circle",{cx:"17.7787",cy:"18.6624",r:".646687",fill:"#3758F9",transform:"rotate(-90 17.7787 18.6624)"}),b.jsx("circle",{cx:".706257",cy:"12.9717",r:".646687",fill:"#3758F9",transform:"rotate(-90 .706257 12.9717)"}),b.jsx("circle",{cx:"6.39687",cy:"12.9717",r:".646687",fill:"#3758F9",transform:"rotate(-90 6.39687 12.9717)"}),b.jsx("circle",{cx:"12.0881",cy:"12.9717",r:".646687",fill:"#3758F9",transform:"rotate(-90 12.0881 12.9717)"}),b.jsx("circle",{cx:"17.7787",cy:"12.9717",r:".646687",fill:"#3758F9",transform:"rotate(-90 17.7787 12.9717)"}),b.jsx("circle",{cx:".706257",cy:"7.2808",r:".646687",fill:"#3758F9",transform:"rotate(-90 .706257 7.2808)"}),b.jsx("circle",{cx:"6.39687",cy:"7.2808",r:".646687",fill:"#3758F9",transform:"rotate(-90 6.39687 7.2808)"}),b.jsx("circle",{cx:"12.0881",cy:"7.2808",r:".646687",fill:"#3758F9",transform:"rotate(-90 12.0881 7.2808)"}),b.jsx("circle",{cx:"17.7787",cy:"7.2808",r:".646687",fill:"#3758F9",transform:"rotate(-90 17.7787 7.2808)"}),b.jsx("circle",{cx:".706257",cy:"1.58989",r:".646687",fill:"#3758F9",transform:"rotate(-90 .706257 1.58989)"}),b.jsx("circle",{cx:"6.39687",cy:"1.58989",r:".646687",fill:"#3758F9",transform:"rotate(-90 6.39687 1.58989)"}),b.jsx("circle",{cx:"12.0881",cy:"1.58989",r:".646687",fill:"#3758F9",transform:"rotate(-90 12.0881 1.58989)"}),b.jsx("circle",{cx:"17.7787",cy:"1.58989",r:".646687",fill:"#3758F9",transform:"rotate(-90 17.7787 1.58989)"})]})})})]})})]},e))})]})}const nu=[{title:"Living Room",img:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2FPaste%20image%2003.png?alt=media&token=1970e707-5bd4-473b-84a9-954d05a3e9f7"},{title:"Bedroom",img:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2FImage%20Placeholder%2001.png?alt=media&token=14009cfd-68a3-4f84-a831-8c661bff903c"},{title:"Kitchen",img:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2FImage%20Placeholder%202.png?alt=media&token=0b304ed1-2caf-4a3a-923c-8af0eb585972"}];function T$(){return b.jsx("div",{className:"mx-auto 2xl:max-w-screen-2xl mt-6 md:mt-8",children:b.jsxs("div",{id:"wrapper",className:"flex flex-col md:flex-row items-center justify-center gap-y-4 gap-x-6 lg:gap-x-10 w-full px-4 py-2 h-96 md:h-[500px] lg:h-[550px]",children:[b.jsxs("div",{className:"md:w-1/3 w-full h-full relative",children:[b.jsx("div",{className:"w-full h-full absolute -z-10",children:b.jsx("img",{src:nu[0].img,alt:"",className:"h-full w-full object-cover"})}),b.jsxs("div",{className:"z-10 h-full w-full px-4 py-2 md:px-6 md:py-4 flex items-start flex-col gap-y-2",children:[b.jsx("h2",{className:"text-3xl md:text-4xl",children:nu[0].title}),b.jsxs("button",{className:"flex items-center gap-x-1 border-b-2 border-b-black",children:[b.jsx("span",{children:"Shop Now"}),b.jsx("span",{children:b.jsx(Ns,{})})]})]})]}),b.jsxs("div",{className:"md:w-1/2 w-full h-full flex flex-col gap-y-4 md:gap-y-5",children:[b.jsxs("div",{className:"w-full h-1/2 relative",children:[b.jsx("div",{className:"w-full h-full absolute -z-10",children:b.jsx("img",{src:nu[1].img,alt:"",className:"h-full w-full object-cover"})}),b.jsxs("div",{className:"z-10 h-full w-full px-4 py-2 md:px-6 md:py-4 flex items-start flex-col gap-y-2",children:[b.jsx("h2",{className:"text-3xl md:text-4xl",children:nu[1].title}),b.jsxs("button",{className:"flex items-center gap-x-1 border-b-2 border-b-black",children:[b.jsx("span",{children:"Shop Now"}),b.jsx("span",{children:b.jsx(Ns,{})})]})]})]}),b.jsxs("div",{className:"w-full h-1/2 relative",children:[b.jsx("div",{className:"w-full h-full absolute -z-10",children:b.jsx("img",{src:nu[2].img,alt:"",className:"h-full w-full object-cover"})}),b.jsxs("div",{className:"z-10 h-full w-full px-4 py-2 md:px-6 md:py-4 flex items-start flex-col gap-y-2",children:[b.jsx("h2",{className:"text-3xl md:text-4xl",children:nu[2].title}),b.jsxs("button",{className:"flex items-center gap-x-1 border-b-2 border-b-black",children:[b.jsx("span",{children:"Shop Now"}),b.jsx("span",{children:b.jsx(Ns,{})})]})]})]})]})]})})}function wr(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}class C$ extends re.Component{componentDidMount(){this.element=this.ref.current,setTimeout(()=>{var e,t;((t=this.element)===null||t===void 0||(e=t.parentElement)===null||e===void 0?void 0:e.querySelector(":hover"))===this.element&&this.onMouseEnter()},0)}componentWillUnmount(){this.transitionTimeout&&clearTimeout(this.transitionTimeout),this.updateCall&&cancelAnimationFrame(this.updateCall)}render(){const{children:e,className:t}=this.props;return b.jsx("div",{ref:this.ref,className:t,style:{...this.props.style,...this.state.style,transition:"".concat(this.settings.speed,"ms ").concat(this.settings.easing)},onMouseEnter:this.onMouseEnter,onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave,children:e})}constructor(e){super(e),wr(this,"ref",void 0),wr(this,"width",void 0),wr(this,"height",void 0),wr(this,"left",void 0),wr(this,"top",void 0),wr(this,"transitionTimeout",void 0),wr(this,"element",void 0),wr(this,"reverse",void 0),wr(this,"updateCall",void 0),wr(this,"settings",void 0),wr(this,"onMouseEnter",()=>{const{style:t}=this.state;this.updateElementPosition(),this.setState({...this.state,style:{...t,willChange:"transform"}})}),wr(this,"reset",()=>{window.requestAnimationFrame(()=>{this.setState({...this.state,style:{transform:"perspective(".concat(this.settings.perspective,"px) ")+"rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)"}})})}),wr(this,"onMouseMove",t=>{t.persist(),this.updateCall!==null&&window.cancelAnimationFrame(this.updateCall),this.updateCall=requestAnimationFrame(this.update.bind(this,t))}),wr(this,"onMouseLeave",()=>{this.settings.reset&&this.reset()}),wr(this,"getValues",t=>{const r=(t.nativeEvent.clientX-this.left)/this.width,i=(t.nativeEvent.clientY-this.top)/this.height,s=Math.min(Math.max(r,0),1),o=Math.min(Math.max(i,0),1),a=(this.reverse*(this.settings.max/2-s*this.settings.max)).toFixed(2),l=(this.reverse*(o*this.settings.max-this.settings.max/2)).toFixed(2),c=s*100,h=o*100;return{tiltX:a,tiltY:l,percentageX:c,percentageY:h}}),wr(this,"updateElementPosition",()=>{var t,r,i,s,o;const a=(t=this.element)===null||t===void 0?void 0:t.getBoundingClientRect();var l;this.width=(l=(r=this.element)===null||r===void 0?void 0:r.offsetWidth)!==null&&l!==void 0?l:0;var c;this.height=(c=(i=this.element)===null||i===void 0?void 0:i.offsetHeight)!==null&&c!==void 0?c:0;var h;this.left=(h=(s=a)===null||s===void 0?void 0:s.left)!==null&&h!==void 0?h:0;var d;this.top=(d=(o=a)===null||o===void 0?void 0:o.top)!==null&&d!==void 0?d:0}),wr(this,"update",t=>{const r=this.getValues(t),{style:i}=this.state;this.setState({...this.state,style:{...i,transform:"perspective(".concat(this.settings.perspective,"px) ")+"rotateX(".concat(this.settings.axis==="x"?0:r.tiltY,"deg) ")+"rotateY(".concat(this.settings.axis==="y"?0:r.tiltX,"deg) ")+"scale3d(".concat(this.settings.scale,", ").concat(this.settings.scale,", ").concat(this.settings.scale,")")}}),this.updateCall=null}),this.ref=re.createRef(),this.width=0,this.height=0,this.left=0,this.top=0,this.transitionTimeout=null,this.updateCall=null,this.element=null,this.settings={reverse:!1,max:35,perspective:1e3,easing:"cubic-bezier(.03,.98,.52,.99)",scale:1.1,speed:1e3,transition:!0,axis:null,reset:!0,...e.options},this.state={style:{transition:"".concat(this.settings.speed,"ms ").concat(this.settings.easing)}},this.reverse=this.settings.reverse?-1:1}}const b$=[{title:"New Man Collections",subTitle:"Elevate your style with modern cuts, luxurious fabrics, and timeless designs. From sharp tailored suits to casual everyday essentials, this collection has everything you need to look and feel your best.",bgurl:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2Fjade-aucamp-Kj6LgGceZ4M-unsplash.jpg?alt=media&token=bf06f396-12d7-4c1b-a4a8-3b837d76c63a"},{title:"Woman Winter Collections",subTitle:"Discover the latest woman winter collections, featuring cozy 🧥 outerwear, stylish ❄️ accessories, and chic 🧣 scarves to keep you warm and fashionable during the chilly season. From elegant coats to trendy boots.",bgurl:"https://firebasestorage.googleapis.com/v0/b/ecovibe-c6720.appspot.com/o/AppImages%2Fdom-hill-nimElTcTNyY-unsplash.jpg?alt=media&token=360a3cac-5de4-4bc6-9b8c-02818769b5a2"}];function R$(){return b.jsxs("div",{className:"mx-auto 2xl:max-w-screen-2xl",children:[b.jsxs("div",{className:"w-full px-2 my-1 md:px-4 flex items-center justify-between",children:[b.jsx("h2",{className:"text-2xl font-bold  md:text-3xl",children:"Best Selling Items"}),b.jsxs("span",{className:"flex items-center gap-x-1 md:gap-x-1.5 md:text-lg text-sm text-gray-500 hover:text-accent-300 transition-all cursor-pointer",children:["View All ",b.jsx(Ns,{className:"text-xs md:text-base"})]})]}),b.jsx("div",{id:"wrapper",className:"flex flex-col gap-y-6 md:flex-row items-center justify-evenly w-full px-4 py-4 md:py-6",children:b$.map((n,e)=>b.jsx(C$,{className:"w-full md:w-2/5 h-48 md:h-64 relative cursor-pointer",children:b.jsxs("div",{className:"w-full h-full",children:[b.jsx("div",{className:"absolute w-full h-full -z-10",children:b.jsx("img",{src:n.bgurl,alt:"banner-pic",className:"w-full h-full object-cover object-top rounded-xl"})}),b.jsxs("div",{className:"z-10 flex flex-col px-4 py-4 bg-gray-800/35 rounded-xl h-full md: justify-evenly",children:[b.jsx("h2",{className:"text-xl md:text-2xl font-bold text-white",children:n.title}),b.jsx("span",{className:"line-clamp-3 text-gray-300",children:n.subTitle}),b.jsx("button",{className:"bg-white text-gray-950 hover:bg-gray-950 hover:text-white transition-all md:text-lg font-semibold rounded-xl text-sm my-3 px-4 py-2 w-fit md:self-end md:px-5 md:py-2.5",children:"Shop Now"})]})]})},e))})]})}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Kp="161",zl={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Hl={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},E4=0,qE=1,w4=2,P$=3,M4=0,v_=1,Ed=2,bs=3,vo=0,di=1,ds=2,Ko=0,cc=1,QE=2,ZE=3,ew=4,T4=5,Ra=100,C4=101,b4=102,tw=103,nw=104,R4=200,P4=201,I4=202,L4=203,ly=204,cy=205,D4=206,B4=207,N4=208,O4=209,F4=210,k4=211,U4=212,z4=213,H4=214,V4=0,G4=1,j4=2,hp=3,W4=4,X4=5,J4=6,K4=7,$p=0,$4=1,Y4=2,co=0,q4=1,Q4=2,Z4=3,QT=4,ek=5,tk=6,rw="attached",nk="detached",y_=300,ta=301,il=302,fp=303,dp=304,qh=306,sl=1e3,Rr=1001,Rh=1002,Nn=1003,pp=1004,I$=1004,Pa=1005,L$=1005,gn=1006,ch=1007,D$=1007,gs=1008,B$=1008,uo=1009,rk=1010,ik=1011,__=1012,ZT=1013,Vo=1014,ps=1015,Ph=1016,eC=1017,tC=1018,Ka=1020,sk=1021,ci=1023,ok=1024,ak=1025,$a=1026,Mc=1027,lk=1028,nC=1029,ck=1030,rC=1031,iC=1033,$0=33776,Y0=33777,q0=33778,Q0=33779,iw=35840,sw=35841,ow=35842,aw=35843,sC=36196,lw=37492,cw=37496,uw=37808,hw=37809,fw=37810,dw=37811,pw=37812,mw=37813,gw=37814,vw=37815,yw=37816,_w=37817,xw=37818,Aw=37819,Sw=37820,Ew=37821,Z0=36492,ww=36494,Mw=36495,uk=36283,Tw=36284,Cw=36285,bw=36286,hk=2200,fk=2201,dk=2202,Ih=2300,Tc=2301,ev=2302,Zl=2400,ec=2401,mp=2402,x_=2500,oC=2501,pk=0,aC=1,uy=2,lC=3e3,Ya=3001,mk=3200,gk=3201,dl=0,vk=1,Oi="",rr="srgb",yo="srgb-linear",A_="display-p3",Yp="display-p3-linear",gp="linear",hn="srgb",vp="rec709",yp="p3",N$=0,Vl=7680,O$=7681,F$=7682,k$=7683,U$=34055,z$=34056,H$=5386,V$=512,G$=513,j$=514,W$=515,X$=516,J$=517,K$=518,Rw=519,yk=512,_k=513,xk=514,cC=515,Ak=516,Sk=517,Ek=518,wk=519,_p=35044,$$=35048,Y$=35040,q$=35045,Q$=35049,Z$=35041,eY=35046,tY=35050,nY=35042,rY="100",Pw="300 es",hy=1035,so=2e3,xp=2001;class _o{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const Vr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let FI=1234567;const uc=Math.PI/180,Lh=180/Math.PI;function Vi(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Vr[n&255]+Vr[n>>8&255]+Vr[n>>16&255]+Vr[n>>24&255]+"-"+Vr[e&255]+Vr[e>>8&255]+"-"+Vr[e>>16&15|64]+Vr[e>>24&255]+"-"+Vr[t&63|128]+Vr[t>>8&255]+"-"+Vr[t>>16&255]+Vr[t>>24&255]+Vr[r&255]+Vr[r>>8&255]+Vr[r>>16&255]+Vr[r>>24&255]).toLowerCase()}function Fn(n,e,t){return Math.max(e,Math.min(t,n))}function uC(n,e){return(n%e+e)%e}function iY(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function sY(n,e,t){return n!==e?(t-n)/(e-n):0}function wd(n,e,t){return(1-t)*n+t*e}function oY(n,e,t,r){return wd(n,e,1-Math.exp(-t*r))}function aY(n,e=1){return e-Math.abs(uC(n,e*2)-e)}function lY(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function cY(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function uY(n,e){return n+Math.floor(Math.random()*(e-n+1))}function hY(n,e){return n+Math.random()*(e-n)}function fY(n){return n*(.5-Math.random())}function dY(n){n!==void 0&&(FI=n);let e=FI+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function pY(n){return n*uc}function mY(n){return n*Lh}function Iw(n){return(n&n-1)===0&&n!==0}function gY(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function fy(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function vY(n,e,t,r,i){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+r)/2),h=o((e+r)/2),d=s((e-r)/2),p=o((e-r)/2),m=s((r-e)/2),v=o((r-e)/2);switch(i){case"XYX":n.set(a*h,l*d,l*p,a*c);break;case"YZY":n.set(l*p,a*h,l*d,a*c);break;case"ZXZ":n.set(l*d,l*p,a*h,a*c);break;case"XZX":n.set(a*h,l*v,l*m,a*c);break;case"YXY":n.set(l*m,a*h,l*v,a*c);break;case"ZYZ":n.set(l*v,l*m,a*h,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function ui(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Rt(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const Mk={DEG2RAD:uc,RAD2DEG:Lh,generateUUID:Vi,clamp:Fn,euclideanModulo:uC,mapLinear:iY,inverseLerp:sY,lerp:wd,damp:oY,pingpong:aY,smoothstep:lY,smootherstep:cY,randInt:uY,randFloat:hY,randFloatSpread:fY,seededRandom:dY,degToRad:pY,radToDeg:mY,isPowerOfTwo:Iw,ceilPowerOfTwo:gY,floorPowerOfTwo:fy,setQuaternionFromProperEuler:vY,normalize:Rt,denormalize:ui};class _e{constructor(e=0,t=0){_e.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Fn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Nt{constructor(e,t,r,i,s,o,a,l,c){Nt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,c)}set(e,t,r,i,s,o,a,l,c){const h=this.elements;return h[0]=e,h[1]=i,h[2]=a,h[3]=t,h[4]=s,h[5]=l,h[6]=r,h[7]=o,h[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],l=r[6],c=r[1],h=r[4],d=r[7],p=r[2],m=r[5],v=r[8],A=i[0],_=i[3],g=i[6],x=i[1],S=i[4],w=i[7],R=i[2],C=i[5],I=i[8];return s[0]=o*A+a*x+l*R,s[3]=o*_+a*S+l*C,s[6]=o*g+a*w+l*I,s[1]=c*A+h*x+d*R,s[4]=c*_+h*S+d*C,s[7]=c*g+h*w+d*I,s[2]=p*A+m*x+v*R,s[5]=p*_+m*S+v*C,s[8]=p*g+m*w+v*I,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8];return t*o*h-t*a*c-r*s*h+r*a*l+i*s*c-i*o*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],d=h*o-a*c,p=a*l-h*s,m=c*s-o*l,v=t*d+r*p+i*m;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const A=1/v;return e[0]=d*A,e[1]=(i*c-h*r)*A,e[2]=(a*r-i*o)*A,e[3]=p*A,e[4]=(h*t-i*l)*A,e[5]=(i*s-a*t)*A,e[6]=m*A,e[7]=(r*l-c*t)*A,e[8]=(o*t-r*s)*A,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(r*l,r*c,-r*(l*o+c*a)+o+e,-i*c,i*l,-i*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(sA.makeScale(e,t)),this}rotate(e){return this.premultiply(sA.makeRotation(-e)),this}translate(e,t){return this.premultiply(sA.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const sA=new Nt;function Tk(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const yY={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function ju(n,e){return new yY[n](e)}function Ap(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function Ck(){const n=Ap("canvas");return n.style.display="block",n}const kI={};function hc(n){n in kI||(kI[n]=!0,console.warn(n))}const UI=new Nt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),zI=new Nt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Og={[yo]:{transfer:gp,primaries:vp,toReference:n=>n,fromReference:n=>n},[rr]:{transfer:hn,primaries:vp,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[Yp]:{transfer:gp,primaries:yp,toReference:n=>n.applyMatrix3(zI),fromReference:n=>n.applyMatrix3(UI)},[A_]:{transfer:hn,primaries:yp,toReference:n=>n.convertSRGBToLinear().applyMatrix3(zI),fromReference:n=>n.applyMatrix3(UI).convertLinearToSRGB()}},_Y=new Set([yo,Yp]),rn={enabled:!0,_workingColorSpace:yo,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!_Y.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const r=Og[e].toReference,i=Og[t].fromReference;return i(r(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return Og[n].primaries},getTransfer:function(n){return n===Oi?gp:Og[n].transfer}};function uh(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function oA(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let ru;class hC{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{ru===void 0&&(ru=Ap("canvas")),ru.width=e.width,ru.height=e.height;const r=ru.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=ru}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Ap("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=uh(s[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(uh(t[r]/255)*255):t[r]=uh(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let xY=0;class tc{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:xY++}),this.uuid=Vi(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(aA(i[o].image)):s.push(aA(i[o]))}else s=aA(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function aA(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?hC.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let AY=0;class xn extends _o{constructor(e=xn.DEFAULT_IMAGE,t=xn.DEFAULT_MAPPING,r=Rr,i=Rr,s=gn,o=gs,a=ci,l=uo,c=xn.DEFAULT_ANISOTROPY,h=Oi){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:AY++}),this.uuid=Vi(),this.name="",this.source=new tc(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new _e(0,0),this.repeat=new _e(1,1),this.center=new _e(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Nt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof h=="string"?this.colorSpace=h:(hc("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=h===Ya?rr:Oi),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==y_)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case sl:e.x=e.x-Math.floor(e.x);break;case Rr:e.x=e.x<0?0:1;break;case Rh:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case sl:e.y=e.y-Math.floor(e.y);break;case Rr:e.y=e.y<0?0:1;break;case Rh:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return hc("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===rr?Ya:lC}set encoding(e){hc("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===Ya?rr:Oi}}xn.DEFAULT_IMAGE=null;xn.DEFAULT_MAPPING=y_;xn.DEFAULT_ANISOTROPY=1;class sn{constructor(e=0,t=0,r=0,i=1){sn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const l=e.elements,c=l[0],h=l[4],d=l[8],p=l[1],m=l[5],v=l[9],A=l[2],_=l[6],g=l[10];if(Math.abs(h-p)<.01&&Math.abs(d-A)<.01&&Math.abs(v-_)<.01){if(Math.abs(h+p)<.1&&Math.abs(d+A)<.1&&Math.abs(v+_)<.1&&Math.abs(c+m+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const S=(c+1)/2,w=(m+1)/2,R=(g+1)/2,C=(h+p)/4,I=(d+A)/4,D=(v+_)/4;return S>w&&S>R?S<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(S),i=C/r,s=I/r):w>R?w<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(w),r=C/i,s=D/i):R<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(R),r=I/s,i=D/s),this.set(r,i,s,t),this}let x=Math.sqrt((_-v)*(_-v)+(d-A)*(d-A)+(p-h)*(p-h));return Math.abs(x)<.001&&(x=1),this.x=(_-v)/x,this.y=(d-A)/x,this.z=(p-h)/x,this.w=Math.acos((c+m+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class bk extends _o{constructor(e=1,t=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new sn(0,0,e,t),this.scissorTest=!1,this.viewport=new sn(0,0,e,t);const i={width:e,height:t,depth:1};r.encoding!==void 0&&(hc("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===Ya?rr:Oi),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:gn,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},r),this.texture=new xn(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps,this.texture.internalFormat=r.internalFormat,this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new tc(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class ks extends bk{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}}class S_ extends xn{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Nn,this.minFilter=Nn,this.wrapR=Rr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class SY extends ks{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new S_(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class fC extends xn{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Nn,this.minFilter=Nn,this.wrapR=Rr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class EY extends ks{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new fC(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class wY extends ks{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<r;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class vr{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,o,a){let l=r[i+0],c=r[i+1],h=r[i+2],d=r[i+3];const p=s[o+0],m=s[o+1],v=s[o+2],A=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=h,e[t+3]=d;return}if(a===1){e[t+0]=p,e[t+1]=m,e[t+2]=v,e[t+3]=A;return}if(d!==A||l!==p||c!==m||h!==v){let _=1-a;const g=l*p+c*m+h*v+d*A,x=g>=0?1:-1,S=1-g*g;if(S>Number.EPSILON){const R=Math.sqrt(S),C=Math.atan2(R,g*x);_=Math.sin(_*C)/R,a=Math.sin(a*C)/R}const w=a*x;if(l=l*_+p*w,c=c*_+m*w,h=h*_+v*w,d=d*_+A*w,_===1-a){const R=1/Math.sqrt(l*l+c*c+h*h+d*d);l*=R,c*=R,h*=R,d*=R}}e[t]=l,e[t+1]=c,e[t+2]=h,e[t+3]=d}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],l=r[i+1],c=r[i+2],h=r[i+3],d=s[o],p=s[o+1],m=s[o+2],v=s[o+3];return e[t]=a*v+h*d+l*m-c*p,e[t+1]=l*v+h*p+c*d-a*m,e[t+2]=c*v+h*m+a*p-l*d,e[t+3]=h*v-a*d-l*p-c*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(r/2),h=a(i/2),d=a(s/2),p=l(r/2),m=l(i/2),v=l(s/2);switch(o){case"XYZ":this._x=p*h*d+c*m*v,this._y=c*m*d-p*h*v,this._z=c*h*v+p*m*d,this._w=c*h*d-p*m*v;break;case"YXZ":this._x=p*h*d+c*m*v,this._y=c*m*d-p*h*v,this._z=c*h*v-p*m*d,this._w=c*h*d+p*m*v;break;case"ZXY":this._x=p*h*d-c*m*v,this._y=c*m*d+p*h*v,this._z=c*h*v+p*m*d,this._w=c*h*d-p*m*v;break;case"ZYX":this._x=p*h*d-c*m*v,this._y=c*m*d+p*h*v,this._z=c*h*v-p*m*d,this._w=c*h*d+p*m*v;break;case"YZX":this._x=p*h*d+c*m*v,this._y=c*m*d+p*h*v,this._z=c*h*v-p*m*d,this._w=c*h*d-p*m*v;break;case"XZY":this._x=p*h*d-c*m*v,this._y=c*m*d-p*h*v,this._z=c*h*v+p*m*d,this._w=c*h*d+p*m*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],h=t[6],d=t[10],p=r+a+d;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(h-l)*m,this._y=(s-c)*m,this._z=(o-i)*m}else if(r>a&&r>d){const m=2*Math.sqrt(1+r-a-d);this._w=(h-l)/m,this._x=.25*m,this._y=(i+o)/m,this._z=(s+c)/m}else if(a>d){const m=2*Math.sqrt(1+a-r-d);this._w=(s-c)/m,this._x=(i+o)/m,this._y=.25*m,this._z=(l+h)/m}else{const m=2*Math.sqrt(1+d-r-a);this._w=(o-i)/m,this._x=(s+c)/m,this._y=(l+h)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Fn(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,h=t._w;return this._x=r*h+o*a+i*c-s*l,this._y=i*h+o*l+s*a-r*c,this._z=s*h+o*c+r*l-i*a,this._w=o*h-r*a-i*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*r+t*this._x,this._y=m*i+t*this._y,this._z=m*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),h=Math.atan2(c,a),d=Math.sin((1-t)*h)/c,p=Math.sin(t*h)/c;return this._w=o*d+this._w*p,this._x=r*d+this._x*p,this._y=i*d+this._y*p,this._z=s*d+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(s),r*Math.cos(s),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class k{constructor(e=0,t=0,r=0){k.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(HI.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(HI.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*i-a*r),h=2*(a*t-s*i),d=2*(s*r-o*t);return this.x=t+l*c+o*d-a*h,this.y=r+l*h+a*c-s*d,this.z=i+l*d+s*h-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return lA.copy(this).projectOnVector(e),this.sub(lA)}reflect(e){return this.sub(lA.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Fn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const lA=new k,HI=new vr;class Yr{constructor(e=new k(1/0,1/0,1/0),t=new k(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(ws.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(ws.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=ws.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,ws):ws.fromBufferAttribute(s,o),ws.applyMatrix4(e.matrixWorld),this.expandByPoint(ws);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Fg.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),Fg.copy(r.boundingBox)),Fg.applyMatrix4(e.matrixWorld),this.union(Fg)}const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,ws),ws.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Nf),kg.subVectors(this.max,Nf),iu.subVectors(e.a,Nf),su.subVectors(e.b,Nf),ou.subVectors(e.c,Nf),pa.subVectors(su,iu),ma.subVectors(ou,su),Ml.subVectors(iu,ou);let t=[0,-pa.z,pa.y,0,-ma.z,ma.y,0,-Ml.z,Ml.y,pa.z,0,-pa.x,ma.z,0,-ma.x,Ml.z,0,-Ml.x,-pa.y,pa.x,0,-ma.y,ma.x,0,-Ml.y,Ml.x,0];return!cA(t,iu,su,ou,kg)||(t=[1,0,0,0,1,0,0,0,1],!cA(t,iu,su,ou,kg))?!1:(Ug.crossVectors(pa,ma),t=[Ug.x,Ug.y,Ug.z],cA(t,iu,su,ou,kg))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ws).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(ws).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ro[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ro[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ro[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ro[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ro[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ro[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ro[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ro[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ro),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ro=[new k,new k,new k,new k,new k,new k,new k,new k],ws=new k,Fg=new Yr,iu=new k,su=new k,ou=new k,pa=new k,ma=new k,Ml=new k,Nf=new k,kg=new k,Ug=new k,Tl=new k;function cA(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){Tl.fromArray(n,s);const a=i.x*Math.abs(Tl.x)+i.y*Math.abs(Tl.y)+i.z*Math.abs(Tl.z),l=e.dot(Tl),c=t.dot(Tl),h=r.dot(Tl);if(Math.max(-Math.max(l,c,h),Math.min(l,c,h))>a)return!1}return!0}const MY=new Yr,Of=new k,uA=new k;class Dr{constructor(e=new k,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):MY.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Of.subVectors(e,this.center);const t=Of.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(Of,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(uA.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Of.copy(e.center).add(uA)),this.expandByPoint(Of.copy(e.center).sub(uA))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Po=new k,hA=new k,zg=new k,ga=new k,fA=new k,Hg=new k,dA=new k;class Dc{constructor(e=new k,t=new k(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Po)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Po.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Po.copy(this.origin).addScaledVector(this.direction,t),Po.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){hA.copy(e).add(t).multiplyScalar(.5),zg.copy(t).sub(e).normalize(),ga.copy(this.origin).sub(hA);const s=e.distanceTo(t)*.5,o=-this.direction.dot(zg),a=ga.dot(this.direction),l=-ga.dot(zg),c=ga.lengthSq(),h=Math.abs(1-o*o);let d,p,m,v;if(h>0)if(d=o*l-a,p=o*a-l,v=s*h,d>=0)if(p>=-v)if(p<=v){const A=1/h;d*=A,p*=A,m=d*(d+o*p+2*a)+p*(o*d+p+2*l)+c}else p=s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+c;else p=-s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+c;else p<=-v?(d=Math.max(0,-(-o*s+a)),p=d>0?-s:Math.min(Math.max(-s,-l),s),m=-d*d+p*(p+2*l)+c):p<=v?(d=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+c):(d=Math.max(0,-(o*s+a)),p=d>0?s:Math.min(Math.max(-s,-l),s),m=-d*d+p*(p+2*l)+c);else p=o>0?-s:s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,d),i&&i.copy(hA).addScaledVector(zg,p),m}intersectSphere(e,t){Po.subVectors(e.center,this.origin);const r=Po.dot(this.direction),i=Po.dot(Po)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,l;const c=1/this.direction.x,h=1/this.direction.y,d=1/this.direction.z,p=this.origin;return c>=0?(r=(e.min.x-p.x)*c,i=(e.max.x-p.x)*c):(r=(e.max.x-p.x)*c,i=(e.min.x-p.x)*c),h>=0?(s=(e.min.y-p.y)*h,o=(e.max.y-p.y)*h):(s=(e.max.y-p.y)*h,o=(e.min.y-p.y)*h),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),d>=0?(a=(e.min.z-p.z)*d,l=(e.max.z-p.z)*d):(a=(e.max.z-p.z)*d,l=(e.min.z-p.z)*d),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,Po)!==null}intersectTriangle(e,t,r,i,s){fA.subVectors(t,e),Hg.subVectors(r,e),dA.crossVectors(fA,Hg);let o=this.direction.dot(dA),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;ga.subVectors(this.origin,e);const l=a*this.direction.dot(Hg.crossVectors(ga,Hg));if(l<0)return null;const c=a*this.direction.dot(fA.cross(ga));if(c<0||l+c>o)return null;const h=-a*ga.dot(dA);return h<0?null:this.at(h/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class ht{constructor(e,t,r,i,s,o,a,l,c,h,d,p,m,v,A,_){ht.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,c,h,d,p,m,v,A,_)}set(e,t,r,i,s,o,a,l,c,h,d,p,m,v,A,_){const g=this.elements;return g[0]=e,g[4]=t,g[8]=r,g[12]=i,g[1]=s,g[5]=o,g[9]=a,g[13]=l,g[2]=c,g[6]=h,g[10]=d,g[14]=p,g[3]=m,g[7]=v,g[11]=A,g[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ht().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/au.setFromMatrixColumn(e,0).length(),s=1/au.setFromMatrixColumn(e,1).length(),o=1/au.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),c=Math.sin(i),h=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const p=o*h,m=o*d,v=a*h,A=a*d;t[0]=l*h,t[4]=-l*d,t[8]=c,t[1]=m+v*c,t[5]=p-A*c,t[9]=-a*l,t[2]=A-p*c,t[6]=v+m*c,t[10]=o*l}else if(e.order==="YXZ"){const p=l*h,m=l*d,v=c*h,A=c*d;t[0]=p+A*a,t[4]=v*a-m,t[8]=o*c,t[1]=o*d,t[5]=o*h,t[9]=-a,t[2]=m*a-v,t[6]=A+p*a,t[10]=o*l}else if(e.order==="ZXY"){const p=l*h,m=l*d,v=c*h,A=c*d;t[0]=p-A*a,t[4]=-o*d,t[8]=v+m*a,t[1]=m+v*a,t[5]=o*h,t[9]=A-p*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const p=o*h,m=o*d,v=a*h,A=a*d;t[0]=l*h,t[4]=v*c-m,t[8]=p*c+A,t[1]=l*d,t[5]=A*c+p,t[9]=m*c-v,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const p=o*l,m=o*c,v=a*l,A=a*c;t[0]=l*h,t[4]=A-p*d,t[8]=v*d+m,t[1]=d,t[5]=o*h,t[9]=-a*h,t[2]=-c*h,t[6]=m*d+v,t[10]=p-A*d}else if(e.order==="XZY"){const p=o*l,m=o*c,v=a*l,A=a*c;t[0]=l*h,t[4]=-d,t[8]=c*h,t[1]=p*d+A,t[5]=o*h,t[9]=m*d-v,t[2]=v*d-m,t[6]=a*h,t[10]=A*d+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(TY,e,CY)}lookAt(e,t,r){const i=this.elements;return Di.subVectors(e,t),Di.lengthSq()===0&&(Di.z=1),Di.normalize(),va.crossVectors(r,Di),va.lengthSq()===0&&(Math.abs(r.z)===1?Di.x+=1e-4:Di.z+=1e-4,Di.normalize(),va.crossVectors(r,Di)),va.normalize(),Vg.crossVectors(Di,va),i[0]=va.x,i[4]=Vg.x,i[8]=Di.x,i[1]=va.y,i[5]=Vg.y,i[9]=Di.y,i[2]=va.z,i[6]=Vg.z,i[10]=Di.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],l=r[8],c=r[12],h=r[1],d=r[5],p=r[9],m=r[13],v=r[2],A=r[6],_=r[10],g=r[14],x=r[3],S=r[7],w=r[11],R=r[15],C=i[0],I=i[4],D=i[8],N=i[12],T=i[1],L=i[5],H=i[9],J=i[13],W=i[2],$=i[6],q=i[10],ce=i[14],O=i[3],G=i[7],X=i[11],Q=i[15];return s[0]=o*C+a*T+l*W+c*O,s[4]=o*I+a*L+l*$+c*G,s[8]=o*D+a*H+l*q+c*X,s[12]=o*N+a*J+l*ce+c*Q,s[1]=h*C+d*T+p*W+m*O,s[5]=h*I+d*L+p*$+m*G,s[9]=h*D+d*H+p*q+m*X,s[13]=h*N+d*J+p*ce+m*Q,s[2]=v*C+A*T+_*W+g*O,s[6]=v*I+A*L+_*$+g*G,s[10]=v*D+A*H+_*q+g*X,s[14]=v*N+A*J+_*ce+g*Q,s[3]=x*C+S*T+w*W+R*O,s[7]=x*I+S*L+w*$+R*G,s[11]=x*D+S*H+w*q+R*X,s[15]=x*N+S*J+w*ce+R*Q,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],h=e[2],d=e[6],p=e[10],m=e[14],v=e[3],A=e[7],_=e[11],g=e[15];return v*(+s*l*d-i*c*d-s*a*p+r*c*p+i*a*m-r*l*m)+A*(+t*l*m-t*c*p+s*o*p-i*o*m+i*c*h-s*l*h)+_*(+t*c*d-t*a*m-s*o*d+r*o*m+s*a*h-r*c*h)+g*(-i*a*h-t*l*d+t*a*p+i*o*d-r*o*p+r*l*h)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],d=e[9],p=e[10],m=e[11],v=e[12],A=e[13],_=e[14],g=e[15],x=d*_*c-A*p*c+A*l*m-a*_*m-d*l*g+a*p*g,S=v*p*c-h*_*c-v*l*m+o*_*m+h*l*g-o*p*g,w=h*A*c-v*d*c+v*a*m-o*A*m-h*a*g+o*d*g,R=v*d*l-h*A*l-v*a*p+o*A*p+h*a*_-o*d*_,C=t*x+r*S+i*w+s*R;if(C===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const I=1/C;return e[0]=x*I,e[1]=(A*p*s-d*_*s-A*i*m+r*_*m+d*i*g-r*p*g)*I,e[2]=(a*_*s-A*l*s+A*i*c-r*_*c-a*i*g+r*l*g)*I,e[3]=(d*l*s-a*p*s-d*i*c+r*p*c+a*i*m-r*l*m)*I,e[4]=S*I,e[5]=(h*_*s-v*p*s+v*i*m-t*_*m-h*i*g+t*p*g)*I,e[6]=(v*l*s-o*_*s-v*i*c+t*_*c+o*i*g-t*l*g)*I,e[7]=(o*p*s-h*l*s+h*i*c-t*p*c-o*i*m+t*l*m)*I,e[8]=w*I,e[9]=(v*d*s-h*A*s-v*r*m+t*A*m+h*r*g-t*d*g)*I,e[10]=(o*A*s-v*a*s+v*r*c-t*A*c-o*r*g+t*a*g)*I,e[11]=(h*a*s-o*d*s-h*r*c+t*d*c+o*r*m-t*a*m)*I,e[12]=R*I,e[13]=(h*A*i-v*d*i+v*r*p-t*A*p-h*r*_+t*d*_)*I,e[14]=(v*a*i-o*A*i-v*r*l+t*A*l+o*r*_-t*a*_)*I,e[15]=(o*d*i-h*a*i+h*r*l-t*d*l-o*r*p+t*a*p)*I,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,l=e.z,c=s*o,h=s*a;return this.set(c*o+r,c*a-i*l,c*l+i*a,0,c*a+i*l,h*a+r,h*l-i*o,0,c*l-i*a,h*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,h=o+o,d=a+a,p=s*c,m=s*h,v=s*d,A=o*h,_=o*d,g=a*d,x=l*c,S=l*h,w=l*d,R=r.x,C=r.y,I=r.z;return i[0]=(1-(A+g))*R,i[1]=(m+w)*R,i[2]=(v-S)*R,i[3]=0,i[4]=(m-w)*C,i[5]=(1-(p+g))*C,i[6]=(_+x)*C,i[7]=0,i[8]=(v+S)*I,i[9]=(_-x)*I,i[10]=(1-(p+A))*I,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=au.set(i[0],i[1],i[2]).length();const o=au.set(i[4],i[5],i[6]).length(),a=au.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],Ms.copy(this);const c=1/s,h=1/o,d=1/a;return Ms.elements[0]*=c,Ms.elements[1]*=c,Ms.elements[2]*=c,Ms.elements[4]*=h,Ms.elements[5]*=h,Ms.elements[6]*=h,Ms.elements[8]*=d,Ms.elements[9]*=d,Ms.elements[10]*=d,t.setFromRotationMatrix(Ms),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o,a=so){const l=this.elements,c=2*s/(t-e),h=2*s/(r-i),d=(t+e)/(t-e),p=(r+i)/(r-i);let m,v;if(a===so)m=-(o+s)/(o-s),v=-2*o*s/(o-s);else if(a===xp)m=-o/(o-s),v=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=h,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=v,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,r,i,s,o,a=so){const l=this.elements,c=1/(t-e),h=1/(r-i),d=1/(o-s),p=(t+e)*c,m=(r+i)*h;let v,A;if(a===so)v=(o+s)*d,A=-2*d;else if(a===xp)v=s*d,A=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*h,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=A,l[14]=-v,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const au=new k,Ms=new ht,TY=new k(0,0,0),CY=new k(1,1,1),va=new k,Vg=new k,Di=new k,VI=new ht,GI=new vr;class qp{constructor(e=0,t=0,r=0,i=qp.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],c=i[5],h=i[9],d=i[2],p=i[6],m=i[10];switch(t){case"XYZ":this._y=Math.asin(Fn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Fn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(Fn(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-d,m),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Fn(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(Fn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,c),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-Fn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-h,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return VI.makeRotationFromQuaternion(e),this.setFromRotationMatrix(VI,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return GI.setFromEuler(this),this.setFromQuaternion(GI,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}qp.DEFAULT_ORDER="XYZ";class fc{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let bY=0;const jI=new k,lu=new vr,Io=new ht,Gg=new k,Ff=new k,RY=new k,PY=new vr,WI=new k(1,0,0),XI=new k(0,1,0),JI=new k(0,0,1),IY={type:"added"},LY={type:"removed"};class Xt extends _o{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:bY++}),this.uuid=Vi(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Xt.DEFAULT_UP.clone();const e=new k,t=new qp,r=new vr,i=new k(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new ht},normalMatrix:{value:new Nt}}),this.matrix=new ht,this.matrixWorld=new ht,this.matrixAutoUpdate=Xt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Xt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new fc,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return lu.setFromAxisAngle(e,t),this.quaternion.multiply(lu),this}rotateOnWorldAxis(e,t){return lu.setFromAxisAngle(e,t),this.quaternion.premultiply(lu),this}rotateX(e){return this.rotateOnAxis(WI,e)}rotateY(e){return this.rotateOnAxis(XI,e)}rotateZ(e){return this.rotateOnAxis(JI,e)}translateOnAxis(e,t){return jI.copy(e).applyQuaternion(this.quaternion),this.position.add(jI.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(WI,e)}translateY(e){return this.translateOnAxis(XI,e)}translateZ(e){return this.translateOnAxis(JI,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Io.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?Gg.copy(e):Gg.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),Ff.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Io.lookAt(Ff,Gg,this.up):Io.lookAt(Gg,Ff,this.up),this.quaternion.setFromRotationMatrix(Io),i&&(Io.extractRotation(i.matrixWorld),lu.setFromRotationMatrix(Io),this.quaternion.premultiply(lu.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(IY)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(LY)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Io.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Io.multiply(e.parent.matrixWorld)),e.applyMatrix4(Io),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,r=[]){this[e]===t&&r.push(this);const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].getObjectsByProperty(e,t,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ff,e,RY),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ff,PY,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++){const s=t[r];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++){const a=i[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),i.maxGeometryCount=this._maxGeometryCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,h=l.length;c<h;c++){const d=l[c];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),h=o(e.images),d=o(e.shapes),p=o(e.skeletons),m=o(e.animations),v=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),h.length>0&&(r.images=h),d.length>0&&(r.shapes=d),p.length>0&&(r.skeletons=p),m.length>0&&(r.animations=m),v.length>0&&(r.nodes=v)}return r.object=i,r;function o(a){const l=[];for(const c in a){const h=a[c];delete h.metadata,l.push(h)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}Xt.DEFAULT_UP=new k(0,1,0);Xt.DEFAULT_MATRIX_AUTO_UPDATE=!0;Xt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ts=new k,Lo=new k,pA=new k,Do=new k,cu=new k,uu=new k,KI=new k,mA=new k,gA=new k,vA=new k;class Fi{constructor(e=new k,t=new k,r=new k){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),Ts.subVectors(e,t),i.cross(Ts);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){Ts.subVectors(i,t),Lo.subVectors(r,t),pA.subVectors(e,t);const o=Ts.dot(Ts),a=Ts.dot(Lo),l=Ts.dot(pA),c=Lo.dot(Lo),h=Lo.dot(pA),d=o*c-a*a;if(d===0)return s.set(0,0,0),null;const p=1/d,m=(c*l-a*h)*p,v=(o*h-a*l)*p;return s.set(1-m-v,v,m)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,Do)===null?!1:Do.x>=0&&Do.y>=0&&Do.x+Do.y<=1}static getInterpolation(e,t,r,i,s,o,a,l){return this.getBarycoord(e,t,r,i,Do)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,Do.x),l.addScaledVector(o,Do.y),l.addScaledVector(a,Do.z),l)}static isFrontFacing(e,t,r,i){return Ts.subVectors(r,t),Lo.subVectors(e,t),Ts.cross(Lo).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ts.subVectors(this.c,this.b),Lo.subVectors(this.a,this.b),Ts.cross(Lo).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Fi.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Fi.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,r,i,s){return Fi.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return Fi.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Fi.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;cu.subVectors(i,r),uu.subVectors(s,r),mA.subVectors(e,r);const l=cu.dot(mA),c=uu.dot(mA);if(l<=0&&c<=0)return t.copy(r);gA.subVectors(e,i);const h=cu.dot(gA),d=uu.dot(gA);if(h>=0&&d<=h)return t.copy(i);const p=l*d-h*c;if(p<=0&&l>=0&&h<=0)return o=l/(l-h),t.copy(r).addScaledVector(cu,o);vA.subVectors(e,s);const m=cu.dot(vA),v=uu.dot(vA);if(v>=0&&m<=v)return t.copy(s);const A=m*c-l*v;if(A<=0&&c>=0&&v<=0)return a=c/(c-v),t.copy(r).addScaledVector(uu,a);const _=h*v-m*d;if(_<=0&&d-h>=0&&m-v>=0)return KI.subVectors(s,i),a=(d-h)/(d-h+(m-v)),t.copy(i).addScaledVector(KI,a);const g=1/(_+A+p);return o=A*g,a=p*g,t.copy(r).addScaledVector(cu,o).addScaledVector(uu,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Rk={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ya={h:0,s:0,l:0},jg={h:0,s:0,l:0};function yA(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class Ue{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=rr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,rn.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=rn.workingColorSpace){return this.r=e,this.g=t,this.b=r,rn.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=rn.workingColorSpace){if(e=uC(e,1),t=Fn(t,0,1),r=Fn(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=yA(o,s,e+1/3),this.g=yA(o,s,e),this.b=yA(o,s,e-1/3)}return rn.toWorkingColorSpace(this,i),this}setStyle(e,t=rr){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=rr){const r=Rk[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=uh(e.r),this.g=uh(e.g),this.b=uh(e.b),this}copyLinearToSRGB(e){return this.r=oA(e.r),this.g=oA(e.g),this.b=oA(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=rr){return rn.fromWorkingColorSpace(Gr.copy(this),e),Math.round(Fn(Gr.r*255,0,255))*65536+Math.round(Fn(Gr.g*255,0,255))*256+Math.round(Fn(Gr.b*255,0,255))}getHexString(e=rr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=rn.workingColorSpace){rn.fromWorkingColorSpace(Gr.copy(this),t);const r=Gr.r,i=Gr.g,s=Gr.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,c;const h=(a+o)/2;if(a===o)l=0,c=0;else{const d=o-a;switch(c=h<=.5?d/(o+a):d/(2-o-a),o){case r:l=(i-s)/d+(i<s?6:0);break;case i:l=(s-r)/d+2;break;case s:l=(r-i)/d+4;break}l/=6}return e.h=l,e.s=c,e.l=h,e}getRGB(e,t=rn.workingColorSpace){return rn.fromWorkingColorSpace(Gr.copy(this),t),e.r=Gr.r,e.g=Gr.g,e.b=Gr.b,e}getStyle(e=rr){rn.fromWorkingColorSpace(Gr.copy(this),e);const t=Gr.r,r=Gr.g,i=Gr.b;return e!==rr?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(ya),this.setHSL(ya.h+e,ya.s+t,ya.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(ya),e.getHSL(jg);const r=wd(ya.h,jg.h,t),i=wd(ya.s,jg.s,t),s=wd(ya.l,jg.l,t);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*r+s[6]*i,this.g=s[1]*t+s[4]*r+s[7]*i,this.b=s[2]*t+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Gr=new Ue;Ue.NAMES=Rk;let DY=0;class er extends _o{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:DY++}),this.uuid=Vi(),this.name="",this.type="Material",this.blending=cc,this.side=vo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=ly,this.blendDst=cy,this.blendEquation=Ra,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ue(0,0,0),this.blendAlpha=0,this.depthFunc=hp,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Rw,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Vl,this.stencilZFail=Vl,this.stencilZPass=Vl,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==cc&&(r.blending=this.blending),this.side!==vo&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==ly&&(r.blendSrc=this.blendSrc),this.blendDst!==cy&&(r.blendDst=this.blendDst),this.blendEquation!==Ra&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==hp&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Rw&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Vl&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Vl&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Vl&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class zi extends er{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ue(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=$p,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ko=BY();function BY(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):c<-14?(r[l]=1024>>-c-14,r[l|256]=1024>>-c-14|32768,i[l]=-c-1,i[l|256]=-c-1):c<=15?(r[l]=c+15<<10,r[l|256]=c+15<<10|32768,i[l]=13,i[l|256]=13):c<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,h=0;for(;!(c&8388608);)c<<=1,h-=8388608;c&=-8388609,h+=947912704,s[l]=c|h}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function xi(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Fn(n,-65504,65504),ko.floatView[0]=n;const e=ko.uint32View[0],t=e>>23&511;return ko.baseTable[t]+((e&8388607)>>ko.shiftTable[t])}function od(n){const e=n>>10;return ko.uint32View[0]=ko.mantissaTable[ko.offsetTable[e]+(n&1023)]+ko.exponentTable[e],ko.floatView[0]}const NY={toHalfFloat:xi,fromHalfFloat:od},Kn=new k,Wg=new _e;class Jt{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=_p,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=ps,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return hc("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)Wg.fromBufferAttribute(this,t),Wg.applyMatrix3(e),this.setXY(t,Wg.x,Wg.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)Kn.fromBufferAttribute(this,t),Kn.applyMatrix3(e),this.setXYZ(t,Kn.x,Kn.y,Kn.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Kn.fromBufferAttribute(this,t),Kn.applyMatrix4(e),this.setXYZ(t,Kn.x,Kn.y,Kn.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Kn.fromBufferAttribute(this,t),Kn.applyNormalMatrix(e),this.setXYZ(t,Kn.x,Kn.y,Kn.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Kn.fromBufferAttribute(this,t),Kn.transformDirection(e),this.setXYZ(t,Kn.x,Kn.y,Kn.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=ui(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=Rt(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ui(t,this.array)),t}setX(e,t){return this.normalized&&(t=Rt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ui(t,this.array)),t}setY(e,t){return this.normalized&&(t=Rt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ui(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Rt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ui(t,this.array)),t}setW(e,t){return this.normalized&&(t=Rt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Rt(t,this.array),r=Rt(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Rt(t,this.array),r=Rt(r,this.array),i=Rt(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=Rt(t,this.array),r=Rt(r,this.array),i=Rt(i,this.array),s=Rt(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==_p&&(e.usage=this.usage),e}}class OY extends Jt{constructor(e,t,r){super(new Int8Array(e),t,r)}}class FY extends Jt{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class kY extends Jt{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class UY extends Jt{constructor(e,t,r){super(new Int16Array(e),t,r)}}class dC extends Jt{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class zY extends Jt{constructor(e,t,r){super(new Int32Array(e),t,r)}}class pC extends Jt{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class HY extends Jt{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}getX(e){let t=od(this.array[e*this.itemSize]);return this.normalized&&(t=ui(t,this.array)),t}setX(e,t){return this.normalized&&(t=Rt(t,this.array)),this.array[e*this.itemSize]=xi(t),this}getY(e){let t=od(this.array[e*this.itemSize+1]);return this.normalized&&(t=ui(t,this.array)),t}setY(e,t){return this.normalized&&(t=Rt(t,this.array)),this.array[e*this.itemSize+1]=xi(t),this}getZ(e){let t=od(this.array[e*this.itemSize+2]);return this.normalized&&(t=ui(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Rt(t,this.array)),this.array[e*this.itemSize+2]=xi(t),this}getW(e){let t=od(this.array[e*this.itemSize+3]);return this.normalized&&(t=ui(t,this.array)),t}setW(e,t){return this.normalized&&(t=Rt(t,this.array)),this.array[e*this.itemSize+3]=xi(t),this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Rt(t,this.array),r=Rt(r,this.array)),this.array[e+0]=xi(t),this.array[e+1]=xi(r),this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Rt(t,this.array),r=Rt(r,this.array),i=Rt(i,this.array)),this.array[e+0]=xi(t),this.array[e+1]=xi(r),this.array[e+2]=xi(i),this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=Rt(t,this.array),r=Rt(r,this.array),i=Rt(i,this.array),s=Rt(s,this.array)),this.array[e+0]=xi(t),this.array[e+1]=xi(r),this.array[e+2]=xi(i),this.array[e+3]=xi(s),this}}class rt extends Jt{constructor(e,t,r){super(new Float32Array(e),t,r)}}class VY extends Jt{constructor(e,t,r){super(new Float64Array(e),t,r)}}let GY=0;const as=new ht,_A=new Xt,hu=new k,Bi=new Yr,kf=new Yr,dr=new k;class bt extends _o{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:GY++}),this.uuid=Vi(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Tk(e)?pC:dC)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new Nt().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return as.makeRotationFromQuaternion(e),this.applyMatrix4(as),this}rotateX(e){return as.makeRotationX(e),this.applyMatrix4(as),this}rotateY(e){return as.makeRotationY(e),this.applyMatrix4(as),this}rotateZ(e){return as.makeRotationZ(e),this.applyMatrix4(as),this}translate(e,t,r){return as.makeTranslation(e,t,r),this.applyMatrix4(as),this}scale(e,t,r){return as.makeScale(e,t,r),this.applyMatrix4(as),this}lookAt(e){return _A.lookAt(e),_A.updateMatrix(),this.applyMatrix4(_A.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(hu).negate(),this.translate(hu.x,hu.y,hu.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new rt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Yr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new k(-1/0,-1/0,-1/0),new k(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];Bi.setFromBufferAttribute(s),this.morphTargetsRelative?(dr.addVectors(this.boundingBox.min,Bi.min),this.boundingBox.expandByPoint(dr),dr.addVectors(this.boundingBox.max,Bi.max),this.boundingBox.expandByPoint(dr)):(this.boundingBox.expandByPoint(Bi.min),this.boundingBox.expandByPoint(Bi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Dr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new k,1/0);return}if(e){const r=this.boundingSphere.center;if(Bi.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];kf.setFromBufferAttribute(a),this.morphTargetsRelative?(dr.addVectors(Bi.min,kf.min),Bi.expandByPoint(dr),dr.addVectors(Bi.max,kf.max),Bi.expandByPoint(dr)):(Bi.expandByPoint(kf.min),Bi.expandByPoint(kf.max))}Bi.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)dr.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(dr));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,h=a.count;c<h;c++)dr.fromBufferAttribute(a,c),l&&(hu.fromBufferAttribute(e,c),dr.add(hu)),i=Math.max(i,r.distanceToSquared(dr))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=t.position.array,s=t.normal.array,o=t.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Jt(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],h=[];for(let T=0;T<a;T++)c[T]=new k,h[T]=new k;const d=new k,p=new k,m=new k,v=new _e,A=new _e,_=new _e,g=new k,x=new k;function S(T,L,H){d.fromArray(i,T*3),p.fromArray(i,L*3),m.fromArray(i,H*3),v.fromArray(o,T*2),A.fromArray(o,L*2),_.fromArray(o,H*2),p.sub(d),m.sub(d),A.sub(v),_.sub(v);const J=1/(A.x*_.y-_.x*A.y);isFinite(J)&&(g.copy(p).multiplyScalar(_.y).addScaledVector(m,-A.y).multiplyScalar(J),x.copy(m).multiplyScalar(A.x).addScaledVector(p,-_.x).multiplyScalar(J),c[T].add(g),c[L].add(g),c[H].add(g),h[T].add(x),h[L].add(x),h[H].add(x))}let w=this.groups;w.length===0&&(w=[{start:0,count:r.length}]);for(let T=0,L=w.length;T<L;++T){const H=w[T],J=H.start,W=H.count;for(let $=J,q=J+W;$<q;$+=3)S(r[$+0],r[$+1],r[$+2])}const R=new k,C=new k,I=new k,D=new k;function N(T){I.fromArray(s,T*3),D.copy(I);const L=c[T];R.copy(L),R.sub(I.multiplyScalar(I.dot(L))).normalize(),C.crossVectors(D,L);const J=C.dot(h[T])<0?-1:1;l[T*4]=R.x,l[T*4+1]=R.y,l[T*4+2]=R.z,l[T*4+3]=J}for(let T=0,L=w.length;T<L;++T){const H=w[T],J=H.start,W=H.count;for(let $=J,q=J+W;$<q;$+=3)N(r[$+0]),N(r[$+1]),N(r[$+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Jt(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let p=0,m=r.count;p<m;p++)r.setXYZ(p,0,0,0);const i=new k,s=new k,o=new k,a=new k,l=new k,c=new k,h=new k,d=new k;if(e)for(let p=0,m=e.count;p<m;p+=3){const v=e.getX(p+0),A=e.getX(p+1),_=e.getX(p+2);i.fromBufferAttribute(t,v),s.fromBufferAttribute(t,A),o.fromBufferAttribute(t,_),h.subVectors(o,s),d.subVectors(i,s),h.cross(d),a.fromBufferAttribute(r,v),l.fromBufferAttribute(r,A),c.fromBufferAttribute(r,_),a.add(h),l.add(h),c.add(h),r.setXYZ(v,a.x,a.y,a.z),r.setXYZ(A,l.x,l.y,l.z),r.setXYZ(_,c.x,c.y,c.z)}else for(let p=0,m=t.count;p<m;p+=3)i.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),h.subVectors(o,s),d.subVectors(i,s),h.cross(d),r.setXYZ(p+0,h.x,h.y,h.z),r.setXYZ(p+1,h.x,h.y,h.z),r.setXYZ(p+2,h.x,h.y,h.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)dr.fromBufferAttribute(e,t),dr.normalize(),e.setXYZ(t,dr.x,dr.y,dr.z)}toNonIndexed(){function e(a,l){const c=a.array,h=a.itemSize,d=a.normalized,p=new c.constructor(l.length*h);let m=0,v=0;for(let A=0,_=l.length;A<_;A++){a.isInterleavedBufferAttribute?m=l[A]*a.data.stride+a.offset:m=l[A]*h;for(let g=0;g<h;g++)p[v++]=c[m++]}return new Jt(p,h,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new bt,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],c=e(l,r);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let h=0,d=c.length;h<d;h++){const p=c[h],m=e(p,r);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],h=[];for(let d=0,p=c.length;d<p;d++){const m=c[d];h.push(m.toJSON(e.data))}h.length>0&&(i[l]=h,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const c in i){const h=i[c];this.setAttribute(c,h.clone(t))}const s=e.morphAttributes;for(const c in s){const h=[],d=s[c];for(let p=0,m=d.length;p<m;p++)h.push(d[p].clone(t));this.morphAttributes[c]=h}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,h=o.length;c<h;c++){const d=o[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const $I=new ht,Cl=new Dc,Xg=new Dr,YI=new k,fu=new k,du=new k,pu=new k,xA=new k,Jg=new k,Kg=new _e,$g=new _e,Yg=new _e,qI=new k,QI=new k,ZI=new k,qg=new k,Qg=new k;class jn extends Xt{constructor(e=new bt,t=new zi){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){Jg.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const h=a[l],d=s[l];h!==0&&(xA.fromBufferAttribute(d,e),o?Jg.addScaledVector(xA,h):Jg.addScaledVector(xA.sub(t),h))}t.add(Jg)}return t}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),Xg.copy(r.boundingSphere),Xg.applyMatrix4(s),Cl.copy(e.ray).recast(e.near),!(Xg.containsPoint(Cl.origin)===!1&&(Cl.intersectSphere(Xg,YI)===null||Cl.origin.distanceToSquared(YI)>(e.far-e.near)**2))&&($I.copy(s).invert(),Cl.copy(e.ray).applyMatrix4($I),!(r.boundingBox!==null&&Cl.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,Cl)))}_computeIntersections(e,t,r){let i;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,h=s.attributes.uv1,d=s.attributes.normal,p=s.groups,m=s.drawRange;if(a!==null)if(Array.isArray(o))for(let v=0,A=p.length;v<A;v++){const _=p[v],g=o[_.materialIndex],x=Math.max(_.start,m.start),S=Math.min(a.count,Math.min(_.start+_.count,m.start+m.count));for(let w=x,R=S;w<R;w+=3){const C=a.getX(w),I=a.getX(w+1),D=a.getX(w+2);i=Zg(this,g,e,r,c,h,d,C,I,D),i&&(i.faceIndex=Math.floor(w/3),i.face.materialIndex=_.materialIndex,t.push(i))}}else{const v=Math.max(0,m.start),A=Math.min(a.count,m.start+m.count);for(let _=v,g=A;_<g;_+=3){const x=a.getX(_),S=a.getX(_+1),w=a.getX(_+2);i=Zg(this,o,e,r,c,h,d,x,S,w),i&&(i.faceIndex=Math.floor(_/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(o))for(let v=0,A=p.length;v<A;v++){const _=p[v],g=o[_.materialIndex],x=Math.max(_.start,m.start),S=Math.min(l.count,Math.min(_.start+_.count,m.start+m.count));for(let w=x,R=S;w<R;w+=3){const C=w,I=w+1,D=w+2;i=Zg(this,g,e,r,c,h,d,C,I,D),i&&(i.faceIndex=Math.floor(w/3),i.face.materialIndex=_.materialIndex,t.push(i))}}else{const v=Math.max(0,m.start),A=Math.min(l.count,m.start+m.count);for(let _=v,g=A;_<g;_+=3){const x=_,S=_+1,w=_+2;i=Zg(this,o,e,r,c,h,d,x,S,w),i&&(i.faceIndex=Math.floor(_/3),t.push(i))}}}}function jY(n,e,t,r,i,s,o,a){let l;if(e.side===di?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===vo,a),l===null)return null;Qg.copy(a),Qg.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(Qg);return c<t.near||c>t.far?null:{distance:c,point:Qg.clone(),object:n}}function Zg(n,e,t,r,i,s,o,a,l,c){n.getVertexPosition(a,fu),n.getVertexPosition(l,du),n.getVertexPosition(c,pu);const h=jY(n,e,t,r,fu,du,pu,qg);if(h){i&&(Kg.fromBufferAttribute(i,a),$g.fromBufferAttribute(i,l),Yg.fromBufferAttribute(i,c),h.uv=Fi.getInterpolation(qg,fu,du,pu,Kg,$g,Yg,new _e)),s&&(Kg.fromBufferAttribute(s,a),$g.fromBufferAttribute(s,l),Yg.fromBufferAttribute(s,c),h.uv1=Fi.getInterpolation(qg,fu,du,pu,Kg,$g,Yg,new _e),h.uv2=h.uv1),o&&(qI.fromBufferAttribute(o,a),QI.fromBufferAttribute(o,l),ZI.fromBufferAttribute(o,c),h.normal=Fi.getInterpolation(qg,fu,du,pu,qI,QI,ZI,new k),h.normal.dot(r.direction)>0&&h.normal.multiplyScalar(-1));const d={a,b:l,c,normal:new k,materialIndex:0};Fi.getNormal(fu,du,pu,d.normal),h.face=d}return h}class Bc extends bt{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],h=[],d=[];let p=0,m=0;v("z","y","x",-1,-1,r,t,e,o,s,0),v("z","y","x",1,-1,r,t,-e,o,s,1),v("x","z","y",1,1,e,r,t,i,o,2),v("x","z","y",1,-1,e,r,-t,i,o,3),v("x","y","z",1,-1,e,t,r,i,s,4),v("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new rt(c,3)),this.setAttribute("normal",new rt(h,3)),this.setAttribute("uv",new rt(d,2));function v(A,_,g,x,S,w,R,C,I,D,N){const T=w/I,L=R/D,H=w/2,J=R/2,W=C/2,$=I+1,q=D+1;let ce=0,O=0;const G=new k;for(let X=0;X<q;X++){const Q=X*L-J;for(let te=0;te<$;te++){const be=te*T-H;G[A]=be*x,G[_]=Q*S,G[g]=W,c.push(G.x,G.y,G.z),G[A]=0,G[_]=0,G[g]=C>0?1:-1,h.push(G.x,G.y,G.z),d.push(te/I),d.push(1-X/D),ce+=1}}for(let X=0;X<D;X++)for(let Q=0;Q<I;Q++){const te=p+Q+$*X,be=p+Q+$*(X+1),ee=p+(Q+1)+$*(X+1),pe=p+(Q+1)+$*X;l.push(te,be,pe),l.push(be,ee,pe),O+=6}a.addGroup(m,O,N),m+=O,p+=ce}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Bc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Dh(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function oi(n){const e={};for(let t=0;t<n.length;t++){const r=Dh(n[t]);for(const i in r)e[i]=r[i]}return e}function WY(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function Pk(n){return n.getRenderTarget()===null?n.outputColorSpace:rn.workingColorSpace}const Ik={clone:Dh,merge:oi};var XY=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,JY=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Us extends er{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=XY,this.fragmentShader=JY,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Dh(e.uniforms),this.uniformsGroups=WY(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class Qp extends Xt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ht,this.projectionMatrix=new ht,this.projectionMatrixInverse=new ht,this.coordinateSystem=so}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const _a=new k,e3=new _e,t3=new _e;class yn extends Qp{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Lh*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(uc*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Lh*2*Math.atan(Math.tan(uc*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,r){_a.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(_a.x,_a.y).multiplyScalar(-e/_a.z),_a.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(_a.x,_a.y).multiplyScalar(-e/_a.z)}getViewSize(e,t){return this.getViewBounds(e,e3,t3),t.subVectors(t3,e3)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(uc*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*i/l,t-=o.offsetY*r/c,i*=o.width/l,r*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const mu=-90,gu=1;class mC extends Xt{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new yn(mu,gu,e,t);i.layers=this.layers,this.add(i);const s=new yn(mu,gu,e,t);s.layers=this.layers,this.add(s);const o=new yn(mu,gu,e,t);o.layers=this.layers,this.add(o);const a=new yn(mu,gu,e,t);a.layers=this.layers,this.add(a);const l=new yn(mu,gu,e,t);l.layers=this.layers,this.add(l);const c=new yn(mu,gu,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===so)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===xp)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,h]=this.children,d=e.getRenderTarget(),p=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),v=e.xr.enabled;e.xr.enabled=!1;const A=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(t,s),e.setRenderTarget(r,1,i),e.render(t,o),e.setRenderTarget(r,2,i),e.render(t,a),e.setRenderTarget(r,3,i),e.render(t,l),e.setRenderTarget(r,4,i),e.render(t,c),r.texture.generateMipmaps=A,e.setRenderTarget(r,5,i),e.render(t,h),e.setRenderTarget(d,p,m),e.xr.enabled=v,r.texture.needsPMREMUpdate=!0}}class Zp extends xn{constructor(e,t,r,i,s,o,a,l,c,h){e=e!==void 0?e:[],t=t!==void 0?t:ta,super(e,t,r,i,s,o,a,l,c,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class gC extends ks{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];t.encoding!==void 0&&(hc("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===Ya?rr:Oi),this.texture=new Zp(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:gn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Bc(5,5,5),s=new Us({name:"CubemapFromEquirect",uniforms:Dh(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:di,blending:Ko});s.uniforms.tEquirect.value=t;const o=new jn(i,s),a=t.minFilter;return t.minFilter===gs&&(t.minFilter=gn),new mC(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}const AA=new k,KY=new k,$Y=new Nt;class Fo{constructor(e=new k(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=AA.subVectors(r,t).cross(KY.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(AA),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||$Y.getNormalMatrix(e),i=this.coplanarPoint(AA).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const bl=new Dr,e0=new k;class em{constructor(e=new Fo,t=new Fo,r=new Fo,i=new Fo,s=new Fo,o=new Fo){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=so){const r=this.planes,i=e.elements,s=i[0],o=i[1],a=i[2],l=i[3],c=i[4],h=i[5],d=i[6],p=i[7],m=i[8],v=i[9],A=i[10],_=i[11],g=i[12],x=i[13],S=i[14],w=i[15];if(r[0].setComponents(l-s,p-c,_-m,w-g).normalize(),r[1].setComponents(l+s,p+c,_+m,w+g).normalize(),r[2].setComponents(l+o,p+h,_+v,w+x).normalize(),r[3].setComponents(l-o,p-h,_-v,w-x).normalize(),r[4].setComponents(l-a,p-d,_-A,w-S).normalize(),t===so)r[5].setComponents(l+a,p+d,_+A,w+S).normalize();else if(t===xp)r[5].setComponents(a,d,A,S).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),bl.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),bl.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(bl)}intersectsSprite(e){return bl.center.set(0,0,0),bl.radius=.7071067811865476,bl.applyMatrix4(e.matrixWorld),this.intersectsSphere(bl)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(e0.x=i.normal.x>0?e.max.x:e.min.x,e0.y=i.normal.y>0?e.max.y:e.min.y,e0.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(e0)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function Lk(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function YY(n,e){const t=e.isWebGL2,r=new WeakMap;function i(c,h){const d=c.array,p=c.usage,m=d.byteLength,v=n.createBuffer();n.bindBuffer(h,v),n.bufferData(h,d,p),c.onUploadCallback();let A;if(d instanceof Float32Array)A=n.FLOAT;else if(d instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(t)A=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else A=n.UNSIGNED_SHORT;else if(d instanceof Int16Array)A=n.SHORT;else if(d instanceof Uint32Array)A=n.UNSIGNED_INT;else if(d instanceof Int32Array)A=n.INT;else if(d instanceof Int8Array)A=n.BYTE;else if(d instanceof Uint8Array)A=n.UNSIGNED_BYTE;else if(d instanceof Uint8ClampedArray)A=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:v,type:A,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version,size:m}}function s(c,h,d){const p=h.array,m=h._updateRange,v=h.updateRanges;if(n.bindBuffer(d,c),m.count===-1&&v.length===0&&n.bufferSubData(d,0,p),v.length!==0){for(let A=0,_=v.length;A<_;A++){const g=v[A];t?n.bufferSubData(d,g.start*p.BYTES_PER_ELEMENT,p,g.start,g.count):n.bufferSubData(d,g.start*p.BYTES_PER_ELEMENT,p.subarray(g.start,g.start+g.count))}h.clearUpdateRanges()}m.count!==-1&&(t?n.bufferSubData(d,m.offset*p.BYTES_PER_ELEMENT,p,m.offset,m.count):n.bufferSubData(d,m.offset*p.BYTES_PER_ELEMENT,p.subarray(m.offset,m.offset+m.count)),m.count=-1),h.onUploadCallback()}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),r.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const h=r.get(c);h&&(n.deleteBuffer(h.buffer),r.delete(c))}function l(c,h){if(c.isGLBufferAttribute){const p=r.get(c);(!p||p.version<c.version)&&r.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const d=r.get(c);if(d===void 0)r.set(c,i(c,h));else if(d.version<c.version){if(d.size!==c.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");s(d.buffer,c,h),d.version=c.version}}return{get:o,remove:a,update:l}}class Qh extends bt{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(r),l=Math.floor(i),c=a+1,h=l+1,d=e/a,p=t/l,m=[],v=[],A=[],_=[];for(let g=0;g<h;g++){const x=g*p-o;for(let S=0;S<c;S++){const w=S*d-s;v.push(w,-x,0),A.push(0,0,1),_.push(S/a),_.push(1-g/l)}}for(let g=0;g<l;g++)for(let x=0;x<a;x++){const S=x+c*g,w=x+c*(g+1),R=x+1+c*(g+1),C=x+1+c*g;m.push(S,w,C),m.push(w,R,C)}this.setIndex(m),this.setAttribute("position",new rt(v,3)),this.setAttribute("normal",new rt(A,3)),this.setAttribute("uv",new rt(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Qh(e.width,e.height,e.widthSegments,e.heightSegments)}}var qY=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,QY=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,ZY=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,eq=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,tq=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,nq=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,rq=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,iq=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,sq=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,oq=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,aq=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,lq=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,cq=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,uq=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,hq=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,fq=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,dq=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,pq=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,mq=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,gq=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,vq=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,yq=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,_q=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,xq=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Aq=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Sq=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Eq=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,wq=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Mq=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Tq=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Cq="gl_FragColor = linearToOutputTexel( gl_FragColor );",bq=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,Rq=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Pq=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Iq=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Lq=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Dq=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Bq=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Nq=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Oq=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Fq=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,kq=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Uq=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,zq=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Hq=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Vq=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Gq=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,jq=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Wq=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Xq=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Jq=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Kq=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,$q=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Yq=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,qq=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Qq=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Zq=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,eQ=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,tQ=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,nQ=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,rQ=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,iQ=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,sQ=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,oQ=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,aQ=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,lQ=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,cQ=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,uQ=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,hQ=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,fQ=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,dQ=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,pQ=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,mQ=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,gQ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,vQ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,yQ=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,_Q=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,xQ=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,AQ=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,SQ=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,EQ=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,wQ=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,MQ=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,TQ=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,CQ=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,bQ=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,RQ=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,PQ=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,IQ=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,LQ=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,DQ=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,BQ=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,NQ=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,OQ=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,FQ=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,kQ=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,UQ=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,zQ=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,HQ=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,VQ=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,GQ=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,jQ=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,WQ=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,XQ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,JQ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,KQ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,$Q=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const YQ=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,qQ=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,QQ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,ZQ=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,eZ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,tZ=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,nZ=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,rZ=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,iZ=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,sZ=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,oZ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,aZ=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,lZ=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,cZ=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,uZ=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,hZ=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fZ=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,dZ=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,pZ=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,mZ=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gZ=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,vZ=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,yZ=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,_Z=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,xZ=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,AZ=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,SZ=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,EZ=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,wZ=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,MZ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,TZ=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,CZ=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,bZ=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,RZ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Lt={alphahash_fragment:qY,alphahash_pars_fragment:QY,alphamap_fragment:ZY,alphamap_pars_fragment:eq,alphatest_fragment:tq,alphatest_pars_fragment:nq,aomap_fragment:rq,aomap_pars_fragment:iq,batching_pars_vertex:sq,batching_vertex:oq,begin_vertex:aq,beginnormal_vertex:lq,bsdfs:cq,iridescence_fragment:uq,bumpmap_pars_fragment:hq,clipping_planes_fragment:fq,clipping_planes_pars_fragment:dq,clipping_planes_pars_vertex:pq,clipping_planes_vertex:mq,color_fragment:gq,color_pars_fragment:vq,color_pars_vertex:yq,color_vertex:_q,common:xq,cube_uv_reflection_fragment:Aq,defaultnormal_vertex:Sq,displacementmap_pars_vertex:Eq,displacementmap_vertex:wq,emissivemap_fragment:Mq,emissivemap_pars_fragment:Tq,colorspace_fragment:Cq,colorspace_pars_fragment:bq,envmap_fragment:Rq,envmap_common_pars_fragment:Pq,envmap_pars_fragment:Iq,envmap_pars_vertex:Lq,envmap_physical_pars_fragment:jq,envmap_vertex:Dq,fog_vertex:Bq,fog_pars_vertex:Nq,fog_fragment:Oq,fog_pars_fragment:Fq,gradientmap_pars_fragment:kq,lightmap_fragment:Uq,lightmap_pars_fragment:zq,lights_lambert_fragment:Hq,lights_lambert_pars_fragment:Vq,lights_pars_begin:Gq,lights_toon_fragment:Wq,lights_toon_pars_fragment:Xq,lights_phong_fragment:Jq,lights_phong_pars_fragment:Kq,lights_physical_fragment:$q,lights_physical_pars_fragment:Yq,lights_fragment_begin:qq,lights_fragment_maps:Qq,lights_fragment_end:Zq,logdepthbuf_fragment:eQ,logdepthbuf_pars_fragment:tQ,logdepthbuf_pars_vertex:nQ,logdepthbuf_vertex:rQ,map_fragment:iQ,map_pars_fragment:sQ,map_particle_fragment:oQ,map_particle_pars_fragment:aQ,metalnessmap_fragment:lQ,metalnessmap_pars_fragment:cQ,morphcolor_vertex:uQ,morphnormal_vertex:hQ,morphtarget_pars_vertex:fQ,morphtarget_vertex:dQ,normal_fragment_begin:pQ,normal_fragment_maps:mQ,normal_pars_fragment:gQ,normal_pars_vertex:vQ,normal_vertex:yQ,normalmap_pars_fragment:_Q,clearcoat_normal_fragment_begin:xQ,clearcoat_normal_fragment_maps:AQ,clearcoat_pars_fragment:SQ,iridescence_pars_fragment:EQ,opaque_fragment:wQ,packing:MQ,premultiplied_alpha_fragment:TQ,project_vertex:CQ,dithering_fragment:bQ,dithering_pars_fragment:RQ,roughnessmap_fragment:PQ,roughnessmap_pars_fragment:IQ,shadowmap_pars_fragment:LQ,shadowmap_pars_vertex:DQ,shadowmap_vertex:BQ,shadowmask_pars_fragment:NQ,skinbase_vertex:OQ,skinning_pars_vertex:FQ,skinning_vertex:kQ,skinnormal_vertex:UQ,specularmap_fragment:zQ,specularmap_pars_fragment:HQ,tonemapping_fragment:VQ,tonemapping_pars_fragment:GQ,transmission_fragment:jQ,transmission_pars_fragment:WQ,uv_pars_fragment:XQ,uv_pars_vertex:JQ,uv_vertex:KQ,worldpos_vertex:$Q,background_vert:YQ,background_frag:qQ,backgroundCube_vert:QQ,backgroundCube_frag:ZQ,cube_vert:eZ,cube_frag:tZ,depth_vert:nZ,depth_frag:rZ,distanceRGBA_vert:iZ,distanceRGBA_frag:sZ,equirect_vert:oZ,equirect_frag:aZ,linedashed_vert:lZ,linedashed_frag:cZ,meshbasic_vert:uZ,meshbasic_frag:hZ,meshlambert_vert:fZ,meshlambert_frag:dZ,meshmatcap_vert:pZ,meshmatcap_frag:mZ,meshnormal_vert:gZ,meshnormal_frag:vZ,meshphong_vert:yZ,meshphong_frag:_Z,meshphysical_vert:xZ,meshphysical_frag:AZ,meshtoon_vert:SZ,meshtoon_frag:EZ,points_vert:wZ,points_frag:MZ,shadow_vert:TZ,shadow_frag:CZ,sprite_vert:bZ,sprite_frag:RZ},Oe={common:{diffuse:{value:new Ue(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Nt},alphaMap:{value:null},alphaMapTransform:{value:new Nt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Nt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Nt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Nt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Nt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Nt},normalScale:{value:new _e(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Nt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Nt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Nt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Nt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ue(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ue(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Nt},alphaTest:{value:0},uvTransform:{value:new Nt}},sprite:{diffuse:{value:new Ue(16777215)},opacity:{value:1},center:{value:new _e(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Nt},alphaMap:{value:null},alphaMapTransform:{value:new Nt},alphaTest:{value:0}}},Is={basic:{uniforms:oi([Oe.common,Oe.specularmap,Oe.envmap,Oe.aomap,Oe.lightmap,Oe.fog]),vertexShader:Lt.meshbasic_vert,fragmentShader:Lt.meshbasic_frag},lambert:{uniforms:oi([Oe.common,Oe.specularmap,Oe.envmap,Oe.aomap,Oe.lightmap,Oe.emissivemap,Oe.bumpmap,Oe.normalmap,Oe.displacementmap,Oe.fog,Oe.lights,{emissive:{value:new Ue(0)}}]),vertexShader:Lt.meshlambert_vert,fragmentShader:Lt.meshlambert_frag},phong:{uniforms:oi([Oe.common,Oe.specularmap,Oe.envmap,Oe.aomap,Oe.lightmap,Oe.emissivemap,Oe.bumpmap,Oe.normalmap,Oe.displacementmap,Oe.fog,Oe.lights,{emissive:{value:new Ue(0)},specular:{value:new Ue(1118481)},shininess:{value:30}}]),vertexShader:Lt.meshphong_vert,fragmentShader:Lt.meshphong_frag},standard:{uniforms:oi([Oe.common,Oe.envmap,Oe.aomap,Oe.lightmap,Oe.emissivemap,Oe.bumpmap,Oe.normalmap,Oe.displacementmap,Oe.roughnessmap,Oe.metalnessmap,Oe.fog,Oe.lights,{emissive:{value:new Ue(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Lt.meshphysical_vert,fragmentShader:Lt.meshphysical_frag},toon:{uniforms:oi([Oe.common,Oe.aomap,Oe.lightmap,Oe.emissivemap,Oe.bumpmap,Oe.normalmap,Oe.displacementmap,Oe.gradientmap,Oe.fog,Oe.lights,{emissive:{value:new Ue(0)}}]),vertexShader:Lt.meshtoon_vert,fragmentShader:Lt.meshtoon_frag},matcap:{uniforms:oi([Oe.common,Oe.bumpmap,Oe.normalmap,Oe.displacementmap,Oe.fog,{matcap:{value:null}}]),vertexShader:Lt.meshmatcap_vert,fragmentShader:Lt.meshmatcap_frag},points:{uniforms:oi([Oe.points,Oe.fog]),vertexShader:Lt.points_vert,fragmentShader:Lt.points_frag},dashed:{uniforms:oi([Oe.common,Oe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Lt.linedashed_vert,fragmentShader:Lt.linedashed_frag},depth:{uniforms:oi([Oe.common,Oe.displacementmap]),vertexShader:Lt.depth_vert,fragmentShader:Lt.depth_frag},normal:{uniforms:oi([Oe.common,Oe.bumpmap,Oe.normalmap,Oe.displacementmap,{opacity:{value:1}}]),vertexShader:Lt.meshnormal_vert,fragmentShader:Lt.meshnormal_frag},sprite:{uniforms:oi([Oe.sprite,Oe.fog]),vertexShader:Lt.sprite_vert,fragmentShader:Lt.sprite_frag},background:{uniforms:{uvTransform:{value:new Nt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Lt.background_vert,fragmentShader:Lt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Lt.backgroundCube_vert,fragmentShader:Lt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Lt.cube_vert,fragmentShader:Lt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Lt.equirect_vert,fragmentShader:Lt.equirect_frag},distanceRGBA:{uniforms:oi([Oe.common,Oe.displacementmap,{referencePosition:{value:new k},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Lt.distanceRGBA_vert,fragmentShader:Lt.distanceRGBA_frag},shadow:{uniforms:oi([Oe.lights,Oe.fog,{color:{value:new Ue(0)},opacity:{value:1}}]),vertexShader:Lt.shadow_vert,fragmentShader:Lt.shadow_frag}};Is.physical={uniforms:oi([Is.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Nt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Nt},clearcoatNormalScale:{value:new _e(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Nt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Nt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Nt},sheen:{value:0},sheenColor:{value:new Ue(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Nt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Nt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Nt},transmissionSamplerSize:{value:new _e},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Nt},attenuationDistance:{value:0},attenuationColor:{value:new Ue(0)},specularColor:{value:new Ue(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Nt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Nt},anisotropyVector:{value:new _e},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Nt}}]),vertexShader:Lt.meshphysical_vert,fragmentShader:Lt.meshphysical_frag};const t0={r:0,b:0,g:0};function PZ(n,e,t,r,i,s,o){const a=new Ue(0);let l=s===!0?0:1,c,h,d=null,p=0,m=null;function v(_,g){let x=!1,S=g.isScene===!0?g.background:null;S&&S.isTexture&&(S=(g.backgroundBlurriness>0?t:e).get(S)),S===null?A(a,l):S&&S.isColor&&(A(S,1),x=!0);const w=n.xr.getEnvironmentBlendMode();w==="additive"?r.buffers.color.setClear(0,0,0,1,o):w==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,o),(n.autoClear||x)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),S&&(S.isCubeTexture||S.mapping===qh)?(h===void 0&&(h=new jn(new Bc(1,1,1),new Us({name:"BackgroundCubeMaterial",uniforms:Dh(Is.backgroundCube.uniforms),vertexShader:Is.backgroundCube.vertexShader,fragmentShader:Is.backgroundCube.fragmentShader,side:di,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(R,C,I){this.matrixWorld.copyPosition(I.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(h)),h.material.uniforms.envMap.value=S,h.material.uniforms.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,h.material.toneMapped=rn.getTransfer(S.colorSpace)!==hn,(d!==S||p!==S.version||m!==n.toneMapping)&&(h.material.needsUpdate=!0,d=S,p=S.version,m=n.toneMapping),h.layers.enableAll(),_.unshift(h,h.geometry,h.material,0,0,null)):S&&S.isTexture&&(c===void 0&&(c=new jn(new Qh(2,2),new Us({name:"BackgroundMaterial",uniforms:Dh(Is.background.uniforms),vertexShader:Is.background.vertexShader,fragmentShader:Is.background.fragmentShader,side:vo,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=S,c.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,c.material.toneMapped=rn.getTransfer(S.colorSpace)!==hn,S.matrixAutoUpdate===!0&&S.updateMatrix(),c.material.uniforms.uvTransform.value.copy(S.matrix),(d!==S||p!==S.version||m!==n.toneMapping)&&(c.material.needsUpdate=!0,d=S,p=S.version,m=n.toneMapping),c.layers.enableAll(),_.unshift(c,c.geometry,c.material,0,0,null))}function A(_,g){_.getRGB(t0,Pk(n)),r.buffers.color.setClear(t0.r,t0.g,t0.b,g,o)}return{getClearColor:function(){return a},setClearColor:function(_,g=1){a.set(_),l=g,A(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(_){l=_,A(a,l)},render:v}}function IZ(n,e,t,r){const i=n.getParameter(n.MAX_VERTEX_ATTRIBS),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||s!==null,a={},l=_(null);let c=l,h=!1;function d(W,$,q,ce,O){let G=!1;if(o){const X=A(ce,q,$);c!==X&&(c=X,m(c.object)),G=g(W,ce,q,O),G&&x(W,ce,q,O)}else{const X=$.wireframe===!0;(c.geometry!==ce.id||c.program!==q.id||c.wireframe!==X)&&(c.geometry=ce.id,c.program=q.id,c.wireframe=X,G=!0)}O!==null&&t.update(O,n.ELEMENT_ARRAY_BUFFER),(G||h)&&(h=!1,D(W,$,q,ce),O!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(O).buffer))}function p(){return r.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function m(W){return r.isWebGL2?n.bindVertexArray(W):s.bindVertexArrayOES(W)}function v(W){return r.isWebGL2?n.deleteVertexArray(W):s.deleteVertexArrayOES(W)}function A(W,$,q){const ce=q.wireframe===!0;let O=a[W.id];O===void 0&&(O={},a[W.id]=O);let G=O[$.id];G===void 0&&(G={},O[$.id]=G);let X=G[ce];return X===void 0&&(X=_(p()),G[ce]=X),X}function _(W){const $=[],q=[],ce=[];for(let O=0;O<i;O++)$[O]=0,q[O]=0,ce[O]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:$,enabledAttributes:q,attributeDivisors:ce,object:W,attributes:{},index:null}}function g(W,$,q,ce){const O=c.attributes,G=$.attributes;let X=0;const Q=q.getAttributes();for(const te in Q)if(Q[te].location>=0){const ee=O[te];let pe=G[te];if(pe===void 0&&(te==="instanceMatrix"&&W.instanceMatrix&&(pe=W.instanceMatrix),te==="instanceColor"&&W.instanceColor&&(pe=W.instanceColor)),ee===void 0||ee.attribute!==pe||pe&&ee.data!==pe.data)return!0;X++}return c.attributesNum!==X||c.index!==ce}function x(W,$,q,ce){const O={},G=$.attributes;let X=0;const Q=q.getAttributes();for(const te in Q)if(Q[te].location>=0){let ee=G[te];ee===void 0&&(te==="instanceMatrix"&&W.instanceMatrix&&(ee=W.instanceMatrix),te==="instanceColor"&&W.instanceColor&&(ee=W.instanceColor));const pe={};pe.attribute=ee,ee&&ee.data&&(pe.data=ee.data),O[te]=pe,X++}c.attributes=O,c.attributesNum=X,c.index=ce}function S(){const W=c.newAttributes;for(let $=0,q=W.length;$<q;$++)W[$]=0}function w(W){R(W,0)}function R(W,$){const q=c.newAttributes,ce=c.enabledAttributes,O=c.attributeDivisors;q[W]=1,ce[W]===0&&(n.enableVertexAttribArray(W),ce[W]=1),O[W]!==$&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](W,$),O[W]=$)}function C(){const W=c.newAttributes,$=c.enabledAttributes;for(let q=0,ce=$.length;q<ce;q++)$[q]!==W[q]&&(n.disableVertexAttribArray(q),$[q]=0)}function I(W,$,q,ce,O,G,X){X===!0?n.vertexAttribIPointer(W,$,q,O,G):n.vertexAttribPointer(W,$,q,ce,O,G)}function D(W,$,q,ce){if(r.isWebGL2===!1&&(W.isInstancedMesh||ce.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;S();const O=ce.attributes,G=q.getAttributes(),X=$.defaultAttributeValues;for(const Q in G){const te=G[Q];if(te.location>=0){let be=O[Q];if(be===void 0&&(Q==="instanceMatrix"&&W.instanceMatrix&&(be=W.instanceMatrix),Q==="instanceColor"&&W.instanceColor&&(be=W.instanceColor)),be!==void 0){const ee=be.normalized,pe=be.itemSize,Me=t.get(be);if(Me===void 0)continue;const Ie=Me.buffer,$e=Me.type,je=Me.bytesPerElement,ue=r.isWebGL2===!0&&($e===n.INT||$e===n.UNSIGNED_INT||be.gpuType===ZT);if(be.isInterleavedBufferAttribute){const ae=be.data,z=ae.stride,he=be.offset;if(ae.isInstancedInterleavedBuffer){for(let ie=0;ie<te.locationSize;ie++)R(te.location+ie,ae.meshPerAttribute);W.isInstancedMesh!==!0&&ce._maxInstanceCount===void 0&&(ce._maxInstanceCount=ae.meshPerAttribute*ae.count)}else for(let ie=0;ie<te.locationSize;ie++)w(te.location+ie);n.bindBuffer(n.ARRAY_BUFFER,Ie);for(let ie=0;ie<te.locationSize;ie++)I(te.location+ie,pe/te.locationSize,$e,ee,z*je,(he+pe/te.locationSize*ie)*je,ue)}else{if(be.isInstancedBufferAttribute){for(let ae=0;ae<te.locationSize;ae++)R(te.location+ae,be.meshPerAttribute);W.isInstancedMesh!==!0&&ce._maxInstanceCount===void 0&&(ce._maxInstanceCount=be.meshPerAttribute*be.count)}else for(let ae=0;ae<te.locationSize;ae++)w(te.location+ae);n.bindBuffer(n.ARRAY_BUFFER,Ie);for(let ae=0;ae<te.locationSize;ae++)I(te.location+ae,pe/te.locationSize,$e,ee,pe*je,pe/te.locationSize*ae*je,ue)}}else if(X!==void 0){const ee=X[Q];if(ee!==void 0)switch(ee.length){case 2:n.vertexAttrib2fv(te.location,ee);break;case 3:n.vertexAttrib3fv(te.location,ee);break;case 4:n.vertexAttrib4fv(te.location,ee);break;default:n.vertexAttrib1fv(te.location,ee)}}}}C()}function N(){H();for(const W in a){const $=a[W];for(const q in $){const ce=$[q];for(const O in ce)v(ce[O].object),delete ce[O];delete $[q]}delete a[W]}}function T(W){if(a[W.id]===void 0)return;const $=a[W.id];for(const q in $){const ce=$[q];for(const O in ce)v(ce[O].object),delete ce[O];delete $[q]}delete a[W.id]}function L(W){for(const $ in a){const q=a[$];if(q[W.id]===void 0)continue;const ce=q[W.id];for(const O in ce)v(ce[O].object),delete ce[O];delete q[W.id]}}function H(){J(),h=!0,c!==l&&(c=l,m(c.object))}function J(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:d,reset:H,resetDefaultState:J,dispose:N,releaseStatesOfGeometry:T,releaseStatesOfProgram:L,initAttributes:S,enableAttribute:w,disableUnusedAttributes:C}}function LZ(n,e,t,r){const i=r.isWebGL2;let s;function o(h){s=h}function a(h,d){n.drawArrays(s,h,d),t.update(d,s,1)}function l(h,d,p){if(p===0)return;let m,v;if(i)m=n,v="drawArraysInstanced";else if(m=e.get("ANGLE_instanced_arrays"),v="drawArraysInstancedANGLE",m===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[v](s,h,d,p),t.update(d,s,p)}function c(h,d,p){if(p===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let v=0;v<p;v++)this.render(h[v],d[v]);else{m.multiDrawArraysWEBGL(s,h,0,d,0,p);let v=0;for(let A=0;A<p;A++)v+=d[A];t.update(v,s,1)}}this.setMode=o,this.render=a,this.renderInstances=l,this.renderMultiDraw=c}function DZ(n,e,t){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const I=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(I.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(I){if(I==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";I="mediump"}return I==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),h=t.logarithmicDepthBuffer===!0,d=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),p=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_TEXTURE_SIZE),v=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),A=n.getParameter(n.MAX_VERTEX_ATTRIBS),_=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),g=n.getParameter(n.MAX_VARYING_VECTORS),x=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),S=p>0,w=o||e.has("OES_texture_float"),R=S&&w,C=o?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:i,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:h,maxTextures:d,maxVertexTextures:p,maxTextureSize:m,maxCubemapSize:v,maxAttributes:A,maxVertexUniforms:_,maxVaryings:g,maxFragmentUniforms:x,vertexTextures:S,floatFragmentTextures:w,floatVertexTextures:R,maxSamples:C}}function BZ(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new Fo,a=new Nt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,p){const m=d.length!==0||p||r!==0||i;return i=p,r=d.length,m},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,p){t=h(d,p,0)},this.setState=function(d,p,m){const v=d.clippingPlanes,A=d.clipIntersection,_=d.clipShadows,g=n.get(d);if(!i||v===null||v.length===0||s&&!_)s?h(null):c();else{const x=s?0:r,S=x*4;let w=g.clippingState||null;l.value=w,w=h(v,p,S,m);for(let R=0;R!==S;++R)w[R]=t[R];g.clippingState=w,this.numIntersection=A?this.numPlanes:0,this.numPlanes+=x}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function h(d,p,m,v){const A=d!==null?d.length:0;let _=null;if(A!==0){if(_=l.value,v!==!0||_===null){const g=m+A*4,x=p.matrixWorldInverse;a.getNormalMatrix(x),(_===null||_.length<g)&&(_=new Float32Array(g));for(let S=0,w=m;S!==A;++S,w+=4)o.copy(d[S]).applyMatrix4(x,a),o.normal.toArray(_,w),_[w+3]=o.constant}l.value=_,l.needsUpdate=!0}return e.numPlanes=A,e.numIntersection=0,_}}function NZ(n){let e=new WeakMap;function t(o,a){return a===fp?o.mapping=ta:a===dp&&(o.mapping=il),o}function r(o){if(o&&o.isTexture){const a=o.mapping;if(a===fp||a===dp)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new gC(l.height);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",i),t(c.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}class vs extends Qp{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=h*this.view.offsetY,l=a-h*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Wu=4,n3=[.125,.215,.35,.446,.526,.582],Wl=20,SA=new vs,r3=new Ue;let EA=null,wA=0,MA=0;const Gl=(1+Math.sqrt(5))/2,vu=1/Gl,i3=[new k(1,1,1),new k(-1,1,1),new k(1,1,-1),new k(-1,1,-1),new k(0,Gl,vu),new k(0,Gl,-vu),new k(vu,0,Gl),new k(-vu,0,Gl),new k(Gl,vu,0),new k(-Gl,vu,0)];class Lw{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){EA=this._renderer.getRenderTarget(),wA=this._renderer.getActiveCubeFace(),MA=this._renderer.getActiveMipmapLevel(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=a3(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=o3(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(EA,wA,MA),e.scissorTest=!1,n0(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===ta||e.mapping===il?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),EA=this._renderer.getRenderTarget(),wA=this._renderer.getActiveCubeFace(),MA=this._renderer.getActiveMipmapLevel();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:gn,minFilter:gn,generateMipmaps:!1,type:Ph,format:ci,colorSpace:yo,depthBuffer:!1},i=s3(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=s3(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=OZ(s)),this._blurMaterial=FZ(s,e,t)}return i}_compileMaterial(e){const t=new jn(this._lodPlanes[0],e);this._renderer.compile(t,SA)}_sceneToCubeUV(e,t,r,i){const a=new yn(90,1,t,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],h=this._renderer,d=h.autoClear,p=h.toneMapping;h.getClearColor(r3),h.toneMapping=co,h.autoClear=!1;const m=new zi({name:"PMREM.Background",side:di,depthWrite:!1,depthTest:!1}),v=new jn(new Bc,m);let A=!1;const _=e.background;_?_.isColor&&(m.color.copy(_),e.background=null,A=!0):(m.color.copy(r3),A=!0);for(let g=0;g<6;g++){const x=g%3;x===0?(a.up.set(0,l[g],0),a.lookAt(c[g],0,0)):x===1?(a.up.set(0,0,l[g]),a.lookAt(0,c[g],0)):(a.up.set(0,l[g],0),a.lookAt(0,0,c[g]));const S=this._cubeSize;n0(i,x*S,g>2?S:0,S,S),h.setRenderTarget(i),A&&h.render(v,a),h.render(e,a)}v.geometry.dispose(),v.material.dispose(),h.toneMapping=p,h.autoClear=d,e.background=_}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===ta||e.mapping===il;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=a3()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=o3());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new jn(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;n0(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(o,SA)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=i3[(i-1)%i3.length];this._blur(e,i-1,i,s,o)}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,d=new jn(this._lodPlanes[i],c),p=c.uniforms,m=this._sizeLods[r]-1,v=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*Wl-1),A=s/v,_=isFinite(s)?1+Math.floor(h*A):Wl;_>Wl&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${_} samples when the maximum is set to ${Wl}`);const g=[];let x=0;for(let I=0;I<Wl;++I){const D=I/A,N=Math.exp(-D*D/2);g.push(N),I===0?x+=N:I<_&&(x+=2*N)}for(let I=0;I<g.length;I++)g[I]=g[I]/x;p.envMap.value=e.texture,p.samples.value=_,p.weights.value=g,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:S}=this;p.dTheta.value=v,p.mipInt.value=S-r;const w=this._sizeLods[i],R=3*w*(i>S-Wu?i-S+Wu:0),C=4*(this._cubeSize-w);n0(t,R,C,3*w,2*w),l.setRenderTarget(t),l.render(d,SA)}}function OZ(n){const e=[],t=[],r=[];let i=n;const s=n-Wu+1+n3.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let l=1/a;o>n-Wu?l=n3[o-n+Wu-1]:o===0&&(l=0),r.push(l);const c=1/(a-2),h=-c,d=1+c,p=[h,h,d,h,d,d,h,h,d,d,h,d],m=6,v=6,A=3,_=2,g=1,x=new Float32Array(A*v*m),S=new Float32Array(_*v*m),w=new Float32Array(g*v*m);for(let C=0;C<m;C++){const I=C%3*2/3-1,D=C>2?0:-1,N=[I,D,0,I+2/3,D,0,I+2/3,D+1,0,I,D,0,I+2/3,D+1,0,I,D+1,0];x.set(N,A*v*C),S.set(p,_*v*C);const T=[C,C,C,C,C,C];w.set(T,g*v*C)}const R=new bt;R.setAttribute("position",new Jt(x,A)),R.setAttribute("uv",new Jt(S,_)),R.setAttribute("faceIndex",new Jt(w,g)),e.push(R),i>Wu&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function s3(n,e,t){const r=new ks(n,e,t);return r.texture.mapping=qh,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function n0(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function FZ(n,e,t){const r=new Float32Array(Wl),i=new k(0,1,0);return new Us({name:"SphericalGaussianBlur",defines:{n:Wl,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:vC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Ko,depthTest:!1,depthWrite:!1})}function o3(){return new Us({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:vC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Ko,depthTest:!1,depthWrite:!1})}function a3(){return new Us({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:vC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Ko,depthTest:!1,depthWrite:!1})}function vC(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function kZ(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){const l=a.mapping,c=l===fp||l===dp,h=l===ta||l===il;if(c||h)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let d=e.get(a);return t===null&&(t=new Lw(n)),d=c?t.fromEquirectangular(a,d):t.fromCubemap(a,d),e.set(a,d),d.texture}else{if(e.has(a))return e.get(a).texture;{const d=a.image;if(c&&d&&d.height>0||h&&d&&i(d)){t===null&&(t=new Lw(n));const p=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,p),a.addEventListener("dispose",s),p.texture}else return null}}}return a}function i(a){let l=0;const c=6;for(let h=0;h<c;h++)a[h]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function UZ(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?(t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance")):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const i=t(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function zZ(n,e,t,r){const i={},s=new WeakMap;function o(d){const p=d.target;p.index!==null&&e.remove(p.index);for(const v in p.attributes)e.remove(p.attributes[v]);for(const v in p.morphAttributes){const A=p.morphAttributes[v];for(let _=0,g=A.length;_<g;_++)e.remove(A[_])}p.removeEventListener("dispose",o),delete i[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),r.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function a(d,p){return i[p.id]===!0||(p.addEventListener("dispose",o),i[p.id]=!0,t.memory.geometries++),p}function l(d){const p=d.attributes;for(const v in p)e.update(p[v],n.ARRAY_BUFFER);const m=d.morphAttributes;for(const v in m){const A=m[v];for(let _=0,g=A.length;_<g;_++)e.update(A[_],n.ARRAY_BUFFER)}}function c(d){const p=[],m=d.index,v=d.attributes.position;let A=0;if(m!==null){const x=m.array;A=m.version;for(let S=0,w=x.length;S<w;S+=3){const R=x[S+0],C=x[S+1],I=x[S+2];p.push(R,C,C,I,I,R)}}else if(v!==void 0){const x=v.array;A=v.version;for(let S=0,w=x.length/3-1;S<w;S+=3){const R=S+0,C=S+1,I=S+2;p.push(R,C,C,I,I,R)}}else return;const _=new(Tk(p)?pC:dC)(p,1);_.version=A;const g=s.get(d);g&&e.remove(g),s.set(d,_)}function h(d){const p=s.get(d);if(p){const m=d.index;m!==null&&p.version<m.version&&c(d)}else c(d);return s.get(d)}return{get:a,update:l,getWireframeAttribute:h}}function HZ(n,e,t,r){const i=r.isWebGL2;let s;function o(m){s=m}let a,l;function c(m){a=m.type,l=m.bytesPerElement}function h(m,v){n.drawElements(s,v,a,m*l),t.update(v,s,1)}function d(m,v,A){if(A===0)return;let _,g;if(i)_=n,g="drawElementsInstanced";else if(_=e.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",_===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}_[g](s,v,a,m*l,A),t.update(v,s,A)}function p(m,v,A){if(A===0)return;const _=e.get("WEBGL_multi_draw");if(_===null)for(let g=0;g<A;g++)this.render(m[g]/l,v[g]);else{_.multiDrawElementsWEBGL(s,v,0,a,m,0,A);let g=0;for(let x=0;x<A;x++)g+=v[x];t.update(g,s,1)}}this.setMode=o,this.setIndex=c,this.render=h,this.renderInstances=d,this.renderMultiDraw=p}function VZ(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function GZ(n,e){return n[0]-e[0]}function jZ(n,e){return Math.abs(e[1])-Math.abs(n[1])}function WZ(n,e,t){const r={},i=new Float32Array(8),s=new WeakMap,o=new sn,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,h,d){const p=c.morphTargetInfluences;if(e.isWebGL2===!0){const v=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,A=v!==void 0?v.length:0;let _=s.get(h);if(_===void 0||_.count!==A){let $=function(){J.dispose(),s.delete(h),h.removeEventListener("dispose",$)};var m=$;_!==void 0&&_.texture.dispose();const S=h.morphAttributes.position!==void 0,w=h.morphAttributes.normal!==void 0,R=h.morphAttributes.color!==void 0,C=h.morphAttributes.position||[],I=h.morphAttributes.normal||[],D=h.morphAttributes.color||[];let N=0;S===!0&&(N=1),w===!0&&(N=2),R===!0&&(N=3);let T=h.attributes.position.count*N,L=1;T>e.maxTextureSize&&(L=Math.ceil(T/e.maxTextureSize),T=e.maxTextureSize);const H=new Float32Array(T*L*4*A),J=new S_(H,T,L,A);J.type=ps,J.needsUpdate=!0;const W=N*4;for(let q=0;q<A;q++){const ce=C[q],O=I[q],G=D[q],X=T*L*4*q;for(let Q=0;Q<ce.count;Q++){const te=Q*W;S===!0&&(o.fromBufferAttribute(ce,Q),H[X+te+0]=o.x,H[X+te+1]=o.y,H[X+te+2]=o.z,H[X+te+3]=0),w===!0&&(o.fromBufferAttribute(O,Q),H[X+te+4]=o.x,H[X+te+5]=o.y,H[X+te+6]=o.z,H[X+te+7]=0),R===!0&&(o.fromBufferAttribute(G,Q),H[X+te+8]=o.x,H[X+te+9]=o.y,H[X+te+10]=o.z,H[X+te+11]=G.itemSize===4?o.w:1)}}_={count:A,texture:J,size:new _e(T,L)},s.set(h,_),h.addEventListener("dispose",$)}let g=0;for(let S=0;S<p.length;S++)g+=p[S];const x=h.morphTargetsRelative?1:1-g;d.getUniforms().setValue(n,"morphTargetBaseInfluence",x),d.getUniforms().setValue(n,"morphTargetInfluences",p),d.getUniforms().setValue(n,"morphTargetsTexture",_.texture,t),d.getUniforms().setValue(n,"morphTargetsTextureSize",_.size)}else{const v=p===void 0?0:p.length;let A=r[h.id];if(A===void 0||A.length!==v){A=[];for(let w=0;w<v;w++)A[w]=[w,0];r[h.id]=A}for(let w=0;w<v;w++){const R=A[w];R[0]=w,R[1]=p[w]}A.sort(jZ);for(let w=0;w<8;w++)w<v&&A[w][1]?(a[w][0]=A[w][0],a[w][1]=A[w][1]):(a[w][0]=Number.MAX_SAFE_INTEGER,a[w][1]=0);a.sort(GZ);const _=h.morphAttributes.position,g=h.morphAttributes.normal;let x=0;for(let w=0;w<8;w++){const R=a[w],C=R[0],I=R[1];C!==Number.MAX_SAFE_INTEGER&&I?(_&&h.getAttribute("morphTarget"+w)!==_[C]&&h.setAttribute("morphTarget"+w,_[C]),g&&h.getAttribute("morphNormal"+w)!==g[C]&&h.setAttribute("morphNormal"+w,g[C]),i[w]=I,x+=I):(_&&h.hasAttribute("morphTarget"+w)===!0&&h.deleteAttribute("morphTarget"+w),g&&h.hasAttribute("morphNormal"+w)===!0&&h.deleteAttribute("morphNormal"+w),i[w]=0)}const S=h.morphTargetsRelative?1:1-x;d.getUniforms().setValue(n,"morphTargetBaseInfluence",S),d.getUniforms().setValue(n,"morphTargetInfluences",i)}}return{update:l}}function XZ(n,e,t,r){let i=new WeakMap;function s(l){const c=r.render.frame,h=l.geometry,d=e.get(l,h);if(i.get(d)!==c&&(e.update(d),i.set(d,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),i.set(l,c))),l.isSkinnedMesh){const p=l.skeleton;i.get(p)!==c&&(p.update(),i.set(p,c))}return d}function o(){i=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}class yC extends xn{constructor(e,t,r,i,s,o,a,l,c,h){if(h=h!==void 0?h:$a,h!==$a&&h!==Mc)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&h===$a&&(r=Vo),r===void 0&&h===Mc&&(r=Ka),super(null,i,s,o,a,l,h,r,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Nn,this.minFilter=l!==void 0?l:Nn,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const Dk=new xn,Bk=new yC(1,1);Bk.compareFunction=cC;const Nk=new S_,Ok=new fC,Fk=new Zp,l3=[],c3=[],u3=new Float32Array(16),h3=new Float32Array(9),f3=new Float32Array(4);function Zh(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=l3[i];if(s===void 0&&(s=new Float32Array(i),l3[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function or(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function ar(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function E_(n,e){let t=c3[e];t===void 0&&(t=new Int32Array(e),c3[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function JZ(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function KZ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(or(t,e))return;n.uniform2fv(this.addr,e),ar(t,e)}}function $Z(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(or(t,e))return;n.uniform3fv(this.addr,e),ar(t,e)}}function YZ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(or(t,e))return;n.uniform4fv(this.addr,e),ar(t,e)}}function qZ(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(or(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),ar(t,e)}else{if(or(t,r))return;f3.set(r),n.uniformMatrix2fv(this.addr,!1,f3),ar(t,r)}}function QZ(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(or(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),ar(t,e)}else{if(or(t,r))return;h3.set(r),n.uniformMatrix3fv(this.addr,!1,h3),ar(t,r)}}function ZZ(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(or(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),ar(t,e)}else{if(or(t,r))return;u3.set(r),n.uniformMatrix4fv(this.addr,!1,u3),ar(t,r)}}function eee(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function tee(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(or(t,e))return;n.uniform2iv(this.addr,e),ar(t,e)}}function nee(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(or(t,e))return;n.uniform3iv(this.addr,e),ar(t,e)}}function ree(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(or(t,e))return;n.uniform4iv(this.addr,e),ar(t,e)}}function iee(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function see(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(or(t,e))return;n.uniform2uiv(this.addr,e),ar(t,e)}}function oee(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(or(t,e))return;n.uniform3uiv(this.addr,e),ar(t,e)}}function aee(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(or(t,e))return;n.uniform4uiv(this.addr,e),ar(t,e)}}function lee(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i);const s=this.type===n.SAMPLER_2D_SHADOW?Bk:Dk;t.setTexture2D(e||s,i)}function cee(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||Ok,i)}function uee(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||Fk,i)}function hee(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||Nk,i)}function fee(n){switch(n){case 5126:return JZ;case 35664:return KZ;case 35665:return $Z;case 35666:return YZ;case 35674:return qZ;case 35675:return QZ;case 35676:return ZZ;case 5124:case 35670:return eee;case 35667:case 35671:return tee;case 35668:case 35672:return nee;case 35669:case 35673:return ree;case 5125:return iee;case 36294:return see;case 36295:return oee;case 36296:return aee;case 35678:case 36198:case 36298:case 36306:case 35682:return lee;case 35679:case 36299:case 36307:return cee;case 35680:case 36300:case 36308:case 36293:return uee;case 36289:case 36303:case 36311:case 36292:return hee}}function dee(n,e){n.uniform1fv(this.addr,e)}function pee(n,e){const t=Zh(e,this.size,2);n.uniform2fv(this.addr,t)}function mee(n,e){const t=Zh(e,this.size,3);n.uniform3fv(this.addr,t)}function gee(n,e){const t=Zh(e,this.size,4);n.uniform4fv(this.addr,t)}function vee(n,e){const t=Zh(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function yee(n,e){const t=Zh(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function _ee(n,e){const t=Zh(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function xee(n,e){n.uniform1iv(this.addr,e)}function Aee(n,e){n.uniform2iv(this.addr,e)}function See(n,e){n.uniform3iv(this.addr,e)}function Eee(n,e){n.uniform4iv(this.addr,e)}function wee(n,e){n.uniform1uiv(this.addr,e)}function Mee(n,e){n.uniform2uiv(this.addr,e)}function Tee(n,e){n.uniform3uiv(this.addr,e)}function Cee(n,e){n.uniform4uiv(this.addr,e)}function bee(n,e,t){const r=this.cache,i=e.length,s=E_(t,i);or(r,s)||(n.uniform1iv(this.addr,s),ar(r,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||Dk,s[o])}function Ree(n,e,t){const r=this.cache,i=e.length,s=E_(t,i);or(r,s)||(n.uniform1iv(this.addr,s),ar(r,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||Ok,s[o])}function Pee(n,e,t){const r=this.cache,i=e.length,s=E_(t,i);or(r,s)||(n.uniform1iv(this.addr,s),ar(r,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||Fk,s[o])}function Iee(n,e,t){const r=this.cache,i=e.length,s=E_(t,i);or(r,s)||(n.uniform1iv(this.addr,s),ar(r,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||Nk,s[o])}function Lee(n){switch(n){case 5126:return dee;case 35664:return pee;case 35665:return mee;case 35666:return gee;case 35674:return vee;case 35675:return yee;case 35676:return _ee;case 5124:case 35670:return xee;case 35667:case 35671:return Aee;case 35668:case 35672:return See;case 35669:case 35673:return Eee;case 5125:return wee;case 36294:return Mee;case 36295:return Tee;case 36296:return Cee;case 35678:case 36198:case 36298:case 36306:case 35682:return bee;case 35679:case 36299:case 36307:return Ree;case 35680:case 36300:case 36308:case 36293:return Pee;case 36289:case 36303:case 36311:case 36292:return Iee}}class Dee{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.setValue=fee(t.type)}}class Bee{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=Lee(t.type)}}class Nee{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,t[a.id],r)}}}const TA=/(\w+)(\])?(\[|\.)?/g;function d3(n,e){n.seq.push(e),n.map[e.id]=e}function Oee(n,e,t){const r=n.name,i=r.length;for(TA.lastIndex=0;;){const s=TA.exec(r),o=TA.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===i){d3(t,c===void 0?new Dee(a,n,e):new Bee(a,n,e));break}else{let d=t.map[a];d===void 0&&(d=new Nee(a),d3(t,d)),t=d}}}class tv{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);Oee(s,o,this)}}setValue(e,t,r,i){const s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&r.push(o)}return r}}function p3(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}const Fee=37297;let kee=0;function Uee(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return r.join(`
`)}function zee(n){const e=rn.getPrimaries(rn.workingColorSpace),t=rn.getPrimaries(n);let r;switch(e===t?r="":e===yp&&t===vp?r="LinearDisplayP3ToLinearSRGB":e===vp&&t===yp&&(r="LinearSRGBToLinearDisplayP3"),n){case yo:case Yp:return[r,"LinearTransferOETF"];case rr:case A_:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[r,"LinearTransferOETF"]}}function m3(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+Uee(n.getShaderSource(e),o)}else return i}function Hee(n,e){const t=zee(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function Vee(n,e){let t;switch(e){case q4:t="Linear";break;case Q4:t="Reinhard";break;case Z4:t="OptimizedCineon";break;case QT:t="ACESFilmic";break;case tk:t="AgX";break;case ek:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function Gee(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.alphaToCoverage||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Xu).join(`
`)}function jee(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Xu).join(`
`)}function Wee(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function Xee(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function Xu(n){return n!==""}function g3(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function v3(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Jee=/^[ \t]*#include +<([\w\d./]+)>/gm;function Dw(n){return n.replace(Jee,$ee)}const Kee=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function $ee(n,e){let t=Lt[e];if(t===void 0){const r=Kee.get(e);if(r!==void 0)t=Lt[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return Dw(t)}const Yee=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function y3(n){return n.replace(Yee,qee)}function qee(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function _3(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	`;return n.isWebGL2&&(e+=`precision ${n.precision} sampler3D;
		precision ${n.precision} sampler2DArray;
		precision ${n.precision} sampler2DShadow;
		precision ${n.precision} samplerCubeShadow;
		precision ${n.precision} sampler2DArrayShadow;
		precision ${n.precision} isampler2D;
		precision ${n.precision} isampler3D;
		precision ${n.precision} isamplerCube;
		precision ${n.precision} isampler2DArray;
		precision ${n.precision} usampler2D;
		precision ${n.precision} usampler3D;
		precision ${n.precision} usamplerCube;
		precision ${n.precision} usampler2DArray;
		`),n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Qee(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===v_?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Ed?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===bs&&(e="SHADOWMAP_TYPE_VSM"),e}function Zee(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case ta:case il:e="ENVMAP_TYPE_CUBE";break;case qh:e="ENVMAP_TYPE_CUBE_UV";break}return e}function ete(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case il:e="ENVMAP_MODE_REFRACTION";break}return e}function tte(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case $p:e="ENVMAP_BLENDING_MULTIPLY";break;case $4:e="ENVMAP_BLENDING_MIX";break;case Y4:e="ENVMAP_BLENDING_ADD";break}return e}function nte(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function rte(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=Qee(t),c=Zee(t),h=ete(t),d=tte(t),p=nte(t),m=t.isWebGL2?"":Gee(t),v=jee(t),A=Wee(s),_=i.createProgram();let g,x,S=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,A].filter(Xu).join(`
`),g.length>0&&(g+=`
`),x=[m,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,A].filter(Xu).join(`
`),x.length>0&&(x+=`
`)):(g=[_3(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,A,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Xu).join(`
`),x=[m,_3(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,A,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+h:"",t.envMap?"#define "+d:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==co?"#define TONE_MAPPING":"",t.toneMapping!==co?Lt.tonemapping_pars_fragment:"",t.toneMapping!==co?Vee("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Lt.colorspace_pars_fragment,Hee("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Xu).join(`
`)),o=Dw(o),o=g3(o,t),o=v3(o,t),a=Dw(a),a=g3(a,t),a=v3(a,t),o=y3(o),a=y3(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(S=`#version 300 es
`,g=[v,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,x=["precision mediump sampler2DArray;","#define varying in",t.glslVersion===Pw?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Pw?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+x);const w=S+g+o,R=S+x+a,C=p3(i,i.VERTEX_SHADER,w),I=p3(i,i.FRAGMENT_SHADER,R);i.attachShader(_,C),i.attachShader(_,I),t.index0AttributeName!==void 0?i.bindAttribLocation(_,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(_,0,"position"),i.linkProgram(_);function D(H){if(n.debug.checkShaderErrors){const J=i.getProgramInfoLog(_).trim(),W=i.getShaderInfoLog(C).trim(),$=i.getShaderInfoLog(I).trim();let q=!0,ce=!0;if(i.getProgramParameter(_,i.LINK_STATUS)===!1)if(q=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,_,C,I);else{const O=m3(i,C,"vertex"),G=m3(i,I,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(_,i.VALIDATE_STATUS)+`

Material Name: `+H.name+`
Material Type: `+H.type+`

Program Info Log: `+J+`
`+O+`
`+G)}else J!==""?console.warn("THREE.WebGLProgram: Program Info Log:",J):(W===""||$==="")&&(ce=!1);ce&&(H.diagnostics={runnable:q,programLog:J,vertexShader:{log:W,prefix:g},fragmentShader:{log:$,prefix:x}})}i.deleteShader(C),i.deleteShader(I),N=new tv(i,_),T=Xee(i,_)}let N;this.getUniforms=function(){return N===void 0&&D(this),N};let T;this.getAttributes=function(){return T===void 0&&D(this),T};let L=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return L===!1&&(L=i.getProgramParameter(_,Fee)),L},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(_),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=kee++,this.cacheKey=e,this.usedTimes=1,this.program=_,this.vertexShader=C,this.fragmentShader=I,this}let ite=0;class ste{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new ote(e),t.set(e,r)),r}}class ote{constructor(e){this.id=ite++,this.code=e,this.usedTimes=0}}function ate(n,e,t,r,i,s,o){const a=new fc,l=new ste,c=new Set,h=[],d=i.isWebGL2,p=i.logarithmicDepthBuffer,m=i.vertexTextures;let v=i.precision;const A={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function _(T){return c.add(T),T===0?"uv":`uv${T}`}function g(T,L,H,J,W){const $=J.fog,q=W.geometry,ce=T.isMeshStandardMaterial?J.environment:null,O=(T.isMeshStandardMaterial?t:e).get(T.envMap||ce),G=O&&O.mapping===qh?O.image.height:null,X=A[T.type];T.precision!==null&&(v=i.getMaxPrecision(T.precision),v!==T.precision&&console.warn("THREE.WebGLProgram.getParameters:",T.precision,"not supported, using",v,"instead."));const Q=q.morphAttributes.position||q.morphAttributes.normal||q.morphAttributes.color,te=Q!==void 0?Q.length:0;let be=0;q.morphAttributes.position!==void 0&&(be=1),q.morphAttributes.normal!==void 0&&(be=2),q.morphAttributes.color!==void 0&&(be=3);let ee,pe,Me,Ie;if(X){const Vt=Is[X];ee=Vt.vertexShader,pe=Vt.fragmentShader}else ee=T.vertexShader,pe=T.fragmentShader,l.update(T),Me=l.getVertexShaderID(T),Ie=l.getFragmentShaderID(T);const $e=n.getRenderTarget(),je=W.isInstancedMesh===!0,ue=W.isBatchedMesh===!0,ae=!!T.map,z=!!T.matcap,he=!!O,ie=!!T.aoMap,ve=!!T.lightMap,oe=!!T.bumpMap,Ce=!!T.normalMap,Ee=!!T.displacementMap,F=!!T.emissiveMap,B=!!T.metalnessMap,K=!!T.roughnessMap,xe=T.anisotropy>0,Ae=T.clearcoat>0,Se=T.iridescence>0,qe=T.sheen>0,Ne=T.transmission>0,ke=xe&&!!T.anisotropyMap,lt=Ae&&!!T.clearcoatMap,At=Ae&&!!T.clearcoatNormalMap,Re=Ae&&!!T.clearcoatRoughnessMap,zt=Se&&!!T.iridescenceMap,Pt=Se&&!!T.iridescenceThicknessMap,gt=qe&&!!T.sheenColorMap,at=qe&&!!T.sheenRoughnessMap,Ye=!!T.specularMap,Y=!!T.specularColorMap,we=!!T.specularIntensityMap,He=Ne&&!!T.transmissionMap,Je=Ne&&!!T.thicknessMap,vt=!!T.gradientMap,j=!!T.alphaMap,Pe=T.alphaTest>0,Be=!!T.alphaHash,tt=!!T.extensions;let nt=co;T.toneMapped&&($e===null||$e.isXRRenderTarget===!0)&&(nt=n.toneMapping);const It={isWebGL2:d,shaderID:X,shaderType:T.type,shaderName:T.name,vertexShader:ee,fragmentShader:pe,defines:T.defines,customVertexShaderID:Me,customFragmentShaderID:Ie,isRawShaderMaterial:T.isRawShaderMaterial===!0,glslVersion:T.glslVersion,precision:v,batching:ue,instancing:je,instancingColor:je&&W.instanceColor!==null,supportsVertexTextures:m,outputColorSpace:$e===null?n.outputColorSpace:$e.isXRRenderTarget===!0?$e.texture.colorSpace:yo,alphaToCoverage:!!T.alphaToCoverage,map:ae,matcap:z,envMap:he,envMapMode:he&&O.mapping,envMapCubeUVHeight:G,aoMap:ie,lightMap:ve,bumpMap:oe,normalMap:Ce,displacementMap:m&&Ee,emissiveMap:F,normalMapObjectSpace:Ce&&T.normalMapType===vk,normalMapTangentSpace:Ce&&T.normalMapType===dl,metalnessMap:B,roughnessMap:K,anisotropy:xe,anisotropyMap:ke,clearcoat:Ae,clearcoatMap:lt,clearcoatNormalMap:At,clearcoatRoughnessMap:Re,iridescence:Se,iridescenceMap:zt,iridescenceThicknessMap:Pt,sheen:qe,sheenColorMap:gt,sheenRoughnessMap:at,specularMap:Ye,specularColorMap:Y,specularIntensityMap:we,transmission:Ne,transmissionMap:He,thicknessMap:Je,gradientMap:vt,opaque:T.transparent===!1&&T.blending===cc&&T.alphaToCoverage===!1,alphaMap:j,alphaTest:Pe,alphaHash:Be,combine:T.combine,mapUv:ae&&_(T.map.channel),aoMapUv:ie&&_(T.aoMap.channel),lightMapUv:ve&&_(T.lightMap.channel),bumpMapUv:oe&&_(T.bumpMap.channel),normalMapUv:Ce&&_(T.normalMap.channel),displacementMapUv:Ee&&_(T.displacementMap.channel),emissiveMapUv:F&&_(T.emissiveMap.channel),metalnessMapUv:B&&_(T.metalnessMap.channel),roughnessMapUv:K&&_(T.roughnessMap.channel),anisotropyMapUv:ke&&_(T.anisotropyMap.channel),clearcoatMapUv:lt&&_(T.clearcoatMap.channel),clearcoatNormalMapUv:At&&_(T.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Re&&_(T.clearcoatRoughnessMap.channel),iridescenceMapUv:zt&&_(T.iridescenceMap.channel),iridescenceThicknessMapUv:Pt&&_(T.iridescenceThicknessMap.channel),sheenColorMapUv:gt&&_(T.sheenColorMap.channel),sheenRoughnessMapUv:at&&_(T.sheenRoughnessMap.channel),specularMapUv:Ye&&_(T.specularMap.channel),specularColorMapUv:Y&&_(T.specularColorMap.channel),specularIntensityMapUv:we&&_(T.specularIntensityMap.channel),transmissionMapUv:He&&_(T.transmissionMap.channel),thicknessMapUv:Je&&_(T.thicknessMap.channel),alphaMapUv:j&&_(T.alphaMap.channel),vertexTangents:!!q.attributes.tangent&&(Ce||xe),vertexColors:T.vertexColors,vertexAlphas:T.vertexColors===!0&&!!q.attributes.color&&q.attributes.color.itemSize===4,pointsUvs:W.isPoints===!0&&!!q.attributes.uv&&(ae||j),fog:!!$,useFog:T.fog===!0,fogExp2:!!$&&$.isFogExp2,flatShading:T.flatShading===!0,sizeAttenuation:T.sizeAttenuation===!0,logarithmicDepthBuffer:p,skinning:W.isSkinnedMesh===!0,morphTargets:q.morphAttributes.position!==void 0,morphNormals:q.morphAttributes.normal!==void 0,morphColors:q.morphAttributes.color!==void 0,morphTargetsCount:te,morphTextureStride:be,numDirLights:L.directional.length,numPointLights:L.point.length,numSpotLights:L.spot.length,numSpotLightMaps:L.spotLightMap.length,numRectAreaLights:L.rectArea.length,numHemiLights:L.hemi.length,numDirLightShadows:L.directionalShadowMap.length,numPointLightShadows:L.pointShadowMap.length,numSpotLightShadows:L.spotShadowMap.length,numSpotLightShadowsWithMaps:L.numSpotLightShadowsWithMaps,numLightProbes:L.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:T.dithering,shadowMapEnabled:n.shadowMap.enabled&&H.length>0,shadowMapType:n.shadowMap.type,toneMapping:nt,useLegacyLights:n._useLegacyLights,decodeVideoTexture:ae&&T.map.isVideoTexture===!0&&rn.getTransfer(T.map.colorSpace)===hn,premultipliedAlpha:T.premultipliedAlpha,doubleSided:T.side===ds,flipSided:T.side===di,useDepthPacking:T.depthPacking>=0,depthPacking:T.depthPacking||0,index0AttributeName:T.index0AttributeName,extensionDerivatives:tt&&T.extensions.derivatives===!0,extensionFragDepth:tt&&T.extensions.fragDepth===!0,extensionDrawBuffers:tt&&T.extensions.drawBuffers===!0,extensionShaderTextureLOD:tt&&T.extensions.shaderTextureLOD===!0,extensionClipCullDistance:tt&&T.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:tt&&T.extensions.multiDraw===!0&&r.has("WEBGL_multi_draw"),rendererExtensionFragDepth:d||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||r.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:T.customProgramCacheKey()};return It.vertexUv1s=c.has(1),It.vertexUv2s=c.has(2),It.vertexUv3s=c.has(3),c.clear(),It}function x(T){const L=[];if(T.shaderID?L.push(T.shaderID):(L.push(T.customVertexShaderID),L.push(T.customFragmentShaderID)),T.defines!==void 0)for(const H in T.defines)L.push(H),L.push(T.defines[H]);return T.isRawShaderMaterial===!1&&(S(L,T),w(L,T),L.push(n.outputColorSpace)),L.push(T.customProgramCacheKey),L.join()}function S(T,L){T.push(L.precision),T.push(L.outputColorSpace),T.push(L.envMapMode),T.push(L.envMapCubeUVHeight),T.push(L.mapUv),T.push(L.alphaMapUv),T.push(L.lightMapUv),T.push(L.aoMapUv),T.push(L.bumpMapUv),T.push(L.normalMapUv),T.push(L.displacementMapUv),T.push(L.emissiveMapUv),T.push(L.metalnessMapUv),T.push(L.roughnessMapUv),T.push(L.anisotropyMapUv),T.push(L.clearcoatMapUv),T.push(L.clearcoatNormalMapUv),T.push(L.clearcoatRoughnessMapUv),T.push(L.iridescenceMapUv),T.push(L.iridescenceThicknessMapUv),T.push(L.sheenColorMapUv),T.push(L.sheenRoughnessMapUv),T.push(L.specularMapUv),T.push(L.specularColorMapUv),T.push(L.specularIntensityMapUv),T.push(L.transmissionMapUv),T.push(L.thicknessMapUv),T.push(L.combine),T.push(L.fogExp2),T.push(L.sizeAttenuation),T.push(L.morphTargetsCount),T.push(L.morphAttributeCount),T.push(L.numDirLights),T.push(L.numPointLights),T.push(L.numSpotLights),T.push(L.numSpotLightMaps),T.push(L.numHemiLights),T.push(L.numRectAreaLights),T.push(L.numDirLightShadows),T.push(L.numPointLightShadows),T.push(L.numSpotLightShadows),T.push(L.numSpotLightShadowsWithMaps),T.push(L.numLightProbes),T.push(L.shadowMapType),T.push(L.toneMapping),T.push(L.numClippingPlanes),T.push(L.numClipIntersection),T.push(L.depthPacking)}function w(T,L){a.disableAll(),L.isWebGL2&&a.enable(0),L.supportsVertexTextures&&a.enable(1),L.instancing&&a.enable(2),L.instancingColor&&a.enable(3),L.matcap&&a.enable(4),L.envMap&&a.enable(5),L.normalMapObjectSpace&&a.enable(6),L.normalMapTangentSpace&&a.enable(7),L.clearcoat&&a.enable(8),L.iridescence&&a.enable(9),L.alphaTest&&a.enable(10),L.vertexColors&&a.enable(11),L.vertexAlphas&&a.enable(12),L.vertexUv1s&&a.enable(13),L.vertexUv2s&&a.enable(14),L.vertexUv3s&&a.enable(15),L.vertexTangents&&a.enable(16),L.anisotropy&&a.enable(17),L.alphaHash&&a.enable(18),L.batching&&a.enable(19),T.push(a.mask),a.disableAll(),L.fog&&a.enable(0),L.useFog&&a.enable(1),L.flatShading&&a.enable(2),L.logarithmicDepthBuffer&&a.enable(3),L.skinning&&a.enable(4),L.morphTargets&&a.enable(5),L.morphNormals&&a.enable(6),L.morphColors&&a.enable(7),L.premultipliedAlpha&&a.enable(8),L.shadowMapEnabled&&a.enable(9),L.useLegacyLights&&a.enable(10),L.doubleSided&&a.enable(11),L.flipSided&&a.enable(12),L.useDepthPacking&&a.enable(13),L.dithering&&a.enable(14),L.transmission&&a.enable(15),L.sheen&&a.enable(16),L.opaque&&a.enable(17),L.pointsUvs&&a.enable(18),L.decodeVideoTexture&&a.enable(19),L.alphaToCoverage&&a.enable(20),T.push(a.mask)}function R(T){const L=A[T.type];let H;if(L){const J=Is[L];H=Ik.clone(J.uniforms)}else H=T.uniforms;return H}function C(T,L){let H;for(let J=0,W=h.length;J<W;J++){const $=h[J];if($.cacheKey===L){H=$,++H.usedTimes;break}}return H===void 0&&(H=new rte(n,L,T,s),h.push(H)),H}function I(T){if(--T.usedTimes===0){const L=h.indexOf(T);h[L]=h[h.length-1],h.pop(),T.destroy()}}function D(T){l.remove(T)}function N(){l.dispose()}return{getParameters:g,getProgramCacheKey:x,getUniforms:R,acquireProgram:C,releaseProgram:I,releaseShaderCache:D,programs:h,dispose:N}}function lte(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function r(s,o,a){n.get(s)[o]=a}function i(){n=new WeakMap}return{get:e,remove:t,update:r,dispose:i}}function cte(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function x3(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function A3(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function o(d,p,m,v,A,_){let g=n[e];return g===void 0?(g={id:d.id,object:d,geometry:p,material:m,groupOrder:v,renderOrder:d.renderOrder,z:A,group:_},n[e]=g):(g.id=d.id,g.object=d,g.geometry=p,g.material=m,g.groupOrder=v,g.renderOrder=d.renderOrder,g.z=A,g.group=_),e++,g}function a(d,p,m,v,A,_){const g=o(d,p,m,v,A,_);m.transmission>0?r.push(g):m.transparent===!0?i.push(g):t.push(g)}function l(d,p,m,v,A,_){const g=o(d,p,m,v,A,_);m.transmission>0?r.unshift(g):m.transparent===!0?i.unshift(g):t.unshift(g)}function c(d,p){t.length>1&&t.sort(d||cte),r.length>1&&r.sort(p||x3),i.length>1&&i.sort(p||x3)}function h(){for(let d=e,p=n.length;d<p;d++){const m=n[d];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:h,sort:c}}function ute(){let n=new WeakMap;function e(r,i){const s=n.get(r);let o;return s===void 0?(o=new A3,n.set(r,[o])):i>=s.length?(o=new A3,s.push(o)):o=s[i],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function hte(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new k,color:new Ue};break;case"SpotLight":t={position:new k,direction:new k,color:new Ue,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new k,color:new Ue,distance:0,decay:0};break;case"HemisphereLight":t={direction:new k,skyColor:new Ue,groundColor:new Ue};break;case"RectAreaLight":t={color:new Ue,position:new k,halfWidth:new k,halfHeight:new k};break}return n[e.id]=t,t}}}function fte(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new _e};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new _e};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new _e,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let dte=0;function pte(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function mte(n,e){const t=new hte,r=fte(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let h=0;h<9;h++)i.probe.push(new k);const s=new k,o=new ht,a=new ht;function l(h,d){let p=0,m=0,v=0;for(let H=0;H<9;H++)i.probe[H].set(0,0,0);let A=0,_=0,g=0,x=0,S=0,w=0,R=0,C=0,I=0,D=0,N=0;h.sort(pte);const T=d===!0?Math.PI:1;for(let H=0,J=h.length;H<J;H++){const W=h[H],$=W.color,q=W.intensity,ce=W.distance,O=W.shadow&&W.shadow.map?W.shadow.map.texture:null;if(W.isAmbientLight)p+=$.r*q*T,m+=$.g*q*T,v+=$.b*q*T;else if(W.isLightProbe){for(let G=0;G<9;G++)i.probe[G].addScaledVector(W.sh.coefficients[G],q);N++}else if(W.isDirectionalLight){const G=t.get(W);if(G.color.copy(W.color).multiplyScalar(W.intensity*T),W.castShadow){const X=W.shadow,Q=r.get(W);Q.shadowBias=X.bias,Q.shadowNormalBias=X.normalBias,Q.shadowRadius=X.radius,Q.shadowMapSize=X.mapSize,i.directionalShadow[A]=Q,i.directionalShadowMap[A]=O,i.directionalShadowMatrix[A]=W.shadow.matrix,w++}i.directional[A]=G,A++}else if(W.isSpotLight){const G=t.get(W);G.position.setFromMatrixPosition(W.matrixWorld),G.color.copy($).multiplyScalar(q*T),G.distance=ce,G.coneCos=Math.cos(W.angle),G.penumbraCos=Math.cos(W.angle*(1-W.penumbra)),G.decay=W.decay,i.spot[g]=G;const X=W.shadow;if(W.map&&(i.spotLightMap[I]=W.map,I++,X.updateMatrices(W),W.castShadow&&D++),i.spotLightMatrix[g]=X.matrix,W.castShadow){const Q=r.get(W);Q.shadowBias=X.bias,Q.shadowNormalBias=X.normalBias,Q.shadowRadius=X.radius,Q.shadowMapSize=X.mapSize,i.spotShadow[g]=Q,i.spotShadowMap[g]=O,C++}g++}else if(W.isRectAreaLight){const G=t.get(W);G.color.copy($).multiplyScalar(q),G.halfWidth.set(W.width*.5,0,0),G.halfHeight.set(0,W.height*.5,0),i.rectArea[x]=G,x++}else if(W.isPointLight){const G=t.get(W);if(G.color.copy(W.color).multiplyScalar(W.intensity*T),G.distance=W.distance,G.decay=W.decay,W.castShadow){const X=W.shadow,Q=r.get(W);Q.shadowBias=X.bias,Q.shadowNormalBias=X.normalBias,Q.shadowRadius=X.radius,Q.shadowMapSize=X.mapSize,Q.shadowCameraNear=X.camera.near,Q.shadowCameraFar=X.camera.far,i.pointShadow[_]=Q,i.pointShadowMap[_]=O,i.pointShadowMatrix[_]=W.shadow.matrix,R++}i.point[_]=G,_++}else if(W.isHemisphereLight){const G=t.get(W);G.skyColor.copy(W.color).multiplyScalar(q*T),G.groundColor.copy(W.groundColor).multiplyScalar(q*T),i.hemi[S]=G,S++}}x>0&&(e.isWebGL2?n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Oe.LTC_FLOAT_1,i.rectAreaLTC2=Oe.LTC_FLOAT_2):(i.rectAreaLTC1=Oe.LTC_HALF_1,i.rectAreaLTC2=Oe.LTC_HALF_2):n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Oe.LTC_FLOAT_1,i.rectAreaLTC2=Oe.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=Oe.LTC_HALF_1,i.rectAreaLTC2=Oe.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=p,i.ambient[1]=m,i.ambient[2]=v;const L=i.hash;(L.directionalLength!==A||L.pointLength!==_||L.spotLength!==g||L.rectAreaLength!==x||L.hemiLength!==S||L.numDirectionalShadows!==w||L.numPointShadows!==R||L.numSpotShadows!==C||L.numSpotMaps!==I||L.numLightProbes!==N)&&(i.directional.length=A,i.spot.length=g,i.rectArea.length=x,i.point.length=_,i.hemi.length=S,i.directionalShadow.length=w,i.directionalShadowMap.length=w,i.pointShadow.length=R,i.pointShadowMap.length=R,i.spotShadow.length=C,i.spotShadowMap.length=C,i.directionalShadowMatrix.length=w,i.pointShadowMatrix.length=R,i.spotLightMatrix.length=C+I-D,i.spotLightMap.length=I,i.numSpotLightShadowsWithMaps=D,i.numLightProbes=N,L.directionalLength=A,L.pointLength=_,L.spotLength=g,L.rectAreaLength=x,L.hemiLength=S,L.numDirectionalShadows=w,L.numPointShadows=R,L.numSpotShadows=C,L.numSpotMaps=I,L.numLightProbes=N,i.version=dte++)}function c(h,d){let p=0,m=0,v=0,A=0,_=0;const g=d.matrixWorldInverse;for(let x=0,S=h.length;x<S;x++){const w=h[x];if(w.isDirectionalLight){const R=i.directional[p];R.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),R.direction.sub(s),R.direction.transformDirection(g),p++}else if(w.isSpotLight){const R=i.spot[v];R.position.setFromMatrixPosition(w.matrixWorld),R.position.applyMatrix4(g),R.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),R.direction.sub(s),R.direction.transformDirection(g),v++}else if(w.isRectAreaLight){const R=i.rectArea[A];R.position.setFromMatrixPosition(w.matrixWorld),R.position.applyMatrix4(g),a.identity(),o.copy(w.matrixWorld),o.premultiply(g),a.extractRotation(o),R.halfWidth.set(w.width*.5,0,0),R.halfHeight.set(0,w.height*.5,0),R.halfWidth.applyMatrix4(a),R.halfHeight.applyMatrix4(a),A++}else if(w.isPointLight){const R=i.point[m];R.position.setFromMatrixPosition(w.matrixWorld),R.position.applyMatrix4(g),m++}else if(w.isHemisphereLight){const R=i.hemi[_];R.direction.setFromMatrixPosition(w.matrixWorld),R.direction.transformDirection(g),_++}}}return{setup:l,setupView:c,state:i}}function S3(n,e){const t=new mte(n,e),r=[],i=[];function s(){r.length=0,i.length=0}function o(d){r.push(d)}function a(d){i.push(d)}function l(d){t.setup(r,d)}function c(d){t.setupView(r,d)}return{init:s,state:{lightsArray:r,shadowsArray:i,lights:t},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function gte(n,e){let t=new WeakMap;function r(s,o=0){const a=t.get(s);let l;return a===void 0?(l=new S3(n,e),t.set(s,[l])):o>=a.length?(l=new S3(n,e),a.push(l)):l=a[o],l}function i(){t=new WeakMap}return{get:r,dispose:i}}class _C extends er{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=mk,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class xC extends er{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const vte=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,yte=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function _te(n,e,t){let r=new em;const i=new _e,s=new _e,o=new sn,a=new _C({depthPacking:gk}),l=new xC,c={},h=t.maxTextureSize,d={[vo]:di,[di]:vo,[ds]:ds},p=new Us({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new _e},radius:{value:4}},vertexShader:vte,fragmentShader:yte}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const v=new bt;v.setAttribute("position",new Jt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const A=new jn(v,p),_=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=v_;let g=this.type;this.render=function(C,I,D){if(_.enabled===!1||_.autoUpdate===!1&&_.needsUpdate===!1||C.length===0)return;const N=n.getRenderTarget(),T=n.getActiveCubeFace(),L=n.getActiveMipmapLevel(),H=n.state;H.setBlending(Ko),H.buffers.color.setClear(1,1,1,1),H.buffers.depth.setTest(!0),H.setScissorTest(!1);const J=g!==bs&&this.type===bs,W=g===bs&&this.type!==bs;for(let $=0,q=C.length;$<q;$++){const ce=C[$],O=ce.shadow;if(O===void 0){console.warn("THREE.WebGLShadowMap:",ce,"has no shadow.");continue}if(O.autoUpdate===!1&&O.needsUpdate===!1)continue;i.copy(O.mapSize);const G=O.getFrameExtents();if(i.multiply(G),s.copy(O.mapSize),(i.x>h||i.y>h)&&(i.x>h&&(s.x=Math.floor(h/G.x),i.x=s.x*G.x,O.mapSize.x=s.x),i.y>h&&(s.y=Math.floor(h/G.y),i.y=s.y*G.y,O.mapSize.y=s.y)),O.map===null||J===!0||W===!0){const Q=this.type!==bs?{minFilter:Nn,magFilter:Nn}:{};O.map!==null&&O.map.dispose(),O.map=new ks(i.x,i.y,Q),O.map.texture.name=ce.name+".shadowMap",O.camera.updateProjectionMatrix()}n.setRenderTarget(O.map),n.clear();const X=O.getViewportCount();for(let Q=0;Q<X;Q++){const te=O.getViewport(Q);o.set(s.x*te.x,s.y*te.y,s.x*te.z,s.y*te.w),H.viewport(o),O.updateMatrices(ce,Q),r=O.getFrustum(),w(I,D,O.camera,ce,this.type)}O.isPointLightShadow!==!0&&this.type===bs&&x(O,D),O.needsUpdate=!1}g=this.type,_.needsUpdate=!1,n.setRenderTarget(N,T,L)};function x(C,I){const D=e.update(A);p.defines.VSM_SAMPLES!==C.blurSamples&&(p.defines.VSM_SAMPLES=C.blurSamples,m.defines.VSM_SAMPLES=C.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),C.mapPass===null&&(C.mapPass=new ks(i.x,i.y)),p.uniforms.shadow_pass.value=C.map.texture,p.uniforms.resolution.value=C.mapSize,p.uniforms.radius.value=C.radius,n.setRenderTarget(C.mapPass),n.clear(),n.renderBufferDirect(I,null,D,p,A,null),m.uniforms.shadow_pass.value=C.mapPass.texture,m.uniforms.resolution.value=C.mapSize,m.uniforms.radius.value=C.radius,n.setRenderTarget(C.map),n.clear(),n.renderBufferDirect(I,null,D,m,A,null)}function S(C,I,D,N){let T=null;const L=D.isPointLight===!0?C.customDistanceMaterial:C.customDepthMaterial;if(L!==void 0)T=L;else if(T=D.isPointLight===!0?l:a,n.localClippingEnabled&&I.clipShadows===!0&&Array.isArray(I.clippingPlanes)&&I.clippingPlanes.length!==0||I.displacementMap&&I.displacementScale!==0||I.alphaMap&&I.alphaTest>0||I.map&&I.alphaTest>0){const H=T.uuid,J=I.uuid;let W=c[H];W===void 0&&(W={},c[H]=W);let $=W[J];$===void 0&&($=T.clone(),W[J]=$,I.addEventListener("dispose",R)),T=$}if(T.visible=I.visible,T.wireframe=I.wireframe,N===bs?T.side=I.shadowSide!==null?I.shadowSide:I.side:T.side=I.shadowSide!==null?I.shadowSide:d[I.side],T.alphaMap=I.alphaMap,T.alphaTest=I.alphaTest,T.map=I.map,T.clipShadows=I.clipShadows,T.clippingPlanes=I.clippingPlanes,T.clipIntersection=I.clipIntersection,T.displacementMap=I.displacementMap,T.displacementScale=I.displacementScale,T.displacementBias=I.displacementBias,T.wireframeLinewidth=I.wireframeLinewidth,T.linewidth=I.linewidth,D.isPointLight===!0&&T.isMeshDistanceMaterial===!0){const H=n.properties.get(T);H.light=D}return T}function w(C,I,D,N,T){if(C.visible===!1)return;if(C.layers.test(I.layers)&&(C.isMesh||C.isLine||C.isPoints)&&(C.castShadow||C.receiveShadow&&T===bs)&&(!C.frustumCulled||r.intersectsObject(C))){C.modelViewMatrix.multiplyMatrices(D.matrixWorldInverse,C.matrixWorld);const J=e.update(C),W=C.material;if(Array.isArray(W)){const $=J.groups;for(let q=0,ce=$.length;q<ce;q++){const O=$[q],G=W[O.materialIndex];if(G&&G.visible){const X=S(C,G,N,T);C.onBeforeShadow(n,C,I,D,J,X,O),n.renderBufferDirect(D,null,J,X,C,O),C.onAfterShadow(n,C,I,D,J,X,O)}}}else if(W.visible){const $=S(C,W,N,T);C.onBeforeShadow(n,C,I,D,J,$,null),n.renderBufferDirect(D,null,J,$,C,null),C.onAfterShadow(n,C,I,D,J,$,null)}}const H=C.children;for(let J=0,W=H.length;J<W;J++)w(H[J],I,D,N,T)}function R(C){C.target.removeEventListener("dispose",R);for(const D in c){const N=c[D],T=C.target.uuid;T in N&&(N[T].dispose(),delete N[T])}}}function xte(n,e,t){const r=t.isWebGL2;function i(){let j=!1;const Pe=new sn;let Be=null;const tt=new sn(0,0,0,0);return{setMask:function(nt){Be!==nt&&!j&&(n.colorMask(nt,nt,nt,nt),Be=nt)},setLocked:function(nt){j=nt},setClear:function(nt,It,Vt,un,Un){Un===!0&&(nt*=un,It*=un,Vt*=un),Pe.set(nt,It,Vt,un),tt.equals(Pe)===!1&&(n.clearColor(nt,It,Vt,un),tt.copy(Pe))},reset:function(){j=!1,Be=null,tt.set(-1,0,0,0)}}}function s(){let j=!1,Pe=null,Be=null,tt=null;return{setTest:function(nt){nt?je(n.DEPTH_TEST):ue(n.DEPTH_TEST)},setMask:function(nt){Pe!==nt&&!j&&(n.depthMask(nt),Pe=nt)},setFunc:function(nt){if(Be!==nt){switch(nt){case V4:n.depthFunc(n.NEVER);break;case G4:n.depthFunc(n.ALWAYS);break;case j4:n.depthFunc(n.LESS);break;case hp:n.depthFunc(n.LEQUAL);break;case W4:n.depthFunc(n.EQUAL);break;case X4:n.depthFunc(n.GEQUAL);break;case J4:n.depthFunc(n.GREATER);break;case K4:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Be=nt}},setLocked:function(nt){j=nt},setClear:function(nt){tt!==nt&&(n.clearDepth(nt),tt=nt)},reset:function(){j=!1,Pe=null,Be=null,tt=null}}}function o(){let j=!1,Pe=null,Be=null,tt=null,nt=null,It=null,Vt=null,un=null,Un=null;return{setTest:function(Kt){j||(Kt?je(n.STENCIL_TEST):ue(n.STENCIL_TEST))},setMask:function(Kt){Pe!==Kt&&!j&&(n.stencilMask(Kt),Pe=Kt)},setFunc:function(Kt,xr,Yi){(Be!==Kt||tt!==xr||nt!==Yi)&&(n.stencilFunc(Kt,xr,Yi),Be=Kt,tt=xr,nt=Yi)},setOp:function(Kt,xr,Yi){(It!==Kt||Vt!==xr||un!==Yi)&&(n.stencilOp(Kt,xr,Yi),It=Kt,Vt=xr,un=Yi)},setLocked:function(Kt){j=Kt},setClear:function(Kt){Un!==Kt&&(n.clearStencil(Kt),Un=Kt)},reset:function(){j=!1,Pe=null,Be=null,tt=null,nt=null,It=null,Vt=null,un=null,Un=null}}}const a=new i,l=new s,c=new o,h=new WeakMap,d=new WeakMap;let p={},m={},v=new WeakMap,A=[],_=null,g=!1,x=null,S=null,w=null,R=null,C=null,I=null,D=null,N=new Ue(0,0,0),T=0,L=!1,H=null,J=null,W=null,$=null,q=null;const ce=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let O=!1,G=0;const X=n.getParameter(n.VERSION);X.indexOf("WebGL")!==-1?(G=parseFloat(/^WebGL (\d)/.exec(X)[1]),O=G>=1):X.indexOf("OpenGL ES")!==-1&&(G=parseFloat(/^OpenGL ES (\d)/.exec(X)[1]),O=G>=2);let Q=null,te={};const be=n.getParameter(n.SCISSOR_BOX),ee=n.getParameter(n.VIEWPORT),pe=new sn().fromArray(be),Me=new sn().fromArray(ee);function Ie(j,Pe,Be,tt){const nt=new Uint8Array(4),It=n.createTexture();n.bindTexture(j,It),n.texParameteri(j,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(j,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Vt=0;Vt<Be;Vt++)r&&(j===n.TEXTURE_3D||j===n.TEXTURE_2D_ARRAY)?n.texImage3D(Pe,0,n.RGBA,1,1,tt,0,n.RGBA,n.UNSIGNED_BYTE,nt):n.texImage2D(Pe+Vt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,nt);return It}const $e={};$e[n.TEXTURE_2D]=Ie(n.TEXTURE_2D,n.TEXTURE_2D,1),$e[n.TEXTURE_CUBE_MAP]=Ie(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&($e[n.TEXTURE_2D_ARRAY]=Ie(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),$e[n.TEXTURE_3D]=Ie(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),je(n.DEPTH_TEST),l.setFunc(hp),Ee(!1),F(qE),je(n.CULL_FACE),oe(Ko);function je(j){p[j]!==!0&&(n.enable(j),p[j]=!0)}function ue(j){p[j]!==!1&&(n.disable(j),p[j]=!1)}function ae(j,Pe){return m[j]!==Pe?(n.bindFramebuffer(j,Pe),m[j]=Pe,r&&(j===n.DRAW_FRAMEBUFFER&&(m[n.FRAMEBUFFER]=Pe),j===n.FRAMEBUFFER&&(m[n.DRAW_FRAMEBUFFER]=Pe)),!0):!1}function z(j,Pe){let Be=A,tt=!1;if(j)if(Be=v.get(Pe),Be===void 0&&(Be=[],v.set(Pe,Be)),j.isWebGLMultipleRenderTargets){const nt=j.texture;if(Be.length!==nt.length||Be[0]!==n.COLOR_ATTACHMENT0){for(let It=0,Vt=nt.length;It<Vt;It++)Be[It]=n.COLOR_ATTACHMENT0+It;Be.length=nt.length,tt=!0}}else Be[0]!==n.COLOR_ATTACHMENT0&&(Be[0]=n.COLOR_ATTACHMENT0,tt=!0);else Be[0]!==n.BACK&&(Be[0]=n.BACK,tt=!0);tt&&(t.isWebGL2?n.drawBuffers(Be):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Be))}function he(j){return _!==j?(n.useProgram(j),_=j,!0):!1}const ie={[Ra]:n.FUNC_ADD,[C4]:n.FUNC_SUBTRACT,[b4]:n.FUNC_REVERSE_SUBTRACT};if(r)ie[tw]=n.MIN,ie[nw]=n.MAX;else{const j=e.get("EXT_blend_minmax");j!==null&&(ie[tw]=j.MIN_EXT,ie[nw]=j.MAX_EXT)}const ve={[R4]:n.ZERO,[P4]:n.ONE,[I4]:n.SRC_COLOR,[ly]:n.SRC_ALPHA,[F4]:n.SRC_ALPHA_SATURATE,[N4]:n.DST_COLOR,[D4]:n.DST_ALPHA,[L4]:n.ONE_MINUS_SRC_COLOR,[cy]:n.ONE_MINUS_SRC_ALPHA,[O4]:n.ONE_MINUS_DST_COLOR,[B4]:n.ONE_MINUS_DST_ALPHA,[k4]:n.CONSTANT_COLOR,[U4]:n.ONE_MINUS_CONSTANT_COLOR,[z4]:n.CONSTANT_ALPHA,[H4]:n.ONE_MINUS_CONSTANT_ALPHA};function oe(j,Pe,Be,tt,nt,It,Vt,un,Un,Kt){if(j===Ko){g===!0&&(ue(n.BLEND),g=!1);return}if(g===!1&&(je(n.BLEND),g=!0),j!==T4){if(j!==x||Kt!==L){if((S!==Ra||C!==Ra)&&(n.blendEquation(n.FUNC_ADD),S=Ra,C=Ra),Kt)switch(j){case cc:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case QE:n.blendFunc(n.ONE,n.ONE);break;case ZE:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case ew:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",j);break}else switch(j){case cc:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case QE:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case ZE:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case ew:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",j);break}w=null,R=null,I=null,D=null,N.set(0,0,0),T=0,x=j,L=Kt}return}nt=nt||Pe,It=It||Be,Vt=Vt||tt,(Pe!==S||nt!==C)&&(n.blendEquationSeparate(ie[Pe],ie[nt]),S=Pe,C=nt),(Be!==w||tt!==R||It!==I||Vt!==D)&&(n.blendFuncSeparate(ve[Be],ve[tt],ve[It],ve[Vt]),w=Be,R=tt,I=It,D=Vt),(un.equals(N)===!1||Un!==T)&&(n.blendColor(un.r,un.g,un.b,Un),N.copy(un),T=Un),x=j,L=!1}function Ce(j,Pe){j.side===ds?ue(n.CULL_FACE):je(n.CULL_FACE);let Be=j.side===di;Pe&&(Be=!Be),Ee(Be),j.blending===cc&&j.transparent===!1?oe(Ko):oe(j.blending,j.blendEquation,j.blendSrc,j.blendDst,j.blendEquationAlpha,j.blendSrcAlpha,j.blendDstAlpha,j.blendColor,j.blendAlpha,j.premultipliedAlpha),l.setFunc(j.depthFunc),l.setTest(j.depthTest),l.setMask(j.depthWrite),a.setMask(j.colorWrite);const tt=j.stencilWrite;c.setTest(tt),tt&&(c.setMask(j.stencilWriteMask),c.setFunc(j.stencilFunc,j.stencilRef,j.stencilFuncMask),c.setOp(j.stencilFail,j.stencilZFail,j.stencilZPass)),K(j.polygonOffset,j.polygonOffsetFactor,j.polygonOffsetUnits),j.alphaToCoverage===!0?je(n.SAMPLE_ALPHA_TO_COVERAGE):ue(n.SAMPLE_ALPHA_TO_COVERAGE)}function Ee(j){H!==j&&(j?n.frontFace(n.CW):n.frontFace(n.CCW),H=j)}function F(j){j!==E4?(je(n.CULL_FACE),j!==J&&(j===qE?n.cullFace(n.BACK):j===w4?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):ue(n.CULL_FACE),J=j}function B(j){j!==W&&(O&&n.lineWidth(j),W=j)}function K(j,Pe,Be){j?(je(n.POLYGON_OFFSET_FILL),($!==Pe||q!==Be)&&(n.polygonOffset(Pe,Be),$=Pe,q=Be)):ue(n.POLYGON_OFFSET_FILL)}function xe(j){j?je(n.SCISSOR_TEST):ue(n.SCISSOR_TEST)}function Ae(j){j===void 0&&(j=n.TEXTURE0+ce-1),Q!==j&&(n.activeTexture(j),Q=j)}function Se(j,Pe,Be){Be===void 0&&(Q===null?Be=n.TEXTURE0+ce-1:Be=Q);let tt=te[Be];tt===void 0&&(tt={type:void 0,texture:void 0},te[Be]=tt),(tt.type!==j||tt.texture!==Pe)&&(Q!==Be&&(n.activeTexture(Be),Q=Be),n.bindTexture(j,Pe||$e[j]),tt.type=j,tt.texture=Pe)}function qe(){const j=te[Q];j!==void 0&&j.type!==void 0&&(n.bindTexture(j.type,null),j.type=void 0,j.texture=void 0)}function Ne(){try{n.compressedTexImage2D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function ke(){try{n.compressedTexImage3D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function lt(){try{n.texSubImage2D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function At(){try{n.texSubImage3D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function Re(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function zt(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function Pt(){try{n.texStorage2D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function gt(){try{n.texStorage3D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function at(){try{n.texImage2D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function Ye(){try{n.texImage3D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function Y(j){pe.equals(j)===!1&&(n.scissor(j.x,j.y,j.z,j.w),pe.copy(j))}function we(j){Me.equals(j)===!1&&(n.viewport(j.x,j.y,j.z,j.w),Me.copy(j))}function He(j,Pe){let Be=d.get(Pe);Be===void 0&&(Be=new WeakMap,d.set(Pe,Be));let tt=Be.get(j);tt===void 0&&(tt=n.getUniformBlockIndex(Pe,j.name),Be.set(j,tt))}function Je(j,Pe){const tt=d.get(Pe).get(j);h.get(Pe)!==tt&&(n.uniformBlockBinding(Pe,tt,j.__bindingPointIndex),h.set(Pe,tt))}function vt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),r===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),p={},Q=null,te={},m={},v=new WeakMap,A=[],_=null,g=!1,x=null,S=null,w=null,R=null,C=null,I=null,D=null,N=new Ue(0,0,0),T=0,L=!1,H=null,J=null,W=null,$=null,q=null,pe.set(0,0,n.canvas.width,n.canvas.height),Me.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:je,disable:ue,bindFramebuffer:ae,drawBuffers:z,useProgram:he,setBlending:oe,setMaterial:Ce,setFlipSided:Ee,setCullFace:F,setLineWidth:B,setPolygonOffset:K,setScissorTest:xe,activeTexture:Ae,bindTexture:Se,unbindTexture:qe,compressedTexImage2D:Ne,compressedTexImage3D:ke,texImage2D:at,texImage3D:Ye,updateUBOMapping:He,uniformBlockBinding:Je,texStorage2D:Pt,texStorage3D:gt,texSubImage2D:lt,texSubImage3D:At,compressedTexSubImage2D:Re,compressedTexSubImage3D:zt,scissor:Y,viewport:we,reset:vt}}function Ate(n,e,t,r,i,s,o){const a=i.isWebGL2,l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),h=new WeakMap;let d;const p=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(F,B){return m?new OffscreenCanvas(F,B):Ap("canvas")}function A(F,B,K,xe){let Ae=1;if((F.width>xe||F.height>xe)&&(Ae=xe/Math.max(F.width,F.height)),Ae<1||B===!0)if(typeof HTMLImageElement<"u"&&F instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&F instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&F instanceof ImageBitmap){const Se=B?fy:Math.floor,qe=Se(Ae*F.width),Ne=Se(Ae*F.height);d===void 0&&(d=v(qe,Ne));const ke=K?v(qe,Ne):d;return ke.width=qe,ke.height=Ne,ke.getContext("2d").drawImage(F,0,0,qe,Ne),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+F.width+"x"+F.height+") to ("+qe+"x"+Ne+")."),ke}else return"data"in F&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+F.width+"x"+F.height+")."),F;return F}function _(F){return Iw(F.width)&&Iw(F.height)}function g(F){return a?!1:F.wrapS!==Rr||F.wrapT!==Rr||F.minFilter!==Nn&&F.minFilter!==gn}function x(F,B){return F.generateMipmaps&&B&&F.minFilter!==Nn&&F.minFilter!==gn}function S(F){n.generateMipmap(F)}function w(F,B,K,xe,Ae=!1){if(a===!1)return B;if(F!==null){if(n[F]!==void 0)return n[F];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+F+"'")}let Se=B;if(B===n.RED&&(K===n.FLOAT&&(Se=n.R32F),K===n.HALF_FLOAT&&(Se=n.R16F),K===n.UNSIGNED_BYTE&&(Se=n.R8)),B===n.RED_INTEGER&&(K===n.UNSIGNED_BYTE&&(Se=n.R8UI),K===n.UNSIGNED_SHORT&&(Se=n.R16UI),K===n.UNSIGNED_INT&&(Se=n.R32UI),K===n.BYTE&&(Se=n.R8I),K===n.SHORT&&(Se=n.R16I),K===n.INT&&(Se=n.R32I)),B===n.RG&&(K===n.FLOAT&&(Se=n.RG32F),K===n.HALF_FLOAT&&(Se=n.RG16F),K===n.UNSIGNED_BYTE&&(Se=n.RG8)),B===n.RGBA){const qe=Ae?gp:rn.getTransfer(xe);K===n.FLOAT&&(Se=n.RGBA32F),K===n.HALF_FLOAT&&(Se=n.RGBA16F),K===n.UNSIGNED_BYTE&&(Se=qe===hn?n.SRGB8_ALPHA8:n.RGBA8),K===n.UNSIGNED_SHORT_4_4_4_4&&(Se=n.RGBA4),K===n.UNSIGNED_SHORT_5_5_5_1&&(Se=n.RGB5_A1)}return(Se===n.R16F||Se===n.R32F||Se===n.RG16F||Se===n.RG32F||Se===n.RGBA16F||Se===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Se}function R(F,B,K){return x(F,K)===!0||F.isFramebufferTexture&&F.minFilter!==Nn&&F.minFilter!==gn?Math.log2(Math.max(B.width,B.height))+1:F.mipmaps!==void 0&&F.mipmaps.length>0?F.mipmaps.length:F.isCompressedTexture&&Array.isArray(F.image)?B.mipmaps.length:1}function C(F){return F===Nn||F===pp||F===Pa?n.NEAREST:n.LINEAR}function I(F){const B=F.target;B.removeEventListener("dispose",I),N(B),B.isVideoTexture&&h.delete(B)}function D(F){const B=F.target;B.removeEventListener("dispose",D),L(B)}function N(F){const B=r.get(F);if(B.__webglInit===void 0)return;const K=F.source,xe=p.get(K);if(xe){const Ae=xe[B.__cacheKey];Ae.usedTimes--,Ae.usedTimes===0&&T(F),Object.keys(xe).length===0&&p.delete(K)}r.remove(F)}function T(F){const B=r.get(F);n.deleteTexture(B.__webglTexture);const K=F.source,xe=p.get(K);delete xe[B.__cacheKey],o.memory.textures--}function L(F){const B=F.texture,K=r.get(F),xe=r.get(B);if(xe.__webglTexture!==void 0&&(n.deleteTexture(xe.__webglTexture),o.memory.textures--),F.depthTexture&&F.depthTexture.dispose(),F.isWebGLCubeRenderTarget)for(let Ae=0;Ae<6;Ae++){if(Array.isArray(K.__webglFramebuffer[Ae]))for(let Se=0;Se<K.__webglFramebuffer[Ae].length;Se++)n.deleteFramebuffer(K.__webglFramebuffer[Ae][Se]);else n.deleteFramebuffer(K.__webglFramebuffer[Ae]);K.__webglDepthbuffer&&n.deleteRenderbuffer(K.__webglDepthbuffer[Ae])}else{if(Array.isArray(K.__webglFramebuffer))for(let Ae=0;Ae<K.__webglFramebuffer.length;Ae++)n.deleteFramebuffer(K.__webglFramebuffer[Ae]);else n.deleteFramebuffer(K.__webglFramebuffer);if(K.__webglDepthbuffer&&n.deleteRenderbuffer(K.__webglDepthbuffer),K.__webglMultisampledFramebuffer&&n.deleteFramebuffer(K.__webglMultisampledFramebuffer),K.__webglColorRenderbuffer)for(let Ae=0;Ae<K.__webglColorRenderbuffer.length;Ae++)K.__webglColorRenderbuffer[Ae]&&n.deleteRenderbuffer(K.__webglColorRenderbuffer[Ae]);K.__webglDepthRenderbuffer&&n.deleteRenderbuffer(K.__webglDepthRenderbuffer)}if(F.isWebGLMultipleRenderTargets)for(let Ae=0,Se=B.length;Ae<Se;Ae++){const qe=r.get(B[Ae]);qe.__webglTexture&&(n.deleteTexture(qe.__webglTexture),o.memory.textures--),r.remove(B[Ae])}r.remove(B),r.remove(F)}let H=0;function J(){H=0}function W(){const F=H;return F>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+F+" texture units while this GPU supports only "+i.maxTextures),H+=1,F}function $(F){const B=[];return B.push(F.wrapS),B.push(F.wrapT),B.push(F.wrapR||0),B.push(F.magFilter),B.push(F.minFilter),B.push(F.anisotropy),B.push(F.internalFormat),B.push(F.format),B.push(F.type),B.push(F.generateMipmaps),B.push(F.premultiplyAlpha),B.push(F.flipY),B.push(F.unpackAlignment),B.push(F.colorSpace),B.join()}function q(F,B){const K=r.get(F);if(F.isVideoTexture&&Ce(F),F.isRenderTargetTexture===!1&&F.version>0&&K.__version!==F.version){const xe=F.image;if(xe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(xe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{pe(K,F,B);return}}t.bindTexture(n.TEXTURE_2D,K.__webglTexture,n.TEXTURE0+B)}function ce(F,B){const K=r.get(F);if(F.version>0&&K.__version!==F.version){pe(K,F,B);return}t.bindTexture(n.TEXTURE_2D_ARRAY,K.__webglTexture,n.TEXTURE0+B)}function O(F,B){const K=r.get(F);if(F.version>0&&K.__version!==F.version){pe(K,F,B);return}t.bindTexture(n.TEXTURE_3D,K.__webglTexture,n.TEXTURE0+B)}function G(F,B){const K=r.get(F);if(F.version>0&&K.__version!==F.version){Me(K,F,B);return}t.bindTexture(n.TEXTURE_CUBE_MAP,K.__webglTexture,n.TEXTURE0+B)}const X={[sl]:n.REPEAT,[Rr]:n.CLAMP_TO_EDGE,[Rh]:n.MIRRORED_REPEAT},Q={[Nn]:n.NEAREST,[pp]:n.NEAREST_MIPMAP_NEAREST,[Pa]:n.NEAREST_MIPMAP_LINEAR,[gn]:n.LINEAR,[ch]:n.LINEAR_MIPMAP_NEAREST,[gs]:n.LINEAR_MIPMAP_LINEAR},te={[yk]:n.NEVER,[wk]:n.ALWAYS,[_k]:n.LESS,[cC]:n.LEQUAL,[xk]:n.EQUAL,[Ek]:n.GEQUAL,[Ak]:n.GREATER,[Sk]:n.NOTEQUAL};function be(F,B,K){if(B.type===ps&&e.has("OES_texture_float_linear")===!1&&(B.magFilter===gn||B.magFilter===ch||B.magFilter===Pa||B.magFilter===gs||B.minFilter===gn||B.minFilter===ch||B.minFilter===Pa||B.minFilter===gs)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),K?(n.texParameteri(F,n.TEXTURE_WRAP_S,X[B.wrapS]),n.texParameteri(F,n.TEXTURE_WRAP_T,X[B.wrapT]),(F===n.TEXTURE_3D||F===n.TEXTURE_2D_ARRAY)&&n.texParameteri(F,n.TEXTURE_WRAP_R,X[B.wrapR]),n.texParameteri(F,n.TEXTURE_MAG_FILTER,Q[B.magFilter]),n.texParameteri(F,n.TEXTURE_MIN_FILTER,Q[B.minFilter])):(n.texParameteri(F,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(F,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(F===n.TEXTURE_3D||F===n.TEXTURE_2D_ARRAY)&&n.texParameteri(F,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(B.wrapS!==Rr||B.wrapT!==Rr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(F,n.TEXTURE_MAG_FILTER,C(B.magFilter)),n.texParameteri(F,n.TEXTURE_MIN_FILTER,C(B.minFilter)),B.minFilter!==Nn&&B.minFilter!==gn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),B.compareFunction&&(n.texParameteri(F,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(F,n.TEXTURE_COMPARE_FUNC,te[B.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const xe=e.get("EXT_texture_filter_anisotropic");if(B.magFilter===Nn||B.minFilter!==Pa&&B.minFilter!==gs||B.type===ps&&e.has("OES_texture_float_linear")===!1||a===!1&&B.type===Ph&&e.has("OES_texture_half_float_linear")===!1)return;(B.anisotropy>1||r.get(B).__currentAnisotropy)&&(n.texParameterf(F,xe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(B.anisotropy,i.getMaxAnisotropy())),r.get(B).__currentAnisotropy=B.anisotropy)}}function ee(F,B){let K=!1;F.__webglInit===void 0&&(F.__webglInit=!0,B.addEventListener("dispose",I));const xe=B.source;let Ae=p.get(xe);Ae===void 0&&(Ae={},p.set(xe,Ae));const Se=$(B);if(Se!==F.__cacheKey){Ae[Se]===void 0&&(Ae[Se]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,K=!0),Ae[Se].usedTimes++;const qe=Ae[F.__cacheKey];qe!==void 0&&(Ae[F.__cacheKey].usedTimes--,qe.usedTimes===0&&T(B)),F.__cacheKey=Se,F.__webglTexture=Ae[Se].texture}return K}function pe(F,B,K){let xe=n.TEXTURE_2D;(B.isDataArrayTexture||B.isCompressedArrayTexture)&&(xe=n.TEXTURE_2D_ARRAY),B.isData3DTexture&&(xe=n.TEXTURE_3D);const Ae=ee(F,B),Se=B.source;t.bindTexture(xe,F.__webglTexture,n.TEXTURE0+K);const qe=r.get(Se);if(Se.version!==qe.__version||Ae===!0){t.activeTexture(n.TEXTURE0+K);const Ne=rn.getPrimaries(rn.workingColorSpace),ke=B.colorSpace===Oi?null:rn.getPrimaries(B.colorSpace),lt=B.colorSpace===Oi||Ne===ke?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,B.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,B.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,B.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,lt);const At=g(B)&&_(B.image)===!1;let Re=A(B.image,At,!1,i.maxTextureSize);Re=Ee(B,Re);const zt=_(Re)||a,Pt=s.convert(B.format,B.colorSpace);let gt=s.convert(B.type),at=w(B.internalFormat,Pt,gt,B.colorSpace,B.isVideoTexture);be(xe,B,zt);let Ye;const Y=B.mipmaps,we=a&&B.isVideoTexture!==!0&&at!==sC,He=qe.__version===void 0||Ae===!0,Je=Se.dataReady,vt=R(B,Re,zt);if(B.isDepthTexture)at=n.DEPTH_COMPONENT,a?B.type===ps?at=n.DEPTH_COMPONENT32F:B.type===Vo?at=n.DEPTH_COMPONENT24:B.type===Ka?at=n.DEPTH24_STENCIL8:at=n.DEPTH_COMPONENT16:B.type===ps&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),B.format===$a&&at===n.DEPTH_COMPONENT&&B.type!==__&&B.type!==Vo&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),B.type=Vo,gt=s.convert(B.type)),B.format===Mc&&at===n.DEPTH_COMPONENT&&(at=n.DEPTH_STENCIL,B.type!==Ka&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),B.type=Ka,gt=s.convert(B.type))),He&&(we?t.texStorage2D(n.TEXTURE_2D,1,at,Re.width,Re.height):t.texImage2D(n.TEXTURE_2D,0,at,Re.width,Re.height,0,Pt,gt,null));else if(B.isDataTexture)if(Y.length>0&&zt){we&&He&&t.texStorage2D(n.TEXTURE_2D,vt,at,Y[0].width,Y[0].height);for(let j=0,Pe=Y.length;j<Pe;j++)Ye=Y[j],we?Je&&t.texSubImage2D(n.TEXTURE_2D,j,0,0,Ye.width,Ye.height,Pt,gt,Ye.data):t.texImage2D(n.TEXTURE_2D,j,at,Ye.width,Ye.height,0,Pt,gt,Ye.data);B.generateMipmaps=!1}else we?(He&&t.texStorage2D(n.TEXTURE_2D,vt,at,Re.width,Re.height),Je&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Re.width,Re.height,Pt,gt,Re.data)):t.texImage2D(n.TEXTURE_2D,0,at,Re.width,Re.height,0,Pt,gt,Re.data);else if(B.isCompressedTexture)if(B.isCompressedArrayTexture){we&&He&&t.texStorage3D(n.TEXTURE_2D_ARRAY,vt,at,Y[0].width,Y[0].height,Re.depth);for(let j=0,Pe=Y.length;j<Pe;j++)Ye=Y[j],B.format!==ci?Pt!==null?we?Je&&t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,j,0,0,0,Ye.width,Ye.height,Re.depth,Pt,Ye.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,j,at,Ye.width,Ye.height,Re.depth,0,Ye.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):we?Je&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,j,0,0,0,Ye.width,Ye.height,Re.depth,Pt,gt,Ye.data):t.texImage3D(n.TEXTURE_2D_ARRAY,j,at,Ye.width,Ye.height,Re.depth,0,Pt,gt,Ye.data)}else{we&&He&&t.texStorage2D(n.TEXTURE_2D,vt,at,Y[0].width,Y[0].height);for(let j=0,Pe=Y.length;j<Pe;j++)Ye=Y[j],B.format!==ci?Pt!==null?we?Je&&t.compressedTexSubImage2D(n.TEXTURE_2D,j,0,0,Ye.width,Ye.height,Pt,Ye.data):t.compressedTexImage2D(n.TEXTURE_2D,j,at,Ye.width,Ye.height,0,Ye.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):we?Je&&t.texSubImage2D(n.TEXTURE_2D,j,0,0,Ye.width,Ye.height,Pt,gt,Ye.data):t.texImage2D(n.TEXTURE_2D,j,at,Ye.width,Ye.height,0,Pt,gt,Ye.data)}else if(B.isDataArrayTexture)we?(He&&t.texStorage3D(n.TEXTURE_2D_ARRAY,vt,at,Re.width,Re.height,Re.depth),Je&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Re.width,Re.height,Re.depth,Pt,gt,Re.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,at,Re.width,Re.height,Re.depth,0,Pt,gt,Re.data);else if(B.isData3DTexture)we?(He&&t.texStorage3D(n.TEXTURE_3D,vt,at,Re.width,Re.height,Re.depth),Je&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Re.width,Re.height,Re.depth,Pt,gt,Re.data)):t.texImage3D(n.TEXTURE_3D,0,at,Re.width,Re.height,Re.depth,0,Pt,gt,Re.data);else if(B.isFramebufferTexture){if(He)if(we)t.texStorage2D(n.TEXTURE_2D,vt,at,Re.width,Re.height);else{let j=Re.width,Pe=Re.height;for(let Be=0;Be<vt;Be++)t.texImage2D(n.TEXTURE_2D,Be,at,j,Pe,0,Pt,gt,null),j>>=1,Pe>>=1}}else if(Y.length>0&&zt){we&&He&&t.texStorage2D(n.TEXTURE_2D,vt,at,Y[0].width,Y[0].height);for(let j=0,Pe=Y.length;j<Pe;j++)Ye=Y[j],we?Je&&t.texSubImage2D(n.TEXTURE_2D,j,0,0,Pt,gt,Ye):t.texImage2D(n.TEXTURE_2D,j,at,Pt,gt,Ye);B.generateMipmaps=!1}else we?(He&&t.texStorage2D(n.TEXTURE_2D,vt,at,Re.width,Re.height),Je&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Pt,gt,Re)):t.texImage2D(n.TEXTURE_2D,0,at,Pt,gt,Re);x(B,zt)&&S(xe),qe.__version=Se.version,B.onUpdate&&B.onUpdate(B)}F.__version=B.version}function Me(F,B,K){if(B.image.length!==6)return;const xe=ee(F,B),Ae=B.source;t.bindTexture(n.TEXTURE_CUBE_MAP,F.__webglTexture,n.TEXTURE0+K);const Se=r.get(Ae);if(Ae.version!==Se.__version||xe===!0){t.activeTexture(n.TEXTURE0+K);const qe=rn.getPrimaries(rn.workingColorSpace),Ne=B.colorSpace===Oi?null:rn.getPrimaries(B.colorSpace),ke=B.colorSpace===Oi||qe===Ne?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,B.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,B.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,B.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,ke);const lt=B.isCompressedTexture||B.image[0].isCompressedTexture,At=B.image[0]&&B.image[0].isDataTexture,Re=[];for(let j=0;j<6;j++)!lt&&!At?Re[j]=A(B.image[j],!1,!0,i.maxCubemapSize):Re[j]=At?B.image[j].image:B.image[j],Re[j]=Ee(B,Re[j]);const zt=Re[0],Pt=_(zt)||a,gt=s.convert(B.format,B.colorSpace),at=s.convert(B.type),Ye=w(B.internalFormat,gt,at,B.colorSpace),Y=a&&B.isVideoTexture!==!0,we=Se.__version===void 0||xe===!0,He=Ae.dataReady;let Je=R(B,zt,Pt);be(n.TEXTURE_CUBE_MAP,B,Pt);let vt;if(lt){Y&&we&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Je,Ye,zt.width,zt.height);for(let j=0;j<6;j++){vt=Re[j].mipmaps;for(let Pe=0;Pe<vt.length;Pe++){const Be=vt[Pe];B.format!==ci?gt!==null?Y?He&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+j,Pe,0,0,Be.width,Be.height,gt,Be.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+j,Pe,Ye,Be.width,Be.height,0,Be.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Y?He&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+j,Pe,0,0,Be.width,Be.height,gt,at,Be.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+j,Pe,Ye,Be.width,Be.height,0,gt,at,Be.data)}}}else{vt=B.mipmaps,Y&&we&&(vt.length>0&&Je++,t.texStorage2D(n.TEXTURE_CUBE_MAP,Je,Ye,Re[0].width,Re[0].height));for(let j=0;j<6;j++)if(At){Y?He&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+j,0,0,0,Re[j].width,Re[j].height,gt,at,Re[j].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+j,0,Ye,Re[j].width,Re[j].height,0,gt,at,Re[j].data);for(let Pe=0;Pe<vt.length;Pe++){const tt=vt[Pe].image[j].image;Y?He&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+j,Pe+1,0,0,tt.width,tt.height,gt,at,tt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+j,Pe+1,Ye,tt.width,tt.height,0,gt,at,tt.data)}}else{Y?He&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+j,0,0,0,gt,at,Re[j]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+j,0,Ye,gt,at,Re[j]);for(let Pe=0;Pe<vt.length;Pe++){const Be=vt[Pe];Y?He&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+j,Pe+1,0,0,gt,at,Be.image[j]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+j,Pe+1,Ye,gt,at,Be.image[j])}}}x(B,Pt)&&S(n.TEXTURE_CUBE_MAP),Se.__version=Ae.version,B.onUpdate&&B.onUpdate(B)}F.__version=B.version}function Ie(F,B,K,xe,Ae,Se){const qe=s.convert(K.format,K.colorSpace),Ne=s.convert(K.type),ke=w(K.internalFormat,qe,Ne,K.colorSpace);if(!r.get(B).__hasExternalTextures){const At=Math.max(1,B.width>>Se),Re=Math.max(1,B.height>>Se);Ae===n.TEXTURE_3D||Ae===n.TEXTURE_2D_ARRAY?t.texImage3D(Ae,Se,ke,At,Re,B.depth,0,qe,Ne,null):t.texImage2D(Ae,Se,ke,At,Re,0,qe,Ne,null)}t.bindFramebuffer(n.FRAMEBUFFER,F),oe(B)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,xe,Ae,r.get(K).__webglTexture,0,ve(B)):(Ae===n.TEXTURE_2D||Ae>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Ae<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,xe,Ae,r.get(K).__webglTexture,Se),t.bindFramebuffer(n.FRAMEBUFFER,null)}function $e(F,B,K){if(n.bindRenderbuffer(n.RENDERBUFFER,F),B.depthBuffer&&!B.stencilBuffer){let xe=a===!0?n.DEPTH_COMPONENT24:n.DEPTH_COMPONENT16;if(K||oe(B)){const Ae=B.depthTexture;Ae&&Ae.isDepthTexture&&(Ae.type===ps?xe=n.DEPTH_COMPONENT32F:Ae.type===Vo&&(xe=n.DEPTH_COMPONENT24));const Se=ve(B);oe(B)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Se,xe,B.width,B.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,Se,xe,B.width,B.height)}else n.renderbufferStorage(n.RENDERBUFFER,xe,B.width,B.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,F)}else if(B.depthBuffer&&B.stencilBuffer){const xe=ve(B);K&&oe(B)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,xe,n.DEPTH24_STENCIL8,B.width,B.height):oe(B)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,xe,n.DEPTH24_STENCIL8,B.width,B.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,B.width,B.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,F)}else{const xe=B.isWebGLMultipleRenderTargets===!0?B.texture:[B.texture];for(let Ae=0;Ae<xe.length;Ae++){const Se=xe[Ae],qe=s.convert(Se.format,Se.colorSpace),Ne=s.convert(Se.type),ke=w(Se.internalFormat,qe,Ne,Se.colorSpace),lt=ve(B);K&&oe(B)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,lt,ke,B.width,B.height):oe(B)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,lt,ke,B.width,B.height):n.renderbufferStorage(n.RENDERBUFFER,ke,B.width,B.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function je(F,B){if(B&&B.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,F),!(B.depthTexture&&B.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(B.depthTexture).__webglTexture||B.depthTexture.image.width!==B.width||B.depthTexture.image.height!==B.height)&&(B.depthTexture.image.width=B.width,B.depthTexture.image.height=B.height,B.depthTexture.needsUpdate=!0),q(B.depthTexture,0);const xe=r.get(B.depthTexture).__webglTexture,Ae=ve(B);if(B.depthTexture.format===$a)oe(B)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,xe,0,Ae):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,xe,0);else if(B.depthTexture.format===Mc)oe(B)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,xe,0,Ae):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,xe,0);else throw new Error("Unknown depthTexture format")}function ue(F){const B=r.get(F),K=F.isWebGLCubeRenderTarget===!0;if(F.depthTexture&&!B.__autoAllocateDepthBuffer){if(K)throw new Error("target.depthTexture not supported in Cube render targets");je(B.__webglFramebuffer,F)}else if(K){B.__webglDepthbuffer=[];for(let xe=0;xe<6;xe++)t.bindFramebuffer(n.FRAMEBUFFER,B.__webglFramebuffer[xe]),B.__webglDepthbuffer[xe]=n.createRenderbuffer(),$e(B.__webglDepthbuffer[xe],F,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,B.__webglFramebuffer),B.__webglDepthbuffer=n.createRenderbuffer(),$e(B.__webglDepthbuffer,F,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function ae(F,B,K){const xe=r.get(F);B!==void 0&&Ie(xe.__webglFramebuffer,F,F.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),K!==void 0&&ue(F)}function z(F){const B=F.texture,K=r.get(F),xe=r.get(B);F.addEventListener("dispose",D),F.isWebGLMultipleRenderTargets!==!0&&(xe.__webglTexture===void 0&&(xe.__webglTexture=n.createTexture()),xe.__version=B.version,o.memory.textures++);const Ae=F.isWebGLCubeRenderTarget===!0,Se=F.isWebGLMultipleRenderTargets===!0,qe=_(F)||a;if(Ae){K.__webglFramebuffer=[];for(let Ne=0;Ne<6;Ne++)if(a&&B.mipmaps&&B.mipmaps.length>0){K.__webglFramebuffer[Ne]=[];for(let ke=0;ke<B.mipmaps.length;ke++)K.__webglFramebuffer[Ne][ke]=n.createFramebuffer()}else K.__webglFramebuffer[Ne]=n.createFramebuffer()}else{if(a&&B.mipmaps&&B.mipmaps.length>0){K.__webglFramebuffer=[];for(let Ne=0;Ne<B.mipmaps.length;Ne++)K.__webglFramebuffer[Ne]=n.createFramebuffer()}else K.__webglFramebuffer=n.createFramebuffer();if(Se)if(i.drawBuffers){const Ne=F.texture;for(let ke=0,lt=Ne.length;ke<lt;ke++){const At=r.get(Ne[ke]);At.__webglTexture===void 0&&(At.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&F.samples>0&&oe(F)===!1){const Ne=Se?B:[B];K.__webglMultisampledFramebuffer=n.createFramebuffer(),K.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,K.__webglMultisampledFramebuffer);for(let ke=0;ke<Ne.length;ke++){const lt=Ne[ke];K.__webglColorRenderbuffer[ke]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,K.__webglColorRenderbuffer[ke]);const At=s.convert(lt.format,lt.colorSpace),Re=s.convert(lt.type),zt=w(lt.internalFormat,At,Re,lt.colorSpace,F.isXRRenderTarget===!0),Pt=ve(F);n.renderbufferStorageMultisample(n.RENDERBUFFER,Pt,zt,F.width,F.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ke,n.RENDERBUFFER,K.__webglColorRenderbuffer[ke])}n.bindRenderbuffer(n.RENDERBUFFER,null),F.depthBuffer&&(K.__webglDepthRenderbuffer=n.createRenderbuffer(),$e(K.__webglDepthRenderbuffer,F,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Ae){t.bindTexture(n.TEXTURE_CUBE_MAP,xe.__webglTexture),be(n.TEXTURE_CUBE_MAP,B,qe);for(let Ne=0;Ne<6;Ne++)if(a&&B.mipmaps&&B.mipmaps.length>0)for(let ke=0;ke<B.mipmaps.length;ke++)Ie(K.__webglFramebuffer[Ne][ke],F,B,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,ke);else Ie(K.__webglFramebuffer[Ne],F,B,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,0);x(B,qe)&&S(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Se){const Ne=F.texture;for(let ke=0,lt=Ne.length;ke<lt;ke++){const At=Ne[ke],Re=r.get(At);t.bindTexture(n.TEXTURE_2D,Re.__webglTexture),be(n.TEXTURE_2D,At,qe),Ie(K.__webglFramebuffer,F,At,n.COLOR_ATTACHMENT0+ke,n.TEXTURE_2D,0),x(At,qe)&&S(n.TEXTURE_2D)}t.unbindTexture()}else{let Ne=n.TEXTURE_2D;if((F.isWebGL3DRenderTarget||F.isWebGLArrayRenderTarget)&&(a?Ne=F.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Ne,xe.__webglTexture),be(Ne,B,qe),a&&B.mipmaps&&B.mipmaps.length>0)for(let ke=0;ke<B.mipmaps.length;ke++)Ie(K.__webglFramebuffer[ke],F,B,n.COLOR_ATTACHMENT0,Ne,ke);else Ie(K.__webglFramebuffer,F,B,n.COLOR_ATTACHMENT0,Ne,0);x(B,qe)&&S(Ne),t.unbindTexture()}F.depthBuffer&&ue(F)}function he(F){const B=_(F)||a,K=F.isWebGLMultipleRenderTargets===!0?F.texture:[F.texture];for(let xe=0,Ae=K.length;xe<Ae;xe++){const Se=K[xe];if(x(Se,B)){const qe=F.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,Ne=r.get(Se).__webglTexture;t.bindTexture(qe,Ne),S(qe),t.unbindTexture()}}}function ie(F){if(a&&F.samples>0&&oe(F)===!1){const B=F.isWebGLMultipleRenderTargets?F.texture:[F.texture],K=F.width,xe=F.height;let Ae=n.COLOR_BUFFER_BIT;const Se=[],qe=F.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ne=r.get(F),ke=F.isWebGLMultipleRenderTargets===!0;if(ke)for(let lt=0;lt<B.length;lt++)t.bindFramebuffer(n.FRAMEBUFFER,Ne.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+lt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Ne.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+lt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Ne.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ne.__webglFramebuffer);for(let lt=0;lt<B.length;lt++){Se.push(n.COLOR_ATTACHMENT0+lt),F.depthBuffer&&Se.push(qe);const At=Ne.__ignoreDepthValues!==void 0?Ne.__ignoreDepthValues:!1;if(At===!1&&(F.depthBuffer&&(Ae|=n.DEPTH_BUFFER_BIT),F.stencilBuffer&&(Ae|=n.STENCIL_BUFFER_BIT)),ke&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Ne.__webglColorRenderbuffer[lt]),At===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[qe]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[qe])),ke){const Re=r.get(B[lt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Re,0)}n.blitFramebuffer(0,0,K,xe,0,0,K,xe,Ae,n.NEAREST),c&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Se)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),ke)for(let lt=0;lt<B.length;lt++){t.bindFramebuffer(n.FRAMEBUFFER,Ne.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+lt,n.RENDERBUFFER,Ne.__webglColorRenderbuffer[lt]);const At=r.get(B[lt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Ne.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+lt,n.TEXTURE_2D,At,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ne.__webglMultisampledFramebuffer)}}function ve(F){return Math.min(i.maxSamples,F.samples)}function oe(F){const B=r.get(F);return a&&F.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&B.__useRenderToTexture!==!1}function Ce(F){const B=o.render.frame;h.get(F)!==B&&(h.set(F,B),F.update())}function Ee(F,B){const K=F.colorSpace,xe=F.format,Ae=F.type;return F.isCompressedTexture===!0||F.isVideoTexture===!0||F.format===hy||K!==yo&&K!==Oi&&(rn.getTransfer(K)===hn?a===!1?e.has("EXT_sRGB")===!0&&xe===ci?(F.format=hy,F.minFilter=gn,F.generateMipmaps=!1):B=hC.sRGBToLinear(B):(xe!==ci||Ae!==uo)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",K)),B}this.allocateTextureUnit=W,this.resetTextureUnits=J,this.setTexture2D=q,this.setTexture2DArray=ce,this.setTexture3D=O,this.setTextureCube=G,this.rebindTextures=ae,this.setupRenderTarget=z,this.updateRenderTargetMipmap=he,this.updateMultisampleRenderTarget=ie,this.setupDepthRenderbuffer=ue,this.setupFrameBufferTexture=Ie,this.useMultisampledRTT=oe}function kk(n,e,t){const r=t.isWebGL2;function i(s,o=Oi){let a;const l=rn.getTransfer(o);if(s===uo)return n.UNSIGNED_BYTE;if(s===eC)return n.UNSIGNED_SHORT_4_4_4_4;if(s===tC)return n.UNSIGNED_SHORT_5_5_5_1;if(s===rk)return n.BYTE;if(s===ik)return n.SHORT;if(s===__)return n.UNSIGNED_SHORT;if(s===ZT)return n.INT;if(s===Vo)return n.UNSIGNED_INT;if(s===ps)return n.FLOAT;if(s===Ph)return r?n.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===sk)return n.ALPHA;if(s===ci)return n.RGBA;if(s===ok)return n.LUMINANCE;if(s===ak)return n.LUMINANCE_ALPHA;if(s===$a)return n.DEPTH_COMPONENT;if(s===Mc)return n.DEPTH_STENCIL;if(s===hy)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===lk)return n.RED;if(s===nC)return n.RED_INTEGER;if(s===ck)return n.RG;if(s===rC)return n.RG_INTEGER;if(s===iC)return n.RGBA_INTEGER;if(s===$0||s===Y0||s===q0||s===Q0)if(l===hn)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===$0)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===Y0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===q0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===Q0)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===$0)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Y0)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===q0)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===Q0)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===iw||s===sw||s===ow||s===aw)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===iw)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===sw)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===ow)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===aw)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===sC)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===lw||s===cw)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===lw)return l===hn?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===cw)return l===hn?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===uw||s===hw||s===fw||s===dw||s===pw||s===mw||s===gw||s===vw||s===yw||s===_w||s===xw||s===Aw||s===Sw||s===Ew)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===uw)return l===hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===hw)return l===hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===fw)return l===hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===dw)return l===hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===pw)return l===hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===mw)return l===hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===gw)return l===hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===vw)return l===hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===yw)return l===hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===_w)return l===hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===xw)return l===hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===Aw)return l===hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===Sw)return l===hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===Ew)return l===hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===Z0||s===ww||s===Mw)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===Z0)return l===hn?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(s===ww)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(s===Mw)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(s===uk||s===Tw||s===Cw||s===bw)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===Z0)return a.COMPRESSED_RED_RGTC1_EXT;if(s===Tw)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===Cw)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===bw)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===Ka?r?n.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:i}}class Uk extends yn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Go extends Xt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Ste={type:"move"};class CA{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Go,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Go,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new k,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new k),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Go,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new k,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new k),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const A of e.hand.values()){const _=t.getJointPose(A,r),g=this._getHandJoint(c,A);_!==null&&(g.matrix.fromArray(_.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=_.radius),g.visible=_!==null}const h=c.joints["index-finger-tip"],d=c.joints["thumb-tip"],p=h.position.distanceTo(d.position),m=.02,v=.005;c.inputState.pinching&&p>m+v?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&p<=m-v&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Ste)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new Go;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}const Ete=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,wte=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Mte{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,r){if(this.texture===null){const i=new xn,s=e.properties.get(i);s.__webglTexture=t.texture,(t.depthNear!=r.depthNear||t.depthFar!=r.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=i}}render(e,t){if(this.texture!==null){if(this.mesh===null){const r=t.cameras[0].viewport,i=new Us({extensions:{fragDepth:!0},vertexShader:Ete,fragmentShader:wte,uniforms:{depthColor:{value:this.texture},depthWidth:{value:r.z},depthHeight:{value:r.w}}});this.mesh=new jn(new Qh(20,20),i)}e.render(this.mesh,t)}}reset(){this.texture=null,this.mesh=null}}class Tte extends _o{constructor(e,t){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,c=null,h=null,d=null,p=null,m=null,v=null;const A=new Mte,_=t.getContextAttributes();let g=null,x=null;const S=[],w=[],R=new _e;let C=null;const I=new yn;I.layers.enable(1),I.viewport=new sn;const D=new yn;D.layers.enable(2),D.viewport=new sn;const N=[I,D],T=new Uk;T.layers.enable(1),T.layers.enable(2);let L=null,H=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ee){let pe=S[ee];return pe===void 0&&(pe=new CA,S[ee]=pe),pe.getTargetRaySpace()},this.getControllerGrip=function(ee){let pe=S[ee];return pe===void 0&&(pe=new CA,S[ee]=pe),pe.getGripSpace()},this.getHand=function(ee){let pe=S[ee];return pe===void 0&&(pe=new CA,S[ee]=pe),pe.getHandSpace()};function J(ee){const pe=w.indexOf(ee.inputSource);if(pe===-1)return;const Me=S[pe];Me!==void 0&&(Me.update(ee.inputSource,ee.frame,c||o),Me.dispatchEvent({type:ee.type,data:ee.inputSource}))}function W(){i.removeEventListener("select",J),i.removeEventListener("selectstart",J),i.removeEventListener("selectend",J),i.removeEventListener("squeeze",J),i.removeEventListener("squeezestart",J),i.removeEventListener("squeezeend",J),i.removeEventListener("end",W),i.removeEventListener("inputsourceschange",$);for(let ee=0;ee<S.length;ee++){const pe=w[ee];pe!==null&&(w[ee]=null,S[ee].disconnect(pe))}L=null,H=null,A.reset(),e.setRenderTarget(g),m=null,p=null,d=null,i=null,x=null,be.stop(),r.isPresenting=!1,e.setPixelRatio(C),e.setSize(R.width,R.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ee){s=ee,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ee){a=ee,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(ee){c=ee},this.getBaseLayer=function(){return p!==null?p:m},this.getBinding=function(){return d},this.getFrame=function(){return v},this.getSession=function(){return i},this.setSession=async function(ee){if(i=ee,i!==null){if(g=e.getRenderTarget(),i.addEventListener("select",J),i.addEventListener("selectstart",J),i.addEventListener("selectend",J),i.addEventListener("squeeze",J),i.addEventListener("squeezestart",J),i.addEventListener("squeezeend",J),i.addEventListener("end",W),i.addEventListener("inputsourceschange",$),_.xrCompatible!==!0&&await t.makeXRCompatible(),C=e.getPixelRatio(),e.getSize(R),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const pe={antialias:i.renderState.layers===void 0?_.antialias:!0,alpha:!0,depth:_.depth,stencil:_.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(i,t,pe),i.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),x=new ks(m.framebufferWidth,m.framebufferHeight,{format:ci,type:uo,colorSpace:e.outputColorSpace,stencilBuffer:_.stencil})}else{let pe=null,Me=null,Ie=null;_.depth&&(Ie=_.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,pe=_.stencil?Mc:$a,Me=_.stencil?Ka:Vo);const $e={colorFormat:t.RGBA8,depthFormat:Ie,scaleFactor:s};d=new XRWebGLBinding(i,t),p=d.createProjectionLayer($e),i.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),x=new ks(p.textureWidth,p.textureHeight,{format:ci,type:uo,depthTexture:new yC(p.textureWidth,p.textureHeight,Me,void 0,void 0,void 0,void 0,void 0,void 0,pe),stencilBuffer:_.stencil,colorSpace:e.outputColorSpace,samples:_.antialias?4:0});const je=e.properties.get(x);je.__ignoreDepthValues=p.ignoreDepthValues}x.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await i.requestReferenceSpace(a),be.setContext(i),be.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function $(ee){for(let pe=0;pe<ee.removed.length;pe++){const Me=ee.removed[pe],Ie=w.indexOf(Me);Ie>=0&&(w[Ie]=null,S[Ie].disconnect(Me))}for(let pe=0;pe<ee.added.length;pe++){const Me=ee.added[pe];let Ie=w.indexOf(Me);if(Ie===-1){for(let je=0;je<S.length;je++)if(je>=w.length){w.push(Me),Ie=je;break}else if(w[je]===null){w[je]=Me,Ie=je;break}if(Ie===-1)break}const $e=S[Ie];$e&&$e.connect(Me)}}const q=new k,ce=new k;function O(ee,pe,Me){q.setFromMatrixPosition(pe.matrixWorld),ce.setFromMatrixPosition(Me.matrixWorld);const Ie=q.distanceTo(ce),$e=pe.projectionMatrix.elements,je=Me.projectionMatrix.elements,ue=$e[14]/($e[10]-1),ae=$e[14]/($e[10]+1),z=($e[9]+1)/$e[5],he=($e[9]-1)/$e[5],ie=($e[8]-1)/$e[0],ve=(je[8]+1)/je[0],oe=ue*ie,Ce=ue*ve,Ee=Ie/(-ie+ve),F=Ee*-ie;pe.matrixWorld.decompose(ee.position,ee.quaternion,ee.scale),ee.translateX(F),ee.translateZ(Ee),ee.matrixWorld.compose(ee.position,ee.quaternion,ee.scale),ee.matrixWorldInverse.copy(ee.matrixWorld).invert();const B=ue+Ee,K=ae+Ee,xe=oe-F,Ae=Ce+(Ie-F),Se=z*ae/K*B,qe=he*ae/K*B;ee.projectionMatrix.makePerspective(xe,Ae,Se,qe,B,K),ee.projectionMatrixInverse.copy(ee.projectionMatrix).invert()}function G(ee,pe){pe===null?ee.matrixWorld.copy(ee.matrix):ee.matrixWorld.multiplyMatrices(pe.matrixWorld,ee.matrix),ee.matrixWorldInverse.copy(ee.matrixWorld).invert()}this.updateCamera=function(ee){if(i===null)return;A.texture!==null&&(ee.near=A.depthNear,ee.far=A.depthFar),T.near=D.near=I.near=ee.near,T.far=D.far=I.far=ee.far,(L!==T.near||H!==T.far)&&(i.updateRenderState({depthNear:T.near,depthFar:T.far}),L=T.near,H=T.far,I.near=L,I.far=H,D.near=L,D.far=H,I.updateProjectionMatrix(),D.updateProjectionMatrix(),ee.updateProjectionMatrix());const pe=ee.parent,Me=T.cameras;G(T,pe);for(let Ie=0;Ie<Me.length;Ie++)G(Me[Ie],pe);Me.length===2?O(T,I,D):T.projectionMatrix.copy(I.projectionMatrix),X(ee,T,pe)};function X(ee,pe,Me){Me===null?ee.matrix.copy(pe.matrixWorld):(ee.matrix.copy(Me.matrixWorld),ee.matrix.invert(),ee.matrix.multiply(pe.matrixWorld)),ee.matrix.decompose(ee.position,ee.quaternion,ee.scale),ee.updateMatrixWorld(!0),ee.projectionMatrix.copy(pe.projectionMatrix),ee.projectionMatrixInverse.copy(pe.projectionMatrixInverse),ee.isPerspectiveCamera&&(ee.fov=Lh*2*Math.atan(1/ee.projectionMatrix.elements[5]),ee.zoom=1)}this.getCamera=function(){return T},this.getFoveation=function(){if(!(p===null&&m===null))return l},this.setFoveation=function(ee){l=ee,p!==null&&(p.fixedFoveation=ee),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=ee)},this.hasDepthSensing=function(){return A.texture!==null};let Q=null;function te(ee,pe){if(h=pe.getViewerPose(c||o),v=pe,h!==null){const Me=h.views;m!==null&&(e.setRenderTargetFramebuffer(x,m.framebuffer),e.setRenderTarget(x));let Ie=!1;Me.length!==T.cameras.length&&(T.cameras.length=0,Ie=!0);for(let je=0;je<Me.length;je++){const ue=Me[je];let ae=null;if(m!==null)ae=m.getViewport(ue);else{const he=d.getViewSubImage(p,ue);ae=he.viewport,je===0&&(e.setRenderTargetTextures(x,he.colorTexture,p.ignoreDepthValues?void 0:he.depthStencilTexture),e.setRenderTarget(x))}let z=N[je];z===void 0&&(z=new yn,z.layers.enable(je),z.viewport=new sn,N[je]=z),z.matrix.fromArray(ue.transform.matrix),z.matrix.decompose(z.position,z.quaternion,z.scale),z.projectionMatrix.fromArray(ue.projectionMatrix),z.projectionMatrixInverse.copy(z.projectionMatrix).invert(),z.viewport.set(ae.x,ae.y,ae.width,ae.height),je===0&&(T.matrix.copy(z.matrix),T.matrix.decompose(T.position,T.quaternion,T.scale)),Ie===!0&&T.cameras.push(z)}const $e=i.enabledFeatures;if($e&&$e.includes("depth-sensing")){const je=d.getDepthInformation(Me[0]);je&&je.isValid&&je.texture&&A.init(e,je,i.renderState)}}for(let Me=0;Me<S.length;Me++){const Ie=w[Me],$e=S[Me];Ie!==null&&$e!==void 0&&$e.update(Ie,pe,c||o)}A.render(e,T),Q&&Q(ee,pe),pe.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:pe}),v=null}const be=new Lk;be.setAnimationLoop(te),this.setAnimationLoop=function(ee){Q=ee},this.dispose=function(){}}}function Cte(n,e){function t(_,g){_.matrixAutoUpdate===!0&&_.updateMatrix(),g.value.copy(_.matrix)}function r(_,g){g.color.getRGB(_.fogColor.value,Pk(n)),g.isFog?(_.fogNear.value=g.near,_.fogFar.value=g.far):g.isFogExp2&&(_.fogDensity.value=g.density)}function i(_,g,x,S,w){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(_,g):g.isMeshToonMaterial?(s(_,g),d(_,g)):g.isMeshPhongMaterial?(s(_,g),h(_,g)):g.isMeshStandardMaterial?(s(_,g),p(_,g),g.isMeshPhysicalMaterial&&m(_,g,w)):g.isMeshMatcapMaterial?(s(_,g),v(_,g)):g.isMeshDepthMaterial?s(_,g):g.isMeshDistanceMaterial?(s(_,g),A(_,g)):g.isMeshNormalMaterial?s(_,g):g.isLineBasicMaterial?(o(_,g),g.isLineDashedMaterial&&a(_,g)):g.isPointsMaterial?l(_,g,x,S):g.isSpriteMaterial?c(_,g):g.isShadowMaterial?(_.color.value.copy(g.color),_.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function s(_,g){_.opacity.value=g.opacity,g.color&&_.diffuse.value.copy(g.color),g.emissive&&_.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(_.map.value=g.map,t(g.map,_.mapTransform)),g.alphaMap&&(_.alphaMap.value=g.alphaMap,t(g.alphaMap,_.alphaMapTransform)),g.bumpMap&&(_.bumpMap.value=g.bumpMap,t(g.bumpMap,_.bumpMapTransform),_.bumpScale.value=g.bumpScale,g.side===di&&(_.bumpScale.value*=-1)),g.normalMap&&(_.normalMap.value=g.normalMap,t(g.normalMap,_.normalMapTransform),_.normalScale.value.copy(g.normalScale),g.side===di&&_.normalScale.value.negate()),g.displacementMap&&(_.displacementMap.value=g.displacementMap,t(g.displacementMap,_.displacementMapTransform),_.displacementScale.value=g.displacementScale,_.displacementBias.value=g.displacementBias),g.emissiveMap&&(_.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,_.emissiveMapTransform)),g.specularMap&&(_.specularMap.value=g.specularMap,t(g.specularMap,_.specularMapTransform)),g.alphaTest>0&&(_.alphaTest.value=g.alphaTest);const x=e.get(g).envMap;if(x&&(_.envMap.value=x,_.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,_.reflectivity.value=g.reflectivity,_.ior.value=g.ior,_.refractionRatio.value=g.refractionRatio),g.lightMap){_.lightMap.value=g.lightMap;const S=n._useLegacyLights===!0?Math.PI:1;_.lightMapIntensity.value=g.lightMapIntensity*S,t(g.lightMap,_.lightMapTransform)}g.aoMap&&(_.aoMap.value=g.aoMap,_.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,_.aoMapTransform))}function o(_,g){_.diffuse.value.copy(g.color),_.opacity.value=g.opacity,g.map&&(_.map.value=g.map,t(g.map,_.mapTransform))}function a(_,g){_.dashSize.value=g.dashSize,_.totalSize.value=g.dashSize+g.gapSize,_.scale.value=g.scale}function l(_,g,x,S){_.diffuse.value.copy(g.color),_.opacity.value=g.opacity,_.size.value=g.size*x,_.scale.value=S*.5,g.map&&(_.map.value=g.map,t(g.map,_.uvTransform)),g.alphaMap&&(_.alphaMap.value=g.alphaMap,t(g.alphaMap,_.alphaMapTransform)),g.alphaTest>0&&(_.alphaTest.value=g.alphaTest)}function c(_,g){_.diffuse.value.copy(g.color),_.opacity.value=g.opacity,_.rotation.value=g.rotation,g.map&&(_.map.value=g.map,t(g.map,_.mapTransform)),g.alphaMap&&(_.alphaMap.value=g.alphaMap,t(g.alphaMap,_.alphaMapTransform)),g.alphaTest>0&&(_.alphaTest.value=g.alphaTest)}function h(_,g){_.specular.value.copy(g.specular),_.shininess.value=Math.max(g.shininess,1e-4)}function d(_,g){g.gradientMap&&(_.gradientMap.value=g.gradientMap)}function p(_,g){_.metalness.value=g.metalness,g.metalnessMap&&(_.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,_.metalnessMapTransform)),_.roughness.value=g.roughness,g.roughnessMap&&(_.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,_.roughnessMapTransform)),e.get(g).envMap&&(_.envMapIntensity.value=g.envMapIntensity)}function m(_,g,x){_.ior.value=g.ior,g.sheen>0&&(_.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),_.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(_.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,_.sheenColorMapTransform)),g.sheenRoughnessMap&&(_.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,_.sheenRoughnessMapTransform))),g.clearcoat>0&&(_.clearcoat.value=g.clearcoat,_.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(_.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,_.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(_.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,_.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(_.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,_.clearcoatNormalMapTransform),_.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===di&&_.clearcoatNormalScale.value.negate())),g.iridescence>0&&(_.iridescence.value=g.iridescence,_.iridescenceIOR.value=g.iridescenceIOR,_.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],_.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(_.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,_.iridescenceMapTransform)),g.iridescenceThicknessMap&&(_.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,_.iridescenceThicknessMapTransform))),g.transmission>0&&(_.transmission.value=g.transmission,_.transmissionSamplerMap.value=x.texture,_.transmissionSamplerSize.value.set(x.width,x.height),g.transmissionMap&&(_.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,_.transmissionMapTransform)),_.thickness.value=g.thickness,g.thicknessMap&&(_.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,_.thicknessMapTransform)),_.attenuationDistance.value=g.attenuationDistance,_.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(_.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(_.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,_.anisotropyMapTransform))),_.specularIntensity.value=g.specularIntensity,_.specularColor.value.copy(g.specularColor),g.specularColorMap&&(_.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,_.specularColorMapTransform)),g.specularIntensityMap&&(_.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,_.specularIntensityMapTransform))}function v(_,g){g.matcap&&(_.matcap.value=g.matcap)}function A(_,g){const x=e.get(g).light;_.referencePosition.value.setFromMatrixPosition(x.matrixWorld),_.nearDistance.value=x.shadow.camera.near,_.farDistance.value=x.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function bte(n,e,t,r){let i={},s={},o=[];const a=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(x,S){const w=S.program;r.uniformBlockBinding(x,w)}function c(x,S){let w=i[x.id];w===void 0&&(v(x),w=h(x),i[x.id]=w,x.addEventListener("dispose",_));const R=S.program;r.updateUBOMapping(x,R);const C=e.render.frame;s[x.id]!==C&&(p(x),s[x.id]=C)}function h(x){const S=d();x.__bindingPointIndex=S;const w=n.createBuffer(),R=x.__size,C=x.usage;return n.bindBuffer(n.UNIFORM_BUFFER,w),n.bufferData(n.UNIFORM_BUFFER,R,C),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,S,w),w}function d(){for(let x=0;x<a;x++)if(o.indexOf(x)===-1)return o.push(x),x;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(x){const S=i[x.id],w=x.uniforms,R=x.__cache;n.bindBuffer(n.UNIFORM_BUFFER,S);for(let C=0,I=w.length;C<I;C++){const D=Array.isArray(w[C])?w[C]:[w[C]];for(let N=0,T=D.length;N<T;N++){const L=D[N];if(m(L,C,N,R)===!0){const H=L.__offset,J=Array.isArray(L.value)?L.value:[L.value];let W=0;for(let $=0;$<J.length;$++){const q=J[$],ce=A(q);typeof q=="number"||typeof q=="boolean"?(L.__data[0]=q,n.bufferSubData(n.UNIFORM_BUFFER,H+W,L.__data)):q.isMatrix3?(L.__data[0]=q.elements[0],L.__data[1]=q.elements[1],L.__data[2]=q.elements[2],L.__data[3]=0,L.__data[4]=q.elements[3],L.__data[5]=q.elements[4],L.__data[6]=q.elements[5],L.__data[7]=0,L.__data[8]=q.elements[6],L.__data[9]=q.elements[7],L.__data[10]=q.elements[8],L.__data[11]=0):(q.toArray(L.__data,W),W+=ce.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,H,L.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function m(x,S,w,R){const C=x.value,I=S+"_"+w;if(R[I]===void 0)return typeof C=="number"||typeof C=="boolean"?R[I]=C:R[I]=C.clone(),!0;{const D=R[I];if(typeof C=="number"||typeof C=="boolean"){if(D!==C)return R[I]=C,!0}else if(D.equals(C)===!1)return D.copy(C),!0}return!1}function v(x){const S=x.uniforms;let w=0;const R=16;for(let I=0,D=S.length;I<D;I++){const N=Array.isArray(S[I])?S[I]:[S[I]];for(let T=0,L=N.length;T<L;T++){const H=N[T],J=Array.isArray(H.value)?H.value:[H.value];for(let W=0,$=J.length;W<$;W++){const q=J[W],ce=A(q),O=w%R;O!==0&&R-O<ce.boundary&&(w+=R-O),H.__data=new Float32Array(ce.storage/Float32Array.BYTES_PER_ELEMENT),H.__offset=w,w+=ce.storage}}}const C=w%R;return C>0&&(w+=R-C),x.__size=w,x.__cache={},this}function A(x){const S={boundary:0,storage:0};return typeof x=="number"||typeof x=="boolean"?(S.boundary=4,S.storage=4):x.isVector2?(S.boundary=8,S.storage=8):x.isVector3||x.isColor?(S.boundary=16,S.storage=12):x.isVector4?(S.boundary=16,S.storage=16):x.isMatrix3?(S.boundary=48,S.storage=48):x.isMatrix4?(S.boundary=64,S.storage=64):x.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",x),S}function _(x){const S=x.target;S.removeEventListener("dispose",_);const w=o.indexOf(S.__bindingPointIndex);o.splice(w,1),n.deleteBuffer(i[S.id]),delete i[S.id],delete s[S.id]}function g(){for(const x in i)n.deleteBuffer(i[x]);o=[],i={},s={}}return{bind:l,update:c,dispose:g}}class AC{constructor(e={}){const{canvas:t=Ck(),context:r=null,depth:i=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:d=!1}=e;this.isWebGLRenderer=!0;let p;r!==null?p=r.getContextAttributes().alpha:p=o;const m=new Uint32Array(4),v=new Int32Array(4);let A=null,_=null;const g=[],x=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=rr,this._useLegacyLights=!1,this.toneMapping=co,this.toneMappingExposure=1;const S=this;let w=!1,R=0,C=0,I=null,D=-1,N=null;const T=new sn,L=new sn;let H=null;const J=new Ue(0);let W=0,$=t.width,q=t.height,ce=1,O=null,G=null;const X=new sn(0,0,$,q),Q=new sn(0,0,$,q);let te=!1;const be=new em;let ee=!1,pe=!1,Me=null;const Ie=new ht,$e=new _e,je=new k,ue={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ae(){return I===null?ce:1}let z=r;function he(U,se){for(let de=0;de<U.length;de++){const me=U[de],fe=t.getContext(me,se);if(fe!==null)return fe}return null}try{const U={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:h,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Kp}`),t.addEventListener("webglcontextlost",vt,!1),t.addEventListener("webglcontextrestored",j,!1),t.addEventListener("webglcontextcreationerror",Pe,!1),z===null){const se=["webgl2","webgl","experimental-webgl"];if(S.isWebGL1Renderer===!0&&se.shift(),z=he(se,U),z===null)throw he(se)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&z instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),z.getShaderPrecisionFormat===void 0&&(z.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(U){throw console.error("THREE.WebGLRenderer: "+U.message),U}let ie,ve,oe,Ce,Ee,F,B,K,xe,Ae,Se,qe,Ne,ke,lt,At,Re,zt,Pt,gt,at,Ye,Y,we;function He(){ie=new UZ(z),ve=new DZ(z,ie,e),ie.init(ve),Ye=new kk(z,ie,ve),oe=new xte(z,ie,ve),Ce=new VZ(z),Ee=new lte,F=new Ate(z,ie,oe,Ee,ve,Ye,Ce),B=new NZ(S),K=new kZ(S),xe=new YY(z,ve),Y=new IZ(z,ie,xe,ve),Ae=new zZ(z,xe,Ce,Y),Se=new XZ(z,Ae,xe,Ce),Pt=new WZ(z,ve,F),At=new BZ(Ee),qe=new ate(S,B,K,ie,ve,Y,At),Ne=new Cte(S,Ee),ke=new ute,lt=new gte(ie,ve),zt=new PZ(S,B,K,oe,Se,p,l),Re=new _te(S,Se,ve),we=new bte(z,Ce,ve,oe),gt=new LZ(z,ie,Ce,ve),at=new HZ(z,ie,Ce,ve),Ce.programs=qe.programs,S.capabilities=ve,S.extensions=ie,S.properties=Ee,S.renderLists=ke,S.shadowMap=Re,S.state=oe,S.info=Ce}He();const Je=new Tte(S,z);this.xr=Je,this.getContext=function(){return z},this.getContextAttributes=function(){return z.getContextAttributes()},this.forceContextLoss=function(){const U=ie.get("WEBGL_lose_context");U&&U.loseContext()},this.forceContextRestore=function(){const U=ie.get("WEBGL_lose_context");U&&U.restoreContext()},this.getPixelRatio=function(){return ce},this.setPixelRatio=function(U){U!==void 0&&(ce=U,this.setSize($,q,!1))},this.getSize=function(U){return U.set($,q)},this.setSize=function(U,se,de=!0){if(Je.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}$=U,q=se,t.width=Math.floor(U*ce),t.height=Math.floor(se*ce),de===!0&&(t.style.width=U+"px",t.style.height=se+"px"),this.setViewport(0,0,U,se)},this.getDrawingBufferSize=function(U){return U.set($*ce,q*ce).floor()},this.setDrawingBufferSize=function(U,se,de){$=U,q=se,ce=de,t.width=Math.floor(U*de),t.height=Math.floor(se*de),this.setViewport(0,0,U,se)},this.getCurrentViewport=function(U){return U.copy(T)},this.getViewport=function(U){return U.copy(X)},this.setViewport=function(U,se,de,me){U.isVector4?X.set(U.x,U.y,U.z,U.w):X.set(U,se,de,me),oe.viewport(T.copy(X).multiplyScalar(ce).floor())},this.getScissor=function(U){return U.copy(Q)},this.setScissor=function(U,se,de,me){U.isVector4?Q.set(U.x,U.y,U.z,U.w):Q.set(U,se,de,me),oe.scissor(L.copy(Q).multiplyScalar(ce).floor())},this.getScissorTest=function(){return te},this.setScissorTest=function(U){oe.setScissorTest(te=U)},this.setOpaqueSort=function(U){O=U},this.setTransparentSort=function(U){G=U},this.getClearColor=function(U){return U.copy(zt.getClearColor())},this.setClearColor=function(){zt.setClearColor.apply(zt,arguments)},this.getClearAlpha=function(){return zt.getClearAlpha()},this.setClearAlpha=function(){zt.setClearAlpha.apply(zt,arguments)},this.clear=function(U=!0,se=!0,de=!0){let me=0;if(U){let fe=!1;if(I!==null){const Ke=I.texture.format;fe=Ke===iC||Ke===rC||Ke===nC}if(fe){const Ke=I.texture.type,st=Ke===uo||Ke===Vo||Ke===__||Ke===Ka||Ke===eC||Ke===tC,ft=zt.getClearColor(),pt=zt.getClearAlpha(),St=ft.r,xt=ft.g,Et=ft.b;st?(m[0]=St,m[1]=xt,m[2]=Et,m[3]=pt,z.clearBufferuiv(z.COLOR,0,m)):(v[0]=St,v[1]=xt,v[2]=Et,v[3]=pt,z.clearBufferiv(z.COLOR,0,v))}else me|=z.COLOR_BUFFER_BIT}se&&(me|=z.DEPTH_BUFFER_BIT),de&&(me|=z.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),z.clear(me)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",vt,!1),t.removeEventListener("webglcontextrestored",j,!1),t.removeEventListener("webglcontextcreationerror",Pe,!1),ke.dispose(),lt.dispose(),Ee.dispose(),B.dispose(),K.dispose(),Se.dispose(),Y.dispose(),we.dispose(),qe.dispose(),Je.dispose(),Je.removeEventListener("sessionstart",Un),Je.removeEventListener("sessionend",Kt),Me&&(Me.dispose(),Me=null),xr.stop()};function vt(U){U.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),w=!0}function j(){console.log("THREE.WebGLRenderer: Context Restored."),w=!1;const U=Ce.autoReset,se=Re.enabled,de=Re.autoUpdate,me=Re.needsUpdate,fe=Re.type;He(),Ce.autoReset=U,Re.enabled=se,Re.autoUpdate=de,Re.needsUpdate=me,Re.type=fe}function Pe(U){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",U.statusMessage)}function Be(U){const se=U.target;se.removeEventListener("dispose",Be),tt(se)}function tt(U){nt(U),Ee.remove(U)}function nt(U){const se=Ee.get(U).programs;se!==void 0&&(se.forEach(function(de){qe.releaseProgram(de)}),U.isShaderMaterial&&qe.releaseShaderCache(U))}this.renderBufferDirect=function(U,se,de,me,fe,Ke){se===null&&(se=ue);const st=fe.isMesh&&fe.matrixWorld.determinant()<0,ft=W_(U,se,de,me,fe);oe.setMaterial(me,st);let pt=de.index,St=1;if(me.wireframe===!0){if(pt=Ae.getWireframeAttribute(de),pt===void 0)return;St=2}const xt=de.drawRange,Et=de.attributes.position;let wn=xt.start*St,Ar=(xt.start+xt.count)*St;Ke!==null&&(wn=Math.max(wn,Ke.start*St),Ar=Math.min(Ar,(Ke.start+Ke.count)*St)),pt!==null?(wn=Math.max(wn,0),Ar=Math.min(Ar,pt.count)):Et!=null&&(wn=Math.max(wn,0),Ar=Math.min(Ar,Et.count));const dn=Ar-wn;if(dn<0||dn===1/0)return;Y.setup(fe,me,ft,de,pt);let lr,mt=gt;if(pt!==null&&(lr=xe.get(pt),mt=at,mt.setIndex(lr)),fe.isMesh)me.wireframe===!0?(oe.setLineWidth(me.wireframeLinewidth*ae()),mt.setMode(z.LINES)):mt.setMode(z.TRIANGLES);else if(fe.isLine){let Ze=me.linewidth;Ze===void 0&&(Ze=1),oe.setLineWidth(Ze*ae()),fe.isLineSegments?mt.setMode(z.LINES):fe.isLineLoop?mt.setMode(z.LINE_LOOP):mt.setMode(z.LINE_STRIP)}else fe.isPoints?mt.setMode(z.POINTS):fe.isSprite&&mt.setMode(z.TRIANGLES);if(fe.isBatchedMesh)mt.renderMultiDraw(fe._multiDrawStarts,fe._multiDrawCounts,fe._multiDrawCount);else if(fe.isInstancedMesh)mt.renderInstances(wn,dn,fe.count);else if(de.isInstancedBufferGeometry){const Ze=de._maxInstanceCount!==void 0?de._maxInstanceCount:1/0,qi=Math.min(de.instanceCount,Ze);mt.renderInstances(wn,dn,qi)}else mt.render(wn,dn)};function It(U,se,de){U.transparent===!0&&U.side===ds&&U.forceSinglePass===!1?(U.side=di,U.needsUpdate=!0,Uc(U,se,de),U.side=vo,U.needsUpdate=!0,Uc(U,se,de),U.side=ds):Uc(U,se,de)}this.compile=function(U,se,de=null){de===null&&(de=U),_=lt.get(de),_.init(),x.push(_),de.traverseVisible(function(fe){fe.isLight&&fe.layers.test(se.layers)&&(_.pushLight(fe),fe.castShadow&&_.pushShadow(fe))}),U!==de&&U.traverseVisible(function(fe){fe.isLight&&fe.layers.test(se.layers)&&(_.pushLight(fe),fe.castShadow&&_.pushShadow(fe))}),_.setupLights(S._useLegacyLights);const me=new Set;return U.traverse(function(fe){const Ke=fe.material;if(Ke)if(Array.isArray(Ke))for(let st=0;st<Ke.length;st++){const ft=Ke[st];It(ft,de,fe),me.add(ft)}else It(Ke,de,fe),me.add(Ke)}),x.pop(),_=null,me},this.compileAsync=function(U,se,de=null){const me=this.compile(U,se,de);return new Promise(fe=>{function Ke(){if(me.forEach(function(st){Ee.get(st).currentProgram.isReady()&&me.delete(st)}),me.size===0){fe(U);return}setTimeout(Ke,10)}ie.get("KHR_parallel_shader_compile")!==null?Ke():setTimeout(Ke,10)})};let Vt=null;function un(U){Vt&&Vt(U)}function Un(){xr.stop()}function Kt(){xr.start()}const xr=new Lk;xr.setAnimationLoop(un),typeof self<"u"&&xr.setContext(self),this.setAnimationLoop=function(U){Vt=U,Je.setAnimationLoop(U),U===null?xr.stop():xr.start()},Je.addEventListener("sessionstart",Un),Je.addEventListener("sessionend",Kt),this.render=function(U,se){if(se!==void 0&&se.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(w===!0)return;U.matrixWorldAutoUpdate===!0&&U.updateMatrixWorld(),se.parent===null&&se.matrixWorldAutoUpdate===!0&&se.updateMatrixWorld(),Je.enabled===!0&&Je.isPresenting===!0&&(Je.cameraAutoUpdate===!0&&Je.updateCamera(se),se=Je.getCamera()),U.isScene===!0&&U.onBeforeRender(S,U,se,I),_=lt.get(U,x.length),_.init(),x.push(_),Ie.multiplyMatrices(se.projectionMatrix,se.matrixWorldInverse),be.setFromProjectionMatrix(Ie),pe=this.localClippingEnabled,ee=At.init(this.clippingPlanes,pe),A=ke.get(U,g.length),A.init(),g.push(A),Yi(U,se,0,S.sortObjects),A.finish(),S.sortObjects===!0&&A.sort(O,G),this.info.render.frame++,ee===!0&&At.beginShadows();const de=_.state.shadowsArray;if(Re.render(de,U,se),ee===!0&&At.endShadows(),this.info.autoReset===!0&&this.info.reset(),(Je.enabled===!1||Je.isPresenting===!1||Je.hasDepthSensing()===!1)&&zt.render(A,U),_.setupLights(S._useLegacyLights),se.isArrayCamera){const me=se.cameras;for(let fe=0,Ke=me.length;fe<Ke;fe++){const st=me[fe];nf(A,U,st,st.viewport)}}else nf(A,U,se);I!==null&&(F.updateMultisampleRenderTarget(I),F.updateRenderTargetMipmap(I)),U.isScene===!0&&U.onAfterRender(S,U,se),Y.resetDefaultState(),D=-1,N=null,x.pop(),x.length>0?_=x[x.length-1]:_=null,g.pop(),g.length>0?A=g[g.length-1]:A=null};function Yi(U,se,de,me){if(U.visible===!1)return;if(U.layers.test(se.layers)){if(U.isGroup)de=U.renderOrder;else if(U.isLOD)U.autoUpdate===!0&&U.update(se);else if(U.isLight)_.pushLight(U),U.castShadow&&_.pushShadow(U);else if(U.isSprite){if(!U.frustumCulled||be.intersectsSprite(U)){me&&je.setFromMatrixPosition(U.matrixWorld).applyMatrix4(Ie);const st=Se.update(U),ft=U.material;ft.visible&&A.push(U,st,ft,de,je.z,null)}}else if((U.isMesh||U.isLine||U.isPoints)&&(!U.frustumCulled||be.intersectsObject(U))){const st=Se.update(U),ft=U.material;if(me&&(U.boundingSphere!==void 0?(U.boundingSphere===null&&U.computeBoundingSphere(),je.copy(U.boundingSphere.center)):(st.boundingSphere===null&&st.computeBoundingSphere(),je.copy(st.boundingSphere.center)),je.applyMatrix4(U.matrixWorld).applyMatrix4(Ie)),Array.isArray(ft)){const pt=st.groups;for(let St=0,xt=pt.length;St<xt;St++){const Et=pt[St],wn=ft[Et.materialIndex];wn&&wn.visible&&A.push(U,st,wn,de,je.z,Et)}}else ft.visible&&A.push(U,st,ft,de,je.z,null)}}const Ke=U.children;for(let st=0,ft=Ke.length;st<ft;st++)Yi(Ke[st],se,de,me)}function nf(U,se,de,me){const fe=U.opaque,Ke=U.transmissive,st=U.transparent;_.setupLightsView(de),ee===!0&&At.setGlobalState(S.clippingPlanes,de),Ke.length>0&&rf(fe,Ke,se,de),me&&oe.viewport(T.copy(me)),fe.length>0&&kc(fe,se,de),Ke.length>0&&kc(Ke,se,de),st.length>0&&kc(st,se,de),oe.buffers.depth.setTest(!0),oe.buffers.depth.setMask(!0),oe.buffers.color.setMask(!0),oe.setPolygonOffset(!1)}function rf(U,se,de,me){if((de.isScene===!0?de.overrideMaterial:null)!==null)return;const Ke=ve.isWebGL2;Me===null&&(Me=new ks(1,1,{generateMipmaps:!0,type:ie.has("EXT_color_buffer_half_float")?Ph:uo,minFilter:gs,samples:Ke?4:0})),S.getDrawingBufferSize($e),Ke?Me.setSize($e.x,$e.y):Me.setSize(fy($e.x),fy($e.y));const st=S.getRenderTarget();S.setRenderTarget(Me),S.getClearColor(J),W=S.getClearAlpha(),W<1&&S.setClearColor(16777215,.5),S.clear();const ft=S.toneMapping;S.toneMapping=co,kc(U,de,me),F.updateMultisampleRenderTarget(Me),F.updateRenderTargetMipmap(Me);let pt=!1;for(let St=0,xt=se.length;St<xt;St++){const Et=se[St],wn=Et.object,Ar=Et.geometry,dn=Et.material,lr=Et.group;if(dn.side===ds&&wn.layers.test(me.layers)){const mt=dn.side;dn.side=di,dn.needsUpdate=!0,ia(wn,de,me,Ar,dn,lr),dn.side=mt,dn.needsUpdate=!0,pt=!0}}pt===!0&&(F.updateMultisampleRenderTarget(Me),F.updateRenderTargetMipmap(Me)),S.setRenderTarget(st),S.setClearColor(J,W),S.toneMapping=ft}function kc(U,se,de){const me=se.isScene===!0?se.overrideMaterial:null;for(let fe=0,Ke=U.length;fe<Ke;fe++){const st=U[fe],ft=st.object,pt=st.geometry,St=me===null?st.material:me,xt=st.group;ft.layers.test(de.layers)&&ia(ft,se,de,pt,St,xt)}}function ia(U,se,de,me,fe,Ke){U.onBeforeRender(S,se,de,me,fe,Ke),U.modelViewMatrix.multiplyMatrices(de.matrixWorldInverse,U.matrixWorld),U.normalMatrix.getNormalMatrix(U.modelViewMatrix),fe.onBeforeRender(S,se,de,me,U,Ke),fe.transparent===!0&&fe.side===ds&&fe.forceSinglePass===!1?(fe.side=di,fe.needsUpdate=!0,S.renderBufferDirect(de,se,me,fe,U,Ke),fe.side=vo,fe.needsUpdate=!0,S.renderBufferDirect(de,se,me,fe,U,Ke),fe.side=ds):S.renderBufferDirect(de,se,me,fe,U,Ke),U.onAfterRender(S,se,de,me,fe,Ke)}function Uc(U,se,de){se.isScene!==!0&&(se=ue);const me=Ee.get(U),fe=_.state.lights,Ke=_.state.shadowsArray,st=fe.state.version,ft=qe.getParameters(U,fe.state,Ke,se,de),pt=qe.getProgramCacheKey(ft);let St=me.programs;me.environment=U.isMeshStandardMaterial?se.environment:null,me.fog=se.fog,me.envMap=(U.isMeshStandardMaterial?K:B).get(U.envMap||me.environment),St===void 0&&(U.addEventListener("dispose",Be),St=new Map,me.programs=St);let xt=St.get(pt);if(xt!==void 0){if(me.currentProgram===xt&&me.lightsStateVersion===st)return hm(U,ft),xt}else ft.uniforms=qe.getUniforms(U),U.onBuild(de,ft,S),U.onBeforeCompile(ft,S),xt=qe.acquireProgram(ft,pt),St.set(pt,xt),me.uniforms=ft.uniforms;const Et=me.uniforms;return(!U.isShaderMaterial&&!U.isRawShaderMaterial||U.clipping===!0)&&(Et.clippingPlanes=At.uniform),hm(U,ft),me.needsLights=J_(U),me.lightsStateVersion=st,me.needsLights&&(Et.ambientLightColor.value=fe.state.ambient,Et.lightProbe.value=fe.state.probe,Et.directionalLights.value=fe.state.directional,Et.directionalLightShadows.value=fe.state.directionalShadow,Et.spotLights.value=fe.state.spot,Et.spotLightShadows.value=fe.state.spotShadow,Et.rectAreaLights.value=fe.state.rectArea,Et.ltc_1.value=fe.state.rectAreaLTC1,Et.ltc_2.value=fe.state.rectAreaLTC2,Et.pointLights.value=fe.state.point,Et.pointLightShadows.value=fe.state.pointShadow,Et.hemisphereLights.value=fe.state.hemi,Et.directionalShadowMap.value=fe.state.directionalShadowMap,Et.directionalShadowMatrix.value=fe.state.directionalShadowMatrix,Et.spotShadowMap.value=fe.state.spotShadowMap,Et.spotLightMatrix.value=fe.state.spotLightMatrix,Et.spotLightMap.value=fe.state.spotLightMap,Et.pointShadowMap.value=fe.state.pointShadowMap,Et.pointShadowMatrix.value=fe.state.pointShadowMatrix),me.currentProgram=xt,me.uniformsList=null,xt}function um(U){if(U.uniformsList===null){const se=U.currentProgram.getUniforms();U.uniformsList=tv.seqWithValue(se.seq,U.uniforms)}return U.uniformsList}function hm(U,se){const de=Ee.get(U);de.outputColorSpace=se.outputColorSpace,de.batching=se.batching,de.instancing=se.instancing,de.instancingColor=se.instancingColor,de.skinning=se.skinning,de.morphTargets=se.morphTargets,de.morphNormals=se.morphNormals,de.morphColors=se.morphColors,de.morphTargetsCount=se.morphTargetsCount,de.numClippingPlanes=se.numClippingPlanes,de.numIntersection=se.numClipIntersection,de.vertexAlphas=se.vertexAlphas,de.vertexTangents=se.vertexTangents,de.toneMapping=se.toneMapping}function W_(U,se,de,me,fe){se.isScene!==!0&&(se=ue),F.resetTextureUnits();const Ke=se.fog,st=me.isMeshStandardMaterial?se.environment:null,ft=I===null?S.outputColorSpace:I.isXRRenderTarget===!0?I.texture.colorSpace:yo,pt=(me.isMeshStandardMaterial?K:B).get(me.envMap||st),St=me.vertexColors===!0&&!!de.attributes.color&&de.attributes.color.itemSize===4,xt=!!de.attributes.tangent&&(!!me.normalMap||me.anisotropy>0),Et=!!de.morphAttributes.position,wn=!!de.morphAttributes.normal,Ar=!!de.morphAttributes.color;let dn=co;me.toneMapped&&(I===null||I.isXRRenderTarget===!0)&&(dn=S.toneMapping);const lr=de.morphAttributes.position||de.morphAttributes.normal||de.morphAttributes.color,mt=lr!==void 0?lr.length:0,Ze=Ee.get(me),qi=_.state.lights;if(ee===!0&&(pe===!0||U!==N)){const Sr=U===N&&me.id===D;At.setState(me,U,Sr)}let Ot=!1;me.version===Ze.__version?(Ze.needsLights&&Ze.lightsStateVersion!==qi.state.version||Ze.outputColorSpace!==ft||fe.isBatchedMesh&&Ze.batching===!1||!fe.isBatchedMesh&&Ze.batching===!0||fe.isInstancedMesh&&Ze.instancing===!1||!fe.isInstancedMesh&&Ze.instancing===!0||fe.isSkinnedMesh&&Ze.skinning===!1||!fe.isSkinnedMesh&&Ze.skinning===!0||fe.isInstancedMesh&&Ze.instancingColor===!0&&fe.instanceColor===null||fe.isInstancedMesh&&Ze.instancingColor===!1&&fe.instanceColor!==null||Ze.envMap!==pt||me.fog===!0&&Ze.fog!==Ke||Ze.numClippingPlanes!==void 0&&(Ze.numClippingPlanes!==At.numPlanes||Ze.numIntersection!==At.numIntersection)||Ze.vertexAlphas!==St||Ze.vertexTangents!==xt||Ze.morphTargets!==Et||Ze.morphNormals!==wn||Ze.morphColors!==Ar||Ze.toneMapping!==dn||ve.isWebGL2===!0&&Ze.morphTargetsCount!==mt)&&(Ot=!0):(Ot=!0,Ze.__version=me.version);let In=Ze.currentProgram;Ot===!0&&(In=Uc(me,se,fe));let Gs=!1,Qi=!1,cr=!1;const zn=In.getUniforms(),js=Ze.uniforms;if(oe.useProgram(In.program)&&(Gs=!0,Qi=!0,cr=!0),me.id!==D&&(D=me.id,Qi=!0),Gs||N!==U){zn.setValue(z,"projectionMatrix",U.projectionMatrix),zn.setValue(z,"viewMatrix",U.matrixWorldInverse);const Sr=zn.map.cameraPosition;Sr!==void 0&&Sr.setValue(z,je.setFromMatrixPosition(U.matrixWorld)),ve.logarithmicDepthBuffer&&zn.setValue(z,"logDepthBufFC",2/(Math.log(U.far+1)/Math.LN2)),(me.isMeshPhongMaterial||me.isMeshToonMaterial||me.isMeshLambertMaterial||me.isMeshBasicMaterial||me.isMeshStandardMaterial||me.isShaderMaterial)&&zn.setValue(z,"isOrthographic",U.isOrthographicCamera===!0),N!==U&&(N=U,Qi=!0,cr=!0)}if(fe.isSkinnedMesh){zn.setOptional(z,fe,"bindMatrix"),zn.setOptional(z,fe,"bindMatrixInverse");const Sr=fe.skeleton;Sr&&(ve.floatVertexTextures?(Sr.boneTexture===null&&Sr.computeBoneTexture(),zn.setValue(z,"boneTexture",Sr.boneTexture,F)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}fe.isBatchedMesh&&(zn.setOptional(z,fe,"batchingTexture"),zn.setValue(z,"batchingTexture",fe._matricesTexture,F));const zc=de.morphAttributes;if((zc.position!==void 0||zc.normal!==void 0||zc.color!==void 0&&ve.isWebGL2===!0)&&Pt.update(fe,de,In),(Qi||Ze.receiveShadow!==fe.receiveShadow)&&(Ze.receiveShadow=fe.receiveShadow,zn.setValue(z,"receiveShadow",fe.receiveShadow)),me.isMeshGouraudMaterial&&me.envMap!==null&&(js.envMap.value=pt,js.flipEnvMap.value=pt.isCubeTexture&&pt.isRenderTargetTexture===!1?-1:1),Qi&&(zn.setValue(z,"toneMappingExposure",S.toneMappingExposure),Ze.needsLights&&X_(js,cr),Ke&&me.fog===!0&&Ne.refreshFogUniforms(js,Ke),Ne.refreshMaterialUniforms(js,me,ce,q,Me),tv.upload(z,um(Ze),js,F)),me.isShaderMaterial&&me.uniformsNeedUpdate===!0&&(tv.upload(z,um(Ze),js,F),me.uniformsNeedUpdate=!1),me.isSpriteMaterial&&zn.setValue(z,"center",fe.center),zn.setValue(z,"modelViewMatrix",fe.modelViewMatrix),zn.setValue(z,"normalMatrix",fe.normalMatrix),zn.setValue(z,"modelMatrix",fe.matrixWorld),me.isShaderMaterial||me.isRawShaderMaterial){const Sr=me.uniformsGroups;for(let Hc=0,bi=Sr.length;Hc<bi;Hc++)if(ve.isWebGL2){const fm=Sr[Hc];we.update(fm,In),we.bind(fm,In)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return In}function X_(U,se){U.ambientLightColor.needsUpdate=se,U.lightProbe.needsUpdate=se,U.directionalLights.needsUpdate=se,U.directionalLightShadows.needsUpdate=se,U.pointLights.needsUpdate=se,U.pointLightShadows.needsUpdate=se,U.spotLights.needsUpdate=se,U.spotLightShadows.needsUpdate=se,U.rectAreaLights.needsUpdate=se,U.hemisphereLights.needsUpdate=se}function J_(U){return U.isMeshLambertMaterial||U.isMeshToonMaterial||U.isMeshPhongMaterial||U.isMeshStandardMaterial||U.isShadowMaterial||U.isShaderMaterial&&U.lights===!0}this.getActiveCubeFace=function(){return R},this.getActiveMipmapLevel=function(){return C},this.getRenderTarget=function(){return I},this.setRenderTargetTextures=function(U,se,de){Ee.get(U.texture).__webglTexture=se,Ee.get(U.depthTexture).__webglTexture=de;const me=Ee.get(U);me.__hasExternalTextures=!0,me.__hasExternalTextures&&(me.__autoAllocateDepthBuffer=de===void 0,me.__autoAllocateDepthBuffer||ie.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),me.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(U,se){const de=Ee.get(U);de.__webglFramebuffer=se,de.__useDefaultFramebuffer=se===void 0},this.setRenderTarget=function(U,se=0,de=0){I=U,R=se,C=de;let me=!0,fe=null,Ke=!1,st=!1;if(U){const pt=Ee.get(U);pt.__useDefaultFramebuffer!==void 0?(oe.bindFramebuffer(z.FRAMEBUFFER,null),me=!1):pt.__webglFramebuffer===void 0?F.setupRenderTarget(U):pt.__hasExternalTextures&&F.rebindTextures(U,Ee.get(U.texture).__webglTexture,Ee.get(U.depthTexture).__webglTexture);const St=U.texture;(St.isData3DTexture||St.isDataArrayTexture||St.isCompressedArrayTexture)&&(st=!0);const xt=Ee.get(U).__webglFramebuffer;U.isWebGLCubeRenderTarget?(Array.isArray(xt[se])?fe=xt[se][de]:fe=xt[se],Ke=!0):ve.isWebGL2&&U.samples>0&&F.useMultisampledRTT(U)===!1?fe=Ee.get(U).__webglMultisampledFramebuffer:Array.isArray(xt)?fe=xt[de]:fe=xt,T.copy(U.viewport),L.copy(U.scissor),H=U.scissorTest}else T.copy(X).multiplyScalar(ce).floor(),L.copy(Q).multiplyScalar(ce).floor(),H=te;if(oe.bindFramebuffer(z.FRAMEBUFFER,fe)&&ve.drawBuffers&&me&&oe.drawBuffers(U,fe),oe.viewport(T),oe.scissor(L),oe.setScissorTest(H),Ke){const pt=Ee.get(U.texture);z.framebufferTexture2D(z.FRAMEBUFFER,z.COLOR_ATTACHMENT0,z.TEXTURE_CUBE_MAP_POSITIVE_X+se,pt.__webglTexture,de)}else if(st){const pt=Ee.get(U.texture),St=se||0;z.framebufferTextureLayer(z.FRAMEBUFFER,z.COLOR_ATTACHMENT0,pt.__webglTexture,de||0,St)}D=-1},this.readRenderTargetPixels=function(U,se,de,me,fe,Ke,st){if(!(U&&U.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ft=Ee.get(U).__webglFramebuffer;if(U.isWebGLCubeRenderTarget&&st!==void 0&&(ft=ft[st]),ft){oe.bindFramebuffer(z.FRAMEBUFFER,ft);try{const pt=U.texture,St=pt.format,xt=pt.type;if(St!==ci&&Ye.convert(St)!==z.getParameter(z.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Et=xt===Ph&&(ie.has("EXT_color_buffer_half_float")||ve.isWebGL2&&ie.has("EXT_color_buffer_float"));if(xt!==uo&&Ye.convert(xt)!==z.getParameter(z.IMPLEMENTATION_COLOR_READ_TYPE)&&!(xt===ps&&(ve.isWebGL2||ie.has("OES_texture_float")||ie.has("WEBGL_color_buffer_float")))&&!Et){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}se>=0&&se<=U.width-me&&de>=0&&de<=U.height-fe&&z.readPixels(se,de,me,fe,Ye.convert(St),Ye.convert(xt),Ke)}finally{const pt=I!==null?Ee.get(I).__webglFramebuffer:null;oe.bindFramebuffer(z.FRAMEBUFFER,pt)}}},this.copyFramebufferToTexture=function(U,se,de=0){const me=Math.pow(2,-de),fe=Math.floor(se.image.width*me),Ke=Math.floor(se.image.height*me);F.setTexture2D(se,0),z.copyTexSubImage2D(z.TEXTURE_2D,de,0,0,U.x,U.y,fe,Ke),oe.unbindTexture()},this.copyTextureToTexture=function(U,se,de,me=0){const fe=se.image.width,Ke=se.image.height,st=Ye.convert(de.format),ft=Ye.convert(de.type);F.setTexture2D(de,0),z.pixelStorei(z.UNPACK_FLIP_Y_WEBGL,de.flipY),z.pixelStorei(z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,de.premultiplyAlpha),z.pixelStorei(z.UNPACK_ALIGNMENT,de.unpackAlignment),se.isDataTexture?z.texSubImage2D(z.TEXTURE_2D,me,U.x,U.y,fe,Ke,st,ft,se.image.data):se.isCompressedTexture?z.compressedTexSubImage2D(z.TEXTURE_2D,me,U.x,U.y,se.mipmaps[0].width,se.mipmaps[0].height,st,se.mipmaps[0].data):z.texSubImage2D(z.TEXTURE_2D,me,U.x,U.y,st,ft,se.image),me===0&&de.generateMipmaps&&z.generateMipmap(z.TEXTURE_2D),oe.unbindTexture()},this.copyTextureToTexture3D=function(U,se,de,me,fe=0){if(S.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Ke=U.max.x-U.min.x+1,st=U.max.y-U.min.y+1,ft=U.max.z-U.min.z+1,pt=Ye.convert(me.format),St=Ye.convert(me.type);let xt;if(me.isData3DTexture)F.setTexture3D(me,0),xt=z.TEXTURE_3D;else if(me.isDataArrayTexture||me.isCompressedArrayTexture)F.setTexture2DArray(me,0),xt=z.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}z.pixelStorei(z.UNPACK_FLIP_Y_WEBGL,me.flipY),z.pixelStorei(z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,me.premultiplyAlpha),z.pixelStorei(z.UNPACK_ALIGNMENT,me.unpackAlignment);const Et=z.getParameter(z.UNPACK_ROW_LENGTH),wn=z.getParameter(z.UNPACK_IMAGE_HEIGHT),Ar=z.getParameter(z.UNPACK_SKIP_PIXELS),dn=z.getParameter(z.UNPACK_SKIP_ROWS),lr=z.getParameter(z.UNPACK_SKIP_IMAGES),mt=de.isCompressedTexture?de.mipmaps[fe]:de.image;z.pixelStorei(z.UNPACK_ROW_LENGTH,mt.width),z.pixelStorei(z.UNPACK_IMAGE_HEIGHT,mt.height),z.pixelStorei(z.UNPACK_SKIP_PIXELS,U.min.x),z.pixelStorei(z.UNPACK_SKIP_ROWS,U.min.y),z.pixelStorei(z.UNPACK_SKIP_IMAGES,U.min.z),de.isDataTexture||de.isData3DTexture?z.texSubImage3D(xt,fe,se.x,se.y,se.z,Ke,st,ft,pt,St,mt.data):de.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),z.compressedTexSubImage3D(xt,fe,se.x,se.y,se.z,Ke,st,ft,pt,mt.data)):z.texSubImage3D(xt,fe,se.x,se.y,se.z,Ke,st,ft,pt,St,mt),z.pixelStorei(z.UNPACK_ROW_LENGTH,Et),z.pixelStorei(z.UNPACK_IMAGE_HEIGHT,wn),z.pixelStorei(z.UNPACK_SKIP_PIXELS,Ar),z.pixelStorei(z.UNPACK_SKIP_ROWS,dn),z.pixelStorei(z.UNPACK_SKIP_IMAGES,lr),fe===0&&me.generateMipmaps&&z.generateMipmap(xt),oe.unbindTexture()},this.initTexture=function(U){U.isCubeTexture?F.setTextureCube(U,0):U.isData3DTexture?F.setTexture3D(U,0):U.isDataArrayTexture||U.isCompressedArrayTexture?F.setTexture2DArray(U,0):F.setTexture2D(U,0),oe.unbindTexture()},this.resetState=function(){R=0,C=0,I=null,oe.reset(),Y.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return so}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===A_?"display-p3":"srgb",t.unpackColorSpace=rn.workingColorSpace===Yp?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===rr?Ya:lC}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Ya?rr:yo}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class zk extends AC{}zk.prototype.isWebGL1Renderer=!0;class w_{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Ue(e),this.density=t}clone(){return new w_(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class M_{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new Ue(e),this.near=t,this.far=r}clone(){return new M_(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class dy extends Xt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class tm{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=_p,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Vi()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return hc("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Vi()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Vi()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const si=new k;class ol{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)si.fromBufferAttribute(this,t),si.applyMatrix4(e),this.setXYZ(t,si.x,si.y,si.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)si.fromBufferAttribute(this,t),si.applyNormalMatrix(e),this.setXYZ(t,si.x,si.y,si.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)si.fromBufferAttribute(this,t),si.transformDirection(e),this.setXYZ(t,si.x,si.y,si.z);return this}getComponent(e,t){let r=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(r=ui(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=Rt(r,this.array)),this.data.array[e*this.data.stride+this.offset+t]=r,this}setX(e,t){return this.normalized&&(t=Rt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Rt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Rt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Rt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ui(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ui(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ui(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ui(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Rt(t,this.array),r=Rt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Rt(t,this.array),r=Rt(r,this.array),i=Rt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Rt(t,this.array),r=Rt(r,this.array),i=Rt(i,this.array),s=Rt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new Jt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new ol(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class SC extends er{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Ue(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let yu;const Uf=new k,_u=new k,xu=new k,Au=new _e,zf=new _e,Hk=new ht,r0=new k,Hf=new k,i0=new k,E3=new _e,bA=new _e,w3=new _e;class Vk extends Xt{constructor(e=new SC){if(super(),this.isSprite=!0,this.type="Sprite",yu===void 0){yu=new bt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new tm(t,5);yu.setIndex([0,1,2,0,2,3]),yu.setAttribute("position",new ol(r,3,0,!1)),yu.setAttribute("uv",new ol(r,2,3,!1))}this.geometry=yu,this.material=e,this.center=new _e(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_u.setFromMatrixScale(this.matrixWorld),Hk.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),xu.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&_u.multiplyScalar(-xu.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;s0(r0.set(-.5,-.5,0),xu,o,_u,i,s),s0(Hf.set(.5,-.5,0),xu,o,_u,i,s),s0(i0.set(.5,.5,0),xu,o,_u,i,s),E3.set(0,0),bA.set(1,0),w3.set(1,1);let a=e.ray.intersectTriangle(r0,Hf,i0,!1,Uf);if(a===null&&(s0(Hf.set(-.5,.5,0),xu,o,_u,i,s),bA.set(0,1),a=e.ray.intersectTriangle(r0,i0,Hf,!1,Uf),a===null))return;const l=e.ray.origin.distanceTo(Uf);l<e.near||l>e.far||t.push({distance:l,point:Uf.clone(),uv:Fi.getInterpolation(Uf,r0,Hf,i0,E3,bA,w3,new _e),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function s0(n,e,t,r,i,s){Au.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(zf.x=s*Au.x-i*Au.y,zf.y=i*Au.x+s*Au.y):zf.copy(Au),n.copy(e),n.x+=zf.x,n.y+=zf.y,n.applyMatrix4(Hk)}const o0=new k,M3=new k;class Gk extends Xt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const s=t[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,r=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i;r++){let s=t[r].distance;if(t[r].object.visible&&(s-=s*t[r].hysteresis),e<s)break}return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){o0.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(o0);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){o0.setFromMatrixPosition(e.matrixWorld),M3.setFromMatrixPosition(this.matrixWorld);const r=o0.distanceTo(M3)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let o=t[i].distance;if(t[i].object.visible&&(o-=o*t[i].hysteresis),r>=o)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const T3=new k,C3=new sn,b3=new sn,Rte=new k,R3=new ht,a0=new k,RA=new Dr,P3=new ht,PA=new Dc;class EC extends jn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=rw,this.bindMatrix=new ht,this.bindMatrixInverse=new ht,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Yr),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,a0),this.boundingBox.expandByPoint(a0)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Dr),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,a0),this.boundingSphere.expandByPoint(a0)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),RA.copy(this.boundingSphere),RA.applyMatrix4(i),e.ray.intersectsSphere(RA)!==!1&&(P3.copy(i).invert(),PA.copy(e.ray).applyMatrix4(P3),!(this.boundingBox!==null&&PA.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,PA)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new sn,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===rw?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===nk?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const r=this.skeleton,i=this.geometry;C3.fromBufferAttribute(i.attributes.skinIndex,e),b3.fromBufferAttribute(i.attributes.skinWeight,e),T3.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=b3.getComponent(s);if(o!==0){const a=C3.getComponent(s);R3.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(Rte.copy(T3).applyMatrix4(R3),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class T_ extends Xt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class dc extends xn{constructor(e=null,t=1,r=1,i,s,o,a,l,c=Nn,h=Nn,d,p){super(null,o,a,l,c,h,i,s,d,p),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const I3=new ht,Pte=new ht;class nm{constructor(e=[],t=[]){this.uuid=Vi(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new ht)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new ht;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:Pte;I3.multiplyMatrices(a,t[s]),I3.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new nm(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new dc(t,e,e,ci,ps);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new T_),this.bones.push(o),this.boneInverses.push(new ht().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class Bh extends Jt{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Su=new ht,L3=new ht,l0=[],D3=new Yr,Ite=new ht,Vf=new jn,Gf=new Dr;class wC extends jn{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Bh(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,Ite)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Yr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Su),D3.copy(e.boundingBox).applyMatrix4(Su),this.boundingBox.union(D3)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Dr),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Su),Gf.copy(e.boundingSphere).applyMatrix4(Su),this.boundingSphere.union(Gf)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,i=this.count;if(Vf.geometry=this.geometry,Vf.material=this.material,Vf.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Gf.copy(this.boundingSphere),Gf.applyMatrix4(r),e.ray.intersectsSphere(Gf)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,Su),L3.multiplyMatrices(r,Su),Vf.matrixWorld=L3,Vf.raycast(e,l0);for(let o=0,a=l0.length;o<a;o++){const l=l0[o];l.instanceId=s,l.object=this,t.push(l)}l0.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Bh(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function Lte(n,e){return n.z-e.z}function Dte(n,e){return e.z-n.z}class Bte{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t){const r=this.pool,i=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1});const s=r[this.index];i.push(s),this.index++,s.start=e.start,s.count=e.count,s.z=t}reset(){this.list.length=0,this.index=0}}const Eu="batchId",xa=new ht,B3=new ht,Nte=new ht,N3=new ht,IA=new em,c0=new Yr,Rl=new Dr,jf=new k,LA=new Bte,jr=new jn,u0=[];function Ote(n,e,t=0){const r=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const i=n.count;for(let s=0;s<i;s++)for(let o=0;o<r;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*r);e.needsUpdate=!0}class jk extends jn{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,t,r=t*2,i){super(new bt,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=t,this._maxIndexCount=r,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),r=new dc(t,e,e,ci,ps);this._matricesTexture=r}_initializeGeometry(e){const t=this.geometry,r=this._maxVertexCount,i=this._maxGeometryCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const l=e.getAttribute(a),{array:c,itemSize:h,normalized:d}=l,p=new c.constructor(r*h),m=new l.constructor(p,h,d);m.setUsage(l.usage),t.setAttribute(a,m)}if(e.getIndex()!==null){const a=r>65536?new Uint32Array(s):new Uint16Array(s);t.setIndex(new Jt(a,1))}const o=i>65536?new Uint32Array(r):new Uint16Array(r);t.setAttribute(Eu,new Jt(o,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(Eu))throw new Error(`BatchedMesh: Geometry cannot use attribute "${Eu}"`);const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const r in t.attributes){if(r===Eu)continue;if(!e.hasAttribute(r))throw new Error(`BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),s=t.getAttribute(r);if(i.itemSize!==s.itemSize||i.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Yr);const e=this._geometryCount,t=this.boundingBox,r=this._active;t.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,xa),this.getBoundingBoxAt(i,c0).applyMatrix4(xa),t.union(c0))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Dr);const e=this._geometryCount,t=this.boundingSphere,r=this._active;t.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,xa),this.getBoundingSphereAt(i,Rl).applyMatrix4(xa),t.union(Rl))}addGeometry(e,t=-1,r=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const i={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const o=this._reservedRanges,a=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(s=o[o.length-1]),t===-1?i.vertexCount=e.getAttribute("position").count:i.vertexCount=t,s===null?i.vertexStart=0:i.vertexStart=s.vertexStart+s.vertexCount;const c=e.getIndex(),h=c!==null;if(h&&(r===-1?i.indexCount=c.count:i.indexCount=r,s===null?i.indexStart=0:i.indexStart=s.indexStart+s.indexCount),i.indexStart!==-1&&i.indexStart+i.indexCount>this._maxIndexCount||i.vertexStart+i.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const d=this._visibility,p=this._active,m=this._matricesTexture,v=this._matricesTexture.image.data;d.push(!0),p.push(!0);const A=this._geometryCount;this._geometryCount++,Nte.toArray(v,A*16),m.needsUpdate=!0,o.push(i),a.push({start:h?i.indexStart:i.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new Yr,sphereInitialized:!1,sphere:new Dr});const _=this.geometry.getAttribute(Eu);for(let g=0;g<i.vertexCount;g++)_.setX(i.vertexStart+g,A);return _.needsUpdate=!0,this.setGeometryAt(A,e),A}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const r=this.geometry,i=r.getIndex()!==null,s=r.getIndex(),o=t.getIndex(),a=this._reservedRanges[e];if(i&&o.count>a.indexCount||t.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,c=a.vertexCount;for(const m in r.attributes){if(m===Eu)continue;const v=t.getAttribute(m),A=r.getAttribute(m);Ote(v,A,l);const _=v.itemSize;for(let g=v.count,x=c;g<x;g++){const S=l+g;for(let w=0;w<_;w++)A.setComponent(S,w,0)}A.needsUpdate=!0}if(i){const m=a.indexStart;for(let v=0;v<o.count;v++)s.setX(m+v,l+o.getX(v));for(let v=o.count,A=a.indexCount;v<A;v++)s.setX(m+v,l);s.needsUpdate=!0}const h=this._bounds[e];t.boundingBox!==null?(h.box.copy(t.boundingBox),h.boxInitialized=!0):h.boxInitialized=!1,t.boundingSphere!==null?(h.sphere.copy(t.boundingSphere),h.sphereInitialized=!0):h.sphereInitialized=!1;const d=this._drawRanges[e],p=t.getAttribute("position");return d.count=i?o.count:p.count,this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._active;return e>=t.length||t[e]===!1?this:(t[e]=!1,this._visibilityChanged=!0,this)}getBoundingBoxAt(e,t){if(this._active[e]===!1)return null;const i=this._bounds[e],s=i.box,o=this.geometry;if(i.boxInitialized===!1){s.makeEmpty();const a=o.index,l=o.attributes.position,c=this._drawRanges[e];for(let h=c.start,d=c.start+c.count;h<d;h++){let p=h;a&&(p=a.getX(p)),s.expandByPoint(jf.fromBufferAttribute(l,p))}i.boxInitialized=!0}return t.copy(s),t}getBoundingSphereAt(e,t){if(this._active[e]===!1)return null;const i=this._bounds[e],s=i.sphere,o=this.geometry;if(i.sphereInitialized===!1){s.makeEmpty(),this.getBoundingBoxAt(e,c0),c0.getCenter(s.center);const a=o.index,l=o.attributes.position,c=this._drawRanges[e];let h=0;for(let d=c.start,p=c.start+c.count;d<p;d++){let m=d;a&&(m=a.getX(m)),jf.fromBufferAttribute(l,m),h=Math.max(h,s.center.distanceToSquared(jf))}s.radius=Math.sqrt(h),i.sphereInitialized=!0}return t.copy(s),t}setMatrixAt(e,t){const r=this._active,i=this._matricesTexture,s=this._matricesTexture.image.data,o=this._geometryCount;return e>=o||r[e]===!1?this:(t.toArray(s,e*16),i.needsUpdate=!0,this)}getMatrixAt(e,t){const r=this._active,i=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||r[e]===!1?null:t.fromArray(i,e*16)}setVisibleAt(e,t){const r=this._visibility,i=this._active,s=this._geometryCount;return e>=s||i[e]===!1||r[e]===t?this:(r[e]=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._visibility,r=this._active,i=this._geometryCount;return e>=i||r[e]===!1?!1:t[e]}raycast(e,t){const r=this._visibility,i=this._active,s=this._drawRanges,o=this._geometryCount,a=this.matrixWorld,l=this.geometry;jr.material=this.material,jr.geometry.index=l.index,jr.geometry.attributes=l.attributes,jr.geometry.boundingBox===null&&(jr.geometry.boundingBox=new Yr),jr.geometry.boundingSphere===null&&(jr.geometry.boundingSphere=new Dr);for(let c=0;c<o;c++){if(!r[c]||!i[c])continue;const h=s[c];jr.geometry.setDrawRange(h.start,h.count),this.getMatrixAt(c,jr.matrixWorld).premultiply(a),this.getBoundingBoxAt(c,jr.geometry.boundingBox),this.getBoundingSphereAt(c,jr.geometry.boundingSphere),jr.raycast(e,u0);for(let d=0,p=u0.length;d<p;d++){const m=u0[d];m.object=this,m.batchId=c,t.push(m)}u0.length=0}jr.material=null,jr.geometry.index=null,jr.geometry.attributes={},jr.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,t,r,i,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=i.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._active,c=this._visibility,h=this._multiDrawStarts,d=this._multiDrawCounts,p=this._drawRanges,m=this.perObjectFrustumCulled;m&&(N3.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),IA.setFromProjectionMatrix(N3,e.coordinateSystem));let v=0;if(this.sortObjects){B3.copy(this.matrixWorld).invert(),jf.setFromMatrixPosition(r.matrixWorld).applyMatrix4(B3);for(let g=0,x=c.length;g<x;g++)if(c[g]&&l[g]){this.getMatrixAt(g,xa),this.getBoundingSphereAt(g,Rl).applyMatrix4(xa);let S=!1;if(m&&(S=!IA.intersectsSphere(Rl)),!S){const w=jf.distanceTo(Rl.center);LA.push(p[g],w)}}const A=LA.list,_=this.customSort;_===null?A.sort(s.transparent?Dte:Lte):_.call(this,A,r);for(let g=0,x=A.length;g<x;g++){const S=A[g];h[v]=S.start*a,d[v]=S.count,v++}LA.reset()}else for(let A=0,_=c.length;A<_;A++)if(c[A]&&l[A]){let g=!1;if(m&&(this.getMatrixAt(A,xa),this.getBoundingSphereAt(A,Rl).applyMatrix4(xa),g=!IA.intersectsSphere(Rl)),!g){const x=p[A];h[v]=x.start*a,d[v]=x.count,v++}}this._multiDrawCount=v,this._visibilityChanged=!1}onBeforeShadow(e,t,r,i,s,o){this.onBeforeRender(e,null,i,s,o)}}class Zr extends er{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ue(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const O3=new k,F3=new k,k3=new ht,DA=new Dc,h0=new Dr;class na extends Xt{constructor(e=new bt,t=new Zr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)O3.fromBufferAttribute(t,i-1),F3.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=O3.distanceTo(F3);e.setAttribute("lineDistance",new rt(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),h0.copy(r.boundingSphere),h0.applyMatrix4(i),h0.radius+=s,e.ray.intersectsSphere(h0)===!1)return;k3.copy(i).invert(),DA.copy(e.ray).applyMatrix4(k3);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new k,h=new k,d=new k,p=new k,m=this.isLineSegments?2:1,v=r.index,_=r.attributes.position;if(v!==null){const g=Math.max(0,o.start),x=Math.min(v.count,o.start+o.count);for(let S=g,w=x-1;S<w;S+=m){const R=v.getX(S),C=v.getX(S+1);if(c.fromBufferAttribute(_,R),h.fromBufferAttribute(_,C),DA.distanceSqToSegment(c,h,p,d)>l)continue;p.applyMatrix4(this.matrixWorld);const D=e.ray.origin.distanceTo(p);D<e.near||D>e.far||t.push({distance:D,point:d.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}else{const g=Math.max(0,o.start),x=Math.min(_.count,o.start+o.count);for(let S=g,w=x-1;S<w;S+=m){if(c.fromBufferAttribute(_,S),h.fromBufferAttribute(_,S+1),DA.distanceSqToSegment(c,h,p,d)>l)continue;p.applyMatrix4(this.matrixWorld);const C=e.ray.origin.distanceTo(p);C<e.near||C>e.far||t.push({distance:C,point:d.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const U3=new k,z3=new k;class zs extends na{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,s=t.count;i<s;i+=2)U3.fromBufferAttribute(t,i),z3.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+U3.distanceTo(z3);e.setAttribute("lineDistance",new rt(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class MC extends na{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class C_ extends er{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ue(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const H3=new ht,Bw=new Dc,f0=new Dr,d0=new k;class TC extends Xt{constructor(e=new bt,t=new C_){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),f0.copy(r.boundingSphere),f0.applyMatrix4(i),f0.radius+=s,e.ray.intersectsSphere(f0)===!1)return;H3.copy(i).invert(),Bw.copy(e.ray).applyMatrix4(H3);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=r.index,d=r.attributes.position;if(c!==null){const p=Math.max(0,o.start),m=Math.min(c.count,o.start+o.count);for(let v=p,A=m;v<A;v++){const _=c.getX(v);d0.fromBufferAttribute(d,_),V3(d0,_,l,i,e,t,this)}}else{const p=Math.max(0,o.start),m=Math.min(d.count,o.start+o.count);for(let v=p,A=m;v<A;v++)d0.fromBufferAttribute(d,v),V3(d0,v,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function V3(n,e,t,r,i,s,o){const a=Bw.distanceSqToPoint(n);if(a<t){const l=new k;Bw.closestPointToPoint(n,l),l.applyMatrix4(r);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class Fte extends xn{constructor(e,t,r,i,s,o,a,l,c){super(e,t,r,i,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:gn,this.magFilter=s!==void 0?s:gn,this.generateMipmaps=!1;const h=this;function d(){h.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class kte extends xn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Nn,this.minFilter=Nn,this.generateMipmaps=!1,this.needsUpdate=!0}}class b_ extends xn{constructor(e,t,r,i,s,o,a,l,c,h,d,p){super(null,o,a,l,c,h,i,s,d,p),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Ute extends b_{constructor(e,t,r,i,s,o){super(e,t,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Rr}}class zte extends b_{constructor(e,t,r){super(void 0,e[0].width,e[0].height,t,r,ta),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Hte extends xn{constructor(e,t,r,i,s,o,a,l,c){super(e,t,r,i,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Hs{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const s=r.length;let o;t?o=t:o=e*r[s-1];let a=0,l=s-1,c;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),c=r[i]-o,c<0)a=i+1;else if(c>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const h=r[i],p=r[i+1]-h,m=(o-h)/p;return(i+m)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=t||(o.isVector2?new _e:new k);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new k,i=[],s=[],o=[],a=new k,l=new ht;for(let m=0;m<=e;m++){const v=m/e;i[m]=this.getTangentAt(v,new k)}s[0]=new k,o[0]=new k;let c=Number.MAX_VALUE;const h=Math.abs(i[0].x),d=Math.abs(i[0].y),p=Math.abs(i[0].z);h<=c&&(c=h,r.set(1,0,0)),d<=c&&(c=d,r.set(0,1,0)),p<=c&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(i[m-1],i[m]),a.length()>Number.EPSILON){a.normalize();const v=Math.acos(Fn(i[m-1].dot(i[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,v))}o[m].crossVectors(i[m],s[m])}if(t===!0){let m=Math.acos(Fn(s[0].dot(s[e]),-1,1));m/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let v=1;v<=e;v++)s[v].applyMatrix4(l.makeRotationAxis(i[v],m*v)),o[v].crossVectors(i[v],s[v])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class R_ extends Hs{constructor(e=0,t=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const r=t||new _e,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const h=Math.cos(this.aRotation),d=Math.sin(this.aRotation),p=l-this.aX,m=c-this.aY;l=p*h-m*d+this.aX,c=p*d+m*h+this.aY}return r.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class Wk extends R_{constructor(e,t,r,i,s,o){super(e,t,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function CC(){let n=0,e=0,t=0,r=0;function i(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){i(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,h,d){let p=(o-s)/c-(a-s)/(c+h)+(a-o)/h,m=(a-o)/h-(l-o)/(h+d)+(l-a)/d;p*=h,m*=h,i(o,a,p,m)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+r*a}}}const p0=new k,BA=new CC,NA=new CC,OA=new CC;class Xk extends Hs{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new k){const r=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,h;this.closed||a>0?c=i[(a-1)%s]:(p0.subVectors(i[0],i[1]).add(i[0]),c=p0);const d=i[a%s],p=i[(a+1)%s];if(this.closed||a+2<s?h=i[(a+2)%s]:(p0.subVectors(i[s-1],i[s-2]).add(i[s-1]),h=p0),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let v=Math.pow(c.distanceToSquared(d),m),A=Math.pow(d.distanceToSquared(p),m),_=Math.pow(p.distanceToSquared(h),m);A<1e-4&&(A=1),v<1e-4&&(v=A),_<1e-4&&(_=A),BA.initNonuniformCatmullRom(c.x,d.x,p.x,h.x,v,A,_),NA.initNonuniformCatmullRom(c.y,d.y,p.y,h.y,v,A,_),OA.initNonuniformCatmullRom(c.z,d.z,p.z,h.z,v,A,_)}else this.curveType==="catmullrom"&&(BA.initCatmullRom(c.x,d.x,p.x,h.x,this.tension),NA.initCatmullRom(c.y,d.y,p.y,h.y,this.tension),OA.initCatmullRom(c.z,d.z,p.z,h.z,this.tension));return r.set(BA.calc(l),NA.calc(l),OA.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new k().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function G3(n,e,t,r,i){const s=(r-e)*.5,o=(i-t)*.5,a=n*n,l=n*a;return(2*t-2*r+s+o)*l+(-3*t+3*r-2*s-o)*a+s*n+t}function Vte(n,e){const t=1-n;return t*t*e}function Gte(n,e){return 2*(1-n)*n*e}function jte(n,e){return n*n*e}function Md(n,e,t,r){return Vte(n,e)+Gte(n,t)+jte(n,r)}function Wte(n,e){const t=1-n;return t*t*t*e}function Xte(n,e){const t=1-n;return 3*t*t*n*e}function Jte(n,e){return 3*(1-n)*n*n*e}function Kte(n,e){return n*n*n*e}function Td(n,e,t,r,i){return Wte(n,e)+Xte(n,t)+Jte(n,r)+Kte(n,i)}class bC extends Hs{constructor(e=new _e,t=new _e,r=new _e,i=new _e){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new _e){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(Td(e,i.x,s.x,o.x,a.x),Td(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Jk extends Hs{constructor(e=new k,t=new k,r=new k,i=new k){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new k){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(Td(e,i.x,s.x,o.x,a.x),Td(e,i.y,s.y,o.y,a.y),Td(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class RC extends Hs{constructor(e=new _e,t=new _e){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new _e){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new _e){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Kk extends Hs{constructor(e=new k,t=new k){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new k){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new k){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class PC extends Hs{constructor(e=new _e,t=new _e,r=new _e){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new _e){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(Md(e,i.x,s.x,o.x),Md(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class IC extends Hs{constructor(e=new k,t=new k,r=new k){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new k){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(Md(e,i.x,s.x,o.x),Md(e,i.y,s.y,o.y),Md(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class LC extends Hs{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new _e){const r=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],c=i[o],h=i[o>i.length-2?i.length-1:o+1],d=i[o>i.length-3?i.length-1:o+2];return r.set(G3(a,l.x,c.x,h.x,d.x),G3(a,l.y,c.y,h.y,d.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new _e().fromArray(i))}return this}}var py=Object.freeze({__proto__:null,ArcCurve:Wk,CatmullRomCurve3:Xk,CubicBezierCurve:bC,CubicBezierCurve3:Jk,EllipseCurve:R_,LineCurve:RC,LineCurve3:Kk,QuadraticBezierCurve:PC,QuadraticBezierCurve3:IC,SplineCurve:LC});class $k extends Hs{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new py[r](t,e))}return this}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const h=l[c];r&&r.equals(h)||(t.push(h),r=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new py[i.type]().fromJSON(i))}return this}}class Sp extends $k{constructor(e){super(),this.type="Path",this.currentPoint=new _e,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new RC(this.currentPoint.clone(),new _e(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const s=new PC(this.currentPoint.clone(),new _e(e,t),new _e(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,s,o){const a=new bC(this.currentPoint.clone(),new _e(e,t),new _e(r,i),new _e(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new LC(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,r,i,s,o),this}absarc(e,t,r,i,s,o){return this.absellipse(e,t,r,r,i,s,o),this}ellipse(e,t,r,i,s,o,a,l){const c=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+c,t+h,r,i,s,o,a,l),this}absellipse(e,t,r,i,s,o,a,l){const c=new R_(e,t,r,i,s,o,a,l);if(this.curves.length>0){const d=c.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(c);const h=c.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class rm extends bt{constructor(e=[new _e(0,-.5),new _e(.5,0),new _e(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=Fn(i,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],h=1/t,d=new k,p=new _e,m=new k,v=new k,A=new k;let _=0,g=0;for(let x=0;x<=e.length-1;x++)switch(x){case 0:_=e[x+1].x-e[x].x,g=e[x+1].y-e[x].y,m.x=g*1,m.y=-_,m.z=g*0,A.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(A.x,A.y,A.z);break;default:_=e[x+1].x-e[x].x,g=e[x+1].y-e[x].y,m.x=g*1,m.y=-_,m.z=g*0,v.copy(m),m.x+=A.x,m.y+=A.y,m.z+=A.z,m.normalize(),l.push(m.x,m.y,m.z),A.copy(v)}for(let x=0;x<=t;x++){const S=r+x*h*i,w=Math.sin(S),R=Math.cos(S);for(let C=0;C<=e.length-1;C++){d.x=e[C].x*w,d.y=e[C].y,d.z=e[C].x*R,o.push(d.x,d.y,d.z),p.x=x/t,p.y=C/(e.length-1),a.push(p.x,p.y);const I=l[3*C+0]*w,D=l[3*C+1],N=l[3*C+0]*R;c.push(I,D,N)}}for(let x=0;x<t;x++)for(let S=0;S<e.length-1;S++){const w=S+x*e.length,R=w,C=w+e.length,I=w+e.length+1,D=w+1;s.push(R,C,D),s.push(I,D,C)}this.setIndex(s),this.setAttribute("position",new rt(o,3)),this.setAttribute("uv",new rt(a,2)),this.setAttribute("normal",new rt(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new rm(e.points,e.segments,e.phiStart,e.phiLength)}}class P_ extends rm{constructor(e=1,t=1,r=4,i=8){const s=new Sp;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:r,radialSegments:i}}static fromJSON(e){return new P_(e.radius,e.length,e.capSegments,e.radialSegments)}}class I_ extends bt{constructor(e=1,t=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const s=[],o=[],a=[],l=[],c=new k,h=new _e;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let d=0,p=3;d<=t;d++,p+=3){const m=r+d/t*i;c.x=e*Math.cos(m),c.y=e*Math.sin(m),o.push(c.x,c.y,c.z),a.push(0,0,1),h.x=(o[p]/e+1)/2,h.y=(o[p+1]/e+1)/2,l.push(h.x,h.y)}for(let d=1;d<=t;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new rt(o,3)),this.setAttribute("normal",new rt(a,3)),this.setAttribute("uv",new rt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new I_(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class ef extends bt{constructor(e=1,t=1,r=1,i=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;i=Math.floor(i),s=Math.floor(s);const h=[],d=[],p=[],m=[];let v=0;const A=[],_=r/2;let g=0;x(),o===!1&&(e>0&&S(!0),t>0&&S(!1)),this.setIndex(h),this.setAttribute("position",new rt(d,3)),this.setAttribute("normal",new rt(p,3)),this.setAttribute("uv",new rt(m,2));function x(){const w=new k,R=new k;let C=0;const I=(t-e)/r;for(let D=0;D<=s;D++){const N=[],T=D/s,L=T*(t-e)+e;for(let H=0;H<=i;H++){const J=H/i,W=J*l+a,$=Math.sin(W),q=Math.cos(W);R.x=L*$,R.y=-T*r+_,R.z=L*q,d.push(R.x,R.y,R.z),w.set($,I,q).normalize(),p.push(w.x,w.y,w.z),m.push(J,1-T),N.push(v++)}A.push(N)}for(let D=0;D<i;D++)for(let N=0;N<s;N++){const T=A[N][D],L=A[N+1][D],H=A[N+1][D+1],J=A[N][D+1];h.push(T,L,J),h.push(L,H,J),C+=6}c.addGroup(g,C,0),g+=C}function S(w){const R=v,C=new _e,I=new k;let D=0;const N=w===!0?e:t,T=w===!0?1:-1;for(let H=1;H<=i;H++)d.push(0,_*T,0),p.push(0,T,0),m.push(.5,.5),v++;const L=v;for(let H=0;H<=i;H++){const W=H/i*l+a,$=Math.cos(W),q=Math.sin(W);I.x=N*q,I.y=_*T,I.z=N*$,d.push(I.x,I.y,I.z),p.push(0,T,0),C.x=$*.5+.5,C.y=q*.5*T+.5,m.push(C.x,C.y),v++}for(let H=0;H<i;H++){const J=R+H,W=L+H;w===!0?h.push(W,W+1,J):h.push(W+1,W,J),D+=3}c.addGroup(g,D,w===!0?1:2),g+=D}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ef(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class L_ extends ef{constructor(e=1,t=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new L_(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class pl extends bt{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const s=[],o=[];a(i),c(r),h(),this.setAttribute("position",new rt(s,3)),this.setAttribute("normal",new rt(s.slice(),3)),this.setAttribute("uv",new rt(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(x){const S=new k,w=new k,R=new k;for(let C=0;C<t.length;C+=3)m(t[C+0],S),m(t[C+1],w),m(t[C+2],R),l(S,w,R,x)}function l(x,S,w,R){const C=R+1,I=[];for(let D=0;D<=C;D++){I[D]=[];const N=x.clone().lerp(w,D/C),T=S.clone().lerp(w,D/C),L=C-D;for(let H=0;H<=L;H++)H===0&&D===C?I[D][H]=N:I[D][H]=N.clone().lerp(T,H/L)}for(let D=0;D<C;D++)for(let N=0;N<2*(C-D)-1;N++){const T=Math.floor(N/2);N%2===0?(p(I[D][T+1]),p(I[D+1][T]),p(I[D][T])):(p(I[D][T+1]),p(I[D+1][T+1]),p(I[D+1][T]))}}function c(x){const S=new k;for(let w=0;w<s.length;w+=3)S.x=s[w+0],S.y=s[w+1],S.z=s[w+2],S.normalize().multiplyScalar(x),s[w+0]=S.x,s[w+1]=S.y,s[w+2]=S.z}function h(){const x=new k;for(let S=0;S<s.length;S+=3){x.x=s[S+0],x.y=s[S+1],x.z=s[S+2];const w=_(x)/2/Math.PI+.5,R=g(x)/Math.PI+.5;o.push(w,1-R)}v(),d()}function d(){for(let x=0;x<o.length;x+=6){const S=o[x+0],w=o[x+2],R=o[x+4],C=Math.max(S,w,R),I=Math.min(S,w,R);C>.9&&I<.1&&(S<.2&&(o[x+0]+=1),w<.2&&(o[x+2]+=1),R<.2&&(o[x+4]+=1))}}function p(x){s.push(x.x,x.y,x.z)}function m(x,S){const w=x*3;S.x=e[w+0],S.y=e[w+1],S.z=e[w+2]}function v(){const x=new k,S=new k,w=new k,R=new k,C=new _e,I=new _e,D=new _e;for(let N=0,T=0;N<s.length;N+=9,T+=6){x.set(s[N+0],s[N+1],s[N+2]),S.set(s[N+3],s[N+4],s[N+5]),w.set(s[N+6],s[N+7],s[N+8]),C.set(o[T+0],o[T+1]),I.set(o[T+2],o[T+3]),D.set(o[T+4],o[T+5]),R.copy(x).add(S).add(w).divideScalar(3);const L=_(R);A(C,T+0,x,L),A(I,T+2,S,L),A(D,T+4,w,L)}}function A(x,S,w,R){R<0&&x.x===1&&(o[S]=x.x-1),w.x===0&&w.z===0&&(o[S]=R/2/Math.PI+.5)}function _(x){return Math.atan2(x.z,-x.x)}function g(x){return Math.atan2(-x.y,Math.sqrt(x.x*x.x+x.z*x.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new pl(e.vertices,e.indices,e.radius,e.details)}}class D_ extends pl{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new D_(e.radius,e.detail)}}const m0=new k,g0=new k,FA=new k,v0=new Fi;class Yk extends bt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(uc*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],h=["a","b","c"],d=new Array(3),p={},m=[];for(let v=0;v<l;v+=3){o?(c[0]=o.getX(v),c[1]=o.getX(v+1),c[2]=o.getX(v+2)):(c[0]=v,c[1]=v+1,c[2]=v+2);const{a:A,b:_,c:g}=v0;if(A.fromBufferAttribute(a,c[0]),_.fromBufferAttribute(a,c[1]),g.fromBufferAttribute(a,c[2]),v0.getNormal(FA),d[0]=`${Math.round(A.x*i)},${Math.round(A.y*i)},${Math.round(A.z*i)}`,d[1]=`${Math.round(_.x*i)},${Math.round(_.y*i)},${Math.round(_.z*i)}`,d[2]=`${Math.round(g.x*i)},${Math.round(g.y*i)},${Math.round(g.z*i)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let x=0;x<3;x++){const S=(x+1)%3,w=d[x],R=d[S],C=v0[h[x]],I=v0[h[S]],D=`${w}_${R}`,N=`${R}_${w}`;N in p&&p[N]?(FA.dot(p[N].normal)<=s&&(m.push(C.x,C.y,C.z),m.push(I.x,I.y,I.z)),p[N]=null):D in p||(p[D]={index0:c[x],index1:c[S],normal:FA.clone()})}}for(const v in p)if(p[v]){const{index0:A,index1:_}=p[v];m0.fromBufferAttribute(a,A),g0.fromBufferAttribute(a,_),m.push(m0.x,m0.y,m0.z),m.push(g0.x,g0.y,g0.z)}this.setAttribute("position",new rt(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class pc extends Sp{constructor(e){super(e),this.uuid=Vi(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new Sp().fromJSON(i))}return this}}const $te={triangulate:function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let s=qk(n,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,h,d,p,m;if(r&&(s=ene(n,e,s,t)),n.length>80*t){a=c=n[0],l=h=n[1];for(let v=t;v<i;v+=t)d=n[v],p=n[v+1],d<a&&(a=d),p<l&&(l=p),d>c&&(c=d),p>h&&(h=p);m=Math.max(c-a,h-l),m=m!==0?32767/m:0}return Ep(s,o,t,a,l,m,0),o}};function qk(n,e,t,r,i){let s,o;if(i===hne(n,e,t,r)>0)for(s=e;s<t;s+=r)o=j3(s,n[s],n[s+1],o);else for(s=t-r;s>=e;s-=r)o=j3(s,n[s],n[s+1],o);return o&&B_(o,o.next)&&(Mp(o),o=o.next),o}function Cc(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(B_(t,t.next)||bn(t.prev,t,t.next)===0)){if(Mp(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function Ep(n,e,t,r,i,s,o){if(!n)return;!o&&s&&sne(n,r,i,s);let a=n,l,c;for(;n.prev!==n.next;){if(l=n.prev,c=n.next,s?qte(n,r,i,s):Yte(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(c.i/t|0),Mp(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=Qte(Cc(n),e,t),Ep(n,e,t,r,i,s,2)):o===2&&Zte(n,e,t,r,i,s):Ep(Cc(n),e,t,r,i,s,1);break}}}function Yte(n){const e=n.prev,t=n,r=n.next;if(bn(e,t,r)>=0)return!1;const i=e.x,s=t.x,o=r.x,a=e.y,l=t.y,c=r.y,h=i<s?i<o?i:o:s<o?s:o,d=a<l?a<c?a:c:l<c?l:c,p=i>s?i>o?i:o:s>o?s:o,m=a>l?a>c?a:c:l>c?l:c;let v=r.next;for(;v!==e;){if(v.x>=h&&v.x<=p&&v.y>=d&&v.y<=m&&Ju(i,a,s,l,o,c,v.x,v.y)&&bn(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function qte(n,e,t,r){const i=n.prev,s=n,o=n.next;if(bn(i,s,o)>=0)return!1;const a=i.x,l=s.x,c=o.x,h=i.y,d=s.y,p=o.y,m=a<l?a<c?a:c:l<c?l:c,v=h<d?h<p?h:p:d<p?d:p,A=a>l?a>c?a:c:l>c?l:c,_=h>d?h>p?h:p:d>p?d:p,g=Nw(m,v,e,t,r),x=Nw(A,_,e,t,r);let S=n.prevZ,w=n.nextZ;for(;S&&S.z>=g&&w&&w.z<=x;){if(S.x>=m&&S.x<=A&&S.y>=v&&S.y<=_&&S!==i&&S!==o&&Ju(a,h,l,d,c,p,S.x,S.y)&&bn(S.prev,S,S.next)>=0||(S=S.prevZ,w.x>=m&&w.x<=A&&w.y>=v&&w.y<=_&&w!==i&&w!==o&&Ju(a,h,l,d,c,p,w.x,w.y)&&bn(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;S&&S.z>=g;){if(S.x>=m&&S.x<=A&&S.y>=v&&S.y<=_&&S!==i&&S!==o&&Ju(a,h,l,d,c,p,S.x,S.y)&&bn(S.prev,S,S.next)>=0)return!1;S=S.prevZ}for(;w&&w.z<=x;){if(w.x>=m&&w.x<=A&&w.y>=v&&w.y<=_&&w!==i&&w!==o&&Ju(a,h,l,d,c,p,w.x,w.y)&&bn(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function Qte(n,e,t){let r=n;do{const i=r.prev,s=r.next.next;!B_(i,s)&&Qk(i,r,r.next,s)&&wp(i,s)&&wp(s,i)&&(e.push(i.i/t|0),e.push(r.i/t|0),e.push(s.i/t|0),Mp(r),Mp(r.next),r=n=s),r=r.next}while(r!==n);return Cc(r)}function Zte(n,e,t,r,i,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&lne(o,a)){let l=Zk(o,a);o=Cc(o,o.next),l=Cc(l,l.next),Ep(o,e,t,r,i,s,0),Ep(l,e,t,r,i,s,0);return}a=a.next}o=o.next}while(o!==n)}function ene(n,e,t,r){const i=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:n.length,c=qk(n,a,l,r,!1),c===c.next&&(c.steiner=!0),i.push(ane(c));for(i.sort(tne),s=0;s<i.length;s++)t=nne(i[s],t);return t}function tne(n,e){return n.x-e.x}function nne(n,e){const t=rne(n,e);if(!t)return e;const r=Zk(t,n);return Cc(r,r.next),Cc(t,t.next)}function rne(n,e){let t=e,r=-1/0,i;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const p=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=s&&p>r&&(r=p,i=t.x<t.next.x?t:t.next,p===s))return i}t=t.next}while(t!==e);if(!i)return null;const a=i,l=i.x,c=i.y;let h=1/0,d;t=i;do s>=t.x&&t.x>=l&&s!==t.x&&Ju(o<c?s:r,o,l,c,o<c?r:s,o,t.x,t.y)&&(d=Math.abs(o-t.y)/(s-t.x),wp(t,n)&&(d<h||d===h&&(t.x>i.x||t.x===i.x&&ine(i,t)))&&(i=t,h=d)),t=t.next;while(t!==a);return i}function ine(n,e){return bn(n.prev,n,e.prev)<0&&bn(e.next,n,n.next)<0}function sne(n,e,t,r){let i=n;do i.z===0&&(i.z=Nw(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,one(i)}function one(n){let e,t,r,i,s,o,a,l,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,r=t,a=0,e=0;e<c&&(a++,r=r.nextZ,!!r);e++);for(l=c;a>0||l>0&&r;)a!==0&&(l===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:n=i,i.prevZ=s,s=i;t=r}s.nextZ=null,c*=2}while(o>1);return n}function Nw(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function ane(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Ju(n,e,t,r,i,s,o,a){return(i-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(r-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(i-o)*(r-a)}function lne(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!cne(n,e)&&(wp(n,e)&&wp(e,n)&&une(n,e)&&(bn(n.prev,n,e.prev)||bn(n,e.prev,e))||B_(n,e)&&bn(n.prev,n,n.next)>0&&bn(e.prev,e,e.next)>0)}function bn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function B_(n,e){return n.x===e.x&&n.y===e.y}function Qk(n,e,t,r){const i=_0(bn(n,e,t)),s=_0(bn(n,e,r)),o=_0(bn(t,r,n)),a=_0(bn(t,r,e));return!!(i!==s&&o!==a||i===0&&y0(n,t,e)||s===0&&y0(n,r,e)||o===0&&y0(t,n,r)||a===0&&y0(t,e,r))}function y0(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function _0(n){return n>0?1:n<0?-1:0}function cne(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&Qk(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function wp(n,e){return bn(n.prev,n,n.next)<0?bn(n,e,n.next)>=0&&bn(n,n.prev,e)>=0:bn(n,e,n.prev)<0||bn(n,n.next,e)<0}function une(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function Zk(n,e){const t=new Ow(n.i,n.x,n.y),r=new Ow(e.i,e.x,e.y),i=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function j3(n,e,t,r){const i=new Ow(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Mp(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Ow(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function hne(n,e,t,r){let i=0;for(let s=e,o=t-r;s<t;s+=r)i+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return i}class ho{static area(e){const t=e.length;let r=0;for(let i=t-1,s=0;s<t;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return ho.area(e)<0}static triangulateShape(e,t){const r=[],i=[],s=[];W3(e),X3(r,e);let o=e.length;t.forEach(W3);for(let l=0;l<t.length;l++)i.push(o),o+=t[l].length,X3(r,t[l]);const a=$te.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function W3(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function X3(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class N_ extends bt{constructor(e=new pc([new _e(.5,.5),new _e(-.5,.5),new _e(-.5,-.5),new _e(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new rt(i,3)),this.setAttribute("uv",new rt(s,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,h=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:1;let p=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,v=t.bevelSize!==void 0?t.bevelSize:m-.1,A=t.bevelOffset!==void 0?t.bevelOffset:0,_=t.bevelSegments!==void 0?t.bevelSegments:3;const g=t.extrudePath,x=t.UVGenerator!==void 0?t.UVGenerator:fne;let S,w=!1,R,C,I,D;g&&(S=g.getSpacedPoints(h),w=!0,p=!1,R=g.computeFrenetFrames(h,!1),C=new k,I=new k,D=new k),p||(_=0,m=0,v=0,A=0);const N=a.extractPoints(c);let T=N.shape;const L=N.holes;if(!ho.isClockWise(T)){T=T.reverse();for(let z=0,he=L.length;z<he;z++){const ie=L[z];ho.isClockWise(ie)&&(L[z]=ie.reverse())}}const J=ho.triangulateShape(T,L),W=T;for(let z=0,he=L.length;z<he;z++){const ie=L[z];T=T.concat(ie)}function $(z,he,ie){return he||console.error("THREE.ExtrudeGeometry: vec does not exist"),z.clone().addScaledVector(he,ie)}const q=T.length,ce=J.length;function O(z,he,ie){let ve,oe,Ce;const Ee=z.x-he.x,F=z.y-he.y,B=ie.x-z.x,K=ie.y-z.y,xe=Ee*Ee+F*F,Ae=Ee*K-F*B;if(Math.abs(Ae)>Number.EPSILON){const Se=Math.sqrt(xe),qe=Math.sqrt(B*B+K*K),Ne=he.x-F/Se,ke=he.y+Ee/Se,lt=ie.x-K/qe,At=ie.y+B/qe,Re=((lt-Ne)*K-(At-ke)*B)/(Ee*K-F*B);ve=Ne+Ee*Re-z.x,oe=ke+F*Re-z.y;const zt=ve*ve+oe*oe;if(zt<=2)return new _e(ve,oe);Ce=Math.sqrt(zt/2)}else{let Se=!1;Ee>Number.EPSILON?B>Number.EPSILON&&(Se=!0):Ee<-Number.EPSILON?B<-Number.EPSILON&&(Se=!0):Math.sign(F)===Math.sign(K)&&(Se=!0),Se?(ve=-F,oe=Ee,Ce=Math.sqrt(xe)):(ve=Ee,oe=F,Ce=Math.sqrt(xe/2))}return new _e(ve/Ce,oe/Ce)}const G=[];for(let z=0,he=W.length,ie=he-1,ve=z+1;z<he;z++,ie++,ve++)ie===he&&(ie=0),ve===he&&(ve=0),G[z]=O(W[z],W[ie],W[ve]);const X=[];let Q,te=G.concat();for(let z=0,he=L.length;z<he;z++){const ie=L[z];Q=[];for(let ve=0,oe=ie.length,Ce=oe-1,Ee=ve+1;ve<oe;ve++,Ce++,Ee++)Ce===oe&&(Ce=0),Ee===oe&&(Ee=0),Q[ve]=O(ie[ve],ie[Ce],ie[Ee]);X.push(Q),te=te.concat(Q)}for(let z=0;z<_;z++){const he=z/_,ie=m*Math.cos(he*Math.PI/2),ve=v*Math.sin(he*Math.PI/2)+A;for(let oe=0,Ce=W.length;oe<Ce;oe++){const Ee=$(W[oe],G[oe],ve);Ie(Ee.x,Ee.y,-ie)}for(let oe=0,Ce=L.length;oe<Ce;oe++){const Ee=L[oe];Q=X[oe];for(let F=0,B=Ee.length;F<B;F++){const K=$(Ee[F],Q[F],ve);Ie(K.x,K.y,-ie)}}}const be=v+A;for(let z=0;z<q;z++){const he=p?$(T[z],te[z],be):T[z];w?(I.copy(R.normals[0]).multiplyScalar(he.x),C.copy(R.binormals[0]).multiplyScalar(he.y),D.copy(S[0]).add(I).add(C),Ie(D.x,D.y,D.z)):Ie(he.x,he.y,0)}for(let z=1;z<=h;z++)for(let he=0;he<q;he++){const ie=p?$(T[he],te[he],be):T[he];w?(I.copy(R.normals[z]).multiplyScalar(ie.x),C.copy(R.binormals[z]).multiplyScalar(ie.y),D.copy(S[z]).add(I).add(C),Ie(D.x,D.y,D.z)):Ie(ie.x,ie.y,d/h*z)}for(let z=_-1;z>=0;z--){const he=z/_,ie=m*Math.cos(he*Math.PI/2),ve=v*Math.sin(he*Math.PI/2)+A;for(let oe=0,Ce=W.length;oe<Ce;oe++){const Ee=$(W[oe],G[oe],ve);Ie(Ee.x,Ee.y,d+ie)}for(let oe=0,Ce=L.length;oe<Ce;oe++){const Ee=L[oe];Q=X[oe];for(let F=0,B=Ee.length;F<B;F++){const K=$(Ee[F],Q[F],ve);w?Ie(K.x,K.y+S[h-1].y,S[h-1].x+ie):Ie(K.x,K.y,d+ie)}}}ee(),pe();function ee(){const z=i.length/3;if(p){let he=0,ie=q*he;for(let ve=0;ve<ce;ve++){const oe=J[ve];$e(oe[2]+ie,oe[1]+ie,oe[0]+ie)}he=h+_*2,ie=q*he;for(let ve=0;ve<ce;ve++){const oe=J[ve];$e(oe[0]+ie,oe[1]+ie,oe[2]+ie)}}else{for(let he=0;he<ce;he++){const ie=J[he];$e(ie[2],ie[1],ie[0])}for(let he=0;he<ce;he++){const ie=J[he];$e(ie[0]+q*h,ie[1]+q*h,ie[2]+q*h)}}r.addGroup(z,i.length/3-z,0)}function pe(){const z=i.length/3;let he=0;Me(W,he),he+=W.length;for(let ie=0,ve=L.length;ie<ve;ie++){const oe=L[ie];Me(oe,he),he+=oe.length}r.addGroup(z,i.length/3-z,1)}function Me(z,he){let ie=z.length;for(;--ie>=0;){const ve=ie;let oe=ie-1;oe<0&&(oe=z.length-1);for(let Ce=0,Ee=h+_*2;Ce<Ee;Ce++){const F=q*Ce,B=q*(Ce+1),K=he+ve+F,xe=he+oe+F,Ae=he+oe+B,Se=he+ve+B;je(K,xe,Ae,Se)}}}function Ie(z,he,ie){l.push(z),l.push(he),l.push(ie)}function $e(z,he,ie){ue(z),ue(he),ue(ie);const ve=i.length/3,oe=x.generateTopUV(r,i,ve-3,ve-2,ve-1);ae(oe[0]),ae(oe[1]),ae(oe[2])}function je(z,he,ie,ve){ue(z),ue(he),ue(ve),ue(he),ue(ie),ue(ve);const oe=i.length/3,Ce=x.generateSideWallUV(r,i,oe-6,oe-3,oe-2,oe-1);ae(Ce[0]),ae(Ce[1]),ae(Ce[3]),ae(Ce[1]),ae(Ce[2]),ae(Ce[3])}function ue(z){i.push(l[z*3+0]),i.push(l[z*3+1]),i.push(l[z*3+2])}function ae(z){s.push(z.x),s.push(z.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return dne(t,r,e)}static fromJSON(e,t){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new py[i.type]().fromJSON(i)),new N_(r,e.options)}}const fne={generateTopUV:function(n,e,t,r,i){const s=e[t*3],o=e[t*3+1],a=e[r*3],l=e[r*3+1],c=e[i*3],h=e[i*3+1];return[new _e(s,o),new _e(a,l),new _e(c,h)]},generateSideWallUV:function(n,e,t,r,i,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[r*3],h=e[r*3+1],d=e[r*3+2],p=e[i*3],m=e[i*3+1],v=e[i*3+2],A=e[s*3],_=e[s*3+1],g=e[s*3+2];return Math.abs(a-h)<Math.abs(o-c)?[new _e(o,1-l),new _e(c,1-d),new _e(p,1-v),new _e(A,1-g)]:[new _e(a,1-l),new _e(h,1-d),new _e(m,1-v),new _e(_,1-g)]}};function dne(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const s=n[r];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class O_ extends pl{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new O_(e.radius,e.detail)}}class im extends pl{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new im(e.radius,e.detail)}}class F_ extends bt{constructor(e=.5,t=1,r=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],c=[],h=[];let d=e;const p=(t-e)/i,m=new k,v=new _e;for(let A=0;A<=i;A++){for(let _=0;_<=r;_++){const g=s+_/r*o;m.x=d*Math.cos(g),m.y=d*Math.sin(g),l.push(m.x,m.y,m.z),c.push(0,0,1),v.x=(m.x/t+1)/2,v.y=(m.y/t+1)/2,h.push(v.x,v.y)}d+=p}for(let A=0;A<i;A++){const _=A*(r+1);for(let g=0;g<r;g++){const x=g+_,S=x,w=x+r+1,R=x+r+2,C=x+1;a.push(S,w,C),a.push(w,R,C)}}this.setIndex(a),this.setAttribute("position",new rt(l,3)),this.setAttribute("normal",new rt(c,3)),this.setAttribute("uv",new rt(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new F_(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class k_ extends bt{constructor(e=new pc([new _e(0,.5),new _e(-.5,-.5),new _e(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let h=0;h<e.length;h++)c(e[h]),this.addGroup(a,l,h),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new rt(i,3)),this.setAttribute("normal",new rt(s,3)),this.setAttribute("uv",new rt(o,2));function c(h){const d=i.length/3,p=h.extractPoints(t);let m=p.shape;const v=p.holes;ho.isClockWise(m)===!1&&(m=m.reverse());for(let _=0,g=v.length;_<g;_++){const x=v[_];ho.isClockWise(x)===!0&&(v[_]=x.reverse())}const A=ho.triangulateShape(m,v);for(let _=0,g=v.length;_<g;_++){const x=v[_];m=m.concat(x)}for(let _=0,g=m.length;_<g;_++){const x=m[_];i.push(x.x,x.y,0),s.push(0,0,1),o.push(x.x,x.y)}for(let _=0,g=A.length;_<g;_++){const x=A[_],S=x[0]+d,w=x[1]+d,R=x[2]+d;r.push(S,w,R),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return pne(t,e)}static fromJSON(e,t){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=t[e.shapes[i]];r.push(o)}return new k_(r,e.curveSegments)}}function pne(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class sm extends bt{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let c=0;const h=[],d=new k,p=new k,m=[],v=[],A=[],_=[];for(let g=0;g<=r;g++){const x=[],S=g/r;let w=0;g===0&&o===0?w=.5/t:g===r&&l===Math.PI&&(w=-.5/t);for(let R=0;R<=t;R++){const C=R/t;d.x=-e*Math.cos(i+C*s)*Math.sin(o+S*a),d.y=e*Math.cos(o+S*a),d.z=e*Math.sin(i+C*s)*Math.sin(o+S*a),v.push(d.x,d.y,d.z),p.copy(d).normalize(),A.push(p.x,p.y,p.z),_.push(C+w,1-S),x.push(c++)}h.push(x)}for(let g=0;g<r;g++)for(let x=0;x<t;x++){const S=h[g][x+1],w=h[g][x],R=h[g+1][x],C=h[g+1][x+1];(g!==0||o>0)&&m.push(S,w,C),(g!==r-1||l<Math.PI)&&m.push(w,R,C)}this.setIndex(m),this.setAttribute("position",new rt(v,3)),this.setAttribute("normal",new rt(A,3)),this.setAttribute("uv",new rt(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sm(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class U_ extends pl{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new U_(e.radius,e.detail)}}class z_ extends bt{constructor(e=1,t=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],c=[],h=new k,d=new k,p=new k;for(let m=0;m<=r;m++)for(let v=0;v<=i;v++){const A=v/i*s,_=m/r*Math.PI*2;d.x=(e+t*Math.cos(_))*Math.cos(A),d.y=(e+t*Math.cos(_))*Math.sin(A),d.z=t*Math.sin(_),a.push(d.x,d.y,d.z),h.x=e*Math.cos(A),h.y=e*Math.sin(A),p.subVectors(d,h).normalize(),l.push(p.x,p.y,p.z),c.push(v/i),c.push(m/r)}for(let m=1;m<=r;m++)for(let v=1;v<=i;v++){const A=(i+1)*m+v-1,_=(i+1)*(m-1)+v-1,g=(i+1)*(m-1)+v,x=(i+1)*m+v;o.push(A,_,x),o.push(_,g,x)}this.setIndex(o),this.setAttribute("position",new rt(a,3)),this.setAttribute("normal",new rt(l,3)),this.setAttribute("uv",new rt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new z_(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class H_ extends bt{constructor(e=1,t=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],c=[],h=[],d=new k,p=new k,m=new k,v=new k,A=new k,_=new k,g=new k;for(let S=0;S<=r;++S){const w=S/r*s*Math.PI*2;x(w,s,o,e,m),x(w+.01,s,o,e,v),_.subVectors(v,m),g.addVectors(v,m),A.crossVectors(_,g),g.crossVectors(A,_),A.normalize(),g.normalize();for(let R=0;R<=i;++R){const C=R/i*Math.PI*2,I=-t*Math.cos(C),D=t*Math.sin(C);d.x=m.x+(I*g.x+D*A.x),d.y=m.y+(I*g.y+D*A.y),d.z=m.z+(I*g.z+D*A.z),l.push(d.x,d.y,d.z),p.subVectors(d,m).normalize(),c.push(p.x,p.y,p.z),h.push(S/r),h.push(R/i)}}for(let S=1;S<=r;S++)for(let w=1;w<=i;w++){const R=(i+1)*(S-1)+(w-1),C=(i+1)*S+(w-1),I=(i+1)*S+w,D=(i+1)*(S-1)+w;a.push(R,C,D),a.push(C,I,D)}this.setIndex(a),this.setAttribute("position",new rt(l,3)),this.setAttribute("normal",new rt(c,3)),this.setAttribute("uv",new rt(h,2));function x(S,w,R,C,I){const D=Math.cos(S),N=Math.sin(S),T=R/w*S,L=Math.cos(T);I.x=C*(2+L)*.5*D,I.y=C*(2+L)*N*.5,I.z=C*Math.sin(T)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new H_(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class V_ extends bt{constructor(e=new IC(new k(-1,-1,0),new k(-1,1,0),new k(1,1,0)),t=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new k,l=new k,c=new _e;let h=new k;const d=[],p=[],m=[],v=[];A(),this.setIndex(v),this.setAttribute("position",new rt(d,3)),this.setAttribute("normal",new rt(p,3)),this.setAttribute("uv",new rt(m,2));function A(){for(let S=0;S<t;S++)_(S);_(s===!1?t:0),x(),g()}function _(S){h=e.getPointAt(S/t,h);const w=o.normals[S],R=o.binormals[S];for(let C=0;C<=i;C++){const I=C/i*Math.PI*2,D=Math.sin(I),N=-Math.cos(I);l.x=N*w.x+D*R.x,l.y=N*w.y+D*R.y,l.z=N*w.z+D*R.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=h.x+r*l.x,a.y=h.y+r*l.y,a.z=h.z+r*l.z,d.push(a.x,a.y,a.z)}}function g(){for(let S=1;S<=t;S++)for(let w=1;w<=i;w++){const R=(i+1)*(S-1)+(w-1),C=(i+1)*S+(w-1),I=(i+1)*S+w,D=(i+1)*(S-1)+w;v.push(R,C,D),v.push(C,I,D)}}function x(){for(let S=0;S<=t;S++)for(let w=0;w<=i;w++)c.x=S/t,c.y=w/i,m.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new V_(new py[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class eU extends bt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new k,s=new k;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,h=l.length;c<h;++c){const d=l[c],p=d.start,m=d.count;for(let v=p,A=p+m;v<A;v+=3)for(let _=0;_<3;_++){const g=a.getX(v+_),x=a.getX(v+(_+1)%3);i.fromBufferAttribute(o,g),s.fromBufferAttribute(o,x),J3(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const h=3*a+c,d=3*a+(c+1)%3;i.fromBufferAttribute(o,h),s.fromBufferAttribute(o,d),J3(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new rt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function J3(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var K3=Object.freeze({__proto__:null,BoxGeometry:Bc,CapsuleGeometry:P_,CircleGeometry:I_,ConeGeometry:L_,CylinderGeometry:ef,DodecahedronGeometry:D_,EdgesGeometry:Yk,ExtrudeGeometry:N_,IcosahedronGeometry:O_,LatheGeometry:rm,OctahedronGeometry:im,PlaneGeometry:Qh,PolyhedronGeometry:pl,RingGeometry:F_,ShapeGeometry:k_,SphereGeometry:sm,TetrahedronGeometry:U_,TorusGeometry:z_,TorusKnotGeometry:H_,TubeGeometry:V_,WireframeGeometry:eU});class tU extends er{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Ue(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class nU extends Us{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class om extends er{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ue(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ue(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=dl,this.normalScale=new _e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class xo extends om{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new _e(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Fn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ue(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ue(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ue(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class rU extends er{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ue(16777215),this.specular=new Ue(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ue(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=dl,this.normalScale=new _e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=$p,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class iU extends er{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ue(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ue(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=dl,this.normalScale=new _e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class sU extends er{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=dl,this.normalScale=new _e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class oU extends er{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ue(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ue(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=dl,this.normalScale=new _e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=$p,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class aU extends er{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ue(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=dl,this.normalScale=new _e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class lU extends Zr{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function nc(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function cU(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function uU(n){function e(i,s){return n[i]-n[s]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function Fw(n,e,t){const r=n.length,i=new n.constructor(r);for(let s=0,o=0;o!==r;++s){const a=t[s]*e;for(let l=0;l!==e;++l)i[o++]=n[a+l]}return i}function DC(n,e,t,r){let i=1,s=n[0];for(;s!==void 0&&s[r]===void 0;)s=n[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),t.push(o)),s=n[i++];while(s!==void 0)}function mne(n,e,t,r,i=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],h=c.getValueSize(),d=[],p=[];for(let m=0;m<c.times.length;++m){const v=c.times[m]*i;if(!(v<t||v>=r)){d.push(c.times[m]);for(let A=0;A<h;++A)p.push(c.values[m*h+A])}}d.length!==0&&(c.times=nc(d,c.times.constructor),c.values=nc(p,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function gne(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===l});if(c===void 0)continue;let h=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=d/3);let p=0;const m=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);const v=a.times.length-1;let A;if(s<=a.times[0]){const g=h,x=d-h;A=a.values.slice(g,x)}else if(s>=a.times[v]){const g=v*d+h,x=g+d-h;A=a.values.slice(g,x)}else{const g=a.createInterpolant(),x=h,S=d-h;g.evaluate(s),A=g.resultBuffer.slice(x,S)}l==="quaternion"&&new vr().fromArray(A).normalize().conjugate().toArray(A);const _=c.times.length;for(let g=0;g<_;++g){const x=g*m+p;if(l==="quaternion")vr.multiplyQuaternionsFlat(c.values,x,A,0,c.values,x);else{const S=m-p*2;for(let w=0;w<S;++w)c.values[x+w]-=A[w]}}}return n.blendMode=oC,n}const vne={convertArray:nc,isTypedArray:cU,getKeyframeOrder:uU,sortedArray:Fw,flattenJSON:DC,subclip:mne,makeClipAdditive:gne};class tf{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],s=t[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=t[++r],e<i)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=t[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<t[a]?o=a:r=a+1}if(i=t[r],s=t[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=r[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class hU extends tf{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Zl,endingEnd:Zl}}intervalChanged_(e,t,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case ec:s=e,a=2*t-r;break;case mp:s=i.length-2,a=t+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case ec:o=e,l=2*r-t;break;case mp:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=t}const c=(r-t)*.5,h=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-r),this._offsetPrev=s*h,this._offsetNext=o*h}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,h=this._offsetPrev,d=this._offsetNext,p=this._weightPrev,m=this._weightNext,v=(r-t)/(i-t),A=v*v,_=A*v,g=-p*_+2*p*A-p*v,x=(1+p)*_+(-1.5-2*p)*A+(-.5+p)*v+1,S=(-1-m)*_+(1.5+m)*A+.5*v,w=m*_-m*A;for(let R=0;R!==a;++R)s[R]=g*o[h+R]+x*o[c+R]+S*o[l+R]+w*o[d+R];return s}}class BC extends tf{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,h=(r-t)/(i-t),d=1-h;for(let p=0;p!==a;++p)s[p]=o[c+p]*d+o[l+p]*h;return s}}class fU extends tf{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Vs{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=nc(t,this.TimeBufferType),this.values=nc(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:nc(e.times,Array),values:nc(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new fU(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new BC(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new hU(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Ih:t=this.InterpolantFactoryMethodDiscrete;break;case Tc:t=this.InterpolantFactoryMethodLinear;break;case ev:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ih;case this.InterpolantFactoryMethodLinear:return Tc;case this.InterpolantFactoryMethodSmooth:return ev}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=r.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&cU(i))for(let a=0,l=i.length;a!==l;++a){const c=i[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===ev,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],h=e[a+1];if(c!==h&&(a!==1||c!==e[0]))if(i)l=!0;else{const d=a*r,p=d-r,m=d+r;for(let v=0;v!==r;++v){const A=t[d+v];if(A!==t[p+v]||A!==t[m+v]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*r,p=o*r;for(let m=0;m!==r;++m)t[p+m]=t[d+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,c=0;c!==r;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*r)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Vs.prototype.TimeBufferType=Float32Array;Vs.prototype.ValueBufferType=Float32Array;Vs.prototype.DefaultInterpolation=Tc;class Nc extends Vs{}Nc.prototype.ValueTypeName="bool";Nc.prototype.ValueBufferType=Array;Nc.prototype.DefaultInterpolation=Ih;Nc.prototype.InterpolantFactoryMethodLinear=void 0;Nc.prototype.InterpolantFactoryMethodSmooth=void 0;class NC extends Vs{}NC.prototype.ValueTypeName="color";class Nh extends Vs{}Nh.prototype.ValueTypeName="number";class dU extends tf{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-t)/(i-t);let c=e*a;for(let h=c+a;c!==h;c+=4)vr.slerpFlat(s,0,o,c-a,o,c,l);return s}}class al extends Vs{InterpolantFactoryMethodLinear(e){return new dU(this.times,this.values,this.getValueSize(),e)}}al.prototype.ValueTypeName="quaternion";al.prototype.DefaultInterpolation=Tc;al.prototype.InterpolantFactoryMethodSmooth=void 0;class Oc extends Vs{}Oc.prototype.ValueTypeName="string";Oc.prototype.ValueBufferType=Array;Oc.prototype.DefaultInterpolation=Ih;Oc.prototype.InterpolantFactoryMethodLinear=void 0;Oc.prototype.InterpolantFactoryMethodSmooth=void 0;class Oh extends Vs{}Oh.prototype.ValueTypeName="vector";class Fh{constructor(e,t=-1,r,i=x_){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=Vi(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)t.push(_ne(r[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)t.push(Vs.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const h=uU(l);l=Fw(l,1,h),c=Fw(c,1,h),!i&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new Nh(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],h=c.name.match(s);if(h&&h.length>1){const d=h[1];let p=i[d];p||(i[d]=p=[]),p.push(c)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(d,p,m,v,A){if(m.length!==0){const _=[],g=[];DC(m,_,g,v),_.length!==0&&A.push(new d(p,_,g))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let d=0;d<c.length;d++){const p=c[d].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const m={};let v;for(v=0;v<p.length;v++)if(p[v].morphTargets)for(let A=0;A<p[v].morphTargets.length;A++)m[p[v].morphTargets[A]]=-1;for(const A in m){const _=[],g=[];for(let x=0;x!==p[v].morphTargets.length;++x){const S=p[v];_.push(S.time),g.push(S.morphTarget===A?1:0)}i.push(new Nh(".morphTargetInfluence["+A+"]",_,g))}l=m.length*o}else{const m=".bones["+t[d].name+"]";r(Oh,m+".position",p,"pos",i),r(al,m+".quaternion",p,"rot",i),r(Oh,m+".scale",p,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function yne(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Nh;case"vector":case"vector2":case"vector3":case"vector4":return Oh;case"color":return NC;case"quaternion":return al;case"bool":case"boolean":return Nc;case"string":return Oc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function _ne(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=yne(n.type);if(n.times===void 0){const t=[],r=[];DC(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const jo={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class OC{constructor(e,t,r){const i=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(h){a++,s===!1&&i.onStart!==void 0&&i.onStart(h,o,a),s=!0},this.itemEnd=function(h){o++,i.onProgress!==void 0&&i.onProgress(h,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(h){i.onError!==void 0&&i.onError(h)},this.resolveURL=function(h){return l?l(h):h},this.setURLModifier=function(h){return l=h,this},this.addHandler=function(h,d){return c.push(h,d),this},this.removeHandler=function(h){const d=c.indexOf(h);return d!==-1&&c.splice(d,2),this},this.getHandler=function(h){for(let d=0,p=c.length;d<p;d+=2){const m=c[d],v=c[d+1];if(m.global&&(m.lastIndex=0),m.test(h))return v}return null}}}const Ku=new OC;class ei{constructor(e){this.manager=e!==void 0?e:Ku,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}ei.DEFAULT_MATERIAL_NAME="__DEFAULT";const Bo={};class xne extends Error{constructor(e,t){super(e),this.response=t}}class Ji extends ei{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=jo.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Bo[e]!==void 0){Bo[e].push({onLoad:t,onProgress:r,onError:i});return}Bo[e]=[],Bo[e].push({onLoad:t,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const h=Bo[e],d=c.body.getReader(),p=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),m=p?parseInt(p):0,v=m!==0;let A=0;const _=new ReadableStream({start(g){x();function x(){d.read().then(({done:S,value:w})=>{if(S)g.close();else{A+=w.byteLength;const R=new ProgressEvent("progress",{lengthComputable:v,loaded:A,total:m});for(let C=0,I=h.length;C<I;C++){const D=h[C];D.onProgress&&D.onProgress(R)}g.enqueue(w),x()}})}}});return new Response(_)}else throw new xne(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(h=>new DOMParser().parseFromString(h,a));case"json":return c.json();default:if(a===void 0)return c.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),p=d&&d[1]?d[1].toLowerCase():void 0,m=new TextDecoder(p);return c.arrayBuffer().then(v=>m.decode(v))}}}).then(c=>{jo.add(e,c);const h=Bo[e];delete Bo[e];for(let d=0,p=h.length;d<p;d++){const m=h[d];m.onLoad&&m.onLoad(c)}}).catch(c=>{const h=Bo[e];if(h===void 0)throw this.manager.itemError(e),c;delete Bo[e];for(let d=0,p=h.length;d<p;d++){const m=h[d];m.onError&&m.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Ane extends ei{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Ji(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=Fh.parse(e[r]);t.push(i)}return t}}class Sne extends ei{constructor(e){super(e)}load(e,t,r,i){const s=this,o=[],a=new b_,l=new Ji(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function h(d){l.load(e[d],function(p){const m=s.parse(p,!0);o[d]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},c+=1,c===6&&(m.mipmapCount===1&&(a.minFilter=gn),a.image=o,a.format=m.format,a.needsUpdate=!0,t&&t(a))},r,i)}if(Array.isArray(e))for(let d=0,p=e.length;d<p;++d)h(d);else l.load(e,function(d){const p=s.parse(d,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let v=0;v<m;v++){o[v]={mipmaps:[]};for(let A=0;A<p.mipmapCount;A++)o[v].mipmaps.push(p.mipmaps[v*p.mipmapCount+A]),o[v].format=p.format,o[v].width=p.width,o[v].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=gn),a.format=p.format,a.needsUpdate=!0,t&&t(a)},r,i);return a}}class Tp extends ei{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=jo.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=Ap("img");function l(){h(),jo.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(d){h(),i&&i(d),s.manager.itemError(e),s.manager.itemEnd(e)}function h(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class Ene extends ei{constructor(e){super(e)}load(e,t,r,i){const s=new Zp;s.colorSpace=rr;const o=new Tp(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(h){s.images[c]=h,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let c=0;c<e.length;++c)l(c);return s}}class wne extends ei{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new dc,a=new Ji(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let c;try{c=s.parse(l)}catch(h){if(i!==void 0)i(h);else{console.error(h);return}}c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:Rr,o.wrapT=c.wrapT!==void 0?c.wrapT:Rr,o.magFilter=c.magFilter!==void 0?c.magFilter:gn,o.minFilter=c.minFilter!==void 0?c.minFilter:gn,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0?o.colorSpace=c.colorSpace:c.encoding!==void 0&&(o.encoding=c.encoding),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=gs),c.mipmapCount===1&&(o.minFilter=gn),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c)},r,i),o}}class pU extends ei{constructor(e){super(e)}load(e,t,r,i){const s=new xn,o=new Tp(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},r,i),s}}class ml extends Xt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Ue(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class mU extends ml{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Xt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Ue(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const kA=new ht,$3=new k,Y3=new k;class FC{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new _e(512,512),this.map=null,this.mapPass=null,this.matrix=new ht,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new em,this._frameExtents=new _e(1,1),this._viewportCount=1,this._viewports=[new sn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;$3.setFromMatrixPosition(e.matrixWorld),t.position.copy($3),Y3.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Y3),t.updateMatrixWorld(),kA.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(kA),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(kA)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Mne extends FC{constructor(){super(new yn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=Lh*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class kC extends ml{constructor(e,t,r=0,i=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Xt.DEFAULT_UP),this.updateMatrix(),this.target=new Xt,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new Mne}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const q3=new ht,Wf=new k,UA=new k;class Tne extends FC{constructor(){super(new yn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new _e(4,2),this._viewportCount=6,this._viewports=[new sn(2,1,1,1),new sn(0,1,1,1),new sn(3,1,1,1),new sn(1,1,1,1),new sn(3,0,1,1),new sn(1,0,1,1)],this._cubeDirections=[new k(1,0,0),new k(-1,0,0),new k(0,0,1),new k(0,0,-1),new k(0,1,0),new k(0,-1,0)],this._cubeUps=[new k(0,1,0),new k(0,1,0),new k(0,1,0),new k(0,1,0),new k(0,0,1),new k(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),Wf.setFromMatrixPosition(e.matrixWorld),r.position.copy(Wf),UA.copy(r.position),UA.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(UA),r.updateMatrixWorld(),i.makeTranslation(-Wf.x,-Wf.y,-Wf.z),q3.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(q3)}}class UC extends ml{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new Tne}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Cne extends FC{constructor(){super(new vs(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class zC extends ml{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Xt.DEFAULT_UP),this.updateMatrix(),this.target=new Xt,this.shadow=new Cne}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class gU extends ml{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class vU extends ml{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class yU{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new k)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*r),t.addScaledVector(o[4],1.092548*(r*i)),t.addScaledVector(o[5],1.092548*(i*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(r*s)),t.addScaledVector(o[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*r),t.addScaledVector(o[4],2*.429043*r*i),t.addScaledVector(o[5],2*.429043*i*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*r*s),t.addScaledVector(o[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*r*s,t[8]=.546274*(r*r-i*i)}}class _U extends ml{constructor(e=new yU,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class G_ extends ei{constructor(e){super(e),this.textures={}}load(e,t,r,i){const s=this,o=new Ji(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=G_.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new Ue().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new Ue().setHex(o.value);break;case"v2":i.uniforms[s].value=new _e().fromArray(o.value);break;case"v3":i.uniforms[s].value=new k().fromArray(o.value);break;case"v4":i.uniforms[s].value=new sn().fromArray(o.value);break;case"m3":i.uniforms[s].value=new Nt().fromArray(o.value);break;case"m4":i.uniforms[s].value=new ht().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new _e().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new _e().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:tU,SpriteMaterial:SC,RawShaderMaterial:nU,ShaderMaterial:Us,PointsMaterial:C_,MeshPhysicalMaterial:xo,MeshStandardMaterial:om,MeshPhongMaterial:rU,MeshToonMaterial:iU,MeshNormalMaterial:sU,MeshLambertMaterial:oU,MeshDepthMaterial:_C,MeshDistanceMaterial:xC,MeshBasicMaterial:zi,MeshMatcapMaterial:aU,LineDashedMaterial:lU,LineBasicMaterial:Zr,Material:er};return new t[e]}}class fo{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class xU extends bt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class AU extends ei{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Ji(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(m,v){if(t[v]!==void 0)return t[v];const _=m.interleavedBuffers[v],g=s(m,_.buffer),x=ju(_.type,g),S=new tm(x,_.stride);return S.uuid=_.uuid,t[v]=S,S}function s(m,v){if(r[v]!==void 0)return r[v];const _=m.arrayBuffers[v],g=new Uint32Array(_).buffer;return r[v]=g,g}const o=e.isInstancedBufferGeometry?new xU:new bt,a=e.data.index;if(a!==void 0){const m=ju(a.type,a.array);o.setIndex(new Jt(m,1))}const l=e.data.attributes;for(const m in l){const v=l[m];let A;if(v.isInterleavedBufferAttribute){const _=i(e.data,v.data);A=new ol(_,v.itemSize,v.offset,v.normalized)}else{const _=ju(v.type,v.array),g=v.isInstancedBufferAttribute?Bh:Jt;A=new g(_,v.itemSize,v.normalized)}v.name!==void 0&&(A.name=v.name),v.usage!==void 0&&A.setUsage(v.usage),o.setAttribute(m,A)}const c=e.data.morphAttributes;if(c)for(const m in c){const v=c[m],A=[];for(let _=0,g=v.length;_<g;_++){const x=v[_];let S;if(x.isInterleavedBufferAttribute){const w=i(e.data,x.data);S=new ol(w,x.itemSize,x.offset,x.normalized)}else{const w=ju(x.type,x.array);S=new Jt(w,x.itemSize,x.normalized)}x.name!==void 0&&(S.name=x.name),A.push(S)}o.morphAttributes[m]=A}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let m=0,v=d.length;m!==v;++m){const A=d[m];o.addGroup(A.start,A.count,A.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const m=new k;p.center!==void 0&&m.fromArray(p.center),o.boundingSphere=new Dr(m,p.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class bne extends ei{constructor(e){super(e)}load(e,t,r,i){const s=this,o=this.path===""?fo.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Ji(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(d){i!==void 0&&i(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const h=c.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?fo.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new Ji(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,r),h=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,h),t!==void 0){let d=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){d=!0;break}d===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new pc().fromJSON(e[r]);t[s.uuid]=s}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new nm().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new AU;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in K3?a=K3[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const s=new G_;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=Fh.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const r=this,i={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:r.resourcePath+c;return o(h)}else return l.data?{data:ju(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new OC(t);s=new Tp(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,h=e.length;c<h;c++){const d=e[c],p=d.url;if(Array.isArray(p)){const m=[];for(let v=0,A=p.length;v<A;v++){const _=p[v],g=a(_);g!==null&&(g instanceof HTMLImageElement?m.push(g):m.push(new dc(g.data,g.width,g.height)))}i[d.uuid]=new tc(m)}else{const m=a(d.url);i[d.uuid]=new tc(m)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:ju(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new Tp(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const h=[];for(let d=0,p=c.length;d<p;d++){const m=c[d],v=await s(m);v!==null&&(v instanceof HTMLImageElement?h.push(v):h.push(new dc(v.data,v.width,v.height)))}r[l.uuid]=new tc(h)}else{const h=await s(l.url);r[l.uuid]=new tc(h)}}}return r}parseTextures(e,t){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],c=l.data;let h;Array.isArray(c)?(h=new Zp,c.length===6&&(h.needsUpdate=!0)):(c&&c.data?h=new dc:h=new xn,c&&(h.needsUpdate=!0)),h.source=l,h.uuid=a.uuid,a.name!==void 0&&(h.name=a.name),a.mapping!==void 0&&(h.mapping=r(a.mapping,Rne)),a.channel!==void 0&&(h.channel=a.channel),a.offset!==void 0&&h.offset.fromArray(a.offset),a.repeat!==void 0&&h.repeat.fromArray(a.repeat),a.center!==void 0&&h.center.fromArray(a.center),a.rotation!==void 0&&(h.rotation=a.rotation),a.wrap!==void 0&&(h.wrapS=r(a.wrap[0],Q3),h.wrapT=r(a.wrap[1],Q3)),a.format!==void 0&&(h.format=a.format),a.internalFormat!==void 0&&(h.internalFormat=a.internalFormat),a.type!==void 0&&(h.type=a.type),a.colorSpace!==void 0&&(h.colorSpace=a.colorSpace),a.encoding!==void 0&&(h.encoding=a.encoding),a.minFilter!==void 0&&(h.minFilter=r(a.minFilter,Z3)),a.magFilter!==void 0&&(h.magFilter=r(a.magFilter,Z3)),a.anisotropy!==void 0&&(h.anisotropy=a.anisotropy),a.flipY!==void 0&&(h.flipY=a.flipY),a.generateMipmaps!==void 0&&(h.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(h.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(h.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(h.compareFunction=a.compareFunction),a.userData!==void 0&&(h.userData=a.userData),i[a.uuid]=h}return i}parseObject(e,t,r,i,s){let o;function a(p){return t[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),t[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const m=[];for(let v=0,A=p.length;v<A;v++){const _=p[v];r[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",_),m.push(r[_])}return m}return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),r[p]}}function c(p){return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),i[p]}let h,d;switch(e.type){case"Scene":o=new dy,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Ue(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new M_(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new w_(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new yn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new vs(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new gU(e.color,e.intensity);break;case"DirectionalLight":o=new zC(e.color,e.intensity);break;case"PointLight":o=new UC(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new vU(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new kC(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new mU(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new _U().fromJSON(e);break;case"SkinnedMesh":h=a(e.geometry),d=l(e.material),o=new EC(h,d),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":h=a(e.geometry),d=l(e.material),o=new jn(h,d);break;case"InstancedMesh":h=a(e.geometry),d=l(e.material);const p=e.count,m=e.instanceMatrix,v=e.instanceColor;o=new wC(h,d,p),o.instanceMatrix=new Bh(new Float32Array(m.array),16),v!==void 0&&(o.instanceColor=new Bh(new Float32Array(v.array),v.itemSize));break;case"BatchedMesh":h=a(e.geometry),d=l(e.material),o=new jk(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,d),o.geometry=h,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(A=>{const _=new Yr;_.min.fromArray(A.boxMin),_.max.fromArray(A.boxMax);const g=new Dr;return g.radius=A.sphereRadius,g.center.fromArray(A.sphereCenter),{boxInitialized:A.boxInitialized,box:_,sphereInitialized:A.sphereInitialized,sphere:g}}),o._maxGeometryCount=e.maxGeometryCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=c(e.matricesTexture.uuid);break;case"LOD":o=new Gk;break;case"Line":o=new na(a(e.geometry),l(e.material));break;case"LineLoop":o=new MC(a(e.geometry),l(e.material));break;case"LineSegments":o=new zs(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new TC(a(e.geometry),l(e.material));break;case"Sprite":o=new Vk(l(e.material));break;case"Group":o=new Go;break;case"Bone":o=new T_;break;default:o=new Xt}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let m=0;m<p.length;m++)o.add(this.parseObject(p[m],t,r,i,s))}if(e.animations!==void 0){const p=e.animations;for(let m=0;m<p.length;m++){const v=p[m];o.animations.push(s[v])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let m=0;m<p.length;m++){const v=p[m],A=o.getObjectByProperty("uuid",v.object);A!==void 0&&o.addLevel(A,v.distance,v.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const Rne={UVMapping:y_,CubeReflectionMapping:ta,CubeRefractionMapping:il,EquirectangularReflectionMapping:fp,EquirectangularRefractionMapping:dp,CubeUVReflectionMapping:qh},Q3={RepeatWrapping:sl,ClampToEdgeWrapping:Rr,MirroredRepeatWrapping:Rh},Z3={NearestFilter:Nn,NearestMipmapNearestFilter:pp,NearestMipmapLinearFilter:Pa,LinearFilter:gn,LinearMipmapNearestFilter:ch,LinearMipmapLinearFilter:gs};class SU extends ei{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=jo.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(c=>{t&&t(c),s.manager.itemEnd(e)}).catch(c=>{i&&i(c)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return jo.add(e,c),t&&t(c),s.manager.itemEnd(e),c}).catch(function(c){i&&i(c),jo.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});jo.add(e,l),s.manager.itemStart(e)}}let x0;class HC{static getContext(){return x0===void 0&&(x0=new(window.AudioContext||window.webkitAudioContext)),x0}static setContext(e){x0=e}}class Pne extends ei{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Ji(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);HC.getContext().decodeAudioData(c,function(d){t(d)}).catch(a)}catch(c){a(c)}},r,i);function a(l){i?i(l):console.error(l),s.manager.itemError(e)}}}const eL=new ht,tL=new ht,Pl=new ht;class Ine{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new yn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new yn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Pl.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,o=t.near*Math.tan(uc*t.fov*.5)/t.zoom;let a,l;tL.elements[12]=-i,eL.elements[12]=i,a=-o*t.aspect+s,l=o*t.aspect+s,Pl.elements[0]=2*t.near/(l-a),Pl.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Pl),a=-o*t.aspect-s,l=o*t.aspect-s,Pl.elements[0]=2*t.near/(l-a),Pl.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Pl)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(tL),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(eL)}}class VC{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=nL(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=nL();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function nL(){return(typeof performance>"u"?Date:performance).now()}const Il=new k,rL=new vr,Lne=new k,Ll=new k;class Dne extends Xt{constructor(){super(),this.type="AudioListener",this.context=HC.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new VC}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Il,rL,Lne),Ll.set(0,0,-1).applyQuaternion(rL),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Il.x,i),t.positionY.linearRampToValueAtTime(Il.y,i),t.positionZ.linearRampToValueAtTime(Il.z,i),t.forwardX.linearRampToValueAtTime(Ll.x,i),t.forwardY.linearRampToValueAtTime(Ll.y,i),t.forwardZ.linearRampToValueAtTime(Ll.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition(Il.x,Il.y,Il.z),t.setOrientation(Ll.x,Ll.y,Ll.z,r.x,r.y,r.z)}}class EU extends Xt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Dl=new k,iL=new vr,Bne=new k,Bl=new k;class Nne extends EU{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Dl,iL,Bne),Bl.set(0,0,1).applyQuaternion(iL);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Dl.x,r),t.positionY.linearRampToValueAtTime(Dl.y,r),t.positionZ.linearRampToValueAtTime(Dl.z,r),t.orientationX.linearRampToValueAtTime(Bl.x,r),t.orientationY.linearRampToValueAtTime(Bl.y,r),t.orientationZ.linearRampToValueAtTime(Bl.z,r)}else t.setPosition(Dl.x,Dl.y,Dl.z),t.setOrientation(Bl.x,Bl.y,Bl.z)}}class One{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class wU{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(r[l]!==r[l+t]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let s=r,o=i;s!==o;++s)t[s]=t[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[r+o]}_slerp(e,t,r,i){vr.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,s){const o=this._workIndex*s;vr.multiplyQuaternionsFlat(e,o,e,t,e,r),vr.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,t,r,i,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[r+o]*i}}}const GC="\\[\\]\\.:\\/",Fne=new RegExp("["+GC+"]","g"),jC="[^"+GC+"]",kne="[^"+GC.replace("\\.","")+"]",Une=/((?:WC+[\/:])*)/.source.replace("WC",jC),zne=/(WCOD+)?/.source.replace("WCOD",kne),Hne=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",jC),Vne=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",jC),Gne=new RegExp("^"+Une+zne+Hne+Vne+"$"),jne=["material","materials","bones","map"];class Wne{constructor(e,t,r){const i=r||Wt.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class Wt{constructor(e,t,r){this.path=t,this.parsedPath=r||Wt.parseTrackName(t),this.node=Wt.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new Wt.Composite(e,t,r):new Wt(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Fne,"")}static parseTrackName(e){const t=Gne.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);jne.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=Wt.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let c=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===c){c=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[i];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Wt.Composite=Wne;Wt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Wt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Wt.prototype.GetterByBindingType=[Wt.prototype._getValue_direct,Wt.prototype._getValue_array,Wt.prototype._getValue_arrayElement,Wt.prototype._getValue_toArray];Wt.prototype.SetterByBindingTypeAndVersioning=[[Wt.prototype._setValue_direct,Wt.prototype._setValue_direct_setNeedsUpdate,Wt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Wt.prototype._setValue_array,Wt.prototype._setValue_array_setNeedsUpdate,Wt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Wt.prototype._setValue_arrayElement,Wt.prototype._setValue_arrayElement_setNeedsUpdate,Wt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Wt.prototype._setValue_fromArray,Wt.prototype._setValue_fromArray_setNeedsUpdate,Wt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Xne{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Vi(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let h=0,d=arguments.length;h!==d;++h){const p=arguments[h],m=p.uuid;let v=t[m];if(v===void 0){v=l++,t[m]=v,e.push(p);for(let A=0,_=o;A!==_;++A)s[A].push(new Wt(p,r[A],i[A]))}else if(v<c){a=e[v];const A=--c,_=e[A];t[_.uuid]=v,e[v]=_,t[m]=A,e[A]=p;for(let g=0,x=o;g!==x;++g){const S=s[g],w=S[A];let R=S[v];S[v]=w,R===void 0&&(R=new Wt(p,r[g],i[g])),S[A]=R}}else e[v]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,h=t[c];if(h!==void 0&&h>=s){const d=s++,p=e[d];t[p.uuid]=h,e[h]=p,t[c]=d,e[d]=l;for(let m=0,v=i;m!==v;++m){const A=r[m],_=A[d],g=A[h];A[h]=_,A[d]=g}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],h=c.uuid,d=t[h];if(d!==void 0)if(delete t[h],d<s){const p=--s,m=e[p],v=--o,A=e[v];t[m.uuid]=d,e[d]=m,t[A.uuid]=p,e[p]=A,e.pop();for(let _=0,g=i;_!==g;++_){const x=r[_],S=x[p],w=x[v];x[d]=S,x[p]=w,x.pop()}}else{const p=--o,m=e[p];p>0&&(t[m.uuid]=d),e[d]=m,e.pop();for(let v=0,A=i;v!==A;++v){const _=r[v];_[d]=_[p],_.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,h=this.nCachedObjects_,d=new Array(c);i=s.length,r[e]=i,o.push(e),a.push(t),s.push(d);for(let p=h,m=l.length;p!==m;++p){const v=l[p];d[p]=new Wt(v,e,t)}return d}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];t[c]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class MU{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:Zl,endingEnd:Zl};for(let c=0;c!==o;++c){const h=s[c].createInterpolant(null);a[c]=h,h.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=fk,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+r,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?t=0:(this._startTime=null,t=r*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case oC:for(let h=0,d=l.length;h!==d;++h)l[h].evaluate(o),c[h].accumulateAdditive(a);break;case x_:default:for(let h=0,d=l.length;h!==d;++h)l[h].evaluate(o),c[h].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===dk;if(e===0)return s===-1?i:o&&(s&1)===1?t-i:i;if(r===hk){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=ec,i.endingEnd=ec):(e?i.endingStart=this.zeroSlopeAtStart?ec:Zl:i.endingStart=mp,t?i.endingEnd=this.zeroSlopeAtEnd?ec:Zl:i.endingEnd=mp)}_scheduleFading(e,t,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=r,this}}const Jne=new Float32Array(1);class Kne extends _o{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,c=this._bindingsByRootAndName;let h=c[l];h===void 0&&(h={},c[l]=h);for(let d=0;d!==s;++d){const p=i[d],m=p.name;let v=h[m];if(v!==void 0)++v.referenceCount,o[d]=v;else{if(v=o[d],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,l,m));continue}const A=t&&t._propertyBindings[d].binding.parsedPath;v=new wU(Wt.create(r,m,A),p.ValueTypeName,p.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,l,m),o[d]=v}a[d].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],h=e._byClipCacheIndex;c._byClipCacheIndex=h,l[h]=c,l.pop(),e._byClipCacheIndex=null;const d=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete d[p],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new BC(new Float32Array(2),new Float32Array(2),1,Jne),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=r,t[r]=s}clipAction(e,t,r){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?Fh.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(r===void 0&&(o!==null?r=o.blendMode:r=x_),l!==void 0){const d=l.actionByRoot[s];if(d!==void 0&&d.blendMode===r)return d;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const h=new MU(this,o,t,r);return this._bindAction(h,c),this._addInactiveAction(h,a,s),h}existingAction(e,t){const r=t||this._root,i=r.uuid,s=typeof e=="string"?Fh.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==r;++c)t[c]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const h=c._cacheIndex,d=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,d._cacheIndex=h,t[h]=d,t.pop(),this._removeInactiveBindingsForAction(c)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class WC{constructor(e){this.value=e}clone(){return new WC(this.value.clone===void 0?this.value:this.value.clone())}}let $ne=0;class Yne extends _o{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:$ne++}),this.name="",this.usage=_p,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,i=t.length;r<i;r++){const s=Array.isArray(t[r])?t[r]:[t[r]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class qne extends tm{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class Qne{constructor(e,t,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class TU{constructor(e,t,r=0,i=1/0){this.ray=new Dc(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new fc,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return kw(e,this,r,t),r.sort(sL),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)kw(e[i],this,r,t);return r.sort(sL),r}}function sL(n,e){return n.distance-e.distance}function kw(n,e,t,r){if(n.layers.test(e.layers)&&n.raycast(e,t),r===!0){const i=n.children;for(let s=0,o=i.length;s<o;s++)kw(i[s],e,t,!0)}}class Uw{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Fn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Zne{constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}const oL=new _e;class ere{constructor(e=new _e(1/0,1/0),t=new _e(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=oL.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,oL).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const aL=new k,A0=new k;class tre{constructor(e=new k,t=new k){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){aL.subVectors(e,this.start),A0.subVectors(this.end,this.start);const r=A0.dot(A0);let s=A0.dot(aL)/r;return t&&(s=Fn(s,0,1)),s}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const lL=new k;class nre extends Xt{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const r=new bt,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,h=a/l*Math.PI*2;i.push(Math.cos(c),Math.sin(c),1,Math.cos(h),Math.sin(h),1)}r.setAttribute("position",new rt(i,3));const s=new Zr({fog:!1,toneMapped:!1});this.cone=new zs(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),lL.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(lL),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Aa=new k,S0=new ht,zA=new ht;class rre extends zs{constructor(e){const t=CU(e),r=new bt,i=[],s=[],o=new Ue(0,0,1),a=new Ue(0,1,0);for(let c=0;c<t.length;c++){const h=t[c];h.parent&&h.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new rt(i,3)),r.setAttribute("color",new rt(s,3));const l=new Zr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");zA.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(S0.multiplyMatrices(zA,a.matrixWorld),Aa.setFromMatrixPosition(S0),i.setXYZ(o,Aa.x,Aa.y,Aa.z),S0.multiplyMatrices(zA,a.parent.matrixWorld),Aa.setFromMatrixPosition(S0),i.setXYZ(o+1,Aa.x,Aa.y,Aa.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function CU(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,CU(n.children[t]));return e}class ire extends jn{constructor(e,t,r){const i=new sm(t,4,2),s=new zi({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const sre=new k,cL=new Ue,uL=new Ue;class ore extends Xt{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new im(t);i.rotateY(Math.PI*.5),this.material=new zi({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new Jt(o,3)),this.add(new jn(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");cL.copy(this.light.color),uL.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const s=r<i/2?cL:uL;t.setXYZ(r,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(sre.setFromMatrixPosition(this.light.matrixWorld).negate())}}class are extends zs{constructor(e=10,t=10,r=4473924,i=8947848){r=new Ue(r),i=new Ue(i);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let p=0,m=0,v=-a;p<=t;p++,v+=o){l.push(-a,0,v,a,0,v),l.push(v,0,-a,v,0,a);const A=p===s?r:i;A.toArray(c,m),m+=3,A.toArray(c,m),m+=3,A.toArray(c,m),m+=3,A.toArray(c,m),m+=3}const h=new bt;h.setAttribute("position",new rt(l,3)),h.setAttribute("color",new rt(c,3));const d=new Zr({vertexColors:!0,toneMapped:!1});super(h,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class lre extends zs{constructor(e=10,t=16,r=8,i=64,s=4473924,o=8947848){s=new Ue(s),o=new Ue(o);const a=[],l=[];if(t>1)for(let d=0;d<t;d++){const p=d/t*(Math.PI*2),m=Math.sin(p)*e,v=Math.cos(p)*e;a.push(0,0,0),a.push(m,0,v);const A=d&1?s:o;l.push(A.r,A.g,A.b),l.push(A.r,A.g,A.b)}for(let d=0;d<r;d++){const p=d&1?s:o,m=e-e/r*d;for(let v=0;v<i;v++){let A=v/i*(Math.PI*2),_=Math.sin(A)*m,g=Math.cos(A)*m;a.push(_,0,g),l.push(p.r,p.g,p.b),A=(v+1)/i*(Math.PI*2),_=Math.sin(A)*m,g=Math.cos(A)*m,a.push(_,0,g),l.push(p.r,p.g,p.b)}}const c=new bt;c.setAttribute("position",new rt(a,3)),c.setAttribute("color",new rt(l,3));const h=new Zr({vertexColors:!0,toneMapped:!1});super(c,h),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const hL=new k,E0=new k,fL=new k;class cre extends Xt{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new bt;i.setAttribute("position",new rt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Zr({fog:!1,toneMapped:!1});this.lightPlane=new na(i,s),this.add(this.lightPlane),i=new bt,i.setAttribute("position",new rt([0,0,0,0,0,1],3)),this.targetLine=new na(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),hL.setFromMatrixPosition(this.light.matrixWorld),E0.setFromMatrixPosition(this.light.target.matrixWorld),fL.subVectors(E0,hL),this.lightPlane.lookAt(E0),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(E0),this.targetLine.scale.z=fL.length()}}const w0=new k,Dn=new Qp;class ure extends zs{constructor(e){const t=new bt,r=new Zr({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(v,A){l(v),l(A)}function l(v){i.push(0,0,0),s.push(0,0,0),o[v]===void 0&&(o[v]=[]),o[v].push(i.length/3-1)}t.setAttribute("position",new rt(i,3)),t.setAttribute("color",new rt(s,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new Ue(16755200),h=new Ue(16711680),d=new Ue(43775),p=new Ue(16777215),m=new Ue(3355443);this.setColors(c,h,d,p,m)}setColors(e,t,r,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;Dn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Vn("c",t,e,Dn,0,0,-1),Vn("t",t,e,Dn,0,0,1),Vn("n1",t,e,Dn,-r,-i,-1),Vn("n2",t,e,Dn,r,-i,-1),Vn("n3",t,e,Dn,-r,i,-1),Vn("n4",t,e,Dn,r,i,-1),Vn("f1",t,e,Dn,-r,-i,1),Vn("f2",t,e,Dn,r,-i,1),Vn("f3",t,e,Dn,-r,i,1),Vn("f4",t,e,Dn,r,i,1),Vn("u1",t,e,Dn,r*.7,i*1.1,-1),Vn("u2",t,e,Dn,-r*.7,i*1.1,-1),Vn("u3",t,e,Dn,0,i*2,-1),Vn("cf1",t,e,Dn,-r,0,1),Vn("cf2",t,e,Dn,r,0,1),Vn("cf3",t,e,Dn,0,-i,1),Vn("cf4",t,e,Dn,0,i,1),Vn("cn1",t,e,Dn,-r,0,-1),Vn("cn2",t,e,Dn,r,0,-1),Vn("cn3",t,e,Dn,0,-i,-1),Vn("cn4",t,e,Dn,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Vn(n,e,t,r,i,s,o){w0.set(i,s,o).unproject(r);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,h=a.length;c<h;c++)l.setXYZ(a[c],w0.x,w0.y,w0.z)}}const M0=new Yr;class hre extends zs{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new bt;s.setIndex(new Jt(r,1)),s.setAttribute("position",new Jt(i,3)),super(s,new Zr({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&M0.setFromObject(this.object),M0.isEmpty())return;const t=M0.min,r=M0.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=t.x,s[4]=r.y,s[5]=r.z,s[6]=t.x,s[7]=t.y,s[8]=r.z,s[9]=r.x,s[10]=t.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=t.z,s[15]=t.x,s[16]=r.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=r.x,s[22]=t.y,s[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class fre extends zs{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new bt;s.setIndex(new Jt(r,1)),s.setAttribute("position",new rt(i,3)),super(s,new Zr({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class dre extends na{constructor(e,t=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new bt;o.setAttribute("position",new rt(s,3)),o.computeBoundingSphere(),super(o,new Zr({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new bt;l.setAttribute("position",new rt(a,3)),l.computeBoundingSphere(),this.add(new jn(l,new zi({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const dL=new k;let T0,HA;class pre extends Xt{constructor(e=new k(0,0,1),t=new k(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",T0===void 0&&(T0=new bt,T0.setAttribute("position",new rt([0,0,0,0,1,0],3)),HA=new ef(0,.5,1,5,1),HA.translate(0,-.5,0)),this.position.copy(t),this.line=new na(T0,new Zr({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new jn(HA,new zi({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{dL.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(dL,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class mre extends zs{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new bt;i.setAttribute("position",new rt(t,3)),i.setAttribute("color",new rt(r,3));const s=new Zr({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,r){const i=new Ue,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class gre{constructor(){this.type="ShapePath",this.color=new Ue,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Sp,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,s,o){return this.currentPath.bezierCurveTo(e,t,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(g){const x=[];for(let S=0,w=g.length;S<w;S++){const R=g[S],C=new pc;C.curves=R.curves,x.push(C)}return x}function r(g,x){const S=x.length;let w=!1;for(let R=S-1,C=0;C<S;R=C++){let I=x[R],D=x[C],N=D.x-I.x,T=D.y-I.y;if(Math.abs(T)>Number.EPSILON){if(T<0&&(I=x[C],N=-N,D=x[R],T=-T),g.y<I.y||g.y>D.y)continue;if(g.y===I.y){if(g.x===I.x)return!0}else{const L=T*(g.x-I.x)-N*(g.y-I.y);if(L===0)return!0;if(L<0)continue;w=!w}}else{if(g.y!==I.y)continue;if(D.x<=g.x&&g.x<=I.x||I.x<=g.x&&g.x<=D.x)return!0}}return w}const i=ho.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new pc,l.curves=a.curves,c.push(l),c;let h=!i(s[0].getPoints());h=e?!h:h;const d=[],p=[];let m=[],v=0,A;p[v]=void 0,m[v]=[];for(let g=0,x=s.length;g<x;g++)a=s[g],A=a.getPoints(),o=i(A),o=e?!o:o,o?(!h&&p[v]&&v++,p[v]={s:new pc,p:A},p[v].s.curves=a.curves,h&&v++,m[v]=[]):m[v].push({h:a,p:A[0]});if(!p[0])return t(s);if(p.length>1){let g=!1,x=0;for(let S=0,w=p.length;S<w;S++)d[S]=[];for(let S=0,w=p.length;S<w;S++){const R=m[S];for(let C=0;C<R.length;C++){const I=R[C];let D=!0;for(let N=0;N<p.length;N++)r(I.p,p[N].p)&&(S!==N&&x++,D?(D=!1,d[N].push(I)):g=!0);D&&d[S].push(I)}}x>0&&g===!1&&(m=d)}let _;for(let g=0,x=p.length;g<x;g++){l=p[g].s,c.push(l),_=m[g];for(let S=0,w=_.length;S<w;S++)l.holes.push(_[S].h)}return c}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Kp}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Kp);const vre=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:QT,AddEquation:Ra,AddOperation:Y4,AdditiveAnimationBlendMode:oC,AdditiveBlending:QE,AgXToneMapping:tk,AlphaFormat:sk,AlwaysCompare:wk,AlwaysDepth:G4,AlwaysStencilFunc:Rw,AmbientLight:gU,AnimationAction:MU,AnimationClip:Fh,AnimationLoader:Ane,AnimationMixer:Kne,AnimationObjectGroup:Xne,AnimationUtils:vne,ArcCurve:Wk,ArrayCamera:Uk,ArrowHelper:pre,AttachedBindMode:rw,Audio:EU,AudioAnalyser:One,AudioContext:HC,AudioListener:Dne,AudioLoader:Pne,AxesHelper:mre,BackSide:di,BasicDepthPacking:mk,BasicShadowMap:M4,BatchedMesh:jk,Bone:T_,BooleanKeyframeTrack:Nc,Box2:ere,Box3:Yr,Box3Helper:fre,BoxGeometry:Bc,BoxHelper:hre,BufferAttribute:Jt,BufferGeometry:bt,BufferGeometryLoader:AU,ByteType:rk,Cache:jo,Camera:Qp,CameraHelper:ure,CanvasTexture:Hte,CapsuleGeometry:P_,CatmullRomCurve3:Xk,CineonToneMapping:Z4,CircleGeometry:I_,ClampToEdgeWrapping:Rr,Clock:VC,Color:Ue,ColorKeyframeTrack:NC,ColorManagement:rn,CompressedArrayTexture:Ute,CompressedCubeTexture:zte,CompressedTexture:b_,CompressedTextureLoader:Sne,ConeGeometry:L_,ConstantAlphaFactor:z4,ConstantColorFactor:k4,CubeCamera:mC,CubeReflectionMapping:ta,CubeRefractionMapping:il,CubeTexture:Zp,CubeTextureLoader:Ene,CubeUVReflectionMapping:qh,CubicBezierCurve:bC,CubicBezierCurve3:Jk,CubicInterpolant:hU,CullFaceBack:qE,CullFaceFront:w4,CullFaceFrontBack:P$,CullFaceNone:E4,Curve:Hs,CurvePath:$k,CustomBlending:T4,CustomToneMapping:ek,CylinderGeometry:ef,Cylindrical:Zne,Data3DTexture:fC,DataArrayTexture:S_,DataTexture:dc,DataTextureLoader:wne,DataUtils:NY,DecrementStencilOp:k$,DecrementWrapStencilOp:z$,DefaultLoadingManager:Ku,DepthFormat:$a,DepthStencilFormat:Mc,DepthTexture:yC,DetachedBindMode:nk,DirectionalLight:zC,DirectionalLightHelper:cre,DiscreteInterpolant:fU,DisplayP3ColorSpace:A_,DodecahedronGeometry:D_,DoubleSide:ds,DstAlphaFactor:D4,DstColorFactor:N4,DynamicCopyUsage:tY,DynamicDrawUsage:$$,DynamicReadUsage:Q$,EdgesGeometry:Yk,EllipseCurve:R_,EqualCompare:xk,EqualDepth:W4,EqualStencilFunc:j$,EquirectangularReflectionMapping:fp,EquirectangularRefractionMapping:dp,Euler:qp,EventDispatcher:_o,ExtrudeGeometry:N_,FileLoader:Ji,Float16BufferAttribute:HY,Float32BufferAttribute:rt,Float64BufferAttribute:VY,FloatType:ps,Fog:M_,FogExp2:w_,FramebufferTexture:kte,FrontSide:vo,Frustum:em,GLBufferAttribute:Qne,GLSL1:rY,GLSL3:Pw,GreaterCompare:Ak,GreaterDepth:J4,GreaterEqualCompare:Ek,GreaterEqualDepth:X4,GreaterEqualStencilFunc:K$,GreaterStencilFunc:X$,GridHelper:are,Group:Go,HalfFloatType:Ph,HemisphereLight:mU,HemisphereLightHelper:ore,IcosahedronGeometry:O_,ImageBitmapLoader:SU,ImageLoader:Tp,ImageUtils:hC,IncrementStencilOp:F$,IncrementWrapStencilOp:U$,InstancedBufferAttribute:Bh,InstancedBufferGeometry:xU,InstancedInterleavedBuffer:qne,InstancedMesh:wC,Int16BufferAttribute:UY,Int32BufferAttribute:zY,Int8BufferAttribute:OY,IntType:ZT,InterleavedBuffer:tm,InterleavedBufferAttribute:ol,Interpolant:tf,InterpolateDiscrete:Ih,InterpolateLinear:Tc,InterpolateSmooth:ev,InvertStencilOp:H$,KeepStencilOp:Vl,KeyframeTrack:Vs,LOD:Gk,LatheGeometry:rm,Layers:fc,LessCompare:_k,LessDepth:j4,LessEqualCompare:cC,LessEqualDepth:hp,LessEqualStencilFunc:W$,LessStencilFunc:G$,Light:ml,LightProbe:_U,Line:na,Line3:tre,LineBasicMaterial:Zr,LineCurve:RC,LineCurve3:Kk,LineDashedMaterial:lU,LineLoop:MC,LineSegments:zs,LinearDisplayP3ColorSpace:Yp,LinearEncoding:lC,LinearFilter:gn,LinearInterpolant:BC,LinearMipMapLinearFilter:B$,LinearMipMapNearestFilter:D$,LinearMipmapLinearFilter:gs,LinearMipmapNearestFilter:ch,LinearSRGBColorSpace:yo,LinearToneMapping:q4,LinearTransfer:gp,Loader:ei,LoaderUtils:fo,LoadingManager:OC,LoopOnce:hk,LoopPingPong:dk,LoopRepeat:fk,LuminanceAlphaFormat:ak,LuminanceFormat:ok,MOUSE:zl,Material:er,MaterialLoader:G_,MathUtils:Mk,Matrix3:Nt,Matrix4:ht,MaxEquation:nw,Mesh:jn,MeshBasicMaterial:zi,MeshDepthMaterial:_C,MeshDistanceMaterial:xC,MeshLambertMaterial:oU,MeshMatcapMaterial:aU,MeshNormalMaterial:sU,MeshPhongMaterial:rU,MeshPhysicalMaterial:xo,MeshStandardMaterial:om,MeshToonMaterial:iU,MinEquation:tw,MirroredRepeatWrapping:Rh,MixOperation:$4,MultiplyBlending:ew,MultiplyOperation:$p,NearestFilter:Nn,NearestMipMapLinearFilter:L$,NearestMipMapNearestFilter:I$,NearestMipmapLinearFilter:Pa,NearestMipmapNearestFilter:pp,NeverCompare:yk,NeverDepth:V4,NeverStencilFunc:V$,NoBlending:Ko,NoColorSpace:Oi,NoToneMapping:co,NormalAnimationBlendMode:x_,NormalBlending:cc,NotEqualCompare:Sk,NotEqualDepth:K4,NotEqualStencilFunc:J$,NumberKeyframeTrack:Nh,Object3D:Xt,ObjectLoader:bne,ObjectSpaceNormalMap:vk,OctahedronGeometry:im,OneFactor:P4,OneMinusConstantAlphaFactor:H4,OneMinusConstantColorFactor:U4,OneMinusDstAlphaFactor:B4,OneMinusDstColorFactor:O4,OneMinusSrcAlphaFactor:cy,OneMinusSrcColorFactor:L4,OrthographicCamera:vs,P3Primaries:yp,PCFShadowMap:v_,PCFSoftShadowMap:Ed,PMREMGenerator:Lw,Path:Sp,PerspectiveCamera:yn,Plane:Fo,PlaneGeometry:Qh,PlaneHelper:dre,PointLight:UC,PointLightHelper:ire,Points:TC,PointsMaterial:C_,PolarGridHelper:lre,PolyhedronGeometry:pl,PositionalAudio:Nne,PropertyBinding:Wt,PropertyMixer:wU,QuadraticBezierCurve:PC,QuadraticBezierCurve3:IC,Quaternion:vr,QuaternionKeyframeTrack:al,QuaternionLinearInterpolant:dU,RED_GREEN_RGTC2_Format:Cw,RED_RGTC1_Format:uk,REVISION:Kp,RGBADepthPacking:gk,RGBAFormat:ci,RGBAIntegerFormat:iC,RGBA_ASTC_10x10_Format:Aw,RGBA_ASTC_10x5_Format:yw,RGBA_ASTC_10x6_Format:_w,RGBA_ASTC_10x8_Format:xw,RGBA_ASTC_12x10_Format:Sw,RGBA_ASTC_12x12_Format:Ew,RGBA_ASTC_4x4_Format:uw,RGBA_ASTC_5x4_Format:hw,RGBA_ASTC_5x5_Format:fw,RGBA_ASTC_6x5_Format:dw,RGBA_ASTC_6x6_Format:pw,RGBA_ASTC_8x5_Format:mw,RGBA_ASTC_8x6_Format:gw,RGBA_ASTC_8x8_Format:vw,RGBA_BPTC_Format:Z0,RGBA_ETC2_EAC_Format:cw,RGBA_PVRTC_2BPPV1_Format:aw,RGBA_PVRTC_4BPPV1_Format:ow,RGBA_S3TC_DXT1_Format:Y0,RGBA_S3TC_DXT3_Format:q0,RGBA_S3TC_DXT5_Format:Q0,RGB_BPTC_SIGNED_Format:ww,RGB_BPTC_UNSIGNED_Format:Mw,RGB_ETC1_Format:sC,RGB_ETC2_Format:lw,RGB_PVRTC_2BPPV1_Format:sw,RGB_PVRTC_4BPPV1_Format:iw,RGB_S3TC_DXT1_Format:$0,RGFormat:ck,RGIntegerFormat:rC,RawShaderMaterial:nU,Ray:Dc,Raycaster:TU,Rec709Primaries:vp,RectAreaLight:vU,RedFormat:lk,RedIntegerFormat:nC,ReinhardToneMapping:Q4,RenderTarget:bk,RepeatWrapping:sl,ReplaceStencilOp:O$,ReverseSubtractEquation:b4,RingGeometry:F_,SIGNED_RED_GREEN_RGTC2_Format:bw,SIGNED_RED_RGTC1_Format:Tw,SRGBColorSpace:rr,SRGBTransfer:hn,Scene:dy,ShaderChunk:Lt,ShaderLib:Is,ShaderMaterial:Us,ShadowMaterial:tU,Shape:pc,ShapeGeometry:k_,ShapePath:gre,ShapeUtils:ho,ShortType:ik,Skeleton:nm,SkeletonHelper:rre,SkinnedMesh:EC,Source:tc,Sphere:Dr,SphereGeometry:sm,Spherical:Uw,SphericalHarmonics3:yU,SplineCurve:LC,SpotLight:kC,SpotLightHelper:nre,Sprite:Vk,SpriteMaterial:SC,SrcAlphaFactor:ly,SrcAlphaSaturateFactor:F4,SrcColorFactor:I4,StaticCopyUsage:eY,StaticDrawUsage:_p,StaticReadUsage:q$,StereoCamera:Ine,StreamCopyUsage:nY,StreamDrawUsage:Y$,StreamReadUsage:Z$,StringKeyframeTrack:Oc,SubtractEquation:C4,SubtractiveBlending:ZE,TOUCH:Hl,TangentSpaceNormalMap:dl,TetrahedronGeometry:U_,Texture:xn,TextureLoader:pU,TorusGeometry:z_,TorusKnotGeometry:H_,Triangle:Fi,TriangleFanDrawMode:uy,TriangleStripDrawMode:aC,TrianglesDrawMode:pk,TubeGeometry:V_,UVMapping:y_,Uint16BufferAttribute:dC,Uint32BufferAttribute:pC,Uint8BufferAttribute:FY,Uint8ClampedBufferAttribute:kY,Uniform:WC,UniformsGroup:Yne,UniformsLib:Oe,UniformsUtils:Ik,UnsignedByteType:uo,UnsignedInt248Type:Ka,UnsignedIntType:Vo,UnsignedShort4444Type:eC,UnsignedShort5551Type:tC,UnsignedShortType:__,VSMShadowMap:bs,Vector2:_e,Vector3:k,Vector4:sn,VectorKeyframeTrack:Oh,VideoTexture:Fte,WebGL1Renderer:zk,WebGL3DRenderTarget:EY,WebGLArrayRenderTarget:SY,WebGLCoordinateSystem:so,WebGLCubeRenderTarget:gC,WebGLMultipleRenderTargets:wY,WebGLRenderTarget:ks,WebGLRenderer:AC,WebGLUtils:kk,WebGPUCoordinateSystem:xp,WireframeGeometry:eU,WrapAroundEnding:mp,ZeroCurvatureEnding:Zl,ZeroFactor:R4,ZeroSlopeEnding:ec,ZeroStencilOp:N$,_SRGBAFormat:hy,createCanvasElement:Ck,sRGBEncoding:Ya},Symbol.toStringTag,{value:"Module"}));var bU={exports:{}},Fc={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Fc.ConcurrentRoot=1;Fc.ContinuousEventPriority=4;Fc.DefaultEventPriority=16;Fc.DiscreteEventPriority=1;Fc.IdleEventPriority=536870912;Fc.LegacyRoot=0;bU.exports=Fc;var $u=bU.exports;function yre(n){let e;const t=new Set,r=(c,h)=>{const d=typeof c=="function"?c(e):c;if(d!==e){const p=e;e=h?d:Object.assign({},e,d),t.forEach(m=>m(e,p))}},i=()=>e,s=(c,h=i,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=h(e);function m(){const v=h(e);if(!d(p,v)){const A=p;c(p=v,A)}}return t.add(m),()=>t.delete(m)},l={setState:r,getState:i,subscribe:(c,h,d)=>h||d?s(c,h,d):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=n(r,i,l),l}const _re=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),pL=_re?re.useEffect:re.useLayoutEffect;function RU(n){const e=typeof n=="function"?yre(n):n,t=(r=e.getState,i=Object.is)=>{const[,s]=re.useReducer(_=>_+1,0),o=e.getState(),a=re.useRef(o),l=re.useRef(r),c=re.useRef(i),h=re.useRef(!1),d=re.useRef();d.current===void 0&&(d.current=r(o));let p,m=!1;(a.current!==o||l.current!==r||c.current!==i||h.current)&&(p=r(o),m=!i(d.current,p)),pL(()=>{m&&(d.current=p),a.current=o,l.current=r,c.current=i,h.current=!1});const v=re.useRef(o);pL(()=>{const _=()=>{try{const x=e.getState(),S=l.current(x);c.current(d.current,S)||(a.current=x,d.current=S,s())}catch{h.current=!0,s()}},g=e.subscribe(_);return e.getState()!==v.current&&_(),g},[]);const A=m?p:d.current;return re.useDebugValue(A),A};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}var PU={exports:{}},VA={exports:{}},GA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mL;function xre(){return mL||(mL=1,function(n){function e(O,G){var X=O.length;O.push(G);e:for(;0<X;){var Q=X-1>>>1,te=O[Q];if(0<i(te,G))O[Q]=G,O[X]=te,X=Q;else break e}}function t(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var G=O[0],X=O.pop();if(X!==G){O[0]=X;e:for(var Q=0,te=O.length,be=te>>>1;Q<be;){var ee=2*(Q+1)-1,pe=O[ee],Me=ee+1,Ie=O[Me];if(0>i(pe,X))Me<te&&0>i(Ie,pe)?(O[Q]=Ie,O[Me]=X,Q=Me):(O[Q]=pe,O[ee]=X,Q=ee);else if(Me<te&&0>i(Ie,X))O[Q]=Ie,O[Me]=X,Q=Me;else break e}}return G}function i(O,G){var X=O.sortIndex-G.sortIndex;return X!==0?X:O.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,p=3,m=!1,v=!1,A=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(O){for(var G=t(c);G!==null;){if(G.callback===null)r(c);else if(G.startTime<=O)r(c),G.sortIndex=G.expirationTime,e(l,G);else break;G=t(c)}}function w(O){if(A=!1,S(O),!v)if(t(l)!==null)v=!0,q(R);else{var G=t(c);G!==null&&ce(w,G.startTime-O)}}function R(O,G){v=!1,A&&(A=!1,g(D),D=-1),m=!0;var X=p;try{for(S(G),d=t(l);d!==null&&(!(d.expirationTime>G)||O&&!L());){var Q=d.callback;if(typeof Q=="function"){d.callback=null,p=d.priorityLevel;var te=Q(d.expirationTime<=G);G=n.unstable_now(),typeof te=="function"?d.callback=te:d===t(l)&&r(l),S(G)}else r(l);d=t(l)}if(d!==null)var be=!0;else{var ee=t(c);ee!==null&&ce(w,ee.startTime-G),be=!1}return be}finally{d=null,p=X,m=!1}}var C=!1,I=null,D=-1,N=5,T=-1;function L(){return!(n.unstable_now()-T<N)}function H(){if(I!==null){var O=n.unstable_now();T=O;var G=!0;try{G=I(!0,O)}finally{G?J():(C=!1,I=null)}}else C=!1}var J;if(typeof x=="function")J=function(){x(H)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,$=W.port2;W.port1.onmessage=H,J=function(){$.postMessage(null)}}else J=function(){_(H,0)};function q(O){I=O,C||(C=!0,J())}function ce(O,G){D=_(function(){O(n.unstable_now())},G)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(O){O.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,q(R))},n.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<O?Math.floor(1e3/O):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(O){switch(p){case 1:case 2:case 3:var G=3;break;default:G=p}var X=p;p=G;try{return O()}finally{p=X}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(O,G){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var X=p;p=O;try{return G()}finally{p=X}},n.unstable_scheduleCallback=function(O,G,X){var Q=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?Q+X:Q):X=Q,O){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=X+te,O={id:h++,callback:G,priorityLevel:O,startTime:X,expirationTime:te,sortIndex:-1},X>Q?(O.sortIndex=X,e(c,O),t(l)===null&&O===t(c)&&(A?(g(D),D=-1):A=!0,ce(w,X-Q))):(O.sortIndex=te,e(l,O),v||m||(v=!0,q(R))),O},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(O){var G=p;return function(){var X=p;p=G;try{return O.apply(this,arguments)}finally{p=X}}}}(GA)),GA}var gL;function Are(){return gL||(gL=1,VA.exports=xre()),VA.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sre=function(e){var t={},r=re,i=Are(),s=Object.assign;function o(u){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+u,y=1;y<arguments.length;y++)f+="&args[]="+encodeURIComponent(arguments[y]);return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),v=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),R=Symbol.iterator;function C(u){return u===null||typeof u!="object"?null:(u=R&&u[R]||u["@@iterator"],typeof u=="function"?u:null)}function I(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case h:return"Fragment";case c:return"Portal";case p:return"Profiler";case d:return"StrictMode";case _:return"Suspense";case g:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case v:return(u.displayName||"Context")+".Consumer";case m:return(u._context.displayName||"Context")+".Provider";case A:var f=u.render;return u=u.displayName,u||(u=f.displayName||f.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case x:return f=u.displayName||null,f!==null?f:I(u.type)||"Memo";case S:f=u._payload,u=u._init;try{return I(u(f))}catch{}}return null}function D(u){var f=u.type;switch(u.tag){case 24:return"Cache";case 9:return(f.displayName||"Context")+".Consumer";case 10:return(f._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=f.render,u=u.displayName||u.name||"",f.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return f;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return I(f);case 8:return f===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f}return null}function N(u){var f=u,y=u;if(u.alternate)for(;f.return;)f=f.return;else{u=f;do f=u,f.flags&4098&&(y=f.return),u=f.return;while(u)}return f.tag===3?y:null}function T(u){if(N(u)!==u)throw Error(o(188))}function L(u){var f=u.alternate;if(!f){if(f=N(u),f===null)throw Error(o(188));return f!==u?null:u}for(var y=u,E=f;;){var M=y.return;if(M===null)break;var P=M.alternate;if(P===null){if(E=M.return,E!==null){y=E;continue}break}if(M.child===P.child){for(P=M.child;P;){if(P===y)return T(M),u;if(P===E)return T(M),f;P=P.sibling}throw Error(o(188))}if(y.return!==E.return)y=M,E=P;else{for(var V=!1,Z=M.child;Z;){if(Z===y){V=!0,y=M,E=P;break}if(Z===E){V=!0,E=M,y=P;break}Z=Z.sibling}if(!V){for(Z=P.child;Z;){if(Z===y){V=!0,y=P,E=M;break}if(Z===E){V=!0,E=P,y=M;break}Z=Z.sibling}if(!V)throw Error(o(189))}}if(y.alternate!==E)throw Error(o(190))}if(y.tag!==3)throw Error(o(188));return y.stateNode.current===y?u:f}function H(u){return u=L(u),u!==null?J(u):null}function J(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var f=J(u);if(f!==null)return f;u=u.sibling}return null}function W(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){if(u.tag!==4){var f=W(u);if(f!==null)return f}u=u.sibling}return null}var $=Array.isArray,q=e.getPublicInstance,ce=e.getRootHostContext,O=e.getChildHostContext,G=e.prepareForCommit,X=e.resetAfterCommit,Q=e.createInstance,te=e.appendInitialChild,be=e.finalizeInitialChildren,ee=e.prepareUpdate,pe=e.shouldSetTextContent,Me=e.createTextInstance,Ie=e.scheduleTimeout,$e=e.cancelTimeout,je=e.noTimeout,ue=e.isPrimaryRenderer,ae=e.supportsMutation,z=e.supportsPersistence,he=e.supportsHydration,ie=e.getInstanceFromNode,ve=e.preparePortalMount,oe=e.getCurrentEventPriority,Ce=e.detachDeletedInstance,Ee=e.supportsMicrotasks,F=e.scheduleMicrotask,B=e.supportsTestSelectors,K=e.findFiberRoot,xe=e.getBoundingRect,Ae=e.getTextContent,Se=e.isHiddenSubtree,qe=e.matchAccessibilityRole,Ne=e.setFocusIfFocusable,ke=e.setupIntersectionObserver,lt=e.appendChild,At=e.appendChildToContainer,Re=e.commitTextUpdate,zt=e.commitMount,Pt=e.commitUpdate,gt=e.insertBefore,at=e.insertInContainerBefore,Ye=e.removeChild,Y=e.removeChildFromContainer,we=e.resetTextContent,He=e.hideInstance,Je=e.hideTextInstance,vt=e.unhideInstance,j=e.unhideTextInstance,Pe=e.clearContainer,Be=e.cloneInstance,tt=e.createContainerChildSet,nt=e.appendChildToContainerChildSet,It=e.finalizeContainerChildren,Vt=e.replaceContainerChildren,un=e.cloneHiddenInstance,Un=e.cloneHiddenTextInstance,Kt=e.canHydrateInstance,xr=e.canHydrateTextInstance,Yi=e.canHydrateSuspenseInstance,nf=e.isSuspenseInstancePending,rf=e.isSuspenseInstanceFallback,kc=e.registerSuspenseInstanceRetry,ia=e.getNextHydratableSibling,Uc=e.getFirstHydratableChild,um=e.getFirstHydratableChildWithinContainer,hm=e.getFirstHydratableChildWithinSuspenseInstance,W_=e.hydrateInstance,X_=e.hydrateTextInstance,J_=e.hydrateSuspenseInstance,U=e.getNextHydratableInstanceAfterSuspenseInstance,se=e.commitHydratedContainer,de=e.commitHydratedSuspenseInstance,me=e.clearSuspenseBoundary,fe=e.clearSuspenseBoundaryFromContainer,Ke=e.shouldDeleteUnhydratedTailInstances,st=e.didNotMatchHydratedContainerTextInstance,ft=e.didNotMatchHydratedTextInstance,pt;function St(u){if(pt===void 0)try{throw Error()}catch(y){var f=y.stack.trim().match(/\n( *(at )?)/);pt=f&&f[1]||""}return`
`+pt+u}var xt=!1;function Et(u,f){if(!u||xt)return"";xt=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(De){var E=De}Reflect.construct(u,[],f)}else{try{f.call()}catch(De){E=De}u.call(f.prototype)}else{try{throw Error()}catch(De){E=De}u()}}catch(De){if(De&&E&&typeof De.stack=="string"){for(var M=De.stack.split(`
`),P=E.stack.split(`
`),V=M.length-1,Z=P.length-1;1<=V&&0<=Z&&M[V]!==P[Z];)Z--;for(;1<=V&&0<=Z;V--,Z--)if(M[V]!==P[Z]){if(V!==1||Z!==1)do if(V--,Z--,0>Z||M[V]!==P[Z]){var ye=`
`+M[V].replace(" at new "," at ");return u.displayName&&ye.includes("<anonymous>")&&(ye=ye.replace("<anonymous>",u.displayName)),ye}while(1<=V&&0<=Z);break}}}finally{xt=!1,Error.prepareStackTrace=y}return(u=u?u.displayName||u.name:"")?St(u):""}var wn=Object.prototype.hasOwnProperty,Ar=[],dn=-1;function lr(u){return{current:u}}function mt(u){0>dn||(u.current=Ar[dn],Ar[dn]=null,dn--)}function Ze(u,f){dn++,Ar[dn]=u.current,u.current=f}var qi={},Ot=lr(qi),In=lr(!1),Gs=qi;function Qi(u,f){var y=u.type.contextTypes;if(!y)return qi;var E=u.stateNode;if(E&&E.__reactInternalMemoizedUnmaskedChildContext===f)return E.__reactInternalMemoizedMaskedChildContext;var M={},P;for(P in y)M[P]=f[P];return E&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=f,u.__reactInternalMemoizedMaskedChildContext=M),M}function cr(u){return u=u.childContextTypes,u!=null}function zn(){mt(In),mt(Ot)}function js(u,f,y){if(Ot.current!==qi)throw Error(o(168));Ze(Ot,f),Ze(In,y)}function zc(u,f,y){var E=u.stateNode;if(f=f.childContextTypes,typeof E.getChildContext!="function")return y;E=E.getChildContext();for(var M in E)if(!(M in f))throw Error(o(108,D(u)||"Unknown",M));return s({},y,E)}function Sr(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||qi,Gs=Ot.current,Ze(Ot,u),Ze(In,In.current),!0}function Hc(u,f,y){var E=u.stateNode;if(!E)throw Error(o(169));y?(u=zc(u,f,Gs),E.__reactInternalMemoizedMergedChildContext=u,mt(In),mt(Ot),Ze(Ot,u)):mt(In),Ze(In,y)}var bi=Math.clz32?Math.clz32:s9,fm=Math.log,i9=Math.LN2;function s9(u){return u>>>=0,u===0?32:31-(fm(u)/i9|0)|0}var dm=64,pm=4194304;function sf(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function mm(u,f){var y=u.pendingLanes;if(y===0)return 0;var E=0,M=u.suspendedLanes,P=u.pingedLanes,V=y&268435455;if(V!==0){var Z=V&~M;Z!==0?E=sf(Z):(P&=V,P!==0&&(E=sf(P)))}else V=y&~M,V!==0?E=sf(V):P!==0&&(E=sf(P));if(E===0)return 0;if(f!==0&&f!==E&&!(f&M)&&(M=E&-E,P=f&-f,M>=P||M===16&&(P&4194240)!==0))return f;if(E&4&&(E|=y&16),f=u.entangledLanes,f!==0)for(u=u.entanglements,f&=E;0<f;)y=31-bi(f),M=1<<y,E|=u[y],f&=~M;return E}function o9(u,f){switch(u){case 1:case 2:case 4:return f+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function a9(u,f){for(var y=u.suspendedLanes,E=u.pingedLanes,M=u.expirationTimes,P=u.pendingLanes;0<P;){var V=31-bi(P),Z=1<<V,ye=M[V];ye===-1?(!(Z&y)||Z&E)&&(M[V]=o9(Z,f)):ye<=f&&(u.expiredLanes|=Z),P&=~Z}}function K_(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function $_(u){for(var f=[],y=0;31>y;y++)f.push(u);return f}function of(u,f,y){u.pendingLanes|=f,f!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,f=31-bi(f),u[f]=y}function l9(u,f){var y=u.pendingLanes&~f;u.pendingLanes=f,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=f,u.mutableReadLanes&=f,u.entangledLanes&=f,f=u.entanglements;var E=u.eventTimes;for(u=u.expirationTimes;0<y;){var M=31-bi(y),P=1<<M;f[M]=0,E[M]=-1,u[M]=-1,y&=~P}}function Y_(u,f){var y=u.entangledLanes|=f;for(u=u.entanglements;y;){var E=31-bi(y),M=1<<E;M&f|u[E]&f&&(u[E]|=f),y&=~M}}var Qt=0;function YC(u){return u&=-u,1<u?4<u?u&268435455?16:536870912:4:1}var q_=i.unstable_scheduleCallback,qC=i.unstable_cancelCallback,c9=i.unstable_shouldYield,u9=i.unstable_requestPaint,ur=i.unstable_now,Q_=i.unstable_ImmediatePriority,h9=i.unstable_UserBlockingPriority,Z_=i.unstable_NormalPriority,f9=i.unstable_IdlePriority,gm=null,Ws=null;function d9(u){if(Ws&&typeof Ws.onCommitFiberRoot=="function")try{Ws.onCommitFiberRoot(gm,u,void 0,(u.current.flags&128)===128)}catch{}}function p9(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var Xs=typeof Object.is=="function"?Object.is:p9,Ao=null,vm=!1,ex=!1;function QC(u){Ao===null?Ao=[u]:Ao.push(u)}function m9(u){vm=!0,QC(u)}function Js(){if(!ex&&Ao!==null){ex=!0;var u=0,f=Qt;try{var y=Ao;for(Qt=1;u<y.length;u++){var E=y[u];do E=E(!0);while(E!==null)}Ao=null,vm=!1}catch(M){throw Ao!==null&&(Ao=Ao.slice(u+1)),q_(Q_,Js),M}finally{Qt=f,ex=!1}}return null}var g9=a.ReactCurrentBatchConfig;function ym(u,f){if(Xs(u,f))return!0;if(typeof u!="object"||u===null||typeof f!="object"||f===null)return!1;var y=Object.keys(u),E=Object.keys(f);if(y.length!==E.length)return!1;for(E=0;E<y.length;E++){var M=y[E];if(!wn.call(f,M)||!Xs(u[M],f[M]))return!1}return!0}function v9(u){switch(u.tag){case 5:return St(u.type);case 16:return St("Lazy");case 13:return St("Suspense");case 19:return St("SuspenseList");case 0:case 2:case 15:return u=Et(u.type,!1),u;case 11:return u=Et(u.type.render,!1),u;case 1:return u=Et(u.type,!0),u;default:return""}}function As(u,f){if(u&&u.defaultProps){f=s({},f),u=u.defaultProps;for(var y in u)f[y]===void 0&&(f[y]=u[y]);return f}return f}var _m=lr(null),xm=null,Vc=null,tx=null;function nx(){tx=Vc=xm=null}function ZC(u,f,y){ue?(Ze(_m,f._currentValue),f._currentValue=y):(Ze(_m,f._currentValue2),f._currentValue2=y)}function rx(u){var f=_m.current;mt(_m),ue?u._currentValue=f:u._currentValue2=f}function ix(u,f,y){for(;u!==null;){var E=u.alternate;if((u.childLanes&f)!==f?(u.childLanes|=f,E!==null&&(E.childLanes|=f)):E!==null&&(E.childLanes&f)!==f&&(E.childLanes|=f),u===y)break;u=u.return}}function Gc(u,f){xm=u,tx=Vc=null,u=u.dependencies,u!==null&&u.firstContext!==null&&(u.lanes&f&&(Ii=!0),u.firstContext=null)}function Zi(u){var f=ue?u._currentValue:u._currentValue2;if(tx!==u)if(u={context:u,memoizedValue:f,next:null},Vc===null){if(xm===null)throw Error(o(308));Vc=u,xm.dependencies={lanes:0,firstContext:u}}else Vc=Vc.next=u;return f}var Ks=null,sa=!1;function sx(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function e2(u,f){u=u.updateQueue,f.updateQueue===u&&(f.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function So(u,f){return{eventTime:u,lane:f,tag:0,payload:null,callback:null,next:null}}function oa(u,f){var y=u.updateQueue;y!==null&&(y=y.shared,Xn!==null&&u.mode&1&&!(Ft&2)?(u=y.interleaved,u===null?(f.next=f,Ks===null?Ks=[y]:Ks.push(y)):(f.next=u.next,u.next=f),y.interleaved=f):(u=y.pending,u===null?f.next=f:(f.next=u.next,u.next=f),y.pending=f))}function Am(u,f,y){if(f=f.updateQueue,f!==null&&(f=f.shared,(y&4194240)!==0)){var E=f.lanes;E&=u.pendingLanes,y|=E,f.lanes=y,Y_(u,y)}}function t2(u,f){var y=u.updateQueue,E=u.alternate;if(E!==null&&(E=E.updateQueue,y===E)){var M=null,P=null;if(y=y.firstBaseUpdate,y!==null){do{var V={eventTime:y.eventTime,lane:y.lane,tag:y.tag,payload:y.payload,callback:y.callback,next:null};P===null?M=P=V:P=P.next=V,y=y.next}while(y!==null);P===null?M=P=f:P=P.next=f}else M=P=f;y={baseState:E.baseState,firstBaseUpdate:M,lastBaseUpdate:P,shared:E.shared,effects:E.effects},u.updateQueue=y;return}u=y.lastBaseUpdate,u===null?y.firstBaseUpdate=f:u.next=f,y.lastBaseUpdate=f}function Sm(u,f,y,E){var M=u.updateQueue;sa=!1;var P=M.firstBaseUpdate,V=M.lastBaseUpdate,Z=M.shared.pending;if(Z!==null){M.shared.pending=null;var ye=Z,De=ye.next;ye.next=null,V===null?P=De:V.next=De,V=ye;var et=u.alternate;et!==null&&(et=et.updateQueue,Z=et.lastBaseUpdate,Z!==V&&(Z===null?et.firstBaseUpdate=De:Z.next=De,et.lastBaseUpdate=ye))}if(P!==null){var Mt=M.baseState;V=0,et=De=ye=null,Z=P;do{var ut=Z.lane,ln=Z.eventTime;if((E&ut)===ut){et!==null&&(et=et.next={eventTime:ln,lane:0,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null});e:{var ot=u,kr=Z;switch(ut=f,ln=y,kr.tag){case 1:if(ot=kr.payload,typeof ot=="function"){Mt=ot.call(ln,Mt,ut);break e}Mt=ot;break e;case 3:ot.flags=ot.flags&-65537|128;case 0:if(ot=kr.payload,ut=typeof ot=="function"?ot.call(ln,Mt,ut):ot,ut==null)break e;Mt=s({},Mt,ut);break e;case 2:sa=!0}}Z.callback!==null&&Z.lane!==0&&(u.flags|=64,ut=M.effects,ut===null?M.effects=[Z]:ut.push(Z))}else ln={eventTime:ln,lane:ut,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null},et===null?(De=et=ln,ye=Mt):et=et.next=ln,V|=ut;if(Z=Z.next,Z===null){if(Z=M.shared.pending,Z===null)break;ut=Z,Z=ut.next,ut.next=null,M.lastBaseUpdate=ut,M.shared.pending=null}}while(!0);if(et===null&&(ye=Mt),M.baseState=ye,M.firstBaseUpdate=De,M.lastBaseUpdate=et,f=M.shared.interleaved,f!==null){M=f;do V|=M.lane,M=M.next;while(M!==f)}else P===null&&(M.shared.lanes=0);Qc|=V,u.lanes=V,u.memoizedState=Mt}}function n2(u,f,y){if(u=f.effects,f.effects=null,u!==null)for(f=0;f<u.length;f++){var E=u[f],M=E.callback;if(M!==null){if(E.callback=null,E=y,typeof M!="function")throw Error(o(191,M));M.call(E)}}}var r2=new r.Component().refs;function ox(u,f,y,E){f=u.memoizedState,y=y(E,f),y=y==null?f:s({},f,y),u.memoizedState=y,u.lanes===0&&(u.updateQueue.baseState=y)}var Em={isMounted:function(u){return(u=u._reactInternals)?N(u)===u:!1},enqueueSetState:function(u,f,y){u=u._reactInternals;var E=ni(),M=ca(u),P=So(E,M);P.payload=f,y!=null&&(P.callback=y),oa(u,P),f=is(u,M,E),f!==null&&Am(f,u,M)},enqueueReplaceState:function(u,f,y){u=u._reactInternals;var E=ni(),M=ca(u),P=So(E,M);P.tag=1,P.payload=f,y!=null&&(P.callback=y),oa(u,P),f=is(u,M,E),f!==null&&Am(f,u,M)},enqueueForceUpdate:function(u,f){u=u._reactInternals;var y=ni(),E=ca(u),M=So(y,E);M.tag=2,f!=null&&(M.callback=f),oa(u,M),f=is(u,E,y),f!==null&&Am(f,u,E)}};function i2(u,f,y,E,M,P,V){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(E,P,V):f.prototype&&f.prototype.isPureReactComponent?!ym(y,E)||!ym(M,P):!0}function s2(u,f,y){var E=!1,M=qi,P=f.contextType;return typeof P=="object"&&P!==null?P=Zi(P):(M=cr(f)?Gs:Ot.current,E=f.contextTypes,P=(E=E!=null)?Qi(u,M):qi),f=new f(y,P),u.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Em,u.stateNode=f,f._reactInternals=u,E&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=M,u.__reactInternalMemoizedMaskedChildContext=P),f}function o2(u,f,y,E){u=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(y,E),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(y,E),f.state!==u&&Em.enqueueReplaceState(f,f.state,null)}function ax(u,f,y,E){var M=u.stateNode;M.props=y,M.state=u.memoizedState,M.refs=r2,sx(u);var P=f.contextType;typeof P=="object"&&P!==null?M.context=Zi(P):(P=cr(f)?Gs:Ot.current,M.context=Qi(u,P)),M.state=u.memoizedState,P=f.getDerivedStateFromProps,typeof P=="function"&&(ox(u,f,P,y),M.state=u.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof M.getSnapshotBeforeUpdate=="function"||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(f=M.state,typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount(),f!==M.state&&Em.enqueueReplaceState(M,M.state,null),Sm(u,y,M,E),M.state=u.memoizedState),typeof M.componentDidMount=="function"&&(u.flags|=4194308)}var jc=[],Wc=0,wm=null,Mm=0,es=[],ts=0,gl=null,Eo=1,wo="";function vl(u,f){jc[Wc++]=Mm,jc[Wc++]=wm,wm=u,Mm=f}function a2(u,f,y){es[ts++]=Eo,es[ts++]=wo,es[ts++]=gl,gl=u;var E=Eo;u=wo;var M=32-bi(E)-1;E&=~(1<<M),y+=1;var P=32-bi(f)+M;if(30<P){var V=M-M%5;P=(E&(1<<V)-1).toString(32),E>>=V,M-=V,Eo=1<<32-bi(f)+M|y<<M|E,wo=P+u}else Eo=1<<P|y<<M|E,wo=u}function lx(u){u.return!==null&&(vl(u,1),a2(u,1,0))}function cx(u){for(;u===wm;)wm=jc[--Wc],jc[Wc]=null,Mm=jc[--Wc],jc[Wc]=null;for(;u===gl;)gl=es[--ts],es[ts]=null,wo=es[--ts],es[ts]=null,Eo=es[--ts],es[ts]=null}var Ri=null,Pi=null,An=!1,af=!1,Ss=null;function l2(u,f){var y=ss(5,null,null,0);y.elementType="DELETED",y.stateNode=f,y.return=u,f=u.deletions,f===null?(u.deletions=[y],u.flags|=16):f.push(y)}function c2(u,f){switch(u.tag){case 5:return f=Kt(f,u.type,u.pendingProps),f!==null?(u.stateNode=f,Ri=u,Pi=Uc(f),!0):!1;case 6:return f=xr(f,u.pendingProps),f!==null?(u.stateNode=f,Ri=u,Pi=null,!0):!1;case 13:if(f=Yi(f),f!==null){var y=gl!==null?{id:Eo,overflow:wo}:null;return u.memoizedState={dehydrated:f,treeContext:y,retryLane:1073741824},y=ss(18,null,null,0),y.stateNode=f,y.return=u,u.child=y,Ri=u,Pi=null,!0}return!1;default:return!1}}function ux(u){return(u.mode&1)!==0&&(u.flags&128)===0}function hx(u){if(An){var f=Pi;if(f){var y=f;if(!c2(u,f)){if(ux(u))throw Error(o(418));f=ia(y);var E=Ri;f&&c2(u,f)?l2(E,y):(u.flags=u.flags&-4097|2,An=!1,Ri=u)}}else{if(ux(u))throw Error(o(418));u.flags=u.flags&-4097|2,An=!1,Ri=u}}}function u2(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;Ri=u}function lf(u){if(!he||u!==Ri)return!1;if(!An)return u2(u),An=!0,!1;if(u.tag!==3&&(u.tag!==5||Ke(u.type)&&!pe(u.type,u.memoizedProps))){var f=Pi;if(f){if(ux(u)){for(u=Pi;u;)u=ia(u);throw Error(o(418))}for(;f;)l2(u,f),f=ia(f)}}if(u2(u),u.tag===13){if(!he)throw Error(o(316));if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));Pi=U(u)}else Pi=Ri?ia(u.stateNode):null;return!0}function Xc(){he&&(Pi=Ri=null,af=An=!1)}function fx(u){Ss===null?Ss=[u]:Ss.push(u)}function cf(u,f,y){if(u=y.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(y._owner){if(y=y._owner,y){if(y.tag!==1)throw Error(o(309));var E=y.stateNode}if(!E)throw Error(o(147,u));var M=E,P=""+u;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===P?f.ref:(f=function(V){var Z=M.refs;Z===r2&&(Z=M.refs={}),V===null?delete Z[P]:Z[P]=V},f._stringRef=P,f)}if(typeof u!="string")throw Error(o(284));if(!y._owner)throw Error(o(290,u))}return u}function Tm(u,f){throw u=Object.prototype.toString.call(f),Error(o(31,u==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":u))}function h2(u){var f=u._init;return f(u._payload)}function f2(u){function f(le,ne){if(u){var ge=le.deletions;ge===null?(le.deletions=[ne],le.flags|=16):ge.push(ne)}}function y(le,ne){if(!u)return null;for(;ne!==null;)f(le,ne),ne=ne.sibling;return null}function E(le,ne){for(le=new Map;ne!==null;)ne.key!==null?le.set(ne.key,ne):le.set(ne.index,ne),ne=ne.sibling;return le}function M(le,ne){return le=ha(le,ne),le.index=0,le.sibling=null,le}function P(le,ne,ge){return le.index=ge,u?(ge=le.alternate,ge!==null?(ge=ge.index,ge<ne?(le.flags|=2,ne):ge):(le.flags|=2,ne)):(le.flags|=1048576,ne)}function V(le){return u&&le.alternate===null&&(le.flags|=2),le}function Z(le,ne,ge,Xe){return ne===null||ne.tag!==6?(ne=$x(ge,le.mode,Xe),ne.return=le,ne):(ne=M(ne,ge),ne.return=le,ne)}function ye(le,ne,ge,Xe){var it=ge.type;return it===h?et(le,ne,ge.props.children,Xe,ge.key):ne!==null&&(ne.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===S&&h2(it)===ne.type)?(Xe=M(ne,ge.props),Xe.ref=cf(le,ne,ge),Xe.return=le,Xe):(Xe=rg(ge.type,ge.key,ge.props,null,le.mode,Xe),Xe.ref=cf(le,ne,ge),Xe.return=le,Xe)}function De(le,ne,ge,Xe){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==ge.containerInfo||ne.stateNode.implementation!==ge.implementation?(ne=Yx(ge,le.mode,Xe),ne.return=le,ne):(ne=M(ne,ge.children||[]),ne.return=le,ne)}function et(le,ne,ge,Xe,it){return ne===null||ne.tag!==7?(ne=wl(ge,le.mode,Xe,it),ne.return=le,ne):(ne=M(ne,ge),ne.return=le,ne)}function Mt(le,ne,ge){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return ne=$x(""+ne,le.mode,ge),ne.return=le,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case l:return ge=rg(ne.type,ne.key,ne.props,null,le.mode,ge),ge.ref=cf(le,null,ne),ge.return=le,ge;case c:return ne=Yx(ne,le.mode,ge),ne.return=le,ne;case S:var Xe=ne._init;return Mt(le,Xe(ne._payload),ge)}if($(ne)||C(ne))return ne=wl(ne,le.mode,ge,null),ne.return=le,ne;Tm(le,ne)}return null}function ut(le,ne,ge,Xe){var it=ne!==null?ne.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number")return it!==null?null:Z(le,ne,""+ge,Xe);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case l:return ge.key===it?ye(le,ne,ge,Xe):null;case c:return ge.key===it?De(le,ne,ge,Xe):null;case S:return it=ge._init,ut(le,ne,it(ge._payload),Xe)}if($(ge)||C(ge))return it!==null?null:et(le,ne,ge,Xe,null);Tm(le,ge)}return null}function ln(le,ne,ge,Xe,it){if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number")return le=le.get(ge)||null,Z(ne,le,""+Xe,it);if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case l:return le=le.get(Xe.key===null?ge:Xe.key)||null,ye(ne,le,Xe,it);case c:return le=le.get(Xe.key===null?ge:Xe.key)||null,De(ne,le,Xe,it);case S:var Bt=Xe._init;return ln(le,ne,ge,Bt(Xe._payload),it)}if($(Xe)||C(Xe))return le=le.get(ge)||null,et(ne,le,Xe,it,null);Tm(ne,Xe)}return null}function ot(le,ne,ge,Xe){for(var it=null,Bt=null,Tt=ne,Zt=ne=0,fr=null;Tt!==null&&Zt<ge.length;Zt++){Tt.index>Zt?(fr=Tt,Tt=null):fr=Tt.sibling;var en=ut(le,Tt,ge[Zt],Xe);if(en===null){Tt===null&&(Tt=fr);break}u&&Tt&&en.alternate===null&&f(le,Tt),ne=P(en,ne,Zt),Bt===null?it=en:Bt.sibling=en,Bt=en,Tt=fr}if(Zt===ge.length)return y(le,Tt),An&&vl(le,Zt),it;if(Tt===null){for(;Zt<ge.length;Zt++)Tt=Mt(le,ge[Zt],Xe),Tt!==null&&(ne=P(Tt,ne,Zt),Bt===null?it=Tt:Bt.sibling=Tt,Bt=Tt);return An&&vl(le,Zt),it}for(Tt=E(le,Tt);Zt<ge.length;Zt++)fr=ln(Tt,le,Zt,ge[Zt],Xe),fr!==null&&(u&&fr.alternate!==null&&Tt.delete(fr.key===null?Zt:fr.key),ne=P(fr,ne,Zt),Bt===null?it=fr:Bt.sibling=fr,Bt=fr);return u&&Tt.forEach(function(fa){return f(le,fa)}),An&&vl(le,Zt),it}function kr(le,ne,ge,Xe){var it=C(ge);if(typeof it!="function")throw Error(o(150));if(ge=it.call(ge),ge==null)throw Error(o(151));for(var Bt=it=null,Tt=ne,Zt=ne=0,fr=null,en=ge.next();Tt!==null&&!en.done;Zt++,en=ge.next()){Tt.index>Zt?(fr=Tt,Tt=null):fr=Tt.sibling;var fa=ut(le,Tt,en.value,Xe);if(fa===null){Tt===null&&(Tt=fr);break}u&&Tt&&fa.alternate===null&&f(le,Tt),ne=P(fa,ne,Zt),Bt===null?it=fa:Bt.sibling=fa,Bt=fa,Tt=fr}if(en.done)return y(le,Tt),An&&vl(le,Zt),it;if(Tt===null){for(;!en.done;Zt++,en=ge.next())en=Mt(le,en.value,Xe),en!==null&&(ne=P(en,ne,Zt),Bt===null?it=en:Bt.sibling=en,Bt=en);return An&&vl(le,Zt),it}for(Tt=E(le,Tt);!en.done;Zt++,en=ge.next())en=ln(Tt,le,Zt,en.value,Xe),en!==null&&(u&&en.alternate!==null&&Tt.delete(en.key===null?Zt:en.key),ne=P(en,ne,Zt),Bt===null?it=en:Bt.sibling=en,Bt=en);return u&&Tt.forEach(function(J9){return f(le,J9)}),An&&vl(le,Zt),it}function os(le,ne,ge,Xe){if(typeof ge=="object"&&ge!==null&&ge.type===h&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case l:e:{for(var it=ge.key,Bt=ne;Bt!==null;){if(Bt.key===it){if(it=ge.type,it===h){if(Bt.tag===7){y(le,Bt.sibling),ne=M(Bt,ge.props.children),ne.return=le,le=ne;break e}}else if(Bt.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===S&&h2(it)===Bt.type){y(le,Bt.sibling),ne=M(Bt,ge.props),ne.ref=cf(le,Bt,ge),ne.return=le,le=ne;break e}y(le,Bt);break}else f(le,Bt);Bt=Bt.sibling}ge.type===h?(ne=wl(ge.props.children,le.mode,Xe,ge.key),ne.return=le,le=ne):(Xe=rg(ge.type,ge.key,ge.props,null,le.mode,Xe),Xe.ref=cf(le,ne,ge),Xe.return=le,le=Xe)}return V(le);case c:e:{for(Bt=ge.key;ne!==null;){if(ne.key===Bt)if(ne.tag===4&&ne.stateNode.containerInfo===ge.containerInfo&&ne.stateNode.implementation===ge.implementation){y(le,ne.sibling),ne=M(ne,ge.children||[]),ne.return=le,le=ne;break e}else{y(le,ne);break}else f(le,ne);ne=ne.sibling}ne=Yx(ge,le.mode,Xe),ne.return=le,le=ne}return V(le);case S:return Bt=ge._init,os(le,ne,Bt(ge._payload),Xe)}if($(ge))return ot(le,ne,ge,Xe);if(C(ge))return kr(le,ne,ge,Xe);Tm(le,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"?(ge=""+ge,ne!==null&&ne.tag===6?(y(le,ne.sibling),ne=M(ne,ge),ne.return=le,le=ne):(y(le,ne),ne=$x(ge,le.mode,Xe),ne.return=le,le=ne),V(le)):y(le,ne)}return os}var Jc=f2(!0),d2=f2(!1),uf={},ns=lr(uf),hf=lr(uf),Kc=lr(uf);function $s(u){if(u===uf)throw Error(o(174));return u}function dx(u,f){Ze(Kc,f),Ze(hf,u),Ze(ns,uf),u=ce(f),mt(ns),Ze(ns,u)}function $c(){mt(ns),mt(hf),mt(Kc)}function p2(u){var f=$s(Kc.current),y=$s(ns.current);f=O(y,u.type,f),y!==f&&(Ze(hf,u),Ze(ns,f))}function px(u){hf.current===u&&(mt(ns),mt(hf))}var Mn=lr(0);function Cm(u){for(var f=u;f!==null;){if(f.tag===13){var y=f.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||nf(y)||rf(y)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if(f.flags&128)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var mx=[];function gx(){for(var u=0;u<mx.length;u++){var f=mx[u];ue?f._workInProgressVersionPrimary=null:f._workInProgressVersionSecondary=null}mx.length=0}var bm=a.ReactCurrentDispatcher,rs=a.ReactCurrentBatchConfig,Yc=0,Ln=null,Nr=null,hr=null,Rm=!1,ff=!1,df=0,y9=0;function Or(){throw Error(o(321))}function vx(u,f){if(f===null)return!1;for(var y=0;y<f.length&&y<u.length;y++)if(!Xs(u[y],f[y]))return!1;return!0}function yx(u,f,y,E,M,P){if(Yc=P,Ln=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,bm.current=u===null||u.memoizedState===null?S9:E9,u=y(E,M),ff){P=0;do{if(ff=!1,df=0,25<=P)throw Error(o(301));P+=1,hr=Nr=null,f.updateQueue=null,bm.current=w9,u=y(E,M)}while(ff)}if(bm.current=Bm,f=Nr!==null&&Nr.next!==null,Yc=0,hr=Nr=Ln=null,Rm=!1,f)throw Error(o(300));return u}function _x(){var u=df!==0;return df=0,u}function Mo(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hr===null?Ln.memoizedState=hr=u:hr=hr.next=u,hr}function Ys(){if(Nr===null){var u=Ln.alternate;u=u!==null?u.memoizedState:null}else u=Nr.next;var f=hr===null?Ln.memoizedState:hr.next;if(f!==null)hr=f,Nr=u;else{if(u===null)throw Error(o(310));Nr=u,u={memoizedState:Nr.memoizedState,baseState:Nr.baseState,baseQueue:Nr.baseQueue,queue:Nr.queue,next:null},hr===null?Ln.memoizedState=hr=u:hr=hr.next=u}return hr}function yl(u,f){return typeof f=="function"?f(u):f}function Pm(u){var f=Ys(),y=f.queue;if(y===null)throw Error(o(311));y.lastRenderedReducer=u;var E=Nr,M=E.baseQueue,P=y.pending;if(P!==null){if(M!==null){var V=M.next;M.next=P.next,P.next=V}E.baseQueue=M=P,y.pending=null}if(M!==null){P=M.next,E=E.baseState;var Z=V=null,ye=null,De=P;do{var et=De.lane;if((Yc&et)===et)ye!==null&&(ye=ye.next={lane:0,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null}),E=De.hasEagerState?De.eagerState:u(E,De.action);else{var Mt={lane:et,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null};ye===null?(Z=ye=Mt,V=E):ye=ye.next=Mt,Ln.lanes|=et,Qc|=et}De=De.next}while(De!==null&&De!==P);ye===null?V=E:ye.next=Z,Xs(E,f.memoizedState)||(Ii=!0),f.memoizedState=E,f.baseState=V,f.baseQueue=ye,y.lastRenderedState=E}if(u=y.interleaved,u!==null){M=u;do P=M.lane,Ln.lanes|=P,Qc|=P,M=M.next;while(M!==u)}else M===null&&(y.lanes=0);return[f.memoizedState,y.dispatch]}function Im(u){var f=Ys(),y=f.queue;if(y===null)throw Error(o(311));y.lastRenderedReducer=u;var E=y.dispatch,M=y.pending,P=f.memoizedState;if(M!==null){y.pending=null;var V=M=M.next;do P=u(P,V.action),V=V.next;while(V!==M);Xs(P,f.memoizedState)||(Ii=!0),f.memoizedState=P,f.baseQueue===null&&(f.baseState=P),y.lastRenderedState=P}return[P,E]}function m2(){}function g2(u,f){var y=Ln,E=Ys(),M=f(),P=!Xs(E.memoizedState,M);if(P&&(E.memoizedState=M,Ii=!0),E=E.queue,mf(_2.bind(null,y,E,u),[u]),E.getSnapshot!==f||P||hr!==null&&hr.memoizedState.tag&1){if(y.flags|=2048,pf(9,y2.bind(null,y,E,M,f),void 0,null),Xn===null)throw Error(o(349));Yc&30||v2(y,f,M)}return M}function v2(u,f,y){u.flags|=16384,u={getSnapshot:f,value:y},f=Ln.updateQueue,f===null?(f={lastEffect:null,stores:null},Ln.updateQueue=f,f.stores=[u]):(y=f.stores,y===null?f.stores=[u]:y.push(u))}function y2(u,f,y,E){f.value=y,f.getSnapshot=E,x2(f)&&is(u,1,-1)}function _2(u,f,y){return y(function(){x2(f)&&is(u,1,-1)})}function x2(u){var f=u.getSnapshot;u=u.value;try{var y=f();return!Xs(u,y)}catch{return!0}}function xx(u){var f=Mo();return typeof u=="function"&&(u=u()),f.memoizedState=f.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yl,lastRenderedState:u},f.queue=u,u=u.dispatch=A9.bind(null,Ln,u),[f.memoizedState,u]}function pf(u,f,y,E){return u={tag:u,create:f,destroy:y,deps:E,next:null},f=Ln.updateQueue,f===null?(f={lastEffect:null,stores:null},Ln.updateQueue=f,f.lastEffect=u.next=u):(y=f.lastEffect,y===null?f.lastEffect=u.next=u:(E=y.next,y.next=u,u.next=E,f.lastEffect=u)),u}function A2(){return Ys().memoizedState}function Lm(u,f,y,E){var M=Mo();Ln.flags|=u,M.memoizedState=pf(1|f,y,void 0,E===void 0?null:E)}function Dm(u,f,y,E){var M=Ys();E=E===void 0?null:E;var P=void 0;if(Nr!==null){var V=Nr.memoizedState;if(P=V.destroy,E!==null&&vx(E,V.deps)){M.memoizedState=pf(f,y,P,E);return}}Ln.flags|=u,M.memoizedState=pf(1|f,y,P,E)}function Ax(u,f){return Lm(8390656,8,u,f)}function mf(u,f){return Dm(2048,8,u,f)}function S2(u,f){return Dm(4,2,u,f)}function E2(u,f){return Dm(4,4,u,f)}function w2(u,f){if(typeof f=="function")return u=u(),f(u),function(){f(null)};if(f!=null)return u=u(),f.current=u,function(){f.current=null}}function M2(u,f,y){return y=y!=null?y.concat([u]):null,Dm(4,4,w2.bind(null,f,u),y)}function Sx(){}function T2(u,f){var y=Ys();f=f===void 0?null:f;var E=y.memoizedState;return E!==null&&f!==null&&vx(f,E[1])?E[0]:(y.memoizedState=[u,f],u)}function C2(u,f){var y=Ys();f=f===void 0?null:f;var E=y.memoizedState;return E!==null&&f!==null&&vx(f,E[1])?E[0]:(u=u(),y.memoizedState=[u,f],u)}function _9(u,f){var y=Qt;Qt=y!==0&&4>y?y:4,u(!0);var E=rs.transition;rs.transition={};try{u(!1),f()}finally{Qt=y,rs.transition=E}}function b2(){return Ys().memoizedState}function x9(u,f,y){var E=ca(u);y={lane:E,action:y,hasEagerState:!1,eagerState:null,next:null},R2(u)?P2(f,y):(I2(u,f,y),y=ni(),u=is(u,E,y),u!==null&&L2(u,f,E))}function A9(u,f,y){var E=ca(u),M={lane:E,action:y,hasEagerState:!1,eagerState:null,next:null};if(R2(u))P2(f,M);else{I2(u,f,M);var P=u.alternate;if(u.lanes===0&&(P===null||P.lanes===0)&&(P=f.lastRenderedReducer,P!==null))try{var V=f.lastRenderedState,Z=P(V,y);if(M.hasEagerState=!0,M.eagerState=Z,Xs(Z,V))return}catch{}finally{}y=ni(),u=is(u,E,y),u!==null&&L2(u,f,E)}}function R2(u){var f=u.alternate;return u===Ln||f!==null&&f===Ln}function P2(u,f){ff=Rm=!0;var y=u.pending;y===null?f.next=f:(f.next=y.next,y.next=f),u.pending=f}function I2(u,f,y){Xn!==null&&u.mode&1&&!(Ft&2)?(u=f.interleaved,u===null?(y.next=y,Ks===null?Ks=[f]:Ks.push(f)):(y.next=u.next,u.next=y),f.interleaved=y):(u=f.pending,u===null?y.next=y:(y.next=u.next,u.next=y),f.pending=y)}function L2(u,f,y){if(y&4194240){var E=f.lanes;E&=u.pendingLanes,y|=E,f.lanes=y,Y_(u,y)}}var Bm={readContext:Zi,useCallback:Or,useContext:Or,useEffect:Or,useImperativeHandle:Or,useInsertionEffect:Or,useLayoutEffect:Or,useMemo:Or,useReducer:Or,useRef:Or,useState:Or,useDebugValue:Or,useDeferredValue:Or,useTransition:Or,useMutableSource:Or,useSyncExternalStore:Or,useId:Or,unstable_isNewReconciler:!1},S9={readContext:Zi,useCallback:function(u,f){return Mo().memoizedState=[u,f===void 0?null:f],u},useContext:Zi,useEffect:Ax,useImperativeHandle:function(u,f,y){return y=y!=null?y.concat([u]):null,Lm(4194308,4,w2.bind(null,f,u),y)},useLayoutEffect:function(u,f){return Lm(4194308,4,u,f)},useInsertionEffect:function(u,f){return Lm(4,2,u,f)},useMemo:function(u,f){var y=Mo();return f=f===void 0?null:f,u=u(),y.memoizedState=[u,f],u},useReducer:function(u,f,y){var E=Mo();return f=y!==void 0?y(f):f,E.memoizedState=E.baseState=f,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:f},E.queue=u,u=u.dispatch=x9.bind(null,Ln,u),[E.memoizedState,u]},useRef:function(u){var f=Mo();return u={current:u},f.memoizedState=u},useState:xx,useDebugValue:Sx,useDeferredValue:function(u){var f=xx(u),y=f[0],E=f[1];return Ax(function(){var M=rs.transition;rs.transition={};try{E(u)}finally{rs.transition=M}},[u]),y},useTransition:function(){var u=xx(!1),f=u[0];return u=_9.bind(null,u[1]),Mo().memoizedState=u,[f,u]},useMutableSource:function(){},useSyncExternalStore:function(u,f,y){var E=Ln,M=Mo();if(An){if(y===void 0)throw Error(o(407));y=y()}else{if(y=f(),Xn===null)throw Error(o(349));Yc&30||v2(E,f,y)}M.memoizedState=y;var P={value:y,getSnapshot:f};return M.queue=P,Ax(_2.bind(null,E,P,u),[u]),E.flags|=2048,pf(9,y2.bind(null,E,P,y,f),void 0,null),y},useId:function(){var u=Mo(),f=Xn.identifierPrefix;if(An){var y=wo,E=Eo;y=(E&~(1<<32-bi(E)-1)).toString(32)+y,f=":"+f+"R"+y,y=df++,0<y&&(f+="H"+y.toString(32)),f+=":"}else y=y9++,f=":"+f+"r"+y.toString(32)+":";return u.memoizedState=f},unstable_isNewReconciler:!1},E9={readContext:Zi,useCallback:T2,useContext:Zi,useEffect:mf,useImperativeHandle:M2,useInsertionEffect:S2,useLayoutEffect:E2,useMemo:C2,useReducer:Pm,useRef:A2,useState:function(){return Pm(yl)},useDebugValue:Sx,useDeferredValue:function(u){var f=Pm(yl),y=f[0],E=f[1];return mf(function(){var M=rs.transition;rs.transition={};try{E(u)}finally{rs.transition=M}},[u]),y},useTransition:function(){var u=Pm(yl)[0],f=Ys().memoizedState;return[u,f]},useMutableSource:m2,useSyncExternalStore:g2,useId:b2,unstable_isNewReconciler:!1},w9={readContext:Zi,useCallback:T2,useContext:Zi,useEffect:mf,useImperativeHandle:M2,useInsertionEffect:S2,useLayoutEffect:E2,useMemo:C2,useReducer:Im,useRef:A2,useState:function(){return Im(yl)},useDebugValue:Sx,useDeferredValue:function(u){var f=Im(yl),y=f[0],E=f[1];return mf(function(){var M=rs.transition;rs.transition={};try{E(u)}finally{rs.transition=M}},[u]),y},useTransition:function(){var u=Im(yl)[0],f=Ys().memoizedState;return[u,f]},useMutableSource:m2,useSyncExternalStore:g2,useId:b2,unstable_isNewReconciler:!1};function Ex(u,f){try{var y="",E=f;do y+=v9(E),E=E.return;while(E);var M=y}catch(P){M=`
Error generating stack: `+P.message+`
`+P.stack}return{value:u,source:f,stack:M}}function wx(u,f){try{console.error(f.value)}catch(y){setTimeout(function(){throw y})}}var M9=typeof WeakMap=="function"?WeakMap:Map;function D2(u,f,y){y=So(-1,y),y.tag=3,y.payload={element:null};var E=f.value;return y.callback=function(){Ym||(Ym=!0,Vx=E),wx(u,f)},y}function B2(u,f,y){y=So(-1,y),y.tag=3;var E=u.type.getDerivedStateFromError;if(typeof E=="function"){var M=f.value;y.payload=function(){return E(M)},y.callback=function(){wx(u,f)}}var P=u.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(y.callback=function(){wx(u,f),typeof E!="function"&&(aa===null?aa=new Set([this]):aa.add(this));var V=f.stack;this.componentDidCatch(f.value,{componentStack:V!==null?V:""})}),y}function N2(u,f,y){var E=u.pingCache;if(E===null){E=u.pingCache=new M9;var M=new Set;E.set(f,M)}else M=E.get(f),M===void 0&&(M=new Set,E.set(f,M));M.has(y)||(M.add(y),u=U9.bind(null,u,f,y),f.then(u,u))}function O2(u){do{var f;if((f=u.tag===13)&&(f=u.memoizedState,f=f!==null?f.dehydrated!==null:!0),f)return u;u=u.return}while(u!==null);return null}function F2(u,f,y,E,M){return u.mode&1?(u.flags|=65536,u.lanes=M,u):(u===f?u.flags|=65536:(u.flags|=128,y.flags|=131072,y.flags&=-52805,y.tag===1&&(y.alternate===null?y.tag=17:(f=So(-1,1),f.tag=2,oa(y,f))),y.lanes|=1),u)}function qs(u){u.flags|=4}function k2(u,f){if(u!==null&&u.child===f.child)return!0;if(f.flags&16)return!1;for(u=f.child;u!==null;){if(u.flags&12854||u.subtreeFlags&12854)return!1;u=u.sibling}return!0}var gf,vf,Nm,Om;if(ae)gf=function(u,f){for(var y=f.child;y!==null;){if(y.tag===5||y.tag===6)te(u,y.stateNode);else if(y.tag!==4&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===f)break;for(;y.sibling===null;){if(y.return===null||y.return===f)return;y=y.return}y.sibling.return=y.return,y=y.sibling}},vf=function(){},Nm=function(u,f,y,E,M){if(u=u.memoizedProps,u!==E){var P=f.stateNode,V=$s(ns.current);y=ee(P,y,u,E,M,V),(f.updateQueue=y)&&qs(f)}},Om=function(u,f,y,E){y!==E&&qs(f)};else if(z){gf=function(u,f,y,E){for(var M=f.child;M!==null;){if(M.tag===5){var P=M.stateNode;y&&E&&(P=un(P,M.type,M.memoizedProps,M)),te(u,P)}else if(M.tag===6)P=M.stateNode,y&&E&&(P=Un(P,M.memoizedProps,M)),te(u,P);else if(M.tag!==4){if(M.tag===22&&M.memoizedState!==null)P=M.child,P!==null&&(P.return=M),gf(u,M,!0,!0);else if(M.child!==null){M.child.return=M,M=M.child;continue}}if(M===f)break;for(;M.sibling===null;){if(M.return===null||M.return===f)return;M=M.return}M.sibling.return=M.return,M=M.sibling}};var U2=function(u,f,y,E){for(var M=f.child;M!==null;){if(M.tag===5){var P=M.stateNode;y&&E&&(P=un(P,M.type,M.memoizedProps,M)),nt(u,P)}else if(M.tag===6)P=M.stateNode,y&&E&&(P=Un(P,M.memoizedProps,M)),nt(u,P);else if(M.tag!==4){if(M.tag===22&&M.memoizedState!==null)P=M.child,P!==null&&(P.return=M),U2(u,M,!0,!0);else if(M.child!==null){M.child.return=M,M=M.child;continue}}if(M===f)break;for(;M.sibling===null;){if(M.return===null||M.return===f)return;M=M.return}M.sibling.return=M.return,M=M.sibling}};vf=function(u,f){var y=f.stateNode;if(!k2(u,f)){u=y.containerInfo;var E=tt(u);U2(E,f,!1,!1),y.pendingChildren=E,qs(f),It(u,E)}},Nm=function(u,f,y,E,M){var P=u.stateNode,V=u.memoizedProps;if((u=k2(u,f))&&V===E)f.stateNode=P;else{var Z=f.stateNode,ye=$s(ns.current),De=null;V!==E&&(De=ee(Z,y,V,E,M,ye)),u&&De===null?f.stateNode=P:(P=Be(P,De,y,V,E,f,u,Z),be(P,y,E,M,ye)&&qs(f),f.stateNode=P,u?qs(f):gf(P,f,!1,!1))}},Om=function(u,f,y,E){y!==E?(u=$s(Kc.current),y=$s(ns.current),f.stateNode=Me(E,u,y,f),qs(f)):f.stateNode=u.stateNode}}else vf=function(){},Nm=function(){},Om=function(){};function yf(u,f){if(!An)switch(u.tailMode){case"hidden":f=u.tail;for(var y=null;f!==null;)f.alternate!==null&&(y=f),f=f.sibling;y===null?u.tail=null:y.sibling=null;break;case"collapsed":y=u.tail;for(var E=null;y!==null;)y.alternate!==null&&(E=y),y=y.sibling;E===null?f||u.tail===null?u.tail=null:u.tail.sibling=null:E.sibling=null}}function Fr(u){var f=u.alternate!==null&&u.alternate.child===u.child,y=0,E=0;if(f)for(var M=u.child;M!==null;)y|=M.lanes|M.childLanes,E|=M.subtreeFlags&14680064,E|=M.flags&14680064,M.return=u,M=M.sibling;else for(M=u.child;M!==null;)y|=M.lanes|M.childLanes,E|=M.subtreeFlags,E|=M.flags,M.return=u,M=M.sibling;return u.subtreeFlags|=E,u.childLanes=y,f}function T9(u,f,y){var E=f.pendingProps;switch(cx(f),f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fr(f),null;case 1:return cr(f.type)&&zn(),Fr(f),null;case 3:return E=f.stateNode,$c(),mt(In),mt(Ot),gx(),E.pendingContext&&(E.context=E.pendingContext,E.pendingContext=null),(u===null||u.child===null)&&(lf(f)?qs(f):u===null||u.memoizedState.isDehydrated&&!(f.flags&256)||(f.flags|=1024,Ss!==null&&(Wx(Ss),Ss=null))),vf(u,f),Fr(f),null;case 5:px(f),y=$s(Kc.current);var M=f.type;if(u!==null&&f.stateNode!=null)Nm(u,f,M,E,y),u.ref!==f.ref&&(f.flags|=512,f.flags|=2097152);else{if(!E){if(f.stateNode===null)throw Error(o(166));return Fr(f),null}if(u=$s(ns.current),lf(f)){if(!he)throw Error(o(175));u=W_(f.stateNode,f.type,f.memoizedProps,y,u,f,!af),f.updateQueue=u,u!==null&&qs(f)}else{var P=Q(M,E,y,u,f);gf(P,f,!1,!1),f.stateNode=P,be(P,M,E,y,u)&&qs(f)}f.ref!==null&&(f.flags|=512,f.flags|=2097152)}return Fr(f),null;case 6:if(u&&f.stateNode!=null)Om(u,f,u.memoizedProps,E);else{if(typeof E!="string"&&f.stateNode===null)throw Error(o(166));if(u=$s(Kc.current),y=$s(ns.current),lf(f)){if(!he)throw Error(o(176));if(u=f.stateNode,E=f.memoizedProps,(y=X_(u,E,f,!af))&&(M=Ri,M!==null))switch(P=(M.mode&1)!==0,M.tag){case 3:st(M.stateNode.containerInfo,u,E,P);break;case 5:ft(M.type,M.memoizedProps,M.stateNode,u,E,P)}y&&qs(f)}else f.stateNode=Me(E,u,y,f)}return Fr(f),null;case 13:if(mt(Mn),E=f.memoizedState,An&&Pi!==null&&f.mode&1&&!(f.flags&128)){for(u=Pi;u;)u=ia(u);return Xc(),f.flags|=98560,f}if(E!==null&&E.dehydrated!==null){if(E=lf(f),u===null){if(!E)throw Error(o(318));if(!he)throw Error(o(344));if(u=f.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));J_(u,f)}else Xc(),!(f.flags&128)&&(f.memoizedState=null),f.flags|=4;return Fr(f),null}return Ss!==null&&(Wx(Ss),Ss=null),f.flags&128?(f.lanes=y,f):(E=E!==null,y=!1,u===null?lf(f):y=u.memoizedState!==null,E&&!y&&(f.child.flags|=8192,f.mode&1&&(u===null||Mn.current&1?tr===0&&(tr=3):Jx())),f.updateQueue!==null&&(f.flags|=4),Fr(f),null);case 4:return $c(),vf(u,f),u===null&&ve(f.stateNode.containerInfo),Fr(f),null;case 10:return rx(f.type._context),Fr(f),null;case 17:return cr(f.type)&&zn(),Fr(f),null;case 19:if(mt(Mn),M=f.memoizedState,M===null)return Fr(f),null;if(E=(f.flags&128)!==0,P=M.rendering,P===null)if(E)yf(M,!1);else{if(tr!==0||u!==null&&u.flags&128)for(u=f.child;u!==null;){if(P=Cm(u),P!==null){for(f.flags|=128,yf(M,!1),u=P.updateQueue,u!==null&&(f.updateQueue=u,f.flags|=4),f.subtreeFlags=0,u=y,E=f.child;E!==null;)y=E,M=u,y.flags&=14680066,P=y.alternate,P===null?(y.childLanes=0,y.lanes=M,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=P.childLanes,y.lanes=P.lanes,y.child=P.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=P.memoizedProps,y.memoizedState=P.memoizedState,y.updateQueue=P.updateQueue,y.type=P.type,M=P.dependencies,y.dependencies=M===null?null:{lanes:M.lanes,firstContext:M.firstContext}),E=E.sibling;return Ze(Mn,Mn.current&1|2),f.child}u=u.sibling}M.tail!==null&&ur()>Hx&&(f.flags|=128,E=!0,yf(M,!1),f.lanes=4194304)}else{if(!E)if(u=Cm(P),u!==null){if(f.flags|=128,E=!0,u=u.updateQueue,u!==null&&(f.updateQueue=u,f.flags|=4),yf(M,!0),M.tail===null&&M.tailMode==="hidden"&&!P.alternate&&!An)return Fr(f),null}else 2*ur()-M.renderingStartTime>Hx&&y!==1073741824&&(f.flags|=128,E=!0,yf(M,!1),f.lanes=4194304);M.isBackwards?(P.sibling=f.child,f.child=P):(u=M.last,u!==null?u.sibling=P:f.child=P,M.last=P)}return M.tail!==null?(f=M.tail,M.rendering=f,M.tail=f.sibling,M.renderingStartTime=ur(),f.sibling=null,u=Mn.current,Ze(Mn,E?u&1|2:u&1),f):(Fr(f),null);case 22:case 23:return Xx(),E=f.memoizedState!==null,u!==null&&u.memoizedState!==null!==E&&(f.flags|=8192),E&&f.mode&1?Li&1073741824&&(Fr(f),ae&&f.subtreeFlags&6&&(f.flags|=8192)):Fr(f),null;case 24:return null;case 25:return null}throw Error(o(156,f.tag))}var C9=a.ReactCurrentOwner,Ii=!1;function ti(u,f,y,E){f.child=u===null?d2(f,null,y,E):Jc(f,u.child,y,E)}function z2(u,f,y,E,M){y=y.render;var P=f.ref;return Gc(f,M),E=yx(u,f,y,E,P,M),y=_x(),u!==null&&!Ii?(f.updateQueue=u.updateQueue,f.flags&=-2053,u.lanes&=~M,To(u,f,M)):(An&&y&&lx(f),f.flags|=1,ti(u,f,E,M),f.child)}function H2(u,f,y,E,M){if(u===null){var P=y.type;return typeof P=="function"&&!Kx(P)&&P.defaultProps===void 0&&y.compare===null&&y.defaultProps===void 0?(f.tag=15,f.type=P,V2(u,f,P,E,M)):(u=rg(y.type,null,E,f,f.mode,M),u.ref=f.ref,u.return=f,f.child=u)}if(P=u.child,!(u.lanes&M)){var V=P.memoizedProps;if(y=y.compare,y=y!==null?y:ym,y(V,E)&&u.ref===f.ref)return To(u,f,M)}return f.flags|=1,u=ha(P,E),u.ref=f.ref,u.return=f,f.child=u}function V2(u,f,y,E,M){if(u!==null&&ym(u.memoizedProps,E)&&u.ref===f.ref)if(Ii=!1,(u.lanes&M)!==0)u.flags&131072&&(Ii=!0);else return f.lanes=u.lanes,To(u,f,M);return Mx(u,f,y,E,M)}function G2(u,f,y){var E=f.pendingProps,M=E.children,P=u!==null?u.memoizedState:null;if(E.mode==="hidden")if(!(f.mode&1))f.memoizedState={baseLanes:0,cachePool:null},Ze(qc,Li),Li|=y;else if(y&1073741824)f.memoizedState={baseLanes:0,cachePool:null},E=P!==null?P.baseLanes:y,Ze(qc,Li),Li|=E;else return u=P!==null?P.baseLanes|y:y,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:u,cachePool:null},f.updateQueue=null,Ze(qc,Li),Li|=u,null;else P!==null?(E=P.baseLanes|y,f.memoizedState=null):E=y,Ze(qc,Li),Li|=E;return ti(u,f,M,y),f.child}function j2(u,f){var y=f.ref;(u===null&&y!==null||u!==null&&u.ref!==y)&&(f.flags|=512,f.flags|=2097152)}function Mx(u,f,y,E,M){var P=cr(y)?Gs:Ot.current;return P=Qi(f,P),Gc(f,M),y=yx(u,f,y,E,P,M),E=_x(),u!==null&&!Ii?(f.updateQueue=u.updateQueue,f.flags&=-2053,u.lanes&=~M,To(u,f,M)):(An&&E&&lx(f),f.flags|=1,ti(u,f,y,M),f.child)}function W2(u,f,y,E,M){if(cr(y)){var P=!0;Sr(f)}else P=!1;if(Gc(f,M),f.stateNode===null)u!==null&&(u.alternate=null,f.alternate=null,f.flags|=2),s2(f,y,E),ax(f,y,E,M),E=!0;else if(u===null){var V=f.stateNode,Z=f.memoizedProps;V.props=Z;var ye=V.context,De=y.contextType;typeof De=="object"&&De!==null?De=Zi(De):(De=cr(y)?Gs:Ot.current,De=Qi(f,De));var et=y.getDerivedStateFromProps,Mt=typeof et=="function"||typeof V.getSnapshotBeforeUpdate=="function";Mt||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(Z!==E||ye!==De)&&o2(f,V,E,De),sa=!1;var ut=f.memoizedState;V.state=ut,Sm(f,E,V,M),ye=f.memoizedState,Z!==E||ut!==ye||In.current||sa?(typeof et=="function"&&(ox(f,y,et,E),ye=f.memoizedState),(Z=sa||i2(f,y,Z,E,ut,ye,De))?(Mt||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount()),typeof V.componentDidMount=="function"&&(f.flags|=4194308)):(typeof V.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=E,f.memoizedState=ye),V.props=E,V.state=ye,V.context=De,E=Z):(typeof V.componentDidMount=="function"&&(f.flags|=4194308),E=!1)}else{V=f.stateNode,e2(u,f),Z=f.memoizedProps,De=f.type===f.elementType?Z:As(f.type,Z),V.props=De,Mt=f.pendingProps,ut=V.context,ye=y.contextType,typeof ye=="object"&&ye!==null?ye=Zi(ye):(ye=cr(y)?Gs:Ot.current,ye=Qi(f,ye));var ln=y.getDerivedStateFromProps;(et=typeof ln=="function"||typeof V.getSnapshotBeforeUpdate=="function")||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(Z!==Mt||ut!==ye)&&o2(f,V,E,ye),sa=!1,ut=f.memoizedState,V.state=ut,Sm(f,E,V,M);var ot=f.memoizedState;Z!==Mt||ut!==ot||In.current||sa?(typeof ln=="function"&&(ox(f,y,ln,E),ot=f.memoizedState),(De=sa||i2(f,y,De,E,ut,ot,ye)||!1)?(et||typeof V.UNSAFE_componentWillUpdate!="function"&&typeof V.componentWillUpdate!="function"||(typeof V.componentWillUpdate=="function"&&V.componentWillUpdate(E,ot,ye),typeof V.UNSAFE_componentWillUpdate=="function"&&V.UNSAFE_componentWillUpdate(E,ot,ye)),typeof V.componentDidUpdate=="function"&&(f.flags|=4),typeof V.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof V.componentDidUpdate!="function"||Z===u.memoizedProps&&ut===u.memoizedState||(f.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||Z===u.memoizedProps&&ut===u.memoizedState||(f.flags|=1024),f.memoizedProps=E,f.memoizedState=ot),V.props=E,V.state=ot,V.context=ye,E=De):(typeof V.componentDidUpdate!="function"||Z===u.memoizedProps&&ut===u.memoizedState||(f.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||Z===u.memoizedProps&&ut===u.memoizedState||(f.flags|=1024),E=!1)}return Tx(u,f,y,E,P,M)}function Tx(u,f,y,E,M,P){j2(u,f);var V=(f.flags&128)!==0;if(!E&&!V)return M&&Hc(f,y,!1),To(u,f,P);E=f.stateNode,C9.current=f;var Z=V&&typeof y.getDerivedStateFromError!="function"?null:E.render();return f.flags|=1,u!==null&&V?(f.child=Jc(f,u.child,null,P),f.child=Jc(f,null,Z,P)):ti(u,f,Z,P),f.memoizedState=E.state,M&&Hc(f,y,!0),f.child}function X2(u){var f=u.stateNode;f.pendingContext?js(u,f.pendingContext,f.pendingContext!==f.context):f.context&&js(u,f.context,!1),dx(u,f.containerInfo)}function J2(u,f,y,E,M){return Xc(),fx(M),f.flags|=256,ti(u,f,y,E),f.child}var Fm={dehydrated:null,treeContext:null,retryLane:0};function km(u){return{baseLanes:u,cachePool:null}}function K2(u,f,y){var E=f.pendingProps,M=Mn.current,P=!1,V=(f.flags&128)!==0,Z;if((Z=V)||(Z=u!==null&&u.memoizedState===null?!1:(M&2)!==0),Z?(P=!0,f.flags&=-129):(u===null||u.memoizedState!==null)&&(M|=1),Ze(Mn,M&1),u===null)return hx(f),u=f.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?(f.mode&1?rf(u)?f.lanes=8:f.lanes=1073741824:f.lanes=1,null):(M=E.children,u=E.fallback,P?(E=f.mode,P=f.child,M={mode:"hidden",children:M},!(E&1)&&P!==null?(P.childLanes=0,P.pendingProps=M):P=ig(M,E,0,null),u=wl(u,E,y,null),P.return=f,u.return=f,P.sibling=u,f.child=P,f.child.memoizedState=km(y),f.memoizedState=Fm,u):Cx(f,M));if(M=u.memoizedState,M!==null){if(Z=M.dehydrated,Z!==null){if(V)return f.flags&256?(f.flags&=-257,Um(u,f,y,Error(o(422)))):f.memoizedState!==null?(f.child=u.child,f.flags|=128,null):(P=E.fallback,M=f.mode,E=ig({mode:"visible",children:E.children},M,0,null),P=wl(P,M,y,null),P.flags|=2,E.return=f,P.return=f,E.sibling=P,f.child=E,f.mode&1&&Jc(f,u.child,null,y),f.child.memoizedState=km(y),f.memoizedState=Fm,P);if(!(f.mode&1))f=Um(u,f,y,null);else if(rf(Z))f=Um(u,f,y,Error(o(419)));else if(E=(y&u.childLanes)!==0,Ii||E){if(E=Xn,E!==null){switch(y&-y){case 4:P=2;break;case 16:P=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:P=32;break;case 536870912:P=268435456;break;default:P=0}E=P&(E.suspendedLanes|y)?0:P,E!==0&&E!==M.retryLane&&(M.retryLane=E,is(u,E,-1))}Jx(),f=Um(u,f,y,Error(o(421)))}else nf(Z)?(f.flags|=128,f.child=u.child,f=z9.bind(null,u),kc(Z,f),f=null):(y=M.treeContext,he&&(Pi=hm(Z),Ri=f,An=!0,Ss=null,af=!1,y!==null&&(es[ts++]=Eo,es[ts++]=wo,es[ts++]=gl,Eo=y.id,wo=y.overflow,gl=f)),f=Cx(f,f.pendingProps.children),f.flags|=4096);return f}return P?(E=Y2(u,f,E.children,E.fallback,y),P=f.child,M=u.child.memoizedState,P.memoizedState=M===null?km(y):{baseLanes:M.baseLanes|y,cachePool:null},P.childLanes=u.childLanes&~y,f.memoizedState=Fm,E):(y=$2(u,f,E.children,y),f.memoizedState=null,y)}return P?(E=Y2(u,f,E.children,E.fallback,y),P=f.child,M=u.child.memoizedState,P.memoizedState=M===null?km(y):{baseLanes:M.baseLanes|y,cachePool:null},P.childLanes=u.childLanes&~y,f.memoizedState=Fm,E):(y=$2(u,f,E.children,y),f.memoizedState=null,y)}function Cx(u,f){return f=ig({mode:"visible",children:f},u.mode,0,null),f.return=u,u.child=f}function $2(u,f,y,E){var M=u.child;return u=M.sibling,y=ha(M,{mode:"visible",children:y}),!(f.mode&1)&&(y.lanes=E),y.return=f,y.sibling=null,u!==null&&(E=f.deletions,E===null?(f.deletions=[u],f.flags|=16):E.push(u)),f.child=y}function Y2(u,f,y,E,M){var P=f.mode;u=u.child;var V=u.sibling,Z={mode:"hidden",children:y};return!(P&1)&&f.child!==u?(y=f.child,y.childLanes=0,y.pendingProps=Z,f.deletions=null):(y=ha(u,Z),y.subtreeFlags=u.subtreeFlags&14680064),V!==null?E=ha(V,E):(E=wl(E,P,M,null),E.flags|=2),E.return=f,y.return=f,y.sibling=E,f.child=y,E}function Um(u,f,y,E){return E!==null&&fx(E),Jc(f,u.child,null,y),u=Cx(f,f.pendingProps.children),u.flags|=2,f.memoizedState=null,u}function q2(u,f,y){u.lanes|=f;var E=u.alternate;E!==null&&(E.lanes|=f),ix(u.return,f,y)}function bx(u,f,y,E,M){var P=u.memoizedState;P===null?u.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:E,tail:y,tailMode:M}:(P.isBackwards=f,P.rendering=null,P.renderingStartTime=0,P.last=E,P.tail=y,P.tailMode=M)}function Q2(u,f,y){var E=f.pendingProps,M=E.revealOrder,P=E.tail;if(ti(u,f,E.children,y),E=Mn.current,E&2)E=E&1|2,f.flags|=128;else{if(u!==null&&u.flags&128)e:for(u=f.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&q2(u,y,f);else if(u.tag===19)q2(u,y,f);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===f)break e;for(;u.sibling===null;){if(u.return===null||u.return===f)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}E&=1}if(Ze(Mn,E),!(f.mode&1))f.memoizedState=null;else switch(M){case"forwards":for(y=f.child,M=null;y!==null;)u=y.alternate,u!==null&&Cm(u)===null&&(M=y),y=y.sibling;y=M,y===null?(M=f.child,f.child=null):(M=y.sibling,y.sibling=null),bx(f,!1,M,y,P);break;case"backwards":for(y=null,M=f.child,f.child=null;M!==null;){if(u=M.alternate,u!==null&&Cm(u)===null){f.child=M;break}u=M.sibling,M.sibling=y,y=M,M=u}bx(f,!0,y,null,P);break;case"together":bx(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function To(u,f,y){if(u!==null&&(f.dependencies=u.dependencies),Qc|=f.lanes,!(y&f.childLanes))return null;if(u!==null&&f.child!==u.child)throw Error(o(153));if(f.child!==null){for(u=f.child,y=ha(u,u.pendingProps),f.child=y,y.return=f;u.sibling!==null;)u=u.sibling,y=y.sibling=ha(u,u.pendingProps),y.return=f;y.sibling=null}return f.child}function b9(u,f,y){switch(f.tag){case 3:X2(f),Xc();break;case 5:p2(f);break;case 1:cr(f.type)&&Sr(f);break;case 4:dx(f,f.stateNode.containerInfo);break;case 10:ZC(f,f.type._context,f.memoizedProps.value);break;case 13:var E=f.memoizedState;if(E!==null)return E.dehydrated!==null?(Ze(Mn,Mn.current&1),f.flags|=128,null):y&f.child.childLanes?K2(u,f,y):(Ze(Mn,Mn.current&1),u=To(u,f,y),u!==null?u.sibling:null);Ze(Mn,Mn.current&1);break;case 19:if(E=(y&f.childLanes)!==0,u.flags&128){if(E)return Q2(u,f,y);f.flags|=128}var M=f.memoizedState;if(M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),Ze(Mn,Mn.current),E)break;return null;case 22:case 23:return f.lanes=0,G2(u,f,y)}return To(u,f,y)}function R9(u,f){switch(cx(f),f.tag){case 1:return cr(f.type)&&zn(),u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 3:return $c(),mt(In),mt(Ot),gx(),u=f.flags,u&65536&&!(u&128)?(f.flags=u&-65537|128,f):null;case 5:return px(f),null;case 13:if(mt(Mn),u=f.memoizedState,u!==null&&u.dehydrated!==null){if(f.alternate===null)throw Error(o(340));Xc()}return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 19:return mt(Mn),null;case 4:return $c(),null;case 10:return rx(f.type._context),null;case 22:case 23:return Xx(),null;case 24:return null;default:return null}}var zm=!1,_l=!1,P9=typeof WeakSet=="function"?WeakSet:Set,Ve=null;function Hm(u,f){var y=u.ref;if(y!==null)if(typeof y=="function")try{y(null)}catch(E){yi(u,f,E)}else y.current=null}function Rx(u,f,y){try{y()}catch(E){yi(u,f,E)}}var Z2=!1;function I9(u,f){for(G(u.containerInfo),Ve=f;Ve!==null;)if(u=Ve,f=u.child,(u.subtreeFlags&1028)!==0&&f!==null)f.return=u,Ve=f;else for(;Ve!==null;){u=Ve;try{var y=u.alternate;if(u.flags&1024)switch(u.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var E=y.memoizedProps,M=y.memoizedState,P=u.stateNode,V=P.getSnapshotBeforeUpdate(u.elementType===u.type?E:As(u.type,E),M);P.__reactInternalSnapshotBeforeUpdate=V}break;case 3:ae&&Pe(u.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(Z){yi(u,u.return,Z)}if(f=u.sibling,f!==null){f.return=u.return,Ve=f;break}Ve=u.return}return y=Z2,Z2=!1,y}function xl(u,f,y){var E=f.updateQueue;if(E=E!==null?E.lastEffect:null,E!==null){var M=E=E.next;do{if((M.tag&u)===u){var P=M.destroy;M.destroy=void 0,P!==void 0&&Rx(f,y,P)}M=M.next}while(M!==E)}}function _f(u,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var y=f=f.next;do{if((y.tag&u)===u){var E=y.create;y.destroy=E()}y=y.next}while(y!==f)}}function Px(u){var f=u.ref;if(f!==null){var y=u.stateNode;switch(u.tag){case 5:u=q(y);break;default:u=y}typeof f=="function"?f(u):f.current=u}}function eb(u,f,y){if(Ws&&typeof Ws.onCommitFiberUnmount=="function")try{Ws.onCommitFiberUnmount(gm,f)}catch{}switch(f.tag){case 0:case 11:case 14:case 15:if(u=f.updateQueue,u!==null&&(u=u.lastEffect,u!==null)){var E=u=u.next;do{var M=E,P=M.destroy;M=M.tag,P!==void 0&&(M&2||M&4)&&Rx(f,y,P),E=E.next}while(E!==u)}break;case 1:if(Hm(f,y),u=f.stateNode,typeof u.componentWillUnmount=="function")try{u.props=f.memoizedProps,u.state=f.memoizedState,u.componentWillUnmount()}catch(V){yi(f,y,V)}break;case 5:Hm(f,y);break;case 4:ae?ob(u,f,y):z&&z&&(f=f.stateNode.containerInfo,y=tt(f),Vt(f,y))}}function tb(u,f,y){for(var E=f;;)if(eb(u,E,y),E.child===null||ae&&E.tag===4){if(E===f)break;for(;E.sibling===null;){if(E.return===null||E.return===f)return;E=E.return}E.sibling.return=E.return,E=E.sibling}else E.child.return=E,E=E.child}function nb(u){var f=u.alternate;f!==null&&(u.alternate=null,nb(f)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(f=u.stateNode,f!==null&&Ce(f)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function rb(u){return u.tag===5||u.tag===3||u.tag===4}function ib(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||rb(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function sb(u){if(ae){e:{for(var f=u.return;f!==null;){if(rb(f))break e;f=f.return}throw Error(o(160))}var y=f;switch(y.tag){case 5:f=y.stateNode,y.flags&32&&(we(f),y.flags&=-33),y=ib(u),Lx(u,y,f);break;case 3:case 4:f=y.stateNode.containerInfo,y=ib(u),Ix(u,y,f);break;default:throw Error(o(161))}}}function Ix(u,f,y){var E=u.tag;if(E===5||E===6)u=u.stateNode,f?at(y,u,f):At(y,u);else if(E!==4&&(u=u.child,u!==null))for(Ix(u,f,y),u=u.sibling;u!==null;)Ix(u,f,y),u=u.sibling}function Lx(u,f,y){var E=u.tag;if(E===5||E===6)u=u.stateNode,f?gt(y,u,f):lt(y,u);else if(E!==4&&(u=u.child,u!==null))for(Lx(u,f,y),u=u.sibling;u!==null;)Lx(u,f,y),u=u.sibling}function ob(u,f,y){for(var E=f,M=!1,P,V;;){if(!M){M=E.return;e:for(;;){if(M===null)throw Error(o(160));switch(P=M.stateNode,M.tag){case 5:V=!1;break e;case 3:P=P.containerInfo,V=!0;break e;case 4:P=P.containerInfo,V=!0;break e}M=M.return}M=!0}if(E.tag===5||E.tag===6)tb(u,E,y),V?Y(P,E.stateNode):Ye(P,E.stateNode);else if(E.tag===18)V?fe(P,E.stateNode):me(P,E.stateNode);else if(E.tag===4){if(E.child!==null){P=E.stateNode.containerInfo,V=!0,E.child.return=E,E=E.child;continue}}else if(eb(u,E,y),E.child!==null){E.child.return=E,E=E.child;continue}if(E===f)break;for(;E.sibling===null;){if(E.return===null||E.return===f)return;E=E.return,E.tag===4&&(M=!1)}E.sibling.return=E.return,E=E.sibling}}function Dx(u,f){if(ae){switch(f.tag){case 0:case 11:case 14:case 15:xl(3,f,f.return),_f(3,f),xl(5,f,f.return);return;case 1:return;case 5:var y=f.stateNode;if(y!=null){var E=f.memoizedProps;u=u!==null?u.memoizedProps:E;var M=f.type,P=f.updateQueue;f.updateQueue=null,P!==null&&Pt(y,P,M,u,E,f)}return;case 6:if(f.stateNode===null)throw Error(o(162));y=f.memoizedProps,Re(f.stateNode,u!==null?u.memoizedProps:y,y);return;case 3:he&&u!==null&&u.memoizedState.isDehydrated&&se(f.stateNode.containerInfo);return;case 12:return;case 13:Vm(f);return;case 19:Vm(f);return;case 17:return}throw Error(o(163))}switch(f.tag){case 0:case 11:case 14:case 15:xl(3,f,f.return),_f(3,f),xl(5,f,f.return);return;case 12:return;case 13:Vm(f);return;case 19:Vm(f);return;case 3:he&&u!==null&&u.memoizedState.isDehydrated&&se(f.stateNode.containerInfo);break;case 22:case 23:return}e:if(z){switch(f.tag){case 1:case 5:case 6:break e;case 3:case 4:f=f.stateNode,Vt(f.containerInfo,f.pendingChildren);break e}throw Error(o(163))}}function Vm(u){var f=u.updateQueue;if(f!==null){u.updateQueue=null;var y=u.stateNode;y===null&&(y=u.stateNode=new P9),f.forEach(function(E){var M=H9.bind(null,u,E);y.has(E)||(y.add(E),E.then(M,M))})}}function L9(u,f){for(Ve=f;Ve!==null;){f=Ve;var y=f.deletions;if(y!==null)for(var E=0;E<y.length;E++){var M=y[E];try{var P=u;ae?ob(P,M,f):tb(P,M,f);var V=M.alternate;V!==null&&(V.return=null),M.return=null}catch(it){yi(M,f,it)}}if(y=f.child,f.subtreeFlags&12854&&y!==null)y.return=f,Ve=y;else for(;Ve!==null;){f=Ve;try{var Z=f.flags;if(Z&32&&ae&&we(f.stateNode),Z&512){var ye=f.alternate;if(ye!==null){var De=ye.ref;De!==null&&(typeof De=="function"?De(null):De.current=null)}}if(Z&8192)switch(f.tag){case 13:if(f.memoizedState!==null){var et=f.alternate;(et===null||et.memoizedState===null)&&(zx=ur())}break;case 22:var Mt=f.memoizedState!==null,ut=f.alternate,ln=ut!==null&&ut.memoizedState!==null;if(y=f,ae){e:if(E=y,M=Mt,P=null,ae)for(var ot=E;;){if(ot.tag===5){if(P===null){P=ot;var kr=ot.stateNode;M?He(kr):vt(ot.stateNode,ot.memoizedProps)}}else if(ot.tag===6){if(P===null){var os=ot.stateNode;M?Je(os):j(os,ot.memoizedProps)}}else if((ot.tag!==22&&ot.tag!==23||ot.memoizedState===null||ot===E)&&ot.child!==null){ot.child.return=ot,ot=ot.child;continue}if(ot===E)break;for(;ot.sibling===null;){if(ot.return===null||ot.return===E)break e;P===ot&&(P=null),ot=ot.return}P===ot&&(P=null),ot.sibling.return=ot.return,ot=ot.sibling}}if(Mt&&!ln&&y.mode&1){Ve=y;for(var le=y.child;le!==null;){for(y=Ve=le;Ve!==null;){E=Ve;var ne=E.child;switch(E.tag){case 0:case 11:case 14:case 15:xl(4,E,E.return);break;case 1:Hm(E,E.return);var ge=E.stateNode;if(typeof ge.componentWillUnmount=="function"){var Xe=E.return;try{ge.props=E.memoizedProps,ge.state=E.memoizedState,ge.componentWillUnmount()}catch(it){yi(E,Xe,it)}}break;case 5:Hm(E,E.return);break;case 22:if(E.memoizedState!==null){cb(y);continue}}ne!==null?(ne.return=E,Ve=ne):cb(y)}le=le.sibling}}}switch(Z&4102){case 2:sb(f),f.flags&=-3;break;case 6:sb(f),f.flags&=-3,Dx(f.alternate,f);break;case 4096:f.flags&=-4097;break;case 4100:f.flags&=-4097,Dx(f.alternate,f);break;case 4:Dx(f.alternate,f)}}catch(it){yi(f,f.return,it)}if(y=f.sibling,y!==null){y.return=f.return,Ve=y;break}Ve=f.return}}}function D9(u,f,y){Ve=u,ab(u)}function ab(u,f,y){for(var E=(u.mode&1)!==0;Ve!==null;){var M=Ve,P=M.child;if(M.tag===22&&E){var V=M.memoizedState!==null||zm;if(!V){var Z=M.alternate,ye=Z!==null&&Z.memoizedState!==null||_l;Z=zm;var De=_l;if(zm=V,(_l=ye)&&!De)for(Ve=M;Ve!==null;)V=Ve,ye=V.child,V.tag===22&&V.memoizedState!==null?ub(M):ye!==null?(ye.return=V,Ve=ye):ub(M);for(;P!==null;)Ve=P,ab(P),P=P.sibling;Ve=M,zm=Z,_l=De}lb(u)}else M.subtreeFlags&8772&&P!==null?(P.return=M,Ve=P):lb(u)}}function lb(u){for(;Ve!==null;){var f=Ve;if(f.flags&8772){var y=f.alternate;try{if(f.flags&8772)switch(f.tag){case 0:case 11:case 15:_l||_f(5,f);break;case 1:var E=f.stateNode;if(f.flags&4&&!_l)if(y===null)E.componentDidMount();else{var M=f.elementType===f.type?y.memoizedProps:As(f.type,y.memoizedProps);E.componentDidUpdate(M,y.memoizedState,E.__reactInternalSnapshotBeforeUpdate)}var P=f.updateQueue;P!==null&&n2(f,P,E);break;case 3:var V=f.updateQueue;if(V!==null){if(y=null,f.child!==null)switch(f.child.tag){case 5:y=q(f.child.stateNode);break;case 1:y=f.child.stateNode}n2(f,V,y)}break;case 5:var Z=f.stateNode;y===null&&f.flags&4&&zt(Z,f.type,f.memoizedProps,f);break;case 6:break;case 4:break;case 12:break;case 13:if(he&&f.memoizedState===null){var ye=f.alternate;if(ye!==null){var De=ye.memoizedState;if(De!==null){var et=De.dehydrated;et!==null&&de(et)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}_l||f.flags&512&&Px(f)}catch(Mt){yi(f,f.return,Mt)}}if(f===u){Ve=null;break}if(y=f.sibling,y!==null){y.return=f.return,Ve=y;break}Ve=f.return}}function cb(u){for(;Ve!==null;){var f=Ve;if(f===u){Ve=null;break}var y=f.sibling;if(y!==null){y.return=f.return,Ve=y;break}Ve=f.return}}function ub(u){for(;Ve!==null;){var f=Ve;try{switch(f.tag){case 0:case 11:case 15:var y=f.return;try{_f(4,f)}catch(ye){yi(f,y,ye)}break;case 1:var E=f.stateNode;if(typeof E.componentDidMount=="function"){var M=f.return;try{E.componentDidMount()}catch(ye){yi(f,M,ye)}}var P=f.return;try{Px(f)}catch(ye){yi(f,P,ye)}break;case 5:var V=f.return;try{Px(f)}catch(ye){yi(f,V,ye)}}}catch(ye){yi(f,f.return,ye)}if(f===u){Ve=null;break}var Z=f.sibling;if(Z!==null){Z.return=f.return,Ve=Z;break}Ve=f.return}}var Gm=0,jm=1,Wm=2,Xm=3,Jm=4;if(typeof Symbol=="function"&&Symbol.for){var xf=Symbol.for;Gm=xf("selector.component"),jm=xf("selector.has_pseudo_class"),Wm=xf("selector.role"),Xm=xf("selector.test_id"),Jm=xf("selector.text")}function Bx(u){var f=ie(u);if(f!=null){if(typeof f.memoizedProps["data-testname"]!="string")throw Error(o(364));return f}if(u=K(u),u===null)throw Error(o(362));return u.stateNode.current}function Nx(u,f){switch(f.$$typeof){case Gm:if(u.type===f.value)return!0;break;case jm:e:{f=f.value,u=[u,0];for(var y=0;y<u.length;){var E=u[y++],M=u[y++],P=f[M];if(E.tag!==5||!Se(E)){for(;P!=null&&Nx(E,P);)M++,P=f[M];if(M===f.length){f=!0;break e}else for(E=E.child;E!==null;)u.push(E,M),E=E.sibling}}f=!1}return f;case Wm:if(u.tag===5&&qe(u.stateNode,f.value))return!0;break;case Jm:if((u.tag===5||u.tag===6)&&(u=Ae(u),u!==null&&0<=u.indexOf(f.value)))return!0;break;case Xm:if(u.tag===5&&(u=u.memoizedProps["data-testname"],typeof u=="string"&&u.toLowerCase()===f.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Ox(u){switch(u.$$typeof){case Gm:return"<"+(I(u.value)||"Unknown")+">";case jm:return":has("+(Ox(u)||"")+")";case Wm:return'[role="'+u.value+'"]';case Jm:return'"'+u.value+'"';case Xm:return'[data-testname="'+u.value+'"]';default:throw Error(o(365))}}function hb(u,f){var y=[];u=[u,0];for(var E=0;E<u.length;){var M=u[E++],P=u[E++],V=f[P];if(M.tag!==5||!Se(M)){for(;V!=null&&Nx(M,V);)P++,V=f[P];if(P===f.length)y.push(M);else for(M=M.child;M!==null;)u.push(M,P),M=M.sibling}}return y}function Fx(u,f){if(!B)throw Error(o(363));u=Bx(u),u=hb(u,f),f=[],u=Array.from(u);for(var y=0;y<u.length;){var E=u[y++];if(E.tag===5)Se(E)||f.push(E.stateNode);else for(E=E.child;E!==null;)u.push(E),E=E.sibling}return f}var B9=Math.ceil,Km=a.ReactCurrentDispatcher,kx=a.ReactCurrentOwner,Hn=a.ReactCurrentBatchConfig,Ft=0,Xn=null,Jn=null,Er=0,Li=0,qc=lr(0),tr=0,Af=null,Qc=0,$m=0,Ux=0,Sf=null,gi=null,zx=0,Hx=1/0;function Zc(){Hx=ur()+500}var Ym=!1,Vx=null,aa=null,qm=!1,la=null,Qm=0,Ef=0,Gx=null,Zm=-1,eg=0;function ni(){return Ft&6?ur():Zm!==-1?Zm:Zm=ur()}function ca(u){return u.mode&1?Ft&2&&Er!==0?Er&-Er:g9.transition!==null?(eg===0&&(u=dm,dm<<=1,!(dm&4194240)&&(dm=64),eg=u),eg):(u=Qt,u!==0?u:oe()):1}function is(u,f,y){if(50<Ef)throw Ef=0,Gx=null,Error(o(185));var E=tg(u,f);return E===null?null:(of(E,f,y),(!(Ft&2)||E!==Xn)&&(E===Xn&&(!(Ft&2)&&($m|=f),tr===4&&ua(E,Er)),vi(E,y),f===1&&Ft===0&&!(u.mode&1)&&(Zc(),vm&&Js())),E)}function tg(u,f){u.lanes|=f;var y=u.alternate;for(y!==null&&(y.lanes|=f),y=u,u=u.return;u!==null;)u.childLanes|=f,y=u.alternate,y!==null&&(y.childLanes|=f),y=u,u=u.return;return y.tag===3?y.stateNode:null}function vi(u,f){var y=u.callbackNode;a9(u,f);var E=mm(u,u===Xn?Er:0);if(E===0)y!==null&&qC(y),u.callbackNode=null,u.callbackPriority=0;else if(f=E&-E,u.callbackPriority!==f){if(y!=null&&qC(y),f===1)u.tag===0?m9(db.bind(null,u)):QC(db.bind(null,u)),Ee?F(function(){Ft===0&&Js()}):q_(Q_,Js),y=null;else{switch(YC(E)){case 1:y=Q_;break;case 4:y=h9;break;case 16:y=Z_;break;case 536870912:y=f9;break;default:y=Z_}y=Sb(y,fb.bind(null,u))}u.callbackPriority=f,u.callbackNode=y}}function fb(u,f){if(Zm=-1,eg=0,Ft&6)throw Error(o(327));var y=u.callbackNode;if(El()&&u.callbackNode!==y)return null;var E=mm(u,u===Xn?Er:0);if(E===0)return null;if(E&30||E&u.expiredLanes||f)f=ng(u,E);else{f=E;var M=Ft;Ft|=2;var P=gb();(Xn!==u||Er!==f)&&(Zc(),Al(u,f));do try{F9();break}catch(Z){mb(u,Z)}while(!0);nx(),Km.current=P,Ft=M,Jn!==null?f=0:(Xn=null,Er=0,f=tr)}if(f!==0){if(f===2&&(M=K_(u),M!==0&&(E=M,f=jx(u,M))),f===1)throw y=Af,Al(u,0),ua(u,E),vi(u,ur()),y;if(f===6)ua(u,E);else{if(M=u.current.alternate,!(E&30)&&!N9(M)&&(f=ng(u,E),f===2&&(P=K_(u),P!==0&&(E=P,f=jx(u,P))),f===1))throw y=Af,Al(u,0),ua(u,E),vi(u,ur()),y;switch(u.finishedWork=M,u.finishedLanes=E,f){case 0:case 1:throw Error(o(345));case 2:Sl(u,gi);break;case 3:if(ua(u,E),(E&130023424)===E&&(f=zx+500-ur(),10<f)){if(mm(u,0)!==0)break;if(M=u.suspendedLanes,(M&E)!==E){ni(),u.pingedLanes|=u.suspendedLanes&M;break}u.timeoutHandle=Ie(Sl.bind(null,u,gi),f);break}Sl(u,gi);break;case 4:if(ua(u,E),(E&4194240)===E)break;for(f=u.eventTimes,M=-1;0<E;){var V=31-bi(E);P=1<<V,V=f[V],V>M&&(M=V),E&=~P}if(E=M,E=ur()-E,E=(120>E?120:480>E?480:1080>E?1080:1920>E?1920:3e3>E?3e3:4320>E?4320:1960*B9(E/1960))-E,10<E){u.timeoutHandle=Ie(Sl.bind(null,u,gi),E);break}Sl(u,gi);break;case 5:Sl(u,gi);break;default:throw Error(o(329))}}}return vi(u,ur()),u.callbackNode===y?fb.bind(null,u):null}function jx(u,f){var y=Sf;return u.current.memoizedState.isDehydrated&&(Al(u,f).flags|=256),u=ng(u,f),u!==2&&(f=gi,gi=y,f!==null&&Wx(f)),u}function Wx(u){gi===null?gi=u:gi.push.apply(gi,u)}function N9(u){for(var f=u;;){if(f.flags&16384){var y=f.updateQueue;if(y!==null&&(y=y.stores,y!==null))for(var E=0;E<y.length;E++){var M=y[E],P=M.getSnapshot;M=M.value;try{if(!Xs(P(),M))return!1}catch{return!1}}}if(y=f.child,f.subtreeFlags&16384&&y!==null)y.return=f,f=y;else{if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function ua(u,f){for(f&=~Ux,f&=~$m,u.suspendedLanes|=f,u.pingedLanes&=~f,u=u.expirationTimes;0<f;){var y=31-bi(f),E=1<<y;u[y]=-1,f&=~E}}function db(u){if(Ft&6)throw Error(o(327));El();var f=mm(u,0);if(!(f&1))return vi(u,ur()),null;var y=ng(u,f);if(u.tag!==0&&y===2){var E=K_(u);E!==0&&(f=E,y=jx(u,E))}if(y===1)throw y=Af,Al(u,0),ua(u,f),vi(u,ur()),y;if(y===6)throw Error(o(345));return u.finishedWork=u.current.alternate,u.finishedLanes=f,Sl(u,gi),vi(u,ur()),null}function pb(u){la!==null&&la.tag===0&&!(Ft&6)&&El();var f=Ft;Ft|=1;var y=Hn.transition,E=Qt;try{if(Hn.transition=null,Qt=1,u)return u()}finally{Qt=E,Hn.transition=y,Ft=f,!(Ft&6)&&Js()}}function Xx(){Li=qc.current,mt(qc)}function Al(u,f){u.finishedWork=null,u.finishedLanes=0;var y=u.timeoutHandle;if(y!==je&&(u.timeoutHandle=je,$e(y)),Jn!==null)for(y=Jn.return;y!==null;){var E=y;switch(cx(E),E.tag){case 1:E=E.type.childContextTypes,E!=null&&zn();break;case 3:$c(),mt(In),mt(Ot),gx();break;case 5:px(E);break;case 4:$c();break;case 13:mt(Mn);break;case 19:mt(Mn);break;case 10:rx(E.type._context);break;case 22:case 23:Xx()}y=y.return}if(Xn=u,Jn=u=ha(u.current,null),Er=Li=f,tr=0,Af=null,Ux=$m=Qc=0,gi=Sf=null,Ks!==null){for(f=0;f<Ks.length;f++)if(y=Ks[f],E=y.interleaved,E!==null){y.interleaved=null;var M=E.next,P=y.pending;if(P!==null){var V=P.next;P.next=M,E.next=V}y.pending=E}Ks=null}return u}function mb(u,f){do{var y=Jn;try{if(nx(),bm.current=Bm,Rm){for(var E=Ln.memoizedState;E!==null;){var M=E.queue;M!==null&&(M.pending=null),E=E.next}Rm=!1}if(Yc=0,hr=Nr=Ln=null,ff=!1,df=0,kx.current=null,y===null||y.return===null){tr=1,Af=f,Jn=null;break}e:{var P=u,V=y.return,Z=y,ye=f;if(f=Er,Z.flags|=32768,ye!==null&&typeof ye=="object"&&typeof ye.then=="function"){var De=ye,et=Z,Mt=et.tag;if(!(et.mode&1)&&(Mt===0||Mt===11||Mt===15)){var ut=et.alternate;ut?(et.updateQueue=ut.updateQueue,et.memoizedState=ut.memoizedState,et.lanes=ut.lanes):(et.updateQueue=null,et.memoizedState=null)}var ln=O2(V);if(ln!==null){ln.flags&=-257,F2(ln,V,Z,P,f),ln.mode&1&&N2(P,De,f),f=ln,ye=De;var ot=f.updateQueue;if(ot===null){var kr=new Set;kr.add(ye),f.updateQueue=kr}else ot.add(ye);break e}else{if(!(f&1)){N2(P,De,f),Jx();break e}ye=Error(o(426))}}else if(An&&Z.mode&1){var os=O2(V);if(os!==null){!(os.flags&65536)&&(os.flags|=256),F2(os,V,Z,P,f),fx(ye);break e}}P=ye,tr!==4&&(tr=2),Sf===null?Sf=[P]:Sf.push(P),ye=Ex(ye,Z),Z=V;do{switch(Z.tag){case 3:Z.flags|=65536,f&=-f,Z.lanes|=f;var le=D2(Z,ye,f);t2(Z,le);break e;case 1:P=ye;var ne=Z.type,ge=Z.stateNode;if(!(Z.flags&128)&&(typeof ne.getDerivedStateFromError=="function"||ge!==null&&typeof ge.componentDidCatch=="function"&&(aa===null||!aa.has(ge)))){Z.flags|=65536,f&=-f,Z.lanes|=f;var Xe=B2(Z,P,f);t2(Z,Xe);break e}}Z=Z.return}while(Z!==null)}yb(y)}catch(it){f=it,Jn===y&&y!==null&&(Jn=y=y.return);continue}break}while(!0)}function gb(){var u=Km.current;return Km.current=Bm,u===null?Bm:u}function Jx(){(tr===0||tr===3||tr===2)&&(tr=4),Xn===null||!(Qc&268435455)&&!($m&268435455)||ua(Xn,Er)}function ng(u,f){var y=Ft;Ft|=2;var E=gb();Xn===u&&Er===f||Al(u,f);do try{O9();break}catch(M){mb(u,M)}while(!0);if(nx(),Ft=y,Km.current=E,Jn!==null)throw Error(o(261));return Xn=null,Er=0,tr}function O9(){for(;Jn!==null;)vb(Jn)}function F9(){for(;Jn!==null&&!c9();)vb(Jn)}function vb(u){var f=Ab(u.alternate,u,Li);u.memoizedProps=u.pendingProps,f===null?yb(u):Jn=f,kx.current=null}function yb(u){var f=u;do{var y=f.alternate;if(u=f.return,f.flags&32768){if(y=R9(y,f),y!==null){y.flags&=32767,Jn=y;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{tr=6,Jn=null;return}}else if(y=T9(y,f,Li),y!==null){Jn=y;return}if(f=f.sibling,f!==null){Jn=f;return}Jn=f=u}while(f!==null);tr===0&&(tr=5)}function Sl(u,f){var y=Qt,E=Hn.transition;try{Hn.transition=null,Qt=1,k9(u,f,y)}finally{Hn.transition=E,Qt=y}return null}function k9(u,f,y){do El();while(la!==null);if(Ft&6)throw Error(o(327));var E=u.finishedWork,M=u.finishedLanes;if(E===null)return null;if(u.finishedWork=null,u.finishedLanes=0,E===u.current)throw Error(o(177));u.callbackNode=null,u.callbackPriority=0;var P=E.lanes|E.childLanes;if(l9(u,P),u===Xn&&(Jn=Xn=null,Er=0),!(E.subtreeFlags&2064)&&!(E.flags&2064)||qm||(qm=!0,Sb(Z_,function(){return El(),null})),P=(E.flags&15990)!==0,E.subtreeFlags&15990||P){P=Hn.transition,Hn.transition=null;var V=Qt;Qt=1;var Z=Ft;Ft|=4,kx.current=null,I9(u,E),L9(u,E),X(u.containerInfo),u.current=E,D9(E),u9(),Ft=Z,Qt=V,Hn.transition=P}else u.current=E;if(qm&&(qm=!1,la=u,Qm=M),P=u.pendingLanes,P===0&&(aa=null),d9(E.stateNode),vi(u,ur()),f!==null)for(y=u.onRecoverableError,E=0;E<f.length;E++)y(f[E]);if(Ym)throw Ym=!1,u=Vx,Vx=null,u;return Qm&1&&u.tag!==0&&El(),P=u.pendingLanes,P&1?u===Gx?Ef++:(Ef=0,Gx=u):Ef=0,Js(),null}function El(){if(la!==null){var u=YC(Qm),f=Hn.transition,y=Qt;try{if(Hn.transition=null,Qt=16>u?16:u,la===null)var E=!1;else{if(u=la,la=null,Qm=0,Ft&6)throw Error(o(331));var M=Ft;for(Ft|=4,Ve=u.current;Ve!==null;){var P=Ve,V=P.child;if(Ve.flags&16){var Z=P.deletions;if(Z!==null){for(var ye=0;ye<Z.length;ye++){var De=Z[ye];for(Ve=De;Ve!==null;){var et=Ve;switch(et.tag){case 0:case 11:case 15:xl(8,et,P)}var Mt=et.child;if(Mt!==null)Mt.return=et,Ve=Mt;else for(;Ve!==null;){et=Ve;var ut=et.sibling,ln=et.return;if(nb(et),et===De){Ve=null;break}if(ut!==null){ut.return=ln,Ve=ut;break}Ve=ln}}}var ot=P.alternate;if(ot!==null){var kr=ot.child;if(kr!==null){ot.child=null;do{var os=kr.sibling;kr.sibling=null,kr=os}while(kr!==null)}}Ve=P}}if(P.subtreeFlags&2064&&V!==null)V.return=P,Ve=V;else e:for(;Ve!==null;){if(P=Ve,P.flags&2048)switch(P.tag){case 0:case 11:case 15:xl(9,P,P.return)}var le=P.sibling;if(le!==null){le.return=P.return,Ve=le;break e}Ve=P.return}}var ne=u.current;for(Ve=ne;Ve!==null;){V=Ve;var ge=V.child;if(V.subtreeFlags&2064&&ge!==null)ge.return=V,Ve=ge;else e:for(V=ne;Ve!==null;){if(Z=Ve,Z.flags&2048)try{switch(Z.tag){case 0:case 11:case 15:_f(9,Z)}}catch(it){yi(Z,Z.return,it)}if(Z===V){Ve=null;break e}var Xe=Z.sibling;if(Xe!==null){Xe.return=Z.return,Ve=Xe;break e}Ve=Z.return}}if(Ft=M,Js(),Ws&&typeof Ws.onPostCommitFiberRoot=="function")try{Ws.onPostCommitFiberRoot(gm,u)}catch{}E=!0}return E}finally{Qt=y,Hn.transition=f}}return!1}function _b(u,f,y){f=Ex(y,f),f=D2(u,f,1),oa(u,f),f=ni(),u=tg(u,1),u!==null&&(of(u,1,f),vi(u,f))}function yi(u,f,y){if(u.tag===3)_b(u,u,y);else for(;f!==null;){if(f.tag===3){_b(f,u,y);break}else if(f.tag===1){var E=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(aa===null||!aa.has(E))){u=Ex(y,u),u=B2(f,u,1),oa(f,u),u=ni(),f=tg(f,1),f!==null&&(of(f,1,u),vi(f,u));break}}f=f.return}}function U9(u,f,y){var E=u.pingCache;E!==null&&E.delete(f),f=ni(),u.pingedLanes|=u.suspendedLanes&y,Xn===u&&(Er&y)===y&&(tr===4||tr===3&&(Er&130023424)===Er&&500>ur()-zx?Al(u,0):Ux|=y),vi(u,f)}function xb(u,f){f===0&&(u.mode&1?(f=pm,pm<<=1,!(pm&130023424)&&(pm=4194304)):f=1);var y=ni();u=tg(u,f),u!==null&&(of(u,f,y),vi(u,y))}function z9(u){var f=u.memoizedState,y=0;f!==null&&(y=f.retryLane),xb(u,y)}function H9(u,f){var y=0;switch(u.tag){case 13:var E=u.stateNode,M=u.memoizedState;M!==null&&(y=M.retryLane);break;case 19:E=u.stateNode;break;default:throw Error(o(314))}E!==null&&E.delete(f),xb(u,y)}var Ab;Ab=function(u,f,y){if(u!==null)if(u.memoizedProps!==f.pendingProps||In.current)Ii=!0;else{if(!(u.lanes&y)&&!(f.flags&128))return Ii=!1,b9(u,f,y);Ii=!!(u.flags&131072)}else Ii=!1,An&&f.flags&1048576&&a2(f,Mm,f.index);switch(f.lanes=0,f.tag){case 2:var E=f.type;u!==null&&(u.alternate=null,f.alternate=null,f.flags|=2),u=f.pendingProps;var M=Qi(f,Ot.current);Gc(f,y),M=yx(null,f,E,u,M,y);var P=_x();return f.flags|=1,typeof M=="object"&&M!==null&&typeof M.render=="function"&&M.$$typeof===void 0?(f.tag=1,f.memoizedState=null,f.updateQueue=null,cr(E)?(P=!0,Sr(f)):P=!1,f.memoizedState=M.state!==null&&M.state!==void 0?M.state:null,sx(f),M.updater=Em,f.stateNode=M,M._reactInternals=f,ax(f,E,u,y),f=Tx(null,f,E,!0,P,y)):(f.tag=0,An&&P&&lx(f),ti(null,f,M,y),f=f.child),f;case 16:E=f.elementType;e:{switch(u!==null&&(u.alternate=null,f.alternate=null,f.flags|=2),u=f.pendingProps,M=E._init,E=M(E._payload),f.type=E,M=f.tag=G9(E),u=As(E,u),M){case 0:f=Mx(null,f,E,u,y);break e;case 1:f=W2(null,f,E,u,y);break e;case 11:f=z2(null,f,E,u,y);break e;case 14:f=H2(null,f,E,As(E.type,u),y);break e}throw Error(o(306,E,""))}return f;case 0:return E=f.type,M=f.pendingProps,M=f.elementType===E?M:As(E,M),Mx(u,f,E,M,y);case 1:return E=f.type,M=f.pendingProps,M=f.elementType===E?M:As(E,M),W2(u,f,E,M,y);case 3:e:{if(X2(f),u===null)throw Error(o(387));E=f.pendingProps,P=f.memoizedState,M=P.element,e2(u,f),Sm(f,E,null,y);var V=f.memoizedState;if(E=V.element,he&&P.isDehydrated)if(P={element:E,isDehydrated:!1,cache:V.cache,transitions:V.transitions},f.updateQueue.baseState=P,f.memoizedState=P,f.flags&256){M=Error(o(423)),f=J2(u,f,E,y,M);break e}else if(E!==M){M=Error(o(424)),f=J2(u,f,E,y,M);break e}else for(he&&(Pi=um(f.stateNode.containerInfo),Ri=f,An=!0,Ss=null,af=!1),y=d2(f,null,E,y),f.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling;else{if(Xc(),E===M){f=To(u,f,y);break e}ti(u,f,E,y)}f=f.child}return f;case 5:return p2(f),u===null&&hx(f),E=f.type,M=f.pendingProps,P=u!==null?u.memoizedProps:null,V=M.children,pe(E,M)?V=null:P!==null&&pe(E,P)&&(f.flags|=32),j2(u,f),ti(u,f,V,y),f.child;case 6:return u===null&&hx(f),null;case 13:return K2(u,f,y);case 4:return dx(f,f.stateNode.containerInfo),E=f.pendingProps,u===null?f.child=Jc(f,null,E,y):ti(u,f,E,y),f.child;case 11:return E=f.type,M=f.pendingProps,M=f.elementType===E?M:As(E,M),z2(u,f,E,M,y);case 7:return ti(u,f,f.pendingProps,y),f.child;case 8:return ti(u,f,f.pendingProps.children,y),f.child;case 12:return ti(u,f,f.pendingProps.children,y),f.child;case 10:e:{if(E=f.type._context,M=f.pendingProps,P=f.memoizedProps,V=M.value,ZC(f,E,V),P!==null)if(Xs(P.value,V)){if(P.children===M.children&&!In.current){f=To(u,f,y);break e}}else for(P=f.child,P!==null&&(P.return=f);P!==null;){var Z=P.dependencies;if(Z!==null){V=P.child;for(var ye=Z.firstContext;ye!==null;){if(ye.context===E){if(P.tag===1){ye=So(-1,y&-y),ye.tag=2;var De=P.updateQueue;if(De!==null){De=De.shared;var et=De.pending;et===null?ye.next=ye:(ye.next=et.next,et.next=ye),De.pending=ye}}P.lanes|=y,ye=P.alternate,ye!==null&&(ye.lanes|=y),ix(P.return,y,f),Z.lanes|=y;break}ye=ye.next}}else if(P.tag===10)V=P.type===f.type?null:P.child;else if(P.tag===18){if(V=P.return,V===null)throw Error(o(341));V.lanes|=y,Z=V.alternate,Z!==null&&(Z.lanes|=y),ix(V,y,f),V=P.sibling}else V=P.child;if(V!==null)V.return=P;else for(V=P;V!==null;){if(V===f){V=null;break}if(P=V.sibling,P!==null){P.return=V.return,V=P;break}V=V.return}P=V}ti(u,f,M.children,y),f=f.child}return f;case 9:return M=f.type,E=f.pendingProps.children,Gc(f,y),M=Zi(M),E=E(M),f.flags|=1,ti(u,f,E,y),f.child;case 14:return E=f.type,M=As(E,f.pendingProps),M=As(E.type,M),H2(u,f,E,M,y);case 15:return V2(u,f,f.type,f.pendingProps,y);case 17:return E=f.type,M=f.pendingProps,M=f.elementType===E?M:As(E,M),u!==null&&(u.alternate=null,f.alternate=null,f.flags|=2),f.tag=1,cr(E)?(u=!0,Sr(f)):u=!1,Gc(f,y),s2(f,E,M),ax(f,E,M,y),Tx(null,f,E,!0,u,y);case 19:return Q2(u,f,y);case 22:return G2(u,f,y)}throw Error(o(156,f.tag))};function Sb(u,f){return q_(u,f)}function V9(u,f,y,E){this.tag=u,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ss(u,f,y,E){return new V9(u,f,y,E)}function Kx(u){return u=u.prototype,!(!u||!u.isReactComponent)}function G9(u){if(typeof u=="function")return Kx(u)?1:0;if(u!=null){if(u=u.$$typeof,u===A)return 11;if(u===x)return 14}return 2}function ha(u,f){var y=u.alternate;return y===null?(y=ss(u.tag,f,u.key,u.mode),y.elementType=u.elementType,y.type=u.type,y.stateNode=u.stateNode,y.alternate=u,u.alternate=y):(y.pendingProps=f,y.type=u.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=u.flags&14680064,y.childLanes=u.childLanes,y.lanes=u.lanes,y.child=u.child,y.memoizedProps=u.memoizedProps,y.memoizedState=u.memoizedState,y.updateQueue=u.updateQueue,f=u.dependencies,y.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},y.sibling=u.sibling,y.index=u.index,y.ref=u.ref,y}function rg(u,f,y,E,M,P){var V=2;if(E=u,typeof u=="function")Kx(u)&&(V=1);else if(typeof u=="string")V=5;else e:switch(u){case h:return wl(y.children,M,P,f);case d:V=8,M|=8;break;case p:return u=ss(12,y,f,M|2),u.elementType=p,u.lanes=P,u;case _:return u=ss(13,y,f,M),u.elementType=_,u.lanes=P,u;case g:return u=ss(19,y,f,M),u.elementType=g,u.lanes=P,u;case w:return ig(y,M,P,f);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case m:V=10;break e;case v:V=9;break e;case A:V=11;break e;case x:V=14;break e;case S:V=16,E=null;break e}throw Error(o(130,u==null?u:typeof u,""))}return f=ss(V,y,f,M),f.elementType=u,f.type=E,f.lanes=P,f}function wl(u,f,y,E){return u=ss(7,u,E,f),u.lanes=y,u}function ig(u,f,y,E){return u=ss(22,u,E,f),u.elementType=w,u.lanes=y,u.stateNode={},u}function $x(u,f,y){return u=ss(6,u,null,f),u.lanes=y,u}function Yx(u,f,y){return f=ss(4,u.children!==null?u.children:[],u.key,f),f.lanes=y,f.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},f}function j9(u,f,y,E,M){this.tag=f,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=je,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$_(0),this.expirationTimes=$_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$_(0),this.identifierPrefix=E,this.onRecoverableError=M,he&&(this.mutableSourceEagerHydrationData=null)}function Eb(u,f,y,E,M,P,V,Z,ye){return u=new j9(u,f,y,Z,ye),f===1?(f=1,P===!0&&(f|=8)):f=0,P=ss(3,null,null,f),u.current=P,P.stateNode=u,P.memoizedState={element:E,isDehydrated:y,cache:null,transitions:null},sx(P),u}function wb(u){if(!u)return qi;u=u._reactInternals;e:{if(N(u)!==u||u.tag!==1)throw Error(o(170));var f=u;do{switch(f.tag){case 3:f=f.stateNode.context;break e;case 1:if(cr(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break e}}f=f.return}while(f!==null);throw Error(o(171))}if(u.tag===1){var y=u.type;if(cr(y))return zc(u,y,f)}return f}function Mb(u){var f=u._reactInternals;if(f===void 0)throw typeof u.render=="function"?Error(o(188)):(u=Object.keys(u).join(","),Error(o(268,u)));return u=H(f),u===null?null:u.stateNode}function Tb(u,f){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var y=u.retryLane;u.retryLane=y!==0&&y<f?y:f}}function qx(u,f){Tb(u,f),(u=u.alternate)&&Tb(u,f)}function W9(u){return u=H(u),u===null?null:u.stateNode}function X9(){return null}return t.attemptContinuousHydration=function(u){if(u.tag===13){var f=ni();is(u,134217728,f),qx(u,134217728)}},t.attemptHydrationAtCurrentPriority=function(u){if(u.tag===13){var f=ni(),y=ca(u);is(u,y,f),qx(u,y)}},t.attemptSynchronousHydration=function(u){switch(u.tag){case 3:var f=u.stateNode;if(f.current.memoizedState.isDehydrated){var y=sf(f.pendingLanes);y!==0&&(Y_(f,y|1),vi(f,ur()),!(Ft&6)&&(Zc(),Js()))}break;case 13:var E=ni();pb(function(){return is(u,1,E)}),qx(u,1)}},t.batchedUpdates=function(u,f){var y=Ft;Ft|=1;try{return u(f)}finally{Ft=y,Ft===0&&(Zc(),vm&&Js())}},t.createComponentSelector=function(u){return{$$typeof:Gm,value:u}},t.createContainer=function(u,f,y,E,M,P,V){return Eb(u,f,!1,null,y,E,M,P,V)},t.createHasPseudoClassSelector=function(u){return{$$typeof:jm,value:u}},t.createHydrationContainer=function(u,f,y,E,M,P,V,Z,ye){return u=Eb(y,E,!0,u,M,P,V,Z,ye),u.context=wb(null),y=u.current,E=ni(),M=ca(y),P=So(E,M),P.callback=f??null,oa(y,P),u.current.lanes=M,of(u,M,E),vi(u,E),u},t.createPortal=function(u,f,y){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:E==null?null:""+E,children:u,containerInfo:f,implementation:y}},t.createRoleSelector=function(u){return{$$typeof:Wm,value:u}},t.createTestNameSelector=function(u){return{$$typeof:Xm,value:u}},t.createTextSelector=function(u){return{$$typeof:Jm,value:u}},t.deferredUpdates=function(u){var f=Qt,y=Hn.transition;try{return Hn.transition=null,Qt=16,u()}finally{Qt=f,Hn.transition=y}},t.discreteUpdates=function(u,f,y,E,M){var P=Qt,V=Hn.transition;try{return Hn.transition=null,Qt=1,u(f,y,E,M)}finally{Qt=P,Hn.transition=V,Ft===0&&Zc()}},t.findAllNodes=Fx,t.findBoundingRects=function(u,f){if(!B)throw Error(o(363));f=Fx(u,f),u=[];for(var y=0;y<f.length;y++)u.push(xe(f[y]));for(f=u.length-1;0<f;f--){y=u[f];for(var E=y.x,M=E+y.width,P=y.y,V=P+y.height,Z=f-1;0<=Z;Z--)if(f!==Z){var ye=u[Z],De=ye.x,et=De+ye.width,Mt=ye.y,ut=Mt+ye.height;if(E>=De&&P>=Mt&&M<=et&&V<=ut){u.splice(f,1);break}else if(E!==De||y.width!==ye.width||ut<P||Mt>V){if(!(P!==Mt||y.height!==ye.height||et<E||De>M)){De>E&&(ye.width+=De-E,ye.x=E),et<M&&(ye.width=M-De),u.splice(f,1);break}}else{Mt>P&&(ye.height+=Mt-P,ye.y=P),ut<V&&(ye.height=V-Mt),u.splice(f,1);break}}}return u},t.findHostInstance=Mb,t.findHostInstanceWithNoPortals=function(u){return u=L(u),u=u!==null?W(u):null,u===null?null:u.stateNode},t.findHostInstanceWithWarning=function(u){return Mb(u)},t.flushControlled=function(u){var f=Ft;Ft|=1;var y=Hn.transition,E=Qt;try{Hn.transition=null,Qt=1,u()}finally{Qt=E,Hn.transition=y,Ft=f,Ft===0&&(Zc(),Js())}},t.flushPassiveEffects=El,t.flushSync=pb,t.focusWithin=function(u,f){if(!B)throw Error(o(363));for(u=Bx(u),f=hb(u,f),f=Array.from(f),u=0;u<f.length;){var y=f[u++];if(!Se(y)){if(y.tag===5&&Ne(y.stateNode))return!0;for(y=y.child;y!==null;)f.push(y),y=y.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Qt},t.getFindAllNodesFailureDescription=function(u,f){if(!B)throw Error(o(363));var y=0,E=[];u=[Bx(u),0];for(var M=0;M<u.length;){var P=u[M++],V=u[M++],Z=f[V];if((P.tag!==5||!Se(P))&&(Nx(P,Z)&&(E.push(Ox(Z)),V++,V>y&&(y=V)),V<f.length))for(P=P.child;P!==null;)u.push(P,V),P=P.sibling}if(y<f.length){for(u=[];y<f.length;y++)u.push(Ox(f[y]));return`findAllNodes was able to match part of the selector:
  `+(E.join(" > ")+`

No matching component was found for:
  `)+u.join(" > ")}return null},t.getPublicRootInstance=function(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return q(u.child.stateNode);default:return u.child.stateNode}},t.injectIntoDevTools=function(u){if(u={bundleType:u.bundleType,version:u.version,rendererPackageName:u.rendererPackageName,rendererConfig:u.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:W9,findFiberByHostInstance:u.findFiberByHostInstance||X9,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")u=!1;else{var f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(f.isDisabled||!f.supportsFiber)u=!0;else{try{gm=f.inject(u),Ws=f}catch{}u=!!f.checkDCE}}return u},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(u,f,y,E){if(!B)throw Error(o(363));u=Fx(u,f);var M=ke(u,y,E).disconnect;return{disconnect:function(){M()}}},t.registerMutableSourceForHydration=function(u,f){var y=f._getVersion;y=y(f._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[f,y]:u.mutableSourceEagerHydrationData.push(f,y)},t.runWithPriority=function(u,f){var y=Qt;try{return Qt=u,f()}finally{Qt=y}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(u,f,y,E){var M=f.current,P=ni(),V=ca(M);return y=wb(y),f.context===null?f.context=y:f.pendingContext=y,f=So(P,V),f.payload={element:u},E=E===void 0?null:E,E!==null&&(f.callback=E),oa(M,f),u=is(M,V,P),u!==null&&Am(u,M,V),V},t};PU.exports=Sre;var Ere=PU.exports;const wre=gy(Ere);var IU={exports:{}},LU={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(O,G){var X=O.length;O.push(G);e:for(;0<X;){var Q=X-1>>>1,te=O[Q];if(0<i(te,G))O[Q]=G,O[X]=te,X=Q;else break e}}function t(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var G=O[0],X=O.pop();if(X!==G){O[0]=X;e:for(var Q=0,te=O.length,be=te>>>1;Q<be;){var ee=2*(Q+1)-1,pe=O[ee],Me=ee+1,Ie=O[Me];if(0>i(pe,X))Me<te&&0>i(Ie,pe)?(O[Q]=Ie,O[Me]=X,Q=Me):(O[Q]=pe,O[ee]=X,Q=ee);else if(Me<te&&0>i(Ie,X))O[Q]=Ie,O[Me]=X,Q=Me;else break e}}return G}function i(O,G){var X=O.sortIndex-G.sortIndex;return X!==0?X:O.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,p=3,m=!1,v=!1,A=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(O){for(var G=t(c);G!==null;){if(G.callback===null)r(c);else if(G.startTime<=O)r(c),G.sortIndex=G.expirationTime,e(l,G);else break;G=t(c)}}function w(O){if(A=!1,S(O),!v)if(t(l)!==null)v=!0,q(R);else{var G=t(c);G!==null&&ce(w,G.startTime-O)}}function R(O,G){v=!1,A&&(A=!1,g(D),D=-1),m=!0;var X=p;try{for(S(G),d=t(l);d!==null&&(!(d.expirationTime>G)||O&&!L());){var Q=d.callback;if(typeof Q=="function"){d.callback=null,p=d.priorityLevel;var te=Q(d.expirationTime<=G);G=n.unstable_now(),typeof te=="function"?d.callback=te:d===t(l)&&r(l),S(G)}else r(l);d=t(l)}if(d!==null)var be=!0;else{var ee=t(c);ee!==null&&ce(w,ee.startTime-G),be=!1}return be}finally{d=null,p=X,m=!1}}var C=!1,I=null,D=-1,N=5,T=-1;function L(){return!(n.unstable_now()-T<N)}function H(){if(I!==null){var O=n.unstable_now();T=O;var G=!0;try{G=I(!0,O)}finally{G?J():(C=!1,I=null)}}else C=!1}var J;if(typeof x=="function")J=function(){x(H)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,$=W.port2;W.port1.onmessage=H,J=function(){$.postMessage(null)}}else J=function(){_(H,0)};function q(O){I=O,C||(C=!0,J())}function ce(O,G){D=_(function(){O(n.unstable_now())},G)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(O){O.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,q(R))},n.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<O?Math.floor(1e3/O):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(O){switch(p){case 1:case 2:case 3:var G=3;break;default:G=p}var X=p;p=G;try{return O()}finally{p=X}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(O,G){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var X=p;p=O;try{return G()}finally{p=X}},n.unstable_scheduleCallback=function(O,G,X){var Q=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?Q+X:Q):X=Q,O){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=X+te,O={id:h++,callback:G,priorityLevel:O,startTime:X,expirationTime:te,sortIndex:-1},X>Q?(O.sortIndex=X,e(c,O),t(l)===null&&O===t(c)&&(A?(g(D),D=-1):A=!0,ce(w,X-Q))):(O.sortIndex=te,e(l,O),v||m||(v=!0,q(R))),O},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(O){var G=p;return function(){var X=p;p=G;try{return O.apply(this,arguments)}finally{p=X}}}})(LU);IU.exports=LU;var vL=IU.exports;const Mre=n=>typeof n=="object"&&typeof n.then=="function",rc=[];function DU(n,e,t=(r,i)=>r===i){if(n===e)return!0;if(!n||!e)return!1;const r=n.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!t(n[i],e[i]))return!1;return!0}function BU(n,e=null,t=!1,r={}){e===null&&(e=[n]);for(const s of rc)if(DU(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return r.lifespan&&r.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,r.lifespan)),s.response;if(!t)throw s.promise}const i={keys:e,equal:r.equal,remove:()=>{const s=rc.indexOf(i);s!==-1&&rc.splice(s,1)},promise:(Mre(n)?n:n(...e)).then(s=>{i.response=s,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(s=>i.error=s)};if(rc.push(i),!t)throw i.promise}const Tre=(n,e,t)=>BU(n,e,!1,t),Cre=(n,e,t)=>void BU(n,e,!0,t),bre=n=>{if(n===void 0||n.length===0)rc.splice(0,rc.length);else{const e=rc.find(t=>DU(n,t.keys,t.equal));e&&e.remove()}},XC={},Rre=n=>void Object.assign(XC,n);function Pre(n,e){function t(h,{args:d=[],attach:p,...m},v){let A=`${h[0].toUpperCase()}${h.slice(1)}`,_;if(h==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const g=m.object;_=Ru(g,{type:h,root:v,attach:p,primitive:!0})}else{const g=XC[A];if(!g)throw new Error(`R3F: ${A} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(d))throw new Error("R3F: The args prop must be an array!");_=Ru(new g(...d),{type:h,root:v,attach:p,memoizedProps:{args:d}})}return _.__r3f.attach===void 0&&(_ instanceof bt?_.__r3f.attach="geometry":_ instanceof er&&(_.__r3f.attach="material")),A!=="inject"&&XA(_,m),_}function r(h,d){let p=!1;if(d){var m,v;(m=d.__r3f)!=null&&m.attach?WA(h,d,d.__r3f.attach):d.isObject3D&&h.isObject3D&&(h.add(d),p=!0),p||(v=h.__r3f)==null||v.objects.push(d),d.__r3f||Ru(d,{}),d.__r3f.parent=h,Hw(d),Pu(d)}}function i(h,d,p){let m=!1;if(d){var v,A;if((v=d.__r3f)!=null&&v.attach)WA(h,d,d.__r3f.attach);else if(d.isObject3D&&h.isObject3D){d.parent=h,d.dispatchEvent({type:"added"});const _=h.children.filter(x=>x!==d),g=_.indexOf(p);h.children=[..._.slice(0,g),d,..._.slice(g)],m=!0}m||(A=h.__r3f)==null||A.objects.push(d),d.__r3f||Ru(d,{}),d.__r3f.parent=h,Hw(d),Pu(d)}}function s(h,d,p=!1){h&&[...h].forEach(m=>o(d,m,p))}function o(h,d,p){if(d){var m,v,A;if(d.__r3f&&(d.__r3f.parent=null),(m=h.__r3f)!=null&&m.objects&&(h.__r3f.objects=h.__r3f.objects.filter(w=>w!==d)),(v=d.__r3f)!=null&&v.attach)SL(h,d,d.__r3f.attach);else if(d.isObject3D&&h.isObject3D){var _;h.remove(d),(_=d.__r3f)!=null&&_.root&&Ure(nv(d),d)}const x=(A=d.__r3f)==null?void 0:A.primitive,S=!x&&(p===void 0?d.dispose!==null:p);if(!x){var g;s((g=d.__r3f)==null?void 0:g.objects,d,S),s(d.children,d,S)}if(delete d.__r3f,S&&d.dispose&&d.type!=="Scene"){const w=()=>{try{d.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?vL.unstable_scheduleCallback(vL.unstable_IdlePriority,w):w()}Pu(h)}}function a(h,d,p,m){var v;const A=(v=h.__r3f)==null?void 0:v.parent;if(!A)return;const _=t(d,p,h.__r3f.root);if(h.children){for(const g of h.children)g.__r3f&&r(_,g);h.children=h.children.filter(g=>!g.__r3f)}h.__r3f.objects.forEach(g=>r(_,g)),h.__r3f.objects=[],h.__r3f.autoRemovedBeforeAppend||o(A,h),_.parent&&(_.__r3f.autoRemovedBeforeAppend=!0),r(A,_),_.raycast&&_.__r3f.eventCount&&nv(_).getState().internal.interaction.push(_),[m,m.alternate].forEach(g=>{g!==null&&(g.stateNode=_,g.ref&&(typeof g.ref=="function"?g.ref(_):g.ref.current=_))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:wre({createInstance:t,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(h,d)=>{if(!d)return;const p=h.getState().scene;p.__r3f&&(p.__r3f.root=h,r(p,d))},removeChildFromContainer:(h,d)=>{d&&o(h.getState().scene,d)},insertInContainerBefore:(h,d,p)=>{if(!d||!p)return;const m=h.getState().scene;m.__r3f&&i(m,d,p)},getRootHostContext:()=>null,getChildHostContext:h=>h,finalizeInitialChildren(h){var d;return!!((d=h==null?void 0:h.__r3f)!=null?d:{}).handlers},prepareUpdate(h,d,p,m){var v;if(((v=h==null?void 0:h.__r3f)!=null?v:{}).primitive&&m.object&&m.object!==h)return[!0];{const{args:_=[],children:g,...x}=m,{args:S=[],children:w,...R}=p;if(!Array.isArray(_))throw new Error("R3F: the args prop must be an array!");if(_.some((I,D)=>I!==S[D]))return[!0];const C=HU(h,x,R,!0);return C.changes.length?[!1,C]:null}},commitUpdate(h,[d,p],m,v,A,_){d?a(h,m,A,_):XA(h,p)},commitMount(h,d,p,m){var v;const A=(v=h.__r3f)!=null?v:{};h.raycast&&A.handlers&&A.eventCount&&nv(h).getState().internal.interaction.push(h)},getPublicInstance:h=>h,prepareForCommit:()=>null,preparePortalMount:h=>Ru(h.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(h){var d;const{attach:p,parent:m}=(d=h.__r3f)!=null?d:{};p&&m&&SL(m,h,p),h.isObject3D&&(h.visible=!1),Pu(h)},unhideInstance(h,d){var p;const{attach:m,parent:v}=(p=h.__r3f)!=null?p:{};m&&v&&WA(v,h,m),(h.isObject3D&&d.visible==null||d.visible)&&(h.visible=!0),Pu(h)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():$u.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&mn.fun(performance.now)?performance.now:mn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:mn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:mn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:XA}}var yL,_L;const jA=n=>"colorSpace"in n||"outputColorSpace"in n,NU=()=>{var n;return(n=XC.ColorManagement)!=null?n:null},OU=n=>n&&n.isOrthographicCamera,Ire=n=>n&&n.hasOwnProperty("current"),am=typeof window<"u"&&((yL=window.document)!=null&&yL.createElement||((_L=window.navigator)==null?void 0:_L.product)==="ReactNative")?re.useLayoutEffect:re.useEffect;function FU(n){const e=re.useRef(n);return am(()=>void(e.current=n),[n]),e}function Lre({set:n}){return am(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class kU extends re.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}kU.getDerivedStateFromError=()=>({error:!0});const UU="__default",xL=new Map,Dre=n=>n&&!!n.memoized&&!!n.changes;function zU(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const Xf=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function nv(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const mn={obj:n=>n===Object(n)&&!mn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:i=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(mn.str(n)||mn.num(n))return n===e;const s=mn.obj(n);if(s&&r==="reference")return n===e;const o=mn.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&r==="shallow"){for(a in i?e:n)if(!mn.equ(n[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:n)if(n[a]!==e[a])return!1;if(mn.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function Bre(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function Nre(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function Ru(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function zw(n,e){let t=n;if(e.includes("-")){const r=e.split("-"),i=r.pop();return t=r.reduce((s,o)=>s[o],n),{target:t,key:i}}else return{target:t,key:e}}const AL=/-\d+$/;function WA(n,e,t){if(mn.str(t)){if(AL.test(t)){const s=t.replace(AL,""),{target:o,key:a}=zw(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:r,key:i}=zw(n,t);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=t(n,e)}function SL(n,e,t){var r,i;if(mn.str(t)){const{target:s,key:o}=zw(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(n,e);(i=e.__r3f)==null||delete i.previousAttach}function HU(n,{children:e,key:t,ref:r,...i},{children:s,key:o,ref:a,...l}={},c=!1){var h;const d=(h=n==null?void 0:n.__r3f)!=null?h:{},p=Object.entries(i),m=[];if(c){const A=Object.keys(l);for(let _=0;_<A.length;_++)i.hasOwnProperty(A[_])||p.unshift([A[_],UU+"remove"])}p.forEach(([A,_])=>{var g;if((g=n.__r3f)!=null&&g.primitive&&A==="object"||mn.equ(_,l[A]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(A))return m.push([A,_,!0,[]]);let x=[];A.includes("-")&&(x=A.split("-")),m.push([A,_,!1,x]);for(const S in i){const w=i[S];S.startsWith(`${A}-`)&&m.push([S,w,!1,S.split("-")])}});const v={...i};return d.memoizedProps&&d.memoizedProps.args&&(v.args=d.memoizedProps.args),d.memoizedProps&&d.memoizedProps.attach&&(v.attach=d.memoizedProps.attach),{memoized:v,changes:m}}const Ore=typeof process<"u"&&!1;function XA(n,e){var t,r,i;const s=(t=n.__r3f)!=null?t:{},o=s.root,a=(r=o==null||o.getState==null?void 0:o.getState())!=null?r:{},{memoized:l,changes:c}=Dre(e)?e:HU(n,e),h=s.eventCount;n.__r3f&&(n.__r3f.memoizedProps=l);for(let p=0;p<c.length;p++){let[m,v,A,_]=c[p];if(jA(n)){const w="srgb",R="srgb-linear";m==="encoding"?(m="colorSpace",v=v===3001?w:R):m==="outputEncoding"&&(m="outputColorSpace",v=v===3001?w:R)}let g=n,x=g[m];if(_.length&&(x=_.reduce((S,w)=>S[w],n),!(x&&x.set))){const[S,...w]=_.reverse();g=w.reverse().reduce((R,C)=>R[C],n),m=S}if(v===UU+"remove")if(g.constructor){let S=xL.get(g.constructor);S||(S=new g.constructor,xL.set(g.constructor,S)),v=S[m]}else v=0;if(A)v?s.handlers[m]=v:delete s.handlers[m],s.eventCount=Object.keys(s.handlers).length;else if(x&&x.set&&(x.copy||x instanceof fc)){if(Array.isArray(v))x.fromArray?x.fromArray(v):x.set(...v);else if(x.copy&&v&&v.constructor&&(Ore?x.constructor.name===v.constructor.name:x.constructor===v.constructor))x.copy(v);else if(v!==void 0){const S=x instanceof Ue;!S&&x.setScalar?x.setScalar(v):x instanceof fc&&v instanceof fc?x.mask=v.mask:x.set(v),!NU()&&!a.linear&&S&&x.convertSRGBToLinear()}}else if(g[m]=v,g[m]instanceof xn&&g[m].format===ci&&g[m].type===uo){const S=g[m];jA(S)&&jA(a.gl)?S.colorSpace=a.gl.outputColorSpace:S.encoding=a.gl.outputEncoding}Pu(n)}if(s.parent&&n.raycast&&h!==s.eventCount){const p=nv(n).getState().internal,m=p.interaction.indexOf(n);m>-1&&p.interaction.splice(m,1),s.eventCount&&p.interaction.push(n)}return!(c.length===1&&c[0][0]==="onUpdate")&&c.length&&(i=n.__r3f)!=null&&i.parent&&Hw(n),n}function Pu(n){var e,t;const r=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();r&&r.internal.frames===0&&r.invalidate()}function Hw(n){n.onUpdate==null||n.onUpdate(n)}function Fre(n,e){n.manual||(OU(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function C0(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function kre(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return $u.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return $u.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return $u.ContinuousEventPriority;default:return $u.DefaultEventPriority}}function VU(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function Ure(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{VU(t.capturedMap,e,r,i)})}function zre(n){function e(l){const{internal:c}=n.getState(),h=l.offsetX-c.initialClick[0],d=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(h*h+d*d))}function t(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(h=>{var d;return(d=c.__r3f)==null?void 0:d.handlers["onPointer"+h]}))}function r(l,c){const h=n.getState(),d=new Set,p=[],m=c?c(h.internal.interaction):h.internal.interaction;for(let g=0;g<m.length;g++){const x=Xf(m[g]);x&&(x.raycaster.camera=void 0)}h.previousRoot||h.events.compute==null||h.events.compute(l,h);function v(g){const x=Xf(g);if(!x||!x.events.enabled||x.raycaster.camera===null)return[];if(x.raycaster.camera===void 0){var S;x.events.compute==null||x.events.compute(l,x,(S=x.previousRoot)==null?void 0:S.getState()),x.raycaster.camera===void 0&&(x.raycaster.camera=null)}return x.raycaster.camera?x.raycaster.intersectObject(g,!0):[]}let A=m.flatMap(v).sort((g,x)=>{const S=Xf(g.object),w=Xf(x.object);return!S||!w?g.distance-x.distance:w.events.priority-S.events.priority||g.distance-x.distance}).filter(g=>{const x=C0(g);return d.has(x)?!1:(d.add(x),!0)});h.events.filter&&(A=h.events.filter(A,h));for(const g of A){let x=g.object;for(;x;){var _;(_=x.__r3f)!=null&&_.eventCount&&p.push({...g,eventObject:x}),x=x.parent}}if("pointerId"in l&&h.internal.capturedMap.has(l.pointerId))for(let g of h.internal.capturedMap.get(l.pointerId).values())d.has(C0(g.intersection))||p.push(g.intersection);return p}function i(l,c,h,d){const p=n.getState();if(l.length){const m={stopped:!1};for(const v of l){const A=Xf(v.object)||p,{raycaster:_,pointer:g,camera:x,internal:S}=A,w=new k(g.x,g.y,0).unproject(x),R=T=>{var L,H;return(L=(H=S.capturedMap.get(T))==null?void 0:H.has(v.eventObject))!=null?L:!1},C=T=>{const L={intersection:v,target:c.target};S.capturedMap.has(T)?S.capturedMap.get(T).set(v.eventObject,L):S.capturedMap.set(T,new Map([[v.eventObject,L]])),c.target.setPointerCapture(T)},I=T=>{const L=S.capturedMap.get(T);L&&VU(S.capturedMap,v.eventObject,L,T)};let D={};for(let T in c){let L=c[T];typeof L!="function"&&(D[T]=L)}let N={...v,...D,pointer:g,intersections:l,stopped:m.stopped,delta:h,unprojectedPoint:w,ray:_.ray,camera:x,stopPropagation(){const T="pointerId"in c&&S.capturedMap.get(c.pointerId);if((!T||T.has(v.eventObject))&&(N.stopped=m.stopped=!0,S.hovered.size&&Array.from(S.hovered.values()).find(L=>L.eventObject===v.eventObject))){const L=l.slice(0,l.indexOf(v));s([...L,v])}},target:{hasPointerCapture:R,setPointerCapture:C,releasePointerCapture:I},currentTarget:{hasPointerCapture:R,setPointerCapture:C,releasePointerCapture:I},nativeEvent:c};if(d(N),m.stopped===!0)break}}return l}function s(l){const{internal:c}=n.getState();for(const h of c.hovered.values())if(!l.length||!l.find(d=>d.object===h.object&&d.index===h.index&&d.instanceId===h.instanceId)){const p=h.eventObject.__r3f,m=p==null?void 0:p.handlers;if(c.hovered.delete(C0(h)),p!=null&&p.eventCount){const v={...h,intersections:l};m.onPointerOut==null||m.onPointerOut(v),m.onPointerLeave==null||m.onPointerLeave(v)}}}function o(l,c){for(let h=0;h<c.length;h++){const d=c[h].__r3f;d==null||d.handlers.onPointerMissed==null||d.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:h}=n.getState();"pointerId"in c&&h.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{h.capturedMap.has(c.pointerId)&&(h.capturedMap.delete(c.pointerId),s([]))})}}return function(h){const{onPointerMissed:d,internal:p}=n.getState();p.lastEvent.current=h;const m=l==="onPointerMove",v=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",_=r(h,m?t:void 0),g=v?e(h):0;l==="onPointerDown"&&(p.initialClick=[h.offsetX,h.offsetY],p.initialHits=_.map(S=>S.eventObject)),v&&!_.length&&g<=2&&(o(h,p.interaction),d&&d(h)),m&&s(_);function x(S){const w=S.eventObject,R=w.__r3f,C=R==null?void 0:R.handlers;if(R!=null&&R.eventCount)if(m){if(C.onPointerOver||C.onPointerEnter||C.onPointerOut||C.onPointerLeave){const I=C0(S),D=p.hovered.get(I);D?D.stopped&&S.stopPropagation():(p.hovered.set(I,S),C.onPointerOver==null||C.onPointerOver(S),C.onPointerEnter==null||C.onPointerEnter(S))}C.onPointerMove==null||C.onPointerMove(S)}else{const I=C[l];I?(!v||p.initialHits.includes(w))&&(o(h,p.interaction.filter(D=>!p.initialHits.includes(D))),I(S)):v&&p.initialHits.includes(w)&&o(h,p.interaction.filter(D=>!p.initialHits.includes(D)))}}i(_,h,g,x)}}return{handlePointer:a}}const GU=n=>!!(n!=null&&n.render),jU=re.createContext(null),Hre=(n,e)=>{const t=RU((a,l)=>{const c=new k,h=new k,d=new k;function p(g=l().camera,x=h,S=l().size){const{width:w,height:R,top:C,left:I}=S,D=w/R;x instanceof k?d.copy(x):d.set(...x);const N=g.getWorldPosition(c).distanceTo(d);if(OU(g))return{width:w/g.zoom,height:R/g.zoom,top:C,left:I,factor:1,distance:N,aspect:D};{const T=g.fov*Math.PI/180,L=2*Math.tan(T/2)*N,H=L*(w/R);return{width:H,height:L,top:C,left:I,factor:w/H,distance:N,aspect:D}}}let m;const v=g=>a(x=>({performance:{...x.performance,current:g}})),A=new _e;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(g=1)=>n(l(),g),advance:(g,x)=>e(g,x,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new VC,pointer:A,mouse:A,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const g=l();m&&clearTimeout(m),g.performance.current!==g.performance.min&&v(g.performance.min),m=setTimeout(()=>v(l().performance.max),g.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:g=>a(x=>({...x,events:{...x.events,...g}})),setSize:(g,x,S,w,R)=>{const C=l().camera,I={width:g,height:x,top:w||0,left:R||0,updateStyle:S};a(D=>({size:I,viewport:{...D.viewport,...p(C,h,I)}}))},setDpr:g=>a(x=>{const S=zU(g);return{viewport:{...x.viewport,dpr:S,initialDpr:x.viewport.initialDpr||S}}}),setFrameloop:(g="always")=>{const x=l().clock;x.stop(),x.elapsedTime=0,g!=="never"&&(x.start(),x.elapsedTime=0),a(()=>({frameloop:g}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:re.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(g,x,S)=>{const w=l().internal;return w.priority=w.priority+(x>0?1:0),w.subscribers.push({ref:g,priority:x,store:S}),w.subscribers=w.subscribers.sort((R,C)=>R.priority-C.priority),()=>{const R=l().internal;R!=null&&R.subscribers&&(R.priority=R.priority-(x>0?1:0),R.subscribers=R.subscribers.filter(C=>C.ref!==g))}}}}}),r=t.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:h,set:d}=t.getState();if(l.width!==i.width||l.height!==i.height||c.dpr!==s){var p;i=l,s=c.dpr,Fre(a,l),h.setPixelRatio(c.dpr);const m=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&h.domElement instanceof HTMLCanvasElement;h.setSize(l.width,l.height,m)}a!==o&&(o=a,d(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let b0,Vre=new Set,Gre=new Set,jre=new Set;function JA(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Jf(n,e){switch(n){case"before":return JA(Vre,e);case"after":return JA(Gre,e);case"tail":return JA(jre,e)}}let KA,$A;function YA(n,e,t){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(r=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),KA=e.internal.subscribers,b0=0;b0<KA.length;b0++)$A=KA[b0],$A.ref.current($A.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function Wre(n){let e=!1,t,r,i;function s(l){r=requestAnimationFrame(s),e=!0,t=0,Jf("before",l);for(const h of n.values()){var c;i=h.store.getState(),i.internal.active&&(i.frameloop==="always"||i.internal.frames>0)&&!((c=i.gl.xr)!=null&&c.isPresenting)&&(t+=YA(l,i))}if(Jf("after",l),t===0)return Jf("tail",l),e=!1,cancelAnimationFrame(r)}function o(l,c=1){var h;if(!l)return n.forEach(d=>o(d.store.getState()),c);(h=l.gl.xr)!=null&&h.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+c),e||(e=!0,requestAnimationFrame(s)))}function a(l,c=!0,h,d){if(c&&Jf("before",l),h)YA(l,h,d);else for(const p of n.values())YA(l,p.store.getState());c&&Jf("after",l)}return{loop:s,invalidate:o,advance:a}}function WU(){const n=re.useContext(jU);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function cs(n=t=>t,e){return WU()(n,e)}function XU(n,e=0){const t=WU(),r=t.getState().internal.subscribe,i=FU(n);return am(()=>r(i,e,t),[e,r,t]),null}const EL=new WeakMap;function JU(n,e){return function(t,...r){let i=EL.get(t);return i||(i=new t,EL.set(t,i)),n&&n(i),Promise.all(r.map(s=>new Promise((o,a)=>i.load(s,l=>{l.scene&&Object.assign(l,Bre(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`)))))).finally(()=>i.dispose==null?void 0:i.dispose())}}function lm(n,e,t,r){const i=Array.isArray(e)?e:[e],s=Tre(JU(t,r),[n,...i],{equal:mn.equ});return Array.isArray(e)?s:s[0]}lm.preload=function(n,e,t){const r=Array.isArray(e)?e:[e];return Cre(JU(t),[n,...r])};lm.clear=function(n,e){const t=Array.isArray(e)?e:[e];return bre([n,...t])};const kh=new Map,{invalidate:wL,advance:ML}=Wre(kh),{reconciler:my,applyProps:wu}=Pre(kh,kre),Mu={objects:"shallow",strict:!1},Xre=(n,e)=>{const t=typeof n=="function"?n(e):n;return GU(t)?t:new AC({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function Jre(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:s,left:o,updateStyle:a=t}=e;return{width:r,height:i,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:r,height:i,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:r,height:i,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function Kre(n){const e=kh.get(n),t=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||Hre(wL,ML),o=t||my.createContainer(s,$u.ConcurrentRoot,null,!1,null,"",i,null);e||kh.set(n,{fiber:o,store:s});let a,l=!1,c;return{configure(h={}){let{gl:d,size:p,scene:m,events:v,onCreated:A,shadows:_=!1,linear:g=!1,flat:x=!1,legacy:S=!1,orthographic:w=!1,frameloop:R="always",dpr:C=[1,2],performance:I,raycaster:D,camera:N,onPointerMissed:T}=h,L=s.getState(),H=L.gl;L.gl||L.set({gl:H=Xre(d,n)});let J=L.raycaster;J||L.set({raycaster:J=new TU});const{params:W,...$}=D||{};if(mn.equ($,J,Mu)||wu(J,{...$}),mn.equ(W,J.params,Mu)||wu(J,{params:{...J.params,...W}}),!L.camera||L.camera===c&&!mn.equ(c,N,Mu)){c=N;const te=N instanceof Qp,be=te?N:w?new vs(0,0,0,0,.1,1e3):new yn(75,0,.1,1e3);te||(be.position.z=5,N&&wu(be,N),!L.camera&&!(N!=null&&N.rotation)&&be.lookAt(0,0,0)),L.set({camera:be}),J.camera=be}if(!L.scene){let te;m instanceof dy?te=m:(te=new dy,m&&wu(te,m)),L.set({scene:Ru(te)})}if(!L.xr){var q;const te=(pe,Me)=>{const Ie=s.getState();Ie.frameloop!=="never"&&ML(pe,!0,Ie,Me)},be=()=>{const pe=s.getState();pe.gl.xr.enabled=pe.gl.xr.isPresenting,pe.gl.xr.setAnimationLoop(pe.gl.xr.isPresenting?te:null),pe.gl.xr.isPresenting||wL(pe)},ee={connect(){const pe=s.getState().gl;pe.xr.addEventListener("sessionstart",be),pe.xr.addEventListener("sessionend",be)},disconnect(){const pe=s.getState().gl;pe.xr.removeEventListener("sessionstart",be),pe.xr.removeEventListener("sessionend",be)}};typeof((q=H.xr)==null?void 0:q.addEventListener)=="function"&&ee.connect(),L.set({xr:ee})}if(H.shadowMap){const te=H.shadowMap.enabled,be=H.shadowMap.type;if(H.shadowMap.enabled=!!_,mn.boo(_))H.shadowMap.type=Ed;else if(mn.str(_)){var ce;const ee={basic:M4,percentage:v_,soft:Ed,variance:bs};H.shadowMap.type=(ce=ee[_])!=null?ce:Ed}else mn.obj(_)&&Object.assign(H.shadowMap,_);(te!==H.shadowMap.enabled||be!==H.shadowMap.type)&&(H.shadowMap.needsUpdate=!0)}const O=NU();O&&("enabled"in O?O.enabled=!S:"legacyMode"in O&&(O.legacyMode=S)),wu(H,{outputEncoding:g?3e3:3001,toneMapping:x?co:QT}),L.legacy!==S&&L.set(()=>({legacy:S})),L.linear!==g&&L.set(()=>({linear:g})),L.flat!==x&&L.set(()=>({flat:x})),d&&!mn.fun(d)&&!GU(d)&&!mn.equ(d,H,Mu)&&wu(H,d),v&&!L.events.handlers&&L.set({events:v(s)});const Q=Jre(n,p);return mn.equ(Q,L.size,Mu)||L.setSize(Q.width,Q.height,Q.updateStyle,Q.top,Q.left),C&&L.viewport.dpr!==zU(C)&&L.setDpr(C),L.frameloop!==R&&L.setFrameloop(R),L.onPointerMissed||L.set({onPointerMissed:T}),I&&!mn.equ(I,L.performance,Mu)&&L.set(te=>({performance:{...te.performance,...I}})),a=A,l=!0,this},render(h){return l||this.configure(),my.updateContainer(re.createElement($re,{store:s,children:h,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){KU(n)}}}function $re({store:n,children:e,onCreated:t,rootElement:r}){return am(()=>{const i=n.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),n.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),re.createElement(jU.Provider,{value:n},e)}function KU(n,e){const t=kh.get(n),r=t==null?void 0:t.fiber;if(r){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),my.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,a,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),Nre(i),kh.delete(n),e&&e(n)}catch{}},500)})}}my.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:re.version});function Uh(){return Uh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Uh.apply(this,arguments)}function Vw(n,e,t){var r,i,s,o,a;e==null&&(e=100);function l(){var h=Date.now()-o;h<e&&h>=0?r=setTimeout(l,e-h):(r=null,t||(a=n.apply(s,i),s=i=null))}var c=function(){s=this,i=arguments,o=Date.now();var h=t&&!r;return r||(r=setTimeout(l,e)),h&&(a=n.apply(s,i),s=i=null),a};return c.clear=function(){r&&(clearTimeout(r),r=null)},c.flush=function(){r&&(a=n.apply(s,i),s=i=null,clearTimeout(r),r=null)},c}Vw.debounce=Vw;var Yre=Vw;const TL=gy(Yre);function qre(n){let{debounce:e,scroll:t,polyfill:r,offsetSize:i}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const s=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=re.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=re.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),c=e?typeof e=="number"?e:e.scroll:null,h=e?typeof e=="number"?e:e.resize:null,d=re.useRef(!1);re.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[p,m,v]=re.useMemo(()=>{const x=()=>{if(!l.current.element)return;const{left:S,top:w,width:R,height:C,bottom:I,right:D,x:N,y:T}=l.current.element.getBoundingClientRect(),L={left:S,top:w,width:R,height:C,bottom:I,right:D,x:N,y:T};l.current.element instanceof HTMLElement&&i&&(L.height=l.current.element.offsetHeight,L.width=l.current.element.offsetWidth),Object.freeze(L),d.current&&!tie(l.current.lastBounds,L)&&a(l.current.lastBounds=L)};return[x,h?TL(x,h):x,c?TL(x,c):x]},[a,i,c,h]);function A(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(x=>x.removeEventListener("scroll",v,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function _(){l.current.element&&(l.current.resizeObserver=new s(v),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(x=>x.addEventListener("scroll",v,{capture:!0,passive:!0})))}const g=x=>{!x||x===l.current.element||(A(),l.current.element=x,l.current.scrollContainers=$U(x),_())};return Zre(v,!!t),Qre(m),re.useEffect(()=>{A(),_()},[t,v,m]),re.useEffect(()=>A,[]),[g,o,p]}function Qre(n){re.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function Zre(n,e){re.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function $U(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...$U(n.parentElement)]}const eie=["x","y","top","bottom","left","right","width","height"],tie=(n,e)=>eie.every(t=>n[t]===e[t]);var nie=Object.defineProperty,rie=Object.defineProperties,iie=Object.getOwnPropertyDescriptors,CL=Object.getOwnPropertySymbols,sie=Object.prototype.hasOwnProperty,oie=Object.prototype.propertyIsEnumerable,bL=(n,e,t)=>e in n?nie(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,RL=(n,e)=>{for(var t in e||(e={}))sie.call(e,t)&&bL(n,t,e[t]);if(CL)for(var t of CL(e))oie.call(e,t)&&bL(n,t,e[t]);return n},aie=(n,e)=>rie(n,iie(e));function YU(n,e,t){if(!n)return;if(t(n)===!0)return n;let r=e?n.return:n.child;for(;r;){const i=YU(r,e,t);if(i)return i;r=e?null:r.sibling}}function qU(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const JC=qU(re.createContext(null));class QU extends re.Component{render(){return re.createElement(JC.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:PL,ReactCurrentDispatcher:IL}=re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function lie(){const n=re.useContext(JC);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=re.useId();return re.useMemo(()=>{for(const r of[PL==null?void 0:PL.current,n,n==null?void 0:n.alternate]){if(!r)continue;const i=YU(r,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(i)return i}},[n,e])}function cie(){var n,e;const t=lie(),[r]=re.useState(()=>new Map);r.clear();let i=t;for(;i;){const s=(n=i.type)==null?void 0:n._context;s&&s!==JC&&!r.has(s)&&r.set(s,(e=IL==null?void 0:IL.current)==null?void 0:e.readContext(qU(s))),i=i.return}return r}function uie(){const n=cie();return re.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>r=>re.createElement(e,null,re.createElement(t.Provider,aie(RL({},r),{value:n.get(t)}))),e=>re.createElement(QU,RL({},e))),[n])}const qA={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function hie(n){const{handlePointer:e}=zre(n);return{priority:1,enabled:!0,compute(t,r,i){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(qA).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var t;const{events:r,internal:i}=n.getState();(t=i.lastEvent)!=null&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var r;const{set:i,events:s}=n.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:t}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,a])=>{const[l,c]=qA[o];t.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:t,events:r}=n.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[a]=qA[s];r.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const fie=re.forwardRef(function({children:e,fallback:t,resize:r,style:i,gl:s,events:o=hie,eventSource:a,eventPrefix:l,shadows:c,linear:h,flat:d,legacy:p,orthographic:m,frameloop:v,dpr:A,performance:_,raycaster:g,camera:x,scene:S,onPointerMissed:w,onCreated:R,...C},I){re.useMemo(()=>Rre(vre),[]);const D=uie(),[N,T]=qre({scroll:!0,debounce:{scroll:50,resize:0},...r}),L=re.useRef(null),H=re.useRef(null);re.useImperativeHandle(I,()=>L.current);const J=FU(w),[W,$]=re.useState(!1),[q,ce]=re.useState(!1);if(W)throw W;if(q)throw q;const O=re.useRef(null);am(()=>{const X=L.current;T.width>0&&T.height>0&&X&&(O.current||(O.current=Kre(X)),O.current.configure({gl:s,events:o,shadows:c,linear:h,flat:d,legacy:p,orthographic:m,frameloop:v,dpr:A,performance:_,raycaster:g,camera:x,scene:S,size:T,onPointerMissed:(...Q)=>J.current==null?void 0:J.current(...Q),onCreated:Q=>{Q.events.connect==null||Q.events.connect(a?Ire(a)?a.current:a:H.current),l&&Q.setEvents({compute:(te,be)=>{const ee=te[l+"X"],pe=te[l+"Y"];be.pointer.set(ee/be.size.width*2-1,-(pe/be.size.height)*2+1),be.raycaster.setFromCamera(be.pointer,be.camera)}}),R==null||R(Q)}}),O.current.render(re.createElement(D,null,re.createElement(kU,{set:ce},re.createElement(re.Suspense,{fallback:re.createElement(Lre,{set:$})},e)))))}),re.useEffect(()=>{const X=L.current;if(X)return()=>KU(X)},[]);const G=a?"none":"auto";return re.createElement("div",Uh({ref:H,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:G,...i}},C),re.createElement("div",{ref:N,style:{width:"100%",height:"100%"}},re.createElement("canvas",{ref:L,style:{display:"block"}},t)))}),die=re.forwardRef(function(e,t){return re.createElement(QU,null,re.createElement(fie,Uh({},e,{ref:t})))}),cm=new k,KC=new k,pie=new k;function mie(n,e,t){const r=cm.setFromMatrixPosition(n.matrixWorld);r.project(e);const i=t.width/2,s=t.height/2;return[r.x*i+i,-(r.y*s)+s]}function gie(n,e){const t=cm.setFromMatrixPosition(n.matrixWorld),r=KC.setFromMatrixPosition(e.matrixWorld),i=t.sub(r),s=e.getWorldDirection(pie);return i.angleTo(s)>Math.PI/2}function vie(n,e,t,r){const i=cm.setFromMatrixPosition(n.matrixWorld),s=i.clone();s.project(e),t.setFromCamera(s,e);const o=t.intersectObjects(r,!0);if(o.length){const a=o[0].distance;return i.distanceTo(t.ray.origin)<a}return!0}function yie(n,e){if(e instanceof vs)return e.zoom;if(e instanceof yn){const t=cm.setFromMatrixPosition(n.matrixWorld),r=KC.setFromMatrixPosition(e.matrixWorld),i=e.fov*Math.PI/180,s=t.distanceTo(r);return 1/(2*Math.tan(i/2)*s)}else return 1}function _ie(n,e,t){if(e instanceof yn||e instanceof vs){const r=cm.setFromMatrixPosition(n.matrixWorld),i=KC.setFromMatrixPosition(e.matrixWorld),s=r.distanceTo(i),o=(t[1]-t[0])/(e.far-e.near),a=t[1]-o*e.far;return Math.round(o*s+a)}}const Gw=n=>Math.abs(n)<1e-10?0:n;function ZU(n,e,t=""){let r="matrix3d(";for(let i=0;i!==16;i++)r+=Gw(e[i]*n.elements[i])+(i!==15?",":")");return t+r}const xie=(n=>e=>ZU(e,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),Aie=(n=>(e,t)=>ZU(e,n(t),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]);function Sie(n){return n&&typeof n=="object"&&"current"in n}const Eie=re.forwardRef(({children:n,eps:e=.001,style:t,className:r,prepend:i,center:s,fullscreen:o,portal:a,distanceFactor:l,sprite:c=!1,transform:h=!1,occlude:d,onOcclude:p,castShadow:m,receiveShadow:v,material:A,geometry:_,zIndexRange:g=[16777271,0],calculatePosition:x=mie,as:S="div",wrapperClass:w,pointerEvents:R="auto",...C},I)=>{const{gl:D,camera:N,scene:T,size:L,raycaster:H,events:J,viewport:W}=cs(),[$]=re.useState(()=>document.createElement(S)),q=re.useRef(),ce=re.useRef(null),O=re.useRef(0),G=re.useRef([0,0]),X=re.useRef(null),Q=re.useRef(null),te=(a==null?void 0:a.current)||J.connected||D.domElement.parentNode,be=re.useRef(null),ee=re.useRef(!1),pe=re.useMemo(()=>d&&d!=="blending"||Array.isArray(d)&&d.length&&Sie(d[0]),[d]);re.useLayoutEffect(()=>{const ue=D.domElement;d&&d==="blending"?(ue.style.zIndex=`${Math.floor(g[0]/2)}`,ue.style.position="absolute",ue.style.pointerEvents="none"):(ue.style.zIndex=null,ue.style.position=null,ue.style.pointerEvents=null)},[d]),re.useLayoutEffect(()=>{if(ce.current){const ue=q.current=QB($);if(T.updateMatrixWorld(),h)$.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const ae=x(ce.current,N,L);$.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${ae[0]}px,${ae[1]}px,0);transform-origin:0 0;`}return te&&(i?te.prepend($):te.appendChild($)),()=>{te&&te.removeChild($),ue.unmount()}}},[te,h]),re.useLayoutEffect(()=>{w&&($.className=w)},[w]);const Me=re.useMemo(()=>h?{position:"absolute",top:0,left:0,width:L.width,height:L.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-L.height/2,left:-L.width/2,width:L.width,height:L.height},...t},[t,s,o,L,h]),Ie=re.useMemo(()=>({position:"absolute",pointerEvents:R}),[R]);re.useLayoutEffect(()=>{if(ee.current=!1,h){var ue;(ue=q.current)==null||ue.render(re.createElement("div",{ref:X,style:Me},re.createElement("div",{ref:Q,style:Ie},re.createElement("div",{ref:I,className:r,style:t,children:n}))))}else{var ae;(ae=q.current)==null||ae.render(re.createElement("div",{ref:I,style:Me,className:r,children:n}))}});const $e=re.useRef(!0);XU(ue=>{if(ce.current){N.updateMatrixWorld(),ce.current.updateWorldMatrix(!0,!1);const ae=h?G.current:x(ce.current,N,L);if(h||Math.abs(O.current-N.zoom)>e||Math.abs(G.current[0]-ae[0])>e||Math.abs(G.current[1]-ae[1])>e){const z=gie(ce.current,N);let he=!1;pe&&(Array.isArray(d)?he=d.map(Ce=>Ce.current):d!=="blending"&&(he=[T]));const ie=$e.current;if(he){const Ce=vie(ce.current,N,H,he);$e.current=Ce&&!z}else $e.current=!z;ie!==$e.current&&(p?p(!$e.current):$.style.display=$e.current?"block":"none");const ve=Math.floor(g[0]/2),oe=d?pe?[g[0],ve]:[ve-1,0]:g;if($.style.zIndex=`${_ie(ce.current,N,oe)}`,h){const[Ce,Ee]=[L.width/2,L.height/2],F=N.projectionMatrix.elements[5]*Ee,{isOrthographicCamera:B,top:K,left:xe,bottom:Ae,right:Se}=N,qe=xie(N.matrixWorldInverse),Ne=B?`scale(${F})translate(${Gw(-(Se+xe)/2)}px,${Gw((K+Ae)/2)}px)`:`translateZ(${F}px)`;let ke=ce.current.matrixWorld;c&&(ke=N.matrixWorldInverse.clone().transpose().copyPosition(ke).scale(ce.current.scale),ke.elements[3]=ke.elements[7]=ke.elements[11]=0,ke.elements[15]=1),$.style.width=L.width+"px",$.style.height=L.height+"px",$.style.perspective=B?"":`${F}px`,X.current&&Q.current&&(X.current.style.transform=`${Ne}${qe}translate(${Ce}px,${Ee}px)`,Q.current.style.transform=Aie(ke,1/((l||10)/400)))}else{const Ce=l===void 0?1:yie(ce.current,N)*l;$.style.transform=`translate3d(${ae[0]}px,${ae[1]}px,0) scale(${Ce})`}G.current=ae,O.current=N.zoom}}if(!pe&&be.current&&!ee.current)if(h){if(X.current){const ae=X.current.children[0];if(ae!=null&&ae.clientWidth&&ae!=null&&ae.clientHeight){const{isOrthographicCamera:z}=N;if(z||_)C.scale&&(Array.isArray(C.scale)?C.scale instanceof k?be.current.scale.copy(C.scale.clone().divideScalar(1)):be.current.scale.set(1/C.scale[0],1/C.scale[1],1/C.scale[2]):be.current.scale.setScalar(1/C.scale));else{const he=(l||10)/400,ie=ae.clientWidth*he,ve=ae.clientHeight*he;be.current.scale.set(ie,ve,1)}ee.current=!0}}}else{const ae=$.children[0];if(ae!=null&&ae.clientWidth&&ae!=null&&ae.clientHeight){const z=1/W.factor,he=ae.clientWidth*z,ie=ae.clientHeight*z;be.current.scale.set(he,ie,1),ee.current=!0}be.current.lookAt(ue.camera.position)}});const je=re.useMemo(()=>({vertexShader:h?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom" 
            is false. 
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;
            
            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[h]);return re.createElement("group",Uh({},C,{ref:ce}),d&&!pe&&re.createElement("mesh",{castShadow:m,receiveShadow:v,ref:be},_||re.createElement("planeGeometry",null),A||re.createElement("shaderMaterial",{side:ds,vertexShader:je.vertexShader,fragmentShader:je.fragmentShader})))});let Kf=0;const wie=RU(n=>(Ku.onStart=(e,t,r)=>{n({active:!0,item:e,loaded:t,total:r,progress:(t-Kf)/(r-Kf)*100})},Ku.onLoad=()=>{n({active:!1})},Ku.onError=e=>n(t=>({errors:[...t.errors,e]})),Ku.onProgress=(e,t,r)=>{t===r&&(Kf=r),n({active:!0,item:e,loaded:t,total:r,progress:(t-Kf)/(r-Kf)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0}));function LL(n,e){if(e===pk)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===uy||e===aC){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const r=t.count-2,i=[];if(t)if(e===uy)for(let o=1;o<=r;o++)i.push(t.getX(0)),i.push(t.getX(o)),i.push(t.getX(o+1));else for(let o=0;o<r;o++)o%2===0?(i.push(t.getX(o)),i.push(t.getX(o+1)),i.push(t.getX(o+2))):(i.push(t.getX(o+2)),i.push(t.getX(o+1)),i.push(t.getX(o)));i.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(i),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}const Mie=parseInt(Kp.replace(/\D+/g,""));var Tie=Object.defineProperty,Cie=(n,e,t)=>e in n?Tie(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,_t=(n,e,t)=>(Cie(n,typeof e!="symbol"?e+"":e,t),t);const R0=new Dc,DL=new Fo,bie=Math.cos(70*(Math.PI/180)),BL=(n,e)=>(n%e+e)%e;let Rie=class extends _o{constructor(e,t){super(),_t(this,"object"),_t(this,"domElement"),_t(this,"enabled",!0),_t(this,"target",new k),_t(this,"minDistance",0),_t(this,"maxDistance",1/0),_t(this,"minZoom",0),_t(this,"maxZoom",1/0),_t(this,"minPolarAngle",0),_t(this,"maxPolarAngle",Math.PI),_t(this,"minAzimuthAngle",-1/0),_t(this,"maxAzimuthAngle",1/0),_t(this,"enableDamping",!1),_t(this,"dampingFactor",.05),_t(this,"enableZoom",!0),_t(this,"zoomSpeed",1),_t(this,"enableRotate",!0),_t(this,"rotateSpeed",1),_t(this,"enablePan",!0),_t(this,"panSpeed",1),_t(this,"screenSpacePanning",!0),_t(this,"keyPanSpeed",7),_t(this,"zoomToCursor",!1),_t(this,"autoRotate",!1),_t(this,"autoRotateSpeed",2),_t(this,"reverseOrbit",!1),_t(this,"reverseHorizontalOrbit",!1),_t(this,"reverseVerticalOrbit",!1),_t(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),_t(this,"mouseButtons",{LEFT:zl.ROTATE,MIDDLE:zl.DOLLY,RIGHT:zl.PAN}),_t(this,"touches",{ONE:Hl.ROTATE,TWO:Hl.DOLLY_PAN}),_t(this,"target0"),_t(this,"position0"),_t(this,"zoom0"),_t(this,"_domElementKeyEvents",null),_t(this,"getPolarAngle"),_t(this,"getAzimuthalAngle"),_t(this,"setPolarAngle"),_t(this,"setAzimuthalAngle"),_t(this,"getDistance"),_t(this,"listenToKeyEvents"),_t(this,"stopListenToKeyEvents"),_t(this,"saveState"),_t(this,"reset"),_t(this,"update"),_t(this,"connect"),_t(this,"dispose"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>h.phi,this.getAzimuthalAngle=()=>h.theta,this.setPolarAngle=Y=>{let we=BL(Y,2*Math.PI),He=h.phi;He<0&&(He+=2*Math.PI),we<0&&(we+=2*Math.PI);let Je=Math.abs(we-He);2*Math.PI-Je<Je&&(we<He?we+=2*Math.PI:He+=2*Math.PI),d.phi=we-He,r.update()},this.setAzimuthalAngle=Y=>{let we=BL(Y,2*Math.PI),He=h.theta;He<0&&(He+=2*Math.PI),we<0&&(we+=2*Math.PI);let Je=Math.abs(we-He);2*Math.PI-Je<Je&&(we<He?we+=2*Math.PI:He+=2*Math.PI),d.theta=we-He,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=Y=>{Y.addEventListener("keydown",lt),this._domElementKeyEvents=Y},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",lt),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),l=a.NONE},this.update=(()=>{const Y=new k,we=new k(0,1,0),He=new vr().setFromUnitVectors(e.up,we),Je=He.clone().invert(),vt=new k,j=new vr,Pe=2*Math.PI;return function(){const tt=r.object.position;He.setFromUnitVectors(e.up,we),Je.copy(He).invert(),Y.copy(tt).sub(r.target),Y.applyQuaternion(He),h.setFromVector3(Y),r.autoRotate&&l===a.NONE&&W(H()),r.enableDamping?(h.theta+=d.theta*r.dampingFactor,h.phi+=d.phi*r.dampingFactor):(h.theta+=d.theta,h.phi+=d.phi);let nt=r.minAzimuthAngle,It=r.maxAzimuthAngle;isFinite(nt)&&isFinite(It)&&(nt<-Math.PI?nt+=Pe:nt>Math.PI&&(nt-=Pe),It<-Math.PI?It+=Pe:It>Math.PI&&(It-=Pe),nt<=It?h.theta=Math.max(nt,Math.min(It,h.theta)):h.theta=h.theta>(nt+It)/2?Math.max(nt,h.theta):Math.min(It,h.theta)),h.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,h.phi)),h.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(m,r.dampingFactor):r.target.add(m),r.zoomToCursor&&N||r.object.isOrthographicCamera?h.radius=te(h.radius):h.radius=te(h.radius*p),Y.setFromSpherical(h),Y.applyQuaternion(Je),tt.copy(r.target).add(Y),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(d.theta*=1-r.dampingFactor,d.phi*=1-r.dampingFactor,m.multiplyScalar(1-r.dampingFactor)):(d.set(0,0,0),m.set(0,0,0));let Vt=!1;if(r.zoomToCursor&&N){let un=null;if(r.object instanceof yn&&r.object.isPerspectiveCamera){const Un=Y.length();un=te(Un*p);const Kt=Un-un;r.object.position.addScaledVector(I,Kt),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const Un=new k(D.x,D.y,0);Un.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/p)),r.object.updateProjectionMatrix(),Vt=!0;const Kt=new k(D.x,D.y,0);Kt.unproject(r.object),r.object.position.sub(Kt).add(Un),r.object.updateMatrixWorld(),un=Y.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;un!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(un).add(r.object.position):(R0.origin.copy(r.object.position),R0.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(R0.direction))<bie?e.lookAt(r.target):(DL.setFromNormalAndCoplanarPoint(r.object.up,r.target),R0.intersectPlane(DL,r.target))))}else r.object instanceof vs&&r.object.isOrthographicCamera&&(Vt=p!==1,Vt&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/p)),r.object.updateProjectionMatrix()));return p=1,N=!1,Vt||vt.distanceToSquared(r.object.position)>c||8*(1-j.dot(r.object.quaternion))>c?(r.dispatchEvent(i),vt.copy(r.object.position),j.copy(r.object.quaternion),Vt=!1,!0):!1}})(),this.connect=Y=>{Y===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),r.domElement=Y,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",zt),r.domElement.addEventListener("pointerdown",K),r.domElement.addEventListener("pointercancel",Se),r.domElement.addEventListener("wheel",ke)},this.dispose=()=>{var Y,we,He,Je,vt,j;(Y=r.domElement)==null||Y.removeEventListener("contextmenu",zt),(we=r.domElement)==null||we.removeEventListener("pointerdown",K),(He=r.domElement)==null||He.removeEventListener("pointercancel",Se),(Je=r.domElement)==null||Je.removeEventListener("wheel",ke),(vt=r.domElement)==null||vt.ownerDocument.removeEventListener("pointermove",xe),(j=r.domElement)==null||j.ownerDocument.removeEventListener("pointerup",Ae),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",lt)};const r=this,i={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const c=1e-6,h=new Uw,d=new Uw;let p=1;const m=new k,v=new _e,A=new _e,_=new _e,g=new _e,x=new _e,S=new _e,w=new _e,R=new _e,C=new _e,I=new k,D=new _e;let N=!1;const T=[],L={};function H(){return 2*Math.PI/60/60*r.autoRotateSpeed}function J(){return Math.pow(.95,r.zoomSpeed)}function W(Y){r.reverseOrbit||r.reverseHorizontalOrbit?d.theta+=Y:d.theta-=Y}function $(Y){r.reverseOrbit||r.reverseVerticalOrbit?d.phi+=Y:d.phi-=Y}const q=(()=>{const Y=new k;return function(He,Je){Y.setFromMatrixColumn(Je,0),Y.multiplyScalar(-He),m.add(Y)}})(),ce=(()=>{const Y=new k;return function(He,Je){r.screenSpacePanning===!0?Y.setFromMatrixColumn(Je,1):(Y.setFromMatrixColumn(Je,0),Y.crossVectors(r.object.up,Y)),Y.multiplyScalar(He),m.add(Y)}})(),O=(()=>{const Y=new k;return function(He,Je){const vt=r.domElement;if(vt&&r.object instanceof yn&&r.object.isPerspectiveCamera){const j=r.object.position;Y.copy(j).sub(r.target);let Pe=Y.length();Pe*=Math.tan(r.object.fov/2*Math.PI/180),q(2*He*Pe/vt.clientHeight,r.object.matrix),ce(2*Je*Pe/vt.clientHeight,r.object.matrix)}else vt&&r.object instanceof vs&&r.object.isOrthographicCamera?(q(He*(r.object.right-r.object.left)/r.object.zoom/vt.clientWidth,r.object.matrix),ce(Je*(r.object.top-r.object.bottom)/r.object.zoom/vt.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function G(Y){r.object instanceof yn&&r.object.isPerspectiveCamera||r.object instanceof vs&&r.object.isOrthographicCamera?p/=Y:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function X(Y){r.object instanceof yn&&r.object.isPerspectiveCamera||r.object instanceof vs&&r.object.isOrthographicCamera?p*=Y:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function Q(Y){if(!r.zoomToCursor||!r.domElement)return;N=!0;const we=r.domElement.getBoundingClientRect(),He=Y.clientX-we.left,Je=Y.clientY-we.top,vt=we.width,j=we.height;D.x=He/vt*2-1,D.y=-(Je/j)*2+1,I.set(D.x,D.y,1).unproject(r.object).sub(r.object.position).normalize()}function te(Y){return Math.max(r.minDistance,Math.min(r.maxDistance,Y))}function be(Y){v.set(Y.clientX,Y.clientY)}function ee(Y){Q(Y),w.set(Y.clientX,Y.clientY)}function pe(Y){g.set(Y.clientX,Y.clientY)}function Me(Y){A.set(Y.clientX,Y.clientY),_.subVectors(A,v).multiplyScalar(r.rotateSpeed);const we=r.domElement;we&&(W(2*Math.PI*_.x/we.clientHeight),$(2*Math.PI*_.y/we.clientHeight)),v.copy(A),r.update()}function Ie(Y){R.set(Y.clientX,Y.clientY),C.subVectors(R,w),C.y>0?G(J()):C.y<0&&X(J()),w.copy(R),r.update()}function $e(Y){x.set(Y.clientX,Y.clientY),S.subVectors(x,g).multiplyScalar(r.panSpeed),O(S.x,S.y),g.copy(x),r.update()}function je(Y){Q(Y),Y.deltaY<0?X(J()):Y.deltaY>0&&G(J()),r.update()}function ue(Y){let we=!1;switch(Y.code){case r.keys.UP:O(0,r.keyPanSpeed),we=!0;break;case r.keys.BOTTOM:O(0,-r.keyPanSpeed),we=!0;break;case r.keys.LEFT:O(r.keyPanSpeed,0),we=!0;break;case r.keys.RIGHT:O(-r.keyPanSpeed,0),we=!0;break}we&&(Y.preventDefault(),r.update())}function ae(){if(T.length==1)v.set(T[0].pageX,T[0].pageY);else{const Y=.5*(T[0].pageX+T[1].pageX),we=.5*(T[0].pageY+T[1].pageY);v.set(Y,we)}}function z(){if(T.length==1)g.set(T[0].pageX,T[0].pageY);else{const Y=.5*(T[0].pageX+T[1].pageX),we=.5*(T[0].pageY+T[1].pageY);g.set(Y,we)}}function he(){const Y=T[0].pageX-T[1].pageX,we=T[0].pageY-T[1].pageY,He=Math.sqrt(Y*Y+we*we);w.set(0,He)}function ie(){r.enableZoom&&he(),r.enablePan&&z()}function ve(){r.enableZoom&&he(),r.enableRotate&&ae()}function oe(Y){if(T.length==1)A.set(Y.pageX,Y.pageY);else{const He=Ye(Y),Je=.5*(Y.pageX+He.x),vt=.5*(Y.pageY+He.y);A.set(Je,vt)}_.subVectors(A,v).multiplyScalar(r.rotateSpeed);const we=r.domElement;we&&(W(2*Math.PI*_.x/we.clientHeight),$(2*Math.PI*_.y/we.clientHeight)),v.copy(A)}function Ce(Y){if(T.length==1)x.set(Y.pageX,Y.pageY);else{const we=Ye(Y),He=.5*(Y.pageX+we.x),Je=.5*(Y.pageY+we.y);x.set(He,Je)}S.subVectors(x,g).multiplyScalar(r.panSpeed),O(S.x,S.y),g.copy(x)}function Ee(Y){const we=Ye(Y),He=Y.pageX-we.x,Je=Y.pageY-we.y,vt=Math.sqrt(He*He+Je*Je);R.set(0,vt),C.set(0,Math.pow(R.y/w.y,r.zoomSpeed)),G(C.y),w.copy(R)}function F(Y){r.enableZoom&&Ee(Y),r.enablePan&&Ce(Y)}function B(Y){r.enableZoom&&Ee(Y),r.enableRotate&&oe(Y)}function K(Y){var we,He;r.enabled!==!1&&(T.length===0&&((we=r.domElement)==null||we.ownerDocument.addEventListener("pointermove",xe),(He=r.domElement)==null||He.ownerDocument.addEventListener("pointerup",Ae)),Pt(Y),Y.pointerType==="touch"?At(Y):qe(Y))}function xe(Y){r.enabled!==!1&&(Y.pointerType==="touch"?Re(Y):Ne(Y))}function Ae(Y){var we,He,Je;gt(Y),T.length===0&&((we=r.domElement)==null||we.releasePointerCapture(Y.pointerId),(He=r.domElement)==null||He.ownerDocument.removeEventListener("pointermove",xe),(Je=r.domElement)==null||Je.ownerDocument.removeEventListener("pointerup",Ae)),r.dispatchEvent(o),l=a.NONE}function Se(Y){gt(Y)}function qe(Y){let we;switch(Y.button){case 0:we=r.mouseButtons.LEFT;break;case 1:we=r.mouseButtons.MIDDLE;break;case 2:we=r.mouseButtons.RIGHT;break;default:we=-1}switch(we){case zl.DOLLY:if(r.enableZoom===!1)return;ee(Y),l=a.DOLLY;break;case zl.ROTATE:if(Y.ctrlKey||Y.metaKey||Y.shiftKey){if(r.enablePan===!1)return;pe(Y),l=a.PAN}else{if(r.enableRotate===!1)return;be(Y),l=a.ROTATE}break;case zl.PAN:if(Y.ctrlKey||Y.metaKey||Y.shiftKey){if(r.enableRotate===!1)return;be(Y),l=a.ROTATE}else{if(r.enablePan===!1)return;pe(Y),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function Ne(Y){if(r.enabled!==!1)switch(l){case a.ROTATE:if(r.enableRotate===!1)return;Me(Y);break;case a.DOLLY:if(r.enableZoom===!1)return;Ie(Y);break;case a.PAN:if(r.enablePan===!1)return;$e(Y);break}}function ke(Y){r.enabled===!1||r.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(Y.preventDefault(),r.dispatchEvent(s),je(Y),r.dispatchEvent(o))}function lt(Y){r.enabled===!1||r.enablePan===!1||ue(Y)}function At(Y){switch(at(Y),T.length){case 1:switch(r.touches.ONE){case Hl.ROTATE:if(r.enableRotate===!1)return;ae(),l=a.TOUCH_ROTATE;break;case Hl.PAN:if(r.enablePan===!1)return;z(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(r.touches.TWO){case Hl.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;ie(),l=a.TOUCH_DOLLY_PAN;break;case Hl.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;ve(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function Re(Y){switch(at(Y),l){case a.TOUCH_ROTATE:if(r.enableRotate===!1)return;oe(Y),r.update();break;case a.TOUCH_PAN:if(r.enablePan===!1)return;Ce(Y),r.update();break;case a.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;F(Y),r.update();break;case a.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;B(Y),r.update();break;default:l=a.NONE}}function zt(Y){r.enabled!==!1&&Y.preventDefault()}function Pt(Y){T.push(Y)}function gt(Y){delete L[Y.pointerId];for(let we=0;we<T.length;we++)if(T[we].pointerId==Y.pointerId){T.splice(we,1);return}}function at(Y){let we=L[Y.pointerId];we===void 0&&(we=new _e,L[Y.pointerId]=we),we.set(Y.pageX,Y.pageY)}function Ye(Y){const we=Y.pointerId===T[0].pointerId?T[1]:T[0];return L[we.pointerId]}t!==void 0&&this.connect(t),this.update()}};class $C extends ei{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new Bie(t)}),this.register(function(t){return new Vie(t)}),this.register(function(t){return new Gie(t)}),this.register(function(t){return new jie(t)}),this.register(function(t){return new Oie(t)}),this.register(function(t){return new Fie(t)}),this.register(function(t){return new kie(t)}),this.register(function(t){return new Uie(t)}),this.register(function(t){return new Die(t)}),this.register(function(t){return new zie(t)}),this.register(function(t){return new Nie(t)}),this.register(function(t){return new Hie(t)}),this.register(function(t){return new Iie(t)}),this.register(function(t){return new Wie(t)}),this.register(function(t){return new Xie(t)})}load(e,t,r,i){const s=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=fo.extractUrlBase(e),this.manager.itemStart(e);const a=function(c){i?i(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new Ji(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(h){t(h),s.manager.itemEnd(e)},a)}catch(h){a(h)}},r,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,i){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(fo.decodeText(new Uint8Array(e.slice(0,4)))===e9){try{o[Gt.KHR_BINARY_GLTF]=new Jie(e)}catch(h){i&&i(h);return}s=JSON.parse(o[Gt.KHR_BINARY_GLTF].content)}else s=JSON.parse(fo.decodeText(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new ose(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const h=this.pluginCallbacks[c](l);a[h.name]=h,o[h.name]=!0}if(s.extensionsUsed)for(let c=0;c<s.extensionsUsed.length;++c){const h=s.extensionsUsed[c],d=s.extensionsRequired||[];switch(h){case Gt.KHR_MATERIALS_UNLIT:o[h]=new Lie;break;case Gt.KHR_DRACO_MESH_COMPRESSION:o[h]=new Kie(s,this.dracoLoader);break;case Gt.KHR_TEXTURE_TRANSFORM:o[h]=new $ie;break;case Gt.KHR_MESH_QUANTIZATION:o[h]=new Yie;break;default:d.indexOf(h)>=0&&a[h]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(r,i)}parseAsync(e,t){const r=this;return new Promise(function(i,s){r.parse(e,t,i,s)})}}function Pie(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Gt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Iie{constructor(e){this.parser=e,this.name=Gt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let r=0,i=t.length;r<i;r++){const s=t[r];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,r="light:"+e;let i=t.cache.get(r);if(i)return i;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const h=new Ue(16777215);l.color!==void 0&&h.fromArray(l.color);const d=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new zC(h),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new UC(h),c.distance=d;break;case"spot":c=new kC(h),c.distance=d,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,Ta(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),i=Promise.resolve(c),t.cache.add(r,i),i}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,r=this.parser,s=r.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return r._getNodeRef(t.cache,a,l)})}}class Lie{constructor(){this.name=Gt.KHR_MATERIALS_UNLIT}getMaterialType(){return zi}extendParams(e,t,r){const i=[];e.color=new Ue(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}s.baseColorTexture!==void 0&&i.push(r.assignTexture(e,"map",s.baseColorTexture,3001))}return Promise.all(i)}}class Die{constructor(e){this.parser=e,this.name=Gt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class Bie{constructor(e){this.parser=e,this.name=Gt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:xo}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(r.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new _e(a,a)}return Promise.all(s)}}class Nie{constructor(e){this.parser=e,this.name=Gt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:xo}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class Oie{constructor(e){this.parser=e,this.name=Gt.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:xo}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Ue(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=i.extensions[this.name];return o.sheenColorFactor!==void 0&&t.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(r.assignTexture(t,"sheenColorMap",o.sheenColorTexture,3001)),o.sheenRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class Fie{constructor(e){this.parser=e,this.name=Gt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:xo}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(r.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class kie{constructor(e){this.parser=e,this.name=Gt.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:xo}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(r.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new Ue(a[0],a[1],a[2]),Promise.all(s)}}class Uie{constructor(e){this.parser=e,this.name=Gt.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:xo}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class zie{constructor(e){this.parser=e,this.name=Gt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:xo}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(r.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new Ue(a[0],a[1],a[2]),o.specularColorTexture!==void 0&&s.push(r.assignTexture(t,"specularColorMap",o.specularColorTexture,3001)),Promise.all(s)}}class Hie{constructor(e){this.parser=e,this.name=Gt.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:xo}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(r.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class Vie{constructor(e){this.parser=e,this.name=Gt.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,r=t.json,i=r.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class Gie{constructor(e){this.parser=e,this.name=Gt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const c=r.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class jie{constructor(e){this.parser=e,this.name=Gt.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const c=r.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Wie{constructor(e){this.name=Gt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const i=r.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=i.byteOffset||0,c=i.byteLength||0,h=i.count,d=i.byteStride,p=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(h,d,p,i.mode,i.filter).then(function(m){return m.buffer}):o.ready.then(function(){const m=new ArrayBuffer(h*d);return o.decodeGltfBuffer(new Uint8Array(m),h,d,p,i.mode,i.filter),m})})}else return null}}class Xie{constructor(e){this.name=Gt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,r=t.nodes[e];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const i=t.meshes[r.mesh];for(const c of i.primitives)if(c.mode!==ls.TRIANGLES&&c.mode!==ls.TRIANGLE_STRIP&&c.mode!==ls.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=r.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(h=>(l[c]=h,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const h=c.pop(),d=h.isGroup?h.children:[h],p=c[0].count,m=[];for(const v of d){const A=new ht,_=new k,g=new vr,x=new k(1,1,1),S=new wC(v.geometry,v.material,p);for(let w=0;w<p;w++)l.TRANSLATION&&_.fromBufferAttribute(l.TRANSLATION,w),l.ROTATION&&g.fromBufferAttribute(l.ROTATION,w),l.SCALE&&x.fromBufferAttribute(l.SCALE,w),S.setMatrixAt(w,A.compose(_,g,x));for(const w in l)w!=="TRANSLATION"&&w!=="ROTATION"&&w!=="SCALE"&&v.geometry.setAttribute(w,l[w]);Xt.prototype.copy.call(S,v),this.parser.assignFinalMaterial(S),m.push(S)}return h.isGroup?(h.clear(),h.add(...m),h):m[0]}))}}const e9="glTF",$f=12,NL={JSON:1313821514,BIN:5130562};class Jie{constructor(e){this.name=Gt.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,$f);if(this.header={magic:fo.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==e9)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-$f,i=new DataView(e,$f);let s=0;for(;s<r;){const o=i.getUint32(s,!0);s+=4;const a=i.getUint32(s,!0);if(s+=4,a===NL.JSON){const l=new Uint8Array(e,$f+s,o);this.content=fo.decodeText(l)}else if(a===NL.BIN){const l=$f+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Kie{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Gt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const r=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const h in o){const d=jw[h]||h.toLowerCase();a[d]=o[h]}for(const h in e.attributes){const d=jw[h]||h.toLowerCase();if(o[h]!==void 0){const p=r.accessors[e.attributes[h]],m=hh[p.componentType];c[d]=m.name,l[d]=p.normalized===!0}}return t.getDependency("bufferView",s).then(function(h){return new Promise(function(d){i.decodeDracoFile(h,function(p){for(const m in p.attributes){const v=p.attributes[m],A=l[m];A!==void 0&&(v.normalized=A)}d(p)},a,c)})})}}class $ie{constructor(){this.name=Gt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class Yie{constructor(){this.name=Gt.KHR_MESH_QUANTIZATION}}class t9 extends tf{constructor(e,t,r,i){super(e,t,r,i)}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let o=0;o!==i;o++)t[o]=r[s+o];return t}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,h=i-t,d=(r-t)/h,p=d*d,m=p*d,v=e*c,A=v-c,_=-2*m+3*p,g=m-p,x=1-_,S=g-p+d;for(let w=0;w!==a;w++){const R=o[A+w+a],C=o[A+w+l]*h,I=o[v+w+a],D=o[v+w]*h;s[w]=x*R+S*C+_*I+g*D}return s}}const qie=new vr;class Qie extends t9{interpolate_(e,t,r,i){const s=super.interpolate_(e,t,r,i);return qie.fromArray(s).normalize().toArray(s),s}}const ls={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},hh={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},OL={9728:Nn,9729:gn,9984:pp,9985:ch,9986:Pa,9987:gs},FL={33071:Rr,33648:Rh,10497:sl},QA={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},jw={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...Mie>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Sa={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Zie={CUBICSPLINE:void 0,LINEAR:Tc,STEP:Ih},ZA={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function ese(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new om({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:vo})),n.DefaultMaterial}function Nl(n,e,t){for(const r in t.extensions)n[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=t.extensions[r])}function Ta(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function tse(n,e,t){let r=!1,i=!1,s=!1;for(let c=0,h=e.length;c<h;c++){const d=e[c];if(d.POSITION!==void 0&&(r=!0),d.NORMAL!==void 0&&(i=!0),d.COLOR_0!==void 0&&(s=!0),r&&i&&s)break}if(!r&&!i&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let c=0,h=e.length;c<h;c++){const d=e[c];if(r){const p=d.POSITION!==void 0?t.getDependency("accessor",d.POSITION):n.attributes.position;o.push(p)}if(i){const p=d.NORMAL!==void 0?t.getDependency("accessor",d.NORMAL):n.attributes.normal;a.push(p)}if(s){const p=d.COLOR_0!==void 0?t.getDependency("accessor",d.COLOR_0):n.attributes.color;l.push(p)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const h=c[0],d=c[1],p=c[2];return r&&(n.morphAttributes.position=h),i&&(n.morphAttributes.normal=d),s&&(n.morphAttributes.color=p),n.morphTargetsRelative=!0,n})}function nse(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,r=e.weights.length;t<r;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let r=0,i=t.length;r<i;r++)n.morphTargetDictionary[t[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function rse(n){let e;const t=n.extensions&&n.extensions[Gt.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+eS(t.attributes):e=n.indices+":"+eS(n.attributes)+":"+n.mode,n.targets!==void 0)for(let r=0,i=n.targets.length;r<i;r++)e+=":"+eS(n.targets[r]);return e}function eS(n){let e="";const t=Object.keys(n).sort();for(let r=0,i=t.length;r<i;r++)e+=t[r]+":"+n[t[r]]+";";return e}function Ww(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function ise(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const sse=new ht;class ose{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Pie,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,i=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,s=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||r||i&&s<98?this.textureLoader=new pU(this.options.manager):this.textureLoader=new SU(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Ji(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const r=this,i=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(o){const a={scene:o[0][i.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:i.asset,parser:r,userData:{}};Nl(s,a,i),Ta(a,i),Promise.all(r._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let i=0,s=t.length;i<s;i++){const o=t[i].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const o=e[i];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(r[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;const i=r.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,h]of o.children.entries())s(h,a.children[c])};return s(r,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){const i=e(t[r]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const r=[];for(let i=0;i<t.length;i++){const s=e(t[i]);s&&r.push(s)}return r}getDependency(e,t){const r=e+":"+t;let i=this.cache.get(r);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(r,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const r=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(s,o){return r.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],r=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Gt.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,o){r.load(fo.resolveURL(t.uri,i.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(r){const i=t.byteLength||0,s=t.byteOffset||0;return r.slice(s,s+i)})}loadAccessor(e){const t=this,r=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){const o=QA[i.type],a=hh[i.componentType],l=i.normalized===!0,c=new a(i.count*o);return Promise.resolve(new Jt(c,o,l))}const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=QA[i.type],c=hh[i.componentType],h=c.BYTES_PER_ELEMENT,d=h*l,p=i.byteOffset||0,m=i.bufferView!==void 0?r.bufferViews[i.bufferView].byteStride:void 0,v=i.normalized===!0;let A,_;if(m&&m!==d){const g=Math.floor(p/m),x="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+g+":"+i.count;let S=t.cache.get(x);S||(A=new c(a,g*m,i.count*m/h),S=new tm(A,m/h),t.cache.add(x,S)),_=new ol(S,l,p%m/h,v)}else a===null?A=new c(i.count*l):A=new c(a,p,i.count*l),_=new Jt(A,l,v);if(i.sparse!==void 0){const g=QA.SCALAR,x=hh[i.sparse.indices.componentType],S=i.sparse.indices.byteOffset||0,w=i.sparse.values.byteOffset||0,R=new x(o[1],S,i.sparse.count*g),C=new c(o[2],w,i.sparse.count*l);a!==null&&(_=new Jt(_.array.slice(),_.itemSize,_.normalized));for(let I=0,D=R.length;I<D;I++){const N=R[I];if(_.setX(N,C[I*l]),l>=2&&_.setY(N,C[I*l+1]),l>=3&&_.setZ(N,C[I*l+2]),l>=4&&_.setW(N,C[I*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return _})}loadTexture(e){const t=this.json,r=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=r.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,r){const i=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,r).then(function(h){h.flipY=!1,h.name=o.name||a.name||"",h.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(h.name=a.uri);const p=(s.samplers||{})[o.sampler]||{};return h.magFilter=OL[p.magFilter]||gn,h.minFilter=OL[p.minFilter]||gs,h.wrapS=FL[p.wrapS]||sl,h.wrapT=FL[p.wrapT]||sl,i.associations.set(h,{textures:e}),h}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const r=this,i=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(d=>d.clone());const o=i.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=r.getDependency("bufferView",o.bufferView).then(function(d){c=!0;const p=new Blob([d],{type:o.mimeType});return l=a.createObjectURL(p),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const h=Promise.resolve(l).then(function(d){return new Promise(function(p,m){let v=p;t.isImageBitmapLoader===!0&&(v=function(A){const _=new xn(A);_.needsUpdate=!0,p(_)}),t.load(fo.resolveURL(d,s.path),v,void 0,m)})}).then(function(d){return c===!0&&a.revokeObjectURL(l),d.userData.mimeType=o.mimeType||ise(o.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),d});return this.sourceCache[e]=h,h}assignTexture(e,t,r,i){const s=this;return this.getDependency("texture",r.index).then(function(o){if(!o)return null;if(r.texCoord!==void 0&&r.texCoord>0&&(o=o.clone(),o.channel=r.texCoord),s.extensions[Gt.KHR_TEXTURE_TRANSFORM]){const a=r.extensions!==void 0?r.extensions[Gt.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[Gt.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return i!==void 0&&("colorSpace"in o?o.colorSpace=i===3001?"srgb":"srgb-linear":o.encoding=i),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let r=e.material;const i=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new C_,er.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,l.sizeAttenuation=!1,this.cache.add(a,l)),r=l}else if(e.isLine){const a="LineBasicMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new Zr,er.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,this.cache.add(a,l)),r=l}if(i||s||o){let a="ClonedMaterial:"+r.uuid+":";i&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=r.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),i&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(r))),r=l}e.material=r}getMaterialType(){return om}loadMaterial(e){const t=this,r=this.json,i=this.extensions,s=r.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[Gt.KHR_MATERIALS_UNLIT]){const d=i[Gt.KHR_MATERIALS_UNLIT];o=d.getMaterialType(),c.push(d.extendParams(a,s,t))}else{const d=s.pbrMetallicRoughness||{};if(a.color=new Ue(1,1,1),a.opacity=1,Array.isArray(d.baseColorFactor)){const p=d.baseColorFactor;a.color.fromArray(p),a.opacity=p[3]}d.baseColorTexture!==void 0&&c.push(t.assignTexture(a,"map",d.baseColorTexture,3001)),a.metalness=d.metallicFactor!==void 0?d.metallicFactor:1,a.roughness=d.roughnessFactor!==void 0?d.roughnessFactor:1,d.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(a,"metalnessMap",d.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",d.metallicRoughnessTexture))),o=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=ds);const h=s.alphaMode||ZA.OPAQUE;if(h===ZA.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,h===ZA.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==zi&&(c.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new _e(1,1),s.normalTexture.scale!==void 0)){const d=s.normalTexture.scale;a.normalScale.set(d,d)}return s.occlusionTexture!==void 0&&o!==zi&&(c.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==zi&&(a.emissive=new Ue().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&o!==zi&&c.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,3001)),Promise.all(c).then(function(){const d=new o(a);return s.name&&(d.name=s.name),Ta(d,s),t.associations.set(d,{materials:e}),s.extensions&&Nl(i,d,s),d})}createUniqueName(e){const t=Wt.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,r=this.extensions,i=this.primitiveCache;function s(a){return r[Gt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return kL(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],h=rse(c),d=i[h];if(d)o.push(d.promise);else{let p;c.extensions&&c.extensions[Gt.KHR_DRACO_MESH_COMPRESSION]?p=s(c):p=kL(new bt,c,t),i[h]={primitive:c,promise:p},o.push(p)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.json,i=this.extensions,s=r.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const h=o[l].material===void 0?ese(this.cache):this.getDependency("material",o[l].material);a.push(h)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),h=l[l.length-1],d=[];for(let m=0,v=h.length;m<v;m++){const A=h[m],_=o[m];let g;const x=c[m];if(_.mode===ls.TRIANGLES||_.mode===ls.TRIANGLE_STRIP||_.mode===ls.TRIANGLE_FAN||_.mode===void 0)g=s.isSkinnedMesh===!0?new EC(A,x):new jn(A,x),g.isSkinnedMesh===!0&&g.normalizeSkinWeights(),_.mode===ls.TRIANGLE_STRIP?g.geometry=LL(g.geometry,aC):_.mode===ls.TRIANGLE_FAN&&(g.geometry=LL(g.geometry,uy));else if(_.mode===ls.LINES)g=new zs(A,x);else if(_.mode===ls.LINE_STRIP)g=new na(A,x);else if(_.mode===ls.LINE_LOOP)g=new MC(A,x);else if(_.mode===ls.POINTS)g=new TC(A,x);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+_.mode);Object.keys(g.geometry.morphAttributes).length>0&&nse(g,s),g.name=t.createUniqueName(s.name||"mesh_"+e),Ta(g,s),_.extensions&&Nl(i,g,_),t.assignFinalMaterial(g),d.push(g)}for(let m=0,v=d.length;m<v;m++)t.associations.set(d[m],{meshes:e,primitives:m});if(d.length===1)return s.extensions&&Nl(i,d[0],s),d[0];const p=new Go;s.extensions&&Nl(i,p,s),t.associations.set(p,{meshes:e});for(let m=0,v=d.length;m<v;m++)p.add(d[m]);return p})}loadCamera(e){let t;const r=this.json.cameras[e],i=r[r.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?t=new yn(Mk.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):r.type==="orthographic"&&(t=new vs(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),Ta(t,r),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],r=[];for(let i=0,s=t.joints.length;i<s;i++)r.push(this._loadNodeShallow(t.joints[i]));return t.inverseBindMatrices!==void 0?r.push(this.getDependency("accessor",t.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(i){const s=i.pop(),o=i,a=[],l=[];for(let c=0,h=o.length;c<h;c++){const d=o[c];if(d){a.push(d);const p=new ht;s!==null&&p.fromArray(s.array,c*16),l.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new nm(a,l)})}loadAnimation(e){const r=this.json.animations[e],i=r.name?r.name:"animation_"+e,s=[],o=[],a=[],l=[],c=[];for(let h=0,d=r.channels.length;h<d;h++){const p=r.channels[h],m=r.samplers[p.sampler],v=p.target,A=v.node,_=r.parameters!==void 0?r.parameters[m.input]:m.input,g=r.parameters!==void 0?r.parameters[m.output]:m.output;v.node!==void 0&&(s.push(this.getDependency("node",A)),o.push(this.getDependency("accessor",_)),a.push(this.getDependency("accessor",g)),l.push(m),c.push(v))}return Promise.all([Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c)]).then(function(h){const d=h[0],p=h[1],m=h[2],v=h[3],A=h[4],_=[];for(let g=0,x=d.length;g<x;g++){const S=d[g],w=p[g],R=m[g],C=v[g],I=A[g];if(S===void 0)continue;S.updateMatrix();let D;switch(Sa[I.path]){case Sa.weights:D=Nh;break;case Sa.rotation:D=al;break;case Sa.position:case Sa.scale:default:D=Oh;break}const N=S.name?S.name:S.uuid,T=C.interpolation!==void 0?Zie[C.interpolation]:Tc,L=[];Sa[I.path]===Sa.weights?S.traverse(function(J){J.morphTargetInfluences&&L.push(J.name?J.name:J.uuid)}):L.push(N);let H=R.array;if(R.normalized){const J=Ww(H.constructor),W=new Float32Array(H.length);for(let $=0,q=H.length;$<q;$++)W[$]=H[$]*J;H=W}for(let J=0,W=L.length;J<W;J++){const $=new D(L[J]+"."+Sa[I.path],w.array,H,T);C.interpolation==="CUBICSPLINE"&&($.createInterpolant=function(ce){const O=this instanceof al?Qie:t9;return new O(this.times,this.values,this.getValueSize()/3,ce)},$.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),_.push($)}}return new Fh(i,void 0,_)})}createNodeMesh(e){const t=this.json,r=this,i=t.nodes[e];return i.mesh===void 0?null:r.getDependency("mesh",i.mesh).then(function(s){const o=r._getNodeRef(r.meshCache,i.mesh,s);return i.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=i.weights.length;l<c;l++)a.morphTargetInfluences[l]=i.weights[l]}),o})}loadNode(e){const t=this.json,r=this,i=t.nodes[e],s=r._loadNodeShallow(e),o=[],a=i.children||[];for(let c=0,h=a.length;c<h;c++)o.push(r.getDependency("node",a[c]));const l=i.skin===void 0?Promise.resolve(null):r.getDependency("skin",i.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const h=c[0],d=c[1],p=c[2];p!==null&&h.traverse(function(m){m.isSkinnedMesh&&m.bind(p,sse)});for(let m=0,v=d.length;m<v;m++)h.add(d[m]);return h})}_loadNodeShallow(e){const t=this.json,r=this.extensions,i=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?i.createUniqueName(s.name):"",a=[],l=i._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(i.getDependency("camera",s.camera).then(function(c){return i._getNodeRef(i.cameraCache,s.camera,c)})),i._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let h;if(s.isBone===!0?h=new T_:c.length>1?h=new Go:c.length===1?h=c[0]:h=new Xt,h!==c[0])for(let d=0,p=c.length;d<p;d++)h.add(c[d]);if(s.name&&(h.userData.name=s.name,h.name=o),Ta(h,s),s.extensions&&Nl(r,h,s),s.matrix!==void 0){const d=new ht;d.fromArray(s.matrix),h.applyMatrix4(d)}else s.translation!==void 0&&h.position.fromArray(s.translation),s.rotation!==void 0&&h.quaternion.fromArray(s.rotation),s.scale!==void 0&&h.scale.fromArray(s.scale);return i.associations.has(h)||i.associations.set(h,{}),i.associations.get(h).nodes=e,h}),this.nodeCache[e]}loadScene(e){const t=this.extensions,r=this.json.scenes[e],i=this,s=new Go;r.name&&(s.name=i.createUniqueName(r.name)),Ta(s,r),r.extensions&&Nl(t,s,r);const o=r.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(i.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let h=0,d=l.length;h<d;h++)s.add(l[h]);const c=h=>{const d=new Map;for(const[p,m]of i.associations)(p instanceof er||p instanceof xn)&&d.set(p,m);return h.traverse(p=>{const m=i.associations.get(p);m!=null&&d.set(p,m)}),d};return i.associations=c(s),s})}}function ase(n,e,t){const r=e.attributes,i=new Yr;if(r.POSITION!==void 0){const a=t.json.accessors[r.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(i.set(new k(l[0],l[1],l[2]),new k(c[0],c[1],c[2])),a.normalized){const h=Ww(hh[a.componentType]);i.min.multiplyScalar(h),i.max.multiplyScalar(h)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new k,l=new k;for(let c=0,h=s.length;c<h;c++){const d=s[c];if(d.POSITION!==void 0){const p=t.json.accessors[d.POSITION],m=p.min,v=p.max;if(m!==void 0&&v!==void 0){if(l.setX(Math.max(Math.abs(m[0]),Math.abs(v[0]))),l.setY(Math.max(Math.abs(m[1]),Math.abs(v[1]))),l.setZ(Math.max(Math.abs(m[2]),Math.abs(v[2]))),p.normalized){const A=Ww(hh[p.componentType]);l.multiplyScalar(A)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(a)}n.boundingBox=i;const o=new Dr;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,n.boundingSphere=o}function kL(n,e,t){const r=e.attributes,i=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in r){const a=jw[o]||o.toLowerCase();a in n.attributes||i.push(s(r[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});i.push(o)}return Ta(n,e),ase(n,e,t),Promise.all(i).then(function(){return e.targets!==void 0?tse(n,e.targets,t):n})}const tS=new WeakMap;class lse extends ei{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,i){const s=new Ji(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(i)},r,i)}decodeDracoFile(e,t,r,i){const s={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const c=t.attributeTypes[l];c.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=c.name)}const r=JSON.stringify(t);if(tS.has(e)){const l=tS.get(e);if(l.key===r)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(i=l,new Promise((c,h)=>{i._callbacks[s]={resolve:c,reject:h},i.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{i&&s&&this._releaseTask(i,s)}),tS.set(e,{key:r,promise:a}),a}_createGeometry(e){const t=new bt;e.index&&t.setIndex(new Jt(e.index.array,1));for(let r=0;r<e.attributes.length;r++){const i=e.attributes[r],s=i.name,o=i.array,a=i.itemSize;t.setAttribute(s,new Jt(o,a))}return t}_loadLibrary(e,t){const r=new Ji(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise((i,s)=>{r.load(e,i,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(r=>{const i=r[0];e||(this.decoderConfig.wasmBinary=r[1]);const s=cse.toString(),o=["/* draco decoder */",i,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(s){const o=s.data;switch(o.type){case"decode":i._callbacks[o.id].resolve(o);break;case"error":i._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,s){return i._taskLoad>s._taskLoad?-1:1});const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function cse(){let n,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(h){n.onModuleLoaded=function(d){h({draco:d})},DracoDecoderModule(n)});break;case"decode":const l=a.buffer,c=a.taskConfig;e.then(h=>{const d=h.draco,p=new d.Decoder,m=new d.DecoderBuffer;m.Init(new Int8Array(l),l.byteLength);try{const v=t(d,p,m,c),A=v.attributes.map(_=>_.array.buffer);v.index&&A.push(v.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:v},A)}catch(v){console.error(v),self.postMessage({type:"error",id:a.id,error:v.message})}finally{d.destroy(m),d.destroy(p)}});break}};function t(o,a,l,c){const h=c.attributeIDs,d=c.attributeTypes;let p,m;const v=a.GetEncodedGeometryType(l);if(v===o.TRIANGULAR_MESH)p=new o.Mesh,m=a.DecodeBufferToMesh(l,p);else if(v===o.POINT_CLOUD)p=new o.PointCloud,m=a.DecodeBufferToPointCloud(l,p);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!m.ok()||p.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+m.error_msg());const A={index:null,attributes:[]};for(const _ in h){const g=self[d[_]];let x,S;if(c.useUniqueIDs)S=h[_],x=a.GetAttributeByUniqueId(p,S);else{if(S=a.GetAttributeId(p,o[h[_]]),S===-1)continue;x=a.GetAttribute(p,S)}A.attributes.push(i(o,a,p,_,g,x))}return v===o.TRIANGULAR_MESH&&(A.index=r(o,a,p)),o.destroy(p),A}function r(o,a,l){const h=l.num_faces()*3,d=h*4,p=o._malloc(d);a.GetTrianglesUInt32Array(l,d,p);const m=new Uint32Array(o.HEAPF32.buffer,p,h).slice();return o._free(p),{array:m,itemSize:1}}function i(o,a,l,c,h,d){const p=d.num_components(),v=l.num_points()*p,A=v*h.BYTES_PER_ELEMENT,_=s(o,h),g=o._malloc(A);a.GetAttributeDataArrayForAllPoints(l,d,_,A,g);const x=new h(o.HEAPF32.buffer,g,v).slice();return o._free(g),{name:c,array:x,itemSize:p}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let P0;const nS=()=>{if(P0)return P0;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),r=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let i=n;WebAssembly.validate(t)&&(i=e);let s;const o=WebAssembly.instantiate(a(i),{}).then(d=>{s=d.instance,s.exports.__wasm_call_ctors()});function a(d){const p=new Uint8Array(d.length);for(let v=0;v<d.length;++v){const A=d.charCodeAt(v);p[v]=A>96?A-71:A>64?A-65:A>47?A+4:A>46?63:62}let m=0;for(let v=0;v<d.length;++v)p[m++]=p[v]<60?r[p[v]]:(p[v]-60)*64+p[++v];return p.buffer.slice(0,m)}function l(d,p,m,v,A,_){const g=s.exports.sbrk,x=m+3&-4,S=g(x*v),w=g(A.length),R=new Uint8Array(s.exports.memory.buffer);R.set(A,w);const C=d(S,m,v,w,A.length);if(C===0&&_&&_(S,x,v),p.set(R.subarray(S,S+m*v)),g(S-g(0)),C!==0)throw new Error(`Malformed buffer data: ${C}`)}const c={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},h={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return P0={ready:o,supported:!0,decodeVertexBuffer(d,p,m,v,A){l(s.exports.meshopt_decodeVertexBuffer,d,p,m,v,s.exports[c[A]])},decodeIndexBuffer(d,p,m,v){l(s.exports.meshopt_decodeIndexBuffer,d,p,m,v)},decodeIndexSequence(d,p,m,v){l(s.exports.meshopt_decodeIndexSequence,d,p,m,v)},decodeGltfBuffer(d,p,m,v,A,_){l(s.exports[h[A]],d,p,m,v,s.exports[c[_]])}},P0};let I0=null,n9="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function r9(n,e,t){return r=>{t&&t(r),n&&(I0||(I0=new lse),I0.setDecoderPath(typeof n=="string"?n:n9),r.setDRACOLoader(I0)),e&&r.setMeshoptDecoder(typeof nS=="function"?nS():nS)}}function j_(n,e=!0,t=!0,r){return lm($C,n,r9(e,t,r))}j_.preload=(n,e=!0,t=!0,r)=>lm.preload($C,n,r9(e,t,r));j_.clear=n=>lm.clear($C,n);j_.setDecoderPath=n=>{n9=n};const use=re.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:r,enableDamping:i=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...c},h)=>{const d=cs(C=>C.invalidate),p=cs(C=>C.camera),m=cs(C=>C.gl),v=cs(C=>C.events),A=cs(C=>C.setEvents),_=cs(C=>C.set),g=cs(C=>C.get),x=cs(C=>C.performance),S=e||p,w=r||v.connected||m.domElement,R=re.useMemo(()=>new Rie(S),[S]);return XU(()=>{R.enabled&&R.update()},-1),re.useEffect(()=>(s&&R.connect(s===!0?w:s),R.connect(w),()=>void R.dispose()),[s,w,t,R,d]),re.useEffect(()=>{const C=N=>{d(),t&&x.regress(),o&&o(N)},I=N=>{a&&a(N)},D=N=>{l&&l(N)};return R.addEventListener("change",C),R.addEventListener("start",I),R.addEventListener("end",D),()=>{R.removeEventListener("start",I),R.removeEventListener("end",D),R.removeEventListener("change",C)}},[o,a,l,R,d,A]),re.useEffect(()=>{if(n){const C=g().controls;return _({controls:R}),()=>_({controls:C})}},[n,R]),re.createElement("primitive",Uh({ref:h,object:R,enableDamping:i},c))});function hse({all:n,scene:e,camera:t}){const r=cs(({gl:o})=>o),i=cs(({camera:o})=>o),s=cs(({scene:o})=>o);return re.useLayoutEffect(()=>{const o=[];n&&(e||s).traverse(c=>{c.visible===!1&&(o.push(c),c.visible=!0)}),r.compile(e||s,t||i);const a=new gC(128);new mC(.01,1e5,a).update(r,e||s),a.dispose(),o.forEach(c=>c.visible=!1)},[]),null}function fse(){return b.jsx("div",{className:"mx-auto 2xl:max-w-screen-2xl h-96 flex items-center justify-center bg-black/50",children:b.jsx("div",{className:"w-full h-full",children:b.jsx(pse,{})})})}const dse=({isMobile:n})=>{const e=j_("./Air Jordan/air_jordan_1_chicago_black_toe/scene.gltf");return b.jsxs("mesh",{children:[b.jsx("hemisphereLight",{intensity:.15,groundColor:"black"}),b.jsx("spotLight",{position:[5,1.25,1.5],angle:.42,penumbra:.1,intensity:.1,castShadow:!0,"shadow-mapSize":1024}),b.jsx("pointLight",{intensity:1}),b.jsx("primitive",{object:e.scene,scale:n?.7:27.5,position:n?[0,-3,-2.2]:[-1.5,-1.25,1.5]})]})},pse=()=>b.jsxs(die,{frameloop:"demand",shadows:!0,dpr:[10,2],camera:{position:[18,3,5],fov:25},gl:{preserveDrawingBuffer:!0},children:[b.jsxs(re.Suspense,{fallback:b.jsx(mse,{}),children:[b.jsx(use,{enableZoom:!1,maxPolarAngle:Math.PI/2,minPolarAngle:Math.PI/2}),b.jsx(dse,{isMobile:!1})]}),b.jsx(hse,{all:!0})]}),mse=()=>{const{progress:n}=wie();return b.jsxs(Eie,{as:"div",center:!0,style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[b.jsx("span",{className:"canvas-loader"}),b.jsxs("p",{style:{fontSize:14,color:"#F1F1F1",fontWeight:800,marginTop:40},children:[n.toFixed(2),"%"]})]})};function gse(){const{loading:n,data:e}=F8(r=>r.products),t=J8();return re.useEffect(()=>{t(K0())},[]),b.jsxs(b.Fragment,{children:[b.jsx(nJ,{}),b.jsx(AJ,{isLoading:n,products:e,filterObject:{tags:["Trend"]}}),b.jsxs("aside",{className:"sm:hidden h-24 mx-auto w-11/12 shadow-md shadow-black/15 bg-gray-50 flex items-center justify-start gap-x-3 px-4 py-2 rounded-lg",children:[b.jsx("img",{src:JX,alt:"banner icon"}),b.jsxs("div",{className:"",children:[b.jsxs("p",{className:"text-base font-bold",children:["Special Offers"," ",b.jsx("span",{className:"p-1 mx-2 border border-gray-300 rounded-full",children:"😱"})]}),b.jsxs("span",{className:"text-xs",children:["We make sure you get the ",b.jsx("br",{})," offer you need at best prices"]})]})]}),b.jsx(EJ,{isLoading:n,products:e}),b.jsx(wJ,{}),b.jsx(E$,{}),b.jsx(M$,{}),b.jsx(T$,{}),b.jsx(R$,{}),b.jsx(fse,{})]})}function vse(n){return cn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M133.3 33.41L77.89 47.25 34.6 148.3l33.29 22.2 27.46-54.9 17.05 4.9-15.07 150.1H245.2l9.2-87.9.9-8.1h4.5l-5.4-54.1 17.1-4.9 27.4 54.9 33.3-22.2-43.3-101.05-55.4-13.84c-5.5 3.87-12.2 6.21-19.5 7.95-9.4 2.21-20 3.24-30.6 3.24-10.6 0-21.2-1.03-30.6-3.24-7.3-1.74-14-4.07-19.5-7.95zM271.5 192.6l-1.5 14h178.8l-1.5-14zm-3.4 32l-26.7 254h62.7l46.5-216.9h17.6l46.5 216.9h62.7l-26.7-254z"},child:[]}]})(n)}function yse(n){return cn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(n)}function _se(n){return cn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M1 11v10h5v-6h4v6h5V11L8 6z"},child:[]},{tag:"path",attr:{d:"M10 3v1.97l7 5V11h2v2h-2v2h2v2h-2v4h6V3H10zm9 6h-2V7h2v2z"},child:[]}]})(n)}function xse(n){return cn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"},child:[]}]})(n)}function Ase(n){return cn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10.5 13H8v-3h2.5V7.5h3V10H16v3h-2.5v2.5h-3V13zM12 2 4 5v6.09c0 5.05 3.41 9.76 8 10.91 4.59-1.15 8-5.86 8-10.91V5l-8-3z"},child:[]}]})(n)}function Sse(n){return cn({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M15.825.12a.5.5 0 0 1 .132.584c-1.53 3.43-4.743 8.17-7.095 10.64a6.067 6.067 0 0 1-2.373 1.534c-.018.227-.06.538-.16.868-.201.659-.667 1.479-1.708 1.74a8.118 8.118 0 0 1-3.078.132 3.659 3.659 0 0 1-.562-.135 1.382 1.382 0 0 1-.466-.247.714.714 0 0 1-.204-.288.622.622 0 0 1 .004-.443c.095-.245.316-.38.461-.452.394-.197.625-.453.867-.826.095-.144.184-.297.287-.472l.117-.198c.151-.255.326-.54.546-.848.528-.739 1.201-.925 1.746-.896.126.007.243.025.348.048.062-.172.142-.38.238-.608.261-.619.658-1.419 1.187-2.069 2.176-2.67 6.18-6.206 9.117-8.104a.5.5 0 0 1 .596.04zM4.705 11.912a1.23 1.23 0 0 0-.419-.1c-.246-.013-.573.05-.879.479-.197.275-.355.532-.5.777l-.105.177c-.106.181-.213.362-.32.528a3.39 3.39 0 0 1-.76.861c.69.112 1.736.111 2.657-.12.559-.139.843-.569.993-1.06a3.122 3.122 0 0 0 .126-.75l-.793-.792zm1.44.026c.12-.04.277-.1.458-.183a5.068 5.068 0 0 0 1.535-1.1c1.9-1.996 4.412-5.57 6.052-8.631-2.59 1.927-5.566 4.66-7.302 6.792-.442.543-.795 1.243-1.042 1.826-.121.288-.214.54-.275.72v.001l.575.575zm-4.973 3.04.007-.005a.031.031 0 0 1-.007.004zm3.582-3.043.002.001h-.002z"},child:[]}]})(n)}function Ese(n){return cn({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M216,40H40A16,16,0,0,0,24,56V200a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40ZM128,160a48.05,48.05,0,0,1-48-48,8,8,0,0,1,16,0,32,32,0,0,0,64,0,8,8,0,0,1,16,0A48.05,48.05,0,0,1,128,160ZM40,72V56H216V72Z"},child:[]}]})(n)}function wse(){const n=Dp(),[e,t]=re.useState(!1);return b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"hidden md:flex flex-col mx-auto 2xl:max-w-screen-2xl",children:[b.jsxs("div",{className:`${n.pathname==="/EcoVibe/"?"flex":"hidden"} w-full border-b border-gray-200 items-center justify-between px-8 py-2`,children:[b.jsx("div",{className:"flex items-center gap-x-2",children:WX.map(({title:r},i)=>b.jsx(Co,{className:"text-gray-600 hover:text-primary-500 transition-all duration-300",children:r},i))}),b.jsxs("div",{className:"flex gap-x-4",children:[b.jsx("div",{className:"text-gray-600",children:"USD"}),b.jsx("div",{className:"text-gray-600",children:"Englsih"})]})]}),b.jsxs("div",{className:"w-full flex items-center justify-between px-8 py-4 border-b border-gray-200",children:[b.jsxs("div",{className:"flex items-center justify-center gap-x-0.5 cursor-pointer",children:[b.jsx("span",{className:"text-xl lg:text-4xl text-primary-600",children:b.jsx(Ese,{})}),b.jsx("span",{className:"lg:text-xl whitespace-nowrap font-bold",children:"Eco Vibe"})]}),b.jsxs("div",{className:"flex items-center flex-1 px-4 lg:px-16 h-12",children:[b.jsxs("select",{name:"",id:"",className:"bg-gray-100 px-4 py-3 w-40 rounded-l-md border border-r-0 border-gray-300 h-full",children:[b.jsx("option",{value:"",className:"px-2 py-1",children:"All Categories"}),hI.map((r,i)=>b.jsx("option",{children:r.title},i))]}),b.jsx("input",{type:"text",className:"bg-gray-100 px-4 py-2.5 border border-gray-300 h-full focus:outline-none xl:w-2/3",placeholder:"Im Shopping For..."}),b.jsx("span",{className:"bg-primary-400 text-white text-2xl rounded-r-md h-full flex items-center px-4",children:b.jsx(dI,{})})]}),b.jsxs("div",{className:"flex items-center justify-center gap-x-2 xl:gap-x-4",children:[b.jsxs("div",{className:" hidden xl:flex flex-col items-start px-4 text-gray-600",children:[b.jsx("span",{children:"Need Help ?"}),b.jsx("span",{children:"+123456789"})]}),b.jsx("div",{className:"p-3 hover:bg-gray-300 transition-all rounded-full bg-gray-200 text-gray-800 text-2xl",children:b.jsx(uI,{})}),b.jsx("div",{className:"p-3 hover:bg-gray-300 transition-all rounded-full bg-gray-200 text-gray-800 text-2xl",children:b.jsx(GT,{})}),b.jsx("div",{className:"p-3 hover:bg-gray-300 transition-all rounded-full bg-gray-200 text-gray-800 text-2xl",children:b.jsx(fI,{})})]})]}),b.jsxs("div",{className:`${n.pathname==="/EcoVibe/"?"flex":"hidden"} items-center justify-between px-8 py-4 relative`,children:[b.jsxs("div",{className:"px-4 py-3 group bg-secondary-500 text-white hover:bg-primary-700 transition-all rounded-md cursor-pointer flex items-center gap-x-2",children:[b.jsx("span",{className:"text-2xl",children:b.jsx(xse,{})}),b.jsx("span",{children:"All Categories"}),b.jsx("span",{className:"text-2xl",children:b.jsx(rJ,{})}),b.jsx("div",{className:"absolute w-40 top-16 bg-slate-100 rounded-md hidden z-20 group-hover:block",children:b.jsx("div",{className:"flex flex-col gap-y-2 px-4 py-2",children:hI.map((r,i)=>b.jsxs("span",{className:"text-lg relative text-slate-950 group hover:text-primary-300 transition-all",children:[r.title,b.jsx("div",{className:"a"})]},i))})})]}),b.jsxs("div",{className:"flex items-center justify-center gap-x-3",children:[b.jsx(Co,{children:"Mens"}),b.jsx(Co,{children:"Womens"}),b.jsx(Co,{children:"Kids"}),b.jsx(Co,{children:"Electronics"}),b.jsx(Co,{children:"Kitchen"}),b.jsx(Co,{children:"News"}),b.jsx(Co,{children:"Contact Us"})]})]})]}),b.jsxs("div",{className:"md:hidden",children:[b.jsxs("div",{className:"flex flex-col gap-y-3 w-full",children:[b.jsxs("div",{className:"flex items-center bg-white justify-between shadow-lg px-2 py-4",children:[b.jsxs("h2",{onClick:()=>t(!0),className:"flex items-center justify-center gap-x-1 cursor-pointer",children:[b.jsx("span",{children:b.jsx(iJ,{className:"text-2xl"})}),b.jsx("span",{className:"text-xl font-bold",children:"Home"})]}),b.jsxs("div",{className:"flex items-center justify-center gap-x-2",children:[b.jsx(fI,{className:"text-2xl"}),b.jsx(jX,{className:"text-2xl"})]})]}),b.jsxs("div",{className:"flex items-center rounded-xl w-11/12 mx-auto bg-slate-50 border border-slate-300 justify-between px-3 py-2 gap-x-2",children:[b.jsx(dI,{className:"text-2xl"}),b.jsx("input",{type:"text",className:"focus:outline-none w-full bg-inherit",placeholder:"Search something"})]}),b.jsxs("div",{className:"",children:[b.jsxs("div",{className:"flex items-center justify-between px-3 py-1",children:[b.jsx("h2",{className:"font-bold",children:"Categories"}),b.jsx(Co,{children:b.jsxs("span",{className:"text-sm flex text-gray-700 items-center justify-center gap-x-1",children:["Show More ",b.jsx(Ns,{className:"text-xs font-thin"})]})})]}),b.jsxs("div",{className:"flex items-center sm:justify-center gap-x-4 overflow-auto px-6 py-2",children:[b.jsxs("div",{className:"flex flex-col items-center justify-between gap-y-2",children:[b.jsx("span",{className:"bg-primary-100 p-3 rounded-full",children:b.jsx(vse,{className:"text-3xl text-primary-500"})}),b.jsx("p",{className:"text-sm line-clamp-1",children:"Fashion"})]}),b.jsxs("div",{className:"flex flex-col items-center justify-between gap-y-2",children:[b.jsx("span",{className:"bg-primary-100 p-3 rounded-full",children:b.jsx(GX,{className:"text-3xl text-primary-500"})}),b.jsx("p",{className:"text-sm line-clamp-1",children:"Electronics"})]}),b.jsxs("div",{className:"flex flex-col items-center justify-between gap-y-2",children:[b.jsx("span",{className:"bg-primary-100 p-3 rounded-full",children:b.jsx(_se,{className:"text-3xl text-primary-500"})}),b.jsx("p",{className:"text-sm line-clamp-1",children:"Home Decor"})]}),b.jsxs("div",{className:"flex flex-col items-center justify-between gap-y-2",children:[b.jsx("span",{className:"bg-primary-100 p-3 rounded-full",children:b.jsx(Ase,{className:"text-3xl text-primary-500"})}),b.jsx("p",{className:"text-sm line-clamp-1",children:"Health"})]}),b.jsxs("div",{className:"flex flex-col items-center justify-between gap-y-2",children:[b.jsx("span",{className:"bg-primary-100 p-3 rounded-full",children:b.jsx(Sse,{className:"text-3xl text-primary-500"})}),b.jsx("p",{className:"text-sm line-clamp-1",children:"Beauty"})]})]})]})]}),b.jsxs("div",{className:`${e?"opacity-100 visible":"opacity-0 invisible"} fixed inset-0 z-30 transition-all duration-500`,children:[b.jsxs("div",{className:`${e?"translate-x-0":"-translate-x-96"} w-3/4 h-full bg-gray-100 z-10 transition-all duration-500 flex flex-col items-center`,children:[b.jsxs("div",{className:"w-full h-20 bg-gray-200 flex items-center justify-between px-4",children:[b.jsxs("div",{className:"flex items-center justify-center gap-x-3",children:[b.jsx("div",{className:"w-10 h-10 bg-gray-400 rounded-full flex items-center justify-center",children:b.jsx(uI,{className:"text-2xl"})}),b.jsxs("div",{className:"flex flex-col justify-between items-start",children:[b.jsx("h2",{children:"Guest User"}),b.jsx("p",{className:"text-sm",children:"+12394595"})]})]}),b.jsx("div",{className:"",children:b.jsx("button",{onClick:()=>t(!1),className:"text-2xl",children:b.jsx(yse,{})})})]}),b.jsxs("div",{className:"max-h-full overflow-auto w-full gap-y-1 mt-1 flex flex-col items-start",children:[b.jsxs("div",{className:"flex items-center justify-start gap-x-2 px-4 py-4 w-full",children:[b.jsx("span",{className:"text-3xl",children:b.jsx($X,{})}),b.jsx("h3",{className:"text-base",children:"Shop By Category"})]}),b.jsxs("div",{className:"flex items-center justify-start gap-x-2 px-4 py-4 w-full",children:[b.jsx("span",{className:"text-3xl",children:b.jsx(UF,{})}),b.jsx("h3",{className:"text-base",children:"My Orders"})]}),b.jsxs("div",{className:"flex items-center justify-start gap-x-2 px-4 py-4 w-full",children:[b.jsx("span",{className:"text-3xl",children:b.jsx(QX,{})}),b.jsx("h3",{className:"text-base",children:"Favorites"})]}),b.jsxs("div",{className:"flex items-center justify-start gap-x-2 px-4 py-4 w-full",children:[b.jsx("span",{className:"text-3xl",children:b.jsx(qX,{})}),b.jsx("h3",{className:"text-base",children:"FAQs"})]}),b.jsxs("div",{className:"flex items-center justify-start gap-x-2 px-4 py-4 w-full",children:[b.jsx("span",{className:"text-3xl",children:b.jsx(ZX,{})}),b.jsx("h3",{className:"text-base",children:"Addresses"})]}),b.jsxs("div",{className:"flex items-center justify-start gap-x-2 px-4 py-4 w-full",children:[b.jsx("span",{className:"text-3xl",children:b.jsx(YX,{})}),b.jsx("h3",{className:"text-base",children:"Terms & Conditions"})]}),b.jsxs("div",{className:"flex items-center justify-start gap-x-2 px-4 py-4 w-full",children:[b.jsx("span",{className:"text-3xl",children:b.jsx(KX,{})}),b.jsx("h3",{className:"text-base",children:"Terms & Conditions"})]}),b.jsxs("div",{className:"flex items-center justify-start gap-x-2 px-4 py-4 w-full",children:[b.jsx("span",{className:"text-3xl",children:b.jsx(eJ,{})}),b.jsx("h3",{className:"text-base",children:"Privacy Policy"})]}),b.jsxs("div",{className:"flex items-center justify-start gap-x-2 px-4 py-4 w-full",children:[b.jsx("span",{className:"text-3xl",children:b.jsx(tJ,{})}),b.jsx("h3",{className:"text-base",children:"Sign In"})]})]})]}),b.jsx("div",{onClick:()=>t(!1),className:"w-full h-full bg-black bg-opacity-30 -z-10 absolute inset-0"})]})]})]})}function Mse({children:n}){return b.jsxs("div",{children:[b.jsx(wse,{}),n]})}function Tse(){return b.jsx("div",{className:"bg-orange-500 h-screen",children:"ProductsPage"})}function Cse(){return b.jsx("div",{className:"bg-slate-400 h-screen",children:"ProductsFilterPage"})}const bse=IH({reducer:{products:NX}});function Rse(){return b.jsx(j8,{store:bse,children:b.jsx(Mse,{children:b.jsxs(d8,{children:[b.jsx(j0,{path:"/EcoVibe/",element:b.jsx(gse,{})}),b.jsx(j0,{path:"/EcoVibe/Products",element:b.jsx(Tse,{})}),b.jsx(j0,{path:"/EcoVibe/Filtered-Products",element:b.jsx(Cse,{})})]})})})}iS.createRoot(document.getElementById("root")).render(b.jsx(x8,{children:b.jsx(Rse,{})}));
